"use strict";var gee=Object.defineProperty,_ee=Object.defineProperties,vee=Object.getOwnPropertyDescriptors,qG=Object.getOwnPropertySymbols,yee=Object.prototype.hasOwnProperty,bee=Object.prototype.propertyIsEnumerable,WG=(lt,De,F)=>De in lt?gee(lt,De,{enumerable:!0,configurable:!0,writable:!0,value:F}):lt[De]=F,YG=(lt,De)=>{for(var F in De||(De={}))yee.call(De,F)&&WG(lt,F,De[F]);if(qG)for(var F of qG(De))bee.call(De,F)&&WG(lt,F,De[F]);return lt},ZG=(lt,De)=>_ee(lt,vee(De));(self.webpackChunkmerchants_ball_beers=self.webpackChunkmerchants_ball_beers||[]).push([[179],{9121:(lt,De,F)=>{var c=F(5e3);let G=null;function N(){return G}const oe=new c.OlP("DocumentToken");let fe=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return function we(){return(0,c.LFG)($)}()},providedIn:"platform"}),n})();const W=new c.OlP("Location Initialized");let $=(()=>{class n extends fe{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return N().getBaseHref(this._doc)}onPopState(e){const i=N().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){const i=N().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,i,r){ae()?this._history.pushState(e,i,r):this.location.hash=r}replaceState(e,i,r){ae()?this._history.replaceState(e,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(oe))},n.\u0275prov=c.Yz7({token:n,factory:function(){return function Ke(){return new $((0,c.LFG)(oe))}()},providedIn:"platform"}),n})();function ae(){return!!window.history.pushState}function Ne(n,t){if(0==n.length)return t;if(0==t.length)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?n+t.substring(1):1==e?n+t:n+"/"+t}function Ve(n){const t=n.match(/#|\?|$/),e=t&&t.index||n.length;return n.slice(0,e-("/"===n[e-1]?1:0))+n.slice(e)}function qe(n){return n&&"?"!==n[0]?"?"+n:n}let ye=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return function Ae(n){const t=(0,c.LFG)(oe).location;return new We((0,c.LFG)(fe),t&&t.origin||"")}()},providedIn:"root"}),n})();const Ze=new c.OlP("appBaseHref");let We=(()=>{class n extends ye{constructor(e,i){if(super(),this._platformLocation=e,this._removeListenerFns=[],null==i&&(i=this._platformLocation.getBaseHrefFromDOM()),null==i)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=i}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Ne(this._baseHref,e)}path(e=!1){const i=this._platformLocation.pathname+qe(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,s){const l=this.prepareExternalUrl(r+qe(s));this._platformLocation.pushState(e,i,l)}replaceState(e,i,r,s){const l=this.prepareExternalUrl(r+qe(s));this._platformLocation.replaceState(e,i,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,e)}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(fe),c.LFG(Ze,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Fe=(()=>{class n extends ye{constructor(e,i){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(e){const i=Ne(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,r,s){let l=this.prepareExternalUrl(r+qe(s));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(e,i,l)}replaceState(e,i,r,s){let l=this.prepareExternalUrl(r+qe(s));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(e,i,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,e)}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(fe),c.LFG(Ze,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Oe=(()=>{class n{constructor(e,i){this._subject=new c.vpe,this._urlChangeListeners=[],this._platformStrategy=e;const r=this._platformStrategy.getBaseHref();this._platformLocation=i,this._baseHref=Ve(re(r)),this._platformStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+qe(i))}normalize(e){return n.stripTrailingSlash(function Qe(n,t){return n&&t.startsWith(n)?t.substring(n.length):t}(this._baseHref,re(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._platformStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+qe(i)),r)}replaceState(e,i="",r=null){this._platformStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+qe(i)),r)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(e=0){var i,r;null===(r=(i=this._platformStrategy).historyGo)||void 0===r||r.call(i,e)}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}))}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i,complete:r})}}return n.normalizeQueryParams=qe,n.joinWithSlash=Ne,n.stripTrailingSlash=Ve,n.\u0275fac=function(e){return new(e||n)(c.LFG(ye),c.LFG(fe))},n.\u0275prov=c.Yz7({token:n,factory:function(){return function Se(){return new Oe((0,c.LFG)(ye),(0,c.LFG)(fe))}()},providedIn:"root"}),n})();function re(n){return n.replace(/\/index.html$/,"")}class Ia{constructor(t,e,i,r){this.$implicit=t,this.ngForOf=e,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let bi=(()=>{class n{constructor(e,i,r){this._viewContainer=e,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const i=this._viewContainer;e.forEachOperation((r,s,l)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new Ia(r.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)i.remove(null===s?void 0:s);else if(null!==s){const d=i.get(s);i.move(d,l),xo(d,r)}});for(let r=0,s=i.length;r<s;r++){const d=i.get(r).context;d.index=r,d.count=s,d.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{xo(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(e,i){return!0}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(c.s_b),c.Y36(c.Rgc),c.Y36(c.ZZ4))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function xo(n,t){n.context.$implicit=t.item}let Ni=(()=>{class n{constructor(e,i){this._viewContainer=e,this._context=new In,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){bd("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){bd("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,i){return!0}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(c.s_b),c.Y36(c.Rgc))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class In{constructor(){this.$implicit=null,this.ngIf=null}}function bd(n,t){if(t&&!t.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,c.AaK)(t)}'.`)}class ta{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let Lr=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(e)}_matchCase(e){const i=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(e){if(this._defaultViews&&e!==this._defaultUsed){this._defaultUsed=e;for(let i=0;i<this._defaultViews.length;i++)this._defaultViews[i].enforceState(e)}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=c.lG2({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),n})(),gr=(()=>{class n{constructor(e,i,r){this.ngSwitch=r,r._addCase(),this._view=new ta(e,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(c.s_b),c.Y36(c.Rgc),c.Y36(Lr,9))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),n})(),Zn=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();const Td="browser";function Ti(n){return n===Td}function or(n){return"server"===n}let lc=(()=>{class n{}return n.\u0275prov=(0,c.Yz7)({token:n,providedIn:"root",factory:()=>new cc((0,c.LFG)(oe),window)}),n})();class cc{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function Ws(n,t){const e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const l=s.getElementById(t)||s.querySelector(`[name="${t}"]`);if(l)return l}r=i.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),i=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=ru(this.window.history)||ru(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function ru(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class To extends class bl extends class be{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function he(n){G||(G=n)}(new To)}onAndCancel(t,e,i){return t.addEventListener(e,i,!1),()=>{t.removeEventListener(e,i,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function uc(){return An=An||document.querySelector("base"),An?An.getAttribute("href"):null}();return null==e?null:function na(n){wl=wl||document.createElement("a"),wl.setAttribute("href",n);const t=wl.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){An=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function Sa(n,t){t=encodeURIComponent(t);for(const e of n.split(";")){const i=e.indexOf("="),[r,s]=-1==i?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===t)return decodeURIComponent(s)}return null}(document.cookie,t)}}let wl,An=null;const Fi=new c.OlP("TRANSITION_ID"),ni=[{provide:c.ip1,useFactory:function dc(n,t,e){return()=>{e.get(c.CZH).donePromise.then(()=>{const i=N(),r=t.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[Fi,oe,c.zs3],multi:!0}];class Ys{static init(){(0,c.VLi)(new Ys)}addToWindow(t){c.dqk.getAngularTestability=(i,r=!0)=>{const s=t.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},c.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),c.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),c.dqk.frameworkStabilizers||(c.dqk.frameworkStabilizers=[]),c.dqk.frameworkStabilizers.push(i=>{const r=c.dqk.getAllAngularTestabilities();let s=r.length,l=!1;const d=function(p){l=l||p,s--,0==s&&i(l)};r.forEach(function(p){p.whenStable(d)})})}findTestabilityInTree(t,e,i){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:i?N().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let Li=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Oa=new c.OlP("EventManagerPlugins");let Ts=(()=>{class n{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(r=>r.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,i,r){return this._findPluginFor(i).addEventListener(e,i,r)}addGlobalEventListener(e,i,r){return this._findPluginFor(i).addGlobalEventListener(e,i,r)}getZone(){return this._zone}_findPluginFor(e){const i=this._eventNameToPlugin.get(e);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const l=r[s];if(l.supports(e))return this._eventNameToPlugin.set(e,l),l}throw new Error(`No event manager plugin found for event ${e}`)}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(Oa),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class ou{constructor(t){this._doc=t}addGlobalEventListener(t,e,i){const r=N().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,i)}}let Br=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(e){const i=new Set;e.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Io=(()=>{class n extends Br{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,i,r){e.forEach(s=>{const l=this._doc.createElement("style");l.textContent=s,r.push(i.appendChild(l))})}addHost(e){const i=[];this._addStylesToHost(this._stylesSet,e,i),this._hostNodes.set(e,i)}removeHost(e){const i=this._hostNodes.get(e);i&&i.forEach(Ao),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(e,r,i)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(Ao))}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(oe))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function Ao(n){N().remove(n)}const St={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Cl=/%COMP%/g;function Re(n,t,e){for(let i=0;i<t.length;i++){let r=t[i];Array.isArray(r)?Re(n,r,e):(r=r.replace(Cl,n),e.push(r))}return e}function en(n){return t=>{if("__ngUnwrap__"===t)return n;!1===n(t)&&(t.preventDefault(),t.returnValue=!1)}}let Kn=(()=>{class n{constructor(e,i,r){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new ko(e)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;switch(i.encapsulation){case c.ifc.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new lu(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(e),r}case 1:case c.ifc.ShadowDom:return new cu(this.eventManager,this.sharedStylesHost,e,i);default:if(!this.rendererByCompId.has(i.id)){const r=Re(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(Ts),c.LFG(Io),c.LFG(c.AFp))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class ko{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS(St[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,i){t&&t.insertBefore(e,i)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let i="string"==typeof t?document.querySelector(t):t;if(!i)throw new Error(`The selector "${t}" did not match any elements`);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,r){if(r){e=r+":"+e;const s=St[r];s?t.setAttributeNS(s,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){const r=St[i];r?t.removeAttributeNS(r,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,r){r&(c.JOm.DashCase|c.JOm.Important)?t.style.setProperty(e,i,r&c.JOm.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&c.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t[e]=i}setValue(t,e){t.nodeValue=e}listen(t,e,i){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,en(i)):this.eventManager.addEventListener(t,e,en(i))}}class lu extends ko{constructor(t,e,i,r){super(t),this.component=i;const s=Re(r+"-"+i.id,i.styles,[]);e.addStyles(s),this.contentAttr=function xl(n){return"_ngcontent-%COMP%".replace(Cl,n)}(r+"-"+i.id),this.hostAttr=function Rf(n){return"_nghost-%COMP%".replace(Cl,n)}(r+"-"+i.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}}class cu extends ko{constructor(t,e,i,r){super(t),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=Re(r.id,r.styles,[]);for(let l=0;l<s.length;l++){const d=document.createElement("style");d.textContent=s[l],this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let Od=(()=>{class n extends ou{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r){return e.addEventListener(i,r,!1),()=>this.removeEventListener(e,i,r)}removeEventListener(e,i,r){return e.removeEventListener(i,r)}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(oe))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Pd=["alt","control","meta","shift"],Pa={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ii={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ms={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let uu=(()=>{class n extends ou{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,i,r){const s=n.parseEventName(i),l=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>N().onAndCancel(e,s.domEventName,l))}static parseEventName(e){const i=e.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let l="";if(Pd.forEach(p=>{const _=i.indexOf(p);_>-1&&(i.splice(_,1),l+=p+".")}),l+=s,0!=i.length||0===s.length)return null;const d={};return d.domEventName=r,d.fullKey=l,d}static getEventFullKey(e){let i="",r=function Is(n){let t=n.key;if(null==t){if(t=n.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===n.location&&Ii.hasOwnProperty(t)&&(t=Ii[t]))}return Pa[t]||t}(e);return r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),Pd.forEach(s=>{s!=r&&ms[s](e)&&(i+=s+".")}),i+=r,i}static eventCallback(e,i,r){return s=>{n.getEventFullKey(s)===e&&r.runGuarded(()=>i(s))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(oe))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Fd=(0,c.eFA)(c._c5,"browser",[{provide:c.Lbi,useValue:Td},{provide:c.g9A,useValue:function Zs(){To.makeCurrent(),Ys.init()},multi:!0},{provide:oe,useFactory:function Nd(){return(0,c.RDi)(document),document},deps:[]}]),ia=[{provide:c.zSh,useValue:"root"},{provide:c.qLn,useFactory:function Il(){return new c.qLn},deps:[]},{provide:Oa,useClass:Od,multi:!0,deps:[oe,c.R0b,c.Lbi]},{provide:Oa,useClass:uu,multi:!0,deps:[oe]},{provide:Kn,useClass:Kn,deps:[Ts,Io,c.AFp]},{provide:c.FYo,useExisting:Kn},{provide:Br,useExisting:Io},{provide:Io,useClass:Io,deps:[oe]},{provide:c.dDg,useClass:c.dDg,deps:[c.R0b]},{provide:Ts,useClass:Ts,deps:[Oa,c.R0b]},{provide:class Nn{},useClass:Li,deps:[]}];let hc=(()=>{class n{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:n,providers:[{provide:c.AFp,useValue:e.appId},{provide:Fi,useExisting:c.AFp},ni]}}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(n,12))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:ia,imports:[Zn,c.hGG]}),n})();"undefined"!=typeof window&&window;var Ui=F(8306),Ba=F(8421);function ri(n){return new Ui.y(t=>{(0,Ba.Xf)(n()).subscribe(t)})}var vr=F(576);function Rs(n,t){const e=(0,vr.m)(n)?n:()=>n,i=r=>r.error(e());return new Ui.y(t?r=>t.schedule(i,0,r):i)}var si=F(5577),fu=F(1144),ct=F(4004);const{isArray:Va}=Array;function Ro(n){return(0,ct.U)(t=>function oi(n,t){return Va(t)?n(...t):n(t)}(n,t))}const aa=["addListener","removeListener"],Pl=["addEventListener","removeEventListener"],mc=["on","off"];function la(n,t,e,i){if((0,vr.m)(e)&&(i=e,e=void 0),i)return la(n,t,e).pipe(Ro(i));const[r,s]=function Os(n){return(0,vr.m)(n.addEventListener)&&(0,vr.m)(n.removeEventListener)}(n)?Pl.map(l=>d=>n[l](t,d,e)):function jd(n){return(0,vr.m)(n.addListener)&&(0,vr.m)(n.removeListener)}(n)?aa.map(pu(n,t)):function Lf(n){return(0,vr.m)(n.on)&&(0,vr.m)(n.off)}(n)?mc.map(pu(n,t)):[];if(!r&&(0,fu.z)(n))return(0,si.z)(l=>la(l,t,e))((0,Ba.Xf)(n));if(!r)throw new TypeError("Invalid event target");return new Ui.y(l=>{const d=(...p)=>l.next(1<p.length?p:p[0]);return r(d),()=>s(d)})}function pu(n,t){return e=>i=>n[e](t,i)}var Ps=F(3269),rn=F(8996);function at(...n){const t=(0,Ps.yG)(n);return(0,rn.D)(n,t)}var ar=F(8189);function Oo(...n){return function gc(){return(0,ar.J)(1)}()((0,rn.D)(n,(0,Ps.yG)(n)))}var Et=F(7579),Ua=F(5032);const Qr=new Ui.y(Ua.Z);var Xs=F(6451),Qn=F(4482),Un=F(5403);function Gn(n,t){return(0,Qn.e)((e,i)=>{let r=0;e.subscribe((0,Un.x)(i,s=>n.call(t,s,r++)&&i.next(s)))})}function Wn(n,t){return(0,Qn.e)((e,i)=>{let r=null,s=0,l=!1;const d=()=>l&&!r&&i.complete();e.subscribe((0,Un.x)(i,p=>{null==r||r.unsubscribe();let _=0;const b=s++;(0,Ba.Xf)(n(p,b)).subscribe(r=(0,Un.x)(i,D=>i.next(t?t(p,D,b,_++):D),()=>{r=null,d()}))},()=>{l=!0,d()}))})}var yr=F(727);function ca(){return(0,Qn.e)((n,t)=>{let e=null;n._refCount++;const i=(0,Un.x)(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(e=null);const r=n._connection,s=e;e=null,r&&(!s||r===s)&&r.unsubscribe(),t.unsubscribe()});n.subscribe(i),i.closed||(e=n.connect())})}class ua extends Ui.y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,(0,Qn.A)(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,null==t||t.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new yr.w0;const e=this.getSubject();t.add(this.source.subscribe((0,Un.x)(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),t.closed&&(this._connection=null,t=yr.w0.EMPTY)}return t}refCount(){return ca()(this)}}const Ha={connector:()=>new Et.x};function Po(n,t=Ha){const{connector:e}=t;return(0,Qn.e)((i,r)=>{const s=e();(0,rn.D)(n(function mu(n){return new Ui.y(t=>n.subscribe(t))}(s))).subscribe(r),r.add(i.subscribe(s))})}var Hn=F(5698),Ci=F(8505),gs=F(4986);function ai(n,t){return t?e=>Oo(t.pipe((0,Hn.q)(1),function mg(){return(0,Qn.e)((n,t)=>{n.subscribe((0,Un.x)(t,Ua.Z))})}()),e.pipe(ai(n))):(0,si.z)((e,i)=>n(e,i).pipe((0,Hn.q)(1),function Fl(n){return(0,ct.U)(()=>n)}(e)))}var gg=F(3532);function _g(n=0,t,e=gs.P){let i=-1;return null!=t&&((0,gg.K)(t)?e=t:i=t),new Ui.y(r=>{let s=function dy(n){return n instanceof Date&&!isNaN(n)}(n)?+n-e.now():n;s<0&&(s=0);let l=0;return e.schedule(function(){r.closed||(r.next(l++),0<=i?this.schedule(void 0,i):r.complete())},s)})}const Ga="Service workers are disabled or not supported by this browser";class gu{constructor(t){if(this.serviceWorker=t,t){const i=la(t,"controllerchange").pipe((0,ct.U)(()=>t.controller)),s=Oo(ri(()=>at(t.controller)),i);this.worker=s.pipe(Gn(b=>!!b)),this.registration=this.worker.pipe(Wn(()=>t.getRegistration()));const _=la(t,"message").pipe((0,ct.U)(b=>b.data)).pipe(Gn(b=>b&&b.type)).pipe(function ja(n){return n?t=>Po(n)(t):t=>function No(n,t){const e=(0,vr.m)(n)?n:()=>n;return(0,vr.m)(t)?Po(t,{connector:e}):i=>new ua(i,e)}(new Et.x)(t)}());_.connect(),this.events=_}else this.worker=this.events=this.registration=function Bf(n){return ri(()=>Rs(new Error(n)))}(Ga)}postMessage(t,e){return this.worker.pipe((0,Hn.q)(1),(0,Ci.b)(i=>{i.postMessage(Object.assign({action:t},e))})).toPromise().then(()=>{})}postMessageWithOperation(t,e,i){const r=this.waitForOperationCompleted(i),s=this.postMessage(t,e);return Promise.all([s,r]).then(([,l])=>l)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(t){let e;return e="string"==typeof t?i=>i.type===t:i=>t.includes(i.type),this.events.pipe(Gn(e))}nextEventOfType(t){return this.eventsOfType(t).pipe((0,Hn.q)(1))}waitForOperationCompleted(t){return this.eventsOfType("OPERATION_COMPLETED").pipe(Gn(e=>e.nonce===t),(0,Hn.q)(1),(0,ct.U)(e=>{if(void 0!==e.result)return e.result;throw new Error(e.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let Ll=(()=>{class n{constructor(e){if(this.sw=e,this.subscriptionChanges=new Et.x,!e.isEnabled)return this.messages=Qr,this.notificationClicks=Qr,void(this.subscription=Qr);this.messages=this.sw.eventsOfType("PUSH").pipe((0,ct.U)(r=>r.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe((0,ct.U)(r=>r.data)),this.pushManager=this.sw.registration.pipe((0,ct.U)(r=>r.pushManager));const i=this.pushManager.pipe(Wn(r=>r.getSubscription()));this.subscription=(0,Xs.T)(i,this.subscriptionChanges)}get isEnabled(){return this.sw.isEnabled}requestSubscription(e){if(!this.sw.isEnabled)return Promise.reject(new Error(Ga));const i={userVisibleOnly:!0};let r=this.decodeBase64(e.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),s=new Uint8Array(new ArrayBuffer(r.length));for(let l=0;l<r.length;l++)s[l]=r.charCodeAt(l);return i.applicationServerKey=s,this.pushManager.pipe(Wn(l=>l.subscribe(i)),(0,Hn.q)(1)).toPromise().then(l=>(this.subscriptionChanges.next(l),l))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe((0,Hn.q)(1),Wn(i=>{if(null===i)throw new Error("Not subscribed to push notifications.");return i.unsubscribe().then(r=>{if(!r)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(Ga))}decodeBase64(e){return atob(e)}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(gu))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),_u=(()=>{class n{constructor(e){if(this.sw=e,!e.isEnabled)return this.versionUpdates=Qr,this.available=Qr,this.activated=Qr,void(this.unrecoverable=Qr);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY"]),this.available=this.versionUpdates.pipe(Gn(i=>"VERSION_READY"===i.type),(0,ct.U)(i=>({type:"UPDATE_AVAILABLE",current:i.currentVersion,available:i.latestVersion}))),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}get isEnabled(){return this.sw.isEnabled}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Ga));const e=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:e},e)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Ga));const e=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:e},e)}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(gu))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class li{}const za=new c.OlP("NGSW_REGISTER_SCRIPT");function Bl(n,t,e,i){return()=>{if(!Ti(i)||!("serviceWorker"in navigator)||!1===e.enabled)return;let s;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof e.registrationStrategy)s=e.registrationStrategy();else{const[d,...p]=(e.registrationStrategy||"registerWhenStable:30000").split(":");switch(d){case"registerImmediately":s=at(null);break;case"registerWithDelay":s=Gd(+p[0]||0);break;case"registerWhenStable":s=p[0]?(0,Xs.T)(zd(n),Gd(+p[0])):zd(n);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${e.registrationStrategy}`)}}n.get(c.R0b).runOutsideAngular(()=>s.pipe((0,Hn.q)(1)).subscribe(()=>navigator.serviceWorker.register(t,{scope:e.scope}).catch(d=>console.error("Service worker registration failed with:",d))))}}function Gd(n){return at(null).pipe(function vg(n,t=gs.z){const e=_g(n,t);return ai(()=>e)}(n))}function zd(n){return n.get(c.z2F).isStable.pipe(Gn(e=>e))}function br(n,t){return new gu(Ti(t)&&!1!==n.enabled?navigator.serviceWorker:void 0)}let wr=(()=>{class n{static register(e,i={}){return{ngModule:n,providers:[{provide:za,useValue:e},{provide:li,useValue:i},{provide:gu,useFactory:br,deps:[li,c.Lbi]},{provide:c.ip1,useFactory:Bl,deps:[c.zs3,za,li,c.Lbi],multi:!0}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[Ll,_u]}),n})(),_c=(()=>{class n{constructor(e){this.updates=e,this.updates.available.subscribe(i=>{this.showAppUpdateAlert()})}showAppUpdateAlert(){alert("There is an App update available. The app will now be reloaded to apply the update."),this.doAppUpdate()}doAppUpdate(){this.updates.activateUpdate().then(()=>document.location.reload())}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(_u))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Hi extends Et.x{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:i}=this;if(t)throw e;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}}const{isArray:Js}=Array,{getPrototypeOf:vc,prototype:eo,keys:Vl}=Object;function vu(n){if(1===n.length){const t=n[0];if(Js(t))return{args:t,keys:null};if(function $d(n){return n&&"object"==typeof n&&vc(n)===eo}(t)){const e=Vl(t);return{args:e.map(i=>t[i]),keys:e}}}return{args:n,keys:null}}var to=F(4671);function lr(n,t){return n.reduce((e,i,r)=>(e[i]=t[r],e),{})}var yu=F(9672);function Hl(n,t,e){n?(0,yu.f)(e,n,t):t()}const da=(0,F(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var ha=F(515);function Xr(...n){const t=(0,Ps.yG)(n);return(0,Qn.e)((e,i)=>{(t?Oo(n,e,t):Oo(n,e)).subscribe(i)})}function no(n,t,e,i,r){return(s,l)=>{let d=e,p=t,_=0;s.subscribe((0,Un.x)(l,b=>{const D=_++;p=d?n(p,b,D):(d=!0,b),i&&l.next(p)},r&&(()=>{d&&l.next(p),l.complete()})))}}function Fo(n,t){return(0,Qn.e)(no(n,t,arguments.length>=2,!0))}function ci(n){return(0,Qn.e)((t,e)=>{let s,i=null,r=!1;i=t.subscribe((0,Un.x)(e,void 0,void 0,l=>{s=(0,Ba.Xf)(n(l,ci(n)(t))),i?(i.unsubscribe(),i=null,s.subscribe(e)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(e))})}function io(n,t){return(0,vr.m)(t)?(0,si.z)(n,t,1):(0,si.z)(n,1)}function Vf(n){return n<=0?()=>ha.E:(0,Qn.e)((t,e)=>{let i=[];t.subscribe((0,Un.x)(e,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)e.next(r);e.complete()},void 0,()=>{i=null}))})}function ro(n=jl){return(0,Qn.e)((t,e)=>{let i=!1;t.subscribe((0,Un.x)(e,r=>{i=!0,e.next(r)},()=>i?e.complete():e.error(n())))})}function jl(){return new da}function fa(n){return(0,Qn.e)((t,e)=>{let i=!1;t.subscribe((0,Un.x)(e,r=>{i=!0,e.next(r)},()=>{i||e.next(n),e.complete()}))})}function S(n,t){const e=arguments.length>=2;return i=>i.pipe(n?Gn((r,s)=>n(r,s,i)):to.y,(0,Hn.q)(1),e?fa(t):ro(()=>new da))}function M(n){return(0,Qn.e)((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}class O{constructor(t,e){this.id=t,this.url=e}}class j extends O{constructor(t,e,i="imperative",r=null){super(t,e),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class X extends O{constructor(t,e,i){super(t,e),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class pe extends O{constructor(t,e,i){super(t,e),this.reason=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Le extends O{constructor(t,e,i){super(t,e),this.error=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class je extends O{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Mt extends O{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Nt extends O{constructor(t,e,i,r,s){super(t,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class jt extends O{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vt extends O{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ji{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Qi{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class qa{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ns{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _s{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class yc{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Lo{constructor(t,e,i){this.routerEvent=t,this.position=e,this.anchor=i}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Ft="primary";class so{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Cr(n){return new so(n)}const Wa="ngNavigationCancelingError";function bu(n){const t=Error("NavigationCancelingError: "+n);return t[Wa]=!0,t}function hy(n,t,e){const i=e.path.split("/");if(i.length>n.length||"full"===e.pathMatch&&(t.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const l=i[s],d=n[s];if(l.startsWith(":"))r[l.substring(1)]=d;else if(l!==d.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function Jr(n,t){const e=n?Object.keys(n):void 0,i=t?Object.keys(t):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let s=0;s<e.length;s++)if(r=e[s],!qd(n[r],t[r]))return!1;return!0}function qd(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;const e=[...n].sort(),i=[...t].sort();return e.every((r,s)=>i[s]===r)}return n===t}function fy(n){return Array.prototype.concat.apply([],n)}function Hf(n){return n.length>0?n[n.length-1]:null}function Er(n,t){for(const e in n)n.hasOwnProperty(e)&&t(n[e],e)}function vs(n){return(0,c.CqO)(n)?n:(0,c.QGY)(n)?(0,rn.D)(Promise.resolve(n)):at(n)}const gy={exact:function wg(n,t,e){if(!Za(n.segments,t.segments)||!Cc(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(const i in t.children)if(!n.children[i]||!wg(n.children[i],t.children[i],e))return!1;return!0},subset:vy},wu={exact:function wc(n,t){return Jr(n,t)},subset:function _y(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>qd(n[e],t[e]))},ignored:()=>!0};function Wd(n,t,e){return gy[e.paths](n.root,t.root,e.matrixParams)&&wu[e.queryParams](n.queryParams,t.queryParams)&&!("exact"===e.fragment&&n.fragment!==t.fragment)}function vy(n,t,e){return Gl(n,t,t.segments,e)}function Gl(n,t,e,i){if(n.segments.length>e.length){const r=n.segments.slice(0,e.length);return!(!Za(r,e)||t.hasChildren()||!Cc(r,e,i))}if(n.segments.length===e.length){if(!Za(n.segments,e)||!Cc(n.segments,e,i))return!1;for(const r in t.children)if(!n.children[r]||!vy(n.children[r],t.children[r],i))return!1;return!0}{const r=e.slice(0,n.segments.length),s=e.slice(n.segments.length);return!!(Za(n.segments,r)&&Cc(n.segments,r,i)&&n.children[Ft])&&Gl(n.children[Ft],t,s,i)}}function Cc(n,t,e){return t.every((i,r)=>wu[e](n[r].parameters,i.parameters))}class Ya{constructor(t,e,i){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Cr(this.queryParams)),this._queryParamMap}toString(){return by.serialize(this)}}class sn{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Er(e,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return es(this)}}class Ec{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Cr(this.parameters)),this._parameterMap}toString(){return Zd(this)}}function Za(n,t){return n.length===t.length&&n.every((e,i)=>e.path===t[i].path)}class Cg{}class Eg{parse(t){const e=new E(t);return new Ya(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${Bo(t.root,!0)}`,i=function wy(n){const t=Object.keys(n).map(e=>{const i=n[e];return Array.isArray(i)?i.map(r=>`${Yd(e)}=${Yd(r)}`).join("&"):`${Yd(e)}=${Yd(i)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${e}${i}${"string"==typeof t.fragment?`#${function Dg(n){return encodeURI(n)}(t.fragment)}`:""}`}}const by=new Eg;function es(n){return n.segments.map(t=>Zd(t)).join("/")}function Bo(n,t){if(!n.hasChildren())return es(n);if(t){const e=n.children[Ft]?Bo(n.children[Ft],!1):"",i=[];return Er(n.children,(r,s)=>{s!==Ft&&i.push(`${s}:${Bo(r,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}{const e=function yy(n,t){let e=[];return Er(n.children,(i,r)=>{r===Ft&&(e=e.concat(t(i,r)))}),Er(n.children,(i,r)=>{r!==Ft&&(e=e.concat(t(i,r)))}),e}(n,(i,r)=>r===Ft?[Bo(n.children[Ft],!1)]:[`${r}:${Bo(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Ft]?`${es(n)}/${e[0]}`:`${es(n)}/(${e.join("//")})`}}function Cu(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Yd(n){return Cu(n).replace(/%3B/gi,";")}function jf(n){return Cu(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Dc(n){return decodeURIComponent(n)}function xg(n){return Dc(n.replace(/\+/g,"%20"))}function Zd(n){return`${jf(n.path)}${function Sg(n){return Object.keys(n).map(t=>`;${jf(t)}=${jf(n[t])}`).join("")}(n.parameters)}`}const Cy=/^[^\/()?;=#]+/;function Kd(n){const t=n.match(Cy);return t?t[0]:""}const FT=/^[^=?&#]+/,g=/^[^&#]+/;class E{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new sn([],{}):new sn([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[Ft]=new sn(t,e)),i}parseSegment(){const t=Kd(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new Ec(Dc(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Kd(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const r=Kd(this.remaining);r&&(i=r,this.capture(i))}t[Dc(e)]=Dc(i)}parseQueryParam(t){const e=function w(n){const t=n.match(FT);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const l=function v(n){const t=n.match(g);return t?t[0]:""}(this.remaining);l&&(i=l,this.capture(i))}const r=xg(e),s=xg(i);if(t.hasOwnProperty(r)){let l=t[r];Array.isArray(l)||(l=[l],t[r]=l),l.push(s)}else t[r]=s}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=Kd(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let s;i.indexOf(":")>-1?(s=i.substr(0,i.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=Ft);const l=this.parseChildren();e[s]=1===Object.keys(l).length?l[Ft]:new sn([],l),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class k{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=B(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){const e=B(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=ie(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return ie(t,this._root).map(e=>e.value)}}function B(n,t){if(n===t.value)return t;for(const e of t.children){const i=B(n,e);if(i)return i}return null}function ie(n,t){if(n===t.value)return[t];for(const e of t.children){const i=ie(n,e);if(i.length)return i.unshift(t),i}return[]}class Ie{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function st(n){const t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}class xt extends k{constructor(t,e){super(t),this.snapshot=e,Xd(this,t)}toString(){return this.snapshot.toString()}}function Kt(n,t){const e=function zn(n,t){const l=new Qd([],{},{},"",{},Ft,t,null,n.root,-1,{});return new Eu("",new Ie(l,[]))}(n,t),i=new Hi([new Ec("",{})]),r=new Hi({}),s=new Hi({}),l=new Hi({}),d=new Hi(""),p=new cr(i,r,l,d,s,Ft,t,e.root);return p.snapshot=e.root,new xt(new Ie(p,[]),e)}class cr{constructor(t,e,i,r,s,l,d,p){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=l,this.component=d,this._futureSnapshot=p}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ct.U)(t=>Cr(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ct.U)(t=>Cr(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function oo(n,t="emptyOnly"){const e=n.pathFromRoot;let i=0;if("always"!==t)for(i=e.length-1;i>=1;){const r=e[i],s=e[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function Gf(n){return n.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(e.slice(i))}class Qd{constructor(t,e,i,r,s,l,d,p,_,b,D){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=l,this.component=d,this.routeConfig=p,this._urlSegment=_,this._lastPathIndex=b,this._resolve=D}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Cr(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Cr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Eu extends k{constructor(t,e){super(e),this.url=t,Xd(this,e)}toString(){return zf(this._root)}}function Xd(n,t){t.value._routerState=n,t.children.forEach(e=>Xd(n,e))}function zf(n){const t=n.children.length>0?` { ${n.children.map(zf).join(", ")} } `:"";return`${n.value}${t}`}function Du(n){if(n.snapshot){const t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,Jr(t.queryParams,e.queryParams)||n.queryParams.next(e.queryParams),t.fragment!==e.fragment&&n.fragment.next(e.fragment),Jr(t.params,e.params)||n.params.next(e.params),function bc(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!Jr(n[e],t[e]))return!1;return!0}(t.url,e.url)||n.url.next(e.url),Jr(t.data,e.data)||n.data.next(e.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Jd(n,t){const e=Jr(n.params,t.params)&&function zl(n,t){return Za(n,t)&&n.every((e,i)=>Jr(e.parameters,t[i].parameters))}(n.url,t.url);return e&&!(!n.parent!=!t.parent)&&(!n.parent||Jd(n.parent,t.parent))}function Vo(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){const i=e.value;i._futureSnapshot=t.value;const r=function qf(n,t,e){return t.children.map(i=>{for(const r of e.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return Vo(n,i,r);return Vo(n,i)})}(n,t,e);return new Ie(i,r)}{if(n.shouldAttach(t.value)){const s=n.retrieve(t.value);if(null!==s){const l=s.route;return l.value._futureSnapshot=t.value,l.children=t.children.map(d=>Vo(n,d)),l}}const i=function Wf(n){return new cr(new Hi(n.url),new Hi(n.params),new Hi(n.queryParams),new Hi(n.fragment),new Hi(n.data),n.outlet,n.component,n)}(t.value),r=t.children.map(s=>Vo(n,s));return new Ie(i,r)}}function Xn(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Zf(n){return"object"==typeof n&&null!=n&&n.outlets}function Ey(n,t,e,i,r){let s={};if(i&&Er(i,(d,p)=>{s[p]=Array.isArray(d)?d.map(_=>`${_}`):`${d}`}),n===t)return new Ya(e,s,r);const l=Mg(n,t,e);return new Ya(l,s,r)}function Mg(n,t,e){const i={};return Er(n.children,(r,s)=>{i[s]=r===t?e:Mg(r,t,e)}),new sn(n.segments,i)}class Dy{constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&Xn(i[0]))throw new Error("Root segment cannot have matrix parameters");const r=i.find(Zf);if(r&&r!==Hf(i))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class xy{constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}}function HT(n,t,e){if(n||(n=new sn([],{})),0===n.segments.length&&n.hasChildren())return Sy(n,t,e);const i=function Kf(n,t,e){let i=0,r=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=e.length)return s;const l=n.segments[r],d=e[i];if(Zf(d))break;const p=`${d}`,_=i<e.length-1?e[i+1]:null;if(r>0&&void 0===p)break;if(p&&_&&"object"==typeof _&&void 0===_.outlets){if(!Iy(p,_,l))return s;i+=2}else{if(!Iy(p,{},l))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,t,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new sn(n.segments.slice(0,i.pathIndex),{});return s.children[Ft]=new sn(n.segments.slice(i.pathIndex),n.children),Sy(s,0,r)}return i.match&&0===r.length?new sn(n.segments,{}):i.match&&!n.hasChildren()?Vr(n,t,e):i.match?Sy(n,0,r):Vr(n,t,e)}function Sy(n,t,e){if(0===e.length)return new sn(n.segments,{});{const i=function UT(n){return Zf(n[0])?n[0].outlets:{[Ft]:n}}(e),r={};return Er(i,(s,l)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[l]=HT(n.children[l],t,s))}),Er(n.children,(s,l)=>{void 0===i[l]&&(r[l]=s)}),new sn(n.segments,r)}}function Vr(n,t,e){const i=n.segments.slice(0,t);let r=0;for(;r<e.length;){const s=e[r];if(Zf(s)){const p=My(s.outlets);return new sn(i,p)}if(0===r&&Xn(e[0])){i.push(new Ec(n.segments[t].path,Ty(e[0]))),r++;continue}const l=Zf(s)?s.outlets[Ft]:`${s}`,d=r<e.length-1?e[r+1]:null;l&&d&&Xn(d)?(i.push(new Ec(l,Ty(d))),r+=2):(i.push(new Ec(l,{})),r++)}return new sn(i,{})}function My(n){const t={};return Er(n,(e,i)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[i]=Vr(new sn([],{}),0,e))}),t}function Ty(n){const t={};return Er(n,(e,i)=>t[i]=`${e}`),t}function Iy(n,t,e){return n==e.path&&Jr(t,e.parameters)}class Qf{constructor(t,e,i,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=r}activate(t){const e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),Du(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){const r=st(e);t.children.forEach(s=>{const l=s.value.outlet;this.deactivateRoutes(s,r[l],i),delete r[l]}),Er(r,(s,l)=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(t,e,i){const r=t.value,s=e?e.value:null;if(r===s)if(r.component){const l=i.getContext(r.outlet);l&&this.deactivateChildRoutes(t,e,l.children)}else this.deactivateChildRoutes(t,e,i);else s&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=st(t);for(const l of Object.keys(s))this.deactivateRouteAndItsChildren(s[l],r);if(i&&i.outlet){const l=i.outlet.detach(),d=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:l,route:t,contexts:d})}}deactivateRouteAndOutlet(t,e){const i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=st(t);for(const l of Object.keys(s))this.deactivateRouteAndItsChildren(s[l],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(t,e,i){const r=st(e);t.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new yc(s.value.snapshot))}),t.children.length&&this.forwardEvent(new Ns(t.value.snapshot))}activateRoutes(t,e,i){const r=t.value,s=e?e.value:null;if(Du(r),r===s)if(r.component){const l=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,l.children)}else this.activateChildRoutes(t,e,i);else if(r.component){const l=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const d=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),l.children.onOutletReAttached(d.contexts),l.attachRef=d.componentRef,l.route=d.route.value,l.outlet&&l.outlet.attach(d.componentRef,d.route.value),Du(d.route.value),this.activateChildRoutes(t,null,l.children)}else{const d=function Ay(n){for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(r.snapshot),p=d?d.module.componentFactoryResolver:null;l.attachRef=null,l.route=r,l.resolver=p,l.outlet&&l.outlet.activateWith(r,p),this.activateChildRoutes(t,null,l.children)}}else this.activateChildRoutes(t,null,i)}}class ky{constructor(t,e){this.routes=t,this.module=e}}function xc(n){return"function"==typeof n}function xu(n){return n instanceof Ya}const Xf=Symbol("INITIAL_VALUE");function Su(){return Wn(n=>function Ul(...n){const t=(0,Ps.yG)(n),e=(0,Ps.jO)(n),{args:i,keys:r}=vu(n);if(0===i.length)return(0,rn.D)([],t);const s=new Ui.y(function yg(n,t,e=to.y){return i=>{Hl(t,()=>{const{length:r}=n,s=new Array(r);let l=r,d=r;for(let p=0;p<r;p++)Hl(t,()=>{const _=(0,rn.D)(n[p],t);let b=!1;_.subscribe((0,Un.x)(i,D=>{s[p]=D,b||(b=!0,d--),d||i.next(e(s.slice()))},()=>{--l||i.complete()}))},i)},i)}}(i,t,r?l=>lr(r,l):to.y));return e?s.pipe(Ro(e)):s}(n.map(t=>t.pipe((0,Hn.q)(1),Xr(Xf)))).pipe(Fo((t,e)=>{let i=!1;return e.reduce((r,s,l)=>r!==Xf?r:(s===Xf&&(i=!0),i||!1!==s&&l!==e.length-1&&!xu(s)?r:s),t)},Xf),Gn(t=>t!==Xf),(0,ct.U)(t=>xu(t)?t:!0===t),(0,Hn.q)(1)))}class zT{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Jf,this.attachRef=null}}class Jf{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const i=this.getOrCreateContext(t);i.outlet=e,this.contexts.set(t,i)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null,e.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new zT,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}let ep=(()=>{class n{constructor(e,i,r,s,l){this.parentContexts=e,this.location=i,this.resolver=r,this.changeDetector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new c.vpe,this.deactivateEvents=new c.vpe,this.attachEvents=new c.vpe,this.detachEvents=new c.vpe,this.name=s||Ft,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const l=(i=i||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),d=this.parentContexts.getOrCreateContext(this.name).children,p=new $T(e,d,this.location.injector);this.activated=this.location.createComponent(l,this.location.length,p),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(Jf),c.Y36(c.s_b),c.Y36(c._Vd),c.$8M("name"),c.Y36(c.sBO))},n.\u0275dir=c.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class $T{constructor(t,e,i){this.route=t,this.childContexts=e,this.parent=i}get(t,e){return t===cr?this.route:t===Jf?this.childContexts:this.parent.get(t,e)}}let tE=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,i){1&e&&c._UZ(0,"router-outlet")},directives:[ep],encapsulation:2}),n})();function tp(n,t=""){for(let e=0;e<n.length;e++){const i=n[e];qT(i,WT(t,i))}}function qT(n,t){n.children&&tp(n.children,t)}function WT(n,t){return t?n||t.path?n&&!t.path?`${n}/`:!n&&t.path?t.path:`${n}/${t.path}`:"":n}function Ry(n){const t=n.children&&n.children.map(Ry),e=t?Object.assign(Object.assign({},n),{children:t}):Object.assign({},n);return!e.component&&(t||e.loadChildren)&&e.outlet&&e.outlet!==Ft&&(e.component=tE),e}function Uo(n){return n.outlet||Ft}function nE(n,t){const e=n.filter(i=>Uo(i)===t);return e.push(...n.filter(i=>Uo(i)!==t)),e}const Oy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Tg(n,t,e){var i;if(""===t.path)return"full"===t.pathMatch&&(n.hasChildren()||e.length>0)?Object.assign({},Oy):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const s=(t.matcher||hy)(e,n,t);if(!s)return Object.assign({},Oy);const l={};Er(s.posParams,(p,_)=>{l[_]=p.path});const d=s.consumed.length>0?Object.assign(Object.assign({},l),s.consumed[s.consumed.length-1].parameters):l;return{matched:!0,consumedSegments:s.consumed,remainingSegments:e.slice(s.consumed.length),parameters:d,positionalParamSegments:null!==(i=s.posParams)&&void 0!==i?i:{}}}function Ig(n,t,e,i,r="corrected"){if(e.length>0&&function KT(n,t,e){return e.some(i=>Ag(n,t,i)&&Uo(i)!==Ft)}(n,e,i)){const l=new sn(t,function ZT(n,t,e,i){const r={};r[Ft]=i,i._sourceSegment=n,i._segmentIndexShift=t.length;for(const s of e)if(""===s.path&&Uo(s)!==Ft){const l=new sn([],{});l._sourceSegment=n,l._segmentIndexShift=t.length,r[Uo(s)]=l}return r}(n,t,i,new sn(e,n.children)));return l._sourceSegment=n,l._segmentIndexShift=t.length,{segmentGroup:l,slicedSegments:[]}}if(0===e.length&&function QT(n,t,e){return e.some(i=>Ag(n,t,i))}(n,e,i)){const l=new sn(n.segments,function YT(n,t,e,i,r,s){const l={};for(const d of i)if(Ag(n,e,d)&&!r[Uo(d)]){const p=new sn([],{});p._sourceSegment=n,p._segmentIndexShift="legacy"===s?n.segments.length:t.length,l[Uo(d)]=p}return Object.assign(Object.assign({},r),l)}(n,t,e,i,n.children,r));return l._sourceSegment=n,l._segmentIndexShift=t.length,{segmentGroup:l,slicedSegments:e}}const s=new sn(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:e}}function Ag(n,t,e){return(!(n.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function iE(n,t,e,i){return!!(Uo(n)===i||i!==Ft&&Ag(t,e,n))&&("**"===n.path||Tg(t,n,e).matched)}function Mu(n,t,e){return 0===t.length&&!n.children[e]}class ao{constructor(t){this.segmentGroup=t||null}}class XT{constructor(t){this.urlTree=t}}function kg(n){return Rs(new ao(n))}function Py(n){return Rs(new XT(n))}class Fy{constructor(t,e,i,r,s){this.configLoader=e,this.urlSerializer=i,this.urlTree=r,this.config=s,this.allowRedirects=!0,this.ngModule=t.get(c.h0i)}apply(){const t=Ig(this.urlTree.root,[],[],this.config).segmentGroup,e=new sn(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,Ft).pipe((0,ct.U)(s=>this.createUrlTree(Rg(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ci(s=>{if(s instanceof XT)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof ao?this.noMatchError(s):s}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,Ft).pipe((0,ct.U)(r=>this.createUrlTree(Rg(r),t.queryParams,t.fragment))).pipe(ci(r=>{throw r instanceof ao?this.noMatchError(r):r}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,i){const r=t.segments.length>0?new sn([],{[Ft]:t}):t;return new Ya(r,e,i)}expandSegmentGroup(t,e,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(t,e,i).pipe((0,ct.U)(s=>new sn([],s))):this.expandSegment(t,i,e,i.segments,r,!0)}expandChildren(t,e,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return(0,rn.D)(r).pipe(io(s=>{const l=i.children[s],d=nE(e,s);return this.expandSegmentGroup(t,d,l,s).pipe((0,ct.U)(p=>({segment:p,outlet:s})))}),Fo((s,l)=>(s[l.outlet]=l.segment,s),{}),function bg(n,t){const e=arguments.length>=2;return i=>i.pipe(n?Gn((r,s)=>n(r,s,i)):to.y,Vf(1),e?fa(t):ro(()=>new da))}())}expandSegment(t,e,i,r,s,l){return(0,rn.D)(i).pipe(io(d=>this.expandSegmentAgainstRoute(t,e,i,d,r,s,l).pipe(ci(_=>{if(_ instanceof ao)return at(null);throw _}))),S(d=>!!d),ci((d,p)=>{if(d instanceof da||"EmptyError"===d.name)return Mu(e,r,s)?at(new sn([],{})):kg(e);throw d}))}expandSegmentAgainstRoute(t,e,i,r,s,l,d){return iE(r,e,s,l)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,s,l):d&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,i,r,s,l):kg(e):kg(e)}expandSegmentAgainstRouteUsingRedirect(t,e,i,r,s,l){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,i,r,l):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,r,s,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,i,r){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?Py(s):this.lineralizeSegments(i,s).pipe((0,si.z)(l=>{const d=new sn(l,{});return this.expandSegment(t,d,e,l,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,r,s,l){const{matched:d,consumedSegments:p,remainingSegments:_,positionalParamSegments:b}=Tg(e,r,s);if(!d)return kg(e);const D=this.applyRedirectCommands(p,r.redirectTo,b);return r.redirectTo.startsWith("/")?Py(D):this.lineralizeSegments(r,D).pipe((0,si.z)(I=>this.expandSegment(t,e,i,I.concat(_),l,!1)))}matchSegmentAgainstRoute(t,e,i,r,s){if("**"===i.path)return i.loadChildren?(i._loadedConfig?at(i._loadedConfig):this.configLoader.load(t.injector,i)).pipe((0,ct.U)(D=>(i._loadedConfig=D,new sn(r,{})))):at(new sn(r,{}));const{matched:l,consumedSegments:d,remainingSegments:p}=Tg(e,i,r);return l?this.getChildConfig(t,i,r).pipe((0,si.z)(b=>{const D=b.module,I=b.routes,{segmentGroup:P,slicedSegments:U}=Ig(e,d,p,I),Q=new sn(P.segments,P.children);if(0===U.length&&Q.hasChildren())return this.expandChildren(D,I,Q).pipe((0,ct.U)(rt=>new sn(d,rt)));if(0===I.length&&0===U.length)return at(new sn(d,{}));const le=Uo(i)===s;return this.expandSegment(D,Q,I,U,le?Ft:s,!0).pipe((0,ct.U)(et=>new sn(d.concat(et.segments),et.children)))})):kg(e)}getChildConfig(t,e,i){return e.children?at(new ky(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?at(e._loadedConfig):this.runCanLoadGuards(t.injector,e,i).pipe((0,si.z)(r=>r?this.configLoader.load(t.injector,e).pipe((0,ct.U)(s=>(e._loadedConfig=s,s))):function Ka(n){return Rs(bu(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(e))):at(new ky([],t))}runCanLoadGuards(t,e,i){const r=e.canLoad;return r&&0!==r.length?at(r.map(l=>{const d=t.get(l);let p;if(function JC(n){return n&&xc(n.canLoad)}(d))p=d.canLoad(e,i);else{if(!xc(d))throw new Error("Invalid CanLoad guard");p=d(e,i)}return vs(p)})).pipe(Su(),(0,Ci.b)(l=>{if(!xu(l))return;const d=bu(`Redirecting to "${this.urlSerializer.serialize(l)}"`);throw d.url=l,d}),(0,ct.U)(l=>!0===l)):at(!0)}lineralizeSegments(t,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return at(i);if(r.numberOfChildren>1||!r.children[Ft])return Rs(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t.redirectTo}'`));r=r.children[Ft]}}applyRedirectCommands(t,e,i){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,i)}applyRedirectCreatreUrlTree(t,e,i,r){const s=this.createSegmentGroup(t,e.root,i,r);return new Ya(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const i={};return Er(t,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const d=r.substring(1);i[s]=e[d]}else i[s]=r}),i}createSegmentGroup(t,e,i,r){const s=this.createSegments(t,e.segments,i,r);let l={};return Er(e.children,(d,p)=>{l[p]=this.createSegmentGroup(t,d,i,r)}),new sn(s,l)}createSegments(t,e,i,r){return e.map(s=>s.path.startsWith(":")?this.findPosParam(t,s,r):this.findOrReturn(s,i))}findPosParam(t,e,i){const r=i[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let i=0;for(const r of e){if(r.path===t.path)return e.splice(i),r;i++}return t}}function Rg(n){const t={};for(const i of Object.keys(n.children)){const s=Rg(n.children[i]);(s.segments.length>0||s.hasChildren())&&(t[i]=s)}return function JT(n){if(1===n.numberOfChildren&&n.children[Ft]){const t=n.children[Ft];return new sn(n.segments.concat(t.segments),t.children)}return n}(new sn(n.segments,t))}class Ly{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class ip{constructor(t,e){this.component=t,this.route=e}}function By(n,t,e){const i=n._root;return Qa(i,t?t._root:null,e,[i.value])}function rp(n,t,e){const i=function mN(n){if(!n)return null;for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(t);return(i?i.module.injector:e).get(n)}function Qa(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=st(t);return n.children.forEach(l=>{(function Uy(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,l=t?t.value:null,d=e?e.getContext(n.value.outlet):null;if(l&&s.routeConfig===l.routeConfig){const p=function rE(n,t,e){if("function"==typeof e)return e(n,t);switch(e){case"pathParamsChange":return!Za(n.url,t.url);case"pathParamsOrQueryParamsChange":return!Za(n.url,t.url)||!Jr(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Jd(n,t)||!Jr(n.queryParams,t.queryParams);default:return!Jd(n,t)}}(l,s,s.routeConfig.runGuardsAndResolvers);p?r.canActivateChecks.push(new Ly(i)):(s.data=l.data,s._resolvedData=l._resolvedData),Qa(n,t,s.component?d?d.children:null:e,i,r),p&&d&&d.outlet&&d.outlet.isActivated&&r.canDeactivateChecks.push(new ip(d.outlet.component,l))}else l&&sp(t,d,r),r.canActivateChecks.push(new Ly(i)),Qa(n,null,s.component?d?d.children:null:e,i,r)})(l,s[l.value.outlet],e,i.concat([l.value]),r),delete s[l.value.outlet]}),Er(s,(l,d)=>sp(l,e.getContext(d),r)),r}function sp(n,t,e){const i=st(n),r=n.value;Er(i,(s,l)=>{sp(s,r.component?t?t.children.getContext(l):null:t,e)}),e.canDeactivateChecks.push(new ip(r.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,r))}class jy{}function Gy(n){return new Ui.y(t=>t.error(n))}class oI{constructor(t,e,i,r,s,l){this.rootComponentType=t,this.config=e,this.urlTree=i,this.url=r,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=l}recognize(){const t=Ig(this.urlTree.root,[],[],this.config.filter(l=>void 0===l.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,Ft);if(null===e)return null;const i=new Qd([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ft,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Ie(i,e),s=new Eu(this.url,r);return this.inheritParamsAndData(s._root),s}inheritParamsAndData(t){const e=t.value,i=oo(e,this.paramsInheritanceStrategy);e.params=Object.freeze(i.params),e.data=Object.freeze(i.data),t.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(t,e,i){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,i)}processChildren(t,e){const i=[];for(const s of Object.keys(e.children)){const l=e.children[s],d=nE(t,s),p=this.processSegmentGroup(d,l,s);if(null===p)return null;i.push(...p)}const r=Sc(i);return function aI(n){n.sort((t,e)=>t.value.outlet===Ft?-1:e.value.outlet===Ft?1:t.value.outlet.localeCompare(e.value.outlet))}(r),r}processSegment(t,e,i,r){for(const s of t){const l=this.processSegmentAgainstRoute(s,e,i,r);if(null!==l)return l}return Mu(e,i,r)?[]:null}processSegmentAgainstRoute(t,e,i,r){if(t.redirectTo||!iE(t,e,i,r))return null;let s,l=[],d=[];if("**"===t.path){const P=i.length>0?Hf(i).parameters:{};s=new Qd(i,P,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,op(t),Uo(t),t.component,t,$y(e),lE(e)+i.length,cE(t))}else{const P=Tg(e,t,i);if(!P.matched)return null;l=P.consumedSegments,d=P.remainingSegments,s=new Qd(l,P.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,op(t),Uo(t),t.component,t,$y(e),lE(e)+l.length,cE(t))}const p=function oE(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(t),{segmentGroup:_,slicedSegments:b}=Ig(e,l,d,p.filter(P=>void 0===P.redirectTo),this.relativeLinkResolution);if(0===b.length&&_.hasChildren()){const P=this.processChildren(p,_);return null===P?null:[new Ie(s,P)]}if(0===p.length&&0===b.length)return[new Ie(s,[])];const D=Uo(t)===r,I=this.processSegment(p,_,b,D?Ft:r);return null===I?null:[new Ie(s,I)]}}function aE(n){const t=n.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function Sc(n){const t=[],e=new Set;for(const i of n){if(!aE(i)){t.push(i);continue}const r=t.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),e.add(r)):t.push(i)}for(const i of e){const r=Sc(i.children);t.push(new Ie(i.value,r))}return t.filter(i=>!e.has(i))}function $y(n){let t=n;for(;t._sourceSegment;)t=t._sourceSegment;return t}function lE(n){let t=n,e=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift?t._segmentIndexShift:0;return e-1}function op(n){return n.data||{}}function cE(n){return n.resolve||{}}function Wy(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function eh(n){return Wn(t=>{const e=n(t);return e?(0,rn.D)(e).pipe((0,ct.U)(()=>t)):at(t)})}class pE extends class Yy{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const ap=new c.OlP("ROUTES");class th{constructor(t,e,i,r){this.injector=t,this.compiler=e,this.onLoadStartListener=i,this.onLoadEndListener=r}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const r=this.loadModuleFactory(e.loadChildren).pipe((0,ct.U)(s=>{this.onLoadEndListener&&this.onLoadEndListener(e);const l=s.create(t);return new ky(fy(l.injector.get(ap,void 0,c.XFs.Self|c.XFs.Optional)).map(Ry),l)}),ci(s=>{throw e._loader$=void 0,s}));return e._loader$=new ua(r,()=>new Et.x).pipe(ca()),e._loader$}loadModuleFactory(t){return vs(t()).pipe((0,si.z)(e=>e instanceof c.YKP?at(e):(0,rn.D)(this.compiler.compileModuleAsync(e))))}}class mE{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function uI(n){throw n}function dI(n,t,e){return t.parse("/")}function Zy(n,t){return at(null)}const Ky={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},gE={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let lo=(()=>{class n{constructor(e,i,r,s,l,d,p){this.rootComponentType=e,this.urlSerializer=i,this.rootContexts=r,this.location=s,this.config=p,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Et.x,this.errorHandler=uI,this.malformedUriErrorHandler=dI,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Zy,afterPreactivation:Zy},this.urlHandlingStrategy=new mE,this.routeReuseStrategy=new pE,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=l.get(c.h0i),this.console=l.get(c.c2e);const D=l.get(c.R0b);this.isNgZoneEnabled=D instanceof c.R0b&&c.R0b.isInAngularZone(),this.resetConfig(p),this.currentUrlTree=function my(){return new Ya(new sn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new th(l,d,I=>this.triggerEvent(new ji(I)),I=>this.triggerEvent(new Qi(I))),this.routerState=Kt(this.currentUrlTree,this.rootComponentType),this.transitions=new Hi({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var e;return null===(e=this.location.getState())||void 0===e?void 0:e.\u0275routerPageId}setupNavigations(e){const i=this.events;return e.pipe(Gn(r=>0!==r.id),(0,ct.U)(r=>Object.assign(Object.assign({},r),{extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),Wn(r=>{let s=!1,l=!1;return at(r).pipe((0,Ci.b)(d=>{this.currentNavigation={id:d.id,initialUrl:d.currentRawUrl,extractedUrl:d.extractedUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Wn(d=>{const p=this.browserUrlTree.toString(),_=!this.navigated||d.extractedUrl.toString()!==p||p!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||_)&&this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return vE(d.source)&&(this.browserUrlTree=d.extractedUrl),at(d).pipe(Wn(D=>{const I=this.transitions.getValue();return i.next(new j(D.id,this.serializeUrl(D.extractedUrl),D.source,D.restoredState)),I!==this.transitions.getValue()?ha.E:Promise.resolve(D)}),function np(n,t,e,i){return Wn(r=>function Ny(n,t,e,i,r){return new Fy(n,t,e,i,r).apply()}(n,t,e,r.extractedUrl,i).pipe((0,ct.U)(s=>Object.assign(Object.assign({},r),{urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Ci.b)(D=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:D.urlAfterRedirects})}),function uE(n,t,e,i,r){return(0,si.z)(s=>function zy(n,t,e,i,r="emptyOnly",s="legacy"){try{const l=new oI(n,t,e,i,r,s).recognize();return null===l?Gy(new jy):at(l)}catch(l){return Gy(l)}}(n,t,s.urlAfterRedirects,e(s.urlAfterRedirects),i,r).pipe((0,ct.U)(l=>Object.assign(Object.assign({},s),{targetSnapshot:l}))))}(this.rootComponentType,this.config,D=>this.serializeUrl(D),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Ci.b)(D=>{if("eager"===this.urlUpdateStrategy){if(!D.extras.skipLocationChange){const P=this.urlHandlingStrategy.merge(D.urlAfterRedirects,D.rawUrl);this.setBrowserUrl(P,D)}this.browserUrlTree=D.urlAfterRedirects}const I=new je(D.id,this.serializeUrl(D.extractedUrl),this.serializeUrl(D.urlAfterRedirects),D.targetSnapshot);i.next(I)}));if(_&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:I,extractedUrl:P,source:U,restoredState:Q,extras:le}=d,Ye=new j(I,this.serializeUrl(P),U,Q);i.next(Ye);const et=Kt(P,this.rootComponentType).snapshot;return at(Object.assign(Object.assign({},d),{targetSnapshot:et,urlAfterRedirects:P,extras:Object.assign(Object.assign({},le),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=d.rawUrl,d.resolve(null),ha.E}),eh(d=>{const{targetSnapshot:p,id:_,extractedUrl:b,rawUrl:D,extras:{skipLocationChange:I,replaceUrl:P}}=d;return this.hooks.beforePreactivation(p,{navigationId:_,appliedUrlTree:b,rawUrlTree:D,skipLocationChange:!!I,replaceUrl:!!P})}),(0,Ci.b)(d=>{const p=new Mt(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);this.triggerEvent(p)}),(0,ct.U)(d=>Object.assign(Object.assign({},d),{guards:By(d.targetSnapshot,d.currentSnapshot,this.rootContexts)})),function Hy(n,t){return(0,si.z)(e=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:l}}=e;return 0===l.length&&0===s.length?at(Object.assign(Object.assign({},e),{guardsResult:!0})):function eI(n,t,e,i){return(0,rn.D)(n).pipe((0,si.z)(r=>function sE(n,t,e,i,r){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return s&&0!==s.length?at(s.map(d=>{const p=rp(d,t,r);let _;if(function GT(n){return n&&xc(n.canDeactivate)}(p))_=vs(p.canDeactivate(n,t,e,i));else{if(!xc(p))throw new Error("Invalid CanDeactivate guard");_=vs(p(n,t,e,i))}return _.pipe(S())})).pipe(Su()):at(!0)}(r.component,r.route,e,t,i)),S(r=>!0!==r,!0))}(l,i,r,n).pipe((0,si.z)(d=>d&&function XC(n){return"boolean"==typeof n}(d)?function tI(n,t,e,i){return(0,rn.D)(t).pipe(io(r=>Oo(function iI(n,t){return null!==n&&t&&t(new qa(n)),at(!0)}(r.route.parent,i),function nI(n,t){return null!==n&&t&&t(new _s(n)),at(!0)}(r.route,i),function sI(n,t,e){const i=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(l=>function Vy(n){const t=n.routeConfig?n.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:n,guards:t}:null}(l)).filter(l=>null!==l).map(l=>ri(()=>at(l.guards.map(p=>{const _=rp(p,l.node,e);let b;if(function eE(n){return n&&xc(n.canActivateChild)}(_))b=vs(_.canActivateChild(i,n));else{if(!xc(_))throw new Error("Invalid CanActivateChild guard");b=vs(_(i,n))}return b.pipe(S())})).pipe(Su())));return at(s).pipe(Su())}(n,r.path,e),function rI(n,t,e){const i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||0===i.length)return at(!0);const r=i.map(s=>ri(()=>{const l=rp(s,t,e);let d;if(function jT(n){return n&&xc(n.canActivate)}(l))d=vs(l.canActivate(t,n));else{if(!xc(l))throw new Error("Invalid CanActivate guard");d=vs(l(t,n))}return d.pipe(S())}));return at(r).pipe(Su())}(n,r.route,e))),S(r=>!0!==r,!0))}(i,s,n,t):at(d)),(0,ct.U)(d=>Object.assign(Object.assign({},e),{guardsResult:d})))})}(this.ngModule.injector,d=>this.triggerEvent(d)),(0,Ci.b)(d=>{if(xu(d.guardsResult)){const _=bu(`Redirecting to "${this.serializeUrl(d.guardsResult)}"`);throw _.url=d.guardsResult,_}const p=new Nt(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.triggerEvent(p)}),Gn(d=>!!d.guardsResult||(this.restoreHistory(d),this.cancelNavigationTransition(d,""),!1)),eh(d=>{if(d.guards.canActivateChecks.length)return at(d).pipe((0,Ci.b)(p=>{const _=new jt(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(_)}),Wn(p=>{let _=!1;return at(p).pipe(function dE(n,t){return(0,si.z)(e=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return at(e);let s=0;return(0,rn.D)(r).pipe(io(l=>function hE(n,t,e,i){return function qy(n,t,e,i){const r=Wy(n);if(0===r.length)return at({});const s={};return(0,rn.D)(r).pipe((0,si.z)(l=>function Og(n,t,e,i){const r=rp(n,t,i);return vs(r.resolve?r.resolve(t,e):r(t,e))}(n[l],t,e,i).pipe((0,Ci.b)(d=>{s[l]=d}))),Vf(1),(0,si.z)(()=>Wy(s).length===r.length?at(s):ha.E))}(n._resolve,n,t,i).pipe((0,ct.U)(s=>(n._resolvedData=s,n.data=Object.assign(Object.assign({},n.data),oo(n,e).resolve),null)))}(l.route,i,n,t)),(0,Ci.b)(()=>s++),Vf(1),(0,si.z)(l=>s===r.length?at(e):ha.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Ci.b)({next:()=>_=!0,complete:()=>{_||(this.restoreHistory(p),this.cancelNavigationTransition(p,"At least one route resolver didn't emit any value."))}}))}),(0,Ci.b)(p=>{const _=new vt(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(_)}))}),eh(d=>{const{targetSnapshot:p,id:_,extractedUrl:b,rawUrl:D,extras:{skipLocationChange:I,replaceUrl:P}}=d;return this.hooks.afterPreactivation(p,{navigationId:_,appliedUrlTree:b,rawUrlTree:D,skipLocationChange:!!I,replaceUrl:!!P})}),(0,ct.U)(d=>{const p=function $f(n,t,e){const i=Vo(n,t._root,e?e._root:void 0);return new xt(i,t)}(this.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return Object.assign(Object.assign({},d),{targetRouterState:p})}),(0,Ci.b)(d=>{this.currentUrlTree=d.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl),this.routerState=d.targetRouterState,"deferred"===this.urlUpdateStrategy&&(d.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,d),this.browserUrlTree=d.urlAfterRedirects)}),((n,t,e)=>(0,ct.U)(i=>(new Qf(t,i.targetRouterState,i.currentRouterState,e).activate(n),i)))(this.rootContexts,this.routeReuseStrategy,d=>this.triggerEvent(d)),(0,Ci.b)({next(){s=!0},complete(){s=!0}}),M(()=>{var d;s||l||this.cancelNavigationTransition(r,`Navigation ID ${r.id} is not equal to the current navigation id ${this.navigationId}`),(null===(d=this.currentNavigation)||void 0===d?void 0:d.id)===r.id&&(this.currentNavigation=null)}),ci(d=>{if(l=!0,function Uf(n){return n&&n[Wa]}(d)){const p=xu(d.url);p||(this.navigated=!0,this.restoreHistory(r,!0));const _=new pe(r.id,this.serializeUrl(r.extractedUrl),d.message);i.next(_),p?setTimeout(()=>{const b=this.urlHandlingStrategy.merge(d.url,this.rawUrlTree),D={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||vE(r.source)};this.scheduleNavigation(b,"imperative",null,D,{resolve:r.resolve,reject:r.reject,promise:r.promise})},0):r.resolve(!1)}else{this.restoreHistory(r,!0);const p=new Le(r.id,this.serializeUrl(r.extractedUrl),d);i.next(p);try{r.resolve(this.errorHandler(d))}catch(_){r.reject(_)}}return ha.E}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const i="popstate"===e.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{var r;const s={replaceUrl:!0},l=(null===(r=e.state)||void 0===r?void 0:r.navigationId)?e.state:null;if(l){const p=Object.assign({},l);delete p.navigationId,delete p.\u0275routerPageId,0!==Object.keys(p).length&&(s.state=p)}const d=this.parseUrl(e.url);this.scheduleNavigation(d,i,l,s)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){tp(e),this.config=e.map(Ry),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,i={}){const{relativeTo:r,queryParams:s,fragment:l,queryParamsHandling:d,preserveFragment:p}=i,_=r||this.routerState.root,b=p?this.currentUrlTree.fragment:l;let D=null;switch(d){case"merge":D=Object.assign(Object.assign({},this.currentUrlTree.queryParams),s);break;case"preserve":D=this.currentUrlTree.queryParams;break;default:D=s||null}return null!==D&&(D=this.removeEmptyProps(D)),function Yf(n,t,e,i,r){if(0===e.length)return Ey(t.root,t.root,t.root,i,r);const s=function LT(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Dy(!0,0,n);let t=0,e=!1;const i=n.reduce((r,s,l)=>{if("object"==typeof s&&null!=s){if(s.outlets){const d={};return Er(s.outlets,(p,_)=>{d[_]="string"==typeof p?p.split("/"):p}),[...r,{outlets:d}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===l?(s.split("/").forEach((d,p)=>{0==p&&"."===d||(0==p&&""===d?e=!0:".."===d?t++:""!=d&&r.push(d))}),r):[...r,s]},[]);return new Dy(e,t,i)}(e);if(s.toRoot())return Ey(t.root,t.root,new sn([],{}),i,r);const l=function BT(n,t,e){if(n.isAbsolute)return new xy(t.root,!0,0);if(-1===e.snapshot._lastPathIndex){const s=e.snapshot._urlSegment;return new xy(s,s===t.root,0)}const i=Xn(n.commands[0])?0:1;return function VT(n,t,e){let i=n,r=t,s=e;for(;s>r;){if(s-=r,i=i.parent,!i)throw new Error("Invalid number of '../'");r=i.segments.length}return new xy(i,!1,r-s)}(e.snapshot._urlSegment,e.snapshot._lastPathIndex+i,n.numberOfDoubleDots)}(s,t,n),d=l.processChildren?Sy(l.segmentGroup,l.index,s.commands):HT(l.segmentGroup,l.index,s.commands);return Ey(t.root,l.segmentGroup,d,i,r)}(_,this.currentUrlTree,e,D,null!=b?b:null)}navigateByUrl(e,i={skipLocationChange:!1}){const r=xu(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,i)}navigate(e,i={skipLocationChange:!1}){return function _E(n){for(let t=0;t<n.length;t++){const e=n[t];if(null==e)throw new Error(`The requested path contains ${e} segment at index ${t}`)}}(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let i;try{i=this.urlSerializer.parse(e)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,e)}return i}isActive(e,i){let r;if(r=!0===i?Object.assign({},Ky):!1===i?Object.assign({},gE):i,xu(e))return Wd(this.currentUrlTree,e,r);const s=this.parseUrl(e);return Wd(this.currentUrlTree,s,r)}removeEmptyProps(e){return Object.keys(e).reduce((i,r)=>{const s=e[r];return null!=s&&(i[r]=s),i},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new X(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,i,r,s,l){var d,p;if(this.disposed)return Promise.resolve(!1);let _,b,D;l?(_=l.resolve,b=l.reject,D=l.promise):D=new Promise((U,Q)=>{_=U,b=Q});const I=++this.navigationId;let P;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),P=r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?null!==(d=this.browserPageId)&&void 0!==d?d:0:(null!==(p=this.browserPageId)&&void 0!==p?p:0)+1):P=0,this.setTransition({id:I,targetPageId:P,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:s,resolve:_,reject:b,promise:D,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),D.catch(U=>Promise.reject(U))}setBrowserUrl(e,i){const r=this.urlSerializer.serialize(e),s=Object.assign(Object.assign({},i.extras.state),this.generateNgRouterState(i.id,i.targetPageId));this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(e,i=!1){var r,s;if("computed"===this.canceledNavigationResolution){const l=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(r=this.currentNavigation)||void 0===r?void 0:r.finalUrl)||0===l?this.currentUrlTree===(null===(s=this.currentNavigation)||void 0===s?void 0:s.finalUrl)&&0===l&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(l)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,i){const r=new pe(e.id,this.serializeUrl(e.extractedUrl),i);this.triggerEvent(r),e.resolve(!1)}generateNgRouterState(e,i){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}}return n.\u0275fac=function(e){c.$Z()},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function vE(n){return"imperative"!==n}class Xy{}class yE{preload(t,e){return at(null)}}let bE=(()=>{class n{constructor(e,i,r,s){this.router=e,this.injector=r,this.preloadingStrategy=s,this.loader=new th(r,i,p=>e.triggerEvent(new ji(p)),p=>e.triggerEvent(new Qi(p)))}setUpPreloading(){this.subscription=this.router.events.pipe(Gn(e=>e instanceof X),io(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(c.h0i);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){const r=[];for(const s of i)if(s.loadChildren&&!s.canLoad&&s._loadedConfig){const l=s._loadedConfig;r.push(this.processRoutes(l.module,l.routes))}else s.loadChildren&&!s.canLoad?r.push(this.preloadConfig(e,s)):s.children&&r.push(this.processRoutes(e,s.children));return(0,rn.D)(r).pipe((0,ar.J)(),(0,ct.U)(s=>{}))}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>(i._loadedConfig?at(i._loadedConfig):this.loader.load(e.injector,i)).pipe((0,si.z)(s=>(i._loadedConfig=s,this.processRoutes(s.module,s.routes)))))}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(lo),c.LFG(c.Sil),c.LFG(c.zs3),c.LFG(Xy))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Jy=(()=>{class n{constructor(e,i,r={}){this.router=e,this.viewportScroller=i,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof j?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof X&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof Lo&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.router.triggerEvent(new Lo(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(e){c.$Z()},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Tu=new c.OlP("ROUTER_CONFIGURATION"),wE=new c.OlP("ROUTER_FORROOT_GUARD"),mI=[Oe,{provide:Cg,useClass:Eg},{provide:lo,useFactory:function DE(n,t,e,i,r,s,l={},d,p){const _=new lo(null,n,t,e,i,r,fy(s));return d&&(_.urlHandlingStrategy=d),p&&(_.routeReuseStrategy=p),function gI(n,t){n.errorHandler&&(t.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(t.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(t.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(t.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(t.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(t.canceledNavigationResolution=n.canceledNavigationResolution)}(l,_),l.enableTracing&&_.events.subscribe(b=>{var D,I;null===(D=console.group)||void 0===D||D.call(console,`Router Event: ${b.constructor.name}`),console.log(b.toString()),console.log(b),null===(I=console.groupEnd)||void 0===I||I.call(console)}),_},deps:[Cg,Jf,Oe,c.zs3,c.Sil,ap,Tu,[class cI{},new c.FiY],[class fE{},new c.FiY]]},Jf,{provide:cr,useFactory:function tb(n){return n.routerState.root},deps:[lo]},bE,yE,class fI{preload(t,e){return e().pipe(ci(()=>at(null)))}},{provide:Tu,useValue:{enableTracing:!1}}];function Gt(){return new c.PXZ("Router",lo)}let eb=(()=>{class n{constructor(e,i){}static forRoot(e,i){return{ngModule:n,providers:[mI,Ho(e),{provide:wE,useFactory:Ng,deps:[[lo,new c.FiY,new c.tp0]]},{provide:Tu,useValue:i||{}},{provide:ye,useFactory:EE,deps:[fe,[new c.tBr(Ze),new c.FiY],Tu]},{provide:Jy,useFactory:CE,deps:[lo,lc,Tu]},{provide:Xy,useExisting:i&&i.preloadingStrategy?i.preloadingStrategy:yE},{provide:c.PXZ,multi:!0,useFactory:Gt},[ma,{provide:c.ip1,multi:!0,useFactory:nb,deps:[ma]},{provide:Fg,useFactory:xE,deps:[ma]},{provide:c.tb,multi:!0,useExisting:Fg}]]}}static forChild(e){return{ngModule:n,providers:[Ho(e)]}}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(wE,8),c.LFG(lo,8))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();function CE(n,t,e){return e.scrollOffset&&t.setOffset(e.scrollOffset),new Jy(n,t,e)}function EE(n,t,e={}){return e.useHash?new Fe(n,t):new We(n,t)}function Ng(n){return"guarded"}function Ho(n){return[{provide:c.deG,multi:!0,useValue:n},{provide:ap,multi:!0,useValue:n}]}let ma=(()=>{class n{constructor(e){this.injector=e,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Et.x}appInitializer(){return this.injector.get(W,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let i=null;const r=new Promise(d=>i=d),s=this.injector.get(lo),l=this.injector.get(Tu);return"disabled"===l.initialNavigation?(s.setUpLocationChangeListener(),i(!0)):"enabled"===l.initialNavigation||"enabledBlocking"===l.initialNavigation?(s.hooks.afterPreactivation=()=>this.initNavigation?at(null):(this.initNavigation=!0,i(!0),this.resultOfPreactivationDone),s.initialNavigation()):i(!0),r})}bootstrapListener(e){const i=this.injector.get(Tu),r=this.injector.get(bE),s=this.injector.get(Jy),l=this.injector.get(lo),d=this.injector.get(c.z2F);e===d.components[0]&&(("enabledNonBlocking"===i.initialNavigation||void 0===i.initialNavigation)&&l.initialNavigation(),r.setUpPreloading(),s.init(),l.resetRootComponentType(d.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(c.zs3))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function nb(n){return n.appInitializer.bind(n)}function xE(n){return n.bootstrapListener.bind(n)}const Fg=new c.OlP("Router Initializer");let _N=(()=>{class n{constructor(e){this.updateService=e,this.title="merchants-ball-beers"}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(_c))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,consts:[[1,"outLet"]],template:function(e,i){1&e&&c._UZ(0,"router-outlet",0)},directives:[ep],styles:[""]}),n})();var Ai=F(2011),Iu=F(5363),ib=F(6063);class rb extends Et.x{constructor(t=1/0,e=1/0,i=ib.l){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){const{isStopped:e,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:l}=this;e||(i.push(t),!r&&i.push(s.now()+l)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(t),{_infiniteTimeWindow:i,_buffer:r}=this,s=r.slice();for(let l=0;l<s.length&&!t.closed;l+=i?1:2)t.next(s[l]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){const{_bufferSize:t,_timestampProvider:e,_buffer:i,_infiniteTimeWindow:r}=this,s=(r?1:2)*t;if(t<1/0&&s<i.length&&i.splice(0,i.length-s),!r){const l=e.now();let d=0;for(let p=1;p<i.length&&i[p]<=l;p+=2)d=p;d&&i.splice(0,d+1)}}}var lp=F(3099);function vI(n,t,e){let i,r=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:t=1/0,refCount:r=!1,scheduler:e}=n):i=null!=n?n:1/0,(0,lp.B)({connector:()=>new rb(i,t,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function SE(n,t){return(0,vr.m)(t)?Wn(()=>n,t):Wn(()=>n)}var sb=F(9468),kn=F(5813);F(5867);var xe=F(5861),ki=F(9681),co=F(4859),L=F(2090),jo=F(1877);const Bg=new Map,TE={activated:!1,tokenObservers:[]},ab={initialized:!1,enabled:!1};function Dr(n){return Bg.get(n)||TE}function xr(n,t){Bg.set(n,t)}function up(){return ab}class dp{constructor(t,e,i,r,s){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){var e=this;return(0,xe.Z)(function*(){e.stop();try{e.pending=new L.BH,yield function ih(n){return new Promise(t=>{setTimeout(t,n)})}(e.getNextRun(t)),e.pending.resolve(),yield e.pending.promise,e.pending=new L.BH,yield e.operation(),e.pending.resolve(),yield e.pending.promise,e.process(!0).catch(()=>{})}catch(i){e.retryPolicy(i)?e.process(!1).catch(()=>{}):e.stop()}})()}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}}const Xi=new L.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Au(n){if(!Dr(n).activated)throw Xi.create("use-before-activation",{appName:n.name})}function Vg(n,t){return fp.apply(this,arguments)}function fp(){return(fp=(0,xe.Z)(function*({url:n,body:t},e){var i,r;const s={"Content-Type":"application/json"},l=e.getImmediate({optional:!0});if(l){const P=yield l.getHeartbeatsHeader();P&&(s["X-Firebase-Client"]=P)}const d={method:"POST",body:JSON.stringify(t),headers:s};let p,_;try{p=yield fetch(n,d)}catch(P){throw Xi.create("fetch-network-error",{originalErrorMessage:null===(i=P)||void 0===i?void 0:i.message})}if(200!==p.status)throw Xi.create("fetch-status-error",{httpStatus:p.status});try{_=yield p.json()}catch(P){throw Xi.create("fetch-parse-error",{originalErrorMessage:null===(r=P)||void 0===r?void 0:r.message})}const b=_.ttl.match(/^([\d.]+)(s)$/);if(!b||!b[2]||isNaN(Number(b[1])))throw Xi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${_.ttl}`});const D=1e3*Number(b[1]),I=Date.now();return{token:_.token,expireTimeMillis:I+D,issuedAtTimeMillis:I}})).apply(this,arguments)}function Ug(n,t){const{projectId:e,appId:i,apiKey:r}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${e}/apps/${i}:exchangeDebugToken?key=${r}`,body:{debug_token:t}}}const Hg="firebase-app-check-store";let pp=null;function OE(){return pp||(pp=new Promise((n,t)=>{var e;try{const i=indexedDB.open("firebase-app-check-database",1);i.onsuccess=r=>{n(r.target.result)},i.onerror=r=>{var s;t(Xi.create("storage-open",{originalErrorMessage:null===(s=r.target.error)||void 0===s?void 0:s.message}))},i.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Hg,{keyPath:"compositeKey"})}}catch(i){t(Xi.create("storage-open",{originalErrorMessage:null===(e=i)||void 0===e?void 0:e.message}))}}),pp)}function pb(){return(pb=(0,xe.Z)(function*(n,t){const i=(yield OE()).transaction(Hg,"readwrite"),s=i.objectStore(Hg).put({compositeKey:n,value:t});return new Promise((l,d)=>{s.onsuccess=p=>{l()},i.onerror=p=>{var _;d(Xi.create("storage-set",{originalErrorMessage:null===(_=p.target.error)||void 0===_?void 0:_.message}))}})})).apply(this,arguments)}const jg=new jo.Yd("@firebase/app-check");function gb(n,t){return(0,L.hl)()?function EI(n,t){return function NE(n,t){return pb.apply(this,arguments)}(function mb(n){return`${n.options.appId}-${n.name}`}(n),t)}(n,t).catch(e=>{jg.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}function LE(){return up().enabled}function vb(){return yb.apply(this,arguments)}function yb(){return(yb=(0,xe.Z)(function*(){const n=up();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const TI={error:"UNKNOWN_ERROR"};function II(n){return L.US.encodeString(JSON.stringify(n),!1)}function gp(n){return Gg.apply(this,arguments)}function Gg(){return(Gg=(0,xe.Z)(function*(n,t=!1){const e=n.app;Au(e);const i=Dr(e);let s,r=i.token;if(!r){const p=yield i.cachedTokenPromise;p&&wb(p)&&(r=p)}if(!t&&r&&wb(r))return{token:r.token};let d,l=!1;if(LE()){i.exchangeTokenPromise||(i.exchangeTokenPromise=Vg(Ug(e,yield vb()),n.heartbeatServiceProvider).then(_=>(i.exchangeTokenPromise=void 0,_)),l=!0);const p=yield i.exchangeTokenPromise;return yield gb(e,p),xr(e,Object.assign(Object.assign({},i),{token:p})),{token:p.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().then(p=>(i.exchangeTokenPromise=void 0,p)),l=!0),r=yield i.exchangeTokenPromise}catch(p){"appCheck/throttled"===p.code?jg.warn(p.message):jg.error(p),s=p}return r?(d={token:r.token},xr(e,Object.assign(Object.assign({},i),{token:r})),yield gb(e,r)):d=UE(s),l&&VE(e,d),d})).apply(this,arguments)}function Go(n,t){const e=Dr(n),i=e.tokenObservers.filter(r=>r.next!==t);0===i.length&&e.tokenRefresher&&e.tokenRefresher.isRunning()&&e.tokenRefresher.stop(),xr(n,Object.assign(Object.assign({},e),{tokenObservers:i}))}function zg(n){const{app:t}=n,e=Dr(t);let i=e.tokenRefresher;i||(i=function AI(n){const{app:t}=n;return new dp((0,xe.Z)(function*(){let i;if(i=Dr(t).token?yield gp(n,!0):yield gp(n),i.error)throw i.error}),()=>!0,()=>{const e=Dr(t);if(e.token){let i=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return i=Math.min(i,e.token.expireTimeMillis-3e5),Math.max(0,i-Date.now())}return 0},3e4,96e4)}(n),xr(t,Object.assign(Object.assign({},e),{tokenRefresher:i}))),!i.isRunning()&&e.isTokenAutoRefreshEnabled&&i.start()}function VE(n,t){const e=Dr(n).tokenObservers;for(const i of e)try{"EXTERNAL"===i.type&&null!=t.error?i.error(t.error):i.next(t)}catch(r){}}function wb(n){return n.expireTimeMillis-Date.now()>0}function UE(n){return{token:II(TI),error:n}}class kI{constructor(t,e){this.app=t,this.heartbeatServiceProvider=e}_delete(){const{tokenObservers:t}=Dr(this.app);for(const e of t)Go(this.app,e.next);return Promise.resolve()}}const Pb="app-check-internal";!function Nb(){(0,ki._registerComponent)(new co.wA("app-check",n=>function RI(n,t){return new kI(n,t)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,t,e)=>{n.getProvider(Pb).initialize()})),(0,ki._registerComponent)(new co.wA(Pb,n=>function OI(n){return{getToken:t=>gp(n,t),addTokenListener:t=>function bb(n,t,e,i){const{app:r}=n,s=Dr(r),l={next:e,error:i,type:t};if(xr(r,Object.assign(Object.assign({},s),{tokenObservers:[...s.tokenObservers,l]})),s.token&&wb(s.token)){const d=s.token;Promise.resolve().then(()=>{e({token:d.token}),zg(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>zg(n))}(n,"INTERNAL",t),removeTokenListener:t=>Go(n.app,t)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ki.registerVersion)("@firebase/app-check","0.5.10")}();class ku{constructor(){return(0,kn.vb)("app-check")}}"undefined"!=typeof window&&window;var Yg=F(127);const ho=new c.OlP("angularfire2.auth.use-emulator"),yp=new c.OlP("angularfire2.auth.settings"),Zg=new c.OlP("angularfire2.auth.tenant-id"),Kg=new c.OlP("angularfire2.auth.langugage-code"),Qg=new c.OlP("angularfire2.auth.use-device-language"),Xg=new c.OlP("angularfire.auth.persistence"),Lb=(n,t,e,i,r,s,l,d)=>(0,Ai.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const p=t.runOutsideAngular(()=>n.auth());if(e&&p.useEmulator(...e),i&&(p.tenantId=i),p.languageCode=r,s&&p.useDeviceLanguage(),l)for(const[_,b]of Object.entries(l))p.settings[_]=b;return d&&p.setPersistence(d),p},[e,i,r,s,l,d]);let bp=(()=>{class n{constructor(e,i,r,s,l,d,p,_,b,D,I,P){const U=new Et.x,Q=at(void 0).pipe((0,Iu.Q)(l.outsideAngular),Wn(()=>s.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,5881)))),(0,ct.U)(()=>(0,Ai.on)(e,s,i)),(0,ct.U)(le=>Lb(le,s,d,_,b,D,p,I)),vI({bufferSize:1,refCount:!1}));if(or(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=at(null);else{Q.pipe(S()).subscribe();const Ye=Q.pipe(Wn(Xe=>Xe.getRedirectResult().then(Ot=>Ot,()=>null)),kn.iC,vI({bufferSize:1,refCount:!1})),et=Q.pipe(Wn(Xe=>new Ui.y(Ot=>({unsubscribe:s.runOutsideAngular(()=>Xe.onAuthStateChanged(Lt=>Ot.next(Lt),Lt=>Ot.error(Lt),()=>Ot.complete()))})))),rt=Q.pipe(Wn(Xe=>new Ui.y(Ot=>({unsubscribe:s.runOutsideAngular(()=>Xe.onIdTokenChanged(Lt=>Ot.next(Lt),Lt=>Ot.error(Lt),()=>Ot.complete()))}))));this.authState=Ye.pipe(SE(et),(0,sb.R)(l.outsideAngular),(0,Iu.Q)(l.insideAngular)),this.user=Ye.pipe(SE(rt),(0,sb.R)(l.outsideAngular),(0,Iu.Q)(l.insideAngular)),this.idToken=this.user.pipe(Wn(Xe=>Xe?(0,rn.D)(Xe.getIdToken()):at(null))),this.idTokenResult=this.user.pipe(Wn(Xe=>Xe?(0,rn.D)(Xe.getIdTokenResult()):at(null))),this.credential=(0,Xs.T)(Ye,U,this.authState.pipe(Gn(Xe=>!Xe))).pipe((0,ct.U)(Xe=>(null==Xe?void 0:Xe.user)?Xe:null),(0,sb.R)(l.outsideAngular),(0,Iu.Q)(l.insideAngular))}return(0,Ai.pX)(this,Q,s,{spy:{apply:(le,Ye,et)=>{(le.startsWith("signIn")||le.startsWith("createUser"))&&et.then(rt=>U.next(rt))}}})}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(Ai.Dh),c.LFG(Ai.xv,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(kn.HU),c.LFG(ho,8),c.LFG(yp,8),c.LFG(Zg,8),c.LFG(Kg,8),c.LFG(Qg,8),c.LFG(Xg,8),c.LFG(ku,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),qI=(()=>{class n{constructor(){Yg.Z.registerVersion("angularfire",kn.q4.full,"auth-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[bp]}),n})();function Bb(n,t=gs.z){return(0,Qn.e)((e,i)=>{let r=null,s=null,l=null;const d=()=>{if(r){r.unsubscribe(),r=null;const _=s;s=null,i.next(_)}};function p(){const _=l+n,b=t.now();if(b<_)return r=this.schedule(void 0,_-b),void i.add(r);d()}e.subscribe((0,Un.x)(i,_=>{s=_,l=t.now(),r||(r=t.schedule(p,n),i.add(r))},()=>{d(),i.complete()},void 0,()=>{s=r=null}))})}var Jg=F(3942);const WI="firebasestorage.googleapis.com",Vb="storageBucket";class Gi extends L.ZR{constructor(t,e){super(zE(t),`Firebase Storage: ${e} (${zE(t)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Gi.prototype)}_codeEquals(t){return zE(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function zE(n){return"storage/"+n}function wp(){return new Gi("unknown","An unknown error occurred, please check the error payload for server response.")}function QI(){return new Gi("canceled","User canceled the upload/download.")}function KE(){return new Gi("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Tc(n){return new Gi("invalid-argument",n)}function XE(){return new Gi("app-deleted","The Firebase app was deleted.")}function e_(n){return new Gi("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Cp(n,t){return new Gi("invalid-format","String does not match format '"+n+"': "+t)}function Ep(n){throw new Gi("internal-error","Internal error: "+n)}class ns{constructor(t,e){this.bucket=t,this.path_=e}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,e){let i;try{i=ns.makeFromUrl(t,e)}catch(r){return new ns(t,"")}if(""===i.path)return i;throw function YE(n){return new Gi("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(t)}static makeFromUrl(t,e){let i=null;const r="([A-Za-z0-9.\\-_]+)",d=new RegExp("^gs://"+r+"(/(.*))?$","i");function _(Xe){Xe.path_=decodeURIComponent(Xe.path)}const D=e.replace(/[.]/g,"\\."),rt=[{regex:d,indices:{bucket:1,path:3},postModify:function s(Xe){"/"===Xe.path.charAt(Xe.path.length-1)&&(Xe.path_=Xe.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${D}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:_},{regex:new RegExp(`^https?://${e===WI?"(?:storage.googleapis.com|storage.cloud.google.com)":e}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:_}];for(let Xe=0;Xe<rt.length;Xe++){const Ot=rt[Xe],Lt=Ot.regex.exec(t);if(Lt){let hr=Lt[Ot.indices.path];hr||(hr=""),i=new ns(Lt[Ot.indices.bucket],hr),Ot.postModify(i);break}}if(null==i)throw function WE(n){return new Gi("invalid-url","Invalid URL '"+n+"'.")}(t);return i}}class XI{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}function Ic(n){return"string"==typeof n||n instanceof String}function JE(n){return Ub()&&n instanceof Blob}function Ub(){return"undefined"!=typeof Blob}function Dp(n,t,e,i){if(i<t)throw Tc(`Invalid value for '${n}'. Expected ${t} or greater.`);if(i>e)throw Tc(`Invalid value for '${n}'. Expected ${e} or less.`)}function Sr(n,t,e){let i=t;return null==e&&(i=`https://${t}`),`${e}://${i}/v0${n}`}function ah(n){const t=encodeURIComponent;let e="?";for(const i in n)n.hasOwnProperty(i)&&(e=e+(t(i)+"=")+t(n[i])+"&");return e=e.slice(0,-1),e}var Ei=(()=>{return(n=Ei||(Ei={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",Ei;var n})();class Ru{constructor(t,e,i,r,s,l,d,p,_,b,D){this.url_=t,this.method_=e,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=l,this.callback_=d,this.errorCallback_=p,this.timeout_=_,this.progressCallback_=b,this.connectionFactory_=D,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((I,P)=>{this.resolve_=I,this.reject_=P,this.start_()})}start_(){const e=(i,r)=>{const s=this.resolve_,l=this.reject_,d=r.connection;if(r.wasSuccessCode)try{const p=this.callback_(d,d.getResponse());!function t_(n){return void 0!==n}(p)?s():s(p)}catch(p){l(p)}else if(null!==d){const p=wp();p.serverResponse=d.getErrorText(),l(this.errorCallback_?this.errorCallback_(d,p):p)}else l(r.canceled?this.appDelete_?XE():QI():function AN(){return new Gi("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?e(0,new Ou(!1,null,!0)):this.backoffId_=function JI(n,t,e){let i=1,r=null,s=null,l=!1,d=0;function p(){return 2===d}let _=!1;function b(...le){_||(_=!0,t.apply(null,le))}function D(le){r=setTimeout(()=>{r=null,n(P,p())},le)}function I(){s&&clearTimeout(s)}function P(le,...Ye){if(_)return void I();if(le)return I(),void b.call(null,le,...Ye);if(p()||l)return I(),void b.call(null,le,...Ye);let rt;i<64&&(i*=2),1===d?(d=2,rt=0):rt=1e3*(i+Math.random()),D(rt)}let U=!1;function Q(le){U||(U=!0,I(),!_&&(null!==r?(le||(d=2),clearTimeout(r),D(0)):le||(d=1)))}return D(0),s=setTimeout(()=>{l=!0,Q(!0)},e),Q}((i,r)=>{if(r)return void i(!1,new Ou(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const l=d=>{null!==this.progressCallback_&&this.progressCallback_(d.loaded,d.lengthComputable?d.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(l),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(l),this.pendingConnection_=null;const d=s.getErrorCode()===Ei.NO_ERROR,p=s.getStatus();if(!d||this.isRetryStatusCode_(p)){const b=s.getErrorCode()===Ei.ABORT;return void i(!1,new Ou(!1,null,b))}const _=-1!==this.successCodes_.indexOf(p);i(!0,new Ou(_,s))})},e,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function eA(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(t){const e=t>=500&&t<600,r=-1!==[408,429].indexOf(t),s=-1!==this.additionalRetryCodes_.indexOf(t);return e||r||s}}class Ou{constructor(t,e,i){this.wasSuccessCode=t,this.connection=e,this.canceled=!!i}}function hh(...n){const t=function dh(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==t){const e=new t;for(let i=0;i<n.length;i++)e.append(n[i]);return e.getBlob()}if(Ub())return new Blob(n);throw new Gi("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Mr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Ac{constructor(t,e){this.data=t,this.contentType=e||null}}function n_(n,t){switch(n){case Mr.RAW:return new Ac(jb(t));case Mr.BASE64:case Mr.BASE64URL:return new Ac(Gb(n,t));case Mr.DATA_URL:return new Ac(function tD(n){const t=new zb(n);return t.base64?Gb(Mr.BASE64,t.rest):function eD(n){let t;try{t=decodeURIComponent(n)}catch(e){throw Cp(Mr.DATA_URL,"Malformed data URL.")}return jb(t)}(t.rest)}(t),function nD(n){return new zb(n).contentType}(t))}throw wp()}function jb(n){const t=[];for(let e=0;e<n.length;e++){let i=n.charCodeAt(e);i<=127?t.push(i):i<=2047?t.push(192|i>>6,128|63&i):55296==(64512&i)?e<n.length-1&&56320==(64512&n.charCodeAt(e+1))?(i=65536|(1023&i)<<10|1023&n.charCodeAt(++e),t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i)):t.push(239,191,189):56320==(64512&i)?t.push(239,191,189):t.push(224|i>>12,128|i>>6&63,128|63&i)}return new Uint8Array(t)}function Gb(n,t){switch(n){case Mr.BASE64:{const r=-1!==t.indexOf("-"),s=-1!==t.indexOf("_");if(r||s)throw Cp(n,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case Mr.BASE64URL:{const r=-1!==t.indexOf("+"),s=-1!==t.indexOf("/");if(r||s)throw Cp(n,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let e;try{e=function ph(n){return atob(n)}(t)}catch(r){throw Cp(n,"Invalid character found")}const i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i}class zb{constructor(t){this.base64=!1,this.contentType=null;const e=t.match(/^data:([^,]+)?,/);if(null===e)throw Cp(Mr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=e[1]||null;null!=i&&(this.base64=function iD(n,t){return n.length>=t.length&&n.substring(n.length-t.length)===t}(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=t.substring(t.indexOf(",")+1)}}class _a{constructor(t,e){let i=0,r="";JE(t)?(this.data_=t,i=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),i=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),i=t.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(t,e){if(JE(this.data_)){const r=function fh(n,t,e){return n.webkitSlice?n.webkitSlice(t,e):n.mozSlice?n.mozSlice(t,e):n.slice?n.slice(t,e):null}(this.data_,t,e);return null===r?null:new _a(r)}{const i=new Uint8Array(this.data_.buffer,t,e-t);return new _a(i,!0)}}static getBlob(...t){if(Ub()){const e=t.map(i=>i instanceof _a?i.data_:i);return new _a(hh.apply(null,e))}{const e=t.map(l=>Ic(l)?n_(Mr.RAW,l).data:l.data_);let i=0;e.forEach(l=>{i+=l.byteLength});const r=new Uint8Array(i);let s=0;return e.forEach(l=>{for(let d=0;d<l.length;d++)r[s++]=l[d]}),new _a(r,!0)}}uploadData(){return this.data_}}function $b(n){let t;try{t=JSON.parse(n)}catch(e){return null}return function tA(n){return"object"==typeof n&&!Array.isArray(n)}(t)?t:null}function qb(n){const t=n.lastIndexOf("/",n.length-2);return-1===t?n:n.slice(t+1)}function sD(n,t){return t}class ys{constructor(t,e,i,r){this.server=t,this.local=e||t,this.writable=!!i,this.xform=r||sD}}let i_=null;function xp(){if(i_)return i_;const n=[];n.push(new ys("bucket")),n.push(new ys("generation")),n.push(new ys("metageneration")),n.push(new ys("name","fullPath",!0));const e=new ys("name");e.xform=function t(s,l){return function oD(n){return!Ic(n)||n.length<2?n:qb(n)}(l)},n.push(e);const r=new ys("size");return r.xform=function i(s,l){return void 0!==l?Number(l):l},n.push(r),n.push(new ys("timeCreated")),n.push(new ys("updated")),n.push(new ys("md5Hash",null,!0)),n.push(new ys("cacheControl",null,!0)),n.push(new ys("contentDisposition",null,!0)),n.push(new ys("contentEncoding",null,!0)),n.push(new ys("contentLanguage",null,!0)),n.push(new ys("contentType",null,!0)),n.push(new ys("metadata","customMetadata",!0)),i_=n,i_}function lD(n,t,e){const i=$b(t);return null===i?null:function iA(n,t,e){const i={type:"file"},r=e.length;for(let s=0;s<r;s++){const l=e[s];i[l.local]=l.xform(i,t[l.server])}return function aD(n,t){Object.defineProperty(n,"ref",{get:function e(){const s=new ns(n.bucket,n.fullPath);return t._makeStorageReference(s)}})}(i,n),i}(n,i,e)}function Wb(n,t){const e={},i=t.length;for(let r=0;r<i;r++){const s=t[r];s.writable&&(e[s.server]=n[s.local])}return JSON.stringify(e)}const r_="prefixes";class ql{constructor(t,e,i,r){this.url=t,this.method=e,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Wl(n){if(!n)throw wp()}function o_(n,t){return function e(i,r){const s=lD(n,r,t);return Wl(null!==s),s}}function mh(n){return function t(e,i){let r;return r=401===e.getStatus()?e.getErrorText().includes("Firebase App Check token is invalid")?function IN(){return new Gi("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function qE(){return new Gi("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===e.getStatus()?function $E(n){return new Gi("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===e.getStatus()?function ga(n){return new Gi("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):i,r.serverResponse=i.serverResponse,r}}function Xa(n){const t=mh(n);return function e(i,r){let s=t(i,r);return 404===i.getStatus()&&(s=function KI(n){return new Gi("object-not-found","Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=r.serverResponse,s}}function uD(n,t,e){const r=Sr(t.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,d=new ql(r,"GET",o_(n,e),l);return d.errorHandler=Xa(t),d}function dD(n,t,e,i,r){const s={};s.prefix=t.isRoot?"":t.path+"/",e&&e.length>0&&(s.delimiter=e),i&&(s.pageToken=i),r&&(s.maxResults=r);const d=Sr(t.bucketOnlyServerUrl(),n.host,n._protocol),_=n.maxOperationRetryTime,b=new ql(d,"GET",function cD(n,t){return function e(i,r){const s=function ON(n,t,e){const i=$b(e);return null===i?null:function rA(n,t,e){const i={prefixes:[],items:[],nextPageToken:e.nextPageToken};if(e[r_])for(const r of e[r_]){const s=r.replace(/\/$/,""),l=n._makeStorageReference(new ns(t,s));i.prefixes.push(l)}if(e.items)for(const r of e.items){const s=n._makeStorageReference(new ns(t,r.name));i.items.push(s)}return i}(n,t,i)}(n,t,r);return Wl(null!==s),s}}(n,t.bucket),_);return b.urlParams=s,b.errorHandler=mh(t),b}function mD(n,t,e){const i=Object.assign({},e);return i.fullPath=n.path,i.size=t.size(),i.contentType||(i.contentType=function pD(n,t){return n&&n.contentType||t&&t.type()||"application/octet-stream"}(null,t)),i}class l_{constructor(t,e,i,r){this.current=t,this.total=e,this.finalized=!!i,this.metadata=r||null}}function Yb(n,t){let e=null;try{e=n.getResponseHeader("X-Goog-Upload-Status")}catch(r){Wl(!1)}return Wl(!!e&&-1!==(t||["active"]).indexOf(e)),e}const bD={STATE_CHANGED:"state_changed"},Ur={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function wD(n){switch(n){case"running":case"pausing":case"canceling":return Ur.RUNNING;case"paused":return Ur.PAUSED;case"success":return Ur.SUCCESS;case"canceled":return Ur.CANCELED;default:return Ur.ERROR}}class Zb{constructor(t,e,i){if(function oh(n){return"function"==typeof n}(t)||null!=e||null!=i)this.next=t,this.error=null!=e?e:void 0,this.complete=null!=i?i:void 0;else{const s=t;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function gh(n){return(...t)=>{Promise.resolve().then(()=>n(...t))}}class CD extends class Sp{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ei.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ei.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ei.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,e,i,r){if(this.sent_)throw Ep("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return void 0!==i?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ep("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ep("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}}getResponse(){if(!this.sent_)throw Ep("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ep("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)}}{initXhr(){this.xhr_.responseType="text"}}function fo(){return new CD}class d_{constructor(t,e,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=i,this._mappings=xp(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{this._request=void 0,this._chunkMultiplier=1,r._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=r,this._transition("error"))},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals("canceled")?this.completeTransitions_():(this._error=r,this._transition("error"))},this._promise=new Promise((r,s)=>{this._resolve=r,this._reject=s,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const t=this._transferred;return e=>this._updateProgress(t+e)}_shouldDoResumable(t){return t.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(t){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([e,i])=>{switch(this._state){case"running":t(e,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((t,e)=>{const i=function oA(n,t,e,i,r){const s=t.bucketOnlyServerUrl(),l=mD(t,i,r),d={name:l.fullPath},p=Sr(s,n.host,n._protocol),b={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},D=Wb(l,e),U=new ql(p,"POST",function P(Q){let le;Yb(Q);try{le=Q.getResponseHeader("X-Goog-Upload-URL")}catch(Ye){Wl(!1)}return Wl(Ic(le)),le},n.maxUploadRetryTime);return U.urlParams=d,U.headers=b,U.body=D,U.errorHandler=mh(t),U}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,fo,t,e);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const t=this._uploadUrl;this._resolveToken((e,i)=>{const r=function _D(n,t,e,i){const p=new ql(e,"POST",function s(_){const b=Yb(_,["active","final"]);let D=null;try{D=_.getResponseHeader("X-Goog-Upload-Size-Received")}catch(P){Wl(!1)}D||Wl(!1);const I=Number(D);return Wl(!isNaN(I)),new l_(I,i.size(),"final"===b)},n.maxUploadRetryTime);return p.headers={"X-Goog-Upload-Command":"query"},p.errorHandler=mh(t),p}(this._ref.storage,this._ref._location,t,this._blob),s=this._ref.storage._makeRequest(r,fo,e,i);this._request=s,s.getPromise().then(l=>{l=l,this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const t=262144*this._chunkMultiplier,e=new l_(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((r,s)=>{let l;try{l=function yD(n,t,e,i,r,s,l,d){const p=new l_(0,0);if(l?(p.current=l.current,p.total=l.total):(p.current=0,p.total=i.size()),i.size()!==p.total)throw function kN(){return new Gi("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const _=p.total-p.current;let b=_;r>0&&(b=Math.min(b,r));const D=p.current,U={"X-Goog-Upload-Command":b===_?"upload, finalize":"upload","X-Goog-Upload-Offset":`${p.current}`},Q=i.slice(D,D+b);if(null===Q)throw KE();const rt=new ql(e,"POST",function le(Xe,Ot){const Lt=Yb(Xe,["active","final"]),bn=p.current+b,hr=i.size();let Da;return Da="final"===Lt?o_(t,s)(Xe,Ot):null,new l_(bn,hr,"final"===Lt,Da)},t.maxUploadRetryTime);return rt.headers=U,rt.body=Q.uploadData(),rt.progressCallback=d||null,rt.errorHandler=mh(n),rt}(this._ref._location,this._ref.storage,i,this._blob,t,this._mappings,e,this._makeProgressCallback())}catch(p){return this._error=p,void this._transition("error")}const d=this._ref.storage._makeRequest(l,fo,r,s);this._request=d,d.getPromise().then(p=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(p.current),p.finalized?(this._metadata=p.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((t,e)=>{const i=uD(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(i,fo,t,e);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((t,e)=>{const i=function gD(n,t,e,i,r){const s=t.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},p=function d(){let rt="";for(let Xe=0;Xe<2;Xe++)rt+=Math.random().toString().slice(2);return rt}();l["Content-Type"]="multipart/related; boundary="+p;const _=mD(t,i,r),b=Wb(_,e),P=_a.getBlob("--"+p+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+b+"\r\n--"+p+"\r\nContent-Type: "+_.contentType+"\r\n\r\n",i,"\r\n--"+p+"--");if(null===P)throw KE();const U={name:_.fullPath},Q=Sr(s,n.host,n._protocol),Ye=n.maxUploadRetryTime,et=new ql(Q,"POST",o_(n,e),Ye);return et.urlParams=U,et.headers=l,et.body=P.uploadData(),et.errorHandler=mh(t),et}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,fo,t,e);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(t){const e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()}_transition(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":const e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=t,this._notifyObservers();break;case"canceled":this._error=QI(),this._state=t,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const t=wD(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}}on(t,e,i,r){const s=new Zb(e||void 0,i||void 0,r||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(t,e){return this._promise.then(t,e)}catch(t){return this.then(null,t)}_addObserver(t){this._observers.push(t),this._notifyObserver(t)}_removeObserver(t){const e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(e=>{this._notifyObserver(e)})}_finishPromise(){if(void 0!==this._resolve){let t=!0;switch(wD(this._state)){case Ur.SUCCESS:gh(this._resolve.bind(null,this.snapshot))();break;case Ur.CANCELED:case Ur.ERROR:gh(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(t){switch(wD(this._state)){case Ur.RUNNING:case Ur.PAUSED:t.next&&gh(t.next.bind(t,this.snapshot))();break;case Ur.SUCCESS:t.complete&&gh(t.complete.bind(t))();break;default:t.error&&gh(t.error.bind(t,this._error))()}}resume(){const t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t}pause(){const t="running"===this._state;return t&&this._transition("pausing"),t}cancel(){const t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t}}class _h{constructor(t,e){this._service=t,this._location=e instanceof ns?e:ns.makeFromUrl(e,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,e){return new _h(t,e)}get root(){const t=new ns(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return qb(this._location.path)}get storage(){return this._service}get parent(){const t=function rD(n){if(0===n.length)return null;const t=n.lastIndexOf("/");return-1===t?"":n.slice(0,t)}(this._location.path);if(null===t)return null;const e=new ns(this._location.bucket,t);return new _h(this._service,e)}_throwIfRoot(t){if(""===this._location.path)throw e_(t)}}function Jb(n,t,e){return f_.apply(this,arguments)}function f_(){return(f_=(0,xe.Z)(function*(n,t,e){const r=yield p_(n,{pageToken:e});t.prefixes.push(...r.prefixes),t.items.push(...r.items),null!=r.nextPageToken&&(yield Jb(n,t,r.nextPageToken))})).apply(this,arguments)}function p_(n,t){null!=t&&"number"==typeof t.maxResults&&Dp("options.maxResults",1,1e3,t.maxResults);const e=t||{},i=dD(n.storage,n._location,"/",e.pageToken,e.maxResults);return n.storage.makeRequestWithTokens(i,fo)}function DD(n){n._throwIfRoot("getDownloadURL");const t=function fD(n,t,e){const r=Sr(t.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,d=new ql(r,"GET",function PN(n,t){return function e(i,r){const s=lD(n,r,t);return Wl(null!==s),function RN(n,t,e,i){const r=$b(t);if(null===r||!Ic(r.downloadTokens))return null;const s=r.downloadTokens;if(0===s.length)return null;const l=encodeURIComponent;return s.split(",").map(_=>{const D=n.fullPath;return Sr("/b/"+l(n.bucket)+"/o/"+l(D),e,i)+ah({alt:"media",token:_})})[0]}(s,r,n.host,n._protocol)}}(n,e),l);return d.errorHandler=Xa(t),d}(n.storage,n._location,xp());return n.storage.makeRequestWithTokens(t,fo).then(e=>{if(null===e)throw function QE(){return new Gi("no-download-url","The given file does not have any download URLs.")}();return e})}function m_(n,t){const e=function nA(n,t){const e=t.split("/").filter(i=>i.length>0).join("/");return 0===n.length?e:n+"/"+e}(n._location.path,t),i=new ns(n._location.bucket,e);return new _h(n.storage,i)}function t0(n,t){if(n instanceof g_){const e=n;if(null==e._bucket)throw function ZE(){return new Gi("no-default-bucket","No default bucket found. Did you set the '"+Vb+"' property when initializing the app?")}();const i=new _h(e,e._bucket);return null!=t?t0(i,t):i}return void 0!==t?m_(n,t):n}function MD(n,t){if(t&&function SD(n){return/^[A-Za-z]+:\/\//.test(n)}(t)){if(n instanceof g_)return function dA(n,t){return new _h(n,t)}(n,t);throw Tc("To use ref(service, url), the first argument must be a Storage instance.")}return t0(n,t)}function n0(n,t){const e=null==t?void 0:t[Vb];return null==e?null:ns.makeFromBucketSpec(e,n)}class g_{constructor(t,e,i,r,s){this.app=t,this._authProvider=e,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=WI,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?ns.makeFromBucketSpec(r,this._host):n0(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._bucket=null!=this._url?ns.makeFromBucketSpec(this._url,t):n0(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){Dp("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){Dp("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}_getAuthToken(){var t=this;return(0,xe.Z)(function*(){if(t._overrideAuthToken)return t._overrideAuthToken;const e=t._authProvider.getImmediate({optional:!0});if(e){const i=yield e.getToken();if(null!==i)return i.accessToken}return null})()}_getAppCheckToken(){var t=this;return(0,xe.Z)(function*(){const e=t._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new _h(this,t)}_makeRequest(t,e,i,r){if(this._deleted)return new XI(XE());{const s=function uh(n,t,e,i,r,s){const l=ah(n.urlParams),d=n.url+l,p=Object.assign({},n.headers);return function lh(n,t){t&&(n["X-Firebase-GMPID"]=t)}(p,t),function zo(n,t){null!==t&&t.length>0&&(n.Authorization="Firebase "+t)}(p,e),function Hb(n,t){n["X-Firebase-Storage-Version"]="webjs/"+(null!=t?t:"AppManager")}(p,s),function ch(n,t){null!==t&&(n["X-Firebase-AppCheck"]=t)}(p,i),new Ru(d,n.method,p,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,r)}(t,this._appId,i,r,e,this._firebaseVersion);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(t,e){var i=this;return(0,xe.Z)(function*(){const[r,s]=yield Promise.all([i._getAuthToken(),i._getAppCheckToken()]);return i._makeRequest(t,e,r,s).getPromise()})()}}const s0="@firebase/storage";function l0(n,t){return MD(n=(0,L.m9)(n),t)}function kD(n,{instanceIdentifier:t}){const e=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),r=n.getProvider("app-check-internal");return new g_(e,i,r,t,ki.SDK_VERSION)}!function vh(){(0,ki._registerComponent)(new co.wA("storage",kD,"PUBLIC").setMultipleInstances(!0)),(0,ki.registerVersion)(s0,"0.9.8",""),(0,ki.registerVersion)(s0,"0.9.8","esm2017")}();class __{constructor(t,e,i){this._delegate=t,this.task=e,this.ref=i}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class RD{constructor(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new __(this._delegate.snapshot,this,this._ref)}then(t,e){return this._delegate.then(i=>{if(t)return t(new __(i,this,this._ref))},e)}on(t,e,i,r){let s;return e&&(s="function"==typeof e?l=>e(new __(l,this,this._ref)):{next:e.next?l=>e.next(new __(l,this,this._ref)):void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,s,i||void 0,r||void 0)}}class c0{constructor(t,e){this._delegate=t,this._service=e}get prefixes(){return this._delegate.prefixes.map(t=>new Yl(t,this._service))}get items(){return this._delegate.items.map(t=>new Yl(t,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Yl{constructor(t,e){this._delegate=t,this.storage=e}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(t){const e=function vA(n,t){return m_(n,t)}(this._delegate,t);return new Yl(e,this.storage)}get root(){return new Yl(this._delegate.root,this.storage)}get parent(){const t=this._delegate.parent;return null==t?null:new Yl(t,this.storage)}put(t,e){return this._throwIfRoot("put"),new RD(function TD(n,t,e){return function Qb(n,t,e){return n._throwIfRoot("uploadBytesResumable"),new d_(n,new _a(t),e)}(n=(0,L.m9)(n),t,e)}(this._delegate,t,e),this)}putString(t,e=Mr.RAW,i){this._throwIfRoot("putString");const r=n_(e,t),s=Object.assign({},i);return null==s.contentType&&null!=r.contentType&&(s.contentType=r.contentType),new RD(new d_(this._delegate,new _a(r.data,!0),s),this)}listAll(){return function ID(n){return function Xb(n){const t={prefixes:[],items:[]};return Jb(n,t).then(()=>t)}(n=(0,L.m9)(n))}(this._delegate).then(t=>new c0(t,this.storage))}list(t){return function gA(n,t){return p_(n=(0,L.m9)(n),t)}(this._delegate,t||void 0).then(e=>new c0(e,this.storage))}getMetadata(){return function NN(n){return function e0(n){n._throwIfRoot("getMetadata");const t=uD(n.storage,n._location,xp());return n.storage.makeRequestWithTokens(t,fo)}(n=(0,L.m9)(n))}(this._delegate)}updateMetadata(t){return function mA(n,t){return function uA(n,t){n._throwIfRoot("updateMetadata");const e=function a_(n,t,e,i){const s=Sr(t.fullServerUrl(),n.host,n._protocol),d=Wb(e,i),_=n.maxOperationRetryTime,b=new ql(s,"PATCH",o_(n,i),_);return b.headers={"Content-Type":"application/json; charset=utf-8"},b.body=d,b.errorHandler=Xa(t),b}(n.storage,n._location,t,xp());return n.storage.makeRequestWithTokens(e,fo)}(n=(0,L.m9)(n),t)}(this._delegate,t)}getDownloadURL(){return function _A(n){return DD(n=(0,L.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function ur(n){return function xD(n){n._throwIfRoot("deleteObject");const t=function sA(n,t){const i=Sr(t.fullServerUrl(),n.host,n._protocol),d=new ql(i,"DELETE",function l(p,_){},n.maxOperationRetryTime);return d.successCodes=[200,204],d.errorHandler=Xa(t),d}(n.storage,n._location);return n.storage.makeRequestWithTokens(t,fo)}(n=(0,L.m9)(n))}(this._delegate)}_throwIfRoot(t){if(""===this._delegate._location.path)throw e_(t)}}class u0{constructor(t,e){this.app=t,this._delegate=e}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(t){if(bA(t))throw Tc("ref() expected a child path but got a URL, use refFromURL instead.");return new Yl(l0(this._delegate,t),this)}refFromURL(t){if(!bA(t))throw Tc("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ns.makeFromUrl(t,this._delegate.host)}catch(e){throw Tc("refFromUrl() expected a valid full URL but got an invalid one.")}return new Yl(l0(this._delegate,t),this)}setMaxUploadRetryTime(t){this._delegate.maxUploadRetryTime=t}setMaxOperationRetryTime(t){this._delegate.maxOperationRetryTime=t}useEmulator(t,e,i={}){!function AD(n,t,e,i={}){!function r0(n,t,e,i={}){n.host=`${t}:${e}`,n._protocol="http";const{mockUserToken:r}=i;r&&(n._overrideAuthToken="string"==typeof r?r:(0,L.Sg)(r,n.app.options.projectId))}(n,t,e,i)}(this._delegate,t,e,i)}}function bA(n){return/^[A-Za-z]+:\/\//.test(n)}function wA(n,{instanceIdentifier:t}){const e=n.getProvider("app-compat").getImmediate(),i=n.getProvider("storage").getImmediate({identifier:t});return new u0(e,i)}function $o(n){const t=function el(n){return new Ui.y(t=>{const e=l=>t.next(l);e(n.snapshot);const s=n.on("state_changed",e);return n.then(l=>{e(l),t.complete()},l=>{e(n.snapshot),(l=>{t.error(l)})(l)}),function(){s()}}).pipe(Bb(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>t,percentageChanges:()=>t.pipe((0,ct.U)(e=>e.bytesTransferred/e.totalBytes*100))}}function Fs(n){return{getDownloadURL:()=>at(void 0).pipe(kn.fc,Wn(()=>n.getDownloadURL()),kn.iC),getMetadata:()=>at(void 0).pipe(kn.fc,Wn(()=>n.getMetadata()),kn.iC),delete:()=>(0,rn.D)(n.delete()),child:t=>Fs(n.child(t)),updateMetadata:t=>(0,rn.D)(n.updateMetadata(t)),put:(t,e)=>$o(n.put(t,e)),putString:(t,e,i)=>$o(n.putString(t,e,i)),list:t=>(0,rn.D)(n.list(t)),listAll:()=>(0,rn.D)(n.listAll())}}!function CA(n){const t={TaskState:Ur,TaskEvent:bD,StringFormat:Mr,Storage:u0,Reference:Yl};n.INTERNAL.registerComponent(new co.wA("storage-compat",wA,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.16")}(Jg.Z);const OD=new c.OlP("angularfire2.storageBucket"),PD=new c.OlP("angularfire2.storage.maxUploadRetryTime"),EA=new c.OlP("angularfire2.storage.maxOperationRetryTime"),DA=new c.OlP("angularfire2.storage.use-emulator");let ND=(()=>{class n{constructor(e,i,r,s,l,d,p,_,b,D){const I=(0,Ai.on)(e,l,i);this.storage=(0,Ai.cc)(`${I.name}.storage.${r}`,"AngularFireStorage",I.name,()=>{const P=l.runOutsideAngular(()=>I.storage(r||void 0)),U=b;return U&&P.useEmulator(...U),p&&P.setMaxUploadRetryTime(p),_&&P.setMaxOperationRetryTime(_),P},[p,_])}ref(e){return Fs(this.storage.ref(e))}refFromURL(e){return Fs(this.storage.refFromURL(e))}upload(e,i,r){return Fs(this.storage.ref(e)).put(i,r)}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(Ai.Dh),c.LFG(Ai.xv,8),c.LFG(OD,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(kn.HU),c.LFG(PD,8),c.LFG(EA,8),c.LFG(DA,8),c.LFG(ku,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),f0=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})(),Tp=(()=>{class n{constructor(){Yg.Z.registerVersion("angularfire",kn.q4.full,"gcs-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[ND],imports:[f0]}),n})();function p0(){return(0,Qn.e)((n,t)=>{let e,i=!1;n.subscribe((0,Un.x)(t,r=>{const s=e;e=r,i&&t.next([s,r]),i=!0}))})}function v_(n,t=to.y){return n=null!=n?n:xA,(0,Qn.e)((e,i)=>{let r,s=!0;e.subscribe((0,Un.x)(i,l=>{const d=t(l);(s||!n(r,d))&&(s=!1,r=d,i.next(l))}))})}function xA(n,t){return n===t}F(5881);var mt,FD="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},qo={},y_=y_||{},Bt=FD||self;function yh(){}function bh(n){var t=typeof n;return"array"==(t="object"!=t?t:n?Array.isArray(n)?"array":t:"null")||"object"==t&&"number"==typeof n.length}function Pu(n){var t=typeof n;return"object"==t&&null!=n||"function"==t}var Ip="closure_uid_"+(1e9*Math.random()>>>0),BD=0;function VD(n,t,e){return n.call.apply(n.bind,arguments)}function UD(n,t,e){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),n.apply(t,r)}}return function(){return n.apply(t,arguments)}}function Tr(n,t,e){return(Tr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?VD:UD).apply(null,arguments)}function Ap(n,t){var e=Array.prototype.slice.call(arguments,1);return function(){var i=e.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function Hr(n,t){function e(){}e.prototype=t.prototype,n.Z=t.prototype,n.prototype=new e,n.prototype.constructor=n,n.Vb=function(i,r,s){for(var l=Array(arguments.length-2),d=2;d<arguments.length;d++)l[d-2]=arguments[d];return t.prototype[r].apply(i,l)}}function kc(){this.s=this.s,this.o=this.o}var TA={};kc.prototype.s=!1,kc.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function LD(n){return Object.prototype.hasOwnProperty.call(n,Ip)&&n[Ip]||(n[Ip]=++BD)}(this);delete TA[n]}},kc.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const HD=Array.prototype.indexOf?function(n,t){return Array.prototype.indexOf.call(n,t,void 0)}:function(n,t){if("string"==typeof n)return"string"!=typeof t||1!=t.length?-1:n.indexOf(t,0);for(let e=0;e<n.length;e++)if(e in n&&n[e]===t)return e;return-1},jD=Array.prototype.forEach?function(n,t,e){Array.prototype.forEach.call(n,t,e)}:function(n,t,e){const i=n.length,r="string"==typeof n?n.split(""):n;for(let s=0;s<i;s++)s in r&&t.call(e,r[s],s,n)};function GD(n){return Array.prototype.concat.apply([],arguments)}function m0(n){const t=n.length;if(0<t){const e=Array(t);for(let i=0;i<t;i++)e[i]=n[i];return e}return[]}function b_(n){return/^[\s\xa0]*$/.test(n)}var ws,zD=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function bs(n,t){return-1!=n.indexOf(t)}function g0(n,t){return n<t?-1:n>t?1:0}e:{var $D=Bt.navigator;if($D){var qD=$D.userAgent;if(qD){ws=qD;break e}}ws=""}function _0(n,t,e){for(const i in n)t.call(e,n[i],i,n)}function WD(n){const t={};for(const e in n)t[e]=n[e];return t}var v0="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function y0(n,t){let e,i;for(let r=1;r<arguments.length;r++){for(e in i=arguments[r],i)n[e]=i[e];for(let s=0;s<v0.length;s++)e=v0[s],Object.prototype.hasOwnProperty.call(i,e)&&(n[e]=i[e])}}function w_(n){return w_[" "](n),n}w_[" "]=yh;var tl,n,ZD=bs(ws,"Opera"),Nu=bs(ws,"Trident")||bs(ws,"MSIE"),b0=bs(ws,"Edge"),C_=b0||Nu,w0=bs(ws,"Gecko")&&!(bs(ws.toLowerCase(),"webkit")&&!bs(ws,"Edge"))&&!(bs(ws,"Trident")||bs(ws,"MSIE"))&&!bs(ws,"Edge"),C0=bs(ws.toLowerCase(),"webkit")&&!bs(ws,"Edge");function E_(){var n=Bt.document;return n?n.documentMode:void 0}e:{var E0="",D0=(n=ws,w0?/rv:([^\);]+)(\)|;)/.exec(n):b0?/Edge\/([\d\.]+)/.exec(n):Nu?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):C0?/WebKit\/(\S+)/.exec(n):ZD?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(D0&&(E0=D0?D0[1]:""),Nu){var Rc=E_();if(null!=Rc&&Rc>parseFloat(E0)){tl=String(Rc);break e}}tl=E0}var VN={};var QD=Bt.document&&Nu&&(E_()||parseInt(tl,10))||void 0,UN=function(){if(!Bt.addEventListener||!Object.defineProperty)return!1;var n=!1,t=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Bt.addEventListener("test",yh,t),Bt.removeEventListener("test",yh,t)}catch(e){}return n}();function ht(n,t){this.type=n,this.g=this.target=t,this.defaultPrevented=!1}function kp(n,t){if(ht.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var e=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=t,t=n.relatedTarget){if(w0){e:{try{w_(t.nodeName);var r=!0;break e}catch(s){}r=!1}r||(t=null)}}else"mouseover"==e?t=n.fromElement:"mouseout"==e&&(t=n.toElement);this.relatedTarget=t,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:AA[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&kp.Z.h.call(this)}}ht.prototype.h=function(){this.defaultPrevented=!0},Hr(kp,ht);var AA={2:"touch",3:"pen",4:"mouse"};kp.prototype.h=function(){kp.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Rp="closure_listenable_"+(1e6*Math.random()|0),D_=0;function kA(n,t,e,i,r){this.listener=n,this.proxy=null,this.src=t,this.type=e,this.capture=!!i,this.ia=r,this.key=++D_,this.ca=this.fa=!1}function Fu(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Lu(n){this.src=n,this.g={},this.h=0}function gi(n,t){var e=t.type;if(e in n.g){var s,i=n.g[e],r=HD(i,t);(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(Fu(t),0==n.g[e].length&&(delete n.g[e],n.h--))}}function XD(n,t,e,i){for(var r=0;r<n.length;++r){var s=n[r];if(!s.ca&&s.listener==t&&s.capture==!!e&&s.ia==i)return r}return-1}Lu.prototype.add=function(n,t,e,i,r){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var l=XD(n,t,i,r);return-1<l?(t=n[l],e||(t.fa=!1)):((t=new kA(t,this.src,s,!!i,r)).fa=e,n.push(t)),t};var x_="closure_lm_"+(1e6*Math.random()|0),M0={};function JD(n,t,e,i,r){if(i&&i.once)return I0(n,t,e,i,r);if(Array.isArray(t)){for(var s=0;s<t.length;s++)JD(n,t[s],e,i,r);return null}return e=O0(e),n&&n[Rp]?n.N(t,e,Pu(i)?!!i.capture:!!i,r):T0(n,t,e,!1,i,r)}function T0(n,t,e,i,r,s){if(!t)throw Error("Invalid event type");var l=Pu(r)?!!r.capture:!!r,d=Bu(n);if(d||(n[x_]=d=new Lu(n)),(e=d.add(t,e,i,l,s)).proxy)return e;if(i=function ex(){var t=RA;return function n(e){return t.call(n.src,n.listener,e)}}(),e.proxy=i,i.src=n,i.listener=e,n.addEventListener)UN||(r=l),void 0===r&&(r=!1),n.addEventListener(t.toString(),i,r);else if(n.attachEvent)n.attachEvent(tx(t.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return e}function I0(n,t,e,i,r){if(Array.isArray(t)){for(var s=0;s<t.length;s++)I0(n,t[s],e,i,r);return null}return e=O0(e),n&&n[Rp]?n.O(t,e,Pu(i)?!!i.capture:!!i,r):T0(n,t,e,!0,i,r)}function A0(n,t,e,i,r){if(Array.isArray(t))for(var s=0;s<t.length;s++)A0(n,t[s],e,i,r);else i=Pu(i)?!!i.capture:!!i,e=O0(e),n&&n[Rp]?(n=n.i,(t=String(t).toString())in n.g&&-1<(e=XD(s=n.g[t],e,i,r))&&(Fu(s[e]),Array.prototype.splice.call(s,e,1),0==s.length&&(delete n.g[t],n.h--))):n&&(n=Bu(n))&&(t=n.g[t.toString()],n=-1,t&&(n=XD(t,e,i,r)),(e=-1<n?t[n]:null)&&k0(e))}function k0(n){if("number"!=typeof n&&n&&!n.ca){var t=n.src;if(t&&t[Rp])gi(t.i,n);else{var e=n.type,i=n.proxy;t.removeEventListener?t.removeEventListener(e,i,n.capture):t.detachEvent?t.detachEvent(tx(e),i):t.addListener&&t.removeListener&&t.removeListener(i),(e=Bu(t))?(gi(e,n),0==e.h&&(e.src=null,t[x_]=null)):Fu(n)}}}function tx(n){return n in M0?M0[n]:M0[n]="on"+n}function RA(n,t){if(n.ca)n=!0;else{t=new kp(t,this);var e=n.listener,i=n.ia||n.src;n.fa&&k0(n),n=e.call(i,t)}return n}function Bu(n){return(n=n[x_])instanceof Lu?n:null}var R0="__closure_events_fn_"+(1e9*Math.random()>>>0);function O0(n){return"function"==typeof n?n:(n[R0]||(n[R0]=function(t){return n.handleEvent(t)}),n[R0])}function Ir(){kc.call(this),this.i=new Lu(this),this.P=this,this.I=null}function Ji(n,t){var e,i=n.I;if(i)for(e=[];i;i=i.I)e.push(i);if(n=n.P,i=t.type||t,"string"==typeof t)t=new ht(t,n);else if(t instanceof ht)t.target=t.target||n;else{var r=t;y0(t=new ht(i,n),r)}if(r=!0,e)for(var s=e.length-1;0<=s;s--){var l=t.g=e[s];r=Op(l,i,!0,t)&&r}if(r=Op(l=t.g=n,i,!0,t)&&r,r=Op(l,i,!1,t)&&r,e)for(s=0;s<e.length;s++)r=Op(l=t.g=e[s],i,!1,t)&&r}function Op(n,t,e,i){if(!(t=n.i.g[String(t)]))return!0;t=t.concat();for(var r=!0,s=0;s<t.length;++s){var l=t[s];if(l&&!l.ca&&l.capture==e){var d=l.listener,p=l.ia||l.src;l.fa&&gi(n.i,l),r=!1!==d.call(p,i)&&r}}return r&&!i.defaultPrevented}Hr(Ir,kc),Ir.prototype[Rp]=!0,Ir.prototype.removeEventListener=function(n,t,e,i){A0(this,n,t,e,i)},Ir.prototype.M=function(){if(Ir.Z.M.call(this),this.i){var t,n=this.i;for(t in n.g){for(var e=n.g[t],i=0;i<e.length;i++)Fu(e[i]);delete n.g[t],n.h--}}this.I=null},Ir.prototype.N=function(n,t,e,i){return this.i.add(String(n),t,!1,e,i)},Ir.prototype.O=function(n,t,e,i){return this.i.add(String(n),t,!0,e,i)};var S_=Bt.JSON.stringify;function nx(){var n=F0;let t=null;return n.g&&(t=n.g,n.g=n.g.next,n.g||(n.h=null),t.next=null),t}var N0,wh=new class{constructor(n,t){this.i=n,this.j=t,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Pp,n=>n.reset());class Pp{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function PA(n){Bt.setTimeout(()=>{throw n},0)}function P0(n,t){N0||function ix(){var n=Bt.Promise.resolve(void 0);N0=function(){n.then(NA)}}(),M_||(N0(),M_=!0),F0.add(n,t)}var M_=!1,F0=new class OA{constructor(){this.h=this.g=null}add(t,e){const i=wh.get();i.set(t,e),this.h?this.h.next=i:this.g=i,this.h=i}};function NA(){for(var n;n=nx();){try{n.h.call(n.g)}catch(e){PA(e)}var t=wh;t.j(n),100>t.h&&(t.h++,n.next=t.g,t.g=n)}M_=!1}function Np(n,t){Ir.call(this),this.h=n||1,this.g=t||Bt,this.j=Tr(this.kb,this),this.l=Date.now()}function L0(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function B0(n,t,e){if("function"==typeof n)e&&(n=Tr(n,e));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Tr(n.handleEvent,n)}return 2147483647<Number(t)?-1:Bt.setTimeout(n,t||0)}function FA(n){n.g=B0(()=>{n.g=null,n.i&&(n.i=!1,FA(n))},n.j);const t=n.h;n.h=null,n.m.apply(null,t)}Hr(Np,Ir),(mt=Np.prototype).da=!1,mt.S=null,mt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Ji(this,"tick"),this.da&&(L0(this),this.start()))}},mt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},mt.M=function(){Np.Z.M.call(this),L0(this),delete this.g};class HN extends kc{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:FA(this)}M(){super.M(),this.g&&(Bt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function T_(n){kc.call(this),this.h=n,this.g={}}Hr(T_,kc);var LA=[];function V0(n,t,e,i){Array.isArray(e)||(e&&(LA[0]=e.toString()),e=LA);for(var r=0;r<e.length;r++){var s=JD(t,e[r],i||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function Fp(n){_0(n.g,function(t,e){this.g.hasOwnProperty(e)&&k0(t)},n),n.g={}}function I_(){this.g=!0}function nl(n,t,e,i){n.info(function(){return"XMLHTTP TEXT ("+t+"): "+function UA(n,t){if(!n.g)return t;if(!t)return null;try{var e=JSON.parse(t);if(e)for(n=0;n<e.length;n++)if(Array.isArray(e[n])){var i=e[n];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var l=1;l<r.length;l++)r[l]=""}}}return S_(e)}catch(d){return t}}(n,e)+(i?" "+i:"")})}T_.prototype.M=function(){T_.Z.M.call(this),Fp(this)},T_.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},I_.prototype.Aa=function(){this.g=!1},I_.prototype.info=function(){};var Vu={},sx=null;function A_(){return sx=sx||new Ir}function U0(n){ht.call(this,Vu.Ma,n)}function Lp(n){const t=A_();Ji(t,new U0(t,n))}function ox(n,t){ht.call(this,Vu.STAT_EVENT,n),this.stat=t}function er(n){const t=A_();Ji(t,new ox(t,n))}function ax(n,t){ht.call(this,Vu.Na,n),this.size=t}function Ch(n,t){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Bt.setTimeout(function(){n()},t)}Vu.Ma="serverreachability",Hr(U0,ht),Vu.STAT_EVENT="statevent",Hr(ox,ht),Vu.Na="timingevent",Hr(ax,ht);var k_={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},H0={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function j0(){}function lx(){}j0.prototype.h=null;var O_,Uu={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function z0(){ht.call(this,"d")}function R_(){ht.call(this,"c")}function P_(){}function Bp(n,t,e,i){this.l=n,this.j=t,this.m=e,this.X=i||1,this.V=new T_(this),this.P=$0,this.W=new Np(n=C_?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new cx}function cx(){this.i=null,this.g="",this.h=!1}Hr(z0,ht),Hr(R_,ht),Hr(P_,j0),P_.prototype.g=function(){return new XMLHttpRequest},P_.prototype.i=function(){return{}},O_=new P_;var $0=45e3,q0={},Vp={};function W0(n,t,e){n.K=1,n.v=U_(va(t)),n.s=e,n.U=!0,ux(n,null)}function ux(n,t){n.F=Date.now(),Up(n),n.A=va(n.v);var e=n.A,i=n.X;Array.isArray(i)||(i=[String(i)]),vx(e.h,"t",i),n.C=0,e=n.l.H,n.h=new cx,n.g=Lx(n.l,e?t:null,!n.s),0<n.O&&(n.L=new HN(Tr(n.Ia,n,n.g),n.O)),V0(n.V,n.g,"readystatechange",n.gb),t=n.H?WD(n.H):{},n.s?(n.u||(n.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,t)):(n.u="GET",n.g.ea(n.A,n.u,null,t)),Lp(1),function BA(n,t,e,i,r,s){n.info(function(){if(n.g)if(s)for(var l="",d=s.split("&"),p=0;p<d.length;p++){var _=d[p].split("=");if(1<_.length){var b=_[0];_=_[1];var D=b.split("_");l=2<=D.length&&"type"==D[1]?l+(b+"=")+_+"&":l+(b+"=redacted&")}}else l=null;else l=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+t+"\n"+e+"\n"+l})}(n.j,n.u,n.A,n.m,n.X,n.s)}function dx(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function hx(n,t,e){let r,i=!0;for(;!n.I&&n.C<e.length;){if(r=HA(n,e),r==Vp){4==t&&(n.o=4,er(14),i=!1),nl(n.j,n.m,null,"[Incomplete Response]");break}if(r==q0){n.o=4,er(15),nl(n.j,n.m,e,"[Invalid Chunk]"),i=!1;break}nl(n.j,n.m,r,null),Y0(n,r)}dx(n)&&r!=Vp&&r!=q0&&(n.h.g="",n.C=0),4!=t||0!=e.length||n.h.h||(n.o=1,er(16),i=!1),n.i=n.i&&i,i?0<e.length&&!n.aa&&(n.aa=!0,(t=n.l).g==n&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+e.length),tw(t),t.L=!0,er(11))):(nl(n.j,n.m,e,"[Invalid Chunked Response]"),Oc(n),Eh(n))}function HA(n,t){var e=n.C,i=t.indexOf("\n",e);return-1==i?Vp:(e=Number(t.substring(e,i)),isNaN(e)?q0:(i+=1)+e>t.length?Vp:(t=t.substr(i,e),n.C=i+e,t))}function Up(n){n.Y=Date.now()+n.P,fx(n,n.P)}function fx(n,t){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Ch(Tr(n.eb,n),t)}function N_(n){n.B&&(Bt.clearTimeout(n.B),n.B=null)}function Eh(n){0==n.l.G||n.I||Px(n.l,n)}function Oc(n){N_(n);var t=n.L;t&&"function"==typeof t.na&&t.na(),n.L=null,L0(n.W),Fp(n.V),n.g&&(t=n.g,n.g=null,t.abort(),t.na())}function Y0(n,t){try{var e=n.l;if(0!=e.G&&(e.g==n||$_(e.i,n)))if(e.I=n.N,!n.J&&$_(e.i,n)&&3==e.G){try{var i=e.Ca.g.parse(t)}catch(_){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0])e:if(e.u)e.ta=r[1],0<e.ta-e.U&&37500>r[2]&&e.N&&0==e.A&&!e.v&&(e.v=Ch(Tr(e.ab,e),6e3));else{if(e.g){if(!(e.g.F+3e3<n.F))break e;po(e),qp(e)}Gu(e),er(18)}if(1>=wx(e.i)&&e.ka){try{e.ka()}catch(_){}e.ka=void 0}}else ya(e,11)}else if((n.J||e.g==n)&&po(e),!b_(t))for(r=e.Ca.g.parse(t),t=0;t<r.length;t++){let _=r[t];if(e.U=_[0],_=_[1],2==e.G)if("c"==_[0]){e.J=_[1],e.la=_[2];const b=_[3];null!=b&&(e.ma=b,e.h.info("VER="+e.ma));const D=_[4];null!=D&&(e.za=D,e.h.info("SVER="+e.za));const I=_[5];null!=I&&"number"==typeof I&&0<I&&(e.K=i=1.5*I,e.h.info("backChannelRequestTimeoutMs_="+i)),i=e;const P=n.g;if(P){const U=P.g?P.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(U){var s=i.i;!s.g&&(bs(U,"spdy")||bs(U,"quic")||bs(U,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(q_(s,s.h),s.h=null))}if(i.D){const Q=P.g?P.g.getResponseHeader("X-HTTP-Session-Id"):null;Q&&(i.sa=Q,ui(i.F,i.D,Q))}}e.G=3,e.j&&e.j.xa(),e.$&&(e.O=Date.now()-n.F,e.h.info("Handshake RTT: "+e.O+"ms"));var l=n;if((i=e).oa=Fx(i,i.H?i.la:null,i.W),l.J){Cx(i.i,l);var d=l,p=i.K;p&&d.setTimeout(p),d.B&&(N_(d),Up(d)),i.g=l}else Ox(i);0<e.l.length&&K_(e)}else"stop"!=_[0]&&"close"!=_[0]||ya(e,7);else 3==e.G&&("stop"==_[0]||"close"==_[0]?"stop"==_[0]?ya(e,7):Z_(e):"noop"!=_[0]&&e.j&&e.j.wa(_),e.A=0)}Lp(4)}catch(_){}}function F_(n,t){if(n.forEach&&"function"==typeof n.forEach)n.forEach(t,void 0);else if(bh(n)||"string"==typeof n)jD(n,t,void 0);else{if(n.T&&"function"==typeof n.T)var e=n.T();else if(n.R&&"function"==typeof n.R)e=void 0;else if(bh(n)||"string"==typeof n){e=[];for(var i=n.length,r=0;r<i;r++)e.push(r)}else for(r in e=[],i=0,n)e[i++]=r;i=function jA(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(bh(n)){for(var t=[],e=n.length,i=0;i<e;i++)t.push(n[i]);return t}for(i in t=[],e=0,n)t[e++]=n[i];return t}(n),r=i.length;for(var s=0;s<r;s++)t.call(void 0,i[s],e&&e[s],n)}}function Dh(n,t){this.h={},this.g=[],this.i=0;var e=arguments.length;if(1<e){if(e%2)throw Error("Uneven number of arguments");for(var i=0;i<e;i+=2)this.set(arguments[i],arguments[i+1])}else if(n)if(n instanceof Dh)for(e=n.T(),i=0;i<e.length;i++)this.set(e[i],n.get(e[i]));else for(i in n)this.set(i,n[i])}function Z0(n){if(n.i!=n.g.length){for(var t=0,e=0;t<n.g.length;){var i=n.g[t];Hu(n.h,i)&&(n.g[e++]=i),t++}n.g.length=e}if(n.i!=n.g.length){var r={};for(e=t=0;t<n.g.length;)Hu(r,i=n.g[t])||(n.g[e++]=i,r[i]=1),t++;n.g.length=e}}function Hu(n,t){return Object.prototype.hasOwnProperty.call(n,t)}(mt=Bp.prototype).setTimeout=function(n){this.P=n},mt.gb=function(n){n=n.target;const t=this.L;t&&3==Kl(n)?t.l():this.Ia(n)},mt.Ia=function(n){try{if(n==this.g)e:{const b=Kl(this.g);var t=this.g.Da();const D=this.g.ba();if(!(3>b)&&(3!=b||C_||this.g&&(this.h.h||this.g.ga()||Ax(this.g)))){this.I||4!=b||7==t||Lp(8==t||0>=D?3:2),N_(this);var e=this.g.ba();this.N=e;t:if(dx(this)){var i=Ax(this.g);n="";var r=i.length,s=4==Kl(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Oc(this),Eh(this);var l="";break t}this.h.i=new Bt.TextDecoder}for(t=0;t<r;t++)this.h.h=!0,n+=this.h.i.decode(i[t],{stream:s&&t==r-1});i.splice(0,r),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ga();if(this.i=200==e,function rx(n,t,e,i,r,s,l){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+t+"\n"+e+"\n"+s+" "+l})}(this.j,this.u,this.A,this.m,this.X,b,e),this.i){if(this.$&&!this.J){t:{if(this.g){var d,p=this.g;if((d=p.g?p.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b_(d)){var _=d;break t}}_=null}if(!(e=_)){this.i=!1,this.o=3,er(12),Oc(this),Eh(this);break e}nl(this.j,this.m,e,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Y0(this,e)}this.U?(hx(this,b,l),C_&&this.i&&3==b&&(V0(this.V,this.W,"tick",this.fb),this.W.start())):(nl(this.j,this.m,l,null),Y0(this,l)),4==b&&Oc(this),this.i&&!this.I&&(4==b?Px(this.l,this):(this.i=!1,Up(this)))}else 400==e&&0<l.indexOf("Unknown SID")?(this.o=3,er(12)):(this.o=0,er(13)),Oc(this),Eh(this)}}}catch(b){}},mt.fb=function(){if(this.g){var n=Kl(this.g),t=this.g.ga();this.C<t.length&&(N_(this),hx(this,n,t),this.i&&4!=n&&Up(this))}},mt.cancel=function(){this.I=!0,Oc(this)},mt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function VA(n,t){n.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(Lp(3),er(17)),Oc(this),this.o=2,Eh(this)):fx(this,this.Y-n)},(mt=Dh.prototype).R=function(){Z0(this);for(var n=[],t=0;t<this.g.length;t++)n.push(this.h[this.g[t]]);return n},mt.T=function(){return Z0(this),this.g.concat()},mt.get=function(n,t){return Hu(this.h,n)?this.h[n]:t},mt.set=function(n,t){Hu(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=t},mt.forEach=function(n,t){for(var e=this.T(),i=0;i<e.length;i++){var r=e[i],s=this.get(r);n.call(t,s,r,this)}};var L_=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Pc(n,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Pc){this.g=void 0!==t?t:n.g,B_(this,n.j),this.s=n.s,V_(this,n.i),xh(this,n.m),this.l=n.l,t=n.h;var e=new j_;e.i=t.i,t.g&&(e.g=new Dh(t.g),e.h=t.h),px(this,e),this.o=n.o}else n&&(e=String(n).match(L_))?(this.g=!!t,B_(this,e[1]||"",!0),this.s=Sh(e[2]||""),V_(this,e[3]||"",!0),xh(this,e[4]),this.l=Sh(e[5]||"",!0),px(this,e[6]||"",!0),this.o=Sh(e[7]||"")):(this.g=!!t,this.h=new j_(null,this.g))}function va(n){return new Pc(n)}function B_(n,t,e){n.j=e?Sh(t,!0):t,n.j&&(n.j=n.j.replace(/:$/,""))}function V_(n,t,e){n.i=e?Sh(t,!0):t}function xh(n,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);n.m=t}else n.m=null}function px(n,t,e){t instanceof j_?(n.h=t,function yx(n,t){t&&!n.j&&(Zl(n),n.i=null,n.g.forEach(function(e,i){var r=i.toLowerCase();i!=r&&(gx(this,i),vx(this,r,e))},n)),n.j=t}(n.h,n.g)):(e||(t=H_(t,jp)),n.h=new j_(t,n.g))}function ui(n,t,e){n.h.set(t,e)}function U_(n){return ui(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Sh(n,t){return n?t?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function H_(n,t,e){return"string"==typeof n?(n=encodeURI(n).replace(t,zA),e&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function zA(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Pc.prototype.toString=function(){var n=[],t=this.j;t&&n.push(H_(t,Hp,!0),":");var e=this.i;return(e||"file"==t)&&(n.push("//"),(t=this.s)&&n.push(H_(t,Hp,!0),"@"),n.push(encodeURIComponent(String(e)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(e=this.m)&&n.push(":",String(e))),(e=this.l)&&(this.i&&"/"!=e.charAt(0)&&n.push("/"),n.push(H_(e,"/"==e.charAt(0)?Mh:$A,!0))),(e=this.h.toString())&&n.push("?",e),(e=this.o)&&n.push("#",H_(e,qA)),n.join("")};var Hp=/[#\/\?@]/g,$A=/[#\?:]/g,Mh=/[#\?]/g,jp=/[#\?@]/g,qA=/#/g;function j_(n,t){this.h=this.g=null,this.i=n||null,this.j=!!t}function Zl(n){n.g||(n.g=new Dh,n.h=0,n.i&&function K0(n,t){if(n){n=n.split("&");for(var e=0;e<n.length;e++){var i=n[e].indexOf("="),r=null;if(0<=i){var s=n[e].substring(0,i);r=n[e].substring(i+1)}else s=n[e];t(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(n.i,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function gx(n,t){Zl(n),t=Th(n,t),Hu(n.g.h,t)&&(n.i=null,n.h-=n.g.get(t).length,Hu((n=n.g).h,t)&&(delete n.h[t],n.i--,n.g.length>2*n.i&&Z0(n)))}function _x(n,t){return Zl(n),t=Th(n,t),Hu(n.g.h,t)}function vx(n,t,e){gx(n,t),0<e.length&&(n.i=null,n.g.set(Th(n,t),m0(e)),n.h+=e.length)}function Th(n,t){return t=String(t),n.j&&(t=t.toLowerCase()),t}function G_(n){this.l=n||z_,n=Bt.PerformanceNavigationTiming?0<(n=Bt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Bt.g&&Bt.g.Ea&&Bt.g.Ea()&&Bt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(mt=j_.prototype).add=function(n,t){Zl(this),this.i=null,n=Th(this,n);var e=this.g.get(n);return e||this.g.set(n,e=[]),e.push(t),this.h+=1,this},mt.forEach=function(n,t){Zl(this),this.g.forEach(function(e,i){jD(e,function(r){n.call(t,r,i,this)},this)},this)},mt.T=function(){Zl(this);for(var n=this.g.R(),t=this.g.T(),e=[],i=0;i<t.length;i++)for(var r=n[i],s=0;s<r.length;s++)e.push(t[i]);return e},mt.R=function(n){Zl(this);var t=[];if("string"==typeof n)_x(this,n)&&(t=GD(t,this.g.get(Th(this,n))));else{n=this.g.R();for(var e=0;e<n.length;e++)t=GD(t,n[e])}return t},mt.set=function(n,t){return Zl(this),this.i=null,_x(this,n=Th(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[t]),this.h+=1,this},mt.get=function(n,t){return n&&0<(n=this.R(n)).length?String(n[0]):t},mt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],t=this.g.T(),e=0;e<t.length;e++){var i=t[e],r=encodeURIComponent(String(i));i=this.R(i);for(var s=0;s<i.length;s++){var l=r;""!==i[s]&&(l+="="+encodeURIComponent(String(i[s]))),n.push(l)}}return this.i=n.join("&")};var z_=10;function Ih(n){return!!n.h||!!n.g&&n.g.size>=n.j}function wx(n){return n.h?1:n.g?n.g.size:0}function $_(n,t){return n.h?n.h==t:!!n.g&&n.g.has(t)}function q_(n,t){n.g?n.g.add(t):n.h=t}function Cx(n,t){n.h&&n.h==t?n.h=null:n.g&&n.g.has(t)&&n.g.delete(t)}function Ex(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let t=n.i;for(const e of n.g.values())t=t.concat(e.D);return t}return m0(n.i)}function Gp(){}function WA(){this.g=new Gp}function jN(n,t,e){const i=e||"";try{F_(n,function(r,s){let l=r;Pu(r)&&(l=S_(r)),t.push(i+s+"="+encodeURIComponent(l))})}catch(r){throw t.push(i+"type="+encodeURIComponent("_badmap")),r}}function W_(n,t,e,i,r){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,r(i)}catch(s){}}function il(n){this.l=n.$b||null,this.j=n.ib||!1}function zp(n,t){Ir.call(this),this.D=n,this.u=t,this.m=void 0,this.readyState=Nc,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}G_.prototype.cancel=function(){if(this.i=Ex(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Gp.prototype.stringify=function(n){return Bt.JSON.stringify(n,void 0)},Gp.prototype.parse=function(n){return Bt.JSON.parse(n,void 0)},Hr(il,j0),il.prototype.g=function(){return new zp(this.l,this.j)},il.prototype.i=function(n){return function(){return n}}({}),Hr(zp,Ir);var Nc=0;function ZA(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Ah(n){n.readyState=4,n.l=null,n.j=null,n.A=null,$p(n)}function $p(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(mt=zp.prototype).open=function(n,t){if(this.readyState!=Nc)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=t,this.readyState=1,$p(this)},mt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(t.body=n),(this.D||Bt).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},mt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ah(this)),this.readyState=Nc},mt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,$p(this)),this.g&&(this.readyState=3,$p(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Bt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ZA(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},mt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var t=n.value?n.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!n.done}))&&(this.response=this.responseText+=t)}n.done?Ah(this):$p(this),3==this.readyState&&ZA(this)}},mt.Ua=function(n){this.g&&(this.response=this.responseText=n,Ah(this))},mt.Ta=function(n){this.g&&(this.response=n,Ah(this))},mt.ha=function(){this.g&&Ah(this)},mt.setRequestHeader=function(n,t){this.v.append(n,t)},mt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},mt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],t=this.h.entries();for(var e=t.next();!e.done;)n.push((e=e.value)[0]+": "+e[1]),e=t.next();return n.join("\r\n")},Object.defineProperty(zp.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var GN=Bt.JSON.parse;function zi(n){Ir.call(this),this.headers=new Dh,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=KA,this.K=this.L=!1}Hr(zi,Ir);var KA="",Dx=/^https?$/i,Q0=["POST","PUT"];function xx(n){return"content-type"==n.toLowerCase()}function Sx(n,t){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=t,n.m=5,Mx(n),Y_(n)}function Mx(n){n.D||(n.D=!0,Ji(n,"complete"),Ji(n,"error"))}function Tx(n){if(n.h&&void 0!==y_&&(!n.C[1]||4!=Kl(n)||2!=n.ba()))if(n.v&&4==Kl(n))B0(n.Fa,0,n);else if(Ji(n,"readystatechange"),4==Kl(n)){n.h=!1;try{const d=n.ba();e:switch(d){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var e;if(!(e=t)){var i;if(i=0===d){var r=String(n.H).match(L_)[1]||null;if(!r&&Bt.self&&Bt.self.location){var s=Bt.self.location.protocol;r=s.substr(0,s.length-1)}i=!Dx.test(r?r.toLowerCase():"")}e=i}if(e)Ji(n,"complete"),Ji(n,"success");else{n.m=6;try{var l=2<Kl(n)?n.g.statusText:""}catch(p){l=""}n.j=l+" ["+n.ba()+"]",Mx(n)}}finally{Y_(n)}}}function Y_(n,t){if(n.g){Ix(n);const e=n.g,i=n.C[0]?yh:null;n.g=null,n.C=null,t||Ji(n,"ready");try{e.onreadystatechange=i}catch(r){}}}function Ix(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Bt.clearTimeout(n.A),n.A=null)}function Kl(n){return n.g?n.g.readyState:0}function Ax(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case KA:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(t){return null}}function ju(n,t,e){e:{for(i in e){var i=!1;break e}i=!0}i||(e=function XA(n){let t="";return _0(n,function(e,i){t+=i,t+=":",t+=e,t+="\r\n"}),t}(e),"string"==typeof n?null!=e&&encodeURIComponent(String(e)):ui(n,t,e))}function kh(n,t,e){return e&&e.internalChannelParams&&e.internalChannelParams[n]||t}function X0(n){this.za=0,this.l=[],this.h=new I_,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=kh("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=kh("baseRetryDelayMs",5e3,n),this.$a=kh("retryDelaySeedMs",1e4,n),this.Ya=kh("forwardChannelMaxRetries",2,n),this.ra=kh("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new G_(n&&n.concurrentRequestLimit),this.Ca=new WA,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Z_(n){if(J0(n),3==n.G){var t=n.V++,e=va(n.F);ui(e,"SID",n.J),ui(e,"RID",t),ui(e,"TYPE","terminate"),Wp(n,e),(t=new Bp(n,n.h,t,void 0)).K=2,t.v=U_(va(e)),e=!1,Bt.navigator&&Bt.navigator.sendBeacon&&(e=Bt.navigator.sendBeacon(t.v.toString(),"")),!e&&Bt.Image&&((new Image).src=t.v,e=!0),e||(t.g=Lx(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Up(t)}Nx(n)}function qp(n){n.g&&(tw(n),n.g.cancel(),n.g=null)}function J0(n){qp(n),n.u&&(Bt.clearTimeout(n.u),n.u=null),po(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Bt.clearTimeout(n.m),n.m=null)}function ew(n,t){n.l.push(new class{constructor(n,t){this.h=n,this.g=t}}(n.Za++,t)),3==n.G&&K_(n)}function K_(n){Ih(n.i)||n.m||(n.m=!0,P0(n.Ha,n),n.C=0)}function kx(n,t){var e;e=t?t.m:n.V++;const i=va(n.F);ui(i,"SID",n.J),ui(i,"RID",e),ui(i,"AID",n.U),Wp(n,i),n.o&&n.s&&ju(i,n.o,n.s),e=new Bp(n,n.h,e,n.C+1),null===n.o&&(e.H=n.s),t&&(n.l=t.D.concat(n.l)),t=Rx(n,e,1e3),e.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),q_(n.i,e),W0(e,i,t)}function Wp(n,t){n.j&&F_({},function(e,i){ui(t,i,e)})}function Rx(n,t,e){e=Math.min(n.l.length,e);var i=n.j?Tr(n.j.Oa,n.j,n):null;e:{var r=n.l;let s=-1;for(;;){const l=["count="+e];-1==s?0<e?(s=r[0].h,l.push("ofs="+s)):s=0:l.push("ofs="+s);let d=!0;for(let p=0;p<e;p++){let _=r[p].h;const b=r[p].g;if(_-=s,0>_)s=Math.max(0,r[p].h-100),d=!1;else try{jN(b,l,"req"+_+"_")}catch(D){i&&i(b)}}if(d){i=l.join("&");break e}}}return n=n.l.splice(0,e),t.D=n,i}function Ox(n){n.g||n.u||(n.Y=1,P0(n.Ga,n),n.A=0)}function Gu(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Ch(Tr(n.Ga,n),Yp(n,n.A)),n.A++,0))}function tw(n){null!=n.B&&(Bt.clearTimeout(n.B),n.B=null)}function Q_(n){n.g=new Bp(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var t=va(n.oa);ui(t,"RID","rpc"),ui(t,"SID",n.J),ui(t,"CI",n.N?"0":"1"),ui(t,"AID",n.U),Wp(n,t),ui(t,"TYPE","xmlhttp"),n.o&&n.s&&ju(t,n.o,n.s),n.K&&n.g.setTimeout(n.K);var e=n.g;n=n.la,e.K=1,e.v=U_(va(t)),e.s=null,e.U=!0,ux(e,n)}function po(n){null!=n.v&&(Bt.clearTimeout(n.v),n.v=null)}function Px(n,t){var e=null;if(n.g==t){po(n),tw(n),n.g=null;var i=2}else{if(!$_(n.i,t))return;e=t.D,Cx(n.i,t),i=1}if(n.I=t.N,0!=n.G)if(t.i)if(1==i){e=t.s?t.s.length:0,t=Date.now()-t.F;var r=n.C;Ji(i=A_(),new ax(i,e,t,r)),K_(n)}else Ox(n);else if(3==(r=t.o)||0==r&&0<n.I||!(1==i&&function JA(n,t){return!(wx(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=t.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Ch(Tr(n.Ha,n,t),Yp(n,n.C)),n.C++,0)))}(n,t)||2==i&&Gu(n)))switch(e&&0<e.length&&(t=n.i,t.i=t.i.concat(e)),r){case 1:ya(n,5);break;case 4:ya(n,10);break;case 3:ya(n,6);break;default:ya(n,2)}}function Yp(n,t){let e=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(e*=2),e*t}function ya(n,t){if(n.h.info("Error code "+t),2==t){var e=null;n.j&&(e=null);var i=Tr(n.jb,n);e||(e=new Pc("//www.google.com/images/cleardot.gif"),Bt.location&&"http"==Bt.location.protocol||B_(e,"https"),U_(e)),function YA(n,t){const e=new I_;if(Bt.Image){const i=new Image;i.onload=Ap(W_,e,i,"TestLoadImage: loaded",!0,t),i.onerror=Ap(W_,e,i,"TestLoadImage: error",!1,t),i.onabort=Ap(W_,e,i,"TestLoadImage: abort",!1,t),i.ontimeout=Ap(W_,e,i,"TestLoadImage: timeout",!1,t),Bt.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else t(!1)}(e.toString(),i)}else er(2);n.G=0,n.j&&n.j.va(t),Nx(n),J0(n)}function Nx(n){n.G=0,n.I=-1,n.j&&((0!=Ex(n.i).length||0!=n.l.length)&&(n.i.i.length=0,m0(n.l),n.l.length=0),n.j.ua())}function Fx(n,t,e){let i=function mx(n){return n instanceof Pc?va(n):new Pc(n,void 0)}(e);if(""!=i.i)t&&V_(i,t+"."+i.i),xh(i,i.m);else{const r=Bt.location;i=function GA(n,t,e,i){var r=new Pc(null,void 0);return n&&B_(r,n),t&&V_(r,t),e&&xh(r,e),i&&(r.l=i),r}(r.protocol,t?t+"."+r.hostname:r.hostname,+r.port,e)}return n.aa&&_0(n.aa,function(r,s){ui(i,s,r)}),e=n.sa,(t=n.D)&&e&&ui(i,t,e),ui(i,"VER",n.ma),Wp(n,i),i}function Lx(n,t,e){if(t&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new zi(e&&n.Ba&&!n.qa?new il({ib:!0}):n.qa)).L=n.H,t}function Zp(){}function zu(){if(Nu&&!(10<=Number(QD)))throw Error("Environmental error: no available transport.")}function mo(n,t){Ir.call(this),this.g=new X0(t),this.l=n,this.h=t&&t.messageUrlParams||null,n=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(n?n["X-WebChannel-Content-Type"]=t.messageContentType:n={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(n?n["X-WebChannel-Client-Profile"]=t.ya:n={"X-WebChannel-Client-Profile":t.ya}),this.g.P=n,(n=t&&t.httpHeadersOverwriteParam)&&!b_(n)&&(this.g.o=n),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!b_(t)&&(this.g.D=t,null!==(n=this.h)&&t in n&&t in(n=this.h)&&delete n[t]),this.j=new $u(this)}function Bx(n){z0.call(this);var t=n.__sm__;if(t){e:{for(const e in t){n=e;break e}n=void 0}(this.i=n)&&(n=this.i,t=null!==t&&n in t?t[n]:void 0),this.data=t}else this.data=n}function nw(){R_.call(this),this.status=1}function $u(n){this.g=n}(mt=zi.prototype).ea=function(n,t,e,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);t=t?t.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():O_.g(),this.C=function G0(n){return n.h||(n.h=n.i())}(this.u?this.u:O_),this.g.onreadystatechange=Tr(this.Fa,this);try{this.F=!0,this.g.open(t,String(n),!0),this.F=!1}catch(s){return void Sx(this,s)}n=e||"";const r=new Dh(this.headers);i&&F_(i,function(s,l){r.set(l,s)}),i=function IA(n){e:{var t=xx;const e=n.length,i="string"==typeof n?n.split(""):n;for(let r=0;r<e;r++)if(r in i&&t.call(void 0,i[r],r,n)){t=r;break e}t=-1}return 0>t?null:"string"==typeof n?n.charAt(t):n[t]}(r.T()),e=Bt.FormData&&n instanceof Bt.FormData,!(0<=HD(Q0,t))||i||e||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),r.forEach(function(s,l){this.g.setRequestHeader(l,s)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Ix(this),0<this.B&&((this.K=function QA(n){return Nu&&function x0(){return function YD(n){var t=VN;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=n(9)}(function(){let n=0;const t=zD(String(tl)).split("."),e=zD("9").split("."),i=Math.max(t.length,e.length);for(let l=0;0==n&&l<i;l++){var r=t[l]||"",s=e[l]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==r[0].length&&0==s[0].length)break;n=g0(0==r[1].length?0:parseInt(r[1],10),0==s[1].length?0:parseInt(s[1],10))||g0(0==r[2].length,0==s[2].length)||g0(r[2],s[2]),r=r[3],s=s[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Tr(this.pa,this)):this.A=B0(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){Sx(this,s)}},mt.pa=function(){void 0!==y_&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ji(this,"timeout"),this.abort(8))},mt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Ji(this,"complete"),Ji(this,"abort"),Y_(this))},mt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Y_(this,!0)),zi.Z.M.call(this)},mt.Fa=function(){this.s||(this.F||this.v||this.l?Tx(this):this.cb())},mt.cb=function(){Tx(this)},mt.ba=function(){try{return 2<Kl(this)?this.g.status:-1}catch(n){return-1}},mt.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},mt.Qa=function(n){if(this.g){var t=this.g.responseText;return n&&0==t.indexOf(n)&&(t=t.substring(n.length)),GN(t)}},mt.Da=function(){return this.m},mt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(mt=X0.prototype).ma=8,mt.G=1,mt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(t){}},mt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const r=new Bp(this,this.h,n,void 0);let s=this.s;if(this.P&&(s?(s=WD(s),y0(s,this.P)):s=this.P),null===this.o&&(r.H=s),this.ja)e:{for(var t=0,e=0;e<this.l.length;e++){var i=this.l[e];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(t+=i)){t=e;break e}if(4096===t||e===this.l.length-1){t=e+1;break e}}t=1e3}else t=1e3;t=Rx(this,r,t),ui(e=va(this.F),"RID",n),ui(e,"CVER",22),this.D&&ui(e,"X-HTTP-Session-Id",this.D),Wp(this,e),this.o&&s&&ju(e,this.o,s),q_(this.i,r),this.Ra&&ui(e,"TYPE","init"),this.ja?(ui(e,"$req",t),ui(e,"SID","null"),r.$=!0,W0(r,e,null)):W0(r,e,t),this.G=2}}else 3==this.G&&(n?kx(this,n):0==this.l.length||Ih(this.i)||kx(this))},mt.Ga=function(){if(this.u=null,Q_(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Ch(Tr(this.bb,this),n)}},mt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,er(10),qp(this),Q_(this))},mt.ab=function(){null!=this.v&&(this.v=null,qp(this),Gu(this),er(19))},mt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),er(2)):(this.h.info("Failed to ping google.com"),er(1))},(mt=Zp.prototype).xa=function(){},mt.wa=function(){},mt.va=function(){},mt.ua=function(){},mt.Oa=function(){},zu.prototype.g=function(n,t){return new mo(n,t)},Hr(mo,Ir),mo.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,t=this.l,e=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),P0(Tr(n.hb,n,t))),er(0),n.W=t,n.aa=e||{},n.N=n.X,n.F=Fx(n,null,n.W),K_(n)},mo.prototype.close=function(){Z_(this.g)},mo.prototype.u=function(n){if("string"==typeof n){var t={};t.__data__=n,ew(this.g,t)}else this.v?((t={}).__data__=S_(n),ew(this.g,t)):ew(this.g,n)},mo.prototype.M=function(){this.g.j=null,delete this.j,Z_(this.g),delete this.g,mo.Z.M.call(this)},Hr(Bx,z0),Hr(nw,R_),Hr($u,Zp),$u.prototype.xa=function(){Ji(this.g,"a")},$u.prototype.wa=function(n){Ji(this.g,new Bx(n))},$u.prototype.va=function(n){Ji(this.g,new nw(n))},$u.prototype.ua=function(){Ji(this.g,"b")},zu.prototype.createWebChannel=zu.prototype.g,mo.prototype.send=mo.prototype.u,mo.prototype.open=mo.prototype.m,mo.prototype.close=mo.prototype.close,k_.NO_ERROR=0,k_.TIMEOUT=8,k_.HTTP_ERROR=6,H0.COMPLETE="complete",lx.EventType=Uu,Uu.OPEN="a",Uu.CLOSE="b",Uu.ERROR="c",Uu.MESSAGE="d",Ir.prototype.listen=Ir.prototype.N,zi.prototype.listenOnce=zi.prototype.O,zi.prototype.getLastError=zi.prototype.La,zi.prototype.getLastErrorCode=zi.prototype.Da,zi.prototype.getStatus=zi.prototype.ba,zi.prototype.getResponseJson=zi.prototype.Qa,zi.prototype.getResponseText=zi.prototype.ga,zi.prototype.send=zi.prototype.ea;var iw=qo.createWebChannelTransport=function(){return new zu},Vx=qo.getStatEventTarget=function(){return A_()},rw=qo.ErrorCode=k_,ek=qo.EventType=H0,zN=qo.Event=Vu,X_=qo.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},sw=qo.FetchXmlHttpFactory=il,Kp=qo.WebChannel=lx,ow=qo.XhrIo=zi;const J_="@firebase/firestore";class Ar{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Ar.UNAUTHENTICATED=new Ar(null),Ar.GOOGLE_CREDENTIALS=new Ar("google-credentials-uid"),Ar.FIRST_PARTY=new Ar("first-party-uid"),Ar.MOCK_USER=new Ar("mock-user");let Rh="9.8.4";const Fc=new jo.Yd("@firebase/firestore");function aw(){return Fc.logLevel}function He(n,...t){if(Fc.logLevel<=jo.in.DEBUG){const e=t.map(ev);Fc.debug(`Firestore (${Rh}): ${n}`,...e)}}function $i(n,...t){if(Fc.logLevel<=jo.in.ERROR){const e=t.map(ev);Fc.error(`Firestore (${Rh}): ${n}`,...e)}}function Oh(n,...t){if(Fc.logLevel<=jo.in.WARN){const e=t.map(ev);Fc.warn(`Firestore (${Rh}): ${n}`,...e)}}function ev(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(e){return n}}function gt(n="Unexpected state"){const t=`FIRESTORE (${Rh}) INTERNAL ASSERTION FAILED: `+n;throw $i(t),new Error(t)}function Pt(n,t){n||gt()}function ot(n,t){return n}const ve={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Be extends L.ZR{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class kr{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}class is{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Ph{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(Ar.UNAUTHENTICATED))}shutdown(){}}class tk{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class nk{constructor(t){this.t=t,this.currentUser=Ar.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){var i=this;let r=this.i;const s=_=>this.i!==r?(r=this.i,e(_)):Promise.resolve();let l=new kr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new kr,t.enqueueRetryable(()=>s(this.currentUser))};const d=()=>{const _=l;t.enqueueRetryable((0,xe.Z)(function*(){yield _.promise,yield s(i.currentUser)}))},p=_=>{He("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(_=>p(_)),setTimeout(()=>{if(!this.auth){const _=this.t.getImmediate({optional:!0});_?p(_):(He("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new kr)}},0),d()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(He("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Pt("string"==typeof i.accessToken),new is(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Pt(null===t||"string"==typeof t),new Ar(t)}}class $N{constructor(t,e,i){this.type="FirstParty",this.user=Ar.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",e);const r=t.auth.getAuthHeaderValueForFirstParty([]);r&&this.headers.set("Authorization",r),i&&this.headers.set("X-Goog-Iam-Authorization-Token",i)}}class Qp{constructor(t,e,i){this.h=t,this.l=e,this.m=i}getToken(){return Promise.resolve(new $N(this.h,this.l,this.m))}start(t,e){t.enqueueRetryable(()=>e(Ar.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class jx{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class lw{constructor(t){this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(t,e){const i=s=>{null!=s.error&&He("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const l=s.token!==this.p;return this.p=s.token,He("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?e(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>i(s))};const r=s=>{He("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.g.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.g.getImmediate({optional:!0});s?r(s):He("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(Pt("string"==typeof e.token),this.p=e.token,new jx(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Gx(n){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}class zx{static I(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let i="";for(;i.length<20;){const r=Gx(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<e&&(i+=t.charAt(r[s]%t.length))}return i}}function Qt(n,t){return n<t?-1:n>t?1:0}function Lc(n,t,e){return n.length===t.length&&n.every((i,r)=>e(i,t[r]))}function cw(n){return n+"\0"}class di{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Be(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Be(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Be(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Be(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return di.fromMillis(Date.now())}static fromDate(t){return di.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor(1e6*(t-1e3*e));return new di(e,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Qt(this.nanoseconds,t.nanoseconds):Qt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class At{constructor(t){this.timestamp=t}static fromTimestamp(t){return new At(t)}static min(){return new At(new di(0,0))}static max(){return new At(new di(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class qu{constructor(t,e,i){void 0===e?e=0:e>t.length&&gt(),void 0===i?i=t.length-e:i>t.length-e&&gt(),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return 0===qu.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof qu?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let r=0;r<i;r++){const s=t.get(r),l=e.get(r);if(s<l)return-1;if(s>l)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class Cn extends qu{construct(t,e,i){return new Cn(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new Be(ve.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(r=>r.length>0))}return new Cn(e)}static emptyPath(){return new Cn([])}}const $x=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class qi extends qu{construct(t,e,i){return new qi(t,e,i)}static isValidIdentifier(t){return $x.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),qi.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new qi(["__name__"])}static fromServerFormat(t){const e=[];let i="",r=0;const s=()=>{if(0===i.length)throw new Be(ve.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let l=!1;for(;r<t.length;){const d=t[r];if("\\"===d){if(r+1===t.length)throw new Be(ve.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const p=t[r+1];if("\\"!==p&&"."!==p&&"`"!==p)throw new Be(ve.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=p,r+=2}else"`"===d?(l=!l,r++):"."!==d||l?(i+=d,r++):(s(),r++)}if(s(),l)throw new Be(ve.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new qi(e)}static emptyPath(){return new qi([])}}class nt{constructor(t){this.path=t}static fromPath(t){return new nt(Cn.fromString(t))}static fromName(t){return new nt(Cn.fromString(t).popFirst(5))}static empty(){return new nt(Cn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===Cn.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return Cn.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new nt(new Cn(t.slice()))}}class Wu{constructor(t,e,i,r){this.indexId=t,this.collectionGroup=e,this.fields=i,this.indexState=r}}function tv(n){return n.fields.find(t=>2===t.kind)}function Yu(n){return n.fields.filter(t=>2!==t.kind)}Wu.UNKNOWN_ID=-1;class Nh{constructor(t,e){this.fieldPath=t,this.kind=e}}class Zu{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new Zu(0,go.min())}}function ik(n,t){const e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=At.fromTimestamp(1e9===i?new di(e+1,0):new di(e,i));return new go(r,nt.empty(),t)}function qx(n){return new go(n.readTime,n.key,-1)}class go{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new go(At.min(),nt.empty(),-1)}static max(){return new go(At.max(),nt.empty(),-1)}}function nv(n,t){let e=n.readTime.compareTo(t.readTime);return 0!==e?e:(e=nt.comparator(n.documentKey,t.documentKey),0!==e?e:Qt(n.largestBatchId,t.largestBatchId))}const uw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Wx{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}function Ql(n){return iv.apply(this,arguments)}function iv(){return iv=(0,xe.Z)(function*(n){if(n.code!==ve.FAILED_PRECONDITION||n.message!==uw)throw n;He("LocalStore","Unexpectedly lost primary lease")}),iv.apply(this,arguments)}class ge{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&gt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new ge((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(e,s).next(i,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof ge?e:ge.resolve(e)}catch(e){return ge.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):ge.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):ge.reject(e)}static resolve(t){return new ge((e,i)=>{e(t)})}static reject(t){return new ge((e,i)=>{i(t)})}static waitFor(t){return new ge((e,i)=>{let r=0,s=0,l=!1;t.forEach(d=>{++r,d.next(()=>{++s,l&&s===r&&e()},p=>i(p))}),l=!0,s===r&&e()})}static or(t){let e=ge.resolve(!1);for(const i of t)e=e.next(r=>r?ge.resolve(r):i());return e}static forEach(t,e){const i=[];return t.forEach((r,s)=>{i.push(e.call(this,r,s))}),this.waitFor(i)}static mapArray(t,e){return new ge((i,r)=>{const s=t.length,l=new Array(s);let d=0;for(let p=0;p<s;p++){const _=p;e(t[_]).next(b=>{l[_]=b,++d,d===s&&i(l)},b=>r(b))}})}static doWhile(t,e){return new ge((i,r)=>{const s=()=>{!0===t()?e().next(()=>{s()},r):i()};s()})}}class rv{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.T=new kr,this.transaction.oncomplete=()=>{this.T.resolve()},this.transaction.onabort=()=>{e.error?this.T.reject(new Fh(t,e.error)):this.T.resolve()},this.transaction.onerror=i=>{const r=dw(i.target.error);this.T.reject(new Fh(t,r))}}static open(t,e,i,r){try{return new rv(e,t.transaction(r,i))}catch(s){throw new Fh(e,s)}}get A(){return this.T.promise}abort(t){t&&this.T.reject(t),this.aborted||(He("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}R(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const e=this.transaction.objectStore(t);return new Yx(e)}}class Wo{constructor(t,e,i){this.name=t,this.version=e,this.P=i,12.2===Wo.v((0,L.z$)())&&$i("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return He("SimpleDb","Removing database:",t),Bc(window.indexedDB.deleteDatabase(t)).toPromise()}static V(){if(!(0,L.hl)())return!1;if(Wo.S())return!0;const t=(0,L.z$)(),e=Wo.v(t),i=0<e&&e<10,r=Wo.D(t),s=0<r&&r<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||i||s)}static S(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.C)}static N(t,e){return t.store(e)}static v(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static D(t){const e=t.match(/Android ([\d.]+)/i),i=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(i)}k(t){var e=this;return(0,xe.Z)(function*(){return e.db||(He("SimpleDb","Opening database:",e.name),e.db=yield new Promise((i,r)=>{const s=indexedDB.open(e.name,e.version);s.onsuccess=l=>{i(l.target.result)},s.onblocked=()=>{r(new Fh(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=l=>{const d=l.target.error;r("VersionError"===d.name?new Be(ve.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===d.name?new Be(ve.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d):new Fh(t,d))},s.onupgradeneeded=l=>{He("SimpleDb",'Database "'+e.name+'" requires upgrade from version:',l.oldVersion),e.P.O(l.target.result,s.transaction,l.oldVersion,e.version).next(()=>{He("SimpleDb","Database upgrade to version "+e.version+" complete")})}})),e.M&&(e.db.onversionchange=i=>e.M(i)),e.db})()}F(t){this.M=t,this.db&&(this.db.onversionchange=e=>t(e))}runTransaction(t,e,i,r){var s=this;return(0,xe.Z)(function*(){const l="readonly"===e;let d=0;for(;;){++d;try{s.db=yield s.k(t);const p=rv.open(s.db,t,l?"readonly":"readwrite",i),_=r(p).next(b=>(p.R(),b)).catch(b=>(p.abort(b),ge.reject(b))).toPromise();return _.catch(()=>{}),yield p.A,_}catch(p){const _=p,b="FirebaseError"!==_.name&&d<3;if(He("SimpleDb","Transaction failed with error:",_.message,"Retrying:",b),s.close(),!b)return Promise.reject(_)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class rk{constructor(t){this.$=t,this.B=!1,this.L=null}get isDone(){return this.B}get U(){return this.L}set cursor(t){this.$=t}done(){this.B=!0}q(t){this.L=t}delete(){return Bc(this.$.delete())}}class Fh extends Be{constructor(t,e){super(ve.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function Xl(n){return"IndexedDbTransactionError"===n.name}class Yx{constructor(t){this.store=t}put(t,e){let i;return void 0!==e?(He("SimpleDb","PUT",this.store.name,t,e),i=this.store.put(e,t)):(He("SimpleDb","PUT",this.store.name,"<auto-key>",t),i=this.store.put(t)),Bc(i)}add(t){return He("SimpleDb","ADD",this.store.name,t,t),Bc(this.store.add(t))}get(t){return Bc(this.store.get(t)).next(e=>(void 0===e&&(e=null),He("SimpleDb","GET",this.store.name,t,e),e))}delete(t){return He("SimpleDb","DELETE",this.store.name,t),Bc(this.store.delete(t))}count(){return He("SimpleDb","COUNT",this.store.name),Bc(this.store.count())}K(t,e){const i=this.options(t,e);if(i.index||"function"!=typeof this.store.getAll){const r=this.cursor(i),s=[];return this.G(r,(l,d)=>{s.push(d)}).next(()=>s)}{const r=this.store.getAll(i.range);return new ge((s,l)=>{r.onerror=d=>{l(d.target.error)},r.onsuccess=d=>{s(d.target.result)}})}}j(t,e){const i=this.store.getAll(t,null===e?void 0:e);return new ge((r,s)=>{i.onerror=l=>{s(l.target.error)},i.onsuccess=l=>{r(l.target.result)}})}W(t,e){He("SimpleDb","DELETE ALL",this.store.name);const i=this.options(t,e);i.H=!1;const r=this.cursor(i);return this.G(r,(s,l,d)=>d.delete())}J(t,e){let i;e?i=t:(i={},e=t);const r=this.cursor(i);return this.G(r,e)}Y(t){const e=this.cursor({});return new ge((i,r)=>{e.onerror=s=>{const l=dw(s.target.error);r(l)},e.onsuccess=s=>{const l=s.target.result;l?t(l.primaryKey,l.value).next(d=>{d?l.continue():i()}):i()}})}G(t,e){const i=[];return new ge((r,s)=>{t.onerror=l=>{s(l.target.error)},t.onsuccess=l=>{const d=l.target.result;if(!d)return void r();const p=new rk(d),_=e(d.primaryKey,d.value,p);if(_ instanceof ge){const b=_.catch(D=>(p.done(),ge.reject(D)));i.push(b)}p.isDone?r():null===p.U?d.continue():d.continue(p.U)}}).next(()=>ge.waitFor(i))}options(t,e){let i;return void 0!==t&&("string"==typeof t?i=t:e=t),{index:i,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const i=this.store.index(t.index);return t.H?i.openKeyCursor(t.range,e):i.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function Bc(n){return new ge((t,e)=>{n.onsuccess=i=>{t(i.target.result)},n.onerror=i=>{const r=dw(i.target.error);e(r)}})}let Zx=!1;function dw(n){const t=Wo.v((0,L.z$)());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(e)>=0){const i=new Be("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Zx||(Zx=!0,setTimeout(()=>{throw i},0)),i}}return n}class WN{constructor(t,e){this.asyncQueue=t,this.X=e,this.task=null}start(){}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}Z(t){var e=this;He("IndexBackiller",`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(0,xe.Z)(function*(){e.task=null;try{He("IndexBackiller",`Documents written: ${yield e.X.tt()}`)}catch(i){Xl(i)?He("IndexBackiller","Ignoring IndexedDB error during index backfill: ",i):yield Ql(i)}yield e.Z(1)}))}}class Kx{constructor(t,e){this.localStore=t,this.persistence=e}tt(t=50){var e=this;return(0,xe.Z)(function*(){return e.persistence.runTransaction("Backfill Indexes","readwrite-primary",i=>e.et(i,t))})()}et(t,e){const i=new Set;let r=e,s=!0;return ge.doWhile(()=>!0===s&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(l=>{if(null!==l&&!i.has(l))return He("IndexBackiller",`Processing collection: ${l}`),this.nt(t,l,r).next(d=>{r-=d,i.add(l)});s=!1})).next(()=>e-r)}nt(t,e,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next(r=>this.localStore.localDocuments.getNextDocuments(t,e,r,i).next(s=>{const l=s.changes;return this.localStore.indexManager.updateIndexEntries(t,l).next(()=>this.st(r,s)).next(d=>(He("IndexBackiller",`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(t,e,d))).next(()=>l.size)}))}st(t,e){let i=t;return e.changes.forEach((r,s)=>{const l=qx(s);nv(l,i)>0&&(i=l)}),new go(i.readTime,i.documentKey,Math.max(e.batchId,t.largestBatchId))}}class _o{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=i=>this.it(i),this.rt=i=>e.writeSequenceNumber(i))}it(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.rt&&this.rt(t),t}}function sk(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function Lh(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function ok(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}_o.ot=-1;class Wi{constructor(t,e){this.comparator=t,this.root=e||rs.EMPTY}insert(t,e){return new Wi(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,rs.BLACK,null,null))}remove(t){return new Wi(this.comparator,this.root.remove(t,this.comparator).copy(null,null,rs.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(0===i)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(0===r)return e+i.left.size;r<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){const t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new hw(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new hw(this.root,t,this.comparator,!1)}getReverseIterator(){return new hw(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new hw(this.root,t,this.comparator,!0)}}class hw{constructor(t,e,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=e?i(t.key,e):1,e&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(0===s){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class rs{constructor(t,e,i,r,s){this.key=t,this.value=e,this.color=null!=i?i:rs.RED,this.left=null!=r?r:rs.EMPTY,this.right=null!=s?s:rs.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,r,s){return new rs(null!=t?t:this.key,null!=e?e:this.value,null!=i?i:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let r=this;const s=i(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,e,i),null):0===s?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return rs.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===e(t,r.key)){if(r.right.isEmpty())return rs.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,rs.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,rs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw gt();const t=this.left.check();if(t!==this.right.check())throw gt();return t+(this.isRed()?0:1)}}rs.EMPTY=null,rs.RED=!0,rs.BLACK=!1,rs.EMPTY=new class{constructor(){this.size=0}get key(){throw gt()}get value(){throw gt()}get color(){throw gt()}get left(){throw gt()}get right(){throw gt()}copy(n,t,e,i,r){return this}insert(n,t,e){return new rs(n,t)}remove(n,t){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Yn{constructor(t){this.comparator=t,this.data=new Wi(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let i;for(i=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new Xp(this.data.getIterator())}getIteratorFrom(t){return new Xp(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof Yn)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=i.getNext().key;if(0!==this.comparator(r,s))return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new Yn(this.comparator);return e.data=t,e}}class Xp{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Jp(n){return n.hasNext()?n.getNext():void 0}class Ls{constructor(t){this.fields=t,t.sort(qi.comparator)}static empty(){return new Ls([])}unionWith(t){let e=new Yn(qi.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new Ls(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Lc(this.fields,t.fields,(e,i)=>e.isEqual(i))}}class tr{constructor(t){this.binaryString=t}static fromBase64String(t){const e=atob(t);return new tr(e)}static fromUint8Array(t){const e=function(i){let r="";for(let s=0;s<i.length;++s)r+=String.fromCharCode(i[s]);return r}(t);return new tr(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let i=0;i<t.length;i++)e[i]=t.charCodeAt(i);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Qt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}tr.EMPTY_BYTE_STRING=new tr("");const Qx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ku(n){if(Pt(!!n),"string"==typeof n){let t=0;const e=Qx.exec(n);if(Pt(!!e),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:_i(n.seconds),nanos:_i(n.nanos)}}function _i(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Vc(n){return"string"==typeof n?tr.fromBase64String(n):tr.fromUint8Array(n)}function sv(n){var t,e;return"server_timestamp"===(null===(e=((null===(t=null==n?void 0:n.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===e?void 0:e.stringValue)}function pw(n){const t=n.mapValue.fields.__previous_value__;return sv(t)?pw(t):t}function ov(n){const t=Ku(n.mapValue.fields.__local_write_time__.timestampValue);return new di(t.seconds,t.nanos)}class Xx{constructor(t,e,i,r,s,l,d,p){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=l,this.autoDetectLongPolling=d,this.useFetchStreams=p}}class Jl{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new Jl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof Jl&&t.projectId===this.projectId&&t.database===this.database}}function Qu(n){return null==n}function em(n){return 0===n&&1/n==-1/0}function ak(n){return"number"==typeof n&&Number.isInteger(n)&&!em(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Xu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},mw={nullValue:"NULL_VALUE"};function Ju(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?sv(n)?4:vw(n)?9007199254740991:10:gt()}function rl(n,t){if(n===t)return!0;const e=Ju(n);if(e!==Ju(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return ov(n).isEqual(ov(t));case 3:return function(i,r){if("string"==typeof i.timestampValue&&"string"==typeof r.timestampValue&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const s=Ku(i.timestampValue),l=Ku(r.timestampValue);return s.seconds===l.seconds&&s.nanos===l.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return r=t,Vc(n.bytesValue).isEqual(Vc(r.bytesValue));case 7:return n.referenceValue===t.referenceValue;case 8:return function(i,r){return _i(i.geoPointValue.latitude)===_i(r.geoPointValue.latitude)&&_i(i.geoPointValue.longitude)===_i(r.geoPointValue.longitude)}(n,t);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return _i(i.integerValue)===_i(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const s=_i(i.doubleValue),l=_i(r.doubleValue);return s===l?em(s)===em(l):isNaN(s)&&isNaN(l)}return!1}(n,t);case 9:return Lc(n.arrayValue.values||[],t.arrayValue.values||[],rl);case 10:return function(i,r){const s=i.mapValue.fields||{},l=r.mapValue.fields||{};if(sk(s)!==sk(l))return!1;for(const d in s)if(s.hasOwnProperty(d)&&(void 0===l[d]||!rl(s[d],l[d])))return!1;return!0}(n,t);default:return gt()}var r}function tm(n,t){return void 0!==(n.values||[]).find(e=>rl(e,t))}function ed(n,t){if(n===t)return 0;const e=Ju(n),i=Ju(t);if(e!==i)return Qt(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return Qt(n.booleanValue,t.booleanValue);case 2:return function(r,s){const l=_i(r.integerValue||r.doubleValue),d=_i(s.integerValue||s.doubleValue);return l<d?-1:l>d?1:l===d?0:isNaN(l)?isNaN(d)?0:-1:1}(n,t);case 3:return Jx(n.timestampValue,t.timestampValue);case 4:return Jx(ov(n),ov(t));case 5:return Qt(n.stringValue,t.stringValue);case 6:return function(r,s){const l=Vc(r),d=Vc(s);return l.compareTo(d)}(n.bytesValue,t.bytesValue);case 7:return function(r,s){const l=r.split("/"),d=s.split("/");for(let p=0;p<l.length&&p<d.length;p++){const _=Qt(l[p],d[p]);if(0!==_)return _}return Qt(l.length,d.length)}(n.referenceValue,t.referenceValue);case 8:return function(r,s){const l=Qt(_i(r.latitude),_i(s.latitude));return 0!==l?l:Qt(_i(r.longitude),_i(s.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return function(r,s){const l=r.values||[],d=s.values||[];for(let p=0;p<l.length&&p<d.length;++p){const _=ed(l[p],d[p]);if(_)return _}return Qt(l.length,d.length)}(n.arrayValue,t.arrayValue);case 10:return function(r,s){if(r===Xu.mapValue&&s===Xu.mapValue)return 0;if(r===Xu.mapValue)return 1;if(s===Xu.mapValue)return-1;const l=r.fields||{},d=Object.keys(l),p=s.fields||{},_=Object.keys(p);d.sort(),_.sort();for(let b=0;b<d.length&&b<_.length;++b){const D=Qt(d[b],_[b]);if(0!==D)return D;const I=ed(l[d[b]],p[_[b]]);if(0!==I)return I}return Qt(d.length,_.length)}(n.mapValue,t.mapValue);default:throw gt()}}function Jx(n,t){if("string"==typeof n&&"string"==typeof t&&n.length===t.length)return Qt(n,t);const e=Ku(n),i=Ku(t),r=Qt(e.seconds,i.seconds);return 0!==r?r:Qt(e.nanos,i.nanos)}function Uc(n){return gw(n)}function gw(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const r=Ku(i);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Vc(n.bytesValue).toBase64():"referenceValue"in n?nt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(t=n.geoPointValue).latitude},${t.longitude})`:"arrayValue"in n?function(i){let r="[",s=!0;for(const l of i.values||[])s?s=!1:r+=",",r+=gw(l);return r+"]"}(n.arrayValue):"mapValue"in n?function(i){const r=Object.keys(i.fields||{}).sort();let s="{",l=!0;for(const d of r)l?l=!1:s+=",",s+=`${d}:${gw(i.fields[d])}`;return s+"}"}(n.mapValue):gt();var t}function jr(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function _w(n){return!!n&&"integerValue"in n}function td(n){return!!n&&"arrayValue"in n}function eS(n){return!!n&&"nullValue"in n}function tS(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Bh(n){return!!n&&"mapValue"in n}function Vh(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return Lh(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=Vh(i)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Vh(n.arrayValue.values[e]);return t}return Object.assign({},n)}function vw(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function lk(n){return"nullValue"in n?mw:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?jr(Jl.empty(),nt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:gt()}function nS(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?jr(Jl.empty(),nt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Xu:gt()}function yw(n,t){const e=ed(n.value,t.value);return 0!==e?e:n.inclusive&&!t.inclusive?-1:!n.inclusive&&t.inclusive?1:0}function iS(n,t){const e=ed(n.value,t.value);return 0!==e?e:n.inclusive&&!t.inclusive?1:!n.inclusive&&t.inclusive?-1:0}class Gr{constructor(t){this.value=t}static empty(){return new Gr({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!Bh(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Vh(e)}setAll(t){let e=qi.emptyPath(),i={},r=[];t.forEach((l,d)=>{if(!e.isImmediateParentOf(d)){const p=this.getFieldsMap(e);this.applyChanges(p,i,r),i={},r=[],e=d.popLast()}l?i[d.lastSegment()]=Vh(l):r.push(d.lastSegment())});const s=this.getFieldsMap(e);this.applyChanges(s,i,r)}delete(t){const e=this.field(t.popLast());Bh(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return rl(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=e.mapValue.fields[t.get(i)];Bh(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,i){Lh(e,(r,s)=>t[r]=s);for(const r of i)delete t[r]}clone(){return new Gr(Vh(this.value))}}function av(n){const t=[];return Lh(n.fields,(e,i)=>{const r=new qi([e]);if(Bh(i)){const s=av(i.mapValue).fields;if(0===s.length)t.push(r);else for(const l of s)t.push(r.child(l))}else t.push(r)}),new Ls(t)}class mn{constructor(t,e,i,r,s,l){this.key=t,this.documentType=e,this.version=i,this.readTime=r,this.data=s,this.documentState=l}static newInvalidDocument(t){return new mn(t,0,At.min(),At.min(),Gr.empty(),0)}static newFoundDocument(t,e,i){return new mn(t,1,e,At.min(),i,0)}static newNoDocument(t,e){return new mn(t,2,e,At.min(),Gr.empty(),0)}static newUnknownDocument(t,e){return new mn(t,3,e,At.min(),Gr.empty(),2)}convertToFoundDocument(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Gr.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Gr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=At.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof mn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new mn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ck{constructor(t,e=null,i=[],r=[],s=null,l=null,d=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=l,this.endAt=d,this.ut=null}}function uk(n,t=null,e=[],i=[],r=null,s=null,l=null){return new ck(n,t,e,i,r,s,l)}function nd(n){const t=ot(n);if(null===t.ut){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>{return(r=i).field.canonicalString()+r.op.toString()+Uc(r.value);var r}).join(","),e+="|ob:",e+=t.orderBy.map(i=>{return(r=i).field.canonicalString()+r.dir;var r}).join(","),Qu(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>Uc(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>Uc(i)).join(",")),t.ut=e}return t.ut}function nm(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<n.orderBy.length;r++)if(!mk(n.orderBy[r],t.orderBy[r]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let r=0;r<n.filters.length;r++)if((e=n.filters[r]).op!==(i=t.filters[r]).op||!e.field.isEqual(i.field)||!rl(e.value,i.value))return!1;var e,i;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!gk(n.startAt,t.startAt)&&gk(n.endAt,t.endAt)}function lv(n){return nt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function im(n,t){return n.filters.filter(e=>e instanceof Rr&&e.field.isEqual(t))}function sS(n,t,e){let i=mw,r=!0;for(const s of im(n,t)){let l=mw,d=!0;switch(s.op){case"<":case"<=":l=lk(s.value);break;case"==":case"in":case">=":l=s.value;break;case">":l=s.value,d=!1;break;case"!=":case"not-in":l=mw}yw({value:i,inclusive:r},{value:l,inclusive:d})<0&&(i=l,r=d)}if(null!==e)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(t)){const l=e.position[s];yw({value:i,inclusive:r},{value:l,inclusive:e.inclusive})<0&&(i=l,r=e.inclusive);break}return{value:i,inclusive:r}}function dk(n,t,e){let i=Xu,r=!0;for(const s of im(n,t)){let l=Xu,d=!0;switch(s.op){case">=":case">":l=nS(s.value),d=!1;break;case"==":case"in":case"<=":l=s.value;break;case"<":l=s.value,d=!1;break;case"!=":case"not-in":l=Xu}iS({value:i,inclusive:r},{value:l,inclusive:d})>0&&(i=l,r=d)}if(null!==e)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(t)){const l=e.position[s];iS({value:i,inclusive:r},{value:l,inclusive:e.inclusive})>0&&(i=l,r=e.inclusive);break}return{value:i,inclusive:r}}class Rr extends class{}{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?"in"===e||"not-in"===e?this.ct(t,e,i):new oS(t,e,i):"array-contains"===e?new ww(t,i):"in"===e?new Cw(t,i):"not-in"===e?new aS(t,i):"array-contains-any"===e?new pk(t,i):new Rr(t,e,i)}static ct(t,e,i){return"in"===e?new hk(t,i):new fk(t,i)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.at(ed(e,this.value)):null!==e&&Ju(this.value)===Ju(e)&&this.at(ed(e,this.value))}at(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return gt()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class oS extends Rr{constructor(t,e,i){super(t,e,i),this.key=nt.fromName(i.referenceValue)}matches(t){const e=nt.comparator(t.key,this.key);return this.at(e)}}class hk extends Rr{constructor(t,e){super(t,"in",e),this.keys=bw(0,e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class fk extends Rr{constructor(t,e){super(t,"not-in",e),this.keys=bw(0,e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function bw(n,t){var e;return((null===(e=t.arrayValue)||void 0===e?void 0:e.values)||[]).map(i=>nt.fromName(i.referenceValue))}class ww extends Rr{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return td(e)&&tm(e.arrayValue,this.value)}}class Cw extends Rr{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&tm(this.value.arrayValue,e)}}class aS extends Rr{constructor(t,e){super(t,"not-in",e)}matches(t){if(tm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!tm(this.value.arrayValue,e)}}class pk extends Rr{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!td(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>tm(this.value.arrayValue,i))}}class ec{constructor(t,e){this.position=t,this.inclusive=e}}class id{constructor(t,e="asc"){this.field=t,this.dir=e}}function mk(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}function lS(n,t,e){let i=0;for(let r=0;r<n.position.length;r++){const s=t[r],l=n.position[r];if(i=s.field.isKeyField()?nt.comparator(nt.fromName(l.referenceValue),e.key):ed(l,e.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function gk(n,t){if(null===n)return null===t;if(null===t||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!rl(n.position[e],t.position[e]))return!1;return!0}class Hc{constructor(t,e=null,i=[],r=[],s=null,l="F",d=null,p=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=l,this.startAt=d,this.endAt=p,this.lt=null,this.ft=null}}function Ew(n,t,e,i,r,s,l,d){return new Hc(n,t,e,i,r,s,l,d)}function Uh(n){return new Hc(n)}function Dw(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function cS(n){for(const t of n.filters)if(t.ht())return t.field;return null}function uS(n){return null!==n.collectionGroup}function rm(n){const t=ot(n);if(null===t.lt){t.lt=[];const e=cS(t),i=Dw(t);if(null!==e&&null===i)e.isKeyField()||t.lt.push(new id(e)),t.lt.push(new id(qi.keyField(),"asc"));else{let r=!1;for(const s of t.explicitOrderBy)t.lt.push(s),s.field.isKeyField()&&(r=!0);if(!r){const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.lt.push(new id(qi.keyField(),s))}}}return t.lt}function ba(n){const t=ot(n);if(!t.ft)if("F"===t.limitType)t.ft=uk(t.path,t.collectionGroup,rm(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const s of rm(t))e.push(new id(s.field,"desc"===s.dir?"asc":"desc"));const i=t.endAt?new ec(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ec(t.startAt.position,t.startAt.inclusive):null;t.ft=uk(t.path,t.collectionGroup,e,t.filters,t.limit,i,r)}return t.ft}function vk(n,t,e){return new Hc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function sm(n,t){return nm(ba(n),ba(t))&&n.limitType===t.limitType}function om(n){return`${nd(ba(n))}|lt:${n.limitType}`}function xw(n){return`Query(target=${function rS(n){let t=n.path.canonicalString();return null!==n.collectionGroup&&(t+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(t+=`, filters: [${n.filters.map(e=>{return`${(i=e).field.canonicalString()} ${i.op} ${Uc(i.value)}`;var i}).join(", ")}]`),Qu(n.limit)||(t+=", limit: "+n.limit),n.orderBy.length>0&&(t+=`, orderBy: [${n.orderBy.map(e=>{return`${(i=e).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),n.startAt&&(t+=", startAt: ",t+=n.startAt.inclusive?"b:":"a:",t+=n.startAt.position.map(e=>Uc(e)).join(",")),n.endAt&&(t+=", endAt: ",t+=n.endAt.inclusive?"a:":"b:",t+=n.endAt.position.map(e=>Uc(e)).join(",")),`Target(${t})`}(ba(n))}; limitType=${n.limitType})`}function Sw(n,t){return t.isFoundDocument()&&function(e,i){const r=i.key.path;return null!==e.collectionGroup?i.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(r):nt.isDocumentKey(e.path)?e.path.isEqual(r):e.path.isImmediateParentOf(r)}(n,t)&&function(e,i){for(const r of e.explicitOrderBy)if(!r.field.isKeyField()&&null===i.data.field(r.field))return!1;return!0}(n,t)&&function(e,i){for(const r of e.filters)if(!r.matches(i))return!1;return!0}(n,t)&&(i=t,!((e=n).startAt&&!function(r,s,l){const d=lS(r,s,l);return r.inclusive?d<=0:d<0}(e.startAt,rm(e),i)||e.endAt&&!function(r,s,l){const d=lS(r,s,l);return r.inclusive?d>=0:d>0}(e.endAt,rm(e),i)));var e,i}function Mw(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function jc(n){return(t,e)=>{let i=!1;for(const r of rm(n)){const s=dS(r,t,e);if(0!==s)return s;i=i||r.field.isKeyField()}return 0}}function dS(n,t,e){const i=n.field.isKeyField()?nt.comparator(t.key,e.key):function(r,s,l){const d=s.data.field(r),p=l.data.field(r);return null!==d&&null!==p?ed(d,p):gt()}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return gt()}}function cv(n,t){if(n.dt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:em(t)?"-0":t}}function uv(n){return{integerValue:""+n}}function hS(n,t){return ak(t)?uv(t):cv(n,t)}class Hh{constructor(){this._=void 0}}function Tw(n,t,e){return n instanceof am?function(i,r){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&(s.fields.__previous_value__=r),{mapValue:s}}(e,t):n instanceof jh?bk(n,t):n instanceof Gc?fS(n,t):function(i,r){const s=yk(i,r),l=pS(s)+pS(i._t);return _w(s)&&_w(i._t)?uv(l):cv(i.wt,l)}(n,t)}function dv(n,t,e){return n instanceof jh?bk(n,t):n instanceof Gc?fS(n,t):e}function yk(n,t){return n instanceof Gh?_w(e=t)||(i=e)&&"doubleValue"in i?t:{integerValue:0}:null;var i,e}class am extends Hh{}class jh extends Hh{constructor(t){super(),this.elements=t}}function bk(n,t){const e=mS(t);for(const i of n.elements)e.some(r=>rl(r,i))||e.push(i);return{arrayValue:{values:e}}}class Gc extends Hh{constructor(t){super(),this.elements=t}}function fS(n,t){let e=mS(t);for(const i of n.elements)e=e.filter(r=>!rl(r,i));return{arrayValue:{values:e}}}class Gh extends Hh{constructor(t,e){super(),this.wt=t,this._t=e}}function pS(n){return _i(n.integerValue||n.doubleValue)}function mS(n){return td(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class zh{constructor(t,e){this.field=t,this.transform=e}}class _S{constructor(t,e){this.version=t,this.transformResults=e}}class Di{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Di}static exists(t){return new Di(void 0,t)}static updateTime(t){return new Di(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function hv(n,t){return void 0!==n.updateTime?t.isFoundDocument()&&t.version.isEqual(n.updateTime):void 0===n.exists||n.exists===t.isFoundDocument()}class lm{}function fv(n,t){if(!n.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return n.isNoDocument()?new Wh(n.key,Di.none()):new qh(n.key,n.data,Di.none());{const e=n.data,i=Gr.empty();let r=new Yn(qi.comparator);for(let s of t.fields)if(!r.has(s)){let l=e.field(s);null===l&&s.length>1&&(s=s.popLast(),l=e.field(s)),null===l?i.delete(s):i.set(s,l),r=r.add(s)}return new zc(n.key,i,new Ls(r.toArray()),Di.none())}}function YN(n,t,e){n instanceof qh?function(i,r,s){const l=i.value.clone(),d=Ck(i.fieldTransforms,r,s.transformResults);l.setAll(d),r.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(n,t,e):n instanceof zc?function(i,r,s){if(!hv(i.precondition,r))return void r.convertToUnknownDocument(s.version);const l=Ck(i.fieldTransforms,r,s.transformResults),d=r.data;d.setAll(wk(i)),d.setAll(l),r.convertToFoundDocument(s.version,d).setHasCommittedMutations()}(n,t,e):t.convertToNoDocument(e.version).setHasCommittedMutations()}function $h(n,t,e,i){return n instanceof qh?function(r,s,l,d){if(!hv(r.precondition,s))return l;const p=r.value.clone(),_=yS(r.fieldTransforms,d,s);return p.setAll(_),s.convertToFoundDocument(s.version,p).setHasLocalMutations(),null}(n,t,e,i):n instanceof zc?function(r,s,l,d){if(!hv(r.precondition,s))return l;const p=yS(r.fieldTransforms,d,s),_=s.data;return _.setAll(wk(r)),_.setAll(p),s.convertToFoundDocument(s.version,_).setHasLocalMutations(),null===l?null:l.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(b=>b.field))}(n,t,e,i):(l=e,hv(n.precondition,s=t)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):l);var s,l}function Iw(n,t){let e=null;for(const i of n.fieldTransforms){const r=t.data.field(i.field),s=yk(i.transform,r||null);null!=s&&(null===e&&(e=Gr.empty()),e.set(i.field,s))}return e||null}function vS(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&(i=t.fieldTransforms,!!(void 0===(e=n.fieldTransforms)&&void 0===i||e&&i&&Lc(e,i,(r,s)=>function gS(n,t){return n.field.isEqual(t.field)&&(i=t.transform,(e=n.transform)instanceof jh&&i instanceof jh||e instanceof Gc&&i instanceof Gc?Lc(e.elements,i.elements,rl):e instanceof Gh&&i instanceof Gh?rl(e._t,i._t):e instanceof am&&i instanceof am);var e,i}(r,s))))&&(0===n.type?n.value.isEqual(t.value):1!==n.type||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask));var e,i}class qh extends lm{constructor(t,e,i,r=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class zc extends lm{constructor(t,e,i,r,s=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function wk(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const i=n.data.field(e);t.set(e,i)}}),t}function Ck(n,t,e){const i=new Map;Pt(n.length===e.length);for(let r=0;r<e.length;r++){const s=n[r],l=s.transform,d=t.data.field(s.field);i.set(s.field,dv(l,d,e[r]))}return i}function yS(n,t,e){const i=new Map;for(const r of n){const s=r.transform,l=e.data.field(r.field);i.set(r.field,Tw(s,l,t))}return i}class Wh extends lm{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class bS extends lm{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class ZN{constructor(t){this.count=t}}var dr,En;function Ek(n){switch(n){default:return gt();case ve.CANCELLED:case ve.UNKNOWN:case ve.DEADLINE_EXCEEDED:case ve.RESOURCE_EXHAUSTED:case ve.INTERNAL:case ve.UNAVAILABLE:case ve.UNAUTHENTICATED:return!1;case ve.INVALID_ARGUMENT:case ve.NOT_FOUND:case ve.ALREADY_EXISTS:case ve.PERMISSION_DENIED:case ve.FAILED_PRECONDITION:case ve.ABORTED:case ve.OUT_OF_RANGE:case ve.UNIMPLEMENTED:case ve.DATA_LOSS:return!0}}function wS(n){if(void 0===n)return $i("GRPC error has no .code"),ve.UNKNOWN;switch(n){case dr.OK:return ve.OK;case dr.CANCELLED:return ve.CANCELLED;case dr.UNKNOWN:return ve.UNKNOWN;case dr.DEADLINE_EXCEEDED:return ve.DEADLINE_EXCEEDED;case dr.RESOURCE_EXHAUSTED:return ve.RESOURCE_EXHAUSTED;case dr.INTERNAL:return ve.INTERNAL;case dr.UNAVAILABLE:return ve.UNAVAILABLE;case dr.UNAUTHENTICATED:return ve.UNAUTHENTICATED;case dr.INVALID_ARGUMENT:return ve.INVALID_ARGUMENT;case dr.NOT_FOUND:return ve.NOT_FOUND;case dr.ALREADY_EXISTS:return ve.ALREADY_EXISTS;case dr.PERMISSION_DENIED:return ve.PERMISSION_DENIED;case dr.FAILED_PRECONDITION:return ve.FAILED_PRECONDITION;case dr.ABORTED:return ve.ABORTED;case dr.OUT_OF_RANGE:return ve.OUT_OF_RANGE;case dr.UNIMPLEMENTED:return ve.UNIMPLEMENTED;case dr.DATA_LOSS:return ve.DATA_LOSS;default:return gt()}}(En=dr||(dr={}))[En.OK=0]="OK",En[En.CANCELLED=1]="CANCELLED",En[En.UNKNOWN=2]="UNKNOWN",En[En.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",En[En.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",En[En.NOT_FOUND=5]="NOT_FOUND",En[En.ALREADY_EXISTS=6]="ALREADY_EXISTS",En[En.PERMISSION_DENIED=7]="PERMISSION_DENIED",En[En.UNAUTHENTICATED=16]="UNAUTHENTICATED",En[En.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",En[En.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",En[En.ABORTED=10]="ABORTED",En[En.OUT_OF_RANGE=11]="OUT_OF_RANGE",En[En.UNIMPLEMENTED=12]="UNIMPLEMENTED",En[En.INTERNAL=13]="INTERNAL",En[En.UNAVAILABLE=14]="UNAVAILABLE",En[En.DATA_LOSS=15]="DATA_LOSS";class rd{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(void 0!==i)for(const[r,s]of i)if(this.equalsFn(r,t))return s}has(t){return void 0!==this.get(t)}set(t,e){const i=this.mapKeyFn(t),r=this.inner[i];if(void 0===r)return this.inner[i]=[[t,e]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(void 0===i)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return 1===i.length?delete this.inner[e]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){Lh(this.inner,(e,i)=>{for(const[r,s]of i)t(r,s)})}isEmpty(){return ok(this.inner)}size(){return this.innerSize}}const KN=new Wi(nt.comparator);function vo(){return KN}const Dk=new Wi(nt.comparator);function o(...n){let t=Dk;for(const e of n)t=t.insert(e.key,e);return t}function a(n){let t=Dk;return n.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function u(){return f()}function h(){return f()}function f(){return new rd(n=>n.toString(),(n,t)=>n.isEqual(t))}const m=new Wi(nt.comparator),y=new Yn(nt.comparator);function C(...n){let t=y;for(const e of n)t=t.add(e);return t}const x=new Yn(Qt);function T(){return x}class R{constructor(t,e,i,r,s){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,e){const i=new Map;return i.set(t,V.createSynthesizedTargetChangeForCurrentChange(t,e)),new R(At.min(),i,T(),vo(),C())}}class V{constructor(t,e,i,r,s){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,e){return new V(tr.EMPTY_BYTE_STRING,e,C(),C(),C())}}class q{constructor(t,e,i,r){this.gt=t,this.removedTargetIds=e,this.key=i,this.yt=r}}class ne{constructor(t,e){this.targetId=t,this.It=e}}class Te{constructor(t,e,i=tr.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=r}}class $e{constructor(){this.Tt=0,this.Et=Pe(),this.At=tr.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return 0!==this.Tt}get vt(){return this.bt}Vt(t){t.approximateByteSize()>0&&(this.bt=!0,this.At=t)}St(){let t=C(),e=C(),i=C();return this.Et.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:i=i.add(r);break;default:gt()}}),new V(this.At,this.Rt,t,e,i)}Dt(){this.bt=!1,this.Et=Pe()}Ct(t,e){this.bt=!0,this.Et=this.Et.insert(t,e)}xt(t){this.bt=!0,this.Et=this.Et.remove(t)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Ot(){this.bt=!0,this.Rt=!0}}class it{constructor(t){this.Mt=t,this.Ft=new Map,this.$t=vo(),this.Bt=ft(),this.Lt=new Yn(Qt)}Ut(t){for(const e of t.gt)t.yt&&t.yt.isFoundDocument()?this.qt(e,t.yt):this.Kt(e,t.key,t.yt);for(const e of t.removedTargetIds)this.Kt(e,t.key,t.yt)}Gt(t){this.forEachTarget(t,e=>{const i=this.Qt(e);switch(t.state){case 0:this.jt(e)&&i.Vt(t.resumeToken);break;case 1:i.kt(),i.Pt||i.Dt(),i.Vt(t.resumeToken);break;case 2:i.kt(),i.Pt||this.removeTarget(e);break;case 3:this.jt(e)&&(i.Ot(),i.Vt(t.resumeToken));break;case 4:this.jt(e)&&(this.Wt(e),i.Vt(t.resumeToken));break;default:gt()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Ft.forEach((i,r)=>{this.jt(r)&&e(r)})}zt(t){const e=t.targetId,i=t.It.count,r=this.Ht(e);if(r){const s=r.target;if(lv(s))if(0===i){const l=new nt(s.path);this.Kt(e,l,mn.newNoDocument(l,At.min()))}else Pt(1===i);else this.Jt(e)!==i&&(this.Wt(e),this.Lt=this.Lt.add(e))}}Yt(t){const e=new Map;this.Ft.forEach((s,l)=>{const d=this.Ht(l);if(d){if(s.current&&lv(d.target)){const p=new nt(d.target.path);null!==this.$t.get(p)||this.Xt(l,p)||this.Kt(l,p,mn.newNoDocument(p,t))}s.vt&&(e.set(l,s.St()),s.Dt())}});let i=C();this.Bt.forEach((s,l)=>{let d=!0;l.forEachWhile(p=>{const _=this.Ht(p);return!_||2===_.purpose||(d=!1,!1)}),d&&(i=i.add(s))}),this.$t.forEach((s,l)=>l.setReadTime(t));const r=new R(t,e,this.Lt,this.$t,i);return this.$t=vo(),this.Bt=ft(),this.Lt=new Yn(Qt),r}qt(t,e){if(!this.jt(t))return;const i=this.Xt(t,e.key)?2:0;this.Qt(t).Ct(e.key,i),this.$t=this.$t.insert(e.key,e),this.Bt=this.Bt.insert(e.key,this.Zt(e.key).add(t))}Kt(t,e,i){if(!this.jt(t))return;const r=this.Qt(t);this.Xt(t,e)?r.Ct(e,1):r.xt(e),this.Bt=this.Bt.insert(e,this.Zt(e).delete(t)),i&&(this.$t=this.$t.insert(e,i))}removeTarget(t){this.Ft.delete(t)}Jt(t){const e=this.Qt(t).St();return this.Mt.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Nt(t){this.Qt(t).Nt()}Qt(t){let e=this.Ft.get(t);return e||(e=new $e,this.Ft.set(t,e)),e}Zt(t){let e=this.Bt.get(t);return e||(e=new Yn(Qt),this.Bt=this.Bt.insert(t,e)),e}jt(t){const e=null!==this.Ht(t);return e||He("WatchChangeAggregator","Detected inactive target",t),e}Ht(t){const e=this.Ft.get(t);return e&&e.Pt?null:this.Mt.te(t)}Wt(t){this.Ft.set(t,new $e),this.Mt.getRemoteKeysForTarget(t).forEach(e=>{this.Kt(t,e,null)})}Xt(t,e){return this.Mt.getRemoteKeysForTarget(t).has(e)}}function ft(){return new Wi(nt.comparator)}function Pe(){return new Wi(nt.comparator)}const It={asc:"ASCENDING",desc:"DESCENDING"},un={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Fn{constructor(t,e){this.databaseId=t,this.dt=e}}function zr(n,t){return n.dt?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function $c(n,t){return n.dt?t.toBase64():t.toUint8Array()}function Aw(n,t){return zr(n,t.toTimestamp())}function nr(n){return Pt(!!n),At.fromTimestamp(function(t){const e=Ku(t);return new di(e.seconds,e.nanos)}(n))}function cm(n,t){return(e=n,new Cn(["projects",e.projectId,"databases",e.database])).child("documents").child(t).canonicalString();var e}function pv(n){const t=Cn.fromString(n);return Pt(rF(t)),t}function sd(n,t){return cm(n.databaseId,t.path)}function Yo(n,t){const e=pv(t);if(e.get(1)!==n.databaseId.projectId)throw new Be(ve.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new Be(ve.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new nt(QN(e))}function um(n,t){return cm(n.databaseId,t)}function mv(n){const t=pv(n);return 4===t.length?Cn.emptyPath():QN(t)}function od(n){return new Cn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function QN(n){return Pt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function XN(n,t,e){return{name:sd(n,t),fields:e.value.mapValue.fields}}function JN(n,t,e){const i=Yo(n,t.name),r=nr(t.updateTime),s=new Gr({mapValue:{fields:t.fields}}),l=mn.newFoundDocument(i,r,s);return e&&l.setHasCommittedMutations(),e?l.setHasCommittedMutations():l}function kw(n,t){let e;if(t instanceof qh)e={update:XN(n,t.key,t.value)};else if(t instanceof Wh)e={delete:sd(n,t.key)};else if(t instanceof zc)e={update:XN(n,t.key,t.data),updateMask:fz(t.fieldMask)};else{if(!(t instanceof bS))return gt();e={verify:sd(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(r,s){const l=s.transform;if(l instanceof am)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof jh)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Gc)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Gh)return{fieldPath:s.field.canonicalString(),increment:l._t};throw gt()}(0,i))),t.precondition.isNone||(e.currentDocument=void 0!==(r=t.precondition).updateTime?{updateTime:Aw(n,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:gt()),e;var r}function xk(n,t){const e=t.currentDocument?void 0!==(r=t.currentDocument).updateTime?Di.updateTime(nr(r.updateTime)):void 0!==r.exists?Di.exists(r.exists):Di.none():Di.none(),i=t.updateTransforms?t.updateTransforms.map(r=>function(s,l){let d=null;"setToServerValue"in l?(Pt("REQUEST_TIME"===l.setToServerValue),d=new am):"appendMissingElements"in l?d=new jh(l.appendMissingElements.values||[]):"removeAllFromArray"in l?d=new Gc(l.removeAllFromArray.values||[]):"increment"in l?d=new Gh(s,l.increment):gt();const p=qi.fromServerFormat(l.fieldPath);return new zh(p,d)}(n,r)):[];var r;if(t.update){const r=Yo(n,t.update.name),s=new Gr({mapValue:{fields:t.update.fields}});if(t.updateMask){const l=new Ls((t.updateMask.fieldPaths||[]).map(_=>qi.fromServerFormat(_)));return new zc(r,s,l,e,i)}return new qh(r,s,e,i)}if(t.delete){const r=Yo(n,t.delete);return new Wh(r,e)}if(t.verify){const r=Yo(n,t.verify);return new bS(r,e)}return gt()}function eF(n,t){return{documents:[um(n,t.path)]}}function tF(n,t){const e={structuredQuery:{}},i=t.path;null!==t.collectionGroup?(e.parent=um(n,i),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(e.parent=um(n,i.popLast()),e.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(p){if(0===p.length)return;const _=p.map(b=>function(D){if("=="===D.op){if(tS(D.value))return{unaryFilter:{field:gv(D.field),op:"IS_NAN"}};if(eS(D.value))return{unaryFilter:{field:gv(D.field),op:"IS_NULL"}}}else if("!="===D.op){if(tS(D.value))return{unaryFilter:{field:gv(D.field),op:"IS_NOT_NAN"}};if(eS(D.value))return{unaryFilter:{field:gv(D.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:gv(D.field),op:uz(D.op),value:D.value}}}(b));return 1===_.length?_[0]:{compositeFilter:{op:"AND",filters:_}}}(t.filters);r&&(e.structuredQuery.where=r);const s=function(p){if(0!==p.length)return p.map(_=>{return{field:gv((b=_).field),direction:cz(b.dir)};var b})}(t.orderBy);s&&(e.structuredQuery.orderBy=s);const l=(_=t.limit,n.dt||Qu(_)?_:{value:_});var _,d,p;return null!==l&&(e.structuredQuery.limit=l),t.startAt&&(e.structuredQuery.startAt={before:(d=t.startAt).inclusive,values:d.position}),t.endAt&&(e.structuredQuery.endAt={before:!(p=t.endAt).inclusive,values:p.position}),e}function nF(n){let t=mv(n.parent);const e=n.structuredQuery,i=e.from?e.from.length:0;let r=null;if(i>0){Pt(1===i);const b=e.from[0];b.allDescendants?r=b.collectionId:t=t.child(b.collectionId)}let s=[];e.where&&(s=iF(e.where));let l=[];e.orderBy&&(l=e.orderBy.map(b=>{return new id(_v((D=b).field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction));var D}));let d=null;e.limit&&(d=function(b){let D;return D="object"==typeof b?b.value:b,Qu(D)?null:D}(e.limit));let p=null;var b;e.startAt&&(p=new ec((b=e.startAt).values||[],!!b.before));let _=null;return e.endAt&&(_=function(b){return new ec(b.values||[],!b.before)}(e.endAt)),Ew(t,r,l,s,d,"F",p,_)}function iF(n){return n?void 0!==n.unaryFilter?[hz(n)]:void 0!==n.fieldFilter?[dz(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(t=>iF(t)).reduce((t,e)=>t.concat(e)):gt():[]}function cz(n){return It[n]}function uz(n){return un[n]}function gv(n){return{fieldPath:n.canonicalString()}}function _v(n){return qi.fromServerFormat(n.fieldPath)}function dz(n){return Rr.create(_v(n.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return gt()}}(n.fieldFilter.op),n.fieldFilter.value)}function hz(n){switch(n.unaryFilter.op){case"IS_NAN":const t=_v(n.unaryFilter.field);return Rr.create(t,"==",{doubleValue:NaN});case"IS_NULL":const e=_v(n.unaryFilter.field);return Rr.create(e,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=_v(n.unaryFilter.field);return Rr.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=_v(n.unaryFilter.field);return Rr.create(r,"!=",{nullValue:"NULL_VALUE"});default:return gt()}}function fz(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function rF(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function yo(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=sF(t)),t=pz(n.get(e),t);return sF(t)}function pz(n,t){let e=t;const i=n.length;for(let r=0;r<i;r++){const s=n.charAt(r);switch(s){case"\0":e+="\x01\x10";break;case"\x01":e+="\x01\x11";break;default:e+=s}}return e}function sF(n){return n+"\x01\x01"}function qc(n){const t=n.length;if(Pt(t>=2),2===t)return Pt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Cn.emptyPath();const e=t-2,i=[];let r="";for(let s=0;s<t;){const l=n.indexOf("\x01",s);switch((l<0||l>e)&&gt(),n.charAt(l+1)){case"\x01":const d=n.substring(s,l);let p;0===r.length?p=d:(r+=d,p=r,r=""),i.push(p);break;case"\x10":r+=n.substring(s,l),r+="\0";break;case"\x11":r+=n.substring(s,l+1);break;default:gt()}s=l+2}return new Cn(i)}const oF=["userId","batchId"];function CS(n,t){return[n,yo(t)]}function aF(n,t,e){return[n,yo(t),e]}const mz={},gz=["prefixPath","collectionGroup","readTime","documentId"],_z=["prefixPath","collectionGroup","documentId"],vz=["collectionGroup","readTime","prefixPath","documentId"],yz=["canonicalId","targetId"],bz=["targetId","path"],wz=["path","targetId"],Cz=["collectionId","parent"],Ez=["indexId","uid"],Dz=["uid","sequenceNumber"],xz=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Sz=["indexId","uid","orderedDocumentKey"],Mz=["userId","collectionPath","documentId"],Tz=["userId","collectionPath","largestBatchId"],Iz=["userId","collectionGroup","largestBatchId"],lF=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Az=[...lF,"documentOverlays"],cF=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],uF=cF,kz=[...uF,"indexConfiguration","indexState","indexEntries"];class Sk extends Wx{constructor(t,e){super(),this.ee=t,this.currentSequenceNumber=e}}function ss(n,t){const e=ot(n);return Wo.N(e.ee,t)}class Mk{constructor(t,e,i,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(t.key)&&YN(s,t,i[r])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=$h(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=$h(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=h();return this.mutations.forEach(r=>{const s=t.get(r.key),l=s.overlayedDocument;let d=this.applyToLocalView(l,s.mutatedFields);d=e.has(r.key)?null:d;const p=fv(l,d);null!==p&&i.set(r.key,p),l.isValidDocument()||l.convertToNoDocument(At.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),C())}isEqual(t){return this.batchId===t.batchId&&Lc(this.mutations,t.mutations,(e,i)=>vS(e,i))&&Lc(this.baseMutations,t.baseMutations,(e,i)=>vS(e,i))}}class Tk{constructor(t,e,i,r){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=r}static from(t,e,i){Pt(t.mutations.length===i.length);let r=m;const s=t.mutations;for(let l=0;l<s.length;l++)r=r.insert(s[l].key,i[l].version);return new Tk(t,e,i,r)}}class Ik{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Yh{constructor(t,e,i,r,s=At.min(),l=At.min(),d=tr.EMPTY_BYTE_STRING){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=d}withSequenceNumber(t){return new Yh(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(t,e){return new Yh(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)}withLastLimboFreeSnapshotVersion(t){return new Yh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}class dF{constructor(t){this.ne=t}}function hF(n,t){const e=t.key,i={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:ES(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())i.document={name:sd(r=n.ne,(s=t).key),fields:s.data.value.mapValue.fields,updateTime:zr(r,s.version.toTimestamp())};else if(t.isNoDocument())i.noDocument={path:e.path.toArray(),readTime:dm(t.version)};else{if(!t.isUnknownDocument())return gt();i.unknownDocument={path:e.path.toArray(),version:dm(t.version)}}var r,s;return i}function ES(n){const t=n.toTimestamp();return[t.seconds,t.nanoseconds]}function dm(n){const t=n.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function hm(n){const t=new di(n.seconds,n.nanoseconds);return At.fromTimestamp(t)}function fm(n,t){const e=(t.baseMutations||[]).map(s=>xk(n.ne,s));for(let s=0;s<t.mutations.length-1;++s){const l=t.mutations[s];s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform&&(l.updateTransforms=t.mutations[s+1].transform.fieldTransforms,t.mutations.splice(s+1,1),++s)}const i=t.mutations.map(s=>xk(n.ne,s)),r=di.fromMillis(t.localWriteTimeMs);return new Mk(t.batchId,r,e,i)}function Rw(n){const t=hm(n.readTime),e=void 0!==n.lastLimboFreeSnapshotVersion?hm(n.lastLimboFreeSnapshotVersion):At.min();let i;var r;return void 0!==n.query.documents?(Pt(1===(r=n.query).documents.length),i=ba(Uh(mv(r.documents[0])))):i=ba(nF(n.query)),new Yh(i,n.targetId,0,n.lastListenSequenceNumber,t,e,tr.fromBase64String(n.resumeToken))}function fF(n,t){const e=dm(t.snapshotVersion),i=dm(t.lastLimboFreeSnapshotVersion);let r;r=lv(t.target)?eF(n.ne,t.target):tF(n.ne,t.target);const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:nd(t.target),readTime:e,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function Ak(n){const t=nF({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?vk(t,t.limit,"L"):t}function kk(n,t){return new Ik(t.largestBatchId,xk(n.ne,t.overlayMutation))}function pF(n,t){const e=t.path.lastSegment();return[n,yo(t.path.popLast()),e]}function mF(n,t,e,i){return{indexId:n,uid:t.uid||"",sequenceNumber:e,readTime:dm(i.readTime),documentKey:yo(i.documentKey.path),largestBatchId:i.largestBatchId}}class Oz{getBundleMetadata(t,e){return gF(t).get(e).next(i=>{if(i)return{id:(r=i).bundleId,createTime:hm(r.createTime),version:r.version};var r})}saveBundleMetadata(t,e){return gF(t).put({bundleId:(i=e).id,createTime:dm(nr(i.createTime)),version:i.version});var i}getNamedQuery(t,e){return _F(t).get(e).next(i=>{if(i)return{name:(r=i).name,query:Ak(r.bundledQuery),readTime:hm(r.readTime)};var r})}saveNamedQuery(t,e){return _F(t).put({name:(i=e).name,readTime:dm(nr(i.readTime)),bundledQuery:i.bundledQuery});var i}}function gF(n){return ss(n,"bundles")}function _F(n){return ss(n,"namedQueries")}class DS{constructor(t,e){this.wt=t,this.userId=e}static se(t,e){return new DS(t,e.uid||"")}getOverlay(t,e){return Ow(t).get(pF(this.userId,e)).next(i=>i?kk(this.wt,i):null)}getOverlays(t,e){const i=u();return ge.forEach(e,r=>this.getOverlay(t,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(t,e,i){const r=[];return i.forEach((s,l)=>{const d=new Ik(e,l);r.push(this.ie(t,d))}),ge.waitFor(r)}removeOverlaysForBatchId(t,e,i){const r=new Set;e.forEach(l=>r.add(yo(l.getCollectionPath())));const s=[];return r.forEach(l=>{const d=IDBKeyRange.bound([this.userId,l,i],[this.userId,l,i+1],!1,!0);s.push(Ow(t).W("collectionPathOverlayIndex",d))}),ge.waitFor(s)}getOverlaysForCollection(t,e,i){const r=u(),s=yo(e),l=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Ow(t).K("collectionPathOverlayIndex",l).next(d=>{for(const p of d){const _=kk(this.wt,p);r.set(_.getKey(),_)}return r})}getOverlaysForCollectionGroup(t,e,i,r){const s=u();let l;const d=IDBKeyRange.bound([this.userId,e,i],[this.userId,e,Number.POSITIVE_INFINITY],!0);return Ow(t).J({index:"collectionGroupOverlayIndex",range:d},(p,_,b)=>{const D=kk(this.wt,_);s.size()<r||D.largestBatchId===l?(s.set(D.getKey(),D),l=D.largestBatchId):b.done()}).next(()=>s)}ie(t,e){return Ow(t).put(function(i,r,s){const[l,d,p]=pF(r,s.mutation.key);return{userId:r,collectionPath:d,documentId:p,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:kw(i.ne,s.mutation)}}(this.wt,this.userId,e))}}function Ow(n){return ss(n,"documentOverlays")}class pm{constructor(){}re(t,e){this.oe(t,e),e.ue()}oe(t,e){if("nullValue"in t)this.ce(e,5);else if("booleanValue"in t)this.ce(e,10),e.ae(t.booleanValue?1:0);else if("integerValue"in t)this.ce(e,15),e.ae(_i(t.integerValue));else if("doubleValue"in t){const i=_i(t.doubleValue);isNaN(i)?this.ce(e,13):(this.ce(e,15),em(i)?e.ae(0):e.ae(i))}else if("timestampValue"in t){const i=t.timestampValue;this.ce(e,20),"string"==typeof i?e.he(i):(e.he(`${i.seconds||""}`),e.ae(i.nanos||0))}else if("stringValue"in t)this.le(t.stringValue,e),this.fe(e);else if("bytesValue"in t)this.ce(e,30),e.de(Vc(t.bytesValue)),this.fe(e);else if("referenceValue"in t)this._e(t.referenceValue,e);else if("geoPointValue"in t){const i=t.geoPointValue;this.ce(e,45),e.ae(i.latitude||0),e.ae(i.longitude||0)}else"mapValue"in t?vw(t)?this.ce(e,Number.MAX_SAFE_INTEGER):(this.we(t.mapValue,e),this.fe(e)):"arrayValue"in t?(this.me(t.arrayValue,e),this.fe(e)):gt()}le(t,e){this.ce(e,25),this.ge(t,e)}ge(t,e){e.he(t)}we(t,e){const i=t.fields||{};this.ce(e,55);for(const r of Object.keys(i))this.le(r,e),this.oe(i[r],e)}me(t,e){const i=t.values||[];this.ce(e,50);for(const r of i)this.oe(r,e)}_e(t,e){this.ce(e,37),nt.fromName(t).path.forEach(i=>{this.ce(e,60),this.ge(i,e)})}ce(t,e){t.ae(e)}fe(t){t.ae(2)}}function Pz(n){if(0===n)return 8;let t=0;return n>>4==0&&(t+=4,n<<=4),n>>6==0&&(t+=2,n<<=2),n>>7==0&&(t+=1),t}function vF(n){const t=64-function(e){let i=0;for(let r=0;r<8;++r){const s=Pz(255&e[r]);if(i+=s,8!==s)break}return i}(n);return Math.ceil(t/8)}pm.ye=new pm;class Nz{constructor(){this.buffer=new Uint8Array(1024),this.position=0}pe(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.Ie(i.value),i=e.next();this.Te()}Ee(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.Ae(i.value),i=e.next();this.Re()}be(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.Ie(i);else if(i<2048)this.Ie(960|i>>>6),this.Ie(128|63&i);else if(e<"\ud800"||"\udbff"<e)this.Ie(480|i>>>12),this.Ie(128|63&i>>>6),this.Ie(128|63&i);else{const r=e.codePointAt(0);this.Ie(240|r>>>18),this.Ie(128|63&r>>>12),this.Ie(128|63&r>>>6),this.Ie(128|63&r)}}this.Te()}Pe(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.Ae(i);else if(i<2048)this.Ae(960|i>>>6),this.Ae(128|63&i);else if(e<"\ud800"||"\udbff"<e)this.Ae(480|i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i);else{const r=e.codePointAt(0);this.Ae(240|r>>>18),this.Ae(128|63&r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r)}}this.Re()}ve(t){const e=this.Ve(t),i=vF(e);this.Se(1+i),this.buffer[this.position++]=255&i;for(let r=e.length-i;r<e.length;++r)this.buffer[this.position++]=255&e[r]}De(t){const e=this.Ve(t),i=vF(e);this.Se(1+i),this.buffer[this.position++]=~(255&i);for(let r=e.length-i;r<e.length;++r)this.buffer[this.position++]=~(255&e[r])}Ce(){this.xe(255),this.xe(255)}Ne(){this.ke(255),this.ke(255)}reset(){this.position=0}seed(t){this.Se(t.length),this.buffer.set(t,this.position),this.position+=t.length}Oe(){return this.buffer.slice(0,this.position)}Ve(t){const e=function(r){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,r,!1),new Uint8Array(s.buffer)}(t),i=0!=(128&e[0]);e[0]^=i?255:128;for(let r=1;r<e.length;++r)e[r]^=i?255:0;return e}Ie(t){const e=255&t;0===e?(this.xe(0),this.xe(255)):255===e?(this.xe(255),this.xe(0)):this.xe(e)}Ae(t){const e=255&t;0===e?(this.ke(0),this.ke(255)):255===e?(this.ke(255),this.ke(0)):this.ke(t)}Te(){this.xe(0),this.xe(1)}Re(){this.ke(0),this.ke(1)}xe(t){this.Se(1),this.buffer[this.position++]=t}ke(t){this.Se(1),this.buffer[this.position++]=~t}Se(t){const e=t+this.position;if(e<=this.buffer.length)return;let i=2*this.buffer.length;i<e&&(i=e);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class Fz{constructor(t){this.Me=t}de(t){this.Me.pe(t)}he(t){this.Me.be(t)}ae(t){this.Me.ve(t)}ue(){this.Me.Ce()}}class Lz{constructor(t){this.Me=t}de(t){this.Me.Ee(t)}he(t){this.Me.Pe(t)}ae(t){this.Me.De(t)}ue(){this.Me.Ne()}}class Pw{constructor(){this.Me=new Nz,this.Fe=new Fz(this.Me),this.$e=new Lz(this.Me)}seed(t){this.Me.seed(t)}Be(t){return 0===t?this.Fe:this.$e}Oe(){return this.Me.Oe()}reset(){this.Me.reset()}}class mm{constructor(t,e,i,r){this.indexId=t,this.documentKey=e,this.arrayValue=i,this.directionalValue=r}Le(){const t=this.directionalValue.length,e=0===t||255===this.directionalValue[t-1]?t+1:t,i=new Uint8Array(e);return i.set(this.directionalValue,0),e!==t?i.set([0],this.directionalValue.length):++i[i.length-1],new mm(this.indexId,this.documentKey,this.arrayValue,i)}}function gm(n,t){let e=n.indexId-t.indexId;return 0!==e?e:(e=yF(n.arrayValue,t.arrayValue),0!==e?e:(e=yF(n.directionalValue,t.directionalValue),0!==e?e:nt.comparator(n.documentKey,t.documentKey)))}function yF(n,t){for(let e=0;e<n.length&&e<t.length;++e){const i=n[e]-t[e];if(0!==i)return i}return n.length-t.length}class Bz{constructor(t){this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ue=t.orderBy,this.qe=[];for(const e of t.filters){const i=e;i.ht()?this.Ke=i:this.qe.push(i)}}Ge(t){const e=tv(t);if(void 0!==e&&!this.Qe(e))return!1;const i=Yu(t);let r=0,s=0;for(;r<i.length&&this.Qe(i[r]);++r);if(r===i.length)return!0;if(void 0!==this.Ke){const l=i[r];if(!this.je(this.Ke,l)||!this.We(this.Ue[s++],l))return!1;++r}for(;r<i.length;++r){const l=i[r];if(s>=this.Ue.length||!this.We(this.Ue[s++],l))return!1}return!0}Qe(t){for(const e of this.qe)if(this.je(e,t))return!0;return!1}je(t,e){return!(void 0===t||!t.field.isEqual(e.fieldPath))&&2===e.kind==("array-contains"===t.op||"array-contains-any"===t.op)}We(t,e){return!!t.field.isEqual(e.fieldPath)&&(0===e.kind&&"asc"===t.dir||1===e.kind&&"desc"===t.dir)}}class Vz{constructor(){this.ze=new Rk}addToCollectionParentIndex(t,e){return this.ze.add(e),ge.resolve()}getCollectionParents(t,e){return ge.resolve(this.ze.getEntries(e))}addFieldIndex(t,e){return ge.resolve()}deleteFieldIndex(t,e){return ge.resolve()}getDocumentsMatchingTarget(t,e){return ge.resolve(null)}getIndexType(t,e){return ge.resolve(0)}getFieldIndexes(t,e){return ge.resolve([])}getNextCollectionGroupToUpdate(t){return ge.resolve(null)}getMinOffset(t,e){return ge.resolve(go.min())}getMinOffsetFromCollectionGroup(t,e){return ge.resolve(go.min())}updateCollectionGroup(t,e,i){return ge.resolve()}updateIndexEntries(t,e){return ge.resolve()}}class Rk{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e]||new Yn(Cn.comparator),s=!r.has(i);return this.index[e]=r.add(i),s}has(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e];return r&&r.has(i)}getEntries(t){return(this.index[t]||new Yn(Cn.comparator)).toArray()}}const xS=new Uint8Array(0);class Uz{constructor(t,e){this.user=t,this.databaseId=e,this.He=new Rk,this.Je=new rd(i=>nd(i),(i,r)=>nm(i,r)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.He.has(e)){const i=e.lastSegment(),r=e.popLast();t.addOnCommittedListener(()=>{this.He.add(e)});const s={collectionId:i,parent:yo(r)};return bF(t).put(s)}return ge.resolve()}getCollectionParents(t,e){const i=[],r=IDBKeyRange.bound([e,""],[cw(e),""],!1,!0);return bF(t).K(r).next(s=>{for(const l of s){if(l.collectionId!==e)break;i.push(qc(l.parent))}return i})}addFieldIndex(t,e){const i=SS(t),r={indexId:(l=e).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var l;delete r.indexId;const s=i.add(r);if(e.indexState){const l=Fw(t);return s.next(d=>{l.put(mF(d,this.user,e.indexState.sequenceNumber,e.indexState.offset))})}return s.next()}deleteFieldIndex(t,e){const i=SS(t),r=Fw(t),s=Nw(t);return i.delete(e.indexId).next(()=>r.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}getDocumentsMatchingTarget(t,e){const i=Nw(t);let r=!0;const s=new Map;return ge.forEach(this.Ye(e),l=>this.Xe(t,l).next(d=>{r&&(r=!!d),s.set(l,d)})).next(()=>{if(r){let l=C();const d=[];return ge.forEach(s,(p,_)=>{var b;He("IndexedDbIndexManager",`Using index ${b=p,`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(rt=>`${rt.fieldPath}:${rt.kind}`).join(",")}`} to execute ${nd(e)}`);const D=function(rt,Xe){const Ot=tv(Xe);if(void 0===Ot)return null;for(const Lt of im(rt,Ot.fieldPath))switch(Lt.op){case"array-contains-any":return Lt.value.arrayValue.values||[];case"array-contains":return[Lt.value]}return null}(_,p),I=function(rt,Xe){const Ot=new Map;for(const Lt of Yu(Xe))for(const bn of im(rt,Lt.fieldPath))switch(bn.op){case"==":case"in":Ot.set(Lt.fieldPath.canonicalString(),bn.value);break;case"not-in":case"!=":return Ot.set(Lt.fieldPath.canonicalString(),bn.value),Array.from(Ot.values())}return null}(_,p),P=function(rt,Xe){const Ot=[];let Lt=!0;for(const bn of Yu(Xe)){const hr=0===bn.kind?sS(rt,bn.fieldPath,rt.startAt):dk(rt,bn.fieldPath,rt.startAt);Ot.push(hr.value),Lt&&(Lt=hr.inclusive)}return new ec(Ot,Lt)}(_,p),U=function(rt,Xe){const Ot=[];let Lt=!0;for(const bn of Yu(Xe)){const hr=0===bn.kind?dk(rt,bn.fieldPath,rt.endAt):sS(rt,bn.fieldPath,rt.endAt);Ot.push(hr.value),Lt&&(Lt=hr.inclusive)}return new ec(Ot,Lt)}(_,p),Q=this.Ze(p,_,P),le=this.Ze(p,_,U),Ye=this.tn(p,_,I),et=this.en(p.indexId,D,Q,P.inclusive,le,U.inclusive,Ye);return ge.forEach(et,rt=>i.j(rt,e.limit).next(Xe=>{Xe.forEach(Ot=>{const Lt=nt.fromSegments(Ot.documentKey);l.has(Lt)||(l=l.add(Lt),d.push(Lt))})}))}).next(()=>d)}return ge.resolve(null)})}Ye(t){let e=this.Je.get(t);return e||(e=[t],this.Je.set(t,e),e)}en(t,e,i,r,s,l,d){const p=(null!=e?e.length:1)*Math.max(i.length,s.length),_=p/(null!=e?e.length:1),b=[];for(let D=0;D<p;++D){const I=e?this.nn(e[D/_]):xS,P=this.sn(t,I,i[D%_],r),U=this.rn(t,I,s[D%_],l),Q=d.map(le=>this.sn(t,I,le,!0));b.push(...this.createRange(P,U,Q))}return b}sn(t,e,i,r){const s=new mm(t,nt.empty(),e,i);return r?s:s.Le()}rn(t,e,i,r){const s=new mm(t,nt.empty(),e,i);return r?s.Le():s}Xe(t,e){const i=new Bz(e),r=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,r).next(s=>{let l=null;for(const d of s)i.Ge(d)&&(!l||d.fields.length>l.fields.length)&&(l=d);return l})}getIndexType(t,e){let i=2;return ge.forEach(this.Ye(e),r=>this.Xe(t,r).next(s=>{s?0!==i&&s.fields.length<function(l){let d=new Yn(qi.comparator),p=!1;for(const _ of l.filters){const b=_;b.field.isKeyField()||("array-contains"===b.op||"array-contains-any"===b.op?p=!0:d=d.add(b.field))}for(const _ of l.orderBy)_.field.isKeyField()||(d=d.add(_.field));return d.size+(p?1:0)}(r)&&(i=1):i=0})).next(()=>i)}on(t,e){const i=new Pw;for(const r of Yu(t)){const s=e.data.field(r.fieldPath);if(null==s)return null;const l=i.Be(r.kind);pm.ye.re(s,l)}return i.Oe()}nn(t){const e=new Pw;return pm.ye.re(t,e.Be(0)),e.Oe()}un(t,e){const i=new Pw;return pm.ye.re(jr(this.databaseId,e),i.Be(function(r){const s=Yu(r);return 0===s.length?0:s[s.length-1].kind}(t))),i.Oe()}tn(t,e,i){if(null===i)return[];let r=[];r.push(new Pw);let s=0;for(const l of Yu(t)){const d=i[s++];for(const p of r)if(this.cn(e,l.fieldPath)&&td(d))r=this.an(r,l,d);else{const _=p.Be(l.kind);pm.ye.re(d,_)}}return this.hn(r)}Ze(t,e,i){return this.tn(t,e,i.position)}hn(t){const e=[];for(let i=0;i<t.length;++i)e[i]=t[i].Oe();return e}an(t,e,i){const r=[...t],s=[];for(const l of i.arrayValue.values||[])for(const d of r){const p=new Pw;p.seed(d.Oe()),pm.ye.re(l,p.Be(e.kind)),s.push(p)}return s}cn(t,e){return!!t.filters.find(i=>i instanceof Rr&&i.field.isEqual(e)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(t,e){const i=SS(t),r=Fw(t);return(e?i.K("collectionGroupIndex",IDBKeyRange.bound(e,e)):i.K()).next(s=>{const l=[];return ge.forEach(s,d=>r.get([d.indexId,this.uid]).next(p=>{l.push(function(_,b){const D=b?new Zu(b.sequenceNumber,new go(hm(b.readTime),new nt(qc(b.documentKey)),b.largestBatchId)):Zu.empty(),I=_.fields.map(([P,U])=>new Nh(qi.fromServerFormat(P),U));return new Wu(_.indexId,_.collectionGroup,I,D)}(d,p))})).next(()=>l)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>0===e.length?null:(e.sort((i,r)=>{const s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return 0!==s?s:Qt(i.collectionGroup,r.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,i){const r=SS(t),s=Fw(t);return this.ln(t).next(l=>r.K("collectionGroupIndex",IDBKeyRange.bound(e,e)).next(d=>ge.forEach(d,p=>s.put(mF(p.indexId,this.user,l,i)))))}updateIndexEntries(t,e){const i=new Map;return ge.forEach(e,(r,s)=>{const l=i.get(r.collectionGroup);return(l?ge.resolve(l):this.getFieldIndexes(t,r.collectionGroup)).next(d=>(i.set(r.collectionGroup,d),ge.forEach(d,p=>this.fn(t,r,p).next(_=>{const b=this.dn(s,p);return _.isEqual(b)?ge.resolve():this._n(t,s,p,_,b)}))))})}wn(t,e,i,r){return Nw(t).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.un(i,e.key),documentKey:e.key.path.toArray()})}mn(t,e,i,r){return Nw(t).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.un(i,e.key),e.key.path.toArray()])}fn(t,e,i){const r=Nw(t);let s=new Yn(gm);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.un(i,e)])},(l,d)=>{s=s.add(new mm(i.indexId,e,d.arrayValue,d.directionalValue))}).next(()=>s)}dn(t,e){let i=new Yn(gm);const r=this.on(e,t);if(null==r)return i;const s=tv(e);if(null!=s){const l=t.data.field(s.fieldPath);if(td(l))for(const d of l.arrayValue.values||[])i=i.add(new mm(e.indexId,t.key,this.nn(d),r))}else i=i.add(new mm(e.indexId,t.key,xS,r));return i}_n(t,e,i,r,s){He("IndexedDbIndexManager","Updating index entries for document '%s'",e.key);const l=[];return function(d,p,_,b,D){const I=d.getIterator(),P=p.getIterator();let U=Jp(I),Q=Jp(P);for(;U||Q;){let le=!1,Ye=!1;if(U&&Q){const et=_(U,Q);et<0?Ye=!0:et>0&&(le=!0)}else null!=U?Ye=!0:le=!0;le?(b(Q),Q=Jp(P)):Ye?(D(U),U=Jp(I)):(U=Jp(I),Q=Jp(P))}}(r,s,gm,d=>{l.push(this.wn(t,e,i,d))},d=>{l.push(this.mn(t,e,i,d))}),ge.waitFor(l)}ln(t){let e=1;return Fw(t).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),e=r.sequenceNumber+1}).next(()=>e)}createRange(t,e,i){i=i.sort((l,d)=>gm(l,d)).filter((l,d,p)=>!d||0!==gm(l,p[d-1]));const r=[];r.push(t);for(const l of i){const d=gm(l,t),p=gm(l,e);if(0===d)r[0]=t.Le();else if(d>0&&p<0)r.push(l),r.push(l.Le());else if(p>0)break}r.push(e);const s=[];for(let l=0;l<r.length;l+=2)s.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,xS,[]],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,xS,[]]));return s}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(wF)}getMinOffset(t,e){return ge.mapArray(this.Ye(e),i=>this.Xe(t,i).next(r=>r||gt())).next(wF)}}function bF(n){return ss(n,"collectionParents")}function Nw(n){return ss(n,"indexEntries")}function SS(n){return ss(n,"indexConfiguration")}function Fw(n){return ss(n,"indexState")}function wF(n){Pt(0!==n.length);let t=n[0].indexState.offset,e=t.largestBatchId;for(let i=1;i<n.length;i++){const r=n[i].indexState.offset;nv(r,t)<0&&(t=r),e<r.largestBatchId&&(e=r.largestBatchId)}return new go(t.readTime,t.documentKey,e)}const CF={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Zo{constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}static withCacheSize(t){return new Zo(t,Zo.DEFAULT_COLLECTION_PERCENTILE,Zo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function EF(n,t,e){const i=n.store("mutations"),r=n.store("documentMutations"),s=[],l=IDBKeyRange.only(e.batchId);let d=0;const p=i.J({range:l},(b,D,I)=>(d++,I.delete()));s.push(p.next(()=>{Pt(1===d)}));const _=[];for(const b of e.mutations){const D=aF(t,b.key.path,e.batchId);s.push(r.delete(D)),_.push(b.key)}return ge.waitFor(s).next(()=>_)}function MS(n){if(!n)return 0;let t;if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw gt();t=n.noDocument}return JSON.stringify(t).length}Zo.DEFAULT_COLLECTION_PERCENTILE=10,Zo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Zo.DEFAULT=new Zo(41943040,Zo.DEFAULT_COLLECTION_PERCENTILE,Zo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Zo.DISABLED=new Zo(-1,0,0);class TS{constructor(t,e,i,r){this.userId=t,this.wt=e,this.indexManager=i,this.referenceDelegate=r,this.gn={}}static se(t,e,i,r){Pt(""!==t.uid);const s=t.isAuthenticated()?t.uid:"";return new TS(s,e,i,r)}checkEmpty(t){let e=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Zh(t).J({index:"userMutationsIndex",range:i},(r,s,l)=>{e=!1,l.done()}).next(()=>e)}addMutationBatch(t,e,i,r){const s=vv(t),l=Zh(t);return l.add({}).next(d=>{Pt("number"==typeof d);const p=new Mk(d,e,i,r),_=function(I,P,U){const Q=U.baseMutations.map(Ye=>kw(I.ne,Ye)),le=U.mutations.map(Ye=>kw(I.ne,Ye));return{userId:P,batchId:U.batchId,localWriteTimeMs:U.localWriteTime.toMillis(),baseMutations:Q,mutations:le}}(this.wt,this.userId,p),b=[];let D=new Yn((I,P)=>Qt(I.canonicalString(),P.canonicalString()));for(const I of r){const P=aF(this.userId,I.key.path,d);D=D.add(I.key.path.popLast()),b.push(l.put(_)),b.push(s.put(P,mz))}return D.forEach(I=>{b.push(this.indexManager.addToCollectionParentIndex(t,I))}),t.addOnCommittedListener(()=>{this.gn[d]=p.keys()}),ge.waitFor(b).next(()=>p)})}lookupMutationBatch(t,e){return Zh(t).get(e).next(i=>i?(Pt(i.userId===this.userId),fm(this.wt,i)):null)}yn(t,e){return this.gn[e]?ge.resolve(this.gn[e]):this.lookupMutationBatch(t,e).next(i=>{if(i){const r=i.keys();return this.gn[e]=r,r}return null})}getNextMutationBatchAfterBatchId(t,e){const i=e+1,r=IDBKeyRange.lowerBound([this.userId,i]);let s=null;return Zh(t).J({index:"userMutationsIndex",range:r},(l,d,p)=>{d.userId===this.userId&&(Pt(d.batchId>=i),s=fm(this.wt,d)),p.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return Zh(t).J({index:"userMutationsIndex",range:e,reverse:!0},(r,s,l)=>{i=s.batchId,l.done()}).next(()=>i)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Zh(t).K("userMutationsIndex",e).next(i=>i.map(r=>fm(this.wt,r)))}getAllMutationBatchesAffectingDocumentKey(t,e){const i=CS(this.userId,e.path),r=IDBKeyRange.lowerBound(i),s=[];return vv(t).J({range:r},(l,d,p)=>{const[_,b,D]=l,I=qc(b);if(_===this.userId&&e.path.isEqual(I))return Zh(t).get(D).next(P=>{if(!P)throw gt();Pt(P.userId===this.userId),s.push(fm(this.wt,P))});p.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new Yn(Qt);const r=[];return e.forEach(s=>{const l=CS(this.userId,s.path),d=IDBKeyRange.lowerBound(l),p=vv(t).J({range:d},(_,b,D)=>{const[I,P,U]=_,Q=qc(P);I===this.userId&&s.path.isEqual(Q)?i=i.add(U):D.done()});r.push(p)}),ge.waitFor(r).next(()=>this.pn(t,i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1,s=CS(this.userId,i),l=IDBKeyRange.lowerBound(s);let d=new Yn(Qt);return vv(t).J({range:l},(p,_,b)=>{const[D,I,P]=p,U=qc(I);D===this.userId&&i.isPrefixOf(U)?U.length===r&&(d=d.add(P)):b.done()}).next(()=>this.pn(t,d))}pn(t,e){const i=[],r=[];return e.forEach(s=>{r.push(Zh(t).get(s).next(l=>{if(null===l)throw gt();Pt(l.userId===this.userId),i.push(fm(this.wt,l))}))}),ge.waitFor(r).next(()=>i)}removeMutationBatch(t,e){return EF(t.ee,this.userId,e).next(i=>(t.addOnCommittedListener(()=>{this.In(e.batchId)}),ge.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(t,r))))}In(t){delete this.gn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return ge.resolve();const i=IDBKeyRange.lowerBound([this.userId]),r=[];return vv(t).J({range:i},(s,l,d)=>{if(s[0]===this.userId){const p=qc(s[1]);r.push(p)}else d.done()}).next(()=>{Pt(0===r.length)})})}containsKey(t,e){return DF(t,this.userId,e)}Tn(t){return xF(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function DF(n,t,e){const i=CS(t,e.path),r=i[1],s=IDBKeyRange.lowerBound(i);let l=!1;return vv(n).J({range:s,H:!0},(d,p,_)=>{const[b,D,I]=d;b===t&&D===r&&(l=!0),_.done()}).next(()=>l)}function Zh(n){return ss(n,"mutations")}function vv(n){return ss(n,"documentMutations")}function xF(n){return ss(n,"mutationQueues")}class _m{constructor(t){this.En=t}next(){return this.En+=2,this.En}static An(){return new _m(0)}static Rn(){return new _m(-1)}}class Hz{constructor(t,e){this.referenceDelegate=t,this.wt=e}allocateTargetId(t){return this.bn(t).next(e=>{const i=new _m(e.highestTargetId);return e.highestTargetId=i.next(),this.Pn(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.bn(t).next(e=>At.fromTimestamp(new di(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.bn(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,i){return this.bn(t).next(r=>(r.highestListenSequenceNumber=e,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),e>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e),this.Pn(t,r)))}addTargetData(t,e){return this.vn(t,e).next(()=>this.bn(t).next(i=>(i.targetCount+=1,this.Vn(e,i),this.Pn(t,i))))}updateTargetData(t,e){return this.vn(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>yv(t).delete(e.targetId)).next(()=>this.bn(t)).next(i=>(Pt(i.targetCount>0),i.targetCount-=1,this.Pn(t,i)))}removeTargets(t,e,i){let r=0;const s=[];return yv(t).J((l,d)=>{const p=Rw(d);p.sequenceNumber<=e&&null===i.get(p.targetId)&&(r++,s.push(this.removeTargetData(t,p)))}).next(()=>ge.waitFor(s)).next(()=>r)}forEachTarget(t,e){return yv(t).J((i,r)=>{const s=Rw(r);e(s)})}bn(t){return SF(t).get("targetGlobalKey").next(e=>(Pt(null!==e),e))}Pn(t,e){return SF(t).put("targetGlobalKey",e)}vn(t,e){return yv(t).put(fF(this.wt,e))}Vn(t,e){let i=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,i=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,i=!0),i}getTargetCount(t){return this.bn(t).next(e=>e.targetCount)}getTargetData(t,e){const i=nd(e),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let s=null;return yv(t).J({range:r,index:"queryTargetsIndex"},(l,d,p)=>{const _=Rw(d);nm(e,_.target)&&(s=_,p.done())}).next(()=>s)}addMatchingKeys(t,e,i){const r=[],s=Kh(t);return e.forEach(l=>{const d=yo(l.path);r.push(s.put({targetId:i,path:d})),r.push(this.referenceDelegate.addReference(t,i,l))}),ge.waitFor(r)}removeMatchingKeys(t,e,i){const r=Kh(t);return ge.forEach(e,s=>{const l=yo(s.path);return ge.waitFor([r.delete([i,l]),this.referenceDelegate.removeReference(t,i,s)])})}removeMatchingKeysForTargetId(t,e){const i=Kh(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(t,e){const i=IDBKeyRange.bound([e],[e+1],!1,!0),r=Kh(t);let s=C();return r.J({range:i,H:!0},(l,d,p)=>{const _=qc(l[1]),b=new nt(_);s=s.add(b)}).next(()=>s)}containsKey(t,e){const i=yo(e.path),r=IDBKeyRange.bound([i],[cw(i)],!1,!0);let s=0;return Kh(t).J({index:"documentTargetsIndex",H:!0,range:r},([l,d],p,_)=>{0!==l&&(s++,_.done())}).next(()=>s>0)}te(t,e){return yv(t).get(e).next(i=>i?Rw(i):null)}}function yv(n){return ss(n,"targets")}function SF(n){return ss(n,"targetGlobal")}function Kh(n){return ss(n,"targetDocuments")}function MF([n,t],[e,i]){const r=Qt(n,e);return 0===r?Qt(t,i):r}class jz{constructor(t){this.Sn=t,this.buffer=new Yn(MF),this.Dn=0}Cn(){return++this.Dn}xn(t){const e=[t,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();MF(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class Gz{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Nn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}stop(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}get started(){return null!==this.Nn}kn(t){var e=this;He("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(0,xe.Z)(function*(){e.Nn=null;try{yield e.localStore.collectGarbage(e.garbageCollector)}catch(i){Xl(i)?He("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Ql(i)}yield e.kn(3e5)}))}}class zz{constructor(t,e){this.On=t,this.params=e}calculateTargetCount(t,e){return this.On.Mn(t).next(i=>Math.floor(e/100*i))}nthSequenceNumber(t,e){if(0===e)return ge.resolve(_o.ot);const i=new jz(e);return this.On.forEachTarget(t,r=>i.xn(r.sequenceNumber)).next(()=>this.On.Fn(t,r=>i.xn(r))).next(()=>i.maxValue)}removeTargets(t,e,i){return this.On.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.On.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?(He("LruGarbageCollector","Garbage collection skipped; disabled"),ge.resolve(CF)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(He("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),CF):this.$n(t,e))}getCacheSize(t){return this.On.getCacheSize(t)}$n(t,e){let i,r,s,l,d,p,_;const b=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(D=>(D>this.params.maximumSequenceNumbersToCollect?(He("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${D}`),r=this.params.maximumSequenceNumbersToCollect):r=D,l=Date.now(),this.nthSequenceNumber(t,r))).next(D=>(i=D,d=Date.now(),this.removeTargets(t,i,e))).next(D=>(s=D,p=Date.now(),this.removeOrphanedDocuments(t,i))).next(D=>(_=Date.now(),aw()<=jo.in.DEBUG&&He("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-b}ms\n\tDetermined least recently used ${r} in `+(d-l)+`ms\n\tRemoved ${s} targets in `+(p-d)+`ms\n\tRemoved ${D} documents in `+(_-p)+`ms\nTotal Duration: ${_-b}ms`),ge.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:D})))}}class $z{constructor(t,e){this.db=t,this.garbageCollector=new zz(this,e)}Mn(t){const e=this.Bn(t);return this.db.getTargetCache().getTargetCount(t).next(i=>e.next(r=>i+r))}Bn(t){let e=0;return this.Fn(t,i=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}Fn(t,e){return this.Ln(t,(i,r)=>e(r))}addReference(t,e,i){return IS(t,i)}removeReference(t,e,i){return IS(t,i)}removeTargets(t,e,i){return this.db.getTargetCache().removeTargets(t,e,i)}markPotentiallyOrphaned(t,e){return IS(t,e)}Un(t,e){return function(i,r){let s=!1;return xF(i).Y(l=>DF(i,l,r).next(d=>(d&&(s=!0),ge.resolve(!d)))).next(()=>s)}(t,e)}removeOrphanedDocuments(t,e){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.Ln(t,(l,d)=>{if(d<=e){const p=this.Un(t,l).next(_=>{if(!_)return s++,i.getEntry(t,l).next(()=>(i.removeEntry(l,At.min()),Kh(t).delete([0,yo(l.path)])))});r.push(p)}}).next(()=>ge.waitFor(r)).next(()=>i.apply(t)).next(()=>s)}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,i)}updateLimboDocument(t,e){return IS(t,e)}Ln(t,e){const i=Kh(t);let r,s=_o.ot;return i.J({index:"documentTargetsIndex"},([l,d],{path:p,sequenceNumber:_})=>{0===l?(s!==_o.ot&&e(new nt(qc(r)),s),s=_,r=p):s=_o.ot}).next(()=>{s!==_o.ot&&e(new nt(qc(r)),s)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function IS(n,t){return Kh(n).put((i=n.currentSequenceNumber,{targetId:0,path:yo(t.path),sequenceNumber:i}));var i}class TF{constructor(){this.changes=new rd(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,mn.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return void 0!==i?ge.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class qz{constructor(t){this.wt=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,i){return vm(t).put(i)}removeEntry(t,e,i){return vm(t).delete(function(r,s){const l=r.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],ES(s),l[l.length-1]]}(e,i))}updateMetadata(t,e){return this.getMetadata(t).next(i=>(i.byteSize+=e,this.qn(t,i)))}getEntry(t,e){let i=mn.newInvalidDocument(e);return vm(t).J({index:"documentKeyIndex",range:IDBKeyRange.only(Lw(e))},(r,s)=>{i=this.Kn(e,s)}).next(()=>i)}Gn(t,e){let i={size:0,document:mn.newInvalidDocument(e)};return vm(t).J({index:"documentKeyIndex",range:IDBKeyRange.only(Lw(e))},(r,s)=>{i={document:this.Kn(e,s),size:MS(s)}}).next(()=>i)}getEntries(t,e){let i=vo();return this.Qn(t,e,(r,s)=>{const l=this.Kn(r,s);i=i.insert(r,l)}).next(()=>i)}jn(t,e){let i=vo(),r=new Wi(nt.comparator);return this.Qn(t,e,(s,l)=>{const d=this.Kn(s,l);i=i.insert(s,d),r=r.insert(s,MS(l))}).next(()=>({documents:i,Wn:r}))}Qn(t,e,i){if(e.isEmpty())return ge.resolve();let r=new Yn(RF);e.forEach(p=>r=r.add(p));const s=IDBKeyRange.bound(Lw(r.first()),Lw(r.last())),l=r.getIterator();let d=l.getNext();return vm(t).J({index:"documentKeyIndex",range:s},(p,_,b)=>{const D=nt.fromSegments([..._.prefixPath,_.collectionGroup,_.documentId]);for(;d&&RF(d,D)<0;)i(d,null),d=l.getNext();d&&d.isEqual(D)&&(i(d,_),d=l.hasNext()?l.getNext():null),d?b.q(Lw(d)):b.done()}).next(()=>{for(;d;)i(d,null),d=l.hasNext()?l.getNext():null})}getAllFromCollection(t,e,i){const r=[e.popLast().toArray(),e.lastSegment(),ES(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],s=[e.popLast().toArray(),e.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return vm(t).K(IDBKeyRange.bound(r,s,!0)).next(l=>{let d=vo();for(const p of l){const _=this.Kn(nt.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);d=d.insert(_.key,_)}return d})}getAllFromCollectionGroup(t,e,i,r){let s=vo();const l=kF(e,i),d=kF(e,go.max());return vm(t).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,d,!0)},(p,_,b)=>{const D=this.Kn(nt.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);s=s.insert(D.key,D),s.size===r&&b.done()}).next(()=>s)}newChangeBuffer(t){return new Wz(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return AF(t).get("remoteDocumentGlobalKey").next(e=>(Pt(!!e),e))}qn(t,e){return AF(t).put("remoteDocumentGlobalKey",e)}Kn(t,e){if(e){const i=function Rz(n,t){let e;if(t.document)e=JN(n.ne,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const i=nt.fromSegments(t.noDocument.path),r=hm(t.noDocument.readTime);e=mn.newNoDocument(i,r),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return gt();{const i=nt.fromSegments(t.unknownDocument.path),r=hm(t.unknownDocument.version);e=mn.newUnknownDocument(i,r)}}return t.readTime&&e.setReadTime(function(i){const r=new di(i[0],i[1]);return At.fromTimestamp(r)}(t.readTime)),e}(this.wt,e);if(!i.isNoDocument()||!i.version.isEqual(At.min()))return i}return mn.newInvalidDocument(t)}}function IF(n){return new qz(n)}class Wz extends TF{constructor(t,e){super(),this.zn=t,this.trackRemovals=e,this.Hn=new rd(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(t){const e=[];let i=0,r=new Yn((s,l)=>Qt(s.canonicalString(),l.canonicalString()));return this.changes.forEach((s,l)=>{const d=this.Hn.get(s);if(e.push(this.zn.removeEntry(t,s,d.readTime)),l.isValidDocument()){const p=hF(this.zn.wt,l);r=r.add(s.path.popLast()),i+=MS(p)-d.size,e.push(this.zn.addEntry(t,s,p))}else if(i-=d.size,this.trackRemovals){const p=hF(this.zn.wt,l.convertToNoDocument(At.min()));e.push(this.zn.addEntry(t,s,p))}}),r.forEach(s=>{e.push(this.zn.indexManager.addToCollectionParentIndex(t,s))}),e.push(this.zn.updateMetadata(t,i)),ge.waitFor(e)}getFromCache(t,e){return this.zn.Gn(t,e).next(i=>(this.Hn.set(e,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(t,e){return this.zn.jn(t,e).next(({documents:i,Wn:r})=>(r.forEach((s,l)=>{this.Hn.set(s,{size:l,readTime:i.get(s).readTime})}),i))}}function AF(n){return ss(n,"remoteDocumentGlobal")}function vm(n){return ss(n,"remoteDocumentsV14")}function Lw(n){const t=n.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function kF(n,t){const e=t.documentKey.path.toArray();return[n,ES(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function RF(n,t){const e=n.path.toArray(),i=t.path.toArray();let r=0;for(let s=0;s<e.length-2&&s<i.length-2;++s)if(r=Qt(e[s],i[s]),r)return r;return r=Qt(e.length,i.length),r||(r=Qt(e[e.length-2],i[i.length-2]),r||Qt(e[e.length-1],i[i.length-1]))}class Yz{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class OF{constructor(t,e,i,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(r=>(i=r,this.getBaseDocument(t,e,i))).next(r=>(null!==i&&$h(i.mutation,r,Ls.empty(),di.now()),r))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,C()).next(()=>i))}getLocalViewOfDocuments(t,e,i=C()){const r=u();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,i).next(s=>{let l=o();return s.forEach((d,p)=>{l=l.insert(d,p.overlayedDocument)}),l}))}getOverlayedDocuments(t,e){const i=u();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,C()))}populateOverlays(t,e,i){const r=[];return i.forEach(s=>{e.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(t,r).next(s=>{s.forEach((l,d)=>{e.set(l,d)})})}computeViews(t,e,i,r){let s=vo();const l=f(),d=f();return e.forEach((p,_)=>{const b=i.get(_.key);r.has(_.key)&&(void 0===b||b.mutation instanceof zc)?s=s.insert(_.key,_):void 0!==b&&(l.set(_.key,b.mutation.getFieldMask()),$h(b.mutation,_,b.mutation.getFieldMask(),di.now()))}),this.recalculateAndSaveOverlays(t,s).next(p=>(p.forEach((_,b)=>l.set(_,b)),e.forEach((_,b)=>{var D;return d.set(_,new Yz(b,null!==(D=l.get(_))&&void 0!==D?D:null))}),d))}recalculateAndSaveOverlays(t,e){const i=f();let r=new Wi((l,d)=>l-d),s=C();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(l=>{for(const d of l)d.keys().forEach(p=>{const _=e.get(p);if(null===_)return;let b=i.get(p)||Ls.empty();b=d.applyToLocalView(_,b),i.set(p,b);const D=(r.get(d.batchId)||C()).add(p);r=r.insert(d.batchId,D)})}).next(()=>{const l=[],d=r.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),_=p.key,b=p.value,D=h();b.forEach(I=>{if(!s.has(I)){const P=fv(e.get(I),i.get(I));null!==P&&D.set(I,P),s=s.add(I)}}),l.push(this.documentOverlayCache.saveOverlays(t,_,D))}return ge.waitFor(l)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i){return nt.isDocumentKey((r=e).path)&&null===r.collectionGroup&&0===r.filters.length?this.getDocumentsMatchingDocumentQuery(t,e.path):uS(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i):this.getDocumentsMatchingCollectionQuery(t,e,i);var r}getNextDocuments(t,e,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,r).next(s=>{const l=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,r-s.size):ge.resolve(u());let d=-1,p=s;return l.next(_=>ge.forEach(_,(b,D)=>(d<D.largestBatchId&&(d=D.largestBatchId),s.get(b)?ge.resolve():this.getBaseDocument(t,b,D).next(I=>{p=p.insert(b,I)}))).next(()=>this.populateOverlays(t,_,s)).next(()=>this.computeViews(t,p,_,C())).next(b=>({batchId:d,changes:a(b)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new nt(e)).next(i=>{let r=o();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,e,i){const r=e.collectionGroup;let s=o();return this.indexManager.getCollectionParents(t,r).next(l=>ge.forEach(l,d=>{const p=(_=e,b=d.child(r),new Hc(b,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt));var _,b;return this.getDocumentsMatchingCollectionQuery(t,p,i).next(_=>{_.forEach((b,D)=>{s=s.insert(b,D)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(t,e,i){let r;return this.remoteDocumentCache.getAllFromCollection(t,e.path,i).next(s=>(r=s,this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId))).next(s=>{s.forEach((d,p)=>{const _=p.getKey();null===r.get(_)&&(r=r.insert(_,mn.newInvalidDocument(_)))});let l=o();return r.forEach((d,p)=>{const _=s.get(d);void 0!==_&&$h(_.mutation,p,Ls.empty(),di.now()),Sw(e,p)&&(l=l.insert(d,p))}),l})}getBaseDocument(t,e,i){return null===i||1===i.mutation.type?this.remoteDocumentCache.getEntry(t,e):ge.resolve(mn.newInvalidDocument(e))}}class Zz{constructor(t){this.wt=t,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(t,e){return ge.resolve(this.Jn.get(e))}saveBundleMetadata(t,e){var i;return this.Jn.set(e.id,{id:(i=e).id,version:i.version,createTime:nr(i.createTime)}),ge.resolve()}getNamedQuery(t,e){return ge.resolve(this.Yn.get(e))}saveNamedQuery(t,e){return this.Yn.set(e.name,{name:(i=e).name,query:Ak(i.bundledQuery),readTime:nr(i.readTime)}),ge.resolve();var i}}class Kz{constructor(){this.overlays=new Wi(nt.comparator),this.Xn=new Map}getOverlay(t,e){return ge.resolve(this.overlays.get(e))}getOverlays(t,e){const i=u();return ge.forEach(e,r=>this.getOverlay(t,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((r,s)=>{this.ie(t,e,s)}),ge.resolve()}removeOverlaysForBatchId(t,e,i){const r=this.Xn.get(i);return void 0!==r&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Xn.delete(i)),ge.resolve()}getOverlaysForCollection(t,e,i){const r=u(),s=e.length+1,l=new nt(e.child("")),d=this.overlays.getIteratorFrom(l);for(;d.hasNext();){const p=d.getNext().value,_=p.getKey();if(!e.isPrefixOf(_.path))break;_.path.length===s&&p.largestBatchId>i&&r.set(p.getKey(),p)}return ge.resolve(r)}getOverlaysForCollectionGroup(t,e,i,r){let s=new Wi((_,b)=>_-b);const l=this.overlays.getIterator();for(;l.hasNext();){const _=l.getNext().value;if(_.getKey().getCollectionGroup()===e&&_.largestBatchId>i){let b=s.get(_.largestBatchId);null===b&&(b=u(),s=s.insert(_.largestBatchId,b)),b.set(_.getKey(),_)}}const d=u(),p=s.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((_,b)=>d.set(_,b)),!(d.size()>=r)););return ge.resolve(d)}ie(t,e,i){const r=this.overlays.get(i.key);if(null!==r){const l=this.Xn.get(r.largestBatchId).delete(i.key);this.Xn.set(r.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new Ik(e,i));let s=this.Xn.get(e);void 0===s&&(s=C(),this.Xn.set(e,s)),this.Xn.set(e,s.add(i.key))}}class Ok{constructor(){this.Zn=new Yn(os.ts),this.es=new Yn(os.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(t,e){const i=new os(t,e);this.Zn=this.Zn.add(i),this.es=this.es.add(i)}ss(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.rs(new os(t,e))}os(t,e){t.forEach(i=>this.removeReference(i,e))}us(t){const e=new nt(new Cn([])),i=new os(e,t),r=new os(e,t+1),s=[];return this.es.forEachInRange([i,r],l=>{this.rs(l),s.push(l.key)}),s}cs(){this.Zn.forEach(t=>this.rs(t))}rs(t){this.Zn=this.Zn.delete(t),this.es=this.es.delete(t)}hs(t){const e=new nt(new Cn([])),i=new os(e,t),r=new os(e,t+1);let s=C();return this.es.forEachInRange([i,r],l=>{s=s.add(l.key)}),s}containsKey(t){const e=new os(t,0),i=this.Zn.firstAfterOrEqual(e);return null!==i&&t.isEqual(i.key)}}class os{constructor(t,e){this.key=t,this.ls=e}static ts(t,e){return nt.comparator(t.key,e.key)||Qt(t.ls,e.ls)}static ns(t,e){return Qt(t.ls,e.ls)||nt.comparator(t.key,e.key)}}class Qz{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.fs=1,this.ds=new Yn(os.ts)}checkEmpty(t){return ge.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,i,r){const s=this.fs;this.fs++;const l=new Mk(s,e,i,r);this.mutationQueue.push(l);for(const d of r)this.ds=this.ds.add(new os(d.key,s)),this.indexManager.addToCollectionParentIndex(t,d.key.path.popLast());return ge.resolve(l)}lookupMutationBatch(t,e){return ge.resolve(this._s(e))}getNextMutationBatchAfterBatchId(t,e){const r=this.ws(e+1),s=r<0?0:r;return ge.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ge.resolve(0===this.mutationQueue.length?-1:this.fs-1)}getAllMutationBatches(t){return ge.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new os(e,0),r=new os(e,Number.POSITIVE_INFINITY),s=[];return this.ds.forEachInRange([i,r],l=>{const d=this._s(l.ls);s.push(d)}),ge.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new Yn(Qt);return e.forEach(r=>{const s=new os(r,0),l=new os(r,Number.POSITIVE_INFINITY);this.ds.forEachInRange([s,l],d=>{i=i.add(d.ls)})}),ge.resolve(this.gs(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1;let s=i;nt.isDocumentKey(s)||(s=s.child(""));const l=new os(new nt(s),0);let d=new Yn(Qt);return this.ds.forEachWhile(p=>{const _=p.key.path;return!!i.isPrefixOf(_)&&(_.length===r&&(d=d.add(p.ls)),!0)},l),ge.resolve(this.gs(d))}gs(t){const e=[];return t.forEach(i=>{const r=this._s(i);null!==r&&e.push(r)}),e}removeMutationBatch(t,e){Pt(0===this.ys(e.batchId,"removed")),this.mutationQueue.shift();let i=this.ds;return ge.forEach(e.mutations,r=>{const s=new os(r.key,e.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.ds=i})}In(t){}containsKey(t,e){const i=new os(e,0),r=this.ds.firstAfterOrEqual(i);return ge.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return ge.resolve()}ys(t,e){return this.ws(t)}ws(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}_s(t){const e=this.ws(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class Xz{constructor(t){this.ps=t,this.docs=new Wi(nt.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,r=this.docs.get(i),s=r?r.size:0,l=this.ps(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:l}),this.size+=l-s,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return ge.resolve(i?i.document.mutableCopy():mn.newInvalidDocument(e))}getEntries(t,e){let i=vo();return e.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():mn.newInvalidDocument(r))}),ge.resolve(i)}getAllFromCollection(t,e,i){let r=vo();const s=new nt(e.child("")),l=this.docs.getIteratorFrom(s);for(;l.hasNext();){const{key:d,value:{document:p}}=l.getNext();if(!e.isPrefixOf(d.path))break;d.path.length>e.length+1||nv(qx(p),i)<=0||(r=r.insert(p.key,p.mutableCopy()))}return ge.resolve(r)}getAllFromCollectionGroup(t,e,i,r){gt()}Is(t,e){return ge.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new Jz(this)}getSize(t){return ge.resolve(this.size)}}class Jz extends TF{constructor(t){super(),this.zn=t}applyChanges(t){const e=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?e.push(this.zn.addEntry(t,r)):this.zn.removeEntry(i)}),ge.waitFor(e)}getFromCache(t,e){return this.zn.getEntry(t,e)}getAllFromCache(t,e){return this.zn.getEntries(t,e)}}class e3{constructor(t){this.persistence=t,this.Ts=new rd(e=>nd(e),nm),this.lastRemoteSnapshotVersion=At.min(),this.highestTargetId=0,this.Es=0,this.As=new Ok,this.targetCount=0,this.Rs=_m.An()}forEachTarget(t,e){return this.Ts.forEach((i,r)=>e(r)),ge.resolve()}getLastRemoteSnapshotVersion(t){return ge.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return ge.resolve(this.Es)}allocateTargetId(t){return this.highestTargetId=this.Rs.next(),ge.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.Es&&(this.Es=e),ge.resolve()}vn(t){this.Ts.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Rs=new _m(e),this.highestTargetId=e),t.sequenceNumber>this.Es&&(this.Es=t.sequenceNumber)}addTargetData(t,e){return this.vn(e),this.targetCount+=1,ge.resolve()}updateTargetData(t,e){return this.vn(e),ge.resolve()}removeTargetData(t,e){return this.Ts.delete(e.target),this.As.us(e.targetId),this.targetCount-=1,ge.resolve()}removeTargets(t,e,i){let r=0;const s=[];return this.Ts.forEach((l,d)=>{d.sequenceNumber<=e&&null===i.get(d.targetId)&&(this.Ts.delete(l),s.push(this.removeMatchingKeysForTargetId(t,d.targetId)),r++)}),ge.waitFor(s).next(()=>r)}getTargetCount(t){return ge.resolve(this.targetCount)}getTargetData(t,e){const i=this.Ts.get(e)||null;return ge.resolve(i)}addMatchingKeys(t,e,i){return this.As.ss(e,i),ge.resolve()}removeMatchingKeys(t,e,i){this.As.os(e,i);const r=this.persistence.referenceDelegate,s=[];return r&&e.forEach(l=>{s.push(r.markPotentiallyOrphaned(t,l))}),ge.waitFor(s)}removeMatchingKeysForTargetId(t,e){return this.As.us(e),ge.resolve()}getMatchingKeysForTargetId(t,e){const i=this.As.hs(e);return ge.resolve(i)}containsKey(t,e){return ge.resolve(this.As.containsKey(e))}}class PF{constructor(t,e){this.bs={},this.overlays={},this.Ps=new _o(0),this.vs=!1,this.vs=!0,this.referenceDelegate=t(this),this.Vs=new e3(this),this.indexManager=new Vz,this.remoteDocumentCache=new Xz(i=>this.referenceDelegate.Ss(i)),this.wt=new dF(e),this.Ds=new Zz(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new Kz,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.bs[t.toKey()];return i||(i=new Qz(e,this.referenceDelegate),this.bs[t.toKey()]=i),i}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(t,e,i){He("MemoryPersistence","Starting transaction:",t);const r=new t3(this.Ps.next());return this.referenceDelegate.Cs(),i(r).next(s=>this.referenceDelegate.xs(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Ns(t,e){return ge.or(Object.values(this.bs).map(i=>()=>i.containsKey(t,e)))}}class t3 extends Wx{constructor(t){super(),this.currentSequenceNumber=t}}class AS{constructor(t){this.persistence=t,this.ks=new Ok,this.Os=null}static Ms(t){return new AS(t)}get Fs(){if(this.Os)return this.Os;throw gt()}addReference(t,e,i){return this.ks.addReference(i,e),this.Fs.delete(i.toString()),ge.resolve()}removeReference(t,e,i){return this.ks.removeReference(i,e),this.Fs.add(i.toString()),ge.resolve()}markPotentiallyOrphaned(t,e){return this.Fs.add(e.toString()),ge.resolve()}removeTarget(t,e){this.ks.us(e.targetId).forEach(r=>this.Fs.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(s=>this.Fs.add(s.toString()))}).next(()=>i.removeTargetData(t,e))}Cs(){this.Os=new Set}xs(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ge.forEach(this.Fs,i=>{const r=nt.fromPath(i);return this.$s(t,r).next(s=>{s||e.removeEntry(r,At.min())})}).next(()=>(this.Os=null,e.apply(t)))}updateLimboDocument(t,e){return this.$s(t,e).next(i=>{i?this.Fs.delete(e.toString()):this.Fs.add(e.toString())})}Ss(t){return 0}$s(t,e){return ge.or([()=>ge.resolve(this.ks.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ns(t,e)])}}class n3{constructor(t){this.wt=t}O(t,e,i,r){const s=new rv("createOrUpgrade",e);var d;i<1&&r>=1&&(t.createObjectStore("owner"),(d=t).createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",oF,{unique:!0}),d.createObjectStore("documentMutations"),NF(t),function(d){d.createObjectStore("remoteDocuments")}(t));let l=ge.resolve();return i<3&&r>=3&&(0!==i&&(function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")}(t),NF(t)),l=l.next(()=>function(d){const p=d.store("targetGlobal"),_={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:At.min().toTimestamp(),targetCount:0};return p.put("targetGlobalKey",_)}(s))),i<4&&r>=4&&(0!==i&&(l=l.next(()=>function(d,p){return p.store("mutations").K().next(_=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",oF,{unique:!0});const b=p.store("mutations"),D=_.map(I=>b.put(I));return ge.waitFor(D)})}(t,s))),l=l.next(()=>{!function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})}(t)})),i<5&&r>=5&&(l=l.next(()=>this.Bs(s))),i<6&&r>=6&&(l=l.next(()=>(function(d){d.createObjectStore("remoteDocumentGlobal")}(t),this.Ls(s)))),i<7&&r>=7&&(l=l.next(()=>this.Us(s))),i<8&&r>=8&&(l=l.next(()=>this.qs(t,s))),i<9&&r>=9&&(l=l.next(()=>{!function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")}(t)})),i<10&&r>=10&&(l=l.next(()=>this.Ks(s))),i<11&&r>=11&&(l=l.next(()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(d){d.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),i<12&&r>=12&&(l=l.next(()=>{!function(d){const p=d.createObjectStore("documentOverlays",{keyPath:Mz});p.createIndex("collectionPathOverlayIndex",Tz,{unique:!1}),p.createIndex("collectionGroupOverlayIndex",Iz,{unique:!1})}(t)})),i<13&&r>=13&&(l=l.next(()=>function(d){const p=d.createObjectStore("remoteDocumentsV14",{keyPath:gz});p.createIndex("documentKeyIndex",_z),p.createIndex("collectionGroupIndex",vz)}(t)).next(()=>this.Gs(t,s)).next(()=>t.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(l=l.next(()=>this.Qs(t,s))),i<15&&r>=15&&(l=l.next(()=>function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:Ez}).createIndex("sequenceNumberIndex",Dz,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:xz}).createIndex("documentKeyIndex",Sz,{unique:!1})}(t))),l}Ls(t){let e=0;return t.store("remoteDocuments").J((i,r)=>{e+=MS(r)}).next(()=>{const i={byteSize:e};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Bs(t){const e=t.store("mutationQueues"),i=t.store("mutations");return e.K().next(r=>ge.forEach(r,s=>{const l=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.K("userMutationsIndex",l).next(d=>ge.forEach(d,p=>{Pt(p.userId===s.userId);const _=fm(this.wt,p);return EF(t,s.userId,_).next(()=>{})}))}))}Us(t){const e=t.store("targetDocuments"),i=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(r=>{const s=[];return i.J((l,d)=>{const p=new Cn(l),_=[0,yo(p)];s.push(e.get(_).next(b=>b?ge.resolve():e.put({targetId:0,path:yo(p),sequenceNumber:r.highestListenSequenceNumber})))}).next(()=>ge.waitFor(s))})}qs(t,e){t.createObjectStore("collectionParents",{keyPath:Cz});const i=e.store("collectionParents"),r=new Rk,s=l=>{if(r.add(l)){const d=l.lastSegment(),p=l.popLast();return i.put({collectionId:d,parent:yo(p)})}};return e.store("remoteDocuments").J({H:!0},(l,d)=>{const p=new Cn(l);return s(p.popLast())}).next(()=>e.store("documentMutations").J({H:!0},([l,d,p],_)=>{const b=qc(d);return s(b.popLast())}))}Ks(t){const e=t.store("targets");return e.J((i,r)=>{const s=Rw(r),l=fF(this.wt,s);return e.put(l)})}Gs(t,e){const i=e.store("remoteDocuments"),r=[];return i.J((s,l)=>{const d=e.store("remoteDocumentsV14"),p=(_=l,_.document?new nt(Cn.fromString(_.document.name).popFirst(5)):_.noDocument?nt.fromSegments(_.noDocument.path):_.unknownDocument?nt.fromSegments(_.unknownDocument.path):gt()).path.toArray();var _;const b={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};r.push(d.put(b))}).next(()=>ge.waitFor(r))}Qs(t,e){const i=e.store("mutations"),r=IF(this.wt),s=new PF(AS.Ms,this.wt.ne);return i.K().next(l=>{const d=new Map;return l.forEach(p=>{var _;let b=null!==(_=d.get(p.userId))&&void 0!==_?_:C();fm(this.wt,p).keys().forEach(D=>b=b.add(D)),d.set(p.userId,b)}),ge.forEach(d,(p,_)=>{const b=new Ar(_),D=DS.se(this.wt,b),I=s.getIndexManager(b),P=TS.se(b,this.wt,I,s.referenceDelegate);return new OF(r,P,D,I).recalculateAndSaveOverlaysForDocumentKeys(new Sk(e,_o.ot),p).next()})})}}function NF(n){n.createObjectStore("targetDocuments",{keyPath:bz}).createIndex("documentTargetsIndex",wz,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",yz,{unique:!0}),n.createObjectStore("targetGlobal")}const Pk="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Nk{constructor(t,e,i,r,s,l,d,p,_,b,D=14){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=i,this.js=s,this.window=l,this.document=d,this.Ws=_,this.zs=b,this.Hs=D,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=I=>Promise.resolve(),!Nk.V())throw new Be(ve.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new $z(this,r),this.ei=e+"main",this.wt=new dF(p),this.ni=new Wo(this.ei,this.Hs,new n3(this.wt)),this.Vs=new Hz(this.referenceDelegate,this.wt),this.remoteDocumentCache=IF(this.wt),this.Ds=new Oz,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===b&&$i("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ii().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Be(ve.FAILED_PRECONDITION,Pk);return this.ri(),this.oi(),this.ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Vs.getHighestSequenceNumber(t))}).then(t=>{this.Ps=new _o(t,this.Ws)}).then(()=>{this.vs=!0}).catch(t=>(this.ni&&this.ni.close(),Promise.reject(t)))}ci(t){var e=this;return this.ti=function(){var i=(0,xe.Z)(function*(r){if(e.started)return t(r)});return function(r){return i.apply(this,arguments)}}(),t(this.isPrimary)}setDatabaseDeletedListener(t){this.ni.F(function(){var e=(0,xe.Z)(function*(i){null===i.newVersion&&(yield t())});return function(i){return e.apply(this,arguments)}}())}setNetworkEnabled(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.js.enqueueAndForget((0,xe.Z)(function*(){e.started&&(yield e.ii())})))}ii(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>kS(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ai(t).next(e=>{e||(this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)))})}).next(()=>this.hi(t)).next(e=>this.isPrimary&&!e?this.li(t).next(()=>!1):!!e&&this.fi(t).next(()=>!0))).catch(t=>{if(Xl(t))return He("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return He("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.js.enqueueRetryable(()=>this.ti(t)),this.isPrimary=t})}ai(t){return Bw(t).get("owner").next(e=>ge.resolve(this.di(e)))}_i(t){return kS(t).delete(this.clientId)}wi(){var t=this;return(0,xe.Z)(function*(){if(t.isPrimary&&!t.mi(t.Zs,18e5)){t.Zs=Date.now();const e=yield t.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const r=ss(i,"clientMetadata");return r.K().next(s=>{const l=t.gi(s,18e5),d=s.filter(p=>-1===l.indexOf(p));return ge.forEach(d,p=>r.delete(p.clientId)).next(()=>d)})}).catch(()=>[]);if(t.si)for(const i of e)t.si.removeItem(t.yi(i.clientId))}})()}ui(){this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ii().then(()=>this.wi()).then(()=>this.ui()))}di(t){return!!t&&t.ownerId===this.clientId}hi(t){return this.zs?ge.resolve(!0):Bw(t).get("owner").next(e=>{if(null!==e&&this.mi(e.leaseTimestampMs,5e3)&&!this.pi(e.ownerId)){if(this.di(e)&&this.networkEnabled)return!0;if(!this.di(e)){if(!e.allowTabSynchronization)throw new Be(ve.FAILED_PRECONDITION,Pk);return!1}}return!(!this.networkEnabled||!this.inForeground)||kS(t).K().next(i=>void 0===this.gi(i,5e3).find(r=>{if(this.clientId!==r.clientId){const l=!this.inForeground&&r.inForeground,d=this.networkEnabled===r.networkEnabled;if(!this.networkEnabled&&r.networkEnabled||l&&d)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&He("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){var t=this;return(0,xe.Z)(function*(){t.vs=!1,t.Ii(),t.Xs&&(t.Xs.cancel(),t.Xs=null),t.Ti(),t.Ei(),yield t.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const i=new Sk(e,_o.ot);return t.li(i).next(()=>t._i(i))}),t.ni.close(),t.Ai()})()}gi(t,e){return t.filter(i=>this.mi(i.updateTimeMs,e)&&!this.pi(i.clientId))}Ri(){return this.runTransaction("getActiveClients","readonly",t=>kS(t).K().next(e=>this.gi(e,18e5).map(i=>i.clientId)))}get started(){return this.vs}getMutationQueue(t,e){return TS.se(t,this.wt,e,this.referenceDelegate)}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new Uz(t,this.wt.ne.databaseId)}getDocumentOverlayCache(t){return DS.se(this.wt,t)}getBundleCache(){return this.Ds}runTransaction(t,e,i){He("IndexedDbPersistence","Starting transaction:",t);const r="readonly"===e?"readonly":"readwrite",s=15===(l=this.Hs)?kz:14===l?uF:13===l?cF:12===l?Az:11===l?lF:void gt();var l;let d;return this.ni.runTransaction(t,r,s,p=>(d=new Sk(p,this.Ps?this.Ps.next():_o.ot),"readwrite-primary"===e?this.ai(d).next(_=>!!_||this.hi(d)).next(_=>{if(!_)throw $i(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)),new Be(ve.FAILED_PRECONDITION,uw);return i(d)}).next(_=>this.fi(d).next(()=>_)):this.bi(d).next(()=>i(d)))).then(p=>(d.raiseOnCommittedEvent(),p))}bi(t){return Bw(t).get("owner").next(e=>{if(null!==e&&this.mi(e.leaseTimestampMs,5e3)&&!this.pi(e.ownerId)&&!this.di(e)&&!(this.zs||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Be(ve.FAILED_PRECONDITION,Pk)})}fi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Bw(t).put("owner",e)}static V(){return Wo.V()}li(t){const e=Bw(t);return e.get("owner").next(i=>this.di(i)?(He("IndexedDbPersistence","Releasing primary lease."),e.delete("owner")):ge.resolve())}mi(t,e){const i=Date.now();return!(t<i-e||t>i&&($i(`Detected an update time that is in the future: ${t} > ${i}`),1))}ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=()=>{this.js.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ii()))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}Ti(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}oi(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Js=()=>{this.Ii(),(0,L.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.js.enterRestrictedMode(!0),this.js.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Js))}Ei(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}pi(t){var e;try{const i=null!==(null===(e=this.si)||void 0===e?void 0:e.getItem(this.yi(t)));return He("IndexedDbPersistence",`Client '${t}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return $i("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Ii(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(t){$i("Failed to set zombie client id.",t)}}Ai(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch(t){}}yi(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function Bw(n){return ss(n,"owner")}function kS(n){return ss(n,"clientMetadata")}function Fk(n,t){let e=n.projectId;return n.isDefaultDatabase||(e+="."+n.database),"firestore/"+t+"/"+e+"/"}class Lk{constructor(t,e,i,r){this.targetId=t,this.fromCache=e,this.Pi=i,this.vi=r}static Vi(t,e){let i=C(),r=C();for(const s of e.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new Lk(t,e.fromCache,i,r)}}class FF{constructor(){this.Si=!1}initialize(t,e){this.Di=t,this.indexManager=e,this.Si=!0}getDocumentsMatchingQuery(t,e,i,r){return this.Ci(t,e).next(s=>s||this.xi(t,e,r,i)).next(s=>s||this.Ni(t,e))}Ci(t,e){return ge.resolve(null)}xi(t,e,i,r){return function _k(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(e)||r.isEqual(At.min())?this.Ni(t,e):this.Di.getDocuments(t,i).next(s=>{const l=this.ki(e,s);return this.Oi(e,l,i,r)?this.Ni(t,e):(aw()<=jo.in.DEBUG&&He("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),xw(e)),this.Mi(t,l,e,ik(r,-1)))})}ki(t,e){let i=new Yn(jc(t));return e.forEach((r,s)=>{Sw(t,s)&&(i=i.add(s))}),i}Oi(t,e,i,r){if(null===t.limit)return!1;if(i.size!==e.size)return!0;const s="F"===t.limitType?e.last():e.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ni(t,e){return aw()<=jo.in.DEBUG&&He("QueryEngine","Using full collection scan to execute query:",xw(e)),this.Di.getDocumentsMatchingQuery(t,e,go.min())}Mi(t,e,i,r){return this.Di.getDocumentsMatchingQuery(t,i,r).next(s=>(e.forEach(l=>{s=s.insert(l.key,l)}),s))}}class r3{constructor(t,e,i,r){this.persistence=t,this.Fi=e,this.wt=r,this.$i=new Wi(Qt),this.Bi=new rd(s=>nd(s),nm),this.Li=new Map,this.Ui=t.getRemoteDocumentCache(),this.Vs=t.getTargetCache(),this.Ds=t.getBundleCache(),this.qi(i)}qi(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new OF(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.$i))}}function LF(n,t,e,i){return new r3(n,t,e,i)}function BF(n,t){return Bk.apply(this,arguments)}function Bk(){return Bk=(0,xe.Z)(function*(n,t){const e=ot(n);return yield e.persistence.runTransaction("Handle user change","readonly",i=>{let r;return e.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,e.qi(t),e.mutationQueue.getAllMutationBatches(i))).next(s=>{const l=[],d=[];let p=C();for(const _ of r){l.push(_.batchId);for(const b of _.mutations)p=p.add(b.key)}for(const _ of s){d.push(_.batchId);for(const b of _.mutations)p=p.add(b.key)}return e.localDocuments.getDocuments(i,p).next(_=>({Ki:_,removedBatchIds:l,addedBatchIds:d}))})})}),Bk.apply(this,arguments)}function s3(n,t){const e=ot(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=t.batch.keys(),s=e.Ui.newChangeBuffer({trackRemovals:!0});return function(l,d,p,_){const b=p.batch,D=b.keys();let I=ge.resolve();return D.forEach(P=>{I=I.next(()=>_.getEntry(d,P)).next(U=>{const Q=p.docVersions.get(P);Pt(null!==Q),U.version.compareTo(Q)<0&&(b.applyToRemoteDocument(U,p),U.isValidDocument()&&(U.setReadTime(p.commitVersion),_.addEntry(U)))})}),I.next(()=>l.mutationQueue.removeMutationBatch(d,b))}(e,i,t,s).next(()=>s.apply(i)).next(()=>e.mutationQueue.performConsistencyCheck(i)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let d=C();for(let p=0;p<l.mutationResults.length;++p)l.mutationResults[p].transformResults.length>0&&(d=d.add(l.batch.mutations[p].key));return d}(t))).next(()=>e.localDocuments.getDocuments(i,r))})}function VF(n){const t=ot(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Vs.getLastRemoteSnapshotVersion(e))}function o3(n,t){const e=ot(n),i=t.snapshotVersion;let r=e.$i;return e.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const l=e.Ui.newChangeBuffer({trackRemovals:!0});r=e.$i;const d=[];t.targetChanges.forEach((b,D)=>{const I=r.get(D);if(!I)return;d.push(e.Vs.removeMatchingKeys(s,b.removedDocuments,D).next(()=>e.Vs.addMatchingKeys(s,b.addedDocuments,D)));let P=I.withSequenceNumber(s.currentSequenceNumber);var U,Q,le;t.targetMismatches.has(D)?P=P.withResumeToken(tr.EMPTY_BYTE_STRING,At.min()).withLastLimboFreeSnapshotVersion(At.min()):b.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(b.resumeToken,i)),r=r.insert(D,P),Q=P,le=b,(0===(U=I).resumeToken.approximateByteSize()||Q.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=3e8||le.addedDocuments.size+le.modifiedDocuments.size+le.removedDocuments.size>0)&&d.push(e.Vs.updateTargetData(s,P))});let p=vo(),_=C();if(t.documentUpdates.forEach(b=>{t.resolvedLimboDocuments.has(b)&&d.push(e.persistence.referenceDelegate.updateLimboDocument(s,b))}),d.push(UF(s,l,t.documentUpdates).next(b=>{p=b.Gi,_=b.Qi})),!i.isEqual(At.min())){const b=e.Vs.getLastRemoteSnapshotVersion(s).next(D=>e.Vs.setTargetsMetadata(s,s.currentSequenceNumber,i));d.push(b)}return ge.waitFor(d).next(()=>l.apply(s)).next(()=>e.localDocuments.getLocalViewOfDocuments(s,p,_)).next(()=>p)}).then(s=>(e.$i=r,s))}function UF(n,t,e){let i=C(),r=C();return e.forEach(s=>i=i.add(s)),t.getEntries(n,i).next(s=>{let l=vo();return e.forEach((d,p)=>{const _=s.get(d);p.isFoundDocument()!==_.isFoundDocument()&&(r=r.add(d)),p.isNoDocument()&&p.version.isEqual(At.min())?(t.removeEntry(d,p.readTime),l=l.insert(d,p)):!_.isValidDocument()||p.version.compareTo(_.version)>0||0===p.version.compareTo(_.version)&&_.hasPendingWrites?(t.addEntry(p),l=l.insert(d,p)):He("LocalStore","Ignoring outdated watch update for ",d,". Current version:",_.version," Watch version:",p.version)}),{Gi:l,Qi:r}})}function a3(n,t){const e=ot(n);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===t&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function bv(n,t){const e=ot(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return e.Vs.getTargetData(i,t).next(s=>s?(r=s,ge.resolve(r)):e.Vs.allocateTargetId(i).next(l=>(r=new Yh(t,l,0,i.currentSequenceNumber),e.Vs.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=e.$i.get(i.targetId);return(null===r||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.$i=e.$i.insert(i.targetId,i),e.Bi.set(t,i.targetId)),i})}function wv(n,t,e){return Vk.apply(this,arguments)}function Vk(){return Vk=(0,xe.Z)(function*(n,t,e){const i=ot(n),r=i.$i.get(t),s=e?"readwrite":"readwrite-primary";try{e||(yield i.persistence.runTransaction("Release target",s,l=>i.persistence.referenceDelegate.removeTarget(l,r)))}catch(l){if(!Xl(l))throw l;He("LocalStore",`Failed to update sequence numbers for target ${t}: ${l}`)}i.$i=i.$i.remove(t),i.Bi.delete(r.target)}),Vk.apply(this,arguments)}function RS(n,t,e){const i=ot(n);let r=At.min(),s=C();return i.persistence.runTransaction("Execute query","readonly",l=>function(d,p,_){const b=ot(d),D=b.Bi.get(_);return void 0!==D?ge.resolve(b.$i.get(D)):b.Vs.getTargetData(p,_)}(i,l,ba(t)).next(d=>{if(d)return r=d.lastLimboFreeSnapshotVersion,i.Vs.getMatchingKeysForTargetId(l,d.targetId).next(p=>{s=p})}).next(()=>i.Fi.getDocumentsMatchingQuery(l,t,e?r:At.min(),e?s:C())).next(d=>(GF(i,Mw(t),d),{documents:d,ji:s})))}function HF(n,t){const e=ot(n),i=ot(e.Vs),r=e.$i.get(t);return r?Promise.resolve(r.target):e.persistence.runTransaction("Get target data","readonly",s=>i.te(s,t).next(l=>l?l.target:null))}function jF(n,t){const e=ot(n),i=e.Li.get(t)||At.min();return e.persistence.runTransaction("Get new document changes","readonly",r=>e.Ui.getAllFromCollectionGroup(r,t,ik(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(GF(e,t,r),r))}function GF(n,t,e){let i=At.min();e.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.Li.set(t,i)}function Uk(){return Uk=(0,xe.Z)(function*(n,t,e,i){const r=ot(n);let s=C(),l=vo();for(const _ of e){const b=t.Wi(_.metadata.name);_.document&&(s=s.add(b));const D=t.zi(_);D.setReadTime(t.Hi(_.metadata.readTime)),l=l.insert(b,D)}const d=r.Ui.newChangeBuffer({trackRemovals:!0}),p=yield bv(r,(_=i,ba(Uh(Cn.fromString(`__bundle__/docs/${_}`)))));var _;return r.persistence.runTransaction("Apply bundle documents","readwrite",_=>UF(_,d,l).next(b=>(d.apply(_),b)).next(b=>r.Vs.removeMatchingKeysForTargetId(_,p.targetId).next(()=>r.Vs.addMatchingKeys(_,s,p.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(_,b.Gi,b.Qi)).next(()=>b.Gi)))}),Uk.apply(this,arguments)}function c3(n,t){return Hk.apply(this,arguments)}function Hk(){return Hk=(0,xe.Z)(function*(n,t,e=C()){const i=yield bv(n,ba(Ak(t.bundledQuery))),r=ot(n);return r.persistence.runTransaction("Save named query","readwrite",s=>{const l=nr(t.readTime);if(i.snapshotVersion.compareTo(l)>=0)return r.Ds.saveNamedQuery(s,t);const d=i.withResumeToken(tr.EMPTY_BYTE_STRING,l);return r.$i=r.$i.insert(d.targetId,d),r.Vs.updateTargetData(s,d).next(()=>r.Vs.removeMatchingKeysForTargetId(s,i.targetId)).next(()=>r.Vs.addMatchingKeys(s,e,i.targetId)).next(()=>r.Ds.saveNamedQuery(s,t))})}),Hk.apply(this,arguments)}function zF(n,t){return`firestore_clients_${n}_${t}`}function $F(n,t,e){let i=`firestore_mutations_${n}_${e}`;return t.isAuthenticated()&&(i+=`_${t.uid}`),i}function jk(n,t){return`firestore_targets_${n}_${t}`}class OS{constructor(t,e,i,r){this.user=t,this.batchId=e,this.state=i,this.error=r}static Ji(t,e,i){const r=JSON.parse(i);let s,l="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return l&&r.error&&(l="string"==typeof r.error.message&&"string"==typeof r.error.code,l&&(s=new Be(r.error.code,r.error.message))),l?new OS(t,e,r.state,s):($i("SharedClientState",`Failed to parse mutation state for ID '${e}': ${i}`),null)}Yi(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class Vw{constructor(t,e,i){this.targetId=t,this.state=e,this.error=i}static Ji(t,e){const i=JSON.parse(e);let r,s="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(r=new Be(i.error.code,i.error.message))),s?new Vw(t,i.state,r):($i("SharedClientState",`Failed to parse target state for ID '${t}': ${e}`),null)}Yi(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class PS{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static Ji(t,e){const i=JSON.parse(e);let r="object"==typeof i&&i.activeTargetIds instanceof Array,s=T();for(let l=0;r&&l<i.activeTargetIds.length;++l)r=ak(i.activeTargetIds[l]),s=s.add(i.activeTargetIds[l]);return r?new PS(t,s):($i("SharedClientState",`Failed to parse client data for instance '${t}': ${e}`),null)}}class Gk{constructor(t,e){this.clientId=t,this.onlineState=e}static Ji(t){const e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new Gk(e.clientId,e.onlineState):($i("SharedClientState",`Failed to parse online state: ${t}`),null)}}class zk{constructor(){this.activeTargetIds=T()}Xi(t){this.activeTargetIds=this.activeTargetIds.add(t)}Zi(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Yi(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class $k{constructor(t,e,i,r,s){this.window=t,this.js=e,this.persistenceKey=i,this.tr=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Wi(Qt),this.started=!1,this.ir=[];const l=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.rr=zF(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new zk),this.cr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.ar=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static V(t){return!(!t||!t.localStorage)}start(){var t=this;return(0,xe.Z)(function*(){const e=yield t.syncEngine.Ri();for(const r of e){if(r===t.tr)continue;const s=t.getItem(zF(t.persistenceKey,r));if(s){const l=PS.Ji(r,s);l&&(t.sr=t.sr.insert(l.clientId,l))}}t._r();const i=t.storage.getItem(t.lr);if(i){const r=t.wr(i);r&&t.mr(r)}for(const r of t.ir)t.nr(r);t.ir=[],t.window.addEventListener("pagehide",()=>t.shutdown()),t.started=!0})()}writeSequenceNumber(t){this.setItem(this.ur,JSON.stringify(t))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(t){let e=!1;return this.sr.forEach((i,r)=>{r.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.yr(t,"pending")}updateMutationState(t,e,i){this.yr(t,e,i),this.pr(t)}addLocalQueryTarget(t){let e="not-current";if(this.isActiveQueryTarget(t)){const i=this.storage.getItem(jk(this.persistenceKey,t));if(i){const r=Vw.Ji(t,i);r&&(e=r.state)}}return this.Ir.Xi(t),this._r(),e}removeLocalQueryTarget(t){this.Ir.Zi(t),this._r()}isLocalQueryTarget(t){return this.Ir.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(jk(this.persistenceKey,t))}updateQueryState(t,e,i){this.Tr(t,e,i)}handleUserChange(t,e,i){e.forEach(r=>{this.pr(r)}),this.currentUser=t,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(t){this.Er(t)}notifyBundleLoaded(t){this.Ar(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return He("SharedClientState","READ",t,e),e}setItem(t,e){He("SharedClientState","SET",t,e),this.storage.setItem(t,e)}removeItem(t){He("SharedClientState","REMOVE",t),this.storage.removeItem(t)}nr(t){var e=this;const i=t;if(i.storageArea===this.storage){if(He("SharedClientState","EVENT",i.key,i.newValue),i.key===this.rr)return void $i("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable((0,xe.Z)(function*(){if(e.started){if(null!==i.key)if(e.cr.test(i.key)){if(null==i.newValue){const r=e.Rr(i.key);return e.br(r,null)}{const r=e.Pr(i.key,i.newValue);if(r)return e.br(r.clientId,r)}}else if(e.ar.test(i.key)){if(null!==i.newValue){const r=e.vr(i.key,i.newValue);if(r)return e.Vr(r)}}else if(e.hr.test(i.key)){if(null!==i.newValue){const r=e.Sr(i.key,i.newValue);if(r)return e.Dr(r)}}else if(i.key===e.lr){if(null!==i.newValue){const r=e.wr(i.newValue);if(r)return e.mr(r)}}else if(i.key===e.ur){const r=function(s){let l=_o.ot;if(null!=s)try{const d=JSON.parse(s);Pt("number"==typeof d),l=d}catch(d){$i("SharedClientState","Failed to read sequence number from WebStorage",d)}return l}(i.newValue);r!==_o.ot&&e.sequenceNumberHandler(r)}else if(i.key===e.dr){const r=e.Cr(i.newValue);yield Promise.all(r.map(s=>e.syncEngine.Nr(s)))}}else e.ir.push(i)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(t,e,i){const r=new OS(this.currentUser,t,e,i),s=$F(this.persistenceKey,this.currentUser,t);this.setItem(s,r.Yi())}pr(t){const e=$F(this.persistenceKey,this.currentUser,t);this.removeItem(e)}Er(t){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:t}))}Tr(t,e,i){const r=jk(this.persistenceKey,t),s=new Vw(t,e,i);this.setItem(r,s.Yi())}Ar(t){const e=JSON.stringify(Array.from(t));this.setItem(this.dr,e)}Rr(t){const e=this.cr.exec(t);return e?e[1]:null}Pr(t,e){const i=this.Rr(t);return PS.Ji(i,e)}vr(t,e){const i=this.ar.exec(t),r=Number(i[1]);return OS.Ji(new Ar(void 0!==i[2]?i[2]:null),r,e)}Sr(t,e){const i=this.hr.exec(t),r=Number(i[1]);return Vw.Ji(r,e)}wr(t){return Gk.Ji(t)}Cr(t){return JSON.parse(t)}Vr(t){var e=this;return(0,xe.Z)(function*(){if(t.user.uid===e.currentUser.uid)return e.syncEngine.kr(t.batchId,t.state,t.error);He("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})()}Dr(t){return this.syncEngine.Or(t.targetId,t.state,t.error)}br(t,e){const i=e?this.sr.insert(t,e):this.sr.remove(t),r=this.gr(this.sr),s=this.gr(i),l=[],d=[];return s.forEach(p=>{r.has(p)||l.push(p)}),r.forEach(p=>{s.has(p)||d.push(p)}),this.syncEngine.Mr(l,d).then(()=>{this.sr=i})}mr(t){this.sr.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}gr(t){let e=T();return t.forEach((i,r)=>{e=e.unionWith(r.activeTargetIds)}),e}}class qF{constructor(){this.Fr=new zk,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t){return this.Fr.Xi(t),this.$r[t]||"not-current"}updateQueryState(t,e,i){this.$r[t]=e}removeLocalQueryTarget(t){this.Fr.Zi(t)}isLocalQueryTarget(t){return this.Fr.activeTargetIds.has(t)}clearQueryState(t){delete this.$r[t]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(t){return this.Fr.activeTargetIds.has(t)}start(){return this.Fr=new zk,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class u3{Br(t){}shutdown(){}}class WF{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(t){this.Gr.push(t)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){He("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.Gr)t(0)}Kr(){He("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.Gr)t(1)}static V(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const d3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class h3{constructor(t){this.jr=t.jr,this.Wr=t.Wr}zr(t){this.Hr=t}Jr(t){this.Yr=t}onMessage(t){this.Xr=t}close(){this.Wr()}send(t){this.jr(t)}Zr(){this.Hr()}eo(t){this.Yr(t)}no(t){this.Xr(t)}}class f3 extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.so=(t.ssl?"https":"http")+"://"+t.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(t,e,i,r,s){const l=this.oo(t,e);He("RestConnection","Sending: ",l,i);const d={};return this.uo(d,r,s),this.co(t,l,d,i).then(p=>(He("RestConnection","Received: ",p),p),p=>{throw Oh("RestConnection",`${t} failed with error: `,p,"url: ",l,"request:",i),p})}ao(t,e,i,r,s,l){return this.ro(t,e,i,r,s)}uo(t,e,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+Rh,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((r,s)=>t[s]=r),i&&i.headers.forEach((r,s)=>t[s]=r)}oo(t,e){return`${this.so}/v1/${e}:${d3[t]}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams}co(t,e,i,r){return new Promise((s,l)=>{const d=new ow;d.listenOnce(ek.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case rw.NO_ERROR:const _=d.getResponseJson();He("Connection","XHR received:",JSON.stringify(_)),s(_);break;case rw.TIMEOUT:He("Connection",'RPC "'+t+'" timed out'),l(new Be(ve.DEADLINE_EXCEEDED,"Request time out"));break;case rw.HTTP_ERROR:const b=d.getStatus();if(He("Connection",'RPC "'+t+'" failed with status:',b,"response text:",d.getResponseText()),b>0){const D=d.getResponseJson().error;if(D&&D.status&&D.message){const I=function(P){const U=P.toLowerCase().replace(/_/g,"-");return Object.values(ve).indexOf(U)>=0?U:ve.UNKNOWN}(D.status);l(new Be(I,D.message))}else l(new Be(ve.UNKNOWN,"Server responded with status "+d.getStatus()))}else l(new Be(ve.UNAVAILABLE,"Connection failed."));break;default:gt()}}finally{He("Connection",'RPC "'+t+'" completed.')}});const p=JSON.stringify(r);d.send(e,"POST",p,i,15)})}ho(t,e,i){const r=[this.so,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=iw(),l=Vx(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(d.xmlHttpFactory=new sw({})),this.uo(d.initMessageHeaders,e,i),(0,L.uI)()||(0,L.b$)()||(0,L.d)()||(0,L.w1)()||(0,L.Mn)()||(0,L.ru)()||(d.httpHeadersOverwriteParam="$httpHeaders");const p=r.join("");He("Connection","Creating WebChannel: "+p,d);const _=s.createWebChannel(p,d);let b=!1,D=!1;const I=new h3({jr:U=>{D?He("Connection","Not sending because WebChannel is closed:",U):(b||(He("Connection","Opening WebChannel transport."),_.open(),b=!0),He("Connection","WebChannel sending:",U),_.send(U))},Wr:()=>_.close()}),P=(U,Q,le)=>{U.listen(Q,Ye=>{try{le(Ye)}catch(et){setTimeout(()=>{throw et},0)}})};return P(_,Kp.EventType.OPEN,()=>{D||He("Connection","WebChannel transport opened.")}),P(_,Kp.EventType.CLOSE,()=>{D||(D=!0,He("Connection","WebChannel transport closed"),I.eo())}),P(_,Kp.EventType.ERROR,U=>{D||(D=!0,Oh("Connection","WebChannel transport errored:",U),I.eo(new Be(ve.UNAVAILABLE,"The operation could not be completed")))}),P(_,Kp.EventType.MESSAGE,U=>{var Q;if(!D){const le=U.data[0];Pt(!!le);const Ye=le,et=Ye.error||(null===(Q=Ye[0])||void 0===Q?void 0:Q.error);if(et){He("Connection","WebChannel received error:",et);const rt=et.status;let Xe=function(Lt){const bn=dr[Lt];if(void 0!==bn)return wS(bn)}(rt),Ot=et.message;void 0===Xe&&(Xe=ve.INTERNAL,Ot="Unknown error status: "+rt+" with message "+et.message),D=!0,I.eo(new Be(Xe,Ot)),_.close()}else He("Connection","WebChannel received:",le),I.no(le)}}),P(l,zN.STAT_EVENT,U=>{U.stat===X_.PROXY?He("Connection","Detected buffering proxy"):U.stat===X_.NOPROXY&&He("Connection","Detected no buffering proxy")}),setTimeout(()=>{I.Zr()},0),I}}function YF(){return"undefined"!=typeof window?window:null}function NS(){return"undefined"!=typeof document?document:null}function Uw(n){return new Fn(n,!0)}class qk{constructor(t,e,i=1e3,r=1.5,s=6e4){this.js=t,this.timerId=e,this.lo=i,this.fo=r,this._o=s,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(t){this.cancel();const e=Math.floor(this.wo+this.To()),i=Math.max(0,Date.now()-this.yo),r=Math.max(0,e-i);r>0&&He("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.wo} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,r,()=>(this.yo=Date.now(),t())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class ZF{constructor(t,e,i,r,s,l,d,p){this.js=t,this.Ao=i,this.Ro=r,this.bo=s,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new qk(t,e)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var t=this;return(0,xe.Z)(function*(){t.Do()&&(yield t.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Oo()))}Mo(t){this.Fo(),this.stream.send(t)}Oo(){var t=this;return(0,xe.Z)(function*(){if(t.Co())return t.close(0)})()}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}close(t,e){var i=this;return(0,xe.Z)(function*(){i.Fo(),i.$o(),i.So.cancel(),i.Po++,4!==t?i.So.reset():e&&e.code===ve.RESOURCE_EXHAUSTED?($i(e.toString()),$i("Using maximum backoff delay to prevent overloading the backend."),i.So.po()):e&&e.code===ve.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.Bo(),i.stream.close(),i.stream=null),i.state=t,yield i.listener.Jr(e)})()}Bo(){}auth(){this.state=1;const t=this.Lo(this.Po),e=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Po===e&&this.Uo(i,r)},i=>{t(()=>{const r=new Be(ve.UNKNOWN,"Fetching auth token failed: "+i.message);return this.qo(r)})})}Uo(t,e){const i=this.Lo(this.Po);this.stream=this.Ko(t,e),this.stream.zr(()=>{i(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(r=>{i(()=>this.qo(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}xo(){var t=this;this.state=5,this.So.Io((0,xe.Z)(function*(){t.state=0,t.start()}))}qo(t){return He("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Lo(t){return e=>{this.js.enqueueAndForget(()=>this.Po===t?e():(He("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class p3 extends ZF{constructor(t,e,i,r,s,l){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,r,l),this.wt=s}Ko(t,e){return this.bo.ho("Listen",t,e)}onMessage(t){this.So.reset();const e=function oz(n,t){let e;if("targetChange"in t){const i="NO_CHANGE"===(p=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===p?1:"REMOVE"===p?2:"CURRENT"===p?3:"RESET"===p?4:gt(),r=t.targetChange.targetIds||[],s=function(p,_){return p.dt?(Pt(void 0===_||"string"==typeof _),tr.fromBase64String(_||"")):(Pt(void 0===_||_ instanceof Uint8Array),tr.fromUint8Array(_||new Uint8Array))}(n,t.targetChange.resumeToken),l=t.targetChange.cause,d=l&&function(p){const _=void 0===p.code?ve.UNKNOWN:wS(p.code);return new Be(_,p.message||"")}(l);e=new Te(i,r,s,d||null)}else if("documentChange"in t){const i=t.documentChange,r=Yo(n,i.document.name),s=nr(i.document.updateTime),l=new Gr({mapValue:{fields:i.document.fields}}),d=mn.newFoundDocument(r,s,l);e=new q(i.targetIds||[],i.removedTargetIds||[],d.key,d)}else if("documentDelete"in t){const i=t.documentDelete,r=Yo(n,i.document),s=i.readTime?nr(i.readTime):At.min(),l=mn.newNoDocument(r,s);e=new q([],i.removedTargetIds||[],l.key,l)}else if("documentRemove"in t){const i=t.documentRemove,r=Yo(n,i.document);e=new q([],i.removedTargetIds||[],r,null)}else{if(!("filter"in t))return gt();{const i=t.filter,s=new ZN(i.count||0);e=new ne(i.targetId,s)}}var p;return e}(this.wt,t),i=function(r){if(!("targetChange"in r))return At.min();const s=r.targetChange;return s.targetIds&&s.targetIds.length?At.min():s.readTime?nr(s.readTime):At.min()}(t);return this.listener.Go(e,i)}Qo(t){const e={};e.database=od(this.wt),e.addTarget=function(r,s){let l;const d=s.target;return l=lv(d)?{documents:eF(r,d)}:{query:tF(r,d)},l.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?l.resumeToken=$c(r,s.resumeToken):s.snapshotVersion.compareTo(At.min())>0&&(l.readTime=zr(r,s.snapshotVersion.toTimestamp())),l}(this.wt,t);const i=function lz(n,t){const e=function(i,r){switch(r){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return gt()}}(0,t.purpose);return null==e?null:{"goog-listen-tags":e}}(0,t);i&&(e.labels=i),this.Mo(e)}jo(t){const e={};e.database=od(this.wt),e.removeTarget=t,this.Mo(e)}}class m3 extends ZF{constructor(t,e,i,r,s,l){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,r,l),this.wt=s,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(t,e){return this.bo.ho("Write",t,e)}onMessage(t){if(Pt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Wo){this.So.reset();const e=function az(n,t){return n&&n.length>0?(Pt(void 0!==t),n.map(e=>function(i,r){let s=nr(i.updateTime?i.updateTime:r);return s.isEqual(At.min())&&(s=nr(r)),new _S(s,i.transformResults||[])}(e,t))):[]}(t.writeResults,t.commitTime),i=nr(t.commitTime);return this.listener.Jo(i,e)}return Pt(!t.writeResults||0===t.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const t={};t.database=od(this.wt),this.Mo(t)}Ho(t){const e={streamToken:this.lastStreamToken,writes:t.map(i=>kw(this.wt,i))};this.Mo(e)}}class g3 extends class{}{constructor(t,e,i,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.bo=i,this.wt=r,this.Zo=!1}tu(){if(this.Zo)throw new Be(ve.FAILED_PRECONDITION,"The client has already been terminated.")}ro(t,e,i){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.bo.ro(t,e,i,r,s)).catch(r=>{throw"FirebaseError"===r.name?(r.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new Be(ve.UNKNOWN,r.toString())})}ao(t,e,i,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,l])=>this.bo.ao(t,e,i,s,l,r)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Be(ve.UNKNOWN,s.toString())})}terminate(){this.Zo=!0}}class _3{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(t){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ru("Offline")))}set(t){this.cu(),this.eu=0,"Online"===t&&(this.su=!1),this.ru(t)}ru(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ou(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?($i(e),this.su=!1):He("OnlineStateTracker",e)}cu(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class v3{constructor(t,e,i,r,s){var l=this;this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=s,this.du.Br(d=>{i.enqueueAndForget((0,xe.Z)(function*(){var p;Qh(l)&&(He("RemoteStore","Restarting streams for network reachability change."),yield(p=(0,xe.Z)(function*(_){const b=ot(_);b.lu.add(4),yield Cv(b),b._u.set("Unknown"),b.lu.delete(4),yield Hw(b)}),function(_){return p.apply(this,arguments)})(l))}))}),this._u=new _3(i,r)}}function Hw(n){return Wk.apply(this,arguments)}function Wk(){return Wk=(0,xe.Z)(function*(n){if(Qh(n))for(const t of n.fu)yield t(!0)}),Wk.apply(this,arguments)}function Cv(n){return Yk.apply(this,arguments)}function Yk(){return Yk=(0,xe.Z)(function*(n){for(const t of n.fu)yield t(!1)}),Yk.apply(this,arguments)}function FS(n,t){const e=ot(n);e.hu.has(t.targetId)||(e.hu.set(t.targetId,t),Qk(e)?Kk(e):Dv(e).Co()&&Zk(e,t))}function jw(n,t){const e=ot(n),i=Dv(e);e.hu.delete(t),i.Co()&&KF(e,t),0===e.hu.size&&(i.Co()?i.ko():Qh(e)&&e._u.set("Unknown"))}function Zk(n,t){n.wu.Nt(t.targetId),Dv(n).Qo(t)}function KF(n,t){n.wu.Nt(t),Dv(n).jo(t)}function Kk(n){n.wu=new it({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),te:t=>n.hu.get(t)||null}),Dv(n).start(),n._u.iu()}function Qk(n){return Qh(n)&&!Dv(n).Do()&&n.hu.size>0}function Qh(n){return 0===ot(n).lu.size}function QF(n){n.wu=void 0}function y3(n){return Xk.apply(this,arguments)}function Xk(){return Xk=(0,xe.Z)(function*(n){n.hu.forEach((t,e)=>{Zk(n,t)})}),Xk.apply(this,arguments)}function b3(n,t){return Jk.apply(this,arguments)}function Jk(){return Jk=(0,xe.Z)(function*(n,t){QF(n),Qk(n)?(n._u.uu(t),Kk(n)):n._u.set("Unknown")}),Jk.apply(this,arguments)}function w3(n,t,e){return eR.apply(this,arguments)}function eR(){return eR=(0,xe.Z)(function*(n,t,e){if(n._u.set("Online"),t instanceof Te&&2===t.state&&t.cause)try{yield(i=(0,xe.Z)(function*(r,s){const l=s.cause;for(const d of s.targetIds)r.hu.has(d)&&(yield r.remoteSyncer.rejectListen(d,l),r.hu.delete(d),r.wu.removeTarget(d))}),function(r,s){return i.apply(this,arguments)})(n,t)}catch(i){He("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),i),yield LS(n,i)}else if(t instanceof q?n.wu.Ut(t):t instanceof ne?n.wu.zt(t):n.wu.Gt(t),!e.isEqual(At.min()))try{const i=yield VF(n.localStore);e.compareTo(i)>=0&&(yield function(r,s){const l=r.wu.Yt(s);return l.targetChanges.forEach((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const _=r.hu.get(p);_&&r.hu.set(p,_.withResumeToken(d.resumeToken,s))}}),l.targetMismatches.forEach(d=>{const p=r.hu.get(d);if(!p)return;r.hu.set(d,p.withResumeToken(tr.EMPTY_BYTE_STRING,p.snapshotVersion)),KF(r,d);const _=new Yh(p.target,d,1,p.sequenceNumber);Zk(r,_)}),r.remoteSyncer.applyRemoteEvent(l)}(n,e))}catch(i){He("RemoteStore","Failed to raise snapshot:",i),yield LS(n,i)}var i}),eR.apply(this,arguments)}function LS(n,t,e){return tR.apply(this,arguments)}function tR(){return tR=(0,xe.Z)(function*(n,t,e){if(!Xl(t))throw t;n.lu.add(1),yield Cv(n),n._u.set("Offline"),e||(e=()=>VF(n.localStore)),n.asyncQueue.enqueueRetryable((0,xe.Z)(function*(){He("RemoteStore","Retrying IndexedDB access"),yield e(),n.lu.delete(1),yield Hw(n)}))}),tR.apply(this,arguments)}function XF(n,t){return t().catch(e=>LS(n,e,t))}function Ev(n){return nR.apply(this,arguments)}function nR(){return nR=(0,xe.Z)(function*(n){const t=ot(n),e=Xh(t);let i=t.au.length>0?t.au[t.au.length-1].batchId:-1;for(;C3(t);)try{const r=yield a3(t.localStore,i);if(null===r){0===t.au.length&&e.ko();break}i=r.batchId,E3(t,r)}catch(r){yield LS(t,r)}JF(t)&&eL(t)}),nR.apply(this,arguments)}function C3(n){return Qh(n)&&n.au.length<10}function E3(n,t){n.au.push(t);const e=Xh(n);e.Co()&&e.zo&&e.Ho(t.mutations)}function JF(n){return Qh(n)&&!Xh(n).Do()&&n.au.length>0}function eL(n){Xh(n).start()}function D3(n){return iR.apply(this,arguments)}function iR(){return iR=(0,xe.Z)(function*(n){Xh(n).Xo()}),iR.apply(this,arguments)}function x3(n){return rR.apply(this,arguments)}function rR(){return rR=(0,xe.Z)(function*(n){const t=Xh(n);for(const e of n.au)t.Ho(e.mutations)}),rR.apply(this,arguments)}function S3(n,t,e){return sR.apply(this,arguments)}function sR(){return sR=(0,xe.Z)(function*(n,t,e){const i=n.au.shift(),r=Tk.from(i,t,e);yield XF(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield Ev(n)}),sR.apply(this,arguments)}function M3(n,t){return oR.apply(this,arguments)}function oR(){return oR=(0,xe.Z)(function*(n,t){var e;t&&Xh(n).zo&&(yield(e=(0,xe.Z)(function*(i,r){if(Ek(s=r.code)&&s!==ve.ABORTED){const l=i.au.shift();Xh(i).No(),yield XF(i,()=>i.remoteSyncer.rejectFailedWrite(l.batchId,r)),yield Ev(i)}var s}),function(i,r){return e.apply(this,arguments)})(n,t)),JF(n)&&eL(n)}),oR.apply(this,arguments)}function tL(n,t){return aR.apply(this,arguments)}function aR(){return aR=(0,xe.Z)(function*(n,t){const e=ot(n);e.asyncQueue.verifyOperationInProgress(),He("RemoteStore","RemoteStore received new credentials");const i=Qh(e);e.lu.add(3),yield Cv(e),i&&e._u.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(t),e.lu.delete(3),yield Hw(e)}),aR.apply(this,arguments)}function lR(n,t){return cR.apply(this,arguments)}function cR(){return cR=(0,xe.Z)(function*(n,t){const e=ot(n);t?(e.lu.delete(2),yield Hw(e)):t||(e.lu.add(2),yield Cv(e),e._u.set("Unknown"))}),cR.apply(this,arguments)}function Dv(n){return n.mu||(n.mu=function(t,e,i){const r=ot(t);return r.tu(),new p3(e,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,i)}(n.datastore,n.asyncQueue,{zr:y3.bind(null,n),Jr:b3.bind(null,n),Go:w3.bind(null,n)}),n.fu.push(function(){var t=(0,xe.Z)(function*(e){e?(n.mu.No(),Qk(n)?Kk(n):n._u.set("Unknown")):(yield n.mu.stop(),QF(n))});return function(e){return t.apply(this,arguments)}}())),n.mu}function Xh(n){return n.gu||(n.gu=function(t,e,i){const r=ot(t);return r.tu(),new m3(e,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,i)}(n.datastore,n.asyncQueue,{zr:D3.bind(null,n),Jr:M3.bind(null,n),Yo:x3.bind(null,n),Jo:S3.bind(null,n)}),n.fu.push(function(){var t=(0,xe.Z)(function*(e){e?(n.gu.No(),yield Ev(n)):(yield n.gu.stop(),n.au.length>0&&(He("RemoteStore",`Stopping write stream with ${n.au.length} pending writes`),n.au=[]))});return function(e){return t.apply(this,arguments)}}())),n.gu}class uR{constructor(t,e,i,r,s){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new kr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(t,e,i,r,s){const l=Date.now()+i,d=new uR(t,e,l,r,s);return d.start(i),d}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Be(ve.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xv(n,t){if($i("AsyncQueue",`${t}: ${n}`),Xl(n))return new Be(ve.UNAVAILABLE,`${t}: ${n}`);throw n}class Sv{constructor(t){this.comparator=t?(e,i)=>t(e,i)||nt.comparator(e.key,i.key):(e,i)=>nt.comparator(e.key,i.key),this.keyedMap=o(),this.sortedSet=new Wi(this.comparator)}static emptySet(t){return new Sv(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Sv)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const i=new Sv;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}class nL{constructor(){this.yu=new Wi(nt.comparator)}track(t){const e=t.doc.key,i=this.yu.get(e);i?0!==t.type&&3===i.type?this.yu=this.yu.insert(e,t):3===t.type&&1!==i.type?this.yu=this.yu.insert(e,{type:i.type,doc:t.doc}):2===t.type&&2===i.type?this.yu=this.yu.insert(e,{type:2,doc:t.doc}):2===t.type&&0===i.type?this.yu=this.yu.insert(e,{type:0,doc:t.doc}):1===t.type&&0===i.type?this.yu=this.yu.remove(e):1===t.type&&2===i.type?this.yu=this.yu.insert(e,{type:1,doc:i.doc}):0===t.type&&1===i.type?this.yu=this.yu.insert(e,{type:2,doc:t.doc}):gt():this.yu=this.yu.insert(e,t)}pu(){const t=[];return this.yu.inorderTraversal((e,i)=>{t.push(i)}),t}}class Mv{constructor(t,e,i,r,s,l,d,p){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=l,this.syncStateChanged=d,this.excludesMetadataChanges=p}static fromInitialDocuments(t,e,i,r){const s=[];return e.forEach(l=>{s.push({type:0,doc:l})}),new Mv(t,e,Sv.emptySet(e),s,i,r,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&sm(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==i[r].type||!e[r].doc.isEqual(i[r].doc))return!1;return!0}}class T3{constructor(){this.Iu=void 0,this.listeners=[]}}class I3{constructor(){this.queries=new rd(t=>om(t),sm),this.onlineState="Unknown",this.Tu=new Set}}function dR(n,t){return hR.apply(this,arguments)}function hR(){return hR=(0,xe.Z)(function*(n,t){const e=ot(n),i=t.query;let r=!1,s=e.queries.get(i);if(s||(r=!0,s=new T3),r)try{s.Iu=yield e.onListen(i)}catch(l){const d=xv(l,`Initialization of query '${xw(t.query)}' failed`);return void t.onError(d)}e.queries.set(i,s),s.listeners.push(t),t.Eu(e.onlineState),s.Iu&&t.Au(s.Iu)&&mR(e)}),hR.apply(this,arguments)}function fR(n,t){return pR.apply(this,arguments)}function pR(){return pR=(0,xe.Z)(function*(n,t){const e=ot(n),i=t.query;let r=!1;const s=e.queries.get(i);if(s){const l=s.listeners.indexOf(t);l>=0&&(s.listeners.splice(l,1),r=0===s.listeners.length)}if(r)return e.queries.delete(i),e.onUnlisten(i)}),pR.apply(this,arguments)}function A3(n,t){const e=ot(n);let i=!1;for(const r of t){const l=e.queries.get(r.query);if(l){for(const d of l.listeners)d.Au(r)&&(i=!0);l.Iu=r}}i&&mR(e)}function k3(n,t,e){const i=ot(n),r=i.queries.get(t);if(r)for(const s of r.listeners)s.onError(e);i.queries.delete(t)}function mR(n){n.Tu.forEach(t=>{t.next()})}class gR{constructor(t,e,i){this.query=t,this.Ru=e,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=i||{}}Au(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)3!==r.type&&i.push(r);t=new Mv(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}let e=!1;return this.bu?this.vu(t)&&(this.Ru.next(t),e=!0):this.Vu(t,this.onlineState)&&(this.Su(t),e=!0),this.Pu=t,e}onError(t){this.Ru.error(t)}Eu(t){this.onlineState=t;let e=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,t)&&(this.Su(this.Pu),e=!0),e}Vu(t,e){return!t.fromCache||!(this.options.Du&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)}vu(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(t){t=Mv.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.bu=!0,this.Ru.next(t)}}class R3{constructor(t,e){this.payload=t,this.byteLength=e}Cu(){return"metadata"in this.payload}}class iL{constructor(t){this.wt=t}Wi(t){return Yo(this.wt,t)}zi(t){return t.metadata.exists?JN(this.wt,t.document,!1):mn.newNoDocument(this.Wi(t.metadata.name),this.Hi(t.metadata.readTime))}Hi(t){return nr(t)}}class O3{constructor(t,e,i){this.xu=t,this.localStore=e,this.wt=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=rL(t)}Nu(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.payload.namedQuery)this.queries.push(t.payload.namedQuery);else if(t.payload.documentMetadata){this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e;const i=Cn.fromString(t.payload.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}ku(t){const e=new Map,i=new iL(this.wt);for(const r of t)if(r.metadata.queries){const s=i.Wi(r.metadata.name);for(const l of r.metadata.queries){const d=(e.get(l)||C()).add(s);e.set(l,d)}}return e}complete(){var t=this;return(0,xe.Z)(function*(){const e=yield function l3(n,t,e,i){return Uk.apply(this,arguments)}(t.localStore,new iL(t.wt),t.documents,t.xu.id),i=t.ku(t.documents);for(const r of t.queries)yield c3(t.localStore,r,i.get(r.name));return t.progress.taskState="Success",{progress:t.progress,Ou:t.collectionGroups,Mu:e}})()}}function rL(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class sL{constructor(t){this.key=t}}class oL{constructor(t){this.key=t}}class aL{constructor(t,e){this.query=t,this.Fu=e,this.$u=null,this.current=!1,this.Bu=C(),this.mutatedKeys=C(),this.Lu=jc(t),this.Uu=new Sv(this.Lu)}get qu(){return this.Fu}Ku(t,e){const i=e?e.Gu:new nL,r=e?e.Uu:this.Uu;let s=e?e.mutatedKeys:this.mutatedKeys,l=r,d=!1;const p="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,_="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((b,D)=>{const I=r.get(b),P=Sw(this.query,D)?D:null,U=!!I&&this.mutatedKeys.has(I.key),Q=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let le=!1;I&&P?I.data.isEqual(P.data)?U!==Q&&(i.track({type:3,doc:P}),le=!0):this.Qu(I,P)||(i.track({type:2,doc:P}),le=!0,(p&&this.Lu(P,p)>0||_&&this.Lu(P,_)<0)&&(d=!0)):!I&&P?(i.track({type:0,doc:P}),le=!0):I&&!P&&(i.track({type:1,doc:I}),le=!0,(p||_)&&(d=!0)),le&&(P?(l=l.add(P),s=Q?s.add(b):s.delete(b)):(l=l.delete(b),s=s.delete(b)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const b="F"===this.query.limitType?l.last():l.first();l=l.delete(b.key),s=s.delete(b.key),i.track({type:1,doc:b})}return{Uu:l,Gu:i,Oi:d,mutatedKeys:s}}Qu(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i){const r=this.Uu;this.Uu=t.Uu,this.mutatedKeys=t.mutatedKeys;const s=t.Gu.pu();s.sort((_,b)=>function(D,I){const P=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return gt()}};return P(D)-P(I)}(_.type,b.type)||this.Lu(_.doc,b.doc)),this.ju(i);const l=e?this.Wu():[],d=0===this.Bu.size&&this.current?1:0,p=d!==this.$u;return this.$u=d,0!==s.length||p?{snapshot:new Mv(this.query,t.Uu,r,s,t.mutatedKeys,0===d,p,!1),zu:l}:{zu:l}}Eu(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new nL,mutatedKeys:this.mutatedKeys,Oi:!1},!1)):{zu:[]}}Hu(t){return!this.Fu.has(t)&&!!this.Uu.has(t)&&!this.Uu.get(t).hasLocalMutations}ju(t){t&&(t.addedDocuments.forEach(e=>this.Fu=this.Fu.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Fu=this.Fu.delete(e)),this.current=t.current)}Wu(){if(!this.current)return[];const t=this.Bu;this.Bu=C(),this.Uu.forEach(i=>{this.Hu(i.key)&&(this.Bu=this.Bu.add(i.key))});const e=[];return t.forEach(i=>{this.Bu.has(i)||e.push(new oL(i))}),this.Bu.forEach(i=>{t.has(i)||e.push(new sL(i))}),e}Ju(t){this.Fu=t.ji,this.Bu=C();const e=this.Ku(t.documents);return this.applyChanges(e,!0)}Yu(){return Mv.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class P3{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class N3{constructor(t){this.key=t,this.Xu=!1}}class F3{constructor(t,e,i,r,s,l){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=l,this.Zu={},this.tc=new rd(d=>om(d),sm),this.ec=new Map,this.nc=new Set,this.sc=new Wi(nt.comparator),this.ic=new Map,this.rc=new Ok,this.oc={},this.uc=new Map,this.cc=_m.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return!0===this.ac}}function L3(n,t){return _R.apply(this,arguments)}function _R(){return _R=(0,xe.Z)(function*(n,t){const e=UR(n);let i,r;const s=e.tc.get(t);if(s)i=s.targetId,e.sharedClientState.addLocalQueryTarget(i),r=s.view.Yu();else{const l=yield bv(e.localStore,ba(t));e.isPrimaryClient&&FS(e.remoteStore,l);const d=e.sharedClientState.addLocalQueryTarget(l.targetId);i=l.targetId,r=yield vR(e,t,i,"current"===d)}return r}),_R.apply(this,arguments)}function vR(n,t,e,i){return yR.apply(this,arguments)}function yR(){return yR=(0,xe.Z)(function*(n,t,e,i){n.hc=(b,D,I)=>{return(P=(0,xe.Z)(function*(U,Q,le,Ye){let et=Q.view.Ku(le);et.Oi&&(et=yield RS(U.localStore,Q.query,!1).then(({documents:Ot})=>Q.view.Ku(Ot,et)));const rt=Ye&&Ye.targetChanges.get(Q.targetId),Xe=Q.view.applyChanges(et,U.isPrimaryClient,rt);return IR(U,Q.targetId,Xe.zu),Xe.snapshot}),function(U,Q,le,Ye){return P.apply(this,arguments)})(n,b,D,I);var P};const r=yield RS(n.localStore,t,!0),s=new aL(t,r.ji),l=s.Ku(r.documents),d=V.createSynthesizedTargetChangeForCurrentChange(e,i&&"Offline"!==n.onlineState),p=s.applyChanges(l,n.isPrimaryClient,d);IR(n,e,p.zu);const _=new P3(t,e,s);return n.tc.set(t,_),n.ec.has(e)?n.ec.get(e).push(t):n.ec.set(e,[t]),p.snapshot}),yR.apply(this,arguments)}function B3(n,t){return bR.apply(this,arguments)}function bR(){return bR=(0,xe.Z)(function*(n,t){const e=ot(n),i=e.tc.get(t),r=e.ec.get(i.targetId);if(r.length>1)return e.ec.set(i.targetId,r.filter(s=>!sm(s,t))),void e.tc.delete(t);e.isPrimaryClient?(e.sharedClientState.removeLocalQueryTarget(i.targetId),e.sharedClientState.isActiveQueryTarget(i.targetId)||(yield wv(e.localStore,i.targetId,!1).then(()=>{e.sharedClientState.clearQueryState(i.targetId),jw(e.remoteStore,i.targetId),Tv(e,i.targetId)}).catch(Ql))):(Tv(e,i.targetId),yield wv(e.localStore,i.targetId,!0))}),bR.apply(this,arguments)}function wR(){return wR=(0,xe.Z)(function*(n,t,e){const i=HR(n);try{const r=yield function(s,l){const d=ot(s),p=di.now(),_=l.reduce((I,P)=>I.add(P.key),C());let b,D;return d.persistence.runTransaction("Locally write mutations","readwrite",I=>{let P=vo(),U=C();return d.Ui.getEntries(I,_).next(Q=>{P=Q,P.forEach((le,Ye)=>{Ye.isValidDocument()||(U=U.add(le))})}).next(()=>d.localDocuments.getOverlayedDocuments(I,P)).next(Q=>{b=Q;const le=[];for(const Ye of l){const et=Iw(Ye,b.get(Ye.key).overlayedDocument);null!=et&&le.push(new zc(Ye.key,et,av(et.value.mapValue),Di.exists(!0)))}return d.mutationQueue.addMutationBatch(I,p,le,l)}).next(Q=>{D=Q;const le=Q.applyToLocalDocumentSet(b,U);return d.documentOverlayCache.saveOverlays(I,Q.batchId,le)})}).then(()=>({batchId:D.batchId,changes:a(b)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(s,l,d){let p=s.oc[s.currentUser.toKey()];p||(p=new Wi(Qt)),p=p.insert(l,d),s.oc[s.currentUser.toKey()]=p}(i,r.batchId,e),yield ad(i,r.changes),yield Ev(i.remoteStore)}catch(r){const s=xv(r,"Failed to persist write");e.reject(s)}}),wR.apply(this,arguments)}function lL(n,t){return CR.apply(this,arguments)}function CR(){return CR=(0,xe.Z)(function*(n,t){const e=ot(n);try{const i=yield o3(e.localStore,t);t.targetChanges.forEach((r,s)=>{const l=e.ic.get(s);l&&(Pt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?l.Xu=!0:r.modifiedDocuments.size>0?Pt(l.Xu):r.removedDocuments.size>0&&(Pt(l.Xu),l.Xu=!1))}),yield ad(e,i,t)}catch(i){yield Ql(i)}}),CR.apply(this,arguments)}function cL(n,t,e){const i=ot(n);if(i.isPrimaryClient&&0===e||!i.isPrimaryClient&&1===e){const r=[];i.tc.forEach((s,l)=>{const d=l.view.Eu(t);d.snapshot&&r.push(d.snapshot)}),function(s,l){const d=ot(s);d.onlineState=l;let p=!1;d.queries.forEach((_,b)=>{for(const D of b.listeners)D.Eu(l)&&(p=!0)}),p&&mR(d)}(i.eventManager,t),r.length&&i.Zu.Go(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}function U3(n,t,e){return ER.apply(this,arguments)}function ER(){return ER=(0,xe.Z)(function*(n,t,e){const i=ot(n);i.sharedClientState.updateQueryState(t,"rejected",e);const r=i.ic.get(t),s=r&&r.key;if(s){let l=new Wi(nt.comparator);l=l.insert(s,mn.newNoDocument(s,At.min()));const d=C().add(s),p=new R(At.min(),new Map,new Yn(Qt),l,d);yield lL(i,p),i.sc=i.sc.remove(s),i.ic.delete(t),AR(i)}else yield wv(i.localStore,t,!1).then(()=>Tv(i,t,e)).catch(Ql)}),ER.apply(this,arguments)}function H3(n,t){return DR.apply(this,arguments)}function DR(){return DR=(0,xe.Z)(function*(n,t){const e=ot(n),i=t.batch.batchId;try{const r=yield s3(e.localStore,t);TR(e,i,null),MR(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),yield ad(e,r)}catch(r){yield Ql(r)}}),DR.apply(this,arguments)}function j3(n,t,e){return xR.apply(this,arguments)}function xR(){return xR=(0,xe.Z)(function*(n,t,e){const i=ot(n);try{const r=yield function(s,l){const d=ot(s);return d.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let _;return d.mutationQueue.lookupMutationBatch(p,l).next(b=>(Pt(null!==b),_=b.keys(),d.mutationQueue.removeMutationBatch(p,b))).next(()=>d.mutationQueue.performConsistencyCheck(p)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(p,_,l)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,_)).next(()=>d.localDocuments.getDocuments(p,_))})}(i.localStore,t);TR(i,t,e),MR(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),yield ad(i,r)}catch(r){yield Ql(r)}}),xR.apply(this,arguments)}function SR(){return SR=(0,xe.Z)(function*(n,t){const e=ot(n);Qh(e.remoteStore)||He("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(s){const l=ot(s);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",d=>l.mutationQueue.getHighestUnacknowledgedBatchId(d))}(e.localStore);if(-1===i)return void t.resolve();const r=e.uc.get(i)||[];r.push(t),e.uc.set(i,r)}catch(i){const r=xv(i,"Initialization of waitForPendingWrites() operation failed");t.reject(r)}}),SR.apply(this,arguments)}function MR(n,t){(n.uc.get(t)||[]).forEach(e=>{e.resolve()}),n.uc.delete(t)}function TR(n,t,e){const i=ot(n);let r=i.oc[i.currentUser.toKey()];if(r){const s=r.get(t);s&&(e?s.reject(e):s.resolve(),r=r.remove(t)),i.oc[i.currentUser.toKey()]=r}}function Tv(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const i of n.ec.get(t))n.tc.delete(i),e&&n.Zu.lc(i,e);n.ec.delete(t),n.isPrimaryClient&&n.rc.us(t).forEach(i=>{n.rc.containsKey(i)||uL(n,i)})}function uL(n,t){n.nc.delete(t.path.canonicalString());const e=n.sc.get(t);null!==e&&(jw(n.remoteStore,e),n.sc=n.sc.remove(t),n.ic.delete(e),AR(n))}function IR(n,t,e){for(const i of e)i instanceof sL?(n.rc.addReference(i.key,t),z3(n,i)):i instanceof oL?(He("SyncEngine","Document no longer in limbo: "+i.key),n.rc.removeReference(i.key,t),n.rc.containsKey(i.key)||uL(n,i.key)):gt()}function z3(n,t){const e=t.key,i=e.path.canonicalString();n.sc.get(e)||n.nc.has(i)||(He("SyncEngine","New document in limbo: "+e),n.nc.add(i),AR(n))}function AR(n){for(;n.nc.size>0&&n.sc.size<n.maxConcurrentLimboResolutions;){const t=n.nc.values().next().value;n.nc.delete(t);const e=new nt(Cn.fromString(t)),i=n.cc.next();n.ic.set(i,new N3(e)),n.sc=n.sc.insert(e,i),FS(n.remoteStore,new Yh(ba(Uh(e.path)),i,2,_o.ot))}}function ad(n,t,e){return kR.apply(this,arguments)}function kR(){return kR=(0,xe.Z)(function*(n,t,e){const i=ot(n),r=[],s=[],l=[];var d;i.tc.isEmpty()||(i.tc.forEach((d,p)=>{l.push(i.hc(p,t,e).then(_=>{if(_){i.isPrimaryClient&&i.sharedClientState.updateQueryState(p.targetId,_.fromCache?"not-current":"current"),r.push(_);const b=Lk.Vi(p.targetId,_);s.push(b)}}))}),yield Promise.all(l),i.Zu.Go(r),yield(d=(0,xe.Z)(function*(p,_){const b=ot(p);try{yield b.persistence.runTransaction("notifyLocalViewChanges","readwrite",D=>ge.forEach(_,I=>ge.forEach(I.Pi,P=>b.persistence.referenceDelegate.addReference(D,I.targetId,P)).next(()=>ge.forEach(I.vi,P=>b.persistence.referenceDelegate.removeReference(D,I.targetId,P)))))}catch(D){if(!Xl(D))throw D;He("LocalStore","Failed to update sequence numbers: "+D)}for(const D of _){const I=D.targetId;if(!D.fromCache){const P=b.$i.get(I),Q=P.withLastLimboFreeSnapshotVersion(P.snapshotVersion);b.$i=b.$i.insert(I,Q)}}}),function(p,_){return d.apply(this,arguments)})(i.localStore,s))}),kR.apply(this,arguments)}function $3(n,t){return RR.apply(this,arguments)}function RR(){return RR=(0,xe.Z)(function*(n,t){const e=ot(n);if(!e.currentUser.isEqual(t)){He("SyncEngine","User change. New user:",t.toKey());const i=yield BF(e.localStore,t);e.currentUser=t,(r=e).uc.forEach(l=>{l.forEach(d=>{d.reject(new Be(ve.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),r.uc.clear(),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),yield ad(e,i.Ki)}var r}),RR.apply(this,arguments)}function q3(n,t){const e=ot(n),i=e.ic.get(t);if(i&&i.Xu)return C().add(i.key);{let r=C();const s=e.ec.get(t);if(!s)return r;for(const l of s){const d=e.tc.get(l);r=r.unionWith(d.view.qu)}return r}}function W3(n,t){return OR.apply(this,arguments)}function OR(){return OR=(0,xe.Z)(function*(n,t){const e=ot(n),i=yield RS(e.localStore,t.query,!0),r=t.view.Ju(i);return e.isPrimaryClient&&IR(e,t.targetId,r.zu),r}),OR.apply(this,arguments)}function Y3(n,t){return PR.apply(this,arguments)}function PR(){return PR=(0,xe.Z)(function*(n,t){const e=ot(n);return jF(e.localStore,t).then(i=>ad(e,i))}),PR.apply(this,arguments)}function Z3(n,t,e,i){return NR.apply(this,arguments)}function NR(){return NR=(0,xe.Z)(function*(n,t,e,i){const r=ot(n),s=yield function(l,d){const p=ot(l),_=ot(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",b=>_.yn(b,d).next(D=>D?p.localDocuments.getDocuments(b,D):ge.resolve(null)))}(r.localStore,t);var d;null!==s?("pending"===e?yield Ev(r.remoteStore):"acknowledged"===e||"rejected"===e?(TR(r,t,i||null),MR(r,t),d=t,ot(ot(r.localStore).mutationQueue).In(d)):gt(),yield ad(r,s)):He("SyncEngine","Cannot apply mutation batch with id: "+t)}),NR.apply(this,arguments)}function FR(){return FR=(0,xe.Z)(function*(n,t){const e=ot(n);if(UR(e),HR(e),!0===t&&!0!==e.ac){const i=e.sharedClientState.getAllActiveQueryTargets(),r=yield dL(e,i.toArray());e.ac=!0,yield lR(e.remoteStore,!0);for(const s of r)FS(e.remoteStore,s)}else if(!1===t&&!1!==e.ac){const i=[];let r=Promise.resolve();e.ec.forEach((s,l)=>{e.sharedClientState.isLocalQueryTarget(l)?i.push(l):r=r.then(()=>(Tv(e,l),wv(e.localStore,l,!0))),jw(e.remoteStore,l)}),yield r,yield dL(e,i),function(s){const l=ot(s);l.ic.forEach((d,p)=>{jw(l.remoteStore,p)}),l.rc.cs(),l.ic=new Map,l.sc=new Wi(nt.comparator)}(e),e.ac=!1,yield lR(e.remoteStore,!1)}}),FR.apply(this,arguments)}function dL(n,t,e){return LR.apply(this,arguments)}function LR(){return LR=(0,xe.Z)(function*(n,t,e){const i=ot(n),r=[],s=[];for(const l of t){let d;const p=i.ec.get(l);if(p&&0!==p.length){d=yield bv(i.localStore,ba(p[0]));for(const _ of p){const b=i.tc.get(_),D=yield W3(i,b);D.snapshot&&s.push(D.snapshot)}}else{const _=yield HF(i.localStore,l);d=yield bv(i.localStore,_),yield vR(i,hL(_),l,!1)}r.push(d)}return i.Zu.Go(s),r}),LR.apply(this,arguments)}function hL(n){return Ew(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Q3(n){const t=ot(n);return ot(ot(t.localStore).persistence).Ri()}function X3(n,t,e,i){return BR.apply(this,arguments)}function BR(){return BR=(0,xe.Z)(function*(n,t,e,i){const r=ot(n);if(r.ac)return void He("SyncEngine","Ignoring unexpected query state notification.");const s=r.ec.get(t);if(s&&s.length>0)switch(e){case"current":case"not-current":{const l=yield jF(r.localStore,Mw(s[0])),d=R.createSynthesizedRemoteEventForCurrentChange(t,"current"===e);yield ad(r,l,d);break}case"rejected":yield wv(r.localStore,t,!0),Tv(r,t,i);break;default:gt()}}),BR.apply(this,arguments)}function J3(n,t,e){return VR.apply(this,arguments)}function VR(){return VR=(0,xe.Z)(function*(n,t,e){const i=UR(n);if(i.ac){for(const r of t){if(i.ec.has(r)){He("SyncEngine","Adding an already active target "+r);continue}const s=yield HF(i.localStore,r),l=yield bv(i.localStore,s);yield vR(i,hL(s),l.targetId,!1),FS(i.remoteStore,l)}for(const r of e)i.ec.has(r)&&(yield wv(i.localStore,r,!1).then(()=>{jw(i.remoteStore,r),Tv(i,r)}).catch(Ql))}}),VR.apply(this,arguments)}function UR(n){const t=ot(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=lL.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=q3.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=U3.bind(null,t),t.Zu.Go=A3.bind(null,t.eventManager),t.Zu.lc=k3.bind(null,t.eventManager),t}function HR(n){const t=ot(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=H3.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=j3.bind(null,t),t}class fL{constructor(){this.synchronizeTabs=!1}initialize(t){var e=this;return(0,xe.Z)(function*(){e.wt=Uw(t.databaseInfo.databaseId),e.sharedClientState=e.dc(t),e.persistence=e._c(t),yield e.persistence.start(),e.localStore=e.wc(t),e.gcScheduler=e.mc(t,e.localStore),e.indexBackfillerScheduler=e.gc(t,e.localStore)})()}mc(t,e){return null}gc(t,e){return null}wc(t){return LF(this.persistence,new FF,t.initialUser,this.wt)}_c(t){return new PF(AS.Ms,this.wt)}dc(t){return new qF}terminate(){var t=this;return(0,xe.Z)(function*(){t.gcScheduler&&t.gcScheduler.stop(),yield t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}class pL extends fL{constructor(t,e,i){super(),this.yc=t,this.cacheSizeBytes=e,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(t){var e=()=>super.initialize,i=this;return(0,xe.Z)(function*(){yield e().call(i,t),yield i.yc.initialize(i,t),yield HR(i.yc.syncEngine),yield Ev(i.yc.remoteStore),yield i.persistence.ci(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(),i.indexBackfillerScheduler&&!i.indexBackfillerScheduler.started&&i.indexBackfillerScheduler.start(),Promise.resolve()))})()}wc(t){return LF(this.persistence,new FF,t.initialUser,this.wt)}mc(t,e){return new Gz(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue,e)}gc(t,e){const i=new Kx(e,this.persistence);return new WN(t.asyncQueue,i)}_c(t){const e=Fk(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?Zo.withCacheSize(this.cacheSizeBytes):Zo.DEFAULT;return new Nk(this.synchronizeTabs,e,t.clientId,i,t.asyncQueue,YF(),NS(),this.wt,this.sharedClientState,!!this.forceOwnership)}dc(t){return new qF}}class t$ extends pL{constructor(t,e){super(t,e,!1),this.yc=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}initialize(t){var e=()=>super.initialize,i=this;return(0,xe.Z)(function*(){yield e().call(i,t);const r=i.yc.syncEngine;i.sharedClientState instanceof $k&&(i.sharedClientState.syncEngine={kr:Z3.bind(null,r),Or:X3.bind(null,r),Mr:J3.bind(null,r),Ri:Q3.bind(null,r),Nr:Y3.bind(null,r)},yield i.sharedClientState.start()),yield i.persistence.ci(function(){var s=(0,xe.Z)(function*(l){yield function K3(n,t){return FR.apply(this,arguments)}(i.yc.syncEngine,l),i.gcScheduler&&(l&&!i.gcScheduler.started?i.gcScheduler.start():l||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(l&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():l||i.indexBackfillerScheduler.stop())});return function(l){return s.apply(this,arguments)}}())})()}dc(t){const e=YF();if(!$k.V(e))throw new Be(ve.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=Fk(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new $k(e,t.asyncQueue,i,t.clientId,t.initialUser)}}class jR{initialize(t,e){var i=this;return(0,xe.Z)(function*(){i.localStore||(i.localStore=t.localStore,i.sharedClientState=t.sharedClientState,i.datastore=i.createDatastore(e),i.remoteStore=i.createRemoteStore(e),i.eventManager=i.createEventManager(e),i.syncEngine=i.createSyncEngine(e,!t.synchronizeTabs),i.sharedClientState.onlineStateHandler=r=>cL(i.syncEngine,r,1),i.remoteStore.remoteSyncer.handleCredentialChange=$3.bind(null,i.syncEngine),yield lR(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(t){return new I3}createDatastore(t){const e=Uw(t.databaseInfo.databaseId),i=new f3(t.databaseInfo);return new g3(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return e=this.localStore,i=this.datastore,r=t.asyncQueue,s=d=>cL(this.syncEngine,d,0),l=WF.V()?new WF:new u3,new v3(e,i,r,s,l);var e,i,r,s,l}createSyncEngine(t,e){return function(i,r,s,l,d,p,_){const b=new F3(i,r,s,l,d,p);return _&&(b.ac=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return(t=(0,xe.Z)(function*(e){const i=ot(e);He("RemoteStore","RemoteStore shutting down."),i.lu.add(5),yield Cv(i),i.du.shutdown(),i._u.set("Unknown")}),function(e){return t.apply(this,arguments)})(this.remoteStore);var t}}function mL(n,t=10240){let e=0;return{read:()=>(0,xe.Z)(function*(){if(e<n.byteLength){const i={value:n.slice(e,e+t),done:!1};return e+=t,i}return{done:!0}})(),cancel:()=>(0,xe.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class BS{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ic(this.observer.next,t)}error(t){this.observer.error?this.Ic(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)}Tc(){this.muted=!0}Ic(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}}class n${constructor(t,e){this.Ec=t,this.wt=e,this.metadata=new kr,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then(i=>{i&&i.Cu()?this.metadata.resolve(i.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==i?void 0:i.payload)}`))},i=>this.metadata.reject(i))}close(){return this.Ec.cancel()}getMetadata(){var t=this;return(0,xe.Z)(function*(){return t.metadata.promise})()}fc(){var t=this;return(0,xe.Z)(function*(){return yield t.getMetadata(),t.Rc()})()}Rc(){var t=this;return(0,xe.Z)(function*(){const e=yield t.bc();if(null===e)return null;const i=t.Ac.decode(e),r=Number(i);isNaN(r)&&t.Pc(`length string (${i}) is not valid number`);const s=yield t.vc(r);return new R3(JSON.parse(s),e.length+r)})()}Vc(){return this.buffer.findIndex(t=>t==="{".charCodeAt(0))}bc(){var t=this;return(0,xe.Z)(function*(){for(;t.Vc()<0&&!(yield t.Sc()););if(0===t.buffer.length)return null;const e=t.Vc();e<0&&t.Pc("Reached the end of bundle when a length string is expected.");const i=t.buffer.slice(0,e);return t.buffer=t.buffer.slice(e),i})()}vc(t){var e=this;return(0,xe.Z)(function*(){for(;e.buffer.length<t;)(yield e.Sc())&&e.Pc("Reached the end of bundle when more is expected.");const i=e.Ac.decode(e.buffer.slice(0,t));return e.buffer=e.buffer.slice(t),i})()}Pc(t){throw this.Ec.cancel(),new Error(`Invalid bundle format: ${t}`)}Sc(){var t=this;return(0,xe.Z)(function*(){const e=yield t.Ec.read();if(!e.done){const i=new Uint8Array(t.buffer.length+e.value.length);i.set(t.buffer),i.set(e.value,t.buffer.length),t.buffer=i}return e.done})()}}class i${constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(t){var e=this;return(0,xe.Z)(function*(){if(e.ensureCommitNotCalled(),e.mutations.length>0)throw new Be(ve.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(r=(0,xe.Z)(function*(s,l){const d=ot(s),p=od(d.wt)+"/documents",_={documents:l.map(P=>sd(d.wt,P))},b=yield d.ao("BatchGetDocuments",p,_,l.length),D=new Map;b.forEach(P=>{const U=function sz(n,t){return"found"in t?function(e,i){Pt(!!i.found);const r=Yo(e,i.found.name),s=nr(i.found.updateTime),l=new Gr({mapValue:{fields:i.found.fields}});return mn.newFoundDocument(r,s,l)}(n,t):"missing"in t?function(e,i){Pt(!!i.missing),Pt(!!i.readTime);const r=Yo(e,i.missing),s=nr(i.readTime);return mn.newNoDocument(r,s)}(n,t):gt()}(d.wt,P);D.set(U.key.toString(),U)});const I=[];return l.forEach(P=>{const U=D.get(P.toString());Pt(!!U),I.push(U)}),I}),function(s,l){return r.apply(this,arguments)})(e.datastore,t);var r;return i.forEach(r=>e.recordVersion(r)),i})()}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new Wh(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){var t=this;return(0,xe.Z)(function*(){if(t.ensureCommitNotCalled(),t.lastWriteError)throw t.lastWriteError;const e=t.readVersions;var i;t.mutations.forEach(i=>{e.delete(i.key.toString())}),e.forEach((i,r)=>{const s=nt.fromPath(r);t.mutations.push(new bS(s,t.precondition(s)))}),yield(i=(0,xe.Z)(function*(r,s){const l=ot(r),d=od(l.wt)+"/documents",p={writes:s.map(_=>kw(l.wt,_))};yield l.ro("Commit",d,p)}),function(r,s){return i.apply(this,arguments)})(t.datastore,t.mutations),t.committed=!0})()}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw gt();e=At.min()}const i=this.readVersions.get(t.key.toString());if(i){if(!e.isEqual(i))throw new Be(ve.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Di.updateTime(e):Di.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(At.min()))throw new Be(ve.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Di.updateTime(e)}return Di.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}class r${constructor(t,e,i,r,s){this.asyncQueue=t,this.datastore=e,this.options=i,this.updateFunction=r,this.deferred=s,this.Dc=i.maxAttempts,this.So=new qk(this.asyncQueue,"transaction_retry")}run(){this.Dc-=1,this.Cc()}Cc(){var t=this;this.So.Io((0,xe.Z)(function*(){const e=new i$(t.datastore),i=t.xc(e);i&&i.then(r=>{t.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{t.deferred.resolve(r)}).catch(s=>{t.Nc(s)}))}).catch(r=>{t.Nc(r)})}))}xc(t){try{const e=this.updateFunction(t);return!Qu(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Nc(t){this.Dc>0&&this.kc(t)?(this.Dc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Cc(),Promise.resolve()))):this.deferred.reject(t)}kc(t){if("FirebaseError"===t.name){const e=t.code;return"aborted"===e||"failed-precondition"===e||!Ek(e)}return!1}}class s${constructor(t,e,i,r){var s=this;this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=r,this.user=Ar.UNAUTHENTICATED,this.clientId=zx.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var l=(0,xe.Z)(function*(d){He("FirestoreClient","Received user=",d.uid),yield s.authCredentialListener(d),s.user=d});return function(d){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(i,l=>(He("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var t=this;return(0,xe.Z)(function*(){return{asyncQueue:t.asyncQueue,databaseInfo:t.databaseInfo,clientId:t.clientId,authCredentials:t.authCredentials,appCheckCredentials:t.appCheckCredentials,initialUser:t.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Be(ve.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var t=this;this.asyncQueue.enterRestrictedMode();const e=new kr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,xe.Z)(function*(){try{t.onlineComponents&&(yield t.onlineComponents.terminate()),t.offlineComponents&&(yield t.offlineComponents.terminate()),t.authCredentials.shutdown(),t.appCheckCredentials.shutdown(),e.resolve()}catch(i){const r=xv(i,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}function gL(n,t){return GR.apply(this,arguments)}function GR(){return GR=(0,xe.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress(),He("FirestoreClient","Initializing OfflineComponentProvider");const e=yield n.getConfiguration();yield t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(function(){var r=(0,xe.Z)(function*(s){i.isEqual(s)||(yield BF(t.localStore,s),i=s)});return function(s){return r.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=t}),GR.apply(this,arguments)}function _L(n,t){return zR.apply(this,arguments)}function zR(){return zR=(0,xe.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress();const e=yield $R(n);He("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield t.initialize(e,i),n.setCredentialChangeListener(r=>tL(t.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>tL(t.remoteStore,s)),n.onlineComponents=t}),zR.apply(this,arguments)}function $R(n){return qR.apply(this,arguments)}function qR(){return qR=(0,xe.Z)(function*(n){return n.offlineComponents||(He("FirestoreClient","Using default OfflineComponentProvider"),yield gL(n,new fL)),n.offlineComponents}),qR.apply(this,arguments)}function VS(n){return WR.apply(this,arguments)}function WR(){return WR=(0,xe.Z)(function*(n){return n.onlineComponents||(He("FirestoreClient","Using default OnlineComponentProvider"),yield _L(n,new jR)),n.onlineComponents}),WR.apply(this,arguments)}function vL(n){return $R(n).then(t=>t.persistence)}function YR(n){return $R(n).then(t=>t.localStore)}function yL(n){return VS(n).then(t=>t.remoteStore)}function ZR(n){return VS(n).then(t=>t.syncEngine)}function Iv(n){return KR.apply(this,arguments)}function KR(){return KR=(0,xe.Z)(function*(n){const t=yield VS(n),e=t.eventManager;return e.onListen=L3.bind(null,t.syncEngine),e.onUnlisten=B3.bind(null,t.syncEngine),e}),KR.apply(this,arguments)}function bL(n,t,e={}){const i=new kr;return n.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return function(r,s,l,d,p){const _=new BS({next:D=>{s.enqueueAndForget(()=>fR(r,b));const I=D.docs.has(l);!I&&D.fromCache?p.reject(new Be(ve.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&D.fromCache&&d&&"server"===d.source?p.reject(new Be(ve.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(D)},error:D=>p.reject(D)}),b=new gR(Uh(l.path),_,{includeMetadataChanges:!0,Du:!0});return dR(r,b)}(yield Iv(n),n.asyncQueue,t,e,i)})),i.promise}function wL(n,t,e={}){const i=new kr;return n.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return function(r,s,l,d,p){const _=new BS({next:D=>{s.enqueueAndForget(()=>fR(r,b)),D.fromCache&&"server"===d.source?p.reject(new Be(ve.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(D)},error:D=>p.reject(D)}),b=new gR(l,_,{includeMetadataChanges:!0,Du:!0});return dR(r,b)}(yield Iv(n),n.asyncQueue,t,e,i)})),i.promise}const CL=new Map;function QR(n,t,e){if(!e)throw new Be(ve.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function EL(n,t,e,i){if(!0===t&&!0===i)throw new Be(ve.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function DL(n){if(!nt.isDocumentKey(n))throw new Be(ve.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function xL(n){if(nt.isDocumentKey(n))throw new Be(ve.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function US(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const t=(e=n).constructor?e.constructor.name:null;return t?`a custom ${t} object`:"an object"}}var e;return"function"==typeof n?"a function":gt()}function Dn(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new Be(ve.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=US(n);throw new Be(ve.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}function SL(n,t){if(t<=0)throw new Be(ve.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${t}.`)}class ML{constructor(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Be(ve.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Be(ve.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,EL("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Gw{constructor(t,e,i){this._authCredentials=e,this._appCheckCredentials=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ML({}),this._settingsFrozen=!1,t instanceof Jl?this._databaseId=t:(this._app=t,this._databaseId=function(r){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new Be(ve.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Jl(r.options.projectId)}(t))}get app(){if(!this._app)throw new Be(ve.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Be(ve.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ML(t),void 0!==t.credentials&&(this._authCredentials=function(e){if(!e)return new Ph;switch(e.type){case"gapi":const i=e.client;return Pt(!("object"!=typeof i||null===i||!i.auth||!i.auth.getAuthHeaderValueForFirstParty)),new Qp(i,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Be(ve.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=CL.get(t);e&&(He("ComponentProvider","Removing Datastore"),CL.delete(t),e.terminate())}(this),Promise.resolve()}}class xi{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wc(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new xi(this.firestore,t,this._key)}}class Bs{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new Bs(this.firestore,t,this._query)}}class Wc extends Bs{constructor(t,e,i){super(t,e,Uh(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new xi(this.firestore,null,new nt(t))}withConverter(t){return new Wc(this.firestore,t,this._path)}}function TL(n,t,...e){if(n=(0,L.m9)(n),QR("collection","path",t),n instanceof Gw){const i=Cn.fromString(t,...e);return xL(i),new Wc(n,null,i)}{if(!(n instanceof xi||n instanceof Wc))throw new Be(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Cn.fromString(t,...e));return xL(i),new Wc(n.firestore,null,i)}}function HS(n,t,...e){if(n=(0,L.m9)(n),1===arguments.length&&(t=zx.I()),QR("doc","path",t),n instanceof Gw){const i=Cn.fromString(t,...e);return DL(i),new xi(n,null,new nt(i))}{if(!(n instanceof xi||n instanceof Wc))throw new Be(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Cn.fromString(t,...e));return DL(i),new xi(n.firestore,n instanceof Wc?n.converter:null,new nt(i))}}function IL(n,t){return n=(0,L.m9)(n),t=(0,L.m9)(t),(n instanceof xi||n instanceof Wc)&&(t instanceof xi||t instanceof Wc)&&n.firestore===t.firestore&&n.path===t.path&&n.converter===t.converter}function AL(n,t){return n=(0,L.m9)(n),t=(0,L.m9)(t),n instanceof Bs&&t instanceof Bs&&n.firestore===t.firestore&&sm(n._query,t._query)&&n.converter===t.converter}class g${constructor(){this.Oc=Promise.resolve(),this.Mc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new qk(this,"async_queue_retry"),this.Kc=()=>{const e=NS();e&&He("AsyncQueue","Visibility state changed to "+e.visibilityState),this.So.Eo()};const t=NS();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Gc(),this.Qc(t)}enterRestrictedMode(t){if(!this.Fc){this.Fc=!0,this.Uc=t||!1;const e=NS();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Kc)}}enqueue(t){if(this.Gc(),this.Fc)return new Promise(()=>{});const e=new kr;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Mc.push(t),this.jc()))}jc(){var t=this;return(0,xe.Z)(function*(){if(0!==t.Mc.length){try{yield t.Mc[0](),t.Mc.shift(),t.So.reset()}catch(e){if(!Xl(e))throw e;He("AsyncQueue","Operation failed with retryable error: "+e)}t.Mc.length>0&&t.So.Io(()=>t.jc())}})()}Qc(t){const e=this.Oc.then(()=>(this.Lc=!0,t().catch(i=>{throw this.Bc=i,this.Lc=!1,$i("INTERNAL UNHANDLED ERROR: ",function(s){let l=s.message||"";return s.stack&&(l=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),l}(i)),i}).then(i=>(this.Lc=!1,i))));return this.Oc=e,e}enqueueAfterDelay(t,e,i){this.Gc(),this.qc.indexOf(t)>-1&&(e=0);const r=uR.createAndSchedule(this,t,e,i,s=>this.Wc(s));return this.$c.push(r),r}Gc(){this.Bc&&gt()}verifyOperationInProgress(){}zc(){var t=this;return(0,xe.Z)(function*(){let e;do{e=t.Oc,yield e}while(e!==t.Oc)})()}Hc(t){for(const e of this.$c)if(e.timerId===t)return!0;return!1}Jc(t){return this.zc().then(()=>{this.$c.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(const e of this.$c)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.zc()})}Yc(t){this.qc.push(t)}Wc(t){const e=this.$c.indexOf(t);this.$c.splice(e,1)}}function XR(n){return function(t,e){if("object"!=typeof t||null===t)return!1;const i=t;for(const r of["next","error","complete"])if(r in i&&"function"==typeof i[r])return!0;return!1}(n)}class _${constructor(){this._progressObserver={},this._taskCompletionResolver=new kr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,i){this._progressObserver={next:t,error:e,complete:i}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}class Ri extends Gw{constructor(t,e,i){super(t,e,i),this.type="firestore",this._queue=new g$,this._persistenceKey="name"in t?t.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||kL(this),this._firestoreClient.terminate()}}function Or(n){return n._firestoreClient||kL(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function kL(n){var t;const e=n._freezeSettings(),i=(s=(null===(t=n._app)||void 0===t?void 0:t.options.appId)||"",new Xx(n._databaseId,s,n._persistenceKey,(d=e).host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,d.useFetchStreams));var s,d;n._firestoreClient=new s$(n._authCredentials,n._appCheckCredentials,n._queue,i)}function RL(n,t,e){const i=new kr;return n.asyncQueue.enqueue((0,xe.Z)(function*(){try{yield gL(n,e),yield _L(n,t),i.resolve()}catch(r){const s=r;if(!("FirebaseError"===(l=s).name?l.code===ve.FAILED_PRECONDITION||l.code===ve.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw s;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+s),i.reject(s)}var l})).then(()=>i.promise)}function OL(n){if(n._initialized||n._terminated)throw new Be(ve.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ld{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new Be(ve.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qi(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class Yc{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Yc(tr.fromBase64String(t))}catch(e){throw new Be(ve.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Yc(tr.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class ym{constructor(t){this._methodName=t}}class jS{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Be(ve.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Be(ve.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Qt(this._lat,t._lat)||Qt(this._long,t._long)}}const M$=/^__.*__$/;class T${constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return null!==this.fieldMask?new zc(t,this.data,this.fieldMask,e,this.fieldTransforms):new qh(t,this.data,e,this.fieldTransforms)}}class PL{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new zc(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function NL(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw gt()}}class GS{constructor(t,e,i,r,s,l){this.settings=t,this.databaseId=e,this.wt=i,this.ignoreUndefinedProperties=r,void 0===s&&this.Xc(),this.fieldTransforms=s||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(t){return new GS(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(t){var e;const i=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.ta({path:i,na:!1});return r.sa(t),r}ia(t){var e;const i=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.ta({path:i,na:!1});return r.Xc(),r}ra(t){return this.ta({path:void 0,na:!0})}oa(t){return qS(t,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(t){return void 0!==this.fieldMask.find(e=>t.isPrefixOf(e))||void 0!==this.fieldTransforms.find(e=>t.isPrefixOf(e.field))}Xc(){if(this.path)for(let t=0;t<this.path.length;t++)this.sa(this.path.get(t))}sa(t){if(0===t.length)throw this.oa("Document fields must not be empty");if(NL(this.Zc)&&M$.test(t))throw this.oa('Document fields cannot begin and end with "__"')}}class I${constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.wt=i||Uw(t)}aa(t,e,i,r=!1){return new GS({Zc:t,methodName:e,ca:i,path:qi.emptyPath(),na:!1,ua:r},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function bm(n){const t=n._freezeSettings(),e=Uw(n._databaseId);return new I$(n._databaseId,!!t.ignoreUndefinedProperties,e)}function zS(n,t,e,i,r,s={}){const l=n.aa(s.merge||s.mergeFields?2:0,t,e,r);nO("Data must be an object, but it was:",l,i);const d=BL(i,l);let p,_;if(s.merge)p=new Ls(l.fieldMask),_=l.fieldTransforms;else if(s.mergeFields){const b=[];for(const D of s.mergeFields){const I=iO(t,D,e);if(!l.contains(I))throw new Be(ve.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);UL(b,I)||b.push(I)}p=new Ls(b),_=l.fieldTransforms.filter(D=>p.covers(D.field))}else p=null,_=l.fieldTransforms;return new T$(new Gr(d),p,_)}class zw extends ym{_toFieldTransform(t){if(2!==t.Zc)throw t.oa(1===t.Zc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof zw}}function FL(n,t,e){return new GS({Zc:3,ca:t.settings.ca,methodName:n._methodName,na:e},t.databaseId,t.wt,t.ignoreUndefinedProperties)}class JR extends ym{_toFieldTransform(t){return new zh(t.path,new am)}isEqual(t){return t instanceof JR}}class A$ extends ym{constructor(t,e){super(t),this.ha=e}_toFieldTransform(t){const e=FL(this,t,!0),i=this.ha.map(s=>wm(s,e)),r=new jh(i);return new zh(t.path,r)}isEqual(t){return this===t}}class k$ extends ym{constructor(t,e){super(t),this.ha=e}_toFieldTransform(t){const e=FL(this,t,!0),i=this.ha.map(s=>wm(s,e)),r=new Gc(i);return new zh(t.path,r)}isEqual(t){return this===t}}class R$ extends ym{constructor(t,e){super(t),this.la=e}_toFieldTransform(t){const e=new Gh(t.wt,hS(t.wt,this.la));return new zh(t.path,e)}isEqual(t){return this===t}}function eO(n,t,e,i){const r=n.aa(1,t,e);nO("Data must be an object, but it was:",r,i);const s=[],l=Gr.empty();Lh(i,(p,_)=>{const b=$S(t,p,e);_=(0,L.m9)(_);const D=r.ia(b);if(_ instanceof zw)s.push(b);else{const I=wm(_,D);null!=I&&(s.push(b),l.set(b,I))}});const d=new Ls(s);return new PL(l,d,r.fieldTransforms)}function tO(n,t,e,i,r,s){const l=n.aa(1,t,e),d=[iO(t,i,e)],p=[r];if(s.length%2!=0)throw new Be(ve.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<s.length;I+=2)d.push(iO(t,s[I])),p.push(s[I+1]);const _=[],b=Gr.empty();for(let I=d.length-1;I>=0;--I)if(!UL(_,d[I])){const P=d[I];let U=p[I];U=(0,L.m9)(U);const Q=l.ia(P);if(U instanceof zw)_.push(P);else{const le=wm(U,Q);null!=le&&(_.push(P),b.set(P,le))}}const D=new Ls(_);return new PL(b,D,l.fieldTransforms)}function LL(n,t,e,i=!1){return wm(e,n.aa(i?4:3,t))}function wm(n,t){if(VL(n=(0,L.m9)(n)))return nO("Unsupported field value:",t,n),BL(n,t);if(n instanceof ym)return function(e,i){if(!NL(i.Zc))throw i.oa(`${e._methodName}() can only be used with update() and set()`);if(!i.path)throw i.oa(`${e._methodName}() is not currently supported inside arrays`);const r=e._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(n,t),null;if(void 0===n&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.na&&4!==t.Zc)throw t.oa("Nested arrays are not supported");return function(e,i){const r=[];let s=0;for(const l of e){let d=wm(l,i.ra(s));null==d&&(d={nullValue:"NULL_VALUE"}),r.push(d),s++}return{arrayValue:{values:r}}}(n,t)}return function(e,i){if(null===(e=(0,L.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return hS(i.wt,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const r=di.fromDate(e);return{timestampValue:zr(i.wt,r)}}if(e instanceof di){const r=new di(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:zr(i.wt,r)}}if(e instanceof jS)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Yc)return{bytesValue:$c(i.wt,e._byteString)};if(e instanceof xi){const r=i.databaseId,s=e.firestore._databaseId;if(!s.isEqual(r))throw i.oa(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:cm(e.firestore._databaseId||i.databaseId,e._key.path)}}throw i.oa(`Unsupported field value: ${US(e)}`)}(n,t)}function BL(n,t){const e={};return ok(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Lh(n,(i,r)=>{const s=wm(r,t.ea(i));null!=s&&(e[i]=s)}),{mapValue:{fields:e}}}function VL(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof di||n instanceof jS||n instanceof Yc||n instanceof xi||n instanceof ym)}function nO(n,t,e){if(!VL(e)||"object"!=typeof(i=e)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const i=US(e);throw t.oa("an object"===i?n+" a custom object":n+" "+i)}var i}function iO(n,t,e){if((t=(0,L.m9)(t))instanceof ld)return t._internalPath;if("string"==typeof t)return $S(n,t);throw qS("Field path arguments must be of type string or ",n,!1,void 0,e)}const O$=new RegExp("[~\\*/\\[\\]]");function $S(n,t,e){if(t.search(O$)>=0)throw qS(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new ld(...t.split("."))._internalPath}catch(i){throw qS(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function qS(n,t,e,i,r){const s=i&&!i.isEmpty(),l=void 0!==r;let d=`Function ${t}() called with invalid data`;e&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(s||l)&&(p+=" (found",s&&(p+=` in field ${i}`),l&&(p+=` in document ${r}`),p+=")"),new Be(ve.INVALID_ARGUMENT,d+n+p)}function UL(n,t){return n.some(e=>e.isEqual(t))}class $w{constructor(t,e,i,r,s){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new xi(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new P$(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(WS("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class P$ extends $w{data(){return super.data()}}function WS(n,t){return"string"==typeof t?$S(n,t):t instanceof ld?t._internalPath:t._delegate._internalPath}class Cm{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class cd extends $w{constructor(t,e,i,r,s,l){super(t,e,i,r,l),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new qw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(WS("DocumentSnapshot.get",t));if(null!==i)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}}class qw extends cd{data(t={}){return super.data(t)}}class Jh{constructor(t,e,i,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Cm(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new qw(this._firestore,this._userDataWriter,i.key,i,new Cm(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Be(ve.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(l=>({type:"added",doc:new qw(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Cm(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>r||3!==l.type).map(l=>{const d=new qw(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Cm(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let p=-1,_=-1;return 0!==l.type&&(p=s.indexOf(l.doc.key),s=s.delete(l.doc.key)),1!==l.type&&(s=s.add(l.doc),_=s.indexOf(l.doc.key)),{type:N$(l.type),doc:d,oldIndex:p,newIndex:_}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function N$(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return gt()}}function HL(n,t){return n instanceof cd&&t instanceof cd?n._firestore===t._firestore&&n._key.isEqual(t._key)&&(null===n._document?null===t._document:n._document.isEqual(t._document))&&n._converter===t._converter:n instanceof Jh&&t instanceof Jh&&n._firestore===t._firestore&&AL(n.query,t.query)&&n.metadata.isEqual(t.metadata)&&n._snapshot.isEqual(t._snapshot)}function jL(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Be(ve.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ww{}function ef(n,...t){for(const e of t)n=e._apply(n);return n}class F$ extends Ww{constructor(t,e,i){super(),this.fa=t,this.da=e,this._a=i,this.type="where"}_apply(t){const e=bm(t.firestore),i=function(r,s,l,d,p,_,b){let D;if(p.isKeyField()){if("array-contains"===_||"array-contains-any"===_)throw new Be(ve.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if("in"===_||"not-in"===_){YL(b,_);const P=[];for(const U of b)P.push(WL(d,r,U));D={arrayValue:{values:P}}}else D=WL(d,r,b)}else"in"!==_&&"not-in"!==_&&"array-contains-any"!==_||YL(b,_),D=LL(l,"where",b,"in"===_||"not-in"===_);const I=Rr.create(p,_,D);return function(P,U){if(U.ht()){const le=cS(P);if(null!==le&&!le.isEqual(U.field))throw new Be(ve.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${le.toString()}' and '${U.field.toString()}'`);const Ye=Dw(P);null!==Ye&&ZL(0,U.field,Ye)}const Q=function(le,Ye){for(const et of le.filters)if(Ye.indexOf(et.op)>=0)return et.op;return null}(P,function(le){switch(le){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(U.op));if(null!==Q)throw new Be(ve.INVALID_ARGUMENT,Q===U.op?`Invalid query. You cannot use more than one '${U.op.toString()}' filter.`:`Invalid query. You cannot use '${U.op.toString()}' filters with '${Q.toString()}' filters.`)}(r,I),I}(t._query,0,e,t.firestore._databaseId,this.fa,this.da,this._a);return new Bs(t.firestore,t.converter,function(r,s){const l=r.filters.concat([s]);return new Hc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),l,r.limit,r.limitType,r.startAt,r.endAt)}(t._query,i))}}class B$ extends Ww{constructor(t,e){super(),this.fa=t,this.wa=e,this.type="orderBy"}_apply(t){const e=function(i,r,s){if(null!==i.startAt)throw new Be(ve.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new Be(ve.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new id(r,s);return function(d,p){if(null===Dw(d)){const _=cS(d);null!==_&&ZL(0,_,p.field)}}(i,l),l}(t._query,this.fa,this.wa);return new Bs(t.firestore,t.converter,function(i,r){const s=i.explicitOrderBy.concat([r]);return new Hc(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,e))}}class GL extends Ww{constructor(t,e,i){super(),this.type=t,this.ma=e,this.ga=i}_apply(t){return new Bs(t.firestore,t.converter,vk(t._query,this.ma,this.ga))}}class zL extends Ww{constructor(t,e,i){super(),this.type=t,this.ya=e,this.pa=i}_apply(t){const e=qL(t,this.type,this.ya,this.pa);return new Bs(t.firestore,t.converter,(r=e,new Hc((i=t._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,r,i.endAt)));var i,r}}class $L extends Ww{constructor(t,e,i){super(),this.type=t,this.ya=e,this.pa=i}_apply(t){const e=qL(t,this.type,this.ya,this.pa);return new Bs(t.firestore,t.converter,(r=e,new Hc((i=t._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,r)));var i,r}}function qL(n,t,e,i){if(e[0]=(0,L.m9)(e[0]),e[0]instanceof $w)return function(r,s,l,d,p){if(!d)throw new Be(ve.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const _=[];for(const b of rm(r))if(b.field.isKeyField())_.push(jr(s,d.key));else{const D=d.data.field(b.field);if(sv(D))throw new Be(ve.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+b.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===D){const I=b.field.canonicalString();throw new Be(ve.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${I}' (used as the orderBy) does not exist.`)}_.push(D)}return new ec(_,p)}(n._query,n.firestore._databaseId,t,e[0]._document,i);{const r=bm(n.firestore);return function(s,l,d,p,_,b){const D=s.explicitOrderBy;if(_.length>D.length)throw new Be(ve.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const I=[];for(let P=0;P<_.length;P++){const U=_[P];if(D[P].field.isKeyField()){if("string"!=typeof U)throw new Be(ve.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof U}`);if(!uS(s)&&-1!==U.indexOf("/"))throw new Be(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${U}' contains a slash.`);const Q=s.path.child(Cn.fromString(U));if(!nt.isDocumentKey(Q))throw new Be(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${Q}' is not because it contains an odd number of segments.`);const le=new nt(Q);I.push(jr(l,le))}else{const Q=LL(d,p,U);I.push(Q)}}return new ec(I,b)}(n._query,n.firestore._databaseId,r,t,e,i)}}function WL(n,t,e){if("string"==typeof(e=(0,L.m9)(e))){if(""===e)throw new Be(ve.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!uS(t)&&-1!==e.indexOf("/"))throw new Be(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const i=t.path.child(Cn.fromString(e));if(!nt.isDocumentKey(i))throw new Be(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return jr(n,new nt(i))}if(e instanceof xi)return jr(n,e._key);throw new Be(ve.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${US(e)}.`)}function YL(n,t){if(!Array.isArray(n)||0===n.length)throw new Be(ve.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`);if(n.length>10)throw new Be(ve.INVALID_ARGUMENT,`Invalid Query. '${t.toString()}' filters support a maximum of 10 elements in the value array.`)}function ZL(n,t,e){if(!e.isEqual(t))throw new Be(ve.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${e.toString()}' instead.`)}const q$={maxAttempts:5};class rO{convertValue(t,e="none"){switch(Ju(t)){case 0:return null;case 1:return t.booleanValue;case 2:return _i(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Vc(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw gt()}}convertObject(t,e){const i={};return Lh(t.fields,(r,s)=>{i[r]=this.convertValue(s,e)}),i}convertGeoPoint(t){return new jS(_i(t.latitude),_i(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":const i=pw(t);return null==i?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(ov(t));default:return null}}convertTimestamp(t){const e=Ku(t);return new di(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=Cn.fromString(t);Pt(rF(i));const r=new Jl(i.get(1),i.get(3)),s=new nt(i.popFirst(5));return r.isEqual(e)||$i(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),s}}function YS(n,t,e){let i;return i=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,i}class W$ extends rO{constructor(t){super(),this.firestore=t}convertBytes(t){return new Yc(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new xi(this.firestore,null,e)}}class KL{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=bm(t)}set(t,e,i){this._verifyNotCommitted();const r=tf(t,this._firestore),s=YS(r.converter,e,i),l=zS(this._dataReader,"WriteBatch.set",r._key,s,null!==r.converter,i);return this._mutations.push(l.toMutation(r._key,Di.none())),this}update(t,e,i,...r){this._verifyNotCommitted();const s=tf(t,this._firestore);let l;return l="string"==typeof(e=(0,L.m9)(e))||e instanceof ld?tO(this._dataReader,"WriteBatch.update",s._key,e,i,r):eO(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(l.toMutation(s._key,Di.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=tf(t,this._firestore);return this._mutations=this._mutations.concat(new Wh(e._key,Di.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Be(ve.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function tf(n,t){if((n=(0,L.m9)(n)).firestore!==t)throw new Be(ve.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Em extends rO{constructor(t){super(),this.firestore=t}convertBytes(t){return new Yc(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new xi(this.firestore,null,e)}}function QL(n,t,e){n=Dn(n,xi);const i=Dn(n.firestore,Ri),r=YS(n.converter,t,e);return Av(i,[zS(bm(i),"setDoc",n._key,r,null!==n.converter,e).toMutation(n._key,Di.none())])}function XL(n,t,e,...i){n=Dn(n,xi);const r=Dn(n.firestore,Ri),s=bm(r);let l;return l="string"==typeof(t=(0,L.m9)(t))||t instanceof ld?tO(s,"updateDoc",n._key,t,e,i):eO(s,"updateDoc",n._key,t),Av(r,[l.toMutation(n._key,Di.exists(!0))])}function JL(n,...t){var e,i,r;n=(0,L.m9)(n);let s={includeMetadataChanges:!1},l=0;"object"!=typeof t[l]||XR(t[l])||(s=t[l],l++);const d={includeMetadataChanges:s.includeMetadataChanges};if(XR(t[l])){const D=t[l];t[l]=null===(e=D.next)||void 0===e?void 0:e.bind(D),t[l+1]=null===(i=D.error)||void 0===i?void 0:i.bind(D),t[l+2]=null===(r=D.complete)||void 0===r?void 0:r.bind(D)}let p,_,b;if(n instanceof xi)_=Dn(n.firestore,Ri),b=Uh(n._key.path),p={next:D=>{t[l]&&t[l](sO(_,n,D))},error:t[l+1],complete:t[l+2]};else{const D=Dn(n,Bs);_=Dn(D.firestore,Ri),b=D._query;const I=new Em(_);p={next:P=>{t[l]&&t[l](new Jh(_,I,D,P))},error:t[l+1],complete:t[l+2]},jL(n._query)}return function(D,I,P,U){const Q=new BS(U),le=new gR(I,Q,P);return D.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return dR(yield Iv(D),le)})),()=>{Q.Tc(),D.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return fR(yield Iv(D),le)}))}}(Or(_),b,d,p)}function Av(n,t){return function(e,i){const r=new kr;return e.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return function V3(n,t,e){return wR.apply(this,arguments)}(yield ZR(e),i,r)})),r.promise}(Or(n),t)}function sO(n,t,e){const i=e.docs.get(t._key),r=new Em(n);return new cd(n,r,t._key,i,new Cm(e.hasPendingWrites,e.fromCache),t.converter)}class r6 extends class{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=bm(t)}get(t){const e=tf(t,this._firestore),i=new W$(this._firestore);return this._transaction.lookup([e._key]).then(r=>{if(!r||1!==r.length)return gt();const s=r[0];if(s.isFoundDocument())return new $w(this._firestore,i,s.key,s,e.converter);if(s.isNoDocument())return new $w(this._firestore,i,e._key,null,e.converter);throw gt()})}set(t,e,i){const r=tf(t,this._firestore),s=YS(r.converter,e,i),l=zS(this._dataReader,"Transaction.set",r._key,s,null!==r.converter,i);return this._transaction.set(r._key,l),this}update(t,e,i,...r){const s=tf(t,this._firestore);let l;return l="string"==typeof(e=(0,L.m9)(e))||e instanceof ld?tO(this._dataReader,"Transaction.update",s._key,e,i,r):eO(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,l),this}delete(t){const e=tf(t,this._firestore);return this._transaction.delete(e._key),this}}{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=tf(t,this._firestore),i=new Em(this._firestore);return super.get(t).then(r=>new cd(this._firestore,i,e._key,r._document,new Cm(!1,!1),e.converter))}}function oO(n,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Be("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return t}function tB(){if("undefined"==typeof Uint8Array)throw new Be("unimplemented","Uint8Arrays are not available in this environment.")}function nB(){if(!function fw(){return"undefined"!=typeof atob}())throw new Be("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,t=!0){Rh=ki.SDK_VERSION,(0,ki._registerComponent)(new co.wA("firestore",(e,{options:i})=>{const r=e.getProvider("app").getImmediate(),s=new Ri(r,new nk(e.getProvider("auth-internal")),new lw(e.getProvider("app-check-internal")));return i=Object.assign({useFetchStreams:t},i),s._setSettings(i),s},"PUBLIC")),(0,ki.registerVersion)(J_,"3.4.11",n),(0,ki.registerVersion)(J_,"3.4.11","esm2017")}();class Yw{constructor(t){this._delegate=t}static fromBase64String(t){return nB(),new Yw(Yc.fromBase64String(t))}static fromUint8Array(t){return tB(),new Yw(Yc.fromUint8Array(t))}toBase64(){return nB(),this._delegate.toBase64()}toUint8Array(){return tB(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function aO(n){return function f6(n,t){if("object"!=typeof n||null===n)return!1;const e=n;for(const i of t)if(i in e&&"function"==typeof e[i])return!0;return!1}(n,["next","error","complete"])}class p6{enableIndexedDbPersistence(t,e){return function y$(n,t){OL(n=Dn(n,Ri));const e=Or(n),i=n._freezeSettings(),r=new jR;return RL(e,r,new pL(r,i.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return function b$(n){OL(n=Dn(n,Ri));const t=Or(n),e=n._freezeSettings(),i=new jR;return RL(t,i,new t$(i,e.cacheSizeBytes))}(t._delegate)}clearIndexedDbPersistence(t){return function w$(n){if(n._initialized&&!n._terminated)throw new Be(ve.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new kr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,xe.Z)(function*(){try{yield(e=(0,xe.Z)(function*(i){if(!Wo.V())return Promise.resolve();const r=i+"main";yield Wo.delete(r)}),function(i){return e.apply(this,arguments)})(Fk(n._databaseId,n._persistenceKey)),t.resolve()}catch(e){t.reject(e)}var e})),t.promise}(t._delegate)}}class iB{constructor(t,e,i){this._delegate=e,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},t instanceof Jl||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const e=this._delegate._getSettings();!t.merge&&e.host!==t.host&&Oh("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)}useEmulator(t,e,i={}){!function p$(n,t,e,i={}){var r;const s=(n=Dn(n,Gw))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==t&&Oh("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},s),{host:`${t}:${e}`,ssl:!1})),i.mockUserToken){let l,d;if("string"==typeof i.mockUserToken)l=i.mockUserToken,d=Ar.MOCK_USER;else{l=(0,L.Sg)(i.mockUserToken,null===(r=n._app)||void 0===r?void 0:r.options.projectId);const p=i.mockUserToken.sub||i.mockUserToken.user_id;if(!p)throw new Be(ve.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Ar(p)}n._authCredentials=new tk(new is(l,d))}}(this._delegate,t,e,i)}enableNetwork(){return function E$(n){return function o$(n){return n.asyncQueue.enqueue((0,xe.Z)(function*(){const t=yield vL(n),e=yield yL(n);return t.setNetworkEnabled(!0),function(i){const r=ot(i);return r.lu.delete(0),Hw(r)}(e)}))}(Or(n=Dn(n,Ri)))}(this._delegate)}disableNetwork(){return function D$(n){return function a$(n){return n.asyncQueue.enqueue((0,xe.Z)(function*(){const t=yield vL(n),e=yield yL(n);return t.setNetworkEnabled(!1),(i=(0,xe.Z)(function*(r){const s=ot(r);s.lu.add(0),yield Cv(s),s._u.set("Offline")}),function(r){return i.apply(this,arguments)})(e);var i}))}(Or(n=Dn(n,Ri)))}(this._delegate)}enablePersistence(t){let e=!1,i=!1;return t&&(e=!!t.synchronizeTabs,i=!!t.experimentalForceOwningTab,EL("synchronizeTabs",e,"experimentalForceOwningTab",i)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function C$(n){return function(t){const e=new kr;return t.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return function G3(n,t){return SR.apply(this,arguments)}(yield ZR(t),e)})),e.promise}(Or(n=Dn(n,Ri)))}(this._delegate)}onSnapshotsInSync(t){return function n6(n,t){return function u$(n,t){const e=new BS(t);return n.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return i=yield Iv(n),r=e,ot(i).Tu.add(r),void r.next();var i,r})),()=>{e.Tc(),n.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return i=yield Iv(n),r=e,void ot(i).Tu.delete(r);var i,r}))}}(Or(n=Dn(n,Ri)),XR(t)?t:{next:t})}(this._delegate,t)}get app(){if(!this._appCompat)throw new Be("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new kv(this,TL(this._delegate,t))}catch(e){throw bo(e,"collection()","Firestore.collection()")}}doc(t){try{return new sl(this,HS(this._delegate,t))}catch(e){throw bo(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new wo(this,function m$(n,t){if(n=Dn(n,Gw),QR("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Be(ve.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Bs(n,null,(e=t,new Hc(Cn.emptyPath(),e)));var e}(this._delegate,t))}catch(e){throw bo(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return function s6(n,t,e){n=Dn(n,Ri);const i=Object.assign(Object.assign({},q$),e);return function(r){if(r.maxAttempts<1)throw new Be(ve.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function d$(n,t,e){const i=new kr;return n.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){const r=yield(s=n,VS(s).then(l=>l.datastore));var s;new r$(n.asyncQueue,r,e,t,i).run()})),i.promise}(Or(n),r=>t(new r6(n,r)),i)}(this._delegate,e=>t(new rB(this,e)))}batch(){return Or(this._delegate),new sB(new KL(this._delegate,t=>Av(this._delegate,t)))}loadBundle(t){return function x$(n,t){const e=Or(n=Dn(n,Ri)),i=new _$;return function h$(n,t,e,i){const r=function(s,l){let d;return d="string"==typeof s?(new TextEncoder).encode(s):s,p=function(p,_){if(p instanceof Uint8Array)return mL(p,_);if(p instanceof ArrayBuffer)return mL(new Uint8Array(p),_);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(d),new n$(p,l);var p}(e,Uw(t));n.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){!function e$(n,t,e){const i=ot(n);var r;(r=(0,xe.Z)(function*(s,l,d){try{const p=yield l.getMetadata();if(yield function(I,P){const U=ot(I),Q=nr(P.createTime);return U.persistence.runTransaction("hasNewerBundle","readonly",le=>U.Ds.getBundleMetadata(le,P.id)).then(le=>!!le&&le.createTime.compareTo(Q)>=0)}(s.localStore,p))return yield l.close(),d._completeWith({taskState:"Success",documentsLoaded:(I=p).totalDocuments,bytesLoaded:I.totalBytes,totalDocuments:I.totalDocuments,totalBytes:I.totalBytes}),Promise.resolve(new Set);d._updateProgress(rL(p));const _=new O3(p,s.localStore,l.wt);let b=yield l.fc();for(;b;){const I=yield _.Nu(b);I&&d._updateProgress(I),b=yield l.fc()}const D=yield _.complete();return yield ad(s,D.Mu,void 0),yield function(I,P){const U=ot(I);return U.persistence.runTransaction("Save bundle","readwrite",Q=>U.Ds.saveBundleMetadata(Q,P))}(s.localStore,p),d._completeWith(D.progress),Promise.resolve(D.Ou)}catch(p){return Oh("SyncEngine",`Loading bundle failed with ${p}`),d._failWith(p),Promise.resolve(new Set)}var I}),function(s,l,d){return r.apply(this,arguments)})(i,t,e).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}(yield ZR(n),r,i)}))}(e,n._databaseId,t,i),i}(this._delegate,t)}namedQuery(t){return function S$(n,t){return function f$(n,t){return n.asyncQueue.enqueue((0,xe.Z)(function*(){return function(e,i){const r=ot(e);return r.persistence.runTransaction("Get named query","readonly",s=>r.Ds.getNamedQuery(s,i))}(yield YR(n),t)}))}(Or(n=Dn(n,Ri)),t).then(e=>e?new Bs(n,null,e.query):null)}(this._delegate,t).then(e=>e?new wo(this,e):null)}}class ZS extends rO{constructor(t){super(),this.firestore=t}convertBytes(t){return new Yw(new Yc(t))}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return sl.forKey(e,this.firestore,null)}}class rB{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new ZS(t)}get(t){const e=xm(t);return this._delegate.get(e).then(i=>new Zw(this._firestore,new cd(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,e.converter)))}set(t,e,i){const r=xm(t);return i?(oO("Transaction.set",i),this._delegate.set(r,e,i)):this._delegate.set(r,e),this}update(t,e,i,...r){const s=xm(t);return 2===arguments.length?this._delegate.update(s,e):this._delegate.update(s,e,i,...r),this}delete(t){const e=xm(t);return this._delegate.delete(e),this}}class sB{constructor(t){this._delegate=t}set(t,e,i){const r=xm(t);return i?(oO("WriteBatch.set",i),this._delegate.set(r,e,i)):this._delegate.set(r,e),this}update(t,e,i,...r){const s=xm(t);return 2===arguments.length?this._delegate.update(s,e):this._delegate.update(s,e,i,...r),this}delete(t){const e=xm(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}}class Dm{constructor(t,e,i){this._firestore=t,this._userDataWriter=e,this._delegate=i}fromFirestore(t,e){const i=new qw(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Kw(this._firestore,i),null!=e?e:{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){const i=Dm.INSTANCES;let r=i.get(t);r||(r=new WeakMap,i.set(t,r));let s=r.get(e);return s||(s=new Dm(t,new ZS(t),e),r.set(e,s)),s}}Dm.INSTANCES=new WeakMap;class sl{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new ZS(t)}static forPath(t,e,i){if(t.length%2!=0)throw new Be("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new sl(e,new xi(e._delegate,i,new nt(t)))}static forKey(t,e,i){return new sl(e,new xi(e._delegate,i,t))}get id(){return this._delegate.id}get parent(){return new kv(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new kv(this.firestore,TL(this._delegate,t))}catch(e){throw bo(e,"collection()","DocumentReference.collection()")}}isEqual(t){return(t=(0,L.m9)(t))instanceof xi&&IL(this._delegate,t)}set(t,e){e=oO("DocumentReference.set",e);try{return e?QL(this._delegate,t,e):QL(this._delegate,t)}catch(i){throw bo(i,"setDoc()","DocumentReference.set()")}}update(t,e,...i){try{return 1===arguments.length?XL(this._delegate,t):XL(this._delegate,t,e,...i)}catch(r){throw bo(r,"updateDoc()","DocumentReference.update()")}}delete(){return function e6(n){return Av(Dn(n.firestore,Ri),[new Wh(n._key,Di.none())])}(this._delegate)}onSnapshot(...t){const e=oB(t),i=aB(t,r=>new Zw(this.firestore,new cd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return JL(this._delegate,e,i)}get(t){let e;return e="cache"===(null==t?void 0:t.source)?function Z$(n){n=Dn(n,xi);const t=Dn(n.firestore,Ri),e=Or(t),i=new Em(t);return function l$(n,t){const e=new kr;return n.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return(i=(0,xe.Z)(function*(r,s,l){try{const d=yield function(p,_){const b=ot(p);return b.persistence.runTransaction("read document","readonly",D=>b.localDocuments.getDocument(D,_))}(r,s);d.isFoundDocument()?l.resolve(d):d.isNoDocument()?l.resolve(null):l.reject(new Be(ve.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const p=xv(d,`Failed to get document '${s} from cache`);l.reject(p)}}),function(r,s,l){return i.apply(this,arguments)})(yield YR(n),t,e);var i})),e.promise}(e,n._key).then(r=>new cd(t,i,n._key,r,new Cm(null!==r&&r.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==t?void 0:t.source)?function K$(n){n=Dn(n,xi);const t=Dn(n.firestore,Ri);return bL(Or(t),n._key,{source:"server"}).then(e=>sO(t,n,e))}(this._delegate):function Y$(n){n=Dn(n,xi);const t=Dn(n.firestore,Ri);return bL(Or(t),n._key).then(e=>sO(t,n,e))}(this._delegate),e.then(i=>new Zw(this.firestore,new cd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(t){return new sl(this.firestore,this._delegate.withConverter(t?Dm.getInstance(this.firestore,t):null))}}function bo(n,t,e){return n.message=n.message.replace(t,e),n}function oB(n){for(const t of n)if("object"==typeof t&&!aO(t))return t;return{}}function aB(n,t){var e,i;let r;return r=aO(n[0])?n[0]:aO(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{r.next&&r.next(t(s))},error:null===(e=r.error)||void 0===e?void 0:e.bind(r),complete:null===(i=r.complete)||void 0===i?void 0:i.bind(r)}}class Zw{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new sl(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return HL(this._delegate,t._delegate)}}class Kw extends Zw{data(t){const e=this._delegate.data(t);return function Hx(n,t){n||gt()}(void 0!==e),e}}class wo{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new ZS(t)}where(t,e,i){try{return new wo(this.firestore,ef(this._delegate,function L$(n,t,e){const i=t,r=WS("where",n);return new F$(r,i,e)}(t,e,i)))}catch(r){throw bo(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new wo(this.firestore,ef(this._delegate,function V$(n,t="asc"){const e=t,i=WS("orderBy",n);return new B$(i,e)}(t,e)))}catch(i){throw bo(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new wo(this.firestore,ef(this._delegate,function U$(n){return SL("limit",n),new GL("limit",n,"F")}(t)))}catch(e){throw bo(e,"limit()","Query.limit()")}}limitToLast(t){try{return new wo(this.firestore,ef(this._delegate,function H$(n){return SL("limitToLast",n),new GL("limitToLast",n,"L")}(t)))}catch(e){throw bo(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new wo(this.firestore,ef(this._delegate,function j$(...n){return new zL("startAt",n,!0)}(...t)))}catch(e){throw bo(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new wo(this.firestore,ef(this._delegate,function G$(...n){return new zL("startAfter",n,!1)}(...t)))}catch(e){throw bo(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new wo(this.firestore,ef(this._delegate,function z$(...n){return new $L("endBefore",n,!1)}(...t)))}catch(e){throw bo(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new wo(this.firestore,ef(this._delegate,function $$(...n){return new $L("endAt",n,!0)}(...t)))}catch(e){throw bo(e,"endAt()","Query.endAt()")}}isEqual(t){return AL(this._delegate,t._delegate)}get(t){let e;return e="cache"===(null==t?void 0:t.source)?function X$(n){n=Dn(n,Bs);const t=Dn(n.firestore,Ri),e=Or(t),i=new Em(t);return function c$(n,t){const e=new kr;return n.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return(i=(0,xe.Z)(function*(r,s,l){try{const d=yield RS(r,s,!0),p=new aL(s,d.ji),_=p.Ku(d.documents),b=p.applyChanges(_,!1);l.resolve(b.snapshot)}catch(d){const p=xv(d,`Failed to execute query '${s} against cache`);l.reject(p)}}),function(r,s,l){return i.apply(this,arguments)})(yield YR(n),t,e);var i})),e.promise}(e,n._query).then(r=>new Jh(t,i,n,r))}(this._delegate):"server"===(null==t?void 0:t.source)?function J$(n){n=Dn(n,Bs);const t=Dn(n.firestore,Ri),e=Or(t),i=new Em(t);return wL(e,n._query,{source:"server"}).then(r=>new Jh(t,i,n,r))}(this._delegate):function Q$(n){n=Dn(n,Bs);const t=Dn(n.firestore,Ri),e=Or(t),i=new Em(t);return jL(n._query),wL(e,n._query).then(r=>new Jh(t,i,n,r))}(this._delegate),e.then(i=>new lO(this.firestore,new Jh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...t){const e=oB(t),i=aB(t,r=>new lO(this.firestore,new Jh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return JL(this._delegate,e,i)}withConverter(t){return new wo(this.firestore,this._delegate.withConverter(t?Dm.getInstance(this.firestore,t):null))}}class g6{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new Kw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class lO{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new wo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new Kw(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(e=>new g6(this._firestore,e))}forEach(t,e){this._delegate.forEach(i=>{t.call(e,new Kw(this._firestore,i))})}isEqual(t){return HL(this._delegate,t._delegate)}}class kv extends wo{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new sl(this.firestore,t):null}doc(t){try{return new sl(this.firestore,void 0===t?HS(this._delegate):HS(this._delegate,t))}catch(e){throw bo(e,"doc()","CollectionReference.doc()")}}add(t){return function t6(n,t){const e=Dn(n.firestore,Ri),i=HS(n),r=YS(n.converter,t);return Av(e,[zS(bm(n.firestore),"addDoc",i._key,r,null!==n.converter,{}).toMutation(i._key,Di.exists(!1))]).then(()=>i)}(this._delegate,t).then(e=>new sl(this.firestore,e))}isEqual(t){return IL(this._delegate,t._delegate)}withConverter(t){return new kv(this.firestore,this._delegate.withConverter(t?Dm.getInstance(this.firestore,t):null))}}function xm(n){return Dn(n,xi)}class cO{constructor(...t){this._delegate=new ld(...t)}static documentId(){return new cO(qi.keyField().canonicalString())}isEqual(t){return(t=(0,L.m9)(t))instanceof ld&&this._delegate._internalPath.isEqual(t._internalPath)}}class Sm{constructor(t){this._delegate=t}static serverTimestamp(){const t=function a6(){return new JR("serverTimestamp")}();return t._methodName="FieldValue.serverTimestamp",new Sm(t)}static delete(){const t=function o6(){return new zw("deleteField")}();return t._methodName="FieldValue.delete",new Sm(t)}static arrayUnion(...t){const e=function l6(...n){return new A$("arrayUnion",n)}(...t);return e._methodName="FieldValue.arrayUnion",new Sm(e)}static arrayRemove(...t){const e=function c6(...n){return new k$("arrayRemove",n)}(...t);return e._methodName="FieldValue.arrayRemove",new Sm(e)}static increment(t){const e=function u6(n){return new R$("increment",n)}(t);return e._methodName="FieldValue.increment",new Sm(e)}isEqual(t){return this._delegate.isEqual(t._delegate)}}const _6={Firestore:iB,GeoPoint:jS,Timestamp:di,Blob:Yw,Transaction:rB,WriteBatch:sB,DocumentReference:sl,DocumentSnapshot:Zw,Query:wo,QueryDocumentSnapshot:Kw,QuerySnapshot:lO,CollectionReference:kv,FieldPath:cO,FieldValue:Sm,setLogLevel:function m6(n){!function Ux(n){Fc.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function lB(n,t){return function b6(n,t=gs.z){return new Ui.y(e=>{let i;return null!=t?t.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},e)}):i=n.onSnapshot({includeMetadataChanges:!0},e),()=>{null!=i&&i()}})}(n,t)}function uO(n,t){return lB(n,t).pipe((0,ct.U)(e=>({payload:e,type:"query"})))}function KS(n,t){return uO(n,t).pipe(Xr(void 0),p0(),(0,ct.U)(([e,i])=>{const r=i.payload.docChanges(),s=r.map(l=>({type:l.type,payload:l}));return e&&JSON.stringify(e.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((l,d)=>{const p=r.find(b=>b.doc.ref.isEqual(l.ref)),_=null==e?void 0:e.payload.docs.find(b=>b.ref.isEqual(l.ref));p&&JSON.stringify(p.doc.metadata)===JSON.stringify(l.metadata)||!p&&_&&JSON.stringify(_.metadata)===JSON.stringify(l.metadata)||s.push({type:"modified",payload:{oldIndex:d,newIndex:d,type:"modified",doc:l}})}),s}))}function cB(n,t,e){return KS(n,e).pipe(Fo((i,r)=>function C6(n,t,e){return t.forEach(i=>{e.indexOf(i.type)>-1&&(n=function E6(n,t){switch(t.type){case"added":if(!n[t.newIndex]||!n[t.newIndex].doc.ref.isEqual(t.doc.ref))return dO(n,t.newIndex,0,t);break;case"modified":if(null==n[t.oldIndex]||n[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const e=n.slice();return e.splice(t.oldIndex,1),e.splice(t.newIndex,0,t),e}return dO(n,t.newIndex,1,t)}break;case"removed":if(n[t.oldIndex]&&n[t.oldIndex].doc.ref.isEqual(t.doc.ref))return dO(n,t.oldIndex,1)}return n}(n,i))}),n}(i,r.map(s=>s.payload),t),[]),v_(),(0,ct.U)(i=>i.map(r=>({type:r.type,payload:r}))))}function dO(n,t,e,...i){const r=n.slice();return r.splice(t,e,...i),r}function uB(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function y6(n){(function v6(n,t){n.INTERNAL.registerComponent(new co.wA("firestore-compat",e=>{const i=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(i,r)},"PUBLIC").setServiceProps(Object.assign({},_6)))})(n,(t,e)=>new iB(t,e,new p6)),n.registerVersion("@firebase/firestore-compat","0.1.20")}(Jg.Z);class dB{constructor(t,e,i){this.ref=t,this.query=e,this.afs=i}stateChanges(t){let e=KS(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,ct.U)(i=>i.filter(r=>t.indexOf(r.type)>-1)))),e.pipe(Xr(void 0),p0(),Gn(([i,r])=>r.length>0||!i),(0,ct.U)(([i,r])=>r),kn.iC)}auditTrail(t){return this.stateChanges(t).pipe(Fo((e,i)=>[...e,...i],[]))}snapshotChanges(t){const e=uB(t);return cB(this.query,e,this.afs.schedulers.outsideAngular).pipe(kn.iC)}valueChanges(t={}){return uO(this.query,this.afs.schedulers.outsideAngular).pipe((0,ct.U)(e=>e.payload.docs.map(i=>t.idField?Object.assign(Object.assign({},i.data()),{[t.idField]:i.id}):i.data())),kn.iC)}get(t){return(0,rn.D)(this.query.get(t)).pipe(kn.iC)}add(t){return this.ref.add(t)}doc(t){return new hB(this.ref.doc(t),this.afs)}}class hB{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const i=this.ref.collection(t),{ref:r,query:s}=mB(i,e);return new dB(r,s,this.afs)}snapshotChanges(){return function w6(n,t){return lB(n,t).pipe(Xr(void 0),p0(),(0,ct.U)(([e,i])=>i.exists?(null==e?void 0:e.exists)?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(kn.iC)}valueChanges(t={}){return this.snapshotChanges().pipe((0,ct.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,rn.D)(this.ref.get(t)).pipe(kn.iC)}}class D6{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?KS(this.query,this.afs.schedulers.outsideAngular).pipe((0,ct.U)(e=>e.filter(i=>t.indexOf(i.type)>-1)),Gn(e=>e.length>0),kn.iC):KS(this.query,this.afs.schedulers.outsideAngular).pipe(kn.iC)}auditTrail(t){return this.stateChanges(t).pipe(Fo((e,i)=>[...e,...i],[]))}snapshotChanges(t){const e=uB(t);return cB(this.query,e,this.afs.schedulers.outsideAngular).pipe(kn.iC)}valueChanges(t={}){return uO(this.query,this.afs.schedulers.outsideAngular).pipe((0,ct.U)(i=>i.payload.docs.map(r=>t.idField?Object.assign({[t.idField]:r.id},r.data()):r.data())),kn.iC)}get(t){return(0,rn.D)(this.query.get(t)).pipe(kn.iC)}}const fB=new c.OlP("angularfire2.enableFirestorePersistence"),pB=new c.OlP("angularfire2.firestore.persistenceSettings"),x6=new c.OlP("angularfire2.firestore.settings"),S6=new c.OlP("angularfire2.firestore.use-emulator");function mB(n,t=(e=>e)){return{query:t(n),ref:n}}let ud=(()=>{class n{constructor(e,i,r,s,l,d,p,_,b,D,I,P,U,Q,le,Ye,et){this.schedulers=p;const rt=(0,Ai.on)(e,d,i),Xe=b;D&&Lb(rt,d,I,U,Q,le,P,Ye),[this.firestore,this.persistenceEnabled$]=(0,Ai.cc)(`${rt.name}.firestore`,"AngularFirestore",rt.name,()=>{const Ot=d.runOutsideAngular(()=>rt.firestore());if(s&&Ot.settings(s),Xe&&Ot.useEmulator(...Xe),r&&!or(l)){const Lt=()=>{try{return(0,rn.D)(Ot.enablePersistence(_||void 0).then(()=>!0,()=>!1))}catch(bn){return"undefined"!=typeof console&&console.warn(bn),at(!1)}};return[Ot,d.runOutsideAngular(Lt)]}return[Ot,at(!1)]},[s,Xe,r])}collection(e,i){let r;r="string"==typeof e?this.firestore.collection(e):e;const{ref:s,query:l}=mB(r,i),d=this.schedulers.ngZone.run(()=>s);return new dB(d,l,this)}collectionGroup(e,i){const r=i||(l=>l),s=this.firestore.collectionGroup(e);return new D6(r(s),this)}doc(e){let i;i="string"==typeof e?this.firestore.doc(e):e;const r=this.schedulers.ngZone.run(()=>i);return new hB(r,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(Ai.Dh),c.LFG(Ai.xv,8),c.LFG(fB,8),c.LFG(x6,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(kn.HU),c.LFG(pB,8),c.LFG(S6,8),c.LFG(bp,8),c.LFG(ho,8),c.LFG(yp,8),c.LFG(Zg,8),c.LFG(Kg,8),c.LFG(Qg,8),c.LFG(Xg,8),c.LFG(ku,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),M6=(()=>{class n{constructor(){Yg.Z.registerVersion("angularfire",kn.q4.full,"fst-compat")}static enablePersistence(e){return{ngModule:n,providers:[{provide:fB,useValue:!0},{provide:pB,useValue:e}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[ud]}),n})();const gB="@firebase/database";let hO="";function vB(n){hO=n}class A6{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,L.Pz)(e))}get(t){const e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,L.cI)(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class k6{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e}get(t){return(0,L.r3)(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const yB=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const t=window[n];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new A6(t)}}catch(t){}return new k6},Mm=yB("localStorage"),fO=yB("sessionStorage"),Rv=new jo.Yd("@firebase/database"),bB=function(){let n=1;return function(){return n++}}(),wB=function(n){const t=(0,L.dS)(n),e=new L.gQ;e.update(t);const i=e.digest();return L.US.encodeByteArray(i)},Qw=function(...n){let t="";for(let e=0;e<n.length;e++){const i=n[e];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?t+=Qw.apply(null,i):t+="object"==typeof i?(0,L.Pz)(i):i,t+=" "}return t};let Tm=null,CB=!0;const EB=function(n,t){(0,L.hu)(!t||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Rv.logLevel=jo.in.VERBOSE,Tm=Rv.log.bind(Rv),t&&fO.set("logging_enabled",!0)):"function"==typeof n?Tm=n:(Tm=null,fO.remove("logging_enabled"))},as=function(...n){if(!0===CB&&(CB=!1,null===Tm&&!0===fO.get("logging_enabled")&&EB(!0)),Tm){const t=Qw.apply(null,n);Tm(t)}},Xw=function(n){return function(...t){as(n,...t)}},pO=function(...n){const t="FIREBASE INTERNAL ERROR: "+Qw(...n);Rv.error(t)},Zc=function(...n){const t=`FIREBASE FATAL ERROR: ${Qw(...n)}`;throw Rv.error(t),new Error(t)},Vs=function(...n){const t="FIREBASE WARNING: "+Qw(...n);Rv.warn(t)},QS=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},dd="[MIN_NAME]",Kc="[MAX_NAME]",Im=function(n,t){if(n===t)return 0;if(n===dd||t===Kc)return-1;if(t===dd||n===Kc)return 1;{const e=XS(n),i=XS(t);return null!==e?null!==i?e-i==0?n.length-t.length:e-i:-1:null!==i?1:n<t?-1:1}},P6=function(n,t){return n===t?0:n<t?-1:1},Jw=function(n,t){if(t&&n in t)return t[n];throw new Error("Missing required key ("+n+") in object: "+(0,L.Pz)(t))},mO=function(n){if("object"!=typeof n||null===n)return(0,L.Pz)(n);const t=[];for(const i in n)t.push(i);t.sort();let e="{";for(let i=0;i<t.length;i++)0!==i&&(e+=","),e+=(0,L.Pz)(t[i]),e+=":",e+=mO(n[t[i]]);return e+="}",e},DB=function(n,t){const e=n.length;if(e<=t)return[n];const i=[];for(let r=0;r<e;r+=t)i.push(n.substring(r,r+t>e?e:r+t));return i};function ls(n,t){for(const e in n)n.hasOwnProperty(e)&&t(e,n[e])}const xB=function(n){(0,L.hu)(!QS(n),"Invalid JSON number");const i=1023;let r,s,l,d,p;0===n?(s=0,l=0,r=1/n==-1/0?1:0):(r=n<0,(n=Math.abs(n))>=Math.pow(2,1-i)?(d=Math.min(Math.floor(Math.log(n)/Math.LN2),i),s=d+i,l=Math.round(n*Math.pow(2,52-d)-Math.pow(2,52))):(s=0,l=Math.round(n/Math.pow(2,-1074))));const _=[];for(p=52;p;p-=1)_.push(l%2?1:0),l=Math.floor(l/2);for(p=11;p;p-=1)_.push(s%2?1:0),s=Math.floor(s/2);_.push(r?1:0),_.reverse();const b=_.join("");let D="";for(p=0;p<64;p+=8){let I=parseInt(b.substr(p,8),2).toString(16);1===I.length&&(I="0"+I),D+=I}return D.toLowerCase()},B6=new RegExp("^-?(0*)\\d{1,10}$"),SB=-2147483648,gO=2147483647,XS=function(n){if(B6.test(n)){const t=Number(n);if(t>=SB&&t<=gO)return t}return null},Ov=function(n){try{n()}catch(t){setTimeout(()=>{throw Vs("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}},eC=function(n,t){const e=setTimeout(n,t);return"object"==typeof e&&e.unref&&e.unref(),e};class U6{constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=null==e?void 0:e.getImmediate({optional:!0}),this.appCheck||null==e||e.get().then(i=>this.appCheck=i)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((e,i)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(i=>i.addTokenListener(t))}notifyForInvalidToken(){Vs(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class H6{constructor(t,e,i){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(e=>e&&"auth/token-not-initialized"===e.code?(as("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,i)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Vs(t)}}let tC=(()=>{class n{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const kB=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,PB="websocket",NB="long_polling";class vO{constructor(t,e,i,r,s=!1,l="",d=!1){this.secure=e,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=l,this.includeNamespaceInQueryParams=d,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Mm.get("host:"+t)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Mm.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function FB(n,t,e){let i;if((0,L.hu)("string"==typeof t,"typeof type must == string"),(0,L.hu)("object"==typeof e,"typeof params must == object"),t===PB)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(t!==NB)throw new Error("Unknown connection type: "+t);i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function j6(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(e.ns=n.namespace);const r=[];return ls(e,(s,l)=>{r.push(s+"="+l)}),i+r.join("&")}class G6{constructor(){this.counters_={}}incrementCounter(t,e=1){(0,L.r3)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return(0,L.p$)(this.counters_)}}const yO={},bO={};function wO(n){const t=n.toString();return yO[t]||(yO[t]=new G6),yO[t]}class $6{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&Ov(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class nf{constructor(t,e,i,r,s,l,d){this.connId=t,this.repoInfo=e,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=l,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Xw(t),this.stats_=wO(e),this.urlFn=p=>(this.appCheckToken&&(p.ac=this.appCheckToken),FB(e,NB,p))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new $6(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,L.Yr)()||"complete"===document.readyState)n();else{let t=!1;const e=function(){document.body?t||(t=!0,n()):setTimeout(e,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&e()}),window.attachEvent("onload",e))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new CO((...s)=>{const[l,d,p,_,b]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=d,this.password=p;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[l,d]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(l,d)},()=>{this.onClosed_()},this.urlFn);const i={start:"t"};i.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(i.cb=this.scriptTagHolder.uniqueCallbackIdentifier),i.v="5",this.transportSessionId&&(i.s=this.transportSessionId),this.lastSessionId&&(i.ls=this.lastSessionId),this.applicationId&&(i.p=this.applicationId),this.appCheckToken&&(i.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&kB.test(location.hostname)&&(i.r="f");const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){nf.forceAllow_=!0}static forceDisallow(){nf.forceDisallow_=!0}static isAvailable(){return!((0,L.Yr)()||!nf.forceAllow_&&(nf.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const e=(0,L.Pz)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const i=(0,L.h$)(e),r=DB(i,1840);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(t,e){if((0,L.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=t,i.pw=e,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const e=(0,L.Pz)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class CO{constructor(t,e,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,L.Yr)())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=bB(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=CO.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(d){as("frame writing exception"),d.stack&&as(d.stack),as(d)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||as("No IE domain setting required")}catch(e){const i=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;let e=this.urlFn(t),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const l=this.pendingSegs.shift();i=i+"&seg"+r+"="+l.seg+"&ts"+r+"="+l.ts+"&d"+r+"="+l.d,r++}return e+=i,this.addLongPollTag_(e,this.currentSerial),!0}return!1}enqueueSegment(t,e,i){this.pendingSegs.push({seg:t,ts:e,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);const i=()=>{this.outstandingRequests.delete(e),this.newRequest_()},r=setTimeout(i,Math.floor(25e3));this.addTag(t,()=>{clearTimeout(r),i()})}addTag(t,e){(0,L.Yr)()?this.doNodeLongPoll(t,e):setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||"loaded"===r||"complete"===r)&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),e())},i.onerror=()=>{as("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch(i){}},Math.floor(1))}}let eM=null;"undefined"!=typeof MozWebSocket?eM=MozWebSocket:"undefined"!=typeof WebSocket&&(eM=WebSocket);let Pv=(()=>{class n{constructor(e,i,r,s,l,d,p){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Xw(this.connId),this.stats_=wO(i),this.connURL=n.connectionURL_(i,d,p,s,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(e,i,r,s,l){const d={v:"5"};return!(0,L.Yr)()&&"undefined"!=typeof location&&location.hostname&&kB.test(location.hostname)&&(d.r="f"),i&&(d.s=i),r&&(d.ls=r),s&&(d.ac=s),l&&(d.p=l),FB(e,PB,d)}open(e,i){this.onDisconnect=i,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Mm.set("previous_websocket_failure",!0);try{let r;if((0,L.Yr)()){const l={headers:{"User-Agent":`Firebase/5/${hO}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(l.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(l.headers["X-Firebase-AppCheck"]=this.appCheckToken);const d=process.env,p=0===this.connURL.indexOf("wss://")?d.HTTPS_PROXY||d.https_proxy:d.HTTP_PROXY||d.http_proxy;p&&(l.proxy={origin:p})}this.mySock=new eM(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const r=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&null!==eM&&!n.forceDisallow_}static previouslyFailed(){return Mm.isInMemoryStorage||!0===Mm.get("previous_websocket_failure")}markConnectionHealthy(){Mm.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const r=(0,L.cI)(i);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,L.hu)(null===this.frames,"We already have a frame buffer"),e.length<=6){const i=Number(e);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const i=e.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{const r=this.extractFrameCount_(i);null!==r&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const i=(0,L.Pz)(e);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=DB(i,16384);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),GB=(()=>{class n{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[nf,Pv]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const i=Pv&&Pv.isAvailable();let r=i&&!Pv.previouslyFailed();if(e.webSocketOnly&&(i||Vs("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Pv];else{const s=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&s.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class KB{constructor(t,e,i,r,s,l,d,p,_,b){this.id=t,this.repoInfo_=e,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=l,this.onReady_=d,this.onDisconnect_=p,this.onKill_=_,this.lastSessionId=b,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Xw("c:"+this.id+":"),this.transportManager_=new GB(e),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,i)},Math.floor(0));const r=t.healthyTimeout||0;r>0&&(this.healthyTimeout_=eC(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{2!==this.state_&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){this.sendData_({t:"d",d:t})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if("t"in t){const e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const e=Jw("t",t),i=Jw("d",t);if("c"===e)this.onSecondaryControl_(i);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const e=Jw("t",t),i=Jw("d",t);"c"===e?this.onControl_(i):"d"===e&&this.onDataMessage_(i)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const e=Jw("t",t);if("d"in t){const i=t.d;if("h"===e)this.onHandshake_(i);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(i):"r"===e?this.onReset_(i):"e"===e?pO("Server Error: "+i):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):pO("Unknown control packet command: "+e)}}onHandshake_(t){const e=t.ts,i=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==i&&Vs("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,i),eC(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):eC(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Mm.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class QB{put(t,e,i,r){}merge(t,e,i,r){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,i){}onDisconnectMerge(t,e,i){}onDisconnectCancel(t,e){}reportStats(t){}}class XB{constructor(t){this.allowedEvents_=t,this.listeners_={},(0,L.hu)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){const i=[...this.listeners_[t]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,e)}}on(t,e,i){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:i});const r=this.getInitialEvent(t);r&&e.apply(i,r)}off(t,e,i){this.validateEventType_(t);const r=this.listeners_[t]||[];for(let s=0;s<r.length;s++)if(r[s].callback===e&&(!i||i===r[s].context))return void r.splice(s,1)}validateEventType_(t){(0,L.hu)(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}}class tM extends XB{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,L.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new tM}getInitialEvent(t){return(0,L.hu)("online"===t,"Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}class $n{constructor(t,e){if(void 0===e){this.pieces_=t.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"}}function Ln(){return new $n("")}function dn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function rf(n){return n.pieces_.length-n.pieceNum_}function hi(n){let t=n.pieceNum_;return t<n.pieces_.length&&t++,new $n(n.pieces_,t)}function DO(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function nC(n,t=0){return n.pieces_.slice(n.pieceNum_+t)}function tV(n){if(n.pieceNum_>=n.pieces_.length)return null;const t=[];for(let e=n.pieceNum_;e<n.pieces_.length-1;e++)t.push(n.pieces_[e]);return new $n(t,0)}function Oi(n,t){const e=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)e.push(n.pieces_[i]);if(t instanceof $n)for(let i=t.pieceNum_;i<t.pieces_.length;i++)e.push(t.pieces_[i]);else{const i=t.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&e.push(i[r])}return new $n(e,0)}function hn(n){return n.pieceNum_>=n.pieces_.length}function Co(n,t){const e=dn(n),i=dn(t);if(null===e)return t;if(e===i)return Co(hi(n),hi(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+n+")")}function fq(n,t){const e=nC(n,0),i=nC(t,0);for(let r=0;r<e.length&&r<i.length;r++){const s=Im(e[r],i[r]);if(0!==s)return s}return e.length===i.length?0:e.length<i.length?-1:1}function xO(n,t){if(rf(n)!==rf(t))return!1;for(let e=n.pieceNum_,i=t.pieceNum_;e<=n.pieces_.length;e++,i++)if(n.pieces_[e]!==t.pieces_[i])return!1;return!0}function ol(n,t){let e=n.pieceNum_,i=t.pieceNum_;if(rf(n)>rf(t))return!1;for(;e<n.pieces_.length;){if(n.pieces_[e]!==t.pieces_[i])return!1;++e,++i}return!0}class pq{constructor(t,e){this.errorPrefix_=e,this.parts_=nC(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=(0,L.ug)(this.parts_[i]);nV(this)}}function nV(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Am(n))}function Am(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class SO extends XB{constructor(){let t,e;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(e="visibilitychange",t="hidden"):void 0!==document.mozHidden?(e="mozvisibilitychange",t="mozHidden"):void 0!==document.msHidden?(e="msvisibilitychange",t="msHidden"):void 0!==document.webkitHidden&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{const i=!document[t];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new SO}getInitialEvent(t){return(0,L.hu)("visible"===t,"Unknown event type: "+t),[this.visible_]}}const iC=1e3;let iM,km=(()=>{class n extends QB{constructor(e,i,r,s,l,d,p,_){if(super(),this.repoInfo_=e,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=l,this.authTokenProvider_=d,this.appCheckTokenProvider_=p,this.authOverride_=_,this.id=n.nextPersistentConnectionId_++,this.log_=Xw("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=iC,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,_&&!(0,L.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");SO.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&tM.getInstance().on("online",this.onOnline_,this)}sendRequest(e,i,r){const s=++this.requestNumber_,l={r:s,a:e,b:i};this.log_((0,L.Pz)(l)),(0,L.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const i=new L.BH,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:d=>{const p=d.d;"ok"===d.s?i.resolve(p):i.reject(p)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const l=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const d=this.outstandingGets_[l];void 0===d||s!==d||(delete this.outstandingGets_[l],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+l+" timed out on connection"),i.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(l),i.promise}listen(e,i,r,s){this.initConnection_();const l=e._queryIdentifier,d=e._path.toString();this.log_("Listen called for "+d+" "+l),this.listens.has(d)||this.listens.set(d,new Map),(0,L.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,L.hu)(!this.listens.get(d).has(l),"listen() called twice for same path/queryId.");const p={onComplete:s,hashFn:i,query:e,tag:r};this.listens.get(d).set(l,p),this.connected_&&this.sendListen_(p)}sendGet_(e){const i=this.outstandingGets_[e];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(e){const i=e.query,r=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+r+" for "+s);const l={p:r};e.tag&&(l.q=i._queryObject,l.t=e.tag),l.h=e.hashFn(),this.sendRequest("q",l,p=>{const _=p.d,b=p.s;n.warnOnListenWarnings_(_,i),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",p),"ok"!==b&&this.removeListen_(r,s),e.onComplete&&e.onComplete(b,_))})}static warnOnListenWarnings_(e,i){if(e&&"object"==typeof e&&(0,L.r3)(e,"w")){const r=(0,L.DV)(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',l=i._path.toString();Vs(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||(0,L.GJ)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,i=(0,L.w9)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(i,r,s=>{const l=s.s,d=s.d||"error";this.authToken_===e&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const i=e.s,r=e.d||"error";"ok"===i?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(e,i){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),(0,L.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,i)}sendUnlisten_(e,i,r,s){this.log_("Unlisten on "+e+" for "+i);const l={p:e};s&&(l.q=r,l.t=s),this.sendRequest("n",l)}onDisconnectPut(e,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,i,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:i,onComplete:r})}onDisconnectMerge(e,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,i,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:i,onComplete:r})}onDisconnectCancel(e,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(e,i,r,s){const l={p:i,d:r};this.log_("onDisconnect "+e,l),this.sendRequest(e,l,d=>{s&&setTimeout(()=>{s(d.s,d.d)},Math.floor(0))})}put(e,i,r,s){this.putInternal("p",e,i,r,s)}merge(e,i,r,s){this.putInternal("m",e,i,r,s)}putInternal(e,i,r,s,l){this.initConnection_();const d={p:i,d:r};void 0!==l&&(d.h=l),this.outstandingPuts_.push({action:e,request:d,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+i)}sendPut_(e){const i=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(i,r,l=>{this.log_(i+" response",l),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(l.s,l.d)})}reportStats(e){if(this.connected_){const i={c:e};this.log_("reportStats",i),this.sendRequest("s",i,r=>{"ok"!==r.s&&this.log_("reportStats","Error sending stats: "+r.d)})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,L.Pz)(e));const i=e.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,i){this.log_("handleServerMessage",e,i),"d"===e?this.onDataUpdate_(i.p,i.d,!1,i.t):"m"===e?this.onDataUpdate_(i.p,i.d,!0,i.t):"c"===e?this.onListenRevoked_(i.p,i.q):"ac"===e?this.onAuthRevoked_(i.s,i.d):"apc"===e?this.onAppCheckRevoked_(i.s,i.d):"sd"===e?this.onSecurityDebugPacket_(i):pO("Unrecognized action received from server: "+(0,L.Pz)(e)+"\nAre you using the latest client?")}onReady_(e,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,L.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=iC,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=iC,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=iC),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-e);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var e=this;return(0,xe.Z)(function*(){if(e.shouldReconnect_()){e.log_("Making a connection attempt"),e.lastConnectionAttemptTime_=(new Date).getTime(),e.lastConnectionEstablishedTime_=null;const i=e.onDataMessage_.bind(e),r=e.onReady_.bind(e),s=e.onRealtimeDisconnect_.bind(e),l=e.id+":"+n.nextConnectionId_++,d=e.lastSessionId;let p=!1,_=null;const b=function(){_?_.close():(p=!0,s())};e.realtime_={close:b,sendRequest:function(P){(0,L.hu)(_,"sendRequest call when we're not connected not allowed."),_.sendRequest(P)}};const I=e.forceTokenRefresh_;e.forceTokenRefresh_=!1;try{const[P,U]=yield Promise.all([e.authTokenProvider_.getToken(I),e.appCheckTokenProvider_.getToken(I)]);p?as("getToken() completed but was canceled"):(as("getToken() completed. Creating connection."),e.authToken_=P&&P.accessToken,e.appCheckToken_=U&&U.token,_=new KB(l,e.repoInfo_,e.applicationId_,e.appCheckToken_,e.authToken_,i,r,s,Q=>{Vs(Q+" ("+e.repoInfo_.toString()+")"),e.interrupt("server_kill")},d))}catch(P){e.log_("Failed to get token: "+P),p||(e.repoInfo_.nodeAdmin&&Vs(P),b())}}})()}interrupt(e){as("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){as("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,L.xb)(this.interruptReasons_)&&(this.reconnectDelay_=iC,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const i=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const i=this.outstandingPuts_[e];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,i){let r;r=i?i.map(l=>mO(l)).join("$"):"default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,i){const r=new $n(e).toString();let s;if(this.listens.has(r)){const l=this.listens.get(r);s=l.get(i),l.delete(i),0===l.size&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,i){as("Auth token revoked: "+e+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===e||"permission_denied"===e)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,i){as("App check token revoked: "+e+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===e||"permission_denied"===e)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const i of e.values())this.sendListen_(i);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let i="js";(0,L.Yr)()&&(i=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+i+"."+hO.replace(/\./g,"-")]=1,(0,L.uI)()?e["framework.cordova"]=1:(0,L.b$)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=tM.getInstance().currentlyOnline();return(0,L.xb)(this.interruptReasons_)&&e}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class gn{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new gn(t,e)}}class nM{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){const i=new gn(dd,t),r=new gn(dd,e);return 0!==this.compare(i,r)}minPost(){return gn.MIN}}class sV extends nM{static get __EMPTY_NODE(){return iM}static set __EMPTY_NODE(t){iM=t}compare(t,e){return Im(t.name,e.name)}isDefinedOn(t){throw(0,L.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return gn.MIN}maxPost(){return new gn(Kc,iM)}makePost(t,e){return(0,L.hu)("string"==typeof t,"KeyIndex indexValue must always be a string."),new gn(t,iM)}toString(){return".key"}}const Qc=new sV;class rM{constructor(t,e,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let l=1;for(;!t.isEmpty();)if(t=t,l=e?i(t.key,e):1,r&&(l*=-1),l<0)t=this.isReverse_?t.left:t.right;else{if(0===l){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}let TO,tc=(()=>{class n{constructor(e,i,r,s,l){this.key=e,this.value=i,this.color=null!=r?r:n.RED,this.left=null!=s?s:Ko.EMPTY_NODE,this.right=null!=l?l:Ko.EMPTY_NODE}copy(e,i,r,s,l){return new n(null!=e?e:this.key,null!=i?i:this.value,null!=r?r:this.color,null!=s?s:this.left,null!=l?l:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,r){let s=this;const l=r(e,s.key);return s=l<0?s.copy(null,null,null,s.left.insert(e,i,r),null):0===l?s.copy(null,i,null,null,null):s.copy(null,null,null,null,s.right.insert(e,i,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ko.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,i){let r,s;if(r=this,i(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),0===i(e,r.key)){if(r.right.isEmpty())return Ko.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Ko{constructor(t,e=Ko.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new Ko(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,tc.BLACK,null,null))}remove(t){return new Ko(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,tc.BLACK,null,null))}get(t){let e,i=this.root_;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),0===e)return i.value;e<0?i=i.left:e>0&&(i=i.right)}return null}getPredecessorKey(t){let e,i=this.root_,r=null;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),0===e){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}e<0?i=i.left:e>0&&(r=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new rM(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new rM(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new rM(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new rM(this.root_,null,this.comparator_,!0,t)}}function Eq(n,t){return Im(n.name,t.name)}function MO(n,t){return Im(n,t)}Ko.EMPTY_NODE=new class Cq{copy(t,e,i,r,s){return this}insert(t,e,i){return new tc(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const oV=function(n){return"number"==typeof n?"number:"+xB(n):"string:"+n},aV=function(n){if(n.isLeafNode()){const t=n.val();(0,L.hu)("string"==typeof t||"number"==typeof t||"object"==typeof t&&(0,L.r3)(t,".sv"),"Priority must be a string or number.")}else(0,L.hu)(n===TO||n.isEmpty(),"priority of unexpected type.");(0,L.hu)(n===TO||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let lV,cV,uV,Nv=(()=>{class n{constructor(e,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=i,this.lazyHash_=null,(0,L.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),aV(this.priorityNode_)}static set __childrenNodeConstructor(e){lV=e}static get __childrenNodeConstructor(){return lV}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new n(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return hn(e)?this:".priority"===dn(e)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,i){return null}updateImmediateChild(e,i){return".priority"===e?this.updatePriority(i):i.isEmpty()&&".priority"!==e?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,i).updatePriority(this.priorityNode_)}updateChild(e,i){const r=dn(e);return null===r?i:i.isEmpty()&&".priority"!==r?this:((0,L.hu)(".priority"!==r||1===rf(e),".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(hi(e),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,i){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+oV(this.priorityNode_.val())+":");const i=typeof this.value_;e+=i+":",e+="number"===i?xB(this.value_):this.value_,this.lazyHash_=wB(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===n.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof n.__childrenNodeConstructor?-1:((0,L.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const i=typeof e.value_,r=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(i),l=n.VALUE_TYPE_ORDER.indexOf(r);return(0,L.hu)(s>=0,"Unknown leaf type: "+i),(0,L.hu)(l>=0,"Unknown leaf type: "+r),s===l?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:l-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const i=e;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const vi=new class Mq extends nM{compare(t,e){const i=t.node.getPriority(),r=e.node.getPriority(),s=i.compareTo(r);return 0===s?Im(t.name,e.name):s}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return gn.MIN}maxPost(){return new gn(Kc,new Nv("[PRIORITY-POST]",uV))}makePost(t,e){const i=cV(t);return new gn(e,new Nv("[PRIORITY-POST]",i))}toString(){return".priority"}},Tq=Math.log(2);class Iq{constructor(t){this.count=parseInt(Math.log(t+1)/Tq,10),this.current_=this.count-1;const r=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=t+1&r}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const sM=function(n,t,e,i){n.sort(t);const r=function(p,_){const b=_-p;let D,I;if(0===b)return null;if(1===b)return D=n[p],I=e?e(D):D,new tc(I,D.node,tc.BLACK,null,null);{const P=parseInt(b/2,10)+p,U=r(p,P),Q=r(P+1,_);return D=n[P],I=e?e(D):D,new tc(I,D.node,tc.BLACK,U,Q)}},d=function(p){let _=null,b=null,D=n.length;const I=function(U,Q){const le=D-U,Ye=D;D-=U;const et=r(le+1,Ye),rt=n[le],Xe=e?e(rt):rt;P(new tc(Xe,rt.node,Q,null,et))},P=function(U){_?(_.left=U,_=U):(b=U,_=U)};for(let U=0;U<p.count;++U){const Q=p.nextBitIsOne(),le=Math.pow(2,p.count-(U+1));Q?I(le,tc.BLACK):(I(le,tc.BLACK),I(le,tc.RED))}return b}(new Iq(n.length));return new Ko(i||t,d)};let IO;const Fv={};class hd{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return(0,L.hu)(Fv&&vi,"ChildrenNode.ts has not been loaded"),IO=IO||new hd({".priority":Fv},{".priority":vi}),IO}get(t){const e=(0,L.DV)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Ko?e:null}hasIndex(t){return(0,L.r3)(this.indexSet_,t.toString())}addIndex(t,e){(0,L.hu)(t!==Qc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const s=e.getIterator(gn.Wrap);let d,l=s.getNext();for(;l;)r=r||t.isDefinedOn(l.node),i.push(l),l=s.getNext();d=r?sM(i,t.getCompare()):Fv;const p=t.toString(),_=Object.assign({},this.indexSet_);_[p]=t;const b=Object.assign({},this.indexes_);return b[p]=d,new hd(b,_)}addToIndexes(t,e){const i=(0,L.UI)(this.indexes_,(r,s)=>{const l=(0,L.DV)(this.indexSet_,s);if((0,L.hu)(l,"Missing index implementation for "+s),r===Fv){if(l.isDefinedOn(t.node)){const d=[],p=e.getIterator(gn.Wrap);let _=p.getNext();for(;_;)_.name!==t.name&&d.push(_),_=p.getNext();return d.push(t),sM(d,l.getCompare())}return Fv}{const d=e.get(t.name);let p=r;return d&&(p=p.remove(new gn(t.name,d))),p.insert(t,t.node)}});return new hd(i,this.indexSet_)}removeFromIndexes(t,e){const i=(0,L.UI)(this.indexes_,r=>{if(r===Fv)return r;{const s=e.get(t.name);return s?r.remove(new gn(t.name,s)):r}});return new hd(i,this.indexSet_)}}let rC,tn=(()=>{class n{constructor(e,i,r){this.children_=e,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&aV(this.priorityNode_),this.children_.isEmpty()&&(0,L.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return rC||(rC=new n(new Ko(MO),null,hd.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||rC}updatePriority(e){return this.children_.isEmpty()?this:new n(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const i=this.children_.get(e);return null===i?rC:i}}getChild(e){const i=dn(e);return null===i?this:this.getImmediateChild(i).getChild(hi(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,i){if((0,L.hu)(i,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(i);{const r=new gn(e,i);let s,l;i.isEmpty()?(s=this.children_.remove(e),l=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,i),l=this.indexMap_.addToIndexes(r,this.children_));const d=s.isEmpty()?rC:this.priorityNode_;return new n(s,d,l)}}updateChild(e,i){const r=dn(e);if(null===r)return i;{(0,L.hu)(".priority"!==dn(e)||1===rf(e),".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(hi(e),i);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const i={};let r=0,s=0,l=!0;if(this.forEachChild(vi,(d,p)=>{i[d]=p.val(e),r++,l&&n.INTEGER_REGEXP_.test(d)?s=Math.max(s,Number(d)):l=!1}),!e&&l&&s<2*r){const d=[];for(const p in i)d[p]=i[p];return d}return e&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+oV(this.getPriority().val())+":"),this.forEachChild(vi,(i,r)=>{const s=r.hash();""!==s&&(e+=":"+i+":"+s)}),this.lazyHash_=""===e?"":wB(e)}return this.lazyHash_}getPredecessorChildName(e,i,r){const s=this.resolveIndex_(r);if(s){const l=s.getPredecessorKey(new gn(e,i));return l?l.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const i=this.resolveIndex_(e);if(i){const r=i.minKey();return r&&r.name}return this.children_.minKey()}getFirstChild(e){const i=this.getFirstChildName(e);return i?new gn(i,this.children_.get(i)):null}getLastChildName(e){const i=this.resolveIndex_(e);if(i){const r=i.maxKey();return r&&r.name}return this.children_.maxKey()}getLastChild(e){const i=this.getLastChildName(e);return i?new gn(i,this.children_.get(i)):null}forEachChild(e,i){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,i){const r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,gn.Wrap);let l=s.peek();for(;null!=l&&i.compare(l,e)<0;)s.getNext(),l=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,i){const r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,gn.Wrap);let l=s.peek();for(;null!=l&&i.compare(l,e)>0;)s.getNext(),l=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===sC?-1:0}withIndex(e){if(e===Qc||this.indexMap_.hasIndex(e))return this;{const i=this.indexMap_.addIndex(e,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(e){return e===Qc||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const i=e;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){const r=this.getIterator(vi),s=i.getIterator(vi);let l=r.getNext(),d=s.getNext();for(;l&&d;){if(l.name!==d.name||!l.node.equals(d.node))return!1;l=r.getNext(),d=s.getNext()}return null===l&&null===d}return!1}return!1}}resolveIndex_(e){return e===Qc?null:this.indexMap_.get(e.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const sC=new class Aq extends tn{constructor(){super(new Ko(MO),tn.EMPTY_NODE,hd.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return tn.EMPTY_NODE}isEmpty(){return!1}};function Yi(n,t=null){if(null===n)return tn.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(t=n[".priority"]),(0,L.hu)(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Nv(n,Yi(t));if(n instanceof Array){let e=tn.EMPTY_NODE;return ls(n,(i,r)=>{if((0,L.r3)(n,i)&&"."!==i.substring(0,1)){const s=Yi(r);(s.isLeafNode()||!s.isEmpty())&&(e=e.updateImmediateChild(i,s))}}),e.updatePriority(Yi(t))}{const e=[];let i=!1;if(ls(n,(l,d)=>{if("."!==l.substring(0,1)){const p=Yi(d);p.isEmpty()||(i=i||!p.getPriority().isEmpty(),e.push(new gn(l,p)))}}),0===e.length)return tn.EMPTY_NODE;const s=sM(e,Eq,l=>l.name,MO);if(i){const l=sM(e,vi.getCompare());return new tn(s,Yi(t),new hd({".priority":l},{".priority":vi}))}return new tn(s,Yi(t),hd.Default)}}Object.defineProperties(gn,{MIN:{value:new gn(dd,tn.EMPTY_NODE)},MAX:{value:new gn(Kc,sC)}}),sV.__EMPTY_NODE=tn.EMPTY_NODE,Nv.__childrenNodeConstructor=tn,function Dq(n){TO=n}(sC),function Sq(n){uV=n}(sC),function xq(n){cV=n}(Yi);class AO extends nM{constructor(t){super(),this.indexPath_=t,(0,L.hu)(!hn(t)&&".priority"!==dn(t),"Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){const i=this.extractChild(t.node),r=this.extractChild(e.node),s=i.compareTo(r);return 0===s?Im(t.name,e.name):s}makePost(t,e){const i=Yi(t),r=tn.EMPTY_NODE.updateChild(this.indexPath_,i);return new gn(e,r)}maxPost(){const t=tn.EMPTY_NODE.updateChild(this.indexPath_,sC);return new gn(Kc,t)}toString(){return nC(this.indexPath_,0).join("/")}}const kO=new class Rq extends nM{compare(t,e){const i=t.node.compareTo(e.node);return 0===i?Im(t.name,e.name):i}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return gn.MIN}maxPost(){return gn.MAX}makePost(t,e){const i=Yi(t);return new gn(e,i)}toString(){return".value"}},Lv="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Oq=function(){let n=0;const t=[];return function(e){const i=e===n;let r;n=e;const s=new Array(8);for(r=7;r>=0;r--)s[r]=Lv.charAt(e%64),e=Math.floor(e/64);(0,L.hu)(0===e,"Cannot push at time == 0");let l=s.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)l+=Lv.charAt(t[r]);return(0,L.hu)(20===l.length,"nextPushId: Length should be 20."),l}}(),fV=function(n){if(n===""+gO)return"-";const t=XS(n);if(null!=t)return""+(t+1);const e=new Array(n.length);for(let l=0;l<e.length;l++)e[l]=n.charAt(l);if(e.length<786)return e.push("-"),e.join("");let i=e.length-1;for(;i>=0&&"z"===e[i];)i--;if(-1===i)return Kc;const s=Lv.charAt(Lv.indexOf(e[i])+1);return e[i]=s,e.slice(0,i+1).join("")},pV=function(n){if(n===""+SB)return dd;const t=XS(n);if(null!=t)return""+(t-1);const e=new Array(n.length);for(let i=0;i<e.length;i++)e[i]=n.charAt(i);return"-"===e[e.length-1]?1===e.length?""+gO:(delete e[e.length-1],e.join("")):(e[e.length-1]=Lv.charAt(Lv.indexOf(e[e.length-1])-1),e.join("")+"z".repeat(786-e.length))};function mV(n){return{type:"value",snapshotNode:n}}function Bv(n,t){return{type:"child_added",snapshotNode:t,childName:n}}function oC(n,t){return{type:"child_removed",snapshotNode:t,childName:n}}function aC(n,t,e){return{type:"child_changed",snapshotNode:t,childName:n,oldSnap:e}}class OO{constructor(t){this.index_=t}updateChild(t,e,i,r,s,l){(0,L.hu)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const d=t.getImmediateChild(e);return d.getChild(r).equals(i.getChild(r))&&d.isEmpty()===i.isEmpty()||(null!=l&&(i.isEmpty()?t.hasChild(e)?l.trackChildChange(oC(e,d)):(0,L.hu)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):d.isEmpty()?l.trackChildChange(Bv(e,i)):l.trackChildChange(aC(e,i,d))),t.isLeafNode()&&i.isEmpty())?t:t.updateImmediateChild(e,i).withIndex(this.index_)}updateFullNode(t,e,i){return null!=i&&(t.isLeafNode()||t.forEachChild(vi,(r,s)=>{e.hasChild(r)||i.trackChildChange(oC(r,s))}),e.isLeafNode()||e.forEachChild(vi,(r,s)=>{if(t.hasChild(r)){const l=t.getImmediateChild(r);l.equals(s)||i.trackChildChange(aC(r,s,l))}else i.trackChildChange(Bv(r,s))})),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?tn.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class lC{constructor(t){this.indexedFilter_=new OO(t.getIndex()),this.index_=t.getIndex(),this.startPost_=lC.getStartPost_(t),this.endPost_=lC.getEndPost_(t)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0}updateChild(t,e,i,r,s,l){return this.matches(new gn(e,i))||(i=tn.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,i,r,s,l)}updateFullNode(t,e,i){e.isLeafNode()&&(e=tn.EMPTY_NODE);let r=e.withIndex(this.index_);r=r.updatePriority(tn.EMPTY_NODE);const s=this;return e.forEachChild(vi,(l,d)=>{s.matches(new gn(l,d))||(r=r.updateImmediateChild(l,tn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()}}class Nq{constructor(t){this.rangedFilter_=new lC(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}updateChild(t,e,i,r,s,l){return this.rangedFilter_.matches(new gn(e,i))||(i=tn.EMPTY_NODE),t.getImmediateChild(e).equals(i)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,i,r,s,l):this.fullLimitUpdateChild_(t,e,i,s,l)}updateFullNode(t,e,i){let r;if(e.isLeafNode()||e.isEmpty())r=tn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){let s;r=tn.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;s.hasNext()&&l<this.limit_;){const d=s.getNext();let p;if(p=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),d)<=0:this.index_.compare(d,this.rangedFilter_.getEndPost())<=0,!p)break;r=r.updateImmediateChild(d.name,d.node),l++}}else{let s,l,d,p;if(r=e.withIndex(this.index_),r=r.updatePriority(tn.EMPTY_NODE),this.reverse_){p=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),l=this.rangedFilter_.getStartPost();const D=this.index_.getCompare();d=(I,P)=>D(P,I)}else p=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),l=this.rangedFilter_.getEndPost(),d=this.index_.getCompare();let _=0,b=!1;for(;p.hasNext();){const D=p.getNext();!b&&d(s,D)<=0&&(b=!0),b&&_<this.limit_&&d(D,l)<=0?_++:r=r.updateImmediateChild(D.name,tn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,i,r,s){let l;if(this.reverse_){const D=this.index_.getCompare();l=(I,P)=>D(P,I)}else l=this.index_.getCompare();const d=t;(0,L.hu)(d.numChildren()===this.limit_,"");const p=new gn(e,i),_=this.reverse_?d.getFirstChild(this.index_):d.getLastChild(this.index_),b=this.rangedFilter_.matches(p);if(d.hasChild(e)){const D=d.getImmediateChild(e);let I=r.getChildAfterChild(this.index_,_,this.reverse_);for(;null!=I&&(I.name===e||d.hasChild(I.name));)I=r.getChildAfterChild(this.index_,I,this.reverse_);const P=null==I?1:l(I,p);if(b&&!i.isEmpty()&&P>=0)return null!=s&&s.trackChildChange(aC(e,i,D)),d.updateImmediateChild(e,i);{null!=s&&s.trackChildChange(oC(e,D));const Q=d.updateImmediateChild(e,tn.EMPTY_NODE);return null!=I&&this.rangedFilter_.matches(I)?(null!=s&&s.trackChildChange(Bv(I.name,I.node)),Q.updateImmediateChild(I.name,I.node)):Q}}return i.isEmpty()?t:b&&l(_,p)>=0?(null!=s&&(s.trackChildChange(oC(_.name,_.node)),s.trackChildChange(Bv(e,i))),d.updateImmediateChild(e,i).updateImmediateChild(_.name,tn.EMPTY_NODE)):t}}class oM{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=vi}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,L.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,L.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:dd}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,L.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,L.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Kc}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,L.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===vi}copy(){const t=new oM;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function PO(n,t,e){const i=n.copy();return i.startSet_=!0,void 0===t&&(t=null),i.indexStartValue_=t,null!=e?(i.startNameSet_=!0,i.indexStartName_=e):(i.startNameSet_=!1,i.indexStartName_=""),i}function NO(n,t,e){const i=n.copy();return i.endSet_=!0,void 0===t&&(t=null),i.indexEndValue_=t,void 0!==e?(i.endNameSet_=!0,i.indexEndName_=e):(i.endNameSet_=!1,i.indexEndName_=""),i}function aM(n,t){const e=n.copy();return e.index_=t,e}function gV(n){const t={};if(n.isDefault())return t;let e;return n.index_===vi?e="$priority":n.index_===kO?e="$value":n.index_===Qc?e="$key":((0,L.hu)(n.index_ instanceof AO,"Unrecognized index type!"),e=n.index_.toString()),t.orderBy=(0,L.Pz)(e),n.startSet_&&(t.startAt=(0,L.Pz)(n.indexStartValue_),n.startNameSet_&&(t.startAt+=","+(0,L.Pz)(n.indexStartName_))),n.endSet_&&(t.endAt=(0,L.Pz)(n.indexEndValue_),n.endNameSet_&&(t.endAt+=","+(0,L.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?t.limitToFirst=n.limit_:t.limitToLast=n.limit_),t}function _V(n){const t={};if(n.startSet_&&(t.sp=n.indexStartValue_,n.startNameSet_&&(t.sn=n.indexStartName_)),n.endSet_&&(t.ep=n.indexEndValue_,n.endNameSet_&&(t.en=n.indexEndName_)),n.limitSet_){t.l=n.limit_;let e=n.viewFrom_;""===e&&(e=n.isViewFromLeft()?"l":"r"),t.vf=e}return n.index_!==vi&&(t.i=n.index_.toString()),t}class lM extends QB{constructor(t,e,i,r){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=Xw("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return void 0!==e?"tag$"+e:((0,L.hu)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,e,i,r){const s=t._path.toString();this.log_("Listen called for "+s+" "+t._queryIdentifier);const l=lM.getListenId_(t,i),d={};this.listens_[l]=d;const p=gV(t._queryParams);this.restRequest_(s+".json",p,(_,b)=>{let D=b;if(404===_&&(D=null,_=null),null===_&&this.onDataUpdate_(s,D,!1,i),(0,L.DV)(this.listens_,l)===d){let I;I=_?401===_?"permission_denied":"rest_error:"+_:"ok",r(I,null)}})}unlisten(t,e){const i=lM.getListenId_(t,e);delete this.listens_[i]}get(t){const e=gV(t._queryParams),i=t._path.toString(),r=new L.BH;return this.restRequest_(i+".json",e,(s,l)=>{let d=l;404===s&&(d=null,s=null),null===s?(this.onDataUpdate_(i,d,!1,null),r.resolve(d)):r.reject(new Error(d))}),r.promise}refreshAuthToken(t){}restRequest_(t,e={},i){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(e.auth=r.accessToken),s&&s.token&&(e.ac=s.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+(0,L.xO)(e);this.log_("Sending REST request for "+l);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(i&&4===d.readyState){this.log_("REST Response for "+l+" received. status:",d.status,"response:",d.responseText);let p=null;if(d.status>=200&&d.status<300){try{p=(0,L.cI)(d.responseText)}catch(_){Vs("Failed to parse JSON response for "+l+": "+d.responseText)}i(null,p)}else 401!==d.status&&404!==d.status&&Vs("Got unsuccessful REST response for "+l+" Status: "+d.status),i(d.status);i=null}},d.open("GET",l,!0),d.send()})}}class Hq{constructor(){this.rootNode_=tn.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}}function cM(){return{value:null,children:new Map}}function Vv(n,t,e){if(hn(t))n.value=e,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(t,e);else{const i=dn(t);n.children.has(i)||n.children.set(i,cM()),Vv(n.children.get(i),t=hi(t),e)}}function FO(n,t){if(hn(t))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const e=n.value;return n.value=null,e.forEachChild(vi,(i,r)=>{Vv(n,new $n(i),r)}),FO(n,t)}}if(n.children.size>0){const e=dn(t);return t=hi(t),n.children.has(e)&&FO(n.children.get(e),t)&&n.children.delete(e),0===n.children.size}return!0}function LO(n,t,e){null!==n.value?e(t,n.value):function jq(n,t){n.children.forEach((e,i)=>{t(i,e)})}(n,(i,r)=>{LO(r,new $n(t.toString()+"/"+i),e)})}class Gq{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),e=Object.assign({},t);return this.last_&&ls(this.last_,(i,r)=>{e[i]=e[i]-r}),this.last_=t,e}}class qq{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Gq(t);const i=1e4+2e4*Math.random();eC(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const t=this.statsListener_.get(),e={};let i=!1;ls(t,(r,s)=>{s>0&&(0,L.r3)(this.statsToReport_,r)&&(e[r]=s,i=!0)}),i&&this.server_.reportStats(e),eC(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var al=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(al||(al={})),al))();function UO(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class uM{constructor(t,e,i){this.path=t,this.affectedTree=e,this.revert=i,this.type=al.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(t){if(hn(this.path)){if(null!=this.affectedTree.value)return(0,L.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new $n(t));return new uM(Ln(),e,this.revert)}}return(0,L.hu)(dn(this.path)===t,"operationForChild called for unrelated child."),new uM(hi(this.path),this.affectedTree,this.revert)}}class cC{constructor(t,e){this.source=t,this.path=e,this.type=al.LISTEN_COMPLETE}operationForChild(t){return hn(this.path)?new cC(this.source,Ln()):new cC(this.source,hi(this.path))}}class Rm{constructor(t,e,i){this.source=t,this.path=e,this.snap=i,this.type=al.OVERWRITE}operationForChild(t){return hn(this.path)?new Rm(this.source,Ln(),this.snap.getImmediateChild(t)):new Rm(this.source,hi(this.path),this.snap)}}class Uv{constructor(t,e,i){this.source=t,this.path=e,this.children=i,this.type=al.MERGE}operationForChild(t){if(hn(this.path)){const e=this.children.subtree(new $n(t));return e.isEmpty()?null:e.value?new Rm(this.source,Ln(),e.value):new Uv(this.source,Ln(),e)}return(0,L.hu)(dn(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new Uv(this.source,hi(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class sf{constructor(t,e,i){this.node_=t,this.fullyInitialized_=e,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(hn(t))return this.isFullyInitialized()&&!this.filtered_;const e=dn(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}class Wq{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function uC(n,t,e,i,r,s){const l=i.filter(d=>d.type===e);l.sort((d,p)=>function Kq(n,t,e){if(null==t.childName||null==e.childName)throw(0,L.g5)("Should only compare child_ events.");const i=new gn(t.childName,t.snapshotNode),r=new gn(e.childName,e.snapshotNode);return n.index_.compare(i,r)}(n,d,p)),l.forEach(d=>{const p=function Zq(n,t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,n.index_)),t}(n,d,s);r.forEach(_=>{_.respondsTo(d.type)&&t.push(_.createEvent(p,n.query_))})})}function dM(n,t){return{eventCache:n,serverCache:t}}function dC(n,t,e,i){return dM(new sf(t,e,i),n.serverCache)}function yV(n,t,e,i){return dM(n.eventCache,new sf(t,e,i))}function hM(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Om(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let HO;class yi{constructor(t,e=(()=>(HO||(HO=new Ko(P6)),HO))()){this.value=t,this.children=e}static fromObject(t){let e=new yi(null);return ls(t,(i,r)=>{e=e.set(new $n(i),r)}),e}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(null!=this.value&&e(this.value))return{path:Ln(),value:this.value};if(hn(t))return null;{const i=dn(t),r=this.children.get(i);if(null!==r){const s=r.findRootMostMatchingPathAndValue(hi(t),e);return null!=s?{path:Oi(new $n(i),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(hn(t))return this;{const e=dn(t),i=this.children.get(e);return null!==i?i.subtree(hi(t)):new yi(null)}}set(t,e){if(hn(t))return new yi(e,this.children);{const i=dn(t),s=(this.children.get(i)||new yi(null)).set(hi(t),e),l=this.children.insert(i,s);return new yi(this.value,l)}}remove(t){if(hn(t))return this.children.isEmpty()?new yi(null):new yi(null,this.children);{const e=dn(t),i=this.children.get(e);if(i){const r=i.remove(hi(t));let s;return s=r.isEmpty()?this.children.remove(e):this.children.insert(e,r),null===this.value&&s.isEmpty()?new yi(null):new yi(this.value,s)}return this}}get(t){if(hn(t))return this.value;{const e=dn(t),i=this.children.get(e);return i?i.get(hi(t)):null}}setTree(t,e){if(hn(t))return e;{const i=dn(t),s=(this.children.get(i)||new yi(null)).setTree(hi(t),e);let l;return l=s.isEmpty()?this.children.remove(i):this.children.insert(i,s),new yi(this.value,l)}}fold(t){return this.fold_(Ln(),t)}fold_(t,e){const i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(Oi(t,r),e)}),e(t,this.value,i)}findOnPath(t,e){return this.findOnPath_(t,Ln(),e)}findOnPath_(t,e,i){const r=!!this.value&&i(e,this.value);if(r)return r;if(hn(t))return null;{const s=dn(t),l=this.children.get(s);return l?l.findOnPath_(hi(t),Oi(e,s),i):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,Ln(),e)}foreachOnPath_(t,e,i){if(hn(t))return this;{this.value&&i(e,this.value);const r=dn(t),s=this.children.get(r);return s?s.foreachOnPath_(hi(t),Oi(e,r),i):new yi(null)}}foreach(t){this.foreach_(Ln(),t)}foreach_(t,e){this.children.inorderTraversal((i,r)=>{r.foreach_(Oi(t,i),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,i)=>{i.value&&t(e,i.value)})}}class nc{constructor(t){this.writeTree_=t}static empty(){return new nc(new yi(null))}}function hC(n,t,e){if(hn(t))return new nc(new yi(e));{const i=n.writeTree_.findRootMostValueAndPath(t);if(null!=i){const r=i.path;let s=i.value;const l=Co(r,t);return s=s.updateChild(l,e),new nc(n.writeTree_.set(r,s))}{const r=new yi(e),s=n.writeTree_.setTree(t,r);return new nc(s)}}}function jO(n,t,e){let i=n;return ls(e,(r,s)=>{i=hC(i,Oi(t,r),s)}),i}function bV(n,t){if(hn(t))return nc.empty();{const e=n.writeTree_.setTree(t,new yi(null));return new nc(e)}}function GO(n,t){return null!=Pm(n,t)}function Pm(n,t){const e=n.writeTree_.findRootMostValueAndPath(t);return null!=e?n.writeTree_.get(e.path).getChild(Co(e.path,t)):null}function wV(n){const t=[],e=n.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(vi,(i,r)=>{t.push(new gn(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{null!=r.value&&t.push(new gn(i,r.value))}),t}function af(n,t){if(hn(t))return n;{const e=Pm(n,t);return new nc(null!=e?new yi(e):n.writeTree_.subtree(t))}}function zO(n){return n.writeTree_.isEmpty()}function Hv(n,t){return CV(Ln(),n.writeTree_,t)}function CV(n,t,e){if(null!=t.value)return e.updateChild(n,t.value);{let i=null;return t.children.inorderTraversal((r,s)=>{".priority"===r?((0,L.hu)(null!==s.value,"Priority writes must always be leaf nodes"),i=s.value):e=CV(Oi(n,r),s,e)}),!e.getChild(n).isEmpty()&&null!==i&&(e=e.updateChild(Oi(n,".priority"),i)),e}}function fM(n,t){return MV(t,n)}function n5(n,t){if(n.snap)return ol(n.path,t);for(const e in n.children)if(n.children.hasOwnProperty(e)&&ol(Oi(n.path,e),t))return!0;return!1}function s5(n){return n.visible}function EV(n,t,e){let i=nc.empty();for(let r=0;r<n.length;++r){const s=n[r];if(t(s)){const l=s.path;let d;if(s.snap)ol(e,l)?(d=Co(e,l),i=hC(i,d,s.snap)):ol(l,e)&&(d=Co(l,e),i=hC(i,Ln(),s.snap.getChild(d)));else{if(!s.children)throw(0,L.g5)("WriteRecord should have .snap or .children");if(ol(e,l))d=Co(e,l),i=jO(i,d,s.children);else if(ol(l,e))if(d=Co(l,e),hn(d))i=jO(i,Ln(),s.children);else{const p=(0,L.DV)(s.children,dn(d));if(p){const _=p.getChild(hi(d));i=hC(i,Ln(),_)}}}}}return i}function DV(n,t,e,i,r){if(i||r){const s=af(n.visibleWrites,t);return!r&&zO(s)?e:r||null!=e||GO(s,Ln())?Hv(EV(n.allWrites,function(_){return(_.visible||r)&&(!i||!~i.indexOf(_.writeId))&&(ol(_.path,t)||ol(t,_.path))},t),e||tn.EMPTY_NODE):null}{const s=Pm(n.visibleWrites,t);if(null!=s)return s;{const l=af(n.visibleWrites,t);return zO(l)?e:null!=e||GO(l,Ln())?Hv(l,e||tn.EMPTY_NODE):null}}}function pM(n,t,e,i){return DV(n.writeTree,n.treePath,t,e,i)}function $O(n,t){return function o5(n,t,e){let i=tn.EMPTY_NODE;const r=Pm(n.visibleWrites,t);if(r)return r.isLeafNode()||r.forEachChild(vi,(s,l)=>{i=i.updateImmediateChild(s,l)}),i;if(e){const s=af(n.visibleWrites,t);return e.forEachChild(vi,(l,d)=>{const p=Hv(af(s,new $n(l)),d);i=i.updateImmediateChild(l,p)}),wV(s).forEach(l=>{i=i.updateImmediateChild(l.name,l.node)}),i}return wV(af(n.visibleWrites,t)).forEach(l=>{i=i.updateImmediateChild(l.name,l.node)}),i}(n.writeTree,n.treePath,t)}function xV(n,t,e,i){return function a5(n,t,e,i,r){(0,L.hu)(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=Oi(t,e);if(GO(n.visibleWrites,s))return null;{const l=af(n.visibleWrites,s);return zO(l)?r.getChild(e):Hv(l,r.getChild(e))}}(n.writeTree,n.treePath,t,e,i)}function mM(n,t){return function c5(n,t){return Pm(n.visibleWrites,t)}(n.writeTree,Oi(n.treePath,t))}function qO(n,t,e){return function l5(n,t,e,i){const r=Oi(t,e),s=Pm(n.visibleWrites,r);return null!=s?s:i.isCompleteForChild(e)?Hv(af(n.visibleWrites,r),i.getNode().getImmediateChild(e)):null}(n.writeTree,n.treePath,t,e)}function SV(n,t){return MV(Oi(n.treePath,t),n.writeTree)}function MV(n,t){return{treePath:n,writeTree:t}}class f5{constructor(){this.changeMap=new Map}trackChildChange(t){const e=t.type,i=t.childName;(0,L.hu)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,L.hu)(".priority"!==i,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const s=r.type;if("child_added"===e&&"child_removed"===s)this.changeMap.set(i,aC(i,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===s)this.changeMap.delete(i);else if("child_removed"===e&&"child_changed"===s)this.changeMap.set(i,oC(i,r.oldSnap));else if("child_changed"===e&&"child_added"===s)this.changeMap.set(i,Bv(i,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==s)throw(0,L.g5)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(i,aC(i,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(i,t)}getChanges(){return Array.from(this.changeMap.values())}}const TV=new class p5{getCompleteChild(t){return null}getChildAfterChild(t,e,i){return null}};class WO{constructor(t,e,i=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=i}getCompleteChild(t){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{const i=null!=this.optCompleteServerCache_?new sf(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return qO(this.writes_,t,i)}}getChildAfterChild(t,e,i){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Om(this.viewCache_),s=function h5(n,t,e,i,r,s){return function u5(n,t,e,i,r,s,l){let d;const p=af(n.visibleWrites,t),_=Pm(p,Ln());if(null!=_)d=_;else{if(null==e)return[];d=Hv(p,e)}if(d=d.withIndex(l),d.isEmpty()||d.isLeafNode())return[];{const b=[],D=l.getCompare(),I=s?d.getReverseIteratorFrom(i,l):d.getIteratorFrom(i,l);let P=I.getNext();for(;P&&b.length<r;)0!==D(P,i)&&b.push(P),P=I.getNext();return b}}(n.writeTree,n.treePath,t,e,i,r,s)}(this.writes_,r,e,1,i,t);return 0===s.length?null:s[0]}}function IV(n,t,e,i,r,s){const l=t.eventCache;if(null!=mM(i,e))return t;{let d,p;if(hn(e))if((0,L.hu)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const _=Om(t),D=$O(i,_ instanceof tn?_:tn.EMPTY_NODE);d=n.filter.updateFullNode(t.eventCache.getNode(),D,s)}else{const _=pM(i,Om(t));d=n.filter.updateFullNode(t.eventCache.getNode(),_,s)}else{const _=dn(e);if(".priority"===_){(0,L.hu)(1===rf(e),"Can't have a priority with additional path components");const b=l.getNode();p=t.serverCache.getNode();const D=xV(i,e,b,p);d=null!=D?n.filter.updatePriority(b,D):l.getNode()}else{const b=hi(e);let D;if(l.isCompleteForChild(_)){p=t.serverCache.getNode();const I=xV(i,e,l.getNode(),p);D=null!=I?l.getNode().getImmediateChild(_).updateChild(b,I):l.getNode().getImmediateChild(_)}else D=qO(i,_,t.serverCache);d=null!=D?n.filter.updateChild(l.getNode(),_,D,b,r,s):l.getNode()}}return dC(t,d,l.isFullyInitialized()||hn(e),n.filter.filtersNodes())}}function gM(n,t,e,i,r,s,l,d){const p=t.serverCache;let _;const b=l?n.filter:n.filter.getIndexedFilter();if(hn(e))_=b.updateFullNode(p.getNode(),i,null);else if(b.filtersNodes()&&!p.isFiltered()){const P=p.getNode().updateChild(e,i);_=b.updateFullNode(p.getNode(),P,null)}else{const P=dn(e);if(!p.isCompleteForPath(e)&&rf(e)>1)return t;const U=hi(e),le=p.getNode().getImmediateChild(P).updateChild(U,i);_=".priority"===P?b.updatePriority(p.getNode(),le):b.updateChild(p.getNode(),P,le,U,TV,null)}const D=yV(t,_,p.isFullyInitialized()||hn(e),b.filtersNodes());return IV(n,D,e,r,new WO(r,D,s),d)}function YO(n,t,e,i,r,s,l){const d=t.eventCache;let p,_;const b=new WO(r,t,s);if(hn(e))_=n.filter.updateFullNode(t.eventCache.getNode(),i,l),p=dC(t,_,!0,n.filter.filtersNodes());else{const D=dn(e);if(".priority"===D)_=n.filter.updatePriority(t.eventCache.getNode(),i),p=dC(t,_,d.isFullyInitialized(),d.isFiltered());else{const I=hi(e),P=d.getNode().getImmediateChild(D);let U;if(hn(I))U=i;else{const Q=b.getCompleteChild(D);U=null!=Q?".priority"===DO(I)&&Q.getChild(tV(I)).isEmpty()?Q:Q.updateChild(I,i):tn.EMPTY_NODE}p=P.equals(U)?t:dC(t,n.filter.updateChild(d.getNode(),D,U,I,b,l),d.isFullyInitialized(),n.filter.filtersNodes())}}return p}function AV(n,t){return n.eventCache.isCompleteForChild(t)}function kV(n,t,e){return e.foreach((i,r)=>{t=t.updateChild(i,r)}),t}function ZO(n,t,e,i,r,s,l,d){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let _,p=t;_=hn(e)?i:new yi(null).setTree(e,i);const b=t.serverCache.getNode();return _.children.inorderTraversal((D,I)=>{if(b.hasChild(D)){const U=kV(0,t.serverCache.getNode().getImmediateChild(D),I);p=gM(n,p,new $n(D),U,r,s,l,d)}}),_.children.inorderTraversal((D,I)=>{const P=!t.serverCache.isCompleteForChild(D)&&void 0===I.value;if(!b.hasChild(D)&&!P){const Q=kV(0,t.serverCache.getNode().getImmediateChild(D),I);p=gM(n,p,new $n(D),Q,r,s,l,d)}}),p}class E5{constructor(t,e){this.query_=t,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new OO(i.getIndex()),s=function Fq(n){return n.loadsAllData()?new OO(n.getIndex()):n.hasLimit()?new Nq(n):new lC(n)}(i);this.processor_=function m5(n){return{filter:n}}(s);const l=e.serverCache,d=e.eventCache,p=r.updateFullNode(tn.EMPTY_NODE,l.getNode(),null),_=s.updateFullNode(tn.EMPTY_NODE,d.getNode(),null),b=new sf(p,l.isFullyInitialized(),r.filtersNodes()),D=new sf(_,d.isFullyInitialized(),s.filtersNodes());this.viewCache_=dM(D,b),this.eventGenerator_=new Wq(this.query_)}get query(){return this.query_}}function S5(n,t){const e=Om(n.viewCache_);return e&&(n.query._queryParams.loadsAllData()||!hn(t)&&!e.getImmediateChild(dn(t)).isEmpty())?e.getChild(t):null}function RV(n){return 0===n.eventRegistrations_.length}function OV(n,t,e){const i=[];if(e){(0,L.hu)(null==t,"A cancel should cancel all event registrations.");const r=n.query._path;n.eventRegistrations_.forEach(s=>{const l=s.createCancelEvent(e,r);l&&i.push(l)})}if(t){let r=[];for(let s=0;s<n.eventRegistrations_.length;++s){const l=n.eventRegistrations_[s];if(l.matches(t)){if(t.hasAnyCallback()){r=r.concat(n.eventRegistrations_.slice(s+1));break}}else r.push(l)}n.eventRegistrations_=r}else n.eventRegistrations_=[];return i}function PV(n,t,e,i){t.type===al.MERGE&&null!==t.source.queryId&&((0,L.hu)(Om(n.viewCache_),"We should always have a full cache before handling merges"),(0,L.hu)(hM(n.viewCache_),"Missing event cache, even though we have a server cache"));const r=n.viewCache_,s=function _5(n,t,e,i,r){const s=new f5;let l,d;if(e.type===al.OVERWRITE){const _=e;_.source.fromUser?l=YO(n,t,_.path,_.snap,i,r,s):((0,L.hu)(_.source.fromServer,"Unknown source."),d=_.source.tagged||t.serverCache.isFiltered()&&!hn(_.path),l=gM(n,t,_.path,_.snap,i,r,d,s))}else if(e.type===al.MERGE){const _=e;_.source.fromUser?l=function y5(n,t,e,i,r,s,l){let d=t;return i.foreach((p,_)=>{const b=Oi(e,p);AV(t,dn(b))&&(d=YO(n,d,b,_,r,s,l))}),i.foreach((p,_)=>{const b=Oi(e,p);AV(t,dn(b))||(d=YO(n,d,b,_,r,s,l))}),d}(n,t,_.path,_.children,i,r,s):((0,L.hu)(_.source.fromServer,"Unknown source."),d=_.source.tagged||t.serverCache.isFiltered(),l=ZO(n,t,_.path,_.children,i,r,d,s))}else if(e.type===al.ACK_USER_WRITE){const _=e;l=_.revert?function C5(n,t,e,i,r,s){let l;if(null!=mM(i,e))return t;{const d=new WO(i,t,r),p=t.eventCache.getNode();let _;if(hn(e)||".priority"===dn(e)){let b;if(t.serverCache.isFullyInitialized())b=pM(i,Om(t));else{const D=t.serverCache.getNode();(0,L.hu)(D instanceof tn,"serverChildren would be complete if leaf node"),b=$O(i,D)}b=b,_=n.filter.updateFullNode(p,b,s)}else{const b=dn(e);let D=qO(i,b,t.serverCache);null==D&&t.serverCache.isCompleteForChild(b)&&(D=p.getImmediateChild(b)),_=null!=D?n.filter.updateChild(p,b,D,hi(e),d,s):t.eventCache.getNode().hasChild(b)?n.filter.updateChild(p,b,tn.EMPTY_NODE,hi(e),d,s):p,_.isEmpty()&&t.serverCache.isFullyInitialized()&&(l=pM(i,Om(t)),l.isLeafNode()&&(_=n.filter.updateFullNode(_,l,s)))}return l=t.serverCache.isFullyInitialized()||null!=mM(i,Ln()),dC(t,_,l,n.filter.filtersNodes())}}(n,t,_.path,i,r,s):function b5(n,t,e,i,r,s,l){if(null!=mM(r,e))return t;const d=t.serverCache.isFiltered(),p=t.serverCache;if(null!=i.value){if(hn(e)&&p.isFullyInitialized()||p.isCompleteForPath(e))return gM(n,t,e,p.getNode().getChild(e),r,s,d,l);if(hn(e)){let _=new yi(null);return p.getNode().forEachChild(Qc,(b,D)=>{_=_.set(new $n(b),D)}),ZO(n,t,e,_,r,s,d,l)}return t}{let _=new yi(null);return i.foreach((b,D)=>{const I=Oi(e,b);p.isCompleteForPath(I)&&(_=_.set(b,p.getNode().getChild(I)))}),ZO(n,t,e,_,r,s,d,l)}}(n,t,_.path,_.affectedTree,i,r,s)}else{if(e.type!==al.LISTEN_COMPLETE)throw(0,L.g5)("Unknown operation type: "+e.type);l=function w5(n,t,e,i,r){const s=t.serverCache;return IV(n,yV(t,s.getNode(),s.isFullyInitialized()||hn(e),s.isFiltered()),e,i,TV,r)}(n,t,e.path,i,s)}const p=s.getChanges();return function v5(n,t,e){const i=t.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=hM(n);(e.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&e.push(mV(hM(t)))}}(t,l,p),{viewCache:l,changes:p}}(n.processor_,r,t,e,i);return function g5(n,t){(0,L.hu)(t.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,L.hu)(t.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,L.hu)(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,NV(n,s.changes,s.viewCache.eventCache.getNode(),null)}function NV(n,t,e,i){return function Yq(n,t,e,i){const r=[],s=[];return t.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&s.push(function Pq(n,t){return{type:"child_moved",snapshotNode:t,childName:n}}(l.childName,l.snapshotNode))}),uC(n,r,"child_removed",t,i,e),uC(n,r,"child_added",t,i,e),uC(n,r,"child_moved",s,i,e),uC(n,r,"child_changed",t,i,e),uC(n,r,"value",t,i,e),r}(n.eventGenerator_,t,e,i?[i]:n.eventRegistrations_)}let _M,yM;class FV{constructor(){this.views=new Map}}function KO(n,t,e,i){const r=t.source.queryId;if(null!==r){const s=n.views.get(r);return(0,L.hu)(null!=s,"SyncTree gave us an op for an invalid query."),PV(s,t,e,i)}{let s=[];for(const l of n.views.values())s=s.concat(PV(l,t,e,i));return s}}function QO(n,t,e,i,r){const l=n.views.get(t._queryIdentifier);if(!l){let d=pM(e,r?i:null),p=!1;d?p=!0:i instanceof tn?(d=$O(e,i),p=!1):(d=tn.EMPTY_NODE,p=!1);const _=dM(new sf(d,p,!1),new sf(i,r,!1));return new E5(t,_)}return l}function LV(n){const t=[];for(const e of n.views.values())e.query._queryParams.loadsAllData()||t.push(e);return t}function lf(n,t){let e=null;for(const i of n.views.values())e=e||S5(i,t);return e}function BV(n,t){return t._queryParams.loadsAllData()?vM(n):n.views.get(t._queryIdentifier)}function VV(n,t){return null!=BV(n,t)}function cf(n){return null!=vM(n)}function vM(n){for(const t of n.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let F5=1;class UV{constructor(t){this.listenProvider_=t,this.syncPointTree_=new yi(null),this.pendingWriteTree_=function d5(){return{visibleWrites:nc.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function XO(n,t,e,i,r){return function Xq(n,t,e,i,r){(0,L.hu)(i>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),n.allWrites.push({path:t,snap:e,writeId:i,visible:r}),r&&(n.visibleWrites=hC(n.visibleWrites,t,e)),n.lastWriteId=i}(n.pendingWriteTree_,t,e,i,r),r?jv(n,new Rm({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,e)):[]}function uf(n,t,e=!1){const i=function e5(n,t){for(let e=0;e<n.allWrites.length;e++){const i=n.allWrites[e];if(i.writeId===t)return i}return null}(n.pendingWriteTree_,t);if(function t5(n,t){const e=n.allWrites.findIndex(d=>d.writeId===t);(0,L.hu)(e>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[e];n.allWrites.splice(e,1);let r=i.visible,s=!1,l=n.allWrites.length-1;for(;r&&l>=0;){const d=n.allWrites[l];d.visible&&(l>=e&&n5(d,i.path)?r=!1:ol(i.path,d.path)&&(s=!0)),l--}return!!r&&(s?(function r5(n){n.visibleWrites=EV(n.allWrites,s5,Ln()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(i.snap?n.visibleWrites=bV(n.visibleWrites,i.path):ls(i.children,p=>{n.visibleWrites=bV(n.visibleWrites,Oi(i.path,p))}),!0))}(n.pendingWriteTree_,t)){let s=new yi(null);return null!=i.snap?s=s.set(Ln(),!0):ls(i.children,l=>{s=s.set(new $n(l),!0)}),jv(n,new uM(i.path,s,e))}return[]}function fC(n,t,e){return jv(n,new Rm({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,e))}function bM(n,t,e,i){const r=t._path,s=n.syncPointTree_.get(r);let l=[];if(s&&("default"===t._queryIdentifier||VV(s,t))){const d=function O5(n,t,e,i){const r=t._queryIdentifier,s=[];let l=[];const d=cf(n);if("default"===r)for(const[p,_]of n.views.entries())l=l.concat(OV(_,e,i)),RV(_)&&(n.views.delete(p),_.query._queryParams.loadsAllData()||s.push(_.query));else{const p=n.views.get(r);p&&(l=l.concat(OV(p,e,i)),RV(p)&&(n.views.delete(r),p.query._queryParams.loadsAllData()||s.push(p.query)))}return d&&!cf(n)&&s.push(new(function A5(){return(0,L.hu)(_M,"Reference.ts has not been loaded"),_M}())(t._repo,t._path)),{removed:s,events:l}}(s,t,e,i);(function k5(n){return 0===n.views.size})(s)&&(n.syncPointTree_=n.syncPointTree_.remove(r));const p=d.removed;l=d.events;const _=-1!==p.findIndex(D=>D._queryParams.loadsAllData()),b=n.syncPointTree_.findOnPath(r,(D,I)=>cf(I));if(_&&!b){const D=n.syncPointTree_.subtree(r);if(!D.isEmpty()){const I=function z5(n){return n.fold((t,e,i)=>{if(e&&cf(e))return[vM(e)];{let r=[];return e&&(r=LV(e)),ls(i,(s,l)=>{r=r.concat(l)}),r}})}(D);for(let P=0;P<I.length;++P){const U=I[P],Q=U.query,le=qV(n,U);n.listenProvider_.startListening(mC(Q),pC(n,Q),le.hashFn,le.onComplete)}}}!b&&p.length>0&&!i&&(_?n.listenProvider_.stopListening(mC(t),null):p.forEach(D=>{const I=n.queryToTagMap.get(CM(D));n.listenProvider_.stopListening(mC(D),I)})),function $5(n,t){for(let e=0;e<t.length;++e){const i=t[e];if(!i._queryParams.loadsAllData()){const r=CM(i),s=n.queryToTagMap.get(r);n.queryToTagMap.delete(r),n.tagToQueryMap.delete(s)}}}(n,p)}return l}function HV(n,t,e,i){const r=JO(n,i);if(null!=r){const s=eP(r),l=s.path,d=s.queryId,p=Co(l,t);return tP(n,l,new Rm(UO(d),p,e))}return[]}function jV(n,t){const e=n._path;let i=null,r=!1;t.syncPointTree_.foreachOnPath(e,(_,b)=>{const D=Co(_,e);i=i||lf(b,D),r=r||cf(b)});let l,s=t.syncPointTree_.get(e);s?(r=r||cf(s),i=i||lf(s,Ln())):(s=new FV,t.syncPointTree_=t.syncPointTree_.set(e,s)),null!=i?l=!0:(l=!1,i=tn.EMPTY_NODE,t.syncPointTree_.subtree(e).foreachChild((b,D)=>{const I=lf(D,Ln());I&&(i=i.updateImmediateChild(b,I))}));const d=VV(s,n);if(!d&&!n._queryParams.loadsAllData()){const _=CM(n);(0,L.hu)(!t.queryToTagMap.has(_),"View does not exist, but we have a tag");const b=function q5(){return F5++}();t.queryToTagMap.set(_,b),t.tagToQueryMap.set(b,_)}return{syncPoint:s,writesCache:fM(t.pendingWriteTree_,e),serverCache:i,serverCacheComplete:l,foundAncestorDefaultView:r,viewAlreadyExists:d}}function GV(n,t,e){const{syncPoint:i,serverCache:r,writesCache:s,serverCacheComplete:l,viewAlreadyExists:d,foundAncestorDefaultView:p}=jV(t,n);let _=function R5(n,t,e,i,r,s){const l=QO(n,t,i,r,s);return n.views.has(t._queryIdentifier)||n.views.set(t._queryIdentifier,l),function M5(n,t){n.eventRegistrations_.push(t)}(l,e),function T5(n,t){const e=n.viewCache_.eventCache,i=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(vi,(s,l)=>{i.push(Bv(s,l))}),e.isFullyInitialized()&&i.push(mV(e.getNode())),NV(n,i,e.getNode(),t)}(l,e)}(i,t,e,s,r,l);if(!d&&!p){const b=BV(i,t);_=_.concat(function W5(n,t,e){const i=t._path,r=pC(n,t),s=qV(n,e),l=n.listenProvider_.startListening(mC(t),r,s.hashFn,s.onComplete),d=n.syncPointTree_.subtree(i);if(r)(0,L.hu)(!cf(d.value),"If we're adding a query, it shouldn't be shadowed");else{const p=d.fold((_,b,D)=>{if(!hn(_)&&b&&cf(b))return[vM(b).query];{let I=[];return b&&(I=I.concat(LV(b).map(P=>P.query))),ls(D,(P,U)=>{I=I.concat(U)}),I}});for(let _=0;_<p.length;++_){const b=p[_];n.listenProvider_.stopListening(mC(b),pC(n,b))}}return l}(n,t,b))}return _}function wM(n,t,e){const r=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(t,(l,d)=>{const _=lf(d,Co(l,t));if(_)return _});return DV(r,t,s,e,!0)}function jv(n,t){return zV(t,n.syncPointTree_,null,fM(n.pendingWriteTree_,Ln()))}function zV(n,t,e,i){if(hn(n.path))return $V(n,t,e,i);{const r=t.get(Ln());null==e&&null!=r&&(e=lf(r,Ln()));let s=[];const l=dn(n.path),d=n.operationForChild(l),p=t.children.get(l);if(p&&d){const _=e?e.getImmediateChild(l):null,b=SV(i,l);s=s.concat(zV(d,p,_,b))}return r&&(s=s.concat(KO(r,n,i,e))),s}}function $V(n,t,e,i){const r=t.get(Ln());null==e&&null!=r&&(e=lf(r,Ln()));let s=[];return t.children.inorderTraversal((l,d)=>{const p=e?e.getImmediateChild(l):null,_=SV(i,l),b=n.operationForChild(l);b&&(s=s.concat($V(b,d,p,_)))}),r&&(s=s.concat(KO(r,n,i,e))),s}function qV(n,t){const e=t.query,i=pC(n,e);return{hashFn:()=>(function D5(n){return n.viewCache_.serverCache.getNode()}(t)||tn.EMPTY_NODE).hash(),onComplete:r=>{if("ok"===r)return i?function U5(n,t,e){const i=JO(n,e);if(i){const r=eP(i),s=r.path,l=r.queryId,d=Co(s,t);return tP(n,s,new cC(UO(l),d))}return[]}(n,e._path,i):function V5(n,t){return jv(n,new cC({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(n,e._path);{const s=function L6(n,t){let e="Unknown Error";"too_big"===n?e="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?e="Client doesn't have permission to access the desired data.":"unavailable"===n&&(e="The service is unavailable");const i=new Error(n+" at "+t._path.toString()+": "+e);return i.code=n.toUpperCase(),i}(r,e);return bM(n,e,null,s)}}}}function pC(n,t){const e=CM(t);return n.queryToTagMap.get(e)}function CM(n){return n._path.toString()+"$"+n._queryIdentifier}function JO(n,t){return n.tagToQueryMap.get(t)}function eP(n){const t=n.indexOf("$");return(0,L.hu)(-1!==t&&t<n.length-1,"Bad queryKey."),{queryId:n.substr(t+1),path:new $n(n.substr(0,t))}}function tP(n,t,e){const i=n.syncPointTree_.get(t);return(0,L.hu)(i,"Missing sync point for query tag that we're tracking"),KO(i,e,fM(n.pendingWriteTree_,t),null)}function mC(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function N5(){return(0,L.hu)(yM,"Reference.ts has not been loaded"),yM}())(n._repo,n._path):n}class nP{constructor(t){this.node_=t}getImmediateChild(t){const e=this.node_.getImmediateChild(t);return new nP(e)}node(){return this.node_}}class iP{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){const e=Oi(this.path_,t);return new iP(this.syncTree_,e)}node(){return wM(this.syncTree_,this.path_)}}const WV=function(n,t,e){return n&&"object"==typeof n?((0,L.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?Z5(n[".sv"],t,e):"object"==typeof n[".sv"]?K5(n[".sv"],t):void(0,L.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},Z5=function(n,t,e){if("timestamp"===n)return e.timestamp;(0,L.hu)(!1,"Unexpected server value: "+n)},K5=function(n,t,e){n.hasOwnProperty("increment")||(0,L.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;"number"!=typeof i&&(0,L.hu)(!1,"Unexpected increment value: "+i);const r=t.node();if((0,L.hu)(null!=r,"Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const l=r.getValue();return"number"!=typeof l?i:l+i},YV=function(n,t,e,i){return sP(t,new iP(e,n),i)},rP=function(n,t,e){return sP(n,new nP(t),e)};function sP(n,t,e){const i=n.getPriority().val(),r=WV(i,t.getImmediateChild(".priority"),e);let s;if(n.isLeafNode()){const l=n,d=WV(l.getValue(),t,e);return d!==l.getValue()||r!==l.getPriority().val()?new Nv(d,Yi(r)):n}{const l=n;return s=l,r!==l.getPriority().val()&&(s=s.updatePriority(new Nv(r))),l.forEachChild(vi,(d,p)=>{const _=sP(p,t.getImmediateChild(d),e);_!==p&&(s=s.updateImmediateChild(d,_))}),s}}class oP{constructor(t="",e=null,i={children:{},childCount:0}){this.name=t,this.parent=e,this.node=i}}function EM(n,t){let e=t instanceof $n?t:new $n(t),i=n,r=dn(e);for(;null!==r;){const s=(0,L.DV)(i.node.children,r)||{children:{},childCount:0};i=new oP(r,i,s),e=hi(e),r=dn(e)}return i}function Nm(n){return n.node.value}function aP(n,t){n.node.value=t,lP(n)}function ZV(n){return n.node.childCount>0}function DM(n,t){ls(n.node.children,(e,i)=>{t(new oP(e,n,i))})}function KV(n,t,e,i){e&&!i&&t(n),DM(n,r=>{KV(r,t,!0,i)}),e&&i&&t(n)}function gC(n){return new $n(null===n.parent?n.name:gC(n.parent)+"/"+n.name)}function lP(n){null!==n.parent&&function J5(n,t,e){const i=function Q5(n){return void 0===Nm(n)&&!ZV(n)}(e),r=(0,L.r3)(n.node.children,t);i&&r?(delete n.node.children[t],n.node.childCount--,lP(n)):!i&&!r&&(n.node.children[t]=e.node,n.node.childCount++,lP(n))}(n.parent,n.name,n)}const e4=/[\[\].#$\/\u0000-\u001F\u007F]/,t4=/[\[\].#$\u0000-\u001F\u007F]/,cP=10485760,xM=function(n){return"string"==typeof n&&0!==n.length&&!e4.test(n)},QV=function(n){return"string"==typeof n&&0!==n.length&&!t4.test(n)},_C=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!QS(n)||n&&"object"==typeof n&&(0,L.r3)(n,".sv")},Xc=function(n,t,e,i){i&&void 0===t||vC((0,L.gK)(n,"value"),t,e)},vC=function(n,t,e){const i=e instanceof $n?new pq(e,n):e;if(void 0===t)throw new Error(n+"contains undefined "+Am(i));if("function"==typeof t)throw new Error(n+"contains a function "+Am(i)+" with contents = "+t.toString());if(QS(t))throw new Error(n+"contains "+t.toString()+" "+Am(i));if("string"==typeof t&&t.length>cP/3&&(0,L.ug)(t)>cP)throw new Error(n+"contains a string greater than "+cP+" utf8 bytes "+Am(i)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let r=!1,s=!1;if(ls(t,(l,d)=>{if(".value"===l)r=!0;else if(".priority"!==l&&".sv"!==l&&(s=!0,!xM(l)))throw new Error(n+" contains an invalid key ("+l+") "+Am(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function mq(n,t){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(t),n.byteLength_+=(0,L.ug)(t),nV(n)})(i,l),vC(n,d,i),function gq(n){const t=n.parts_.pop();n.byteLength_-=(0,L.ug)(t),n.parts_.length>0&&(n.byteLength_-=1)}(i)}),r&&s)throw new Error(n+' contains ".value" child '+Am(i)+" in addition to actual children.")}},XV=function(n,t,e,i){if(i&&void 0===t)return;const r=(0,L.gK)(n,"values");if(!t||"object"!=typeof t||Array.isArray(t))throw new Error(r+" must be an object containing the children to replace.");const s=[];ls(t,(l,d)=>{const p=new $n(l);if(vC(r,d,Oi(e,p)),".priority"===DO(p)&&!_C(d))throw new Error(r+"contains an invalid value for '"+p.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(p)}),function(n,t){let e,i;for(e=0;e<t.length;e++){i=t[e];const s=nC(i);for(let l=0;l<s.length;l++)if((".priority"!==s[l]||l!==s.length-1)&&!xM(s[l]))throw new Error(n+"contains an invalid key ("+s[l]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(fq);let r=null;for(e=0;e<t.length;e++){if(i=t[e],null!==r&&ol(r,i))throw new Error(n+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}}(r,s)},uP=function(n,t,e){if(!e||void 0!==t){if(QS(t))throw new Error((0,L.gK)(n,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!_C(t))throw new Error((0,L.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},yC=function(n,t,e,i){if(!(i&&void 0===e||xM(e)))throw new Error((0,L.gK)(n,t)+'was an invalid key = "'+e+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},bC=function(n,t,e,i){if(!(i&&void 0===e||QV(e)))throw new Error((0,L.gK)(n,t)+'was an invalid path = "'+e+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},ll=function(n,t){if(".info"===dn(t))throw new Error(n+" failed = Can't modify data under /.info/")},JV=function(n,t){const e=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!xM(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==e.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),QV(n)}(e))throw new Error((0,L.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class o4{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function SM(n,t){let e=null;for(let i=0;i<t.length;i++){const r=t[i],s=r.getPath();null!==e&&!xO(s,e.path)&&(n.eventLists_.push(e),e=null),null===e&&(e={events:[],path:s}),e.events.push(r)}e&&n.eventLists_.push(e)}function e2(n,t,e){SM(n,e),t2(n,i=>xO(i,t))}function cl(n,t,e){SM(n,e),t2(n,i=>ol(i,t)||ol(t,i))}function t2(n,t){n.recursionDepth_++;let e=!0;for(let i=0;i<n.eventLists_.length;i++){const r=n.eventLists_[i];r&&(t(r.path)?(a4(n.eventLists_[i]),n.eventLists_[i]=null):e=!1)}e&&(n.eventLists_=[]),n.recursionDepth_--}function a4(n){for(let t=0;t<n.events.length;t++){const e=n.events[t];if(null!==e){n.events[t]=null;const i=e.getEventRunner();Tm&&as("event: "+e.toString()),Ov(i)}}}const n2="repo_interrupt";class c4{constructor(t,e,i,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new o4,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=cM(),this.transactionQueueTree_=new oP,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function r2(n){const e=n.infoData_.getNode(new $n(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function wC(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:r2(n)})}function s2(n,t,e,i,r){n.dataUpdateCount++;const s=new $n(t);e=n.interceptServerDataCallback_?n.interceptServerDataCallback_(t,e):e;let l=[];if(r)if(i){const p=(0,L.UI)(e,_=>Yi(_));l=function j5(n,t,e,i){const r=JO(n,i);if(r){const s=eP(r),l=s.path,d=s.queryId,p=Co(l,t),_=yi.fromObject(e);return tP(n,l,new Uv(UO(d),p,_))}return[]}(n.serverSyncTree_,s,p,r)}else{const p=Yi(e);l=HV(n.serverSyncTree_,s,p,r)}else if(i){const p=(0,L.UI)(e,_=>Yi(_));l=function B5(n,t,e){const i=yi.fromObject(e);return jv(n,new Uv({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,i))}(n.serverSyncTree_,s,p)}else{const p=Yi(e);l=fC(n.serverSyncTree_,s,p)}let d=s;l.length>0&&(d=Gv(n,s)),cl(n.eventQueue_,d,l)}function o2(n,t){dP(n,"connected",t),!1===t&&function p4(n){Fm(n,"onDisconnectEvents");const t=wC(n),e=cM();LO(n.onDisconnect_,Ln(),(r,s)=>{const l=YV(r,s,n.serverSyncTree_,t);Vv(e,r,l)});let i=[];LO(e,Ln(),(r,s)=>{i=i.concat(fC(n.serverSyncTree_,r,s));const l=mP(n,r);Gv(n,l)}),n.onDisconnect_=cM(),cl(n.eventQueue_,Ln(),i)}(n)}function dP(n,t,e){const i=new $n("/.info/"+t),r=Yi(e);n.infoData_.updateSnapshot(i,r);const s=fC(n.infoSyncTree_,i,r);cl(n.eventQueue_,i,s)}function MM(n){return n.nextWriteId_++}function h4(n,t){const e=function G5(n,t){const e=t._path;let i=null;n.syncPointTree_.foreachOnPath(e,(_,b)=>{const D=Co(_,e);i=i||lf(b,D)});let r=n.syncPointTree_.get(e);r?i=i||lf(r,Ln()):(r=new FV,n.syncPointTree_=n.syncPointTree_.set(e,r));const s=null!=i,l=s?new sf(i,!0,!1):null;return function x5(n){return hM(n.viewCache_)}(QO(r,t,fM(n.pendingWriteTree_,t._path),s?l.getNode():tn.EMPTY_NODE,s))}(n.serverSyncTree_,t);return null!=e?Promise.resolve(e):n.server_.get(t).then(i=>{const r=Yi(i).withIndex(t._queryParams.getIndex());if(t._queryParams.loadsAllData())fC(n.serverSyncTree_,t._path,r);else{const l=function H5(n,t){const{syncPoint:e,serverCache:i,writesCache:r,serverCacheComplete:s}=jV(t,n),l=QO(e,t,r,i,s);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,l),t._queryParams.loadsAllData()?null:pC(n,t)}(n.serverSyncTree_,t);HV(n.serverSyncTree_,t._path,r,l)}return bM(n.serverSyncTree_,t,null).length>0&&Fm(n,"unexpected cancel events in repoGetValue"),r},i=>(Fm(n,"get for query "+(0,L.Pz)(t)+" failed: "+i),Promise.reject(new Error(i))))}function hP(n,t,e,i,r){Fm(n,"set",{path:t.toString(),value:e,priority:i});const s=wC(n),l=Yi(e,i),d=wM(n.serverSyncTree_,t),p=rP(l,d,s),_=MM(n),b=XO(n.serverSyncTree_,t,p,_,!0);SM(n.eventQueue_,b),n.server_.put(t.toString(),l.val(!0),(I,P)=>{const U="ok"===I;U||Vs("set at "+t+" failed: "+I);const Q=uf(n.serverSyncTree_,_,!U);cl(n.eventQueue_,t,Q),df(0,r,I,P)});const D=mP(n,t);Gv(n,D),cl(n.eventQueue_,D,[])}function m4(n,t,e){n.server_.onDisconnectCancel(t.toString(),(i,r)=>{"ok"===i&&FO(n.onDisconnect_,t),df(0,e,i,r)})}function a2(n,t,e,i){const r=Yi(e);n.server_.onDisconnectPut(t.toString(),r.val(!0),(s,l)=>{"ok"===s&&Vv(n.onDisconnect_,t,r),df(0,i,s,l)})}function fP(n,t,e){let i;i=".info"===dn(t._path)?bM(n.infoSyncTree_,t,e):bM(n.serverSyncTree_,t,e),e2(n.eventQueue_,t._path,i)}function l2(n){n.persistentConnection_&&n.persistentConnection_.interrupt(n2)}function Fm(n,...t){let e="";n.persistentConnection_&&(e=n.persistentConnection_.id+":"),as(e,...t)}function df(n,t,e,i){t&&Ov(()=>{if("ok"===e)t(null);else{const r=(e||"error").toUpperCase();let s=r;i&&(s+=": "+i);const l=new Error(s);l.code=r,t(l)}})}function pP(n,t,e){return wM(n.serverSyncTree_,t,e)||tn.EMPTY_NODE}function TM(n,t=n.transactionQueueTree_){if(t||IM(n,t),Nm(t)){const e=u2(n,t);(0,L.hu)(e.length>0,"Sending zero length transaction queue"),e.every(r=>0===r.status)&&function w4(n,t,e){const i=e.map(_=>_.currentWriteId),r=pP(n,t,i);let s=r;const l=r.hash();for(let _=0;_<e.length;_++){const b=e[_];(0,L.hu)(0===b.status,"tryToSendTransactionQueue_: items in queue should all be run."),b.status=1,b.retryCount++;const D=Co(t,b.path);s=s.updateChild(D,b.currentOutputSnapshotRaw)}const d=s.val(!0),p=t;n.server_.put(p.toString(),d,_=>{Fm(n,"transaction put response",{path:p.toString(),status:_});let b=[];if("ok"===_){const D=[];for(let I=0;I<e.length;I++)e[I].status=2,b=b.concat(uf(n.serverSyncTree_,e[I].currentWriteId)),e[I].onComplete&&D.push(()=>e[I].onComplete(null,!0,e[I].currentOutputSnapshotResolved)),e[I].unwatcher();IM(n,EM(n.transactionQueueTree_,t)),TM(n,n.transactionQueueTree_),cl(n.eventQueue_,t,b);for(let I=0;I<D.length;I++)Ov(D[I])}else{if("datastale"===_)for(let D=0;D<e.length;D++)e[D].status=3===e[D].status?4:0;else{Vs("transaction at "+p.toString()+" failed: "+_);for(let D=0;D<e.length;D++)e[D].status=4,e[D].abortReason=_}Gv(n,t)}},l)}(n,gC(t),e)}else ZV(t)&&DM(t,e=>{TM(n,e)})}function Gv(n,t){const e=c2(n,t),i=gC(e);return function C4(n,t,e){if(0===t.length)return;const i=[];let r=[];const l=t.filter(d=>0===d.status).map(d=>d.currentWriteId);for(let d=0;d<t.length;d++){const p=t[d],_=Co(e,p.path);let D,b=!1;if((0,L.hu)(null!==_,"rerunTransactionsUnderNode_: relativePath should not be null."),4===p.status)b=!0,D=p.abortReason,r=r.concat(uf(n.serverSyncTree_,p.currentWriteId,!0));else if(0===p.status)if(p.retryCount>=25)b=!0,D="maxretry",r=r.concat(uf(n.serverSyncTree_,p.currentWriteId,!0));else{const I=pP(n,p.path,l);p.currentInputSnapshot=I;const P=t[d].update(I.val());if(void 0!==P){vC("transaction failed: Data returned ",P,p.path);let U=Yi(P);"object"==typeof P&&null!=P&&(0,L.r3)(P,".priority")||(U=U.updatePriority(I.getPriority()));const le=p.currentWriteId,Ye=wC(n),et=rP(U,I,Ye);p.currentOutputSnapshotRaw=U,p.currentOutputSnapshotResolved=et,p.currentWriteId=MM(n),l.splice(l.indexOf(le),1),r=r.concat(XO(n.serverSyncTree_,p.path,et,p.currentWriteId,p.applyLocally)),r=r.concat(uf(n.serverSyncTree_,le,!0))}else b=!0,D="nodata",r=r.concat(uf(n.serverSyncTree_,p.currentWriteId,!0))}cl(n.eventQueue_,e,r),r=[],b&&(t[d].status=2,setTimeout(t[d].unwatcher,Math.floor(0)),t[d].onComplete&&i.push("nodata"===D?()=>t[d].onComplete(null,!1,t[d].currentInputSnapshot):()=>t[d].onComplete(new Error(D),!1,null)))}IM(n,n.transactionQueueTree_);for(let d=0;d<i.length;d++)Ov(i[d]);TM(n,n.transactionQueueTree_)}(n,u2(n,e),i),i}function c2(n,t){let e,i=n.transactionQueueTree_;for(e=dn(t);null!==e&&void 0===Nm(i);)i=EM(i,e),e=dn(t=hi(t));return i}function u2(n,t){const e=[];return d2(n,t,e),e.sort((i,r)=>i.order-r.order),e}function d2(n,t,e){const i=Nm(t);if(i)for(let r=0;r<i.length;r++)e.push(i[r]);DM(t,r=>{d2(n,r,e)})}function IM(n,t){const e=Nm(t);if(e){let i=0;for(let r=0;r<e.length;r++)2!==e[r].status&&(e[i]=e[r],i++);e.length=i,aP(t,e.length>0?e:void 0)}DM(t,i=>{IM(n,i)})}function mP(n,t){const e=gC(c2(n,t)),i=EM(n.transactionQueueTree_,t);return function X5(n,t,e){let i=e?n:n.parent;for(;null!==i;){if(t(i))return!0;i=i.parent}}(i,r=>{gP(n,r)}),gP(n,i),KV(i,r=>{gP(n,r)}),e}function gP(n,t){const e=Nm(t);if(e){const i=[];let r=[],s=-1;for(let l=0;l<e.length;l++)3===e[l].status||(1===e[l].status?((0,L.hu)(s===l-1,"All SENT items should be at beginning of queue."),s=l,e[l].status=3,e[l].abortReason="set"):((0,L.hu)(0===e[l].status,"Unexpected transaction status in abort"),e[l].unwatcher(),r=r.concat(uf(n.serverSyncTree_,e[l].currentWriteId,!0)),e[l].onComplete&&i.push(e[l].onComplete.bind(null,new Error("set"),!1,null))));-1===s?aP(t,void 0):e.length=s+1,cl(n.eventQueue_,gC(t),r);for(let l=0;l<i.length;l++)Ov(i[l])}}const _P=function(n,t){const e=x4(n),i=e.namespace;return"firebase.com"===e.domain&&Zc(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==e.domain&&Zc("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Vs("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new vO(e.host,e.secure,i,"ws"===e.scheme||"wss"===e.scheme,t,"",i!==e.subdomain),path:new $n(e.pathString)}},x4=function(n){let t="",e="",i="",r="",s="",l=!0,d="https",p=443;if("string"==typeof n){let _=n.indexOf("//");_>=0&&(d=n.substring(0,_-1),n=n.substring(_+2));let b=n.indexOf("/");-1===b&&(b=n.length);let D=n.indexOf("?");-1===D&&(D=n.length),t=n.substring(0,Math.min(b,D)),b<D&&(r=function E4(n){let t="";const e=n.split("/");for(let i=0;i<e.length;i++)if(e[i].length>0){let r=e[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch(s){}t+="/"+r}return t}(n.substring(b,D)));const I=function D4(n){const t={};"?"===n.charAt(0)&&(n=n.substring(1));for(const e of n.split("&")){if(0===e.length)continue;const i=e.split("=");2===i.length?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Vs(`Invalid query segment '${e}' in query '${n}'`)}return t}(n.substring(Math.min(n.length,D)));_=t.indexOf(":"),_>=0?(l="https"===d||"wss"===d,p=parseInt(t.substring(_+1),10)):_=t.length;const P=t.slice(0,_);if("localhost"===P.toLowerCase())e="localhost";else if(P.split(".").length<=2)e=P;else{const U=t.indexOf(".");i=t.substring(0,U).toLowerCase(),e=t.substring(U+1),s=i}"ns"in I&&(s=I.ns)}return{host:t,port:p,domain:e,subdomain:i,secure:l,scheme:d,pathString:r,namespace:s}};class h2{constructor(t,e,i,r){this.eventType=t,this.eventRegistration=e,this.snapshot=i,this.prevName=r}getPath(){const t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,L.Pz)(this.snapshot.exportVal())}}class f2{constructor(t,e,i){this.eventRegistration=t,this.error=e,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class p2{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return(0,L.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}class m2{constructor(t,e){this._repo=t,this._path=e}cancel(){const t=new L.BH;return m4(this._repo,this._path,t.wrapCallback(()=>{})),t.promise}remove(){ll("OnDisconnect.remove",this._path);const t=new L.BH;return a2(this._repo,this._path,null,t.wrapCallback(()=>{})),t.promise}set(t){ll("OnDisconnect.set",this._path),Xc("OnDisconnect.set",t,this._path,!1);const e=new L.BH;return a2(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}setWithPriority(t,e){ll("OnDisconnect.setWithPriority",this._path),Xc("OnDisconnect.setWithPriority",t,this._path,!1),uP("OnDisconnect.setWithPriority",e,!1);const i=new L.BH;return function g4(n,t,e,i,r){const s=Yi(e,i);n.server_.onDisconnectPut(t.toString(),s.val(!0),(l,d)=>{"ok"===l&&Vv(n.onDisconnect_,t,s),df(0,r,l,d)})}(this._repo,this._path,t,e,i.wrapCallback(()=>{})),i.promise}update(t){ll("OnDisconnect.update",this._path),XV("OnDisconnect.update",t,this._path,!1);const e=new L.BH;return function _4(n,t,e,i){if((0,L.xb)(e))return as("onDisconnect().update() called with empty data.  Don't do anything."),void df(0,i,"ok",void 0);n.server_.onDisconnectMerge(t.toString(),e,(r,s)=>{"ok"===r&&ls(e,(l,d)=>{const p=Yi(d);Vv(n.onDisconnect_,Oi(t,l),p)}),df(0,i,r,s)})}(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}}class Qo{constructor(t,e,i,r){this._repo=t,this._path=e,this._queryParams=i,this._orderByCalled=r}get key(){return hn(this._path)?null:DO(this._path)}get ref(){return new ul(this._repo,this._path)}get _queryIdentifier(){const t=_V(this._queryParams),e=mO(t);return"{}"===e?"default":e}get _queryObject(){return _V(this._queryParams)}isEqual(t){if(!((t=(0,L.m9)(t))instanceof Qo))return!1;const e=this._repo===t._repo,i=xO(this._path,t._path);return e&&i&&this._queryIdentifier===t._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function hq(n){let t="";for(let e=n.pieceNum_;e<n.pieces_.length;e++)""!==n.pieces_[e]&&(t+="/"+encodeURIComponent(String(n.pieces_[e])));return t||"/"}(this._path)}}function AM(n,t){if(!0===n._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function hf(n){let t=null,e=null;if(n.hasStart()&&(t=n.getIndexStartValue()),n.hasEnd()&&(e=n.getIndexEndValue()),n.getIndex()===Qc){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==dd)throw new Error(i);if("string"!=typeof t)throw new Error(r)}if(n.hasEnd()){if(n.getIndexEndName()!==Kc)throw new Error(i);if("string"!=typeof e)throw new Error(r)}}else if(n.getIndex()===vi){if(null!=t&&!_C(t)||null!=e&&!_C(e))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,L.hu)(n.getIndex()instanceof AO||n.getIndex()===kO,"unknown index type."),null!=t&&"object"==typeof t||null!=e&&"object"==typeof e)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function kM(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class ul extends Qo{constructor(t,e){super(t,e,new oM,!1)}get parent(){const t=tV(this._path);return null===t?null:new ul(this._repo,t)}get root(){let t=this;for(;null!==t.parent;)t=t.parent;return t}}class Lm{constructor(t,e,i){this._node=t,this.ref=e,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const e=new $n(t),i=Bm(this.ref,t);return new Lm(this._node.getChild(e),i,vi)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(i,r)=>t(new Lm(r,Bm(this.ref,i),vi)))}hasChild(t){const e=new $n(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function g2(n,t){return(n=(0,L.m9)(n))._checkNotDeleted("ref"),void 0!==t?Bm(n._root,t):n._root}function _2(n,t){(n=(0,L.m9)(n))._checkNotDeleted("refFromURL");const e=_P(t,n._repo.repoInfo_.nodeAdmin);JV("refFromURL",e);const i=e.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&i.host!==n._repo.repoInfo_.host&&Zc("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+n._repo.repoInfo_.host+")"),g2(n,e.path.toString())}function Bm(n,t){return null===dn((n=(0,L.m9)(n))._path)?(e=t,e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),bC("child","path",e,!1)):bC("child","path",t,!1),new ul(n._repo,Oi(n._path,t));var e}function vP(n,t){n=(0,L.m9)(n),ll("set",n._path),Xc("set",t,n._path,!1);const e=new L.BH;return hP(n._repo,n._path,t,null,e.wrapCallback(()=>{})),e.promise}function A4(n,t){XV("update",t,n._path,!1);const e=new L.BH;return function f4(n,t,e,i){Fm(n,"update",{path:t.toString(),value:e});let r=!0;const s=wC(n),l={};if(ls(e,(d,p)=>{r=!1,l[d]=YV(Oi(t,d),Yi(p),n.serverSyncTree_,s)}),r)as("update() called with empty data.  Don't do anything."),df(0,i,"ok",void 0);else{const d=MM(n),p=function L5(n,t,e,i){!function Jq(n,t,e,i){(0,L.hu)(i>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:t,children:e,writeId:i,visible:!0}),n.visibleWrites=jO(n.visibleWrites,t,e),n.lastWriteId=i}(n.pendingWriteTree_,t,e,i);const r=yi.fromObject(e);return jv(n,new Uv({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,r))}(n.serverSyncTree_,t,l,d);SM(n.eventQueue_,p),n.server_.merge(t.toString(),e,(_,b)=>{const D="ok"===_;D||Vs("update at "+t+" failed: "+_);const I=uf(n.serverSyncTree_,d,!D),P=I.length>0?Gv(n,t):t;cl(n.eventQueue_,P,I),df(0,i,_,b)}),ls(e,_=>{const b=mP(n,Oi(t,_));Gv(n,b)}),cl(n.eventQueue_,t,[])}}(n._repo,n._path,t,e.wrapCallback(()=>{})),e.promise}class RM{constructor(t){this.callbackContext=t}respondsTo(t){return"value"===t}createEvent(t,e){const i=e._queryParams.getIndex();return new h2("value",this,new Lm(t.snapshotNode,new ul(e._repo,e._path),i))}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new f2(this,t,e):null}matches(t){return t instanceof RM&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class OM{constructor(t,e){this.eventType=t,this.callbackContext=e}respondsTo(t){let e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,this.eventType===e}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new f2(this,t,e):null}createEvent(t,e){(0,L.hu)(null!=t.childName,"Child events should have a childName.");const i=Bm(new ul(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new h2(t.type,this,new Lm(t.snapshotNode,i,r),t.prevName)}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof OM&&this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function CC(n,t,e,i,r){let s;if("object"==typeof i&&(s=void 0,r=i),"function"==typeof i&&(s=i),r&&r.onlyOnce){const p=e,_=(b,D)=>{fP(n._repo,n,d),p(b,D)};_.userCallback=e.userCallback,_.context=e.context,e=_}const l=new p2(e,s||void 0),d="value"===t?new RM(l):new OM(t,l);return function v4(n,t,e){let i;i=".info"===dn(t._path)?GV(n.infoSyncTree_,t,e):GV(n.serverSyncTree_,t,e),e2(n.eventQueue_,t._path,i)}(n._repo,n,d),()=>fP(n._repo,n,d)}function yP(n,t,e,i){return CC(n,"value",t,e,i)}function v2(n,t,e,i){return CC(n,"child_added",t,e,i)}function y2(n,t,e,i){return CC(n,"child_changed",t,e,i)}function b2(n,t,e,i){return CC(n,"child_moved",t,e,i)}function w2(n,t,e,i){return CC(n,"child_removed",t,e,i)}function C2(n,t,e){let i=null;const r=e?new p2(e):null;"value"===t?i=new RM(r):t&&(i=new OM(t,r)),fP(n._repo,n,i)}class ic{}class E2 extends ic{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Xc("endAt",this._value,t._path,!0);const e=NO(t._queryParams,this._value,this._key);if(kM(e),hf(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Qo(t._repo,t._path,e,t._orderByCalled)}}class O4 extends ic{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Xc("endBefore",this._value,t._path,!1);const e=function Uq(n,t,e){let i,r;return n.index_===Qc?("string"==typeof t&&(t=pV(t)),r=NO(n,t,e)):(i=null==e?dd:pV(e),r=NO(n,t,i)),r.endBeforeSet_=!0,r}(t._queryParams,this._value,this._key);if(kM(e),hf(e),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Qo(t._repo,t._path,e,t._orderByCalled)}}class D2 extends ic{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Xc("startAt",this._value,t._path,!0);const e=PO(t._queryParams,this._value,this._key);if(kM(e),hf(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Qo(t._repo,t._path,e,t._orderByCalled)}}class F4 extends ic{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Xc("startAfter",this._value,t._path,!1);const e=function Vq(n,t,e){let i;if(n.index_===Qc)"string"==typeof t&&(t=fV(t)),i=PO(n,t,e);else{let r;r=null==e?Kc:fV(e),i=PO(n,t,r)}return i.startAfterSet_=!0,i}(t._queryParams,this._value,this._key);if(kM(e),hf(e),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Qo(t._repo,t._path,e,t._orderByCalled)}}class B4 extends ic{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Qo(t._repo,t._path,function Lq(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="l",e}(t._queryParams,this._limit),t._orderByCalled)}}class U4 extends ic{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Qo(t._repo,t._path,function Bq(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="r",e}(t._queryParams,this._limit),t._orderByCalled)}}class j4 extends ic{constructor(t){super(),this._path=t}_apply(t){AM(t,"orderByChild");const e=new $n(this._path);if(hn(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const i=new AO(e),r=aM(t._queryParams,i);return hf(r),new Qo(t._repo,t._path,r,!0)}}class z4 extends ic{_apply(t){AM(t,"orderByKey");const e=aM(t._queryParams,Qc);return hf(e),new Qo(t._repo,t._path,e,!0)}}class q4 extends ic{_apply(t){AM(t,"orderByPriority");const e=aM(t._queryParams,vi);return hf(e),new Qo(t._repo,t._path,e,!0)}}class Y4 extends ic{_apply(t){AM(t,"orderByValue");const e=aM(t._queryParams,kO);return hf(e),new Qo(t._repo,t._path,e,!0)}}class K4 extends ic{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){if(Xc("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new E2(this._value,this._key)._apply(new D2(this._value,this._key)._apply(t))}}function rc(n,...t){let e=(0,L.m9)(n);for(const i of t)e=i._apply(e);return e}(function I5(n){(0,L.hu)(!_M,"__referenceConstructor has already been defined"),_M=n})(ul),function P5(n){(0,L.hu)(!yM,"__referenceConstructor has already been defined"),yM=n}(ul);const bP={};function S2(n,t,e,i,r){let s=i||n.options.databaseURL;void 0===s&&(n.options.projectId||Zc("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),as("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let p,_,l=_P(s,r),d=l.repoInfo;"undefined"!=typeof process&&process.env&&(_=process.env.FIREBASE_DATABASE_EMULATOR_HOST),_?(p=!0,s=`http://${_}?ns=${d.namespace}`,l=_P(s,r),d=l.repoInfo):p=!l.repoInfo.secure;const b=r&&p?new tC(tC.OWNER):new H6(n.name,n.options,t);JV("Invalid Firebase Database URL",l),hn(l.path)||Zc("Database URL must point to the root of a Firebase Database (not including a child path).");const D=function tW(n,t,e,i){let r=bP[t.name];r||(r={},bP[t.name]=r);let s=r[n.toURLString()];return s&&Zc("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new c4(n,false,e,i),r[n.toURLString()]=s,s}(d,n,b,new U6(n.name,e));return new iW(D,n)}class iW{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function u4(n,t,e){if(n.stats_=wO(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new lM(n.repoInfo_,(i,r,s,l)=>{s2(n,i,r,s,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>o2(n,!0),0);else{if(null!=e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,L.Pz)(e)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new km(n.repoInfo_,t,(i,r,s,l)=>{s2(n,i,r,s,l)},i=>{o2(n,i)},i=>{!function d4(n,t){ls(t,(e,i)=>{dP(n,e,i)})}(n,i)},n.authTokenProvider_,n.appCheckProvider_,e),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=function z6(n,t){const e=n.toString();return bO[e]||(bO[e]=t()),bO[e]}(n.repoInfo_,()=>new qq(n.stats_,n.server_)),n.infoData_=new Hq,n.infoSyncTree_=new UV({startListening:(i,r,s,l)=>{let d=[];const p=n.infoData_.getNode(i._path);return p.isEmpty()||(d=fC(n.infoSyncTree_,i._path,p),setTimeout(()=>{l("ok")},0)),d},stopListening:()=>{}}),dP(n,"connected",!1),n.serverSyncTree_=new UV({startListening:(i,r,s,l)=>(n.server_.listen(i,s,r,(d,p)=>{const _=l(d,p);cl(n.eventQueue_,i._path,_)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ul(this._repo,Ln())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function eW(n,t){const e=bP[t];(!e||e[n.key]!==n)&&Zc(`Database ${t}(${n.repoInfo_}) has already been deleted.`),l2(n),delete e[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){null===this._rootInternal&&Zc("Cannot call "+t+" on a deleted database.")}}function M2(){GB.IS_TRANSPORT_INITIALIZED&&Vs("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function rW(){M2(),nf.forceDisallow()}function sW(){M2(),Pv.forceDisallow(),nf.forceAllow()}function cW(n,t){EB(n,t)}const dW={".sv":"timestamp"};class pW{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}km.prototype.simpleListen=function(n,t){this.sendRequest("q",{p:n},t)},km.prototype.echo=function(n,t){this.sendRequest("echo",{d:n},t)},function uW(n){vB(ki.SDK_VERSION),(0,ki._registerComponent)(new co.wA("database",(t,{instanceIdentifier:e})=>S2(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),t.getProvider("app-check-internal"),e),"PUBLIC").setMultipleInstances(!0)),(0,ki.registerVersion)(gB,"0.13.2",n),(0,ki.registerVersion)(gB,"0.13.2","esm2017")}();const vW=new jo.Yd("@firebase/database-compat"),T2=function(n){vW.warn("FIREBASE WARNING: "+n)};class wW{constructor(t){this._delegate=t}cancel(t){(0,L.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,L.Wj)("OnDisconnect.cancel","onComplete",t,!0);const e=this._delegate.cancel();return t&&e.then(()=>t(null),i=>t(i)),e}remove(t){(0,L.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,L.Wj)("OnDisconnect.remove","onComplete",t,!0);const e=this._delegate.remove();return t&&e.then(()=>t(null),i=>t(i)),e}set(t,e){(0,L.Dv)("OnDisconnect.set",1,2,arguments.length),(0,L.Wj)("OnDisconnect.set","onComplete",e,!0);const i=this._delegate.set(t);return e&&i.then(()=>e(null),r=>e(r)),i}setWithPriority(t,e,i){(0,L.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,L.Wj)("OnDisconnect.setWithPriority","onComplete",i,!0);const r=this._delegate.setWithPriority(t,e);return i&&r.then(()=>i(null),s=>i(s)),r}update(t,e){if((0,L.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){const r={};for(let s=0;s<t.length;++s)r[""+s]=t[s];t=r,T2("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,L.Wj)("OnDisconnect.update","onComplete",e,!0);const i=this._delegate.update(t);return e&&i.then(()=>e(null),r=>e(r)),i}}class CW{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return(0,L.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class ff{constructor(t,e){this._database=t,this._delegate=e}val(){return(0,L.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,L.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,L.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,L.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(t){return(0,L.Dv)("DataSnapshot.child",0,1,arguments.length),t=String(t),bC("DataSnapshot.child","path",t,!1),new ff(this._database,this._delegate.child(t))}hasChild(t){return(0,L.Dv)("DataSnapshot.hasChild",1,1,arguments.length),bC("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)}getPriority(){return(0,L.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(t){return(0,L.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,L.Wj)("DataSnapshot.forEach","action",t,!1),this._delegate.forEach(e=>t(new ff(this._database,e)))}hasChildren(){return(0,L.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,L.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,L.Dv)("DataSnapshot.ref",0,0,arguments.length),new wa(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Cs{constructor(t,e){this.database=t,this._delegate=e}on(t,e,i,r){var s;(0,L.Dv)("Query.on",2,4,arguments.length),(0,L.Wj)("Query.on","callback",e,!1);const l=Cs.getCancelAndContextArgs_("Query.on",i,r),d=(_,b)=>{e.call(l.context,new ff(this.database,_),b)};d.userCallback=e,d.context=l.context;const p=null===(s=l.cancel)||void 0===s?void 0:s.bind(l.context);switch(t){case"value":return yP(this._delegate,d,p),e;case"child_added":return v2(this._delegate,d,p),e;case"child_removed":return w2(this._delegate,d,p),e;case"child_changed":return y2(this._delegate,d,p),e;case"child_moved":return b2(this._delegate,d,p),e;default:throw new Error((0,L.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(t,e,i){if((0,L.Dv)("Query.off",0,3,arguments.length),function(n,t,e){if(void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,L.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,t),(0,L.Wj)("Query.off","callback",e,!0),(0,L.lb)("Query.off","context",i,!0),e){const r=()=>{};r.userCallback=e,r.context=i,C2(this._delegate,t,r)}else C2(this._delegate,t)}get(){return function k4(n){return h4((n=(0,L.m9)(n))._repo,n).then(t=>new Lm(t,new ul(n._repo,n._path),n._queryParams.getIndex()))}(this._delegate).then(t=>new ff(this.database,t))}once(t,e,i,r){(0,L.Dv)("Query.once",1,4,arguments.length),(0,L.Wj)("Query.once","callback",e,!0);const s=Cs.getCancelAndContextArgs_("Query.once",i,r),l=new L.BH,d=(_,b)=>{const D=new ff(this.database,_);e&&e.call(s.context,D,b),l.resolve(D)};d.userCallback=e,d.context=s.context;const p=_=>{s.cancel&&s.cancel.call(s.context,_),l.reject(_)};switch(t){case"value":yP(this._delegate,d,p,{onlyOnce:!0});break;case"child_added":v2(this._delegate,d,p,{onlyOnce:!0});break;case"child_removed":w2(this._delegate,d,p,{onlyOnce:!0});break;case"child_changed":y2(this._delegate,d,p,{onlyOnce:!0});break;case"child_moved":b2(this._delegate,d,p,{onlyOnce:!0});break;default:throw new Error((0,L.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(t){return(0,L.Dv)("Query.limitToFirst",1,1,arguments.length),new Cs(this.database,rc(this._delegate,function V4(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new B4(n)}(t)))}limitToLast(t){return(0,L.Dv)("Query.limitToLast",1,1,arguments.length),new Cs(this.database,rc(this._delegate,function H4(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new U4(n)}(t)))}orderByChild(t){return(0,L.Dv)("Query.orderByChild",1,1,arguments.length),new Cs(this.database,rc(this._delegate,function G4(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return bC("orderByChild","path",n,!1),new j4(n)}(t)))}orderByKey(){return(0,L.Dv)("Query.orderByKey",0,0,arguments.length),new Cs(this.database,rc(this._delegate,function $4(){return new z4}()))}orderByPriority(){return(0,L.Dv)("Query.orderByPriority",0,0,arguments.length),new Cs(this.database,rc(this._delegate,function W4(){return new q4}()))}orderByValue(){return(0,L.Dv)("Query.orderByValue",0,0,arguments.length),new Cs(this.database,rc(this._delegate,function Z4(){return new Y4}()))}startAt(t=null,e){return(0,L.Dv)("Query.startAt",0,2,arguments.length),new Cs(this.database,rc(this._delegate,function N4(n=null,t){return yC("startAt","key",t,!0),new D2(n,t)}(t,e)))}startAfter(t=null,e){return(0,L.Dv)("Query.startAfter",0,2,arguments.length),new Cs(this.database,rc(this._delegate,function L4(n,t){return yC("startAfter","key",t,!0),new F4(n,t)}(t,e)))}endAt(t=null,e){return(0,L.Dv)("Query.endAt",0,2,arguments.length),new Cs(this.database,rc(this._delegate,function R4(n,t){return yC("endAt","key",t,!0),new E2(n,t)}(t,e)))}endBefore(t=null,e){return(0,L.Dv)("Query.endBefore",0,2,arguments.length),new Cs(this.database,rc(this._delegate,function P4(n,t){return yC("endBefore","key",t,!0),new O4(n,t)}(t,e)))}equalTo(t,e){return(0,L.Dv)("Query.equalTo",1,2,arguments.length),new Cs(this.database,rc(this._delegate,function Q4(n,t){return yC("equalTo","key",t,!0),new K4(n,t)}(t,e)))}toString(){return(0,L.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,L.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(t){if((0,L.Dv)("Query.isEqual",1,1,arguments.length),!(t instanceof Cs))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(t._delegate)}static getCancelAndContextArgs_(t,e,i){const r={cancel:void 0,context:void 0};if(e&&i)r.cancel=e,(0,L.Wj)(t,"cancel",r.cancel,!0),r.context=i,(0,L.lb)(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error((0,L.gK)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r}get ref(){return new wa(this.database,new ul(this._delegate._repo,this._delegate._path))}}class wa extends Cs{constructor(t,e){super(t,new Qo(e._repo,e._path,new oM,!1)),this.database=t,this._delegate=e}getKey(){return(0,L.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(t){return(0,L.Dv)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new wa(this.database,Bm(this._delegate,t))}getParent(){(0,L.Dv)("Reference.parent",0,0,arguments.length);const t=this._delegate.parent;return t?new wa(this.database,t):null}getRoot(){return(0,L.Dv)("Reference.root",0,0,arguments.length),new wa(this.database,this._delegate.root)}set(t,e){(0,L.Dv)("Reference.set",1,2,arguments.length),(0,L.Wj)("Reference.set","onComplete",e,!0);const i=vP(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}update(t,e){if((0,L.Dv)("Reference.update",1,2,arguments.length),Array.isArray(t)){const r={};for(let s=0;s<t.length;++s)r[""+s]=t[s];t=r,T2("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ll("Reference.update",this._delegate._path),(0,L.Wj)("Reference.update","onComplete",e,!0);const i=A4(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}setWithPriority(t,e,i){(0,L.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,L.Wj)("Reference.setWithPriority","onComplete",i,!0);const r=function I4(n,t,e){if(ll("setWithPriority",n._path),Xc("setWithPriority",t,n._path,!1),uP("setWithPriority",e,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const i=new L.BH;return hP(n._repo,n._path,t,e,i.wrapCallback(()=>{})),i.promise}(this._delegate,t,e);return i&&r.then(()=>i(null),s=>i(s)),r}remove(t){(0,L.Dv)("Reference.remove",0,1,arguments.length),(0,L.Wj)("Reference.remove","onComplete",t,!0);const e=function M4(n){return ll("remove",n._path),vP(n,null)}(this._delegate);return t&&e.then(()=>t(null),i=>t(i)),e}transaction(t,e,i){(0,L.Dv)("Reference.transaction",1,3,arguments.length),(0,L.Wj)("Reference.transaction","transactionUpdate",t,!1),(0,L.Wj)("Reference.transaction","onComplete",e,!0),function(n,t,e,i){if(void 0!==e&&"boolean"!=typeof e)throw new Error((0,L.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,i);const r=function mW(n,t,e){var i;if(n=(0,L.m9)(n),ll("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const r=null===(i=null==e?void 0:e.applyLocally)||void 0===i||i,s=new L.BH,d=yP(n,()=>{});return function b4(n,t,e,i,r,s){Fm(n,"transaction on "+t);const l={path:t,update:e,onComplete:i,status:null,order:bB(),applyLocally:s,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},d=pP(n,t,void 0);l.currentInputSnapshot=d;const p=l.update(d.val());if(void 0===p)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{vC("transaction failed: Data returned ",p,l.path),l.status=0;const _=EM(n.transactionQueueTree_,t),b=Nm(_)||[];let D;b.push(l),aP(_,b),"object"==typeof p&&null!==p&&(0,L.r3)(p,".priority")?(D=(0,L.DV)(p,".priority"),(0,L.hu)(_C(D),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):D=(wM(n.serverSyncTree_,t)||tn.EMPTY_NODE).getPriority().val();const I=wC(n),P=Yi(p,D),U=rP(P,d,I);l.currentOutputSnapshotRaw=P,l.currentOutputSnapshotResolved=U,l.currentWriteId=MM(n);const Q=XO(n.serverSyncTree_,t,U,l.currentWriteId,l.applyLocally);cl(n.eventQueue_,t,Q),TM(n,n.transactionQueueTree_)}}(n._repo,n._path,t,(p,_,b)=>{let D=null;p?s.reject(p):(D=new Lm(b,new ul(n._repo,n._path),vi),s.resolve(new pW(_,D)))},d,r),s.promise}(this._delegate,t,{applyLocally:i}).then(s=>new CW(s.committed,new ff(this.database,s.snapshot)));return e&&r.then(s=>e(null,s.committed,s.snapshot),s=>e(s,!1,null)),r}setPriority(t,e){(0,L.Dv)("Reference.setPriority",1,2,arguments.length),(0,L.Wj)("Reference.setPriority","onComplete",e,!0);const i=function T4(n,t){n=(0,L.m9)(n),ll("setPriority",n._path),uP("setPriority",t,!1);const e=new L.BH;return hP(n._repo,Oi(n._path,".priority"),t,null,e.wrapCallback(()=>{})),e.promise}(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}push(t,e){(0,L.Dv)("Reference.push",0,2,arguments.length),(0,L.Wj)("Reference.push","onComplete",e,!0);const i=function S4(n,t){n=(0,L.m9)(n),ll("push",n._path),Xc("push",t,n._path,!0);const e=r2(n._repo),i=Oq(e),r=Bm(n,i),s=Bm(n,i);let l;return l=null!=t?vP(s,t).then(()=>s):Promise.resolve(s),r.then=l.then.bind(l),r.catch=l.then.bind(l,void 0),r}(this._delegate,t),r=i.then(l=>new wa(this.database,l));e&&r.then(()=>e(null),l=>e(l));const s=new wa(this.database,i);return s.then=r.then.bind(r),s.catch=r.catch.bind(r,void 0),s}onDisconnect(){return ll("Reference.onDisconnect",this._delegate._path),new wW(new m2(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class EC{constructor(t,e){this._delegate=t,this.app=e,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:rW,forceLongPolling:sW}}useEmulator(t,e,i={}){!function oW(n,t,e,i={}){(n=(0,L.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Zc("Cannot call useEmulator() after instance has already been initialized.");const r=n._repoInternal;let s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&Zc('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new tC(tC.OWNER);else if(i.mockUserToken){const l="string"==typeof i.mockUserToken?i.mockUserToken:(0,L.Sg)(i.mockUserToken,n.app.options.projectId);s=new tC(l)}!function J4(n,t,e,i){n.repoInfo_=new vO(`${t}:${e}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),i&&(n.authTokenProvider_=i)}(r,t,e,s)}(this._delegate,t,e,i)}ref(t){if((0,L.Dv)("database.ref",0,1,arguments.length),t instanceof wa){const e=_2(this._delegate,t.toString());return new wa(this,e)}{const e=g2(this._delegate,t);return new wa(this,e)}}refFromURL(t){(0,L.Dv)("database.refFromURL",1,1,arguments.length);const i=_2(this._delegate,t);return new wa(this,i)}goOffline(){return(0,L.Dv)("database.goOffline",0,0,arguments.length),function aW(n){(n=(0,L.m9)(n))._checkNotDeleted("goOffline"),l2(n._repo)}(this._delegate)}goOnline(){return(0,L.Dv)("database.goOnline",0,0,arguments.length),function lW(n){(n=(0,L.m9)(n))._checkNotDeleted("goOnline"),function y4(n){n.persistentConnection_&&n.persistentConnection_.resume(n2)}(n._repo)}(this._delegate)}}EC.ServerValue={TIMESTAMP:function hW(){return dW}(),increment:n=>function fW(n){return{".sv":{increment:n}}}(n)};var DW=Object.freeze({__proto__:null,initStandalone:function EW({app:n,url:t,version:e,customAuthImpl:i,namespace:r,nodeAdmin:s=!1}){vB(e);const l=new co.zt("auth-internal",new co.H0("database-standalone"));return l.setComponent(new co.wA("auth-internal",()=>i,"PRIVATE")),{instance:new EC(S2(n,l,void 0,t,s),n),namespace:r}}});const xW=EC.ServerValue;function I2(n){return null==n}function A2(n){return"function"==typeof n.set}function k2(n,t){return A2(t)?t:n.ref(t)}function R2(n,t){if(function MW(n){return"string"==typeof n}(n))return t.stringCase();if(A2(n))return t.firebaseCase();if(function TW(n){return"function"==typeof n.exportVal}(n))return t.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function DC(n,t,e="on",i=gs.z){return new Ui.y(r=>{let s=null;return s=n[e](t,(l,d)=>{i.schedule(()=>{r.next({snapshot:l,prevKey:d})}),"once"===e&&i.schedule(()=>r.complete())},l=>{i.schedule(()=>r.error(l))}),"on"===e?{unsubscribe(){null!=s&&n.off(t,s)}}:{unsubscribe(){}}}).pipe((0,ct.U)(r=>{const{snapshot:s,prevKey:l}=r;let d=null;return s.exists()&&(d=s.key),{type:t,payload:s,prevKey:l,key:d}}),(0,lp.B)())}function O2(n,t){const e=n.length;for(let i=0;i<e;i++)if(n[i].payload.key===t)return i;return-1}function kW(n,t){const{payload:e,prevKey:i,key:r}=t,s=O2(n,r),l=function AW(n,t){if(I2(t))return 0;{const e=O2(n,t);return-1===e?n.length:e+1}}(n,i);switch(t.type){case"value":if(t.payload&&t.payload.exists()){let d=null;t.payload.forEach(p=>{const _={payload:p,type:"value",prevKey:d,key:p.key};return d=p.key,n=[...n,_],!1})}return n;case"child_added":if(s>-1){const d=n[s-1];(d&&d.key||null)!==i&&(n=n.filter(p=>p.payload.key!==e.key)).splice(l,0,t)}else{if(null==i)return[t,...n];(n=n.slice()).splice(l,0,t)}return n;case"child_removed":return n.filter(d=>d.payload.key!==e.key);case"child_changed":return n.map(d=>d.payload.key===r?t:d);case"child_moved":if(s>-1){const d=n.splice(s,1)[0];return(n=n.slice()).splice(l,0,d),n}return n;default:return n}}function P2(n){return(I2(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function N2(n,t,e){return function IW(n,t,e){return DC(n,"value","once",e).pipe(Wn(i=>{const r=[at(i)];return t.forEach(s=>r.push(DC(n,s,"on",e))),(0,Xs.T)(...r).pipe(Fo(kW,[]))}),v_())}(n,t=P2(t),e)}function F2(n,t,e){const i=(t=P2(t)).map(r=>DC(n,r,"on",e));return(0,Xs.T)(...i)}function L2(n,t){return function(i,r){return R2(i,{stringCase:()=>n.child(i)[t](r),firebaseCase:()=>i[t](r),snapshotCase:()=>i.ref[t](r)})}}function NW(n){return function(e){return e?R2(e,{stringCase:()=>n.child(e).remove(),firebaseCase:()=>e.remove(),snapshotCase:()=>e.ref.remove()}):n.remove()}}function B2(n,t){return function(){return DC(n,"value","on",t)}}!function SW(n){n.INTERNAL.registerComponent(new co.wA("database-compat",(t,{instanceIdentifier:e})=>{const i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("database").getImmediate({identifier:e});return new EC(r,i)},"PUBLIC").setServiceProps({Reference:wa,Query:Cs,Database:EC,DataSnapshot:ff,enableLogging:cW,INTERNAL:DW,ServerValue:xW}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.2")}(Jg.Z);const BW=new c.OlP("angularfire2.realtimeDatabaseURL"),VW=new c.OlP("angularfire2.database.use-emulator");let UW=(()=>{class n{constructor(e,i,r,s,l,d,p,_,b,D,I,P,U,Q,le){this.schedulers=d;const Ye=p,et=(0,Ai.on)(e,l,i);_&&Lb(et,l,b,I,P,U,D,Q),this.database=(0,Ai.cc)(`${et.name}.database.${r}`,"AngularFireDatabase",et.name,()=>{const rt=l.runOutsideAngular(()=>et.database(r||void 0));return Ye&&rt.useEmulator(...Ye),rt},[Ye])}list(e,i){const r=this.schedulers.ngZone.runOutsideAngular(()=>k2(this.database,e));let s=r;return i&&(s=i(r)),function FW(n,t){const e=t.schedulers.outsideAngular,i=t.schedulers.ngZone.run(()=>n.ref);return{query:n,update:L2(i,"update"),set:L2(i,"set"),push:r=>i.push(r),remove:NW(i),snapshotChanges:r=>N2(n,r,e).pipe(kn.iC),stateChanges:r=>F2(n,r,e).pipe(kn.iC),auditTrail:r=>function RW(n,t,e){return function PW(n,t,e){return function OW(n,t){return DC(n,"value","on",t).pipe((0,ct.U)(e=>{let i;return e.payload.forEach(r=>(i=r.key,!1)),{data:e,lastKeyToLoad:i}}))}(n,e).pipe(function T6(...n){const t=(0,Ps.jO)(n);return(0,Qn.e)((e,i)=>{const r=n.length,s=new Array(r);let l=n.map(()=>!1),d=!1;for(let p=0;p<r;p++)(0,Ba.Xf)(n[p]).subscribe((0,Un.x)(i,_=>{s[p]=_,!d&&!l[p]&&(l[p]=!0,(d=l.every(to.y))&&(l=null))},Ua.Z));e.subscribe((0,Un.x)(i,p=>{if(d){const _=[p,...s];i.next(t?t(..._):_)}}))})}(t),(0,ct.U)(([r,s])=>{const l=r.lastKeyToLoad,d=s.map(p=>p.key);return{actions:s,lastKeyToLoad:l,loadedKeys:d}}),function I6(n){return(0,Qn.e)((t,e)=>{let i=!1,r=0;t.subscribe((0,Un.x)(e,s=>(i||(i=!n(s,r++)))&&e.next(s)))})}(r=>-1===r.loadedKeys.indexOf(r.lastKeyToLoad)),(0,ct.U)(r=>r.actions))}(n,F2(n,t).pipe(Fo((r,s)=>[...r,s],[])),e)}(n,r,e).pipe(kn.iC),valueChanges:(r,s)=>N2(n,r,e).pipe((0,ct.U)(d=>d.map(p=>s&&s.idField?Object.assign(Object.assign({},p.payload.val()),{[s.idField]:p.key}):p.payload.val())),kn.iC)}}(s,this)}object(e){return function LW(n,t){return{query:n,snapshotChanges:()=>B2(n,t.schedulers.outsideAngular)().pipe(kn.iC),update:e=>n.ref.update(e),set:e=>n.ref.set(e),remove:()=>n.ref.remove(),valueChanges:()=>B2(n,t.schedulers.outsideAngular)().pipe(kn.iC,(0,ct.U)(i=>i.payload.exists()?i.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>k2(this.database,e)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(Ai.Dh),c.LFG(Ai.xv,8),c.LFG(BW,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(kn.HU),c.LFG(VW,8),c.LFG(bp,8),c.LFG(ho,8),c.LFG(yp,8),c.LFG(Zg,8),c.LFG(Kg,8),c.LFG(Qg,8),c.LFG(Xg,8),c.LFG(ku,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),HW=(()=>{class n{constructor(){Yg.Z.registerVersion("angularfire",kn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[UW]}),n})();const wP_firebase={apiKey:"AIzaSyAZ5j_ogIZ7ehj3DtbFBaSSw329QS1YGys",authDomain:"merchants-beers.firebaseapp.com",databaseURL:"https://merchants-beers-default-rtdb.firebaseio.com",projectId:"merchants-beers",storageBucket:"merchants-beers.appspot.com",messagingSenderId:"716223467721",appId:"1:716223467721:web:4e42974925aa2ba4b27d18",measurementId:"G-KBBTRDX6MN"};var jW=F(3673);let xC=(()=>{class n{constructor(e,i,r,s,l){this.afs=e,this.afAuth=i,this.router=r,this.ngZone=s,this.firestore=l,this.afAuth.authState.subscribe(d=>{console.log("oo"+d),d?(this.userData=d,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(e,i){return this.afAuth.signInWithEmailAndPassword(e,i).then(r=>{this.ngZone.run(()=>{this.router.navigate(["dashboard"])}),this.SetUserData(r.user)}).catch(r=>{window.alert(r.message)})}SignUp(e,i,r){return this.afAuth.createUserWithEmailAndPassword(e,i).then(s=>{s.user.updateProfile({displayName:r}).then(l=>{this.SetUserData(s.user).then(d=>{this.addFirstCard(s.user.uid)})}).catch(l=>{alert("Error registering: --- "+l)})}).catch(s=>{window.alert(s.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(e=>e.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email-address"])})}ForgotPassword(e){return this.afAuth.sendPasswordResetEmail(e).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(i=>{window.alert(i)})}get isLoggedIn(){const e=JSON.parse(localStorage.getItem("user"));return null!==e&&!1!==e.emailVerified}GoogleAuth(){return this.AuthLogin(new jW.Q).then(e=>{e&&this.router.navigate(["dashboard"])})}AuthLogin(e){return this.afAuth.signInWithPopup(e).then(i=>{this.ngZone.run(()=>{this.router.navigate(["dashboard"])}),this.SetUserData(i.user)}).catch(i=>{window.alert(i)})}SetUserData(e){const i=this.afs.doc(`users/${e.uid}`),r={uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL,emailVerified:e.emailVerified};return this.currentUser=e,i.set(r,{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["/login"])})}UpdateProfile(e){var i=this;return(0,xe.Z)(function*(){return(yield i.afAuth.currentUser).updateProfile(e)})()}addFirstCard(e){let i={userid:e,availableBeers:0,totalDrank:0,owing:0};return new Promise((r,s)=>{this.firestore.collection("cards").add(i).then(l=>{console.log("Added a case."),console.log(l)},l=>s(l))})}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(ud),c.LFG(bp),c.LFG(lo),c.LFG(c.R0b),c.LFG(ud))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();let U2=(()=>{class n{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(c.Qsj),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n}),n})(),Vm=(()=>{class n extends U2{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=c.n5z(n)))(i||n)}}(),n.\u0275dir=c.lG2({type:n,features:[c.qOj]}),n})();const Es=new c.OlP("NgValueAccessor"),zW={provide:Es,useExisting:(0,c.Gpc)(()=>pf),multi:!0},qW=new c.OlP("CompositionEventMode");let pf=(()=>{class n extends U2{constructor(e,i,r){super(e,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function $W(){const n=N()?N().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(e){this.setProperty("value",null==e?"":e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(c.Qsj),c.Y36(c.SBq),c.Y36(qW,8))},n.\u0275dir=c.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,i){1&e&&c.NdJ("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[c._Bn([zW]),c.qOj]}),n})();function mf(n){return null==n||0===n.length}function j2(n){return null!=n&&"number"==typeof n.length}const $r=new c.OlP("NgValidators"),gf=new c.OlP("NgAsyncValidators"),WW=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class G2{static min(t){return function z2(n){return t=>{if(mf(t.value)||mf(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}(t)}static max(t){return function $2(n){return t=>{if(mf(t.value)||mf(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}(t)}static required(t){return function q2(n){return mf(n.value)?{required:!0}:null}(t)}static requiredTrue(t){return function W2(n){return!0===n.value?null:{required:!0}}(t)}static email(t){return function Y2(n){return mf(n.value)||WW.test(n.value)?null:{email:!0}}(t)}static minLength(t){return function Z2(n){return t=>mf(t.value)||!j2(t.value)?null:t.value.length<n?{minlength:{requiredLength:n,actualLength:t.value.length}}:null}(t)}static maxLength(t){return function K2(n){return t=>j2(t.value)&&t.value.length>n?{maxlength:{requiredLength:n,actualLength:t.value.length}}:null}(t)}static pattern(t){return function Q2(n){if(!n)return PM;let t,e;return"string"==typeof n?(e="","^"!==n.charAt(0)&&(e+="^"),e+=n,"$"!==n.charAt(n.length-1)&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),i=>{if(mf(i.value))return null;const r=i.value;return t.test(r)?null:{pattern:{requiredPattern:e,actualValue:r}}}}(t)}static nullValidator(t){return null}static compose(t){return iU(t)}static composeAsync(t){return rU(t)}}function PM(n){return null}function X2(n){return null!=n}function J2(n){const t=(0,c.QGY)(n)?(0,rn.D)(n):n;return(0,c.CqO)(t),t}function eU(n){let t={};return n.forEach(e=>{t=null!=e?Object.assign(Object.assign({},t),e):t}),0===Object.keys(t).length?null:t}function tU(n,t){return t.map(e=>e(n))}function nU(n){return n.map(t=>function YW(n){return!n.validate}(t)?t:e=>t.validate(e))}function iU(n){if(!n)return null;const t=n.filter(X2);return 0==t.length?null:function(e){return eU(tU(e,t))}}function CP(n){return null!=n?iU(nU(n)):null}function rU(n){if(!n)return null;const t=n.filter(X2);return 0==t.length?null:function(e){return function V2(...n){const t=(0,Ps.jO)(n),{args:e,keys:i}=vu(n),r=new Ui.y(s=>{const{length:l}=e;if(!l)return void s.complete();const d=new Array(l);let p=l,_=l;for(let b=0;b<l;b++){let D=!1;(0,Ba.Xf)(e[b]).subscribe((0,Un.x)(s,I=>{D||(D=!0,_--),d[b]=I},()=>p--,void 0,()=>{(!p||!D)&&(_||s.next(i?lr(i,d):d),s.complete())}))}});return t?r.pipe(Ro(t)):r}(tU(e,t).map(J2)).pipe((0,ct.U)(eU))}}function EP(n){return null!=n?rU(nU(n)):null}function sU(n,t){return null===n?[t]:Array.isArray(n)?[...n,t]:[n,t]}function oU(n){return n._rawValidators}function aU(n){return n._rawAsyncValidators}function DP(n){return n?Array.isArray(n)?n:[n]:[]}function NM(n,t){return Array.isArray(n)?n.includes(t):n===t}function lU(n,t){const e=DP(t);return DP(n).forEach(r=>{NM(e,r)||e.push(r)}),e}function cU(n,t){return DP(t).filter(e=>!NM(n,e))}class uU{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=CP(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=EP(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class fd extends uU{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Eo extends uU{get formDirective(){return null}get path(){return null}}let zv=(()=>{class n extends class dU{constructor(t){this._cd=t}is(t){var e,i,r;return"submitted"===t?!!(null===(e=this._cd)||void 0===e?void 0:e.submitted):!!(null===(r=null===(i=this._cd)||void 0===i?void 0:i.control)||void 0===r?void 0:r[t])}}{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(fd,2))},n.\u0275dir=c.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,i){2&e&&c.ekj("ng-untouched",i.is("untouched"))("ng-touched",i.is("touched"))("ng-pristine",i.is("pristine"))("ng-dirty",i.is("dirty"))("ng-valid",i.is("valid"))("ng-invalid",i.is("invalid"))("ng-pending",i.is("pending"))},features:[c.qOj]}),n})();function SC(n,t){MP(n,t),t.valueAccessor.writeValue(n.value),function r8(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&fU(n,t)})}(n,t),function o8(n,t){const e=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}(n,t),function s8(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&fU(n,t),"submit"!==n.updateOn&&n.markAsTouched()})}(n,t),function n8(n,t){if(t.valueAccessor.setDisabledState){const e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}(n,t)}function BM(n,t,e=!0){const i=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(i),t.valueAccessor.registerOnTouched(i)),UM(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function VM(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function MP(n,t){const e=oU(n);null!==t.validator?n.setValidators(sU(e,t.validator)):"function"==typeof e&&n.setValidators([e]);const i=aU(n);null!==t.asyncValidator?n.setAsyncValidators(sU(i,t.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();VM(t._rawValidators,r),VM(t._rawAsyncValidators,r)}function UM(n,t){let e=!1;if(null!==n){if(null!==t.validator){const r=oU(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(l=>l!==t.validator);s.length!==r.length&&(e=!0,n.setValidators(s))}}if(null!==t.asyncValidator){const r=aU(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(l=>l!==t.asyncValidator);s.length!==r.length&&(e=!0,n.setAsyncValidators(s))}}}const i=()=>{};return VM(t._rawValidators,i),VM(t._rawAsyncValidators,i),e}function fU(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function pU(n,t){MP(n,t)}function gU(n,t){n._syncPendingControls(),t.forEach(e=>{const i=e.control;"submit"===i.updateOn&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function AP(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}const MC="VALID",HM="INVALID",$v="PENDING",TC="DISABLED";function RP(n){return(jM(n)?n.validators:n)||null}function _U(n){return Array.isArray(n)?CP(n):n||null}function OP(n,t){return(jM(t)?t.asyncValidators:n)||null}function vU(n){return Array.isArray(n)?EP(n):n||null}function jM(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const yU=n=>n instanceof EU,PP=n=>n instanceof FP;function bU(n){return yU(n)?n.value:n.getRawValue()}function wU(n,t){const e=PP(n),i=n.controls;if(!(e?Object.keys(i):i).length)throw new c.vHH(1e3,"");if(!i[t])throw new c.vHH(1001,"")}function CU(n,t){PP(n),n._forEachChild((i,r)=>{if(void 0===t[r])throw new c.vHH(1002,"")})}class NP{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=_U(this._rawValidators),this._composedAsyncValidatorFn=vU(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===MC}get invalid(){return this.status===HM}get pending(){return this.status==$v}get disabled(){return this.status===TC}get enabled(){return this.status!==TC}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=_U(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=vU(t)}addValidators(t){this.setValidators(lU(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(lU(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(cU(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(cU(t,this._rawAsyncValidators))}hasValidator(t){return NM(this._rawValidators,t)}hasAsyncValidator(t){return NM(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=$v,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=TC,this.errors=null,this._forEachChild(i=>{i.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=MC,this._forEachChild(i=>{i.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===MC||this.status===$v)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?TC:MC}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=$v,this._hasOwnPendingAsyncValidator=!0;const e=J2(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function u8(n,t,e){if(null==t||(Array.isArray(t)||(t=t.split(e)),Array.isArray(t)&&0===t.length))return null;let i=n;return t.forEach(r=>{i=PP(i)?i.controls.hasOwnProperty(r)?i.controls[r]:null:(n=>n instanceof h8)(i)&&i.at(r)||null}),i}(this,t,".")}getError(t,e){const i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new c.vpe,this.statusChanges=new c.vpe}_calculateStatus(){return this._allControlsDisabled()?TC:this.errors?HM:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus($v)?$v:this._anyControlsHaveStatus(HM)?HM:MC}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){jM(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class EU extends NP{constructor(t=null,e,i){super(RP(e),OP(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),jM(e)&&e.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){AP(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){AP(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class FP extends NP{constructor(t,e,i){super(RP(e),OP(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,i={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){CU(this,t),Object.keys(t).forEach(i=>{wU(this,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(i=>{this.controls[i]&&this.controls[i].patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((i,r)=>{i.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,i)=>(t[i]=bU(e),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,i)=>!!i._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const i=this.controls[e];i&&t(i,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const i=this.controls[e];if(this.contains(e)&&t(i))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,i)=>((e.enabled||this.disabled)&&(t[i]=e.value),t))}_reduceChildren(t,e){let i=t;return this._forEachChild((r,s)=>{i=e(i,r,s)}),i}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class h8 extends NP{constructor(t,e,i){super(RP(e),OP(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[t]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,i={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){CU(this,t),t.forEach((i,r)=>{wU(this,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((i,r)=>{i.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>bU(t))}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_syncPendingControls(){let t=this.controls.reduce((e,i)=>!!i._syncPendingControls()||e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((e,i)=>{t(e,i)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const f8={provide:Eo,useExisting:(0,c.Gpc)(()=>GM)},IC=(()=>Promise.resolve(null))();let GM=(()=>{class n extends Eo{constructor(e,i){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new c.vpe,this.form=new FP({},CP(e),EP(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){IC.then(()=>{const i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),SC(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){IC.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){IC.then(()=>{const i=this._findContainer(e.path),r=new FP({});pU(r,e),i.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){IC.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){IC.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,gU(this.form,this._directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return n.\u0275fac=function(e){return new(e||n)(c.Y36($r,10),c.Y36(gf,10))},n.\u0275dir=c.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,i){1&e&&c.NdJ("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[c._Bn([f8]),c.qOj]}),n})();const m8={provide:fd,useExisting:(0,c.Gpc)(()=>Um)},SU=(()=>Promise.resolve(null))();let Um=(()=>{class n extends fd{constructor(e,i,r,s,l){super(),this._changeDetectorRef=l,this.control=new EU,this._registered=!1,this.update=new c.vpe,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function IP(n,t){if(!t)return null;let e,i,r;return Array.isArray(t),t.forEach(s=>{s.constructor===pf?e=s:function c8(n){return Object.getPrototypeOf(n.constructor)===Vm}(s)?i=s:r=s}),r||i||e||null}(0,s)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),function TP(n,t){if(!n.hasOwnProperty("model"))return!1;const e=n.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){SC(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){SU.then(()=>{var i;this.control.setValue(e,{emitViewToModelChange:!1}),null===(i=this._changeDetectorRef)||void 0===i||i.markForCheck()})}_updateDisabled(e){const i=e.isDisabled.currentValue,r=""===i||i&&"false"!==i;SU.then(()=>{var s;r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),null===(s=this._changeDetectorRef)||void 0===s||s.markForCheck()})}_getPath(e){return this._parent?function LM(n,t){return[...t.path,n]}(e,this._parent):[e]}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(Eo,9),c.Y36($r,10),c.Y36(gf,10),c.Y36(Es,10),c.Y36(c.sBO,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[c._Bn([m8]),c.qOj,c.TTD]}),n})();const _8={provide:Es,useExisting:(0,c.Gpc)(()=>qv),multi:!0};let qv=(()=>{class n extends Vm{writeValue(e){this.setProperty("value",null==e?"":e)}registerOnChange(e){this.onChange=i=>{e(""==i?null:parseFloat(i))}}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=c.n5z(n)))(i||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(e,i){1&e&&c.NdJ("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},features:[c._Bn([_8]),c.qOj]}),n})(),MU=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();const C8={provide:Eo,useExisting:(0,c.Gpc)(()=>zM)};let zM=(()=>{class n extends Eo{constructor(e,i){super(),this.validators=e,this.asyncValidators=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new c.vpe,this._setValidators(e),this._setAsyncValidators(i)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(UM(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const i=this.form.get(e.path);return SC(i,e),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),i}getControl(e){return this.form.get(e.path)}removeControl(e){BM(e.control||null,e,!1),AP(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,i){this.form.get(e.path).setValue(i)}onSubmit(e){return this.submitted=!0,gU(this.form,this.directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const i=e.control,r=this.form.get(e.path);i!==r&&(BM(i||null,e),yU(r)&&(SC(r,e),e.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const i=this.form.get(e.path);pU(i,e),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const i=this.form.get(e.path);i&&function a8(n,t){return UM(n,t)}(i,e)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){MP(this.form,this),this._oldForm&&UM(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(e){return new(e||n)(c.Y36($r,10),c.Y36(gf,10))},n.\u0275dir=c.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(e,i){1&e&&c.NdJ("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[c._Bn([C8]),c.qOj,c.TTD]}),n})(),H8=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[MU]]}),n})(),j8=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[H8]}),n})();const G8=["chalkBeerForm"];function z8(n,t){if(1&n){const e=c.EpF();c.TgZ(0,"div",8),c.NdJ("click",function(){const s=c.CHM(e).$implicit;return c.oxw(2).doCorrectFunction(s.number)}),c._uU(1),c.qZA()}if(2&n){const e=t.$implicit;c.xp6(1),c.hij(" ",e.text," ")}}function $8(n,t){if(1&n&&(c.TgZ(0,"div"),c.YNc(1,z8,2,1,"div",7),c.qZA()),2&n){const e=c.oxw();c.xp6(1),c.Q6J("ngForOf",e.menuItems)}}function q8(n,t){if(1&n&&c._UZ(0,"app-chalk-beer-form",9,10),2&n){const e=c.oxw();c.Q6J("showProps",e.showProps)}}function W8(n,t){if(1&n&&c._UZ(0,"app-pay-form",9,11),2&n){const e=c.oxw();c.Q6J("showProps",e.showProps)}}function Y8(n,t){if(1&n&&c._UZ(0,"app-finance-form",9,12),2&n){const e=c.oxw();c.Q6J("showProps",e.showProps)}}function Z8(n,t){if(1&n&&c._UZ(0,"app-add-case-form",9,13),2&n){const e=c.oxw();c.Q6J("showProps",e.showProps)}}let jP=(()=>{class n{constructor(e,i){this.authService=e,this.firestore=i,this.displayName="",this.menuItems=[],this.owing="$0.00",this.card={userid:this.authService.currentUser.uid,totalDrank:0,availableBeers:0,owing:0},this.showProps={showMainMenu:!0,showChalkBeer:!1,showPayBeer:!1,showFinanceBeer:!1,showAddCase:!1,card:this.card},this.displayName=this.authService.currentUser.displayName,this.menuItems.push({text:"Chalk a Beer",number:1}),this.menuItems.push({text:"Pay for Beers",number:2}),this.menuItems.push({text:"Finance Beers (Broke Bitch)",number:3}),this.menuItems.push({text:"Add a Case",number:4}),this.firestore.collection("cards",r=>r.where("userid","==",this.authService.currentUser.uid)).get().subscribe(r=>{let s=r.docs[0].data();this.card={userid:s.userid,totalDrank:s.totalDrank,availableBeers:s.availableBeers,owing:s.owing,cardid:r.docs[0].id},this.owing=(2.5*this.card.owing).toFixed(2),this.showProps.card=this.card,this.chalkABeerComponent.cdr.detectChanges()})}ngOnInit(){}logout(){this.authService.SignOut()}chalkABeer(){this.card.availableBeers<1?alert("Uh oh - It looks like you are out of paid for beers. Buy some more to chalk a beer there bud."):(this.showProps.showChalkBeer=!0,this.showProps.showMainMenu=!1,this.showProps.showPayBeer=!1,this.showProps.showFinanceBeer=!1,this.showProps.showAddCase=!1)}payForBeer(){this.showProps.showChalkBeer=!1,this.showProps.showMainMenu=!1,this.showProps.showPayBeer=!0,this.showProps.showFinanceBeer=!1,this.showProps.showAddCase=!1}financeBeer(){this.card.availableBeers>0?alert("You can't finance beers when you still have some available to drink."):(this.showProps.showChalkBeer=!1,this.showProps.showMainMenu=!1,this.showProps.showPayBeer=!1,this.showProps.showFinanceBeer=!0,this.showProps.showAddCase=!1)}addCase(){this.showProps.showChalkBeer=!1,this.showProps.showMainMenu=!1,this.showProps.showPayBeer=!1,this.showProps.showFinanceBeer=!1,this.showProps.showAddCase=!0}doCorrectFunction(e){1==e&&this.chalkABeer(),2==e&&this.payForBeer(),3==e&&this.financeBeer(),4==e&&this.addCase()}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(xC),c.Y36(ud))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-dashboard"]],viewQuery:function(e,i){if(1&e&&c.Gf(G8,5),2&e){let r;c.iGM(r=c.CRH())&&(i.chalkABeerComponent=r.first)}},decls:16,vars:9,consts:[[1,"topArea"],[1,"header"],[1,"mainArea"],[4,"ngIf"],[3,"showProps",4,"ngIf"],[1,"footer"],["mat-raised-button","",1,"logoutBtn",3,"click"],["class","menuOption",3,"click",4,"ngFor","ngForOf"],[1,"menuOption",3,"click"],[3,"showProps"],["chalkBeerForm",""],["payForBeer",""],["financeBeer",""],["addCase",""]],template:function(e,i){1&e&&(c.TgZ(0,"div",0)(1,"div",1)(2,"h1"),c._uU(3,"Merchants"),c.qZA()(),c._UZ(4,"br"),c.TgZ(5,"p"),c._uU(6),c.qZA()(),c.TgZ(7,"div",2),c.YNc(8,$8,2,1,"div",3),c.YNc(9,q8,2,1,"app-chalk-beer-form",4),c.YNc(10,W8,2,1,"app-pay-form",4),c.YNc(11,Y8,2,1,"app-finance-form",4),c.YNc(12,Z8,2,1,"app-add-case-form",4),c.qZA(),c.TgZ(13,"div",5)(14,"button",6),c.NdJ("click",function(){return i.logout()}),c._uU(15,"Logout"),c.qZA()()),2&e&&(c.xp6(6),c.HOy("Welcome, ",i.displayName,". You have ",i.card.availableBeers," beers available to drink and owe $",2.5*i.card.owing,". You're lifetime Merchant Beers drank is ",i.card.totalDrank,". GET DRINKING BUD!"),c.xp6(2),c.Q6J("ngIf",i.showProps.showMainMenu),c.xp6(1),c.Q6J("ngIf",i.showProps.showChalkBeer),c.xp6(1),c.Q6J("ngIf",i.showProps.showPayBeer),c.xp6(1),c.Q6J("ngIf",i.showProps.showFinanceBeer),c.xp6(1),c.Q6J("ngIf",i.showProps.showAddCase))},styles:["h1[_ngcontent-%COMP%]{text-align:center;font-family:Brush Script MT;font-size:3em;color:gold;margin-top:0!important;margin-bottom:0!important}p[_ngcontent-%COMP%]{text-align:center;font-family:Arial,Helvetica,sans-serif;margin-top:0!important;margin-bottom:0!important;margin-left:.5em;margin-right:.5em}.topArea[_ngcontent-%COMP%]{display:block;width:100%;height:20vh;overflow-y:auto}.mainArea[_ngcontent-%COMP%]{display:block;width:100%;height:75vh}.header[_ngcontent-%COMP%]{background-color:#006400;background-image:url(https://www.transparenttextures.com/patterns/binding-light.png)}.footer[_ngcontent-%COMP%]{display:block;width:100%;height:5vh}.logoutBtn[_ngcontent-%COMP%]{line-height:4vh;height:4vh;margin-top:.5vh;margin-bottom:.5vh;display:block;margin:auto;background-color:#006400;color:gold}.menuOption[_ngcontent-%COMP%]{width:75%;height:auto;padding-top:1em;padding-bottom:1em;background-color:#006400;color:gold;border-radius:5px;text-align:center;font-size:large;display:block;margin:auto auto 2em}"]}),n})();function _n(n){return null!=n&&"false"!=`${n}`}function Xo(n,t=0){return function K8(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):t}function zU(n){return Array.isArray(n)?n:[n]}function Pr(n){return null==n?"":"string"==typeof n?n:`${n}px`}function pd(n){return n instanceof c.SBq?n.nativeElement:n}let $U=(()=>{class n{create(e){return"undefined"==typeof MutationObserver?null:new MutationObserver(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Q8=(()=>{class n{constructor(e){this._mutationObserverFactory=e,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((e,i)=>this._cleanupObserver(i))}observe(e){const i=pd(e);return new Ui.y(r=>{const l=this._observeElement(i).subscribe(r);return()=>{l.unsubscribe(),this._unobserveElement(i)}})}_observeElement(e){if(this._observedElements.has(e))this._observedElements.get(e).count++;else{const i=new Et.x,r=this._mutationObserverFactory.create(s=>i.next(s));r&&r.observe(e,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(e,{observer:r,stream:i,count:1})}return this._observedElements.get(e).stream}_unobserveElement(e){this._observedElements.has(e)&&(this._observedElements.get(e).count--,this._observedElements.get(e).count||this._cleanupObserver(e))}_cleanupObserver(e){if(this._observedElements.has(e)){const{observer:i,stream:r}=this._observedElements.get(e);i&&i.disconnect(),r.complete(),this._observedElements.delete(e)}}}return n.\u0275fac=function(e){return new(e||n)(c.LFG($U))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),GP=(()=>{class n{constructor(e,i,r){this._contentObserver=e,this._elementRef=i,this._ngZone=r,this.event=new c.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(e){this._disabled=_n(e),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(e){this._debounce=Xo(e),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const e=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?e.pipe(Bb(this.debounce)):e).subscribe(this.event)})}_unsubscribe(){var e;null===(e=this._currentSubscription)||void 0===e||e.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(Q8),c.Y36(c.SBq),c.Y36(c.R0b))},n.\u0275dir=c.lG2({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),AC=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[$U]}),n})();const X8=new c.OlP("cdk-dir-doc",{providedIn:"root",factory:function J8(){return(0,c.f3M)(oe)}}),eY=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let zP,jm=(()=>{class n{constructor(e){if(this.value="ltr",this.change=new c.vpe,e){const r=e.documentElement?e.documentElement.dir:null;this.value=function tY(n){const t=(null==n?void 0:n.toLowerCase())||"";return"auto"===t&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?eY.test(navigator.language)?"rtl":"ltr":"rtl"===t?"rtl":"ltr"}((e.body?e.body.dir:null)||r||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(X8,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Wv=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();try{zP="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){zP=!1}let Yv,Us=(()=>{class n{constructor(e){this._platformId=e,this.isBrowser=this._platformId?Ti(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!zP)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(c.Lbi))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const WU=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function YU(){if(Yv)return Yv;if("object"!=typeof document||!document)return Yv=new Set(WU),Yv;let n=document.createElement("input");return Yv=new Set(WU.filter(t=>(n.setAttribute("type",t),n.type===t))),Yv}let kC,Gm,$P;function _f(n){return function nY(){if(null==kC&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>kC=!0}))}finally{kC=kC||!1}return kC}()?n:!!n.capture}function iY(){if(null==Gm){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Gm=!1,Gm;if("scrollBehavior"in document.documentElement.style)Gm=!0;else{const n=Element.prototype.scrollTo;Gm=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return Gm}function ZU(n){if(function rY(){if(null==$P){const n="undefined"!=typeof document?document.head:null;$P=!(!n||!n.createShadowRoot&&!n.attachShadow)}return $P}()){const t=n.getRootNode?n.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function qP(){let n="undefined"!=typeof document&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const t=n.shadowRoot.activeElement;if(t===n)break;n=t}return n}function zm(n){return n.composedPath?n.composedPath()[0]:n.target}function WP(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}function cs(n){return(0,Qn.e)((t,e)=>{(0,Ba.Xf)(n).subscribe((0,Un.x)(e,()=>e.complete(),Ua.Z)),!e.closed&&t.subscribe(e)})}let iH=(()=>{class n{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return function xY(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}isTabbable(e){if(!this._platform.isBrowser)return!1;const i=function DY(n){try{return n.frameElement}catch(t){return null}}(function OY(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(e));if(i&&(-1===sH(i)||!this.isVisible(i)))return!1;let r=e.nodeName.toLowerCase(),s=sH(e);return e.hasAttribute("contenteditable")?-1!==s:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function kY(n){let t=n.nodeName.toLowerCase(),e="input"===t&&n.type;return"text"===e||"password"===e||"select"===t||"textarea"===t}(e))&&("audio"===r?!!e.hasAttribute("controls")&&-1!==s:"video"===r?-1!==s&&(null!==s||this._platform.FIREFOX||e.hasAttribute("controls")):e.tabIndex>=0)}isFocusable(e,i){return function RY(n){return!function MY(n){return function IY(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function SY(n){let t=n.nodeName.toLowerCase();return"input"===t||"select"===t||"button"===t||"textarea"===t}(n)||function TY(n){return function AY(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||rH(n))}(e)&&!this.isDisabled(e)&&((null==i?void 0:i.ignoreVisibility)||this.isVisible(e))}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(Us))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function rH(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let t=n.getAttribute("tabindex");return!(!t||isNaN(parseInt(t,10)))}function sH(n){if(!rH(n))return null;const t=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}class PY{constructor(t,e,i,r,s=!1){this._element=t,this._checker=e,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}destroy(){const t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(t)))})}focusFirstTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(t)))})}focusLastTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(t)))})}_getRegionBoundary(t){const e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);return"start"==t?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(t){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){const i=this._getFirstTabbableElement(e);return null==i||i.focus(t),!!i}return e.focus(t),!0}return this.focusFirstTabbableElement(t)}focusFirstTabbableElement(t){const e=this._getRegionBoundary("start");return e&&e.focus(t),!!e}focusLastTabbableElement(t){const e=this._getRegionBoundary("end");return e&&e.focus(t),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let i=0;i<e.length;i++){const r=e[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[i]):null;if(r)return r}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let i=e.length-1;i>=0;i--){const r=e[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[i]):null;if(r)return r}return null}_createAnchor(){const t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._ngZone.isStable?t():this._ngZone.onStable.pipe((0,Hn.q)(1)).subscribe(t)}}let NY=(()=>{class n{constructor(e,i,r){this._checker=e,this._ngZone=i,this._document=r}create(e,i=!1){return new PY(e,this._checker,this._ngZone,this._document,i)}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(iH),c.LFG(c.R0b),c.LFG(oe))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function oH(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function aH(n){const t=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}const FY=new c.OlP("cdk-input-modality-detector-options"),LY={ignoreKeys:[18,17,224,91,16]},Zv=_f({passive:!0,capture:!0});let BY=(()=>{class n{constructor(e,i,r,s){this._platform=e,this._mostRecentTarget=null,this._modality=new Hi(null),this._lastTouchMs=0,this._onKeydown=l=>{var d,p;(null===(p=null===(d=this._options)||void 0===d?void 0:d.ignoreKeys)||void 0===p?void 0:p.some(_=>_===l.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=zm(l))},this._onMousedown=l=>{Date.now()-this._lastTouchMs<650||(this._modality.next(oH(l)?"keyboard":"mouse"),this._mostRecentTarget=zm(l))},this._onTouchstart=l=>{aH(l)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=zm(l))},this._options=Object.assign(Object.assign({},LY),s),this.modalityDetected=this._modality.pipe(function yY(n){return Gn((t,e)=>n<=e)}(1)),this.modalityChanged=this.modalityDetected.pipe(v_()),e.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,Zv),r.addEventListener("mousedown",this._onMousedown,Zv),r.addEventListener("touchstart",this._onTouchstart,Zv)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Zv),document.removeEventListener("mousedown",this._onMousedown,Zv),document.removeEventListener("touchstart",this._onTouchstart,Zv))}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(Us),c.LFG(c.R0b),c.LFG(oe),c.LFG(FY,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const UY=new c.OlP("cdk-focus-monitor-default-options"),YM=_f({passive:!0,capture:!0});let vf=(()=>{class n{constructor(e,i,r,s,l){this._ngZone=e,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Et.x,this._rootNodeFocusAndBlurListener=d=>{const p=zm(d),_="focus"===d.type?this._onFocus:this._onBlur;for(let b=p;b;b=b.parentElement)_.call(this,d,b)},this._document=s,this._detectionMode=(null==l?void 0:l.detectionMode)||0}monitor(e,i=!1){const r=pd(e);if(!this._platform.isBrowser||1!==r.nodeType)return at(null);const s=ZU(r)||this._getDocument(),l=this._elementInfo.get(r);if(l)return i&&(l.checkChildren=!0),l.subject;const d={checkChildren:i,subject:new Et.x,rootNode:s};return this._elementInfo.set(r,d),this._registerGlobalListeners(d),d.subject}stopMonitoring(e){const i=pd(e),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(e,i,r){const s=pd(e);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([d,p])=>this._originChanged(d,i,p)):(this._setOrigin(i),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((e,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(e){return 1===this._detectionMode||!!(null==e?void 0:e.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(e,i){e.classList.toggle("cdk-focused",!!i),e.classList.toggle("cdk-touch-focused","touch"===i),e.classList.toggle("cdk-keyboard-focused","keyboard"===i),e.classList.toggle("cdk-mouse-focused","mouse"===i),e.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(e,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,i){const r=this._elementInfo.get(i),s=zm(e);!r||!r.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),r)}_onBlur(e,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&e.relatedTarget instanceof Node&&i.contains(e.relatedTarget)||(this._setClasses(i),this._emitOrigin(r.subject,null))}_emitOrigin(e,i){this._ngZone.run(()=>e.next(i))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const i=e.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,YM),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,YM)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(cs(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(e){const i=e.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,YM),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,YM),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,i,r){this._setClasses(e,i),this._emitOrigin(r.subject,i),this._lastFocusOrigin=i}_getClosestElementsInfo(e){const i=[];return this._elementInfo.forEach((r,s)=>{(s===e||r.checkChildren&&s.contains(e))&&i.push([s,r])}),i}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(c.R0b),c.LFG(Us),c.LFG(BY),c.LFG(oe,8),c.LFG(UY,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const cH="cdk-high-contrast-black-on-white",uH="cdk-high-contrast-white-on-black",ZP="cdk-high-contrast-active";let dH=(()=>{class n{constructor(e,i){this._platform=e,this._document=i}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(e):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(e.remove(),s){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(ZP),e.remove(cH),e.remove(uH),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?(e.add(ZP),e.add(cH)):2===i&&(e.add(ZP),e.add(uH))}}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(Us),c.LFG(oe))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),KP=(()=>{class n{constructor(e){e._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(dH))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[AC]]}),n})();class hH{}const md="*";function ir(n,t){return{type:7,name:n,definitions:t,options:{}}}function Rn(n,t=null){return{type:4,styles:t,timings:n}}function ZM(n,t=null){return{type:3,steps:n,options:t}}function fH(n,t=null){return{type:2,steps:n,options:t}}function pt(n){return{type:6,styles:n,offset:null}}function on(n,t,e){return{type:0,name:n,styles:t,options:e}}function vn(n,t,e=null){return{type:1,expr:n,animation:t,options:e}}function Kv(n=null){return{type:9,options:n}}function Qv(n,t,e=null){return{type:11,selector:n,animation:t,options:e}}function pH(n){Promise.resolve(null).then(n)}class OC{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){pH(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class mH{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,i=0,r=0;const s=this.players.length;0==s?pH(()=>this._onFinish()):this.players.forEach(l=>{l.onDone(()=>{++e==s&&this._onFinish()}),l.onDestroy(()=>{++i==s&&this._onDestroy()}),l.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((l,d)=>Math.max(l,d.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,e/i.totalTime):1;i.setPosition(r)})}getPosition(){const t=this.players.reduce((e,i)=>null===e||i.totalTime>e.totalTime?i:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}const yn=!1;function gH(n){return new c.vHH(3e3,yn)}function wZ(){return"undefined"!=typeof window&&void 0!==window.document}function XP(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function yf(n){switch(n.length){case 0:return new OC;case 1:return n[0];default:return new mH(n)}}function _H(n,t,e,i,r={},s={}){const l=[],d=[];let p=-1,_=null;if(i.forEach(b=>{const D=b.offset,I=D==p,P=I&&_||{};Object.keys(b).forEach(U=>{let Q=U,le=b[U];if("offset"!==U)switch(Q=t.normalizePropertyName(Q,l),le){case"!":le=r[U];break;case md:le=s[U];break;default:le=t.normalizeStyleValue(U,Q,le,l)}P[Q]=le}),I||d.push(P),_=P,p=D}),l.length)throw function uZ(n){return new c.vHH(3502,yn)}();return d}function JP(n,t,e,i){switch(t){case"start":n.onStart(()=>i(e&&e1(e,"start",n)));break;case"done":n.onDone(()=>i(e&&e1(e,"done",n)));break;case"destroy":n.onDestroy(()=>i(e&&e1(e,"destroy",n)))}}function e1(n,t,e){const i=e.totalTime,s=t1(n.element,n.triggerName,n.fromState,n.toState,t||n.phaseName,null==i?n.totalTime:i,!!e.disabled),l=n._data;return null!=l&&(s._data=l),s}function t1(n,t,e,i,r="",s=0,l){return{element:n,triggerName:t,fromState:e,toState:i,phaseName:r,totalTime:s,disabled:!!l}}function Ca(n,t,e){let i;return n instanceof Map?(i=n.get(t),i||n.set(t,i=e)):(i=n[t],i||(i=n[t]=e)),i}function vH(n){const t=n.indexOf(":");return[n.substring(1,t),n.substr(t+1)]}let n1=(n,t)=>!1,yH=(n,t,e)=>[],bH=null;function r1(n){const t=n.parentNode||n.host;return t===bH?null:t}(XP()||"undefined"!=typeof Element)&&(wZ()?(bH=(()=>document.documentElement)(),n1=(n,t)=>{for(;t;){if(t===n)return!0;t=r1(t)}return!1}):n1=(n,t)=>n.contains(t),yH=(n,t,e)=>{if(e)return Array.from(n.querySelectorAll(t));const i=n.querySelector(t);return i?[i]:[]});let qm=null,wH=!1;function CH(n){qm||(qm=function EZ(){return"undefined"!=typeof document?document.body:null}()||{},wH=!!qm.style&&"WebkitAppearance"in qm.style);let t=!0;return qm.style&&!function CZ(n){return"ebkit"==n.substring(1,6)}(n)&&(t=n in qm.style,!t&&wH&&(t="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in qm.style)),t}const EH=n1,DH=yH;let xH=(()=>{class n{validateStyleProperty(e){return CH(e)}matchesElement(e,i){return!1}containsElement(e,i){return EH(e,i)}getParentElement(e){return r1(e)}query(e,i,r){return DH(e,i,r)}computeStyle(e,i,r){return r||""}animate(e,i,r,s,l,d=[],p){return new OC(r,s)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),s1=(()=>{class n{}return n.NOOP=new xH,n})();const o1="ng-enter",QM="ng-leave",XM="ng-trigger",JM=".ng-trigger",MH="ng-animating",a1=".ng-animating";function Wm(n){if("number"==typeof n)return n;const t=n.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:l1(parseFloat(t[1]),t[2])}function l1(n,t){return"s"===t?1e3*n:n}function eT(n,t,e){return n.hasOwnProperty("duration")?n:function SZ(n,t,e){let r,s=0,l="";if("string"==typeof n){const d=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===d)return t.push(gH()),{duration:0,delay:0,easing:""};r=l1(parseFloat(d[1]),d[2]);const p=d[3];null!=p&&(s=l1(parseFloat(p),d[4]));const _=d[5];_&&(l=_)}else r=n;if(!e){let d=!1,p=t.length;r<0&&(t.push(function jY(){return new c.vHH(3100,yn)}()),d=!0),s<0&&(t.push(function GY(){return new c.vHH(3101,yn)}()),d=!0),d&&t.splice(p,0,gH())}return{duration:r,delay:s,easing:l}}(n,t,e)}function Xv(n,t={}){return Object.keys(n).forEach(e=>{t[e]=n[e]}),t}function bf(n,t,e={}){if(t)for(let i in n)e[i]=n[i];else Xv(n,e);return e}function IH(n,t,e){return e?t+":"+e+";":""}function AH(n){let t="";for(let e=0;e<n.style.length;e++){const i=n.style.item(e);t+=IH(0,i,n.style.getPropertyValue(i))}for(const e in n.style)n.style.hasOwnProperty(e)&&!e.startsWith("_")&&(t+=IH(0,IZ(e),n.style[e]));n.setAttribute("style",t)}function Jc(n,t,e){n.style&&(Object.keys(t).forEach(i=>{const r=u1(i);e&&!e.hasOwnProperty(i)&&(e[i]=n.style[r]),n.style[r]=t[i]}),XP()&&AH(n))}function Ym(n,t){n.style&&(Object.keys(t).forEach(e=>{const i=u1(e);n.style[i]=""}),XP()&&AH(n))}function PC(n){return Array.isArray(n)?1==n.length?n[0]:fH(n):n}const c1=new RegExp("{{\\s*(.+?)\\s*}}","g");function kH(n){let t=[];if("string"==typeof n){let e;for(;e=c1.exec(n);)t.push(e[1]);c1.lastIndex=0}return t}function tT(n,t,e){const i=n.toString(),r=i.replace(c1,(s,l)=>{let d=t[l];return t.hasOwnProperty(l)||(e.push(function $Y(n){return new c.vHH(3003,yn)}()),d=""),d.toString()});return r==i?n:r}function nT(n){const t=[];let e=n.next();for(;!e.done;)t.push(e.value),e=n.next();return t}const TZ=/-+([a-z0-9])/g;function u1(n){return n.replace(TZ,(...t)=>t[1].toUpperCase())}function IZ(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Ea(n,t,e){switch(t.type){case 7:return n.visitTrigger(t,e);case 0:return n.visitState(t,e);case 1:return n.visitTransition(t,e);case 2:return n.visitSequence(t,e);case 3:return n.visitGroup(t,e);case 4:return n.visitAnimate(t,e);case 5:return n.visitKeyframes(t,e);case 6:return n.visitStyle(t,e);case 8:return n.visitReference(t,e);case 9:return n.visitAnimateChild(t,e);case 10:return n.visitAnimateRef(t,e);case 11:return n.visitQuery(t,e);case 12:return n.visitStagger(t,e);default:throw function qY(n){return new c.vHH(3004,yn)}()}}function RH(n,t){return window.getComputedStyle(n)[t]}function NZ(n,t){const e=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function FZ(n,t,e){if(":"==n[0]){const p=function LZ(n,t){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,i)=>parseFloat(i)>parseFloat(e);case":decrement":return(e,i)=>parseFloat(i)<parseFloat(e);default:return t.push(function oZ(n){return new c.vHH(3016,yn)}()),"* => *"}}(n,e);if("function"==typeof p)return void t.push(p);n=p}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return e.push(function sZ(n){return new c.vHH(3015,yn)}()),t;const r=i[1],s=i[2],l=i[3];t.push(OH(r,l));"<"==s[0]&&!("*"==r&&"*"==l)&&t.push(OH(l,r))}(i,e,t)):e.push(n),e}const oT=new Set(["true","1"]),aT=new Set(["false","0"]);function OH(n,t){const e=oT.has(n)||aT.has(n),i=oT.has(t)||aT.has(t);return(r,s)=>{let l="*"==n||n==r,d="*"==t||t==s;return!l&&e&&"boolean"==typeof r&&(l=r?oT.has(n):aT.has(n)),!d&&i&&"boolean"==typeof s&&(d=s?oT.has(t):aT.has(t)),l&&d}}const BZ=new RegExp("s*:selfs*,?","g");function d1(n,t,e,i){return new VZ(n).build(t,e,i)}class VZ{constructor(t){this._driver=t}build(t,e,i){const r=new jZ(e);this._resetContextStyleTimingState(r);const s=Ea(this,PC(t),r);return r.unsupportedCSSPropertiesFound.size&&r.unsupportedCSSPropertiesFound.keys(),s}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let i=e.queryCount=0,r=e.depCount=0;const s=[],l=[];return"@"==t.name.charAt(0)&&e.errors.push(function YY(){return new c.vHH(3006,yn)}()),t.definitions.forEach(d=>{if(this._resetContextStyleTimingState(e),0==d.type){const p=d,_=p.name;_.toString().split(/\s*,\s*/).forEach(b=>{p.name=b,s.push(this.visitState(p,e))}),p.name=_}else if(1==d.type){const p=this.visitTransition(d,e);i+=p.queryCount,r+=p.depCount,l.push(p)}else e.errors.push(function ZY(){return new c.vHH(3007,yn)}())}),{type:7,name:t.name,states:s,transitions:l,queryCount:i,depCount:r,options:null}}visitState(t,e){const i=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(i.containsDynamicStyles){const s=new Set,l=r||{};i.styles.forEach(d=>{if(lT(d)){const p=d;Object.keys(p).forEach(_=>{kH(p[_]).forEach(b=>{l.hasOwnProperty(b)||s.add(b)})})}}),s.size&&(nT(s.values()),e.errors.push(function KY(n,t){return new c.vHH(3008,yn)}()))}return{type:0,name:t.name,style:i,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const i=Ea(this,PC(t.animation),e);return{type:1,matchers:NZ(t.expr,e.errors),animation:i,queryCount:e.queryCount,depCount:e.depCount,options:Zm(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(i=>Ea(this,i,e)),options:Zm(t.options)}}visitGroup(t,e){const i=e.currentTime;let r=0;const s=t.steps.map(l=>{e.currentTime=i;const d=Ea(this,l,e);return r=Math.max(r,e.currentTime),d});return e.currentTime=r,{type:3,steps:s,options:Zm(t.options)}}visitAnimate(t,e){const i=function zZ(n,t){let e=null;if(n.hasOwnProperty("duration"))e=n;else if("number"==typeof n)return h1(eT(n,t).duration,0,"");const i=n;if(i.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=h1(0,0,"");return s.dynamic=!0,s.strValue=i,s}return e=e||eT(i,t),h1(e.duration,e.delay,e.easing)}(t.timings,e.errors);e.currentAnimateTimings=i;let r,s=t.styles?t.styles:pt({});if(5==s.type)r=this.visitKeyframes(s,e);else{let l=t.styles,d=!1;if(!l){d=!0;const _={};i.easing&&(_.easing=i.easing),l=pt(_)}e.currentTime+=i.duration+i.delay;const p=this.visitStyle(l,e);p.isEmptyStep=d,r=p}return e.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(t,e){const i=this._makeStyleAst(t,e);return this._validateStyleAst(i,e),i}_makeStyleAst(t,e){const i=[];Array.isArray(t.styles)?t.styles.forEach(l=>{"string"==typeof l?l==md?i.push(l):e.errors.push(function QY(n){return new c.vHH(3002,yn)}()):i.push(l)}):i.push(t.styles);let r=!1,s=null;return i.forEach(l=>{if(lT(l)){const d=l,p=d.easing;if(p&&(s=p,delete d.easing),!r)for(let _ in d)if(d[_].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:i,easing:s,offset:t.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(t,e){const i=e.currentAnimateTimings;let r=e.currentTime,s=e.currentTime;i&&s>0&&(s-=i.duration+i.delay),t.styles.forEach(l=>{"string"!=typeof l&&Object.keys(l).forEach(d=>{if(!this._driver.validateStyleProperty(d))return delete l[d],void e.unsupportedCSSPropertiesFound.add(d);const p=e.collectedStyles[e.currentQuerySelector],_=p[d];let b=!0;_&&(s!=r&&s>=_.startTime&&r<=_.endTime&&(e.errors.push(function XY(n,t,e,i,r){return new c.vHH(3010,yn)}()),b=!1),s=_.startTime),b&&(p[d]={startTime:s,endTime:r}),e.options&&function MZ(n,t,e){const i=t.params||{},r=kH(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||e.push(function zY(n){return new c.vHH(3001,yn)}())})}(l[d],e.options,e.errors)})})}visitKeyframes(t,e){const i={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function JY(){return new c.vHH(3011,yn)}()),i;let s=0;const l=[];let d=!1,p=!1,_=0;const b=t.steps.map(Ye=>{const et=this._makeStyleAst(Ye,e);let rt=null!=et.offset?et.offset:function GZ(n){if("string"==typeof n)return null;let t=null;if(Array.isArray(n))n.forEach(e=>{if(lT(e)&&e.hasOwnProperty("offset")){const i=e;t=parseFloat(i.offset),delete i.offset}});else if(lT(n)&&n.hasOwnProperty("offset")){const e=n;t=parseFloat(e.offset),delete e.offset}return t}(et.styles),Xe=0;return null!=rt&&(s++,Xe=et.offset=rt),p=p||Xe<0||Xe>1,d=d||Xe<_,_=Xe,l.push(Xe),et});p&&e.errors.push(function eZ(){return new c.vHH(3012,yn)}()),d&&e.errors.push(function tZ(){return new c.vHH(3200,yn)}());const D=t.steps.length;let I=0;s>0&&s<D?e.errors.push(function nZ(){return new c.vHH(3202,yn)}()):0==s&&(I=1/(D-1));const P=D-1,U=e.currentTime,Q=e.currentAnimateTimings,le=Q.duration;return b.forEach((Ye,et)=>{const rt=I>0?et==P?1:I*et:l[et],Xe=rt*le;e.currentTime=U+Q.delay+Xe,Q.duration=Xe,this._validateStyleAst(Ye,e),Ye.offset=rt,i.styles.push(Ye)}),i}visitReference(t,e){return{type:8,animation:Ea(this,PC(t.animation),e),options:Zm(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:Zm(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:Zm(t.options)}}visitQuery(t,e){const i=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[s,l]=function UZ(n){const t=!!n.split(/\s*,\s*/).find(e=>":self"==e);return t&&(n=n.replace(BZ,"")),n=n.replace(/@\*/g,JM).replace(/@\w+/g,e=>JM+"-"+e.substr(1)).replace(/:animating/g,a1),[n,t]}(t.selector);e.currentQuerySelector=i.length?i+" "+s:s,Ca(e.collectedStyles,e.currentQuerySelector,{});const d=Ea(this,PC(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:l,animation:d,originalSelector:t.selector,options:Zm(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(function iZ(){return new c.vHH(3013,yn)}());const i="full"===t.timings?{duration:0,delay:0,easing:"full"}:eT(t.timings,e.errors,!0);return{type:12,animation:Ea(this,PC(t.animation),e),timings:i,options:null}}}class jZ{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function lT(n){return!Array.isArray(n)&&"object"==typeof n}function Zm(n){return n?(n=Xv(n)).params&&(n.params=function HZ(n){return n?Xv(n):null}(n.params)):n={},n}function h1(n,t,e){return{duration:n,delay:t,easing:e}}function f1(n,t,e,i,r,s,l=null,d=!1){return{type:1,element:n,keyframes:t,preStyleProps:e,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:l,subTimeline:d}}class cT{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,e){let i=this._map.get(t);i||this._map.set(t,i=[]),i.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const WZ=new RegExp(":enter","g"),ZZ=new RegExp(":leave","g");function p1(n,t,e,i,r,s={},l={},d,p,_=[]){return(new KZ).buildKeyframes(n,t,e,i,r,s,l,d,p,_)}class KZ{buildKeyframes(t,e,i,r,s,l,d,p,_,b=[]){_=_||new cT;const D=new m1(t,e,_,r,s,b,[]);D.options=p,D.currentTimeline.setStyles([l],null,D.errors,p),Ea(this,i,D);const I=D.timelines.filter(P=>P.containsAnimation());if(Object.keys(d).length){let P;for(let U=I.length-1;U>=0;U--){const Q=I[U];if(Q.element===e){P=Q;break}}P&&!P.allowOnlyTimelineStyles()&&P.setStyles([d],null,D.errors,p)}return I.length?I.map(P=>P.buildKeyframes()):[f1(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const i=e.subInstructions.get(e.element);if(i){const r=e.createSubContext(t.options),s=e.currentTimeline.currentTime,l=this._visitSubInstructions(i,r,r.options);s!=l&&e.transformIntoNewTimeline(l)}e.previousNode=t}visitAnimateRef(t,e){const i=e.createSubContext(t.options);i.transformIntoNewTimeline(),this.visitReference(t.animation,i),e.transformIntoNewTimeline(i.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,i){let s=e.currentTimeline.currentTime;const l=null!=i.duration?Wm(i.duration):null,d=null!=i.delay?Wm(i.delay):null;return 0!==l&&t.forEach(p=>{const _=e.appendInstructionToTimeline(p,l,d);s=Math.max(s,_.duration+_.delay)}),s}visitReference(t,e){e.updateOptions(t.options,!0),Ea(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const i=e.subContextCount;let r=e;const s=t.options;if(s&&(s.params||s.delay)&&(r=e.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=uT);const l=Wm(s.delay);r.delayNextStep(l)}t.steps.length&&(t.steps.forEach(l=>Ea(this,l,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const i=[];let r=e.currentTimeline.currentTime;const s=t.options&&t.options.delay?Wm(t.options.delay):0;t.steps.forEach(l=>{const d=e.createSubContext(t.options);s&&d.delayNextStep(s),Ea(this,l,d),r=Math.max(r,d.currentTimeline.currentTime),i.push(d.currentTimeline)}),i.forEach(l=>e.currentTimeline.mergeTimelineCollectedStyles(l)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const i=t.strValue;return eT(e.params?tT(i,e.params,e.errors):i,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const i=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;i.delay&&(e.incrementTime(i.delay),r.snapshotCurrentStyles());const s=t.style;5==s.type?this.visitKeyframes(s,e):(e.incrementTime(i.duration),this.visitStyle(s,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const i=e.currentTimeline,r=e.currentAnimateTimings;!r&&i.getCurrentStyleProperties().length&&i.forwardFrame();const s=r&&r.easing||t.easing;t.isEmptyStep?i.applyEmptyStep(s):i.setStyles(t.styles,s,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const i=e.currentAnimateTimings,r=e.currentTimeline.duration,s=i.duration,d=e.createSubContext().currentTimeline;d.easing=i.easing,t.styles.forEach(p=>{d.forwardTime((p.offset||0)*s),d.setStyles(p.styles,p.easing,e.errors,e.options),d.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(d),e.transformIntoNewTimeline(r+s),e.previousNode=t}visitQuery(t,e){const i=e.currentTimeline.currentTime,r=t.options||{},s=r.delay?Wm(r.delay):0;s&&(6===e.previousNode.type||0==i&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=uT);let l=i;const d=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=d.length;let p=null;d.forEach((_,b)=>{e.currentQueryIndex=b;const D=e.createSubContext(t.options,_);s&&D.delayNextStep(s),_===e.element&&(p=D.currentTimeline),Ea(this,t.animation,D),D.currentTimeline.applyStylesToKeyframe(),l=Math.max(l,D.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(l),p&&(e.currentTimeline.mergeTimelineCollectedStyles(p),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const i=e.parentContext,r=e.currentTimeline,s=t.timings,l=Math.abs(s.duration),d=l*(e.currentQueryTotal-1);let p=l*e.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":p=d-p;break;case"full":p=i.currentStaggerTime}const b=e.currentTimeline;p&&b.delayNextStep(p);const D=b.currentTime;Ea(this,t.animation,e),e.previousNode=t,i.currentStaggerTime=r.currentTime-D+(r.startTime-i.currentTimeline.startTime)}}const uT={};class m1{constructor(t,e,i,r,s,l,d,p){this._driver=t,this.element=e,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=l,this.timelines=d,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=uT,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=p||new dT(this._driver,e,0),d.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const i=t;let r=this.options;null!=i.duration&&(r.duration=Wm(i.duration)),null!=i.delay&&(r.delay=Wm(i.delay));const s=i.params;if(s){let l=r.params;l||(l=this.options.params={}),Object.keys(s).forEach(d=>{(!e||!l.hasOwnProperty(d))&&(l[d]=tT(s[d],l,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const i=t.params={};Object.keys(e).forEach(r=>{i[r]=e[r]})}}return t}createSubContext(t=null,e,i){const r=e||this.element,s=new m1(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(t),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(t){return this.previousNode=uT,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,i){const r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=i?i:0)+t.delay,easing:""},s=new QZ(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,i,r,s,l){let d=[];if(r&&d.push(this.element),t.length>0){t=(t=t.replace(WZ,"."+this._enterClassName)).replace(ZZ,"."+this._leaveClassName);let _=this._driver.query(this.element,t,1!=i);0!==i&&(_=i<0?_.slice(_.length+i,_.length):_.slice(0,i)),d.push(..._)}return!s&&0==d.length&&l.push(function rZ(n){return new c.vHH(3014,yn)}()),d}}class dT{constructor(t,e,i,r){this._driver=t,this.element=e,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new dT(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(e=>{this._backFill[e]=this._globalTimelineStyles[e]||md,this._currentKeyframe[e]=md}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,i,r){e&&(this._previousKeyframe.easing=e);const s=r&&r.params||{},l=function XZ(n,t){const e={};let i;return n.forEach(r=>{"*"===r?(i=i||Object.keys(t),i.forEach(s=>{e[s]=md})):bf(r,!1,e)}),e}(t,this._globalTimelineStyles);Object.keys(l).forEach(d=>{const p=tT(l[d],s,i);this._pendingStyles[d]=p,this._localTimelineStyles.hasOwnProperty(d)||(this._backFill[d]=this._globalTimelineStyles.hasOwnProperty(d)?this._globalTimelineStyles[d]:md),this._updateStyle(d,p)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(i=>{this._currentKeyframe[i]=t[i]}),Object.keys(this._localTimelineStyles).forEach(i=>{this._currentKeyframe.hasOwnProperty(i)||(this._currentKeyframe[i]=this._localTimelineStyles[i])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const i=this._styleSummary[e],r=t._styleSummary[e];(!i||r.time>i.time)&&this._updateStyle(e,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((d,p)=>{const _=bf(d,!0);Object.keys(_).forEach(b=>{const D=_[b];"!"==D?t.add(b):D==md&&e.add(b)}),i||(_.offset=p/this.duration),r.push(_)});const s=t.size?nT(t.values()):[],l=e.size?nT(e.values()):[];if(i){const d=r[0],p=Xv(d);d.offset=0,p.offset=1,r=[d,p]}return f1(this.element,r,s,l,this.duration,this.startTime,this.easing,!1)}}class QZ extends dT{constructor(t,e,i,r,s,l,d=!1){super(t,e,l.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=d,this.timings={duration:l.duration,delay:l.delay,easing:l.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const s=[],l=i+e,d=e/l,p=bf(t[0],!1);p.offset=0,s.push(p);const _=bf(t[0],!1);_.offset=FH(d),s.push(_);const b=t.length-1;for(let D=1;D<=b;D++){let I=bf(t[D],!1);I.offset=FH((e+I.offset*i)/l),s.push(I)}i=l,e=0,r="",t=s}return f1(this.element,t,this.preStyleProps,this.postStyleProps,i,e,r,!0)}}function FH(n,t=3){const e=Math.pow(10,t-1);return Math.round(n*e)/e}class g1{}class JZ extends g1{normalizePropertyName(t,e){return u1(t)}normalizeStyleValue(t,e,i,r){let s="";const l=i.toString().trim();if(eK[e]&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const d=i.match(/^[+-]?[\d\.]+([a-z]*)$/);d&&0==d[1].length&&r.push(function WY(n,t){return new c.vHH(3005,yn)}())}return l+s}}const eK=(()=>function tK(n){const t={};return n.forEach(e=>t[e]=!0),t}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function LH(n,t,e,i,r,s,l,d,p,_,b,D,I){return{type:0,element:n,triggerName:t,isRemovalTransition:r,fromState:e,fromStyles:s,toState:i,toStyles:l,timelines:d,queriedElements:p,preStyleProps:_,postStyleProps:b,totalTime:D,errors:I}}const _1={};class BH{constructor(t,e,i){this._triggerName=t,this.ast=e,this._stateStyles=i}match(t,e,i,r){return function nK(n,t,e,i,r){return n.some(s=>s(t,e,i,r))}(this.ast.matchers,t,e,i,r)}buildStyles(t,e,i){const r=this._stateStyles["*"],s=this._stateStyles[t],l=r?r.buildStyles(e,i):{};return s?s.buildStyles(e,i):l}build(t,e,i,r,s,l,d,p,_,b){const D=[],I=this.ast.options&&this.ast.options.params||_1,U=this.buildStyles(i,d&&d.params||_1,D),Q=p&&p.params||_1,le=this.buildStyles(r,Q,D),Ye=new Set,et=new Map,rt=new Map,Xe="void"===r,Ot={params:Object.assign(Object.assign({},I),Q)},Lt=b?[]:p1(t,e,this.ast.animation,s,l,U,le,Ot,_,D);let bn=0;if(Lt.forEach(Da=>{bn=Math.max(Da.duration+Da.delay,bn)}),D.length)return LH(e,this._triggerName,i,r,Xe,U,le,[],[],et,rt,bn,D);Lt.forEach(Da=>{const yd=Da.element,jG=Ca(et,yd,{});Da.preStyleProps.forEach(ng=>jG[ng]=!0);const QC=Ca(rt,yd,{});Da.postStyleProps.forEach(ng=>QC[ng]=!0),yd!==e&&Ye.add(yd)});const hr=nT(Ye.values());return LH(e,this._triggerName,i,r,Xe,U,le,Lt,hr,et,rt,bn)}}class iK{constructor(t,e,i){this.styles=t,this.defaultParams=e,this.normalizer=i}buildStyles(t,e){const i={},r=Xv(this.defaultParams);return Object.keys(t).forEach(s=>{const l=t[s];null!=l&&(r[s]=l)}),this.styles.styles.forEach(s=>{if("string"!=typeof s){const l=s;Object.keys(l).forEach(d=>{let p=l[d];p.length>1&&(p=tT(p,r,e));const _=this.normalizer.normalizePropertyName(d,e);p=this.normalizer.normalizeStyleValue(d,_,p,e),i[_]=p})}}),i}}class sK{constructor(t,e,i){this.name=t,this.ast=e,this._normalizer=i,this.transitionFactories=[],this.states={},e.states.forEach(r=>{this.states[r.name]=new iK(r.style,r.options&&r.options.params||{},i)}),VH(this.states,"true","1"),VH(this.states,"false","0"),e.transitions.forEach(r=>{this.transitionFactories.push(new BH(t,r,this.states))}),this.fallbackTransition=function oK(n,t,e){return new BH(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(l,d)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,i,r){return this.transitionFactories.find(l=>l.match(t,e,i,r))||null}matchStyles(t,e,i){return this.fallbackTransition.buildStyles(t,e,i)}}function VH(n,t,e){n.hasOwnProperty(t)?n.hasOwnProperty(e)||(n[e]=n[t]):n.hasOwnProperty(e)&&(n[t]=n[e])}const aK=new cT;class lK{constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i,this._animations={},this._playersById={},this.players=[]}register(t,e){const i=[],s=d1(this._driver,e,i,[]);if(i.length)throw function dZ(n){return new c.vHH(3503,yn)}();this._animations[t]=s}_buildPlayer(t,e,i){const r=t.element,s=_H(0,this._normalizer,0,t.keyframes,e,i);return this._driver.animate(r,s,t.duration,t.delay,t.easing,[],!0)}create(t,e,i={}){const r=[],s=this._animations[t];let l;const d=new Map;if(s?(l=p1(this._driver,e,s,o1,QM,{},{},i,aK,r),l.forEach(b=>{const D=Ca(d,b.element,{});b.postStyleProps.forEach(I=>D[I]=null)})):(r.push(function hZ(){return new c.vHH(3300,yn)}()),l=[]),r.length)throw function fZ(n){return new c.vHH(3504,yn)}();d.forEach((b,D)=>{Object.keys(b).forEach(I=>{b[I]=this._driver.computeStyle(D,I,md)})});const _=yf(l.map(b=>{const D=d.get(b.element);return this._buildPlayer(b,{},D)}));return this._playersById[t]=_,_.onDestroy(()=>this.destroy(t)),this.players.push(_),_}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const i=this.players.indexOf(e);i>=0&&this.players.splice(i,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw function pZ(n){return new c.vHH(3301,yn)}();return e}listen(t,e,i,r){const s=t1(e,"","","");return JP(this._getPlayer(t),i,s,r),()=>{}}command(t,e,i,r){if("register"==i)return void this.register(t,r[0]);if("create"==i)return void this.create(t,e,r[0]||{});const s=this._getPlayer(t);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const UH="ng-animate-queued",v1="ng-animate-disabled",fK=[],HH={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},pK={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},dl="__ng_removed";class y1{constructor(t,e=""){this.namespaceId=e;const i=t&&t.hasOwnProperty("value");if(this.value=function vK(n){return null!=n?n:null}(i?t.value:t),i){const s=Xv(t);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const i=this.options.params;Object.keys(e).forEach(r=>{null==i[r]&&(i[r]=e[r])})}}}const NC="void",b1=new y1(NC);class mK{constructor(t,e,i){this.id=t,this.hostElement=e,this._engine=i,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,hl(e,this._hostClassName)}listen(t,e,i,r){if(!this._triggers.hasOwnProperty(e))throw function mZ(n,t){return new c.vHH(3302,yn)}();if(null==i||0==i.length)throw function gZ(n){return new c.vHH(3303,yn)}();if(!function yK(n){return"start"==n||"done"==n}(i))throw function _Z(n,t){return new c.vHH(3400,yn)}();const s=Ca(this._elementListeners,t,[]),l={name:e,phase:i,callback:r};s.push(l);const d=Ca(this._engine.statesByElement,t,{});return d.hasOwnProperty(e)||(hl(t,XM),hl(t,XM+"-"+e),d[e]=b1),()=>{this._engine.afterFlush(()=>{const p=s.indexOf(l);p>=0&&s.splice(p,1),this._triggers[e]||delete d[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw function vZ(n){return new c.vHH(3401,yn)}();return e}trigger(t,e,i,r=!0){const s=this._getTrigger(e),l=new w1(this.id,e,t);let d=this._engine.statesByElement.get(t);d||(hl(t,XM),hl(t,XM+"-"+e),this._engine.statesByElement.set(t,d={}));let p=d[e];const _=new y1(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&p&&_.absorbOptions(p.options),d[e]=_,p||(p=b1),_.value!==NC&&p.value===_.value){if(!function CK(n,t){const e=Object.keys(n),i=Object.keys(t);if(e.length!=i.length)return!1;for(let r=0;r<e.length;r++){const s=e[r];if(!t.hasOwnProperty(s)||n[s]!==t[s])return!1}return!0}(p.params,_.params)){const Q=[],le=s.matchStyles(p.value,p.params,Q),Ye=s.matchStyles(_.value,_.params,Q);Q.length?this._engine.reportError(Q):this._engine.afterFlush(()=>{Ym(t,le),Jc(t,Ye)})}return}const I=Ca(this._engine.playersByElement,t,[]);I.forEach(Q=>{Q.namespaceId==this.id&&Q.triggerName==e&&Q.queued&&Q.destroy()});let P=s.matchTransition(p.value,_.value,t,_.params),U=!1;if(!P){if(!r)return;P=s.fallbackTransition,U=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:P,fromState:p,toState:_,player:l,isFallbackTransition:U}),U||(hl(t,UH),l.onStart(()=>{Jv(t,UH)})),l.onDone(()=>{let Q=this.players.indexOf(l);Q>=0&&this.players.splice(Q,1);const le=this._engine.playersByElement.get(t);if(le){let Ye=le.indexOf(l);Ye>=0&&le.splice(Ye,1)}}),this.players.push(l),I.push(l),l}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,i)=>{delete e[t]}),this._elementListeners.forEach((e,i)=>{this._elementListeners.set(i,e.filter(r=>r.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(i=>i.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const i=this._engine.driver.query(t,JM,!0);i.forEach(r=>{if(r[dl])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(l=>l.triggerLeaveAnimation(r,e,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(t,e,i,r){const s=this._engine.statesByElement.get(t),l=new Map;if(s){const d=[];if(Object.keys(s).forEach(p=>{if(l.set(p,s[p].value),this._triggers[p]){const _=this.trigger(t,p,NC,r);_&&d.push(_)}}),d.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,l),i&&yf(d).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),i=this._engine.statesByElement.get(t);if(e&&i){const r=new Set;e.forEach(s=>{const l=s.name;if(r.has(l))return;r.add(l);const p=this._triggers[l].fallbackTransition,_=i[l]||b1,b=new y1(NC),D=new w1(this.id,l,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:l,transition:p,fromState:_,toState:b,player:D,isFallbackTransition:!0})})}}removeNode(t,e){const i=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(t):[];if(s&&s.length)r=!0;else{let l=t;for(;l=l.parentNode;)if(i.statesByElement.get(l)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)i.markElementAsRemoved(this.id,t,!1,e);else{const s=t[dl];(!s||s===HH)&&(i.afterFlush(()=>this.clearElementCache(t)),i.destroyInnerAnimations(t),i._onRemovalComplete(t,e))}}insertNode(t,e){hl(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const s=i.element,l=this._elementListeners.get(s);l&&l.forEach(d=>{if(d.name==i.triggerName){const p=t1(s,i.triggerName,i.fromState.value,i.toState.value);p._data=t,JP(i.player,d.phase,p,d.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(i)}),this._queue=[],e.sort((i,r)=>{const s=i.transition.ast.depCount,l=r.transition.ast.depCount;return 0==s||0==l?s-l:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(i=>i.element===t)||e,e}}class gK{constructor(t,e,i){this.bodyNode=t,this.driver=e,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(i=>{i.queued&&t.push(i)})}),t}createNamespace(t,e){const i=new mK(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(i,e):(this.newHostElements.set(e,i),this.collectEnterElement(e)),this._namespaceLookup[t]=i}_balanceNamespaceList(t,e){const i=this._namespaceList,r=this.namespacesByHostElement,s=i.length-1;if(s>=0){let l=!1;if(void 0!==this.driver.getParentElement){let d=this.driver.getParentElement(e);for(;d;){const p=r.get(d);if(p){const _=i.indexOf(p);i.splice(_+1,0,t),l=!0;break}d=this.driver.getParentElement(d)}}else for(let d=s;d>=0;d--)if(this.driver.containsElement(i[d].hostElement,e)){i.splice(d+1,0,t),l=!0;break}l||i.unshift(t)}else i.push(t);return r.set(e,t),t}register(t,e){let i=this._namespaceLookup[t];return i||(i=this.createNamespace(t,e)),i}registerTrigger(t,e,i){let r=this._namespaceLookup[t];r&&r.register(e,i)&&this.totalAnimations++}destroy(t,e){if(!t)return;const i=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[t];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,i=this.statesByElement.get(t);if(i){const r=Object.keys(i);for(let s=0;s<r.length;s++){const l=i[r[s]].namespaceId;if(l){const d=this._fetchNamespace(l);d&&e.add(d)}}}return e}trigger(t,e,i,r){if(hT(e)){const s=this._fetchNamespace(t);if(s)return s.trigger(e,i,r),!0}return!1}insertNode(t,e,i,r){if(!hT(e))return;const s=e[dl];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const l=this.collectedLeaveElements.indexOf(e);l>=0&&this.collectedLeaveElements.splice(l,1)}if(t){const l=this._fetchNamespace(t);l&&l.insertNode(e,i)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),hl(t,v1)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Jv(t,v1))}removeNode(t,e,i,r){if(hT(e)){const s=t?this._fetchNamespace(t):null;if(s?s.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),i){const l=this.namespacesByHostElement.get(e);l&&l.id!==t&&l.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,i,r,s){this.collectedLeaveElements.push(e),e[dl]={namespaceId:t,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(t,e,i,r,s){return hT(e)?this._fetchNamespace(t).listen(e,i,r,s):()=>{}}_buildInstruction(t,e,i,r,s){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,i,r,t.fromState.options,t.toState.options,e,s)}destroyInnerAnimations(t){let e=this.driver.query(t,JM,!0);e.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,a1,!0),e.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return yf(this.players).onDone(()=>t());t()})}processLeaveNode(t){var e;const i=t[dl];if(i&&i.setForRemoval){if(t[dl]=HH,i.namespaceId){this.destroyInnerAnimations(t);const r=this._fetchNamespace(i.namespaceId);r&&r.clearElementCache(t)}this._onRemovalComplete(t,i.setForRemoval)}(null===(e=t.classList)||void 0===e?void 0:e.contains(v1))&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)hl(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{e=this._flushAnimations(i,t)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],e.length?yf(e).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(t){throw function yZ(n){return new c.vHH(3402,yn)}()}_flushAnimations(t,e){const i=new cT,r=[],s=new Map,l=[],d=new Map,p=new Map,_=new Map,b=new Set;this.disabledNodes.forEach(wt=>{b.add(wt);const Rt=this.driver.query(wt,".ng-animate-queued",!0);for(let Vt=0;Vt<Rt.length;Vt++)b.add(Rt[Vt])});const D=this.bodyNode,I=Array.from(this.statesByElement.keys()),P=zH(I,this.collectedEnterElements),U=new Map;let Q=0;P.forEach((wt,Rt)=>{const Vt=o1+Q++;U.set(Rt,Vt),wt.forEach(On=>hl(On,Vt))});const le=[],Ye=new Set,et=new Set;for(let wt=0;wt<this.collectedLeaveElements.length;wt++){const Rt=this.collectedLeaveElements[wt],Vt=Rt[dl];Vt&&Vt.setForRemoval&&(le.push(Rt),Ye.add(Rt),Vt.hasAnimation?this.driver.query(Rt,".ng-star-inserted",!0).forEach(On=>Ye.add(On)):et.add(Rt))}const rt=new Map,Xe=zH(I,Array.from(Ye));Xe.forEach((wt,Rt)=>{const Vt=QM+Q++;rt.set(Rt,Vt),wt.forEach(On=>hl(On,Vt))}),t.push(()=>{P.forEach((wt,Rt)=>{const Vt=U.get(Rt);wt.forEach(On=>Jv(On,Vt))}),Xe.forEach((wt,Rt)=>{const Vt=rt.get(Rt);wt.forEach(On=>Jv(On,Vt))}),le.forEach(wt=>{this.processLeaveNode(wt)})});const Ot=[],Lt=[];for(let wt=this._namespaceList.length-1;wt>=0;wt--)this._namespaceList[wt].drainQueuedTransitions(e).forEach(Vt=>{const On=Vt.player,us=Vt.element;if(Ot.push(On),this.collectedEnterElements.length){const Do=us[dl];if(Do&&Do.setForMove){if(Do.previousTriggersValues&&Do.previousTriggersValues.has(Vt.triggerName)){const ig=Do.previousTriggersValues.get(Vt.triggerName),If=this.statesByElement.get(Vt.element);If&&If[Vt.triggerName]&&(If[Vt.triggerName].value=ig)}return void On.destroy()}}const iu=!D||!this.driver.containsElement(D,us),xa=rt.get(us),Tf=U.get(us),Zi=this._buildInstruction(Vt,i,Tf,xa,iu);if(Zi.errors&&Zi.errors.length)return void Lt.push(Zi);if(iu)return On.onStart(()=>Ym(us,Zi.fromStyles)),On.onDestroy(()=>Jc(us,Zi.toStyles)),void r.push(On);if(Vt.isFallbackTransition)return On.onStart(()=>Ym(us,Zi.fromStyles)),On.onDestroy(()=>Jc(us,Zi.toStyles)),void r.push(On);const $G=[];Zi.timelines.forEach(Do=>{Do.stretchStartingKeyframe=!0,this.disabledNodes.has(Do.element)||$G.push(Do)}),Zi.timelines=$G,i.append(us,Zi.timelines),l.push({instruction:Zi,player:On,element:us}),Zi.queriedElements.forEach(Do=>Ca(d,Do,[]).push(On)),Zi.preStyleProps.forEach((Do,ig)=>{const If=Object.keys(Do);if(If.length){let rg=p.get(ig);rg||p.set(ig,rg=new Set),If.forEach(fN=>rg.add(fN))}}),Zi.postStyleProps.forEach((Do,ig)=>{const If=Object.keys(Do);let rg=_.get(ig);rg||_.set(ig,rg=new Set),If.forEach(fN=>rg.add(fN))})});if(Lt.length){const wt=[];Lt.forEach(Rt=>{wt.push(function bZ(n,t){return new c.vHH(3505,yn)}())}),Ot.forEach(Rt=>Rt.destroy()),this.reportError(wt)}const bn=new Map,hr=new Map;l.forEach(wt=>{const Rt=wt.element;i.has(Rt)&&(hr.set(Rt,Rt),this._beforeAnimationBuild(wt.player.namespaceId,wt.instruction,bn))}),r.forEach(wt=>{const Rt=wt.element;this._getPreviousPlayers(Rt,!1,wt.namespaceId,wt.triggerName,null).forEach(On=>{Ca(bn,Rt,[]).push(On),On.destroy()})});const Da=le.filter(wt=>qH(wt,p,_)),yd=new Map;GH(yd,this.driver,et,_,md).forEach(wt=>{qH(wt,p,_)&&Da.push(wt)});const QC=new Map;P.forEach((wt,Rt)=>{GH(QC,this.driver,new Set(wt),p,"!")}),Da.forEach(wt=>{const Rt=yd.get(wt),Vt=QC.get(wt);yd.set(wt,Object.assign(Object.assign({},Rt),Vt))});const ng=[],GG=[],zG={};l.forEach(wt=>{const{element:Rt,player:Vt,instruction:On}=wt;if(i.has(Rt)){if(b.has(Rt))return Vt.onDestroy(()=>Jc(Rt,On.toStyles)),Vt.disabled=!0,Vt.overrideTotalTime(On.totalTime),void r.push(Vt);let us=zG;if(hr.size>1){let xa=Rt;const Tf=[];for(;xa=xa.parentNode;){const Zi=hr.get(xa);if(Zi){us=Zi;break}Tf.push(xa)}Tf.forEach(Zi=>hr.set(Zi,us))}const iu=this._buildAnimation(Vt.namespaceId,On,bn,s,QC,yd);if(Vt.setRealPlayer(iu),us===zG)ng.push(Vt);else{const xa=this.playersByElement.get(us);xa&&xa.length&&(Vt.parentPlayer=yf(xa)),r.push(Vt)}}else Ym(Rt,On.fromStyles),Vt.onDestroy(()=>Jc(Rt,On.toStyles)),GG.push(Vt),b.has(Rt)&&r.push(Vt)}),GG.forEach(wt=>{const Rt=s.get(wt.element);if(Rt&&Rt.length){const Vt=yf(Rt);wt.setRealPlayer(Vt)}}),r.forEach(wt=>{wt.parentPlayer?wt.syncPlayerEvents(wt.parentPlayer):wt.destroy()});for(let wt=0;wt<le.length;wt++){const Rt=le[wt],Vt=Rt[dl];if(Jv(Rt,QM),Vt&&Vt.hasAnimation)continue;let On=[];if(d.size){let iu=d.get(Rt);iu&&iu.length&&On.push(...iu);let xa=this.driver.query(Rt,a1,!0);for(let Tf=0;Tf<xa.length;Tf++){let Zi=d.get(xa[Tf]);Zi&&Zi.length&&On.push(...Zi)}}const us=On.filter(iu=>!iu.destroyed);us.length?bK(this,Rt,us):this.processLeaveNode(Rt)}return le.length=0,ng.forEach(wt=>{this.players.push(wt),wt.onDone(()=>{wt.destroy();const Rt=this.players.indexOf(wt);this.players.splice(Rt,1)}),wt.play()}),ng}elementContainsData(t,e){let i=!1;const r=e[dl];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(e)&&(i=!0),this.playersByQueriedElement.has(e)&&(i=!0),this.statesByElement.has(e)&&(i=!0),this._fetchNamespace(t).elementContainsData(e)||i}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,i,r,s){let l=[];if(e){const d=this.playersByQueriedElement.get(t);d&&(l=d)}else{const d=this.playersByElement.get(t);if(d){const p=!s||s==NC;d.forEach(_=>{_.queued||!p&&_.triggerName!=r||l.push(_)})}}return(i||r)&&(l=l.filter(d=>!(i&&i!=d.namespaceId||r&&r!=d.triggerName))),l}_beforeAnimationBuild(t,e,i){const s=e.element,l=e.isRemovalTransition?void 0:t,d=e.isRemovalTransition?void 0:e.triggerName;for(const p of e.timelines){const _=p.element,b=_!==s,D=Ca(i,_,[]);this._getPreviousPlayers(_,b,l,d,e.toState).forEach(P=>{const U=P.getRealPlayer();U.beforeDestroy&&U.beforeDestroy(),P.destroy(),D.push(P)})}Ym(s,e.fromStyles)}_buildAnimation(t,e,i,r,s,l){const d=e.triggerName,p=e.element,_=[],b=new Set,D=new Set,I=e.timelines.map(U=>{const Q=U.element;b.add(Q);const le=Q[dl];if(le&&le.removedBeforeQueried)return new OC(U.duration,U.delay);const Ye=Q!==p,et=function wK(n){const t=[];return $H(n,t),t}((i.get(Q)||fK).map(bn=>bn.getRealPlayer())).filter(bn=>!!bn.element&&bn.element===Q),rt=s.get(Q),Xe=l.get(Q),Ot=_H(0,this._normalizer,0,U.keyframes,rt,Xe),Lt=this._buildPlayer(U,Ot,et);if(U.subTimeline&&r&&D.add(Q),Ye){const bn=new w1(t,d,Q);bn.setRealPlayer(Lt),_.push(bn)}return Lt});_.forEach(U=>{Ca(this.playersByQueriedElement,U.element,[]).push(U),U.onDone(()=>function _K(n,t,e){let i;if(n instanceof Map){if(i=n.get(t),i){if(i.length){const r=i.indexOf(e);i.splice(r,1)}0==i.length&&n.delete(t)}}else if(i=n[t],i){if(i.length){const r=i.indexOf(e);i.splice(r,1)}0==i.length&&delete n[t]}return i}(this.playersByQueriedElement,U.element,U))}),b.forEach(U=>hl(U,MH));const P=yf(I);return P.onDestroy(()=>{b.forEach(U=>Jv(U,MH)),Jc(p,e.toStyles)}),D.forEach(U=>{Ca(r,U,[]).push(P)}),P}_buildPlayer(t,e,i){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,i):new OC(t.duration,t.delay)}}class w1{constructor(t,e,i){this.namespaceId=t,this.triggerName=e,this.element=i,this._player=new OC,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(i=>JP(t,e,void 0,i))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){Ca(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function hT(n){return n&&1===n.nodeType}function jH(n,t){const e=n.style.display;return n.style.display=null!=t?t:"none",e}function GH(n,t,e,i,r){const s=[];e.forEach(p=>s.push(jH(p)));const l=[];i.forEach((p,_)=>{const b={};p.forEach(D=>{const I=b[D]=t.computeStyle(_,D,r);(!I||0==I.length)&&(_[dl]=pK,l.push(_))}),n.set(_,b)});let d=0;return e.forEach(p=>jH(p,s[d++])),l}function zH(n,t){const e=new Map;if(n.forEach(d=>e.set(d,[])),0==t.length)return e;const r=new Set(t),s=new Map;function l(d){if(!d)return 1;let p=s.get(d);if(p)return p;const _=d.parentNode;return p=e.has(_)?_:r.has(_)?1:l(_),s.set(d,p),p}return t.forEach(d=>{const p=l(d);1!==p&&e.get(p).push(d)}),e}function hl(n,t){var e;null===(e=n.classList)||void 0===e||e.add(t)}function Jv(n,t){var e;null===(e=n.classList)||void 0===e||e.remove(t)}function bK(n,t,e){yf(e).onDone(()=>n.processLeaveNode(t))}function $H(n,t){for(let e=0;e<n.length;e++){const i=n[e];i instanceof mH?$H(i.players,t):t.push(i)}}function qH(n,t,e){const i=e.get(n);if(!i)return!1;let r=t.get(n);return r?i.forEach(s=>r.add(s)):t.set(n,i),e.delete(n),!0}class fT{constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new gK(t,e,i),this._timelineEngine=new lK(t,e,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(t,e,i,r,s){const l=t+"-"+r;let d=this._triggerCache[l];if(!d){const p=[],b=d1(this._driver,s,p,[]);if(p.length)throw function cZ(n,t){return new c.vHH(3404,yn)}();d=function rK(n,t,e){return new sK(n,t,e)}(r,b,this._normalizer),this._triggerCache[l]=d}this._transitionEngine.registerTrigger(e,r,d)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,i,r){this._transitionEngine.insertNode(t,e,i,r)}onRemove(t,e,i,r){this._transitionEngine.removeNode(t,e,r||!1,i)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,i,r){if("@"==i.charAt(0)){const[s,l]=vH(i);this._timelineEngine.command(s,e,l,r)}else this._transitionEngine.trigger(t,e,i,r)}listen(t,e,i,r,s){if("@"==i.charAt(0)){const[l,d]=vH(i);return this._timelineEngine.listen(l,e,d,s)}return this._transitionEngine.listen(t,e,i,r,s)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let DK=(()=>{class n{constructor(e,i,r){this._element=e,this._startStyles=i,this._endStyles=r,this._state=0;let s=n.initialStylesByElement.get(e);s||n.initialStylesByElement.set(e,s={}),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Jc(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Jc(this._element,this._initialStyles),this._endStyles&&(Jc(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Ym(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Ym(this._element,this._endStyles),this._endStyles=null),Jc(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function C1(n){let t=null;const e=Object.keys(n);for(let i=0;i<e.length;i++){const r=e[i];xK(r)&&(t=t||{},t[r]=n[r])}return t}function xK(n){return"display"===n||"position"===n}class WH{constructor(t,e,i,r){this.element=t,this.keyframes=e,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,i){return t.animate(e,i)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};if(this.hasStarted()){const e=this._finalKeyframe;Object.keys(e).forEach(i=>{"offset"!=i&&(t[i]=this._finished?e[i]:RH(this.element,i))})}this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class SK{validateStyleProperty(t){return CH(t)}matchesElement(t,e){return!1}containsElement(t,e){return EH(t,e)}getParentElement(t){return r1(t)}query(t,e,i){return DH(t,e,i)}computeStyle(t,e,i){return window.getComputedStyle(t)[e]}animate(t,e,i,r,s,l=[]){const p={duration:i,delay:r,fill:0==r?"both":"forwards"};s&&(p.easing=s);const _={},b=l.filter(I=>I instanceof WH);(function AZ(n,t){return 0===n||0===t})(i,r)&&b.forEach(I=>{let P=I.currentSnapshot;Object.keys(P).forEach(U=>_[U]=P[U])}),e=function kZ(n,t,e){const i=Object.keys(e);if(i.length&&t.length){let s=t[0],l=[];if(i.forEach(d=>{s.hasOwnProperty(d)||l.push(d),s[d]=e[d]}),l.length)for(var r=1;r<t.length;r++){let d=t[r];l.forEach(function(p){d[p]=RH(n,p)})}}return t}(t,e=e.map(I=>bf(I,!1)),_);const D=function EK(n,t){let e=null,i=null;return Array.isArray(t)&&t.length?(e=C1(t[0]),t.length>1&&(i=C1(t[t.length-1]))):t&&(e=C1(t)),e||i?new DK(n,e,i):null}(t,e);return new WH(t,e,p,D)}}let MK=(()=>{class n extends hH{constructor(e,i){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(i.body,{id:"0",encapsulation:c.ifc.None,styles:[],data:{animation:[]}})}build(e){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(e)?fH(e):e;return YH(this._renderer,null,i,"register",[r]),new TK(i,this._renderer)}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(c.FYo),c.LFG(oe))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class TK extends class HY{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new IK(this._id,t,e||{},this._renderer)}}class IK{constructor(t,e,i,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return YH(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){var t,e;return null!==(e=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==e?e:0}}function YH(n,t,e,i,r){return n.setProperty(t,`@@${e}:${i}`,r)}const ZH="@.disabled";let AK=(()=>{class n{constructor(e,i,r){this.delegate=e,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(s,l)=>{const d=null==l?void 0:l.parentNode(s);d&&l.removeChild(d,s)}}createRenderer(e,i){const s=this.delegate.createRenderer(e,i);if(!(e&&i&&i.data&&i.data.animation)){let b=this._rendererCache.get(s);return b||(b=new KH("",s,this.engine),this._rendererCache.set(s,b)),b}const l=i.id,d=i.id+"-"+this._currentId;this._currentId++,this.engine.register(d,e);const p=b=>{Array.isArray(b)?b.forEach(p):this.engine.registerTrigger(l,d,e,b.name,b)};return i.data.animation.forEach(p),new kK(this,d,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,i,r){e>=0&&e<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[l,d]=s;l(d)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(c.FYo),c.LFG(fT),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class KH{constructor(t,e,i){this.namespaceId=t,this.delegate=e,this.engine=i,this.destroyNode=this.delegate.destroyNode?r=>e.destroyNode(r):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,i,r=!0){this.delegate.insertBefore(t,e,i),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,i){this.engine.onRemove(this.namespaceId,e,this.delegate,i)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,i,r){this.delegate.setAttribute(t,e,i,r)}removeAttribute(t,e,i){this.delegate.removeAttribute(t,e,i)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,i,r){this.delegate.setStyle(t,e,i,r)}removeStyle(t,e,i){this.delegate.removeStyle(t,e,i)}setProperty(t,e,i){"@"==e.charAt(0)&&e==ZH?this.disableAnimations(t,!!i):this.delegate.setProperty(t,e,i)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,i){return this.delegate.listen(t,e,i)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class kK extends KH{constructor(t,e,i,r){super(e,i,r),this.factory=t,this.namespaceId=e}setProperty(t,e,i){"@"==e.charAt(0)?"."==e.charAt(1)&&e==ZH?this.disableAnimations(t,i=void 0===i||!!i):this.engine.process(this.namespaceId,t,e.substr(1),i):this.delegate.setProperty(t,e,i)}listen(t,e,i){if("@"==e.charAt(0)){const r=function RK(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(t);let s=e.substr(1),l="";return"@"!=s.charAt(0)&&([s,l]=function OK(n){const t=n.indexOf(".");return[n.substring(0,t),n.substr(t+1)]}(s)),this.engine.listen(this.namespaceId,r,s,l,d=>{this.factory.scheduleListenerCallback(d._data||-1,i,d)})}return this.delegate.listen(t,e,i)}}let PK=(()=>{class n extends fT{constructor(e,i,r){super(e.body,i,r)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(oe),c.LFG(s1),c.LFG(g1))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const fl=new c.OlP("AnimationModuleType"),QH=[{provide:hH,useClass:MK},{provide:g1,useFactory:function NK(){return new JZ}},{provide:fT,useClass:PK},{provide:c.FYo,useFactory:function FK(n,t,e){return new AK(n,t,e)},deps:[Kn,fT,c.R0b]}],XH=[{provide:s1,useFactory:()=>new SK},{provide:fl,useValue:"BrowserAnimations"},...QH],LK=[{provide:s1,useClass:xH},{provide:fl,useValue:"NoopAnimations"},...QH];let BK=(()=>{class n{static withConfig(e){return{ngModule:n,providers:e.disableAnimations?LK:XH}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:XH,imports:[hc]}),n})();const UK=new c.OlP("mat-sanity-checks",{providedIn:"root",factory:function VK(){return!0}});let Tt=(()=>{class n{constructor(e,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!WP()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(dH),c.LFG(UK,8),c.LFG(oe))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Wv],Wv]}),n})();function FC(n){return class extends n{constructor(...t){super(...t),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=_n(t)}}}function ey(n,t){return class extends n{constructor(...e){super(...e),this.defaultColor=t,this.color=t}get color(){return this._color}set color(e){const i=e||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}}}function Km(n){return class extends n{constructor(...t){super(...t),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=_n(t)}}}function HK(n){return class extends n{constructor(...t){super(...t),this.stateChanges=new Et.x,this.errorState=!1}updateErrorState(){const t=this.errorState,s=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);s!==t&&(this.errorState=s,this.stateChanges.next())}}}const jK=new c.OlP("MAT_DATE_LOCALE",{providedIn:"root",factory:function GK(){return(0,c.f3M)(c.soG)}});class eu{constructor(){this._localeChanges=new Et.x,this.localeChanges=this._localeChanges}getValidDateOrNull(t){return this.isDateInstance(t)&&this.isValid(t)?t:null}deserialize(t){return null==t||this.isDateInstance(t)&&this.isValid(t)?t:this.invalid()}setLocale(t){this.locale=t,this._localeChanges.next()}compareDate(t,e){return this.getYear(t)-this.getYear(e)||this.getMonth(t)-this.getMonth(e)||this.getDate(t)-this.getDate(e)}sameDate(t,e){if(t&&e){let i=this.isValid(t),r=this.isValid(e);return i&&r?!this.compareDate(t,e):i==r}return t==e}clampDate(t,e,i){return e&&this.compareDate(t,e)<0?e:i&&this.compareDate(t,i)>0?i:t}}const x1=new c.OlP("mat-date-formats"),zK=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|(?:(?:\+|-)\d{2}:\d{2}))?)?$/;function S1(n,t){const e=Array(n);for(let i=0;i<n;i++)e[i]=t(i);return e}let $K=(()=>{class n extends eu{constructor(e,i){super(),this.useUtcForDisplay=!1,super.setLocale(e)}getYear(e){return e.getFullYear()}getMonth(e){return e.getMonth()}getDate(e){return e.getDate()}getDayOfWeek(e){return e.getDay()}getMonthNames(e){const i=new Intl.DateTimeFormat(this.locale,{month:e,timeZone:"utc"});return S1(12,r=>this._format(i,new Date(2017,r,1)))}getDateNames(){const e=new Intl.DateTimeFormat(this.locale,{day:"numeric",timeZone:"utc"});return S1(31,i=>this._format(e,new Date(2017,0,i+1)))}getDayOfWeekNames(e){const i=new Intl.DateTimeFormat(this.locale,{weekday:e,timeZone:"utc"});return S1(7,r=>this._format(i,new Date(2017,0,r+1)))}getYearName(e){const i=new Intl.DateTimeFormat(this.locale,{year:"numeric",timeZone:"utc"});return this._format(i,e)}getFirstDayOfWeek(){return 0}getNumDaysInMonth(e){return this.getDate(this._createDateWithOverflow(this.getYear(e),this.getMonth(e)+1,0))}clone(e){return new Date(e.getTime())}createDate(e,i,r){let s=this._createDateWithOverflow(e,i,r);return s.getMonth(),s}today(){return new Date}parse(e){return"number"==typeof e?new Date(e):e?new Date(Date.parse(e)):null}format(e,i){if(!this.isValid(e))throw Error("NativeDateAdapter: Cannot format invalid date.");const r=new Intl.DateTimeFormat(this.locale,Object.assign(Object.assign({},i),{timeZone:"utc"}));return this._format(r,e)}addCalendarYears(e,i){return this.addCalendarMonths(e,12*i)}addCalendarMonths(e,i){let r=this._createDateWithOverflow(this.getYear(e),this.getMonth(e)+i,this.getDate(e));return this.getMonth(r)!=((this.getMonth(e)+i)%12+12)%12&&(r=this._createDateWithOverflow(this.getYear(r),this.getMonth(r),0)),r}addCalendarDays(e,i){return this._createDateWithOverflow(this.getYear(e),this.getMonth(e),this.getDate(e)+i)}toIso8601(e){return[e.getUTCFullYear(),this._2digit(e.getUTCMonth()+1),this._2digit(e.getUTCDate())].join("-")}deserialize(e){if("string"==typeof e){if(!e)return null;if(zK.test(e)){let i=new Date(e);if(this.isValid(i))return i}}return super.deserialize(e)}isDateInstance(e){return e instanceof Date}isValid(e){return!isNaN(e.getTime())}invalid(){return new Date(NaN)}_createDateWithOverflow(e,i,r){const s=new Date;return s.setFullYear(e,i,r),s.setHours(0,0,0,0),s}_2digit(e){return("00"+e).slice(-2)}_format(e,i){const r=new Date;return r.setUTCFullYear(i.getFullYear(),i.getMonth(),i.getDate()),r.setUTCHours(i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()),e.format(r)}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(jK,8),c.LFG(Us))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const qK={parse:{dateInput:null},display:{dateInput:{year:"numeric",month:"numeric",day:"numeric"},monthYearLabel:{year:"numeric",month:"short"},dateA11yLabel:{year:"numeric",month:"long",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"long"}}};let WK=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[{provide:eu,useClass:$K}]}),n})(),ej=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[{provide:x1,useValue:qK}],imports:[[WK]]}),n})(),M1=(()=>{class n{isErrorState(e,i){return!!(e&&e.invalid&&(e.touched||i&&i.submitted))}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),mT=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Tt],Tt]}),n})();class KK{constructor(t,e,i){this._renderer=t,this.element=e,this.config=i,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const tj={enterDuration:225,exitDuration:150},T1=_f({passive:!0}),nj=["mousedown","touchstart"],ij=["mouseup","mouseleave","touchend","touchcancel"];class XK{constructor(t,e,i,r){this._target=t,this._ngZone=e,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=pd(i))}fadeInRipple(t,e,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=Object.assign(Object.assign({},tj),i.animation);i.centered&&(t=r.left+r.width/2,e=r.top+r.height/2);const l=i.radius||function e7(n,t,e){const i=Math.max(Math.abs(n-e.left),Math.abs(n-e.right)),r=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(i*i+r*r)}(t,e,r),d=t-r.left,p=e-r.top,_=s.enterDuration,b=document.createElement("div");b.classList.add("mat-ripple-element"),b.style.left=d-l+"px",b.style.top=p-l+"px",b.style.height=2*l+"px",b.style.width=2*l+"px",null!=i.color&&(b.style.backgroundColor=i.color),b.style.transitionDuration=`${_}ms`,this._containerElement.appendChild(b),function JK(n){window.getComputedStyle(n).getPropertyValue("opacity")}(b),b.style.transform="scale(1)";const D=new KK(this,b,i);return D.state=0,this._activeRipples.add(D),i.persistent||(this._mostRecentTransientRipple=D),this._runTimeoutOutsideZone(()=>{const I=D===this._mostRecentTransientRipple;D.state=1,!i.persistent&&(!I||!this._isPointerDown)&&D.fadeOut()},_),D}fadeOutRipple(t){const e=this._activeRipples.delete(t);if(t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!e)return;const i=t.element,r=Object.assign(Object.assign({},tj),t.config.animation);i.style.transitionDuration=`${r.exitDuration}ms`,i.style.opacity="0",t.state=2,this._runTimeoutOutsideZone(()=>{t.state=3,i.remove()},r.exitDuration)}fadeOutAll(){this._activeRipples.forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){const e=pd(t);!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,this._registerEvents(nj))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(ij),this._pointerUpEventsRegistered=!0)}_onMousedown(t){const e=oH(t),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!e&&!i&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!aH(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;for(let i=0;i<e.length;i++)this.fadeInRipple(e[i].clientX,e[i].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_runTimeoutOutsideZone(t,e=0){this._ngZone.runOutsideAngular(()=>setTimeout(t,e))}_registerEvents(t){this._ngZone.runOutsideAngular(()=>{t.forEach(e=>{this._triggerElement.addEventListener(e,this,T1)})})}_removeTriggerEvents(){this._triggerElement&&(nj.forEach(t=>{this._triggerElement.removeEventListener(t,this,T1)}),this._pointerUpEventsRegistered&&ij.forEach(t=>{this._triggerElement.removeEventListener(t,this,T1)}))}}const t7=new c.OlP("mat-ripple-global-options");let wf=(()=>{class n{constructor(e,i,r,s,l){this._elementRef=e,this._animationMode=l,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new XK(this,i,e,r)}get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,i=0,r){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,i,Object.assign(Object.assign({},this.rippleConfig),r)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),e))}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(c.SBq),c.Y36(c.R0b),c.Y36(Us),c.Y36(t7,8),c.Y36(fl,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(e,i){2&e&&c.ekj("mat-ripple-unbounded",i.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),tu=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Tt],Tt]}),n})(),I1=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Tt]]}),n})(),rj=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[tu,Zn,Tt,I1]]}),n})();const r7=["connectionContainer"],s7=["inputContainer"],o7=["label"];function a7(n,t){1&n&&(c.ynx(0),c.TgZ(1,"div",14),c._UZ(2,"div",15)(3,"div",16)(4,"div",17),c.qZA(),c.TgZ(5,"div",18),c._UZ(6,"div",15)(7,"div",16)(8,"div",17),c.qZA(),c.BQk())}function l7(n,t){if(1&n){const e=c.EpF();c.TgZ(0,"div",19),c.NdJ("cdkObserveContent",function(){return c.CHM(e),c.oxw().updateOutlineGap()}),c.Hsn(1,1),c.qZA()}if(2&n){const e=c.oxw();c.Q6J("cdkObserveContentDisabled","outline"!=e.appearance)}}function c7(n,t){if(1&n&&(c.ynx(0),c.Hsn(1,2),c.TgZ(2,"span"),c._uU(3),c.qZA(),c.BQk()),2&n){const e=c.oxw(2);c.xp6(3),c.Oqu(e._control.placeholder)}}function u7(n,t){1&n&&c.Hsn(0,3,["*ngSwitchCase","true"])}function d7(n,t){1&n&&(c.TgZ(0,"span",23),c._uU(1," *"),c.qZA())}function h7(n,t){if(1&n){const e=c.EpF();c.TgZ(0,"label",20,21),c.NdJ("cdkObserveContent",function(){return c.CHM(e),c.oxw().updateOutlineGap()}),c.YNc(2,c7,4,1,"ng-container",12),c.YNc(3,u7,1,0,"ng-content",12),c.YNc(4,d7,2,0,"span",22),c.qZA()}if(2&n){const e=c.oxw();c.ekj("mat-empty",e._control.empty&&!e._shouldAlwaysFloat())("mat-form-field-empty",e._control.empty&&!e._shouldAlwaysFloat())("mat-accent","accent"==e.color)("mat-warn","warn"==e.color),c.Q6J("cdkObserveContentDisabled","outline"!=e.appearance)("id",e._labelId)("ngSwitch",e._hasLabel()),c.uIk("for",e._control.id)("aria-owns",e._control.id),c.xp6(2),c.Q6J("ngSwitchCase",!1),c.xp6(1),c.Q6J("ngSwitchCase",!0),c.xp6(1),c.Q6J("ngIf",!e.hideRequiredMarker&&e._control.required&&!e._control.disabled)}}function f7(n,t){1&n&&(c.TgZ(0,"div",24),c.Hsn(1,4),c.qZA())}function p7(n,t){if(1&n&&(c.TgZ(0,"div",25),c._UZ(1,"span",26),c.qZA()),2&n){const e=c.oxw();c.xp6(1),c.ekj("mat-accent","accent"==e.color)("mat-warn","warn"==e.color)}}function m7(n,t){if(1&n&&(c.TgZ(0,"div"),c.Hsn(1,5),c.qZA()),2&n){const e=c.oxw();c.Q6J("@transitionMessages",e._subscriptAnimationState)}}function g7(n,t){if(1&n&&(c.TgZ(0,"div",30),c._uU(1),c.qZA()),2&n){const e=c.oxw(2);c.Q6J("id",e._hintLabelId),c.xp6(1),c.Oqu(e.hintLabel)}}function _7(n,t){if(1&n&&(c.TgZ(0,"div",27),c.YNc(1,g7,2,2,"div",28),c.Hsn(2,6),c._UZ(3,"div",29),c.Hsn(4,7),c.qZA()),2&n){const e=c.oxw();c.Q6J("@transitionMessages",e._subscriptAnimationState),c.xp6(1),c.Q6J("ngIf",e.hintLabel)}}const v7=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],y7=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],b7=new c.OlP("MatError"),w7={transitionMessages:ir("transitionMessages",[on("enter",pt({opacity:1,transform:"translateY(0%)"})),vn("void => enter",[pt({opacity:0,transform:"translateY(-5px)"}),Rn("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let A1=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=c.lG2({type:n}),n})();const C7=new c.OlP("MatHint");let Qm=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=c.lG2({type:n,selectors:[["mat-label"]]}),n})(),E7=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=c.lG2({type:n,selectors:[["mat-placeholder"]]}),n})();const D7=new c.OlP("MatPrefix"),x7=new c.OlP("MatSuffix");let sj=0;const M7=ey(class{constructor(n){this._elementRef=n}},"primary"),T7=new c.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),k1=new c.OlP("MatFormField");let VC=(()=>{class n extends M7{constructor(e,i,r,s,l,d,p){super(e),this._changeDetectorRef=i,this._dir=r,this._defaults=s,this._platform=l,this._ngZone=d,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new Et.x,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+sj++,this._labelId="mat-form-field-label-"+sj++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==p,this.appearance=s&&s.appearance?s.appearance:"legacy",this._hideRequiredMarker=!(!s||null==s.hideRequiredMarker)&&s.hideRequiredMarker}get appearance(){return this._appearance}set appearance(e){const i=this._appearance;this._appearance=e||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&i!==e&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(e){this._hideRequiredMarker=_n(e)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(e){this._hintLabel=e,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(e){e!==this._floatLabel&&(this._floatLabel=e||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(e){this._explicitFormFieldControl=e}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const e=this._control;e.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${e.controlType}`),e.stateChanges.pipe(Xr(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),e.ngControl&&e.ngControl.valueChanges&&e.ngControl.valueChanges.pipe(cs(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(cs(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,Xs.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(Xr(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(Xr(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(cs(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(e){const i=this._control?this._control.ngControl:null;return i&&i[e]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,la(this._label.nativeElement,"transitionend").pipe((0,Hn.q)(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let e=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&e.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const i=this._hintChildren?this._hintChildren.find(s=>"start"===s.align):null,r=this._hintChildren?this._hintChildren.find(s=>"end"===s.align):null;i?e.push(i.id):this._hintLabel&&e.push(this._hintLabelId),r&&e.push(r.id)}else this._errorChildren&&e.push(...this._errorChildren.map(i=>i.id));this._control.setDescribedByIds(e)}}_validateControlChild(){}updateOutlineGap(){const e=this._label?this._label.nativeElement:null,i=this._connectionContainerRef.nativeElement,r=".mat-form-field-outline-start",s=".mat-form-field-outline-gap";if("outline"!==this.appearance||!this._platform.isBrowser)return;if(!e||!e.children.length||!e.textContent.trim()){const b=i.querySelectorAll(`${r}, ${s}`);for(let D=0;D<b.length;D++)b[D].style.width="0";return}if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let l=0,d=0;const p=i.querySelectorAll(r),_=i.querySelectorAll(s);if(this._label&&this._label.nativeElement.children.length){const b=i.getBoundingClientRect();if(0===b.width&&0===b.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const D=this._getStartEnd(b),I=e.children,P=this._getStartEnd(I[0].getBoundingClientRect());let U=0;for(let Q=0;Q<I.length;Q++)U+=I[Q].offsetWidth;l=Math.abs(P-D)-5,d=U>0?.75*U+10:0}for(let b=0;b<p.length;b++)p[b].style.width=`${l}px`;for(let b=0;b<_.length;b++)_[b].style.width=`${d}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(e){return this._dir&&"rtl"===this._dir.value?e.right:e.left}_isAttachedToDOM(){const e=this._elementRef.nativeElement;if(e.getRootNode){const i=e.getRootNode();return i&&i!==e}return document.documentElement.contains(e)}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(c.SBq),c.Y36(c.sBO),c.Y36(jm,8),c.Y36(T7,8),c.Y36(Us),c.Y36(c.R0b),c.Y36(fl,8))},n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-form-field"]],contentQueries:function(e,i,r){if(1&e&&(c.Suo(r,A1,5),c.Suo(r,A1,7),c.Suo(r,Qm,5),c.Suo(r,Qm,7),c.Suo(r,E7,5),c.Suo(r,b7,5),c.Suo(r,C7,5),c.Suo(r,D7,5),c.Suo(r,x7,5)),2&e){let s;c.iGM(s=c.CRH())&&(i._controlNonStatic=s.first),c.iGM(s=c.CRH())&&(i._controlStatic=s.first),c.iGM(s=c.CRH())&&(i._labelChildNonStatic=s.first),c.iGM(s=c.CRH())&&(i._labelChildStatic=s.first),c.iGM(s=c.CRH())&&(i._placeholderChild=s.first),c.iGM(s=c.CRH())&&(i._errorChildren=s),c.iGM(s=c.CRH())&&(i._hintChildren=s),c.iGM(s=c.CRH())&&(i._prefixChildren=s),c.iGM(s=c.CRH())&&(i._suffixChildren=s)}},viewQuery:function(e,i){if(1&e&&(c.Gf(r7,7),c.Gf(s7,5),c.Gf(o7,5)),2&e){let r;c.iGM(r=c.CRH())&&(i._connectionContainerRef=r.first),c.iGM(r=c.CRH())&&(i._inputContainerRef=r.first),c.iGM(r=c.CRH())&&(i._label=r.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(e,i){2&e&&c.ekj("mat-form-field-appearance-standard","standard"==i.appearance)("mat-form-field-appearance-fill","fill"==i.appearance)("mat-form-field-appearance-outline","outline"==i.appearance)("mat-form-field-appearance-legacy","legacy"==i.appearance)("mat-form-field-invalid",i._control.errorState)("mat-form-field-can-float",i._canLabelFloat())("mat-form-field-should-float",i._shouldLabelFloat())("mat-form-field-has-label",i._hasFloatingLabel())("mat-form-field-hide-placeholder",i._hideControlPlaceholder())("mat-form-field-disabled",i._control.disabled)("mat-form-field-autofilled",i._control.autofilled)("mat-focused",i._control.focused)("ng-untouched",i._shouldForward("untouched"))("ng-touched",i._shouldForward("touched"))("ng-pristine",i._shouldForward("pristine"))("ng-dirty",i._shouldForward("dirty"))("ng-valid",i._shouldForward("valid"))("ng-invalid",i._shouldForward("invalid"))("ng-pending",i._shouldForward("pending"))("_mat-animation-noopable",!i._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[c._Bn([{provide:k1,useExisting:n}]),c.qOj],ngContentSelectors:y7,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(e,i){1&e&&(c.F$t(v7),c.TgZ(0,"div",0)(1,"div",1,2),c.NdJ("click",function(s){return i._control.onContainerClick&&i._control.onContainerClick(s)}),c.YNc(3,a7,9,0,"ng-container",3),c.YNc(4,l7,2,1,"div",4),c.TgZ(5,"div",5,6),c.Hsn(7),c.TgZ(8,"span",7),c.YNc(9,h7,5,16,"label",8),c.qZA()(),c.YNc(10,f7,2,0,"div",9),c.qZA(),c.YNc(11,p7,2,4,"div",10),c.TgZ(12,"div",11),c.YNc(13,m7,2,1,"div",12),c.YNc(14,_7,5,2,"div",13),c.qZA()()),2&e&&(c.xp6(3),c.Q6J("ngIf","outline"==i.appearance),c.xp6(1),c.Q6J("ngIf",i._prefixChildren.length),c.xp6(5),c.Q6J("ngIf",i._hasFloatingLabel()),c.xp6(1),c.Q6J("ngIf",i._suffixChildren.length),c.xp6(1),c.Q6J("ngIf","outline"!=i.appearance),c.xp6(1),c.Q6J("ngSwitch",i._getDisplayedMessages()),c.xp6(1),c.Q6J("ngSwitchCase","error"),c.xp6(1),c.Q6J("ngSwitchCase","hint"))},directives:[Ni,GP,Lr,gr],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.cdk-high-contrast-active .mat-form-field-disabled .mat-form-field-label{color:GrayText}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-flex{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px;border-top-color:GrayText}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{color:GrayText}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[w7.transitionMessages]},changeDetection:0}),n})(),UC=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Zn,Tt,AC],Tt]}),n})();const aj=_f({passive:!0});let I7=(()=>{class n{constructor(e,i){this._platform=e,this._ngZone=i,this._monitoredElements=new Map}monitor(e){if(!this._platform.isBrowser)return ha.E;const i=pd(e),r=this._monitoredElements.get(i);if(r)return r.subject;const s=new Et.x,l="cdk-text-field-autofilled",d=p=>{"cdk-text-field-autofill-start"!==p.animationName||i.classList.contains(l)?"cdk-text-field-autofill-end"===p.animationName&&i.classList.contains(l)&&(i.classList.remove(l),this._ngZone.run(()=>s.next({target:p.target,isAutofilled:!1}))):(i.classList.add(l),this._ngZone.run(()=>s.next({target:p.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{i.addEventListener("animationstart",d,aj),i.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(i,{subject:s,unlisten:()=>{i.removeEventListener("animationstart",d,aj)}}),s}stopMonitoring(e){const i=pd(e),r=this._monitoredElements.get(i);r&&(r.unlisten(),r.subject.complete(),i.classList.remove("cdk-text-field-autofill-monitored"),i.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(i))}ngOnDestroy(){this._monitoredElements.forEach((e,i)=>this.stopMonitoring(i))}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(Us),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),lj=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();const cj=new c.OlP("MAT_INPUT_VALUE_ACCESSOR"),A7=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let k7=0;const R7=HK(class{constructor(n,t,e,i){this._defaultErrorStateMatcher=n,this._parentForm=t,this._parentFormGroup=e,this.ngControl=i}});let HC=(()=>{class n extends R7{constructor(e,i,r,s,l,d,p,_,b,D){super(d,s,l,r),this._elementRef=e,this._platform=i,this._autofillMonitor=_,this._formField=D,this._uid="mat-input-"+k7++,this.focused=!1,this.stateChanges=new Et.x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(U=>YU().has(U)),this._iOSKeyupListener=U=>{const Q=U.target;!Q.value&&0===Q.selectionStart&&0===Q.selectionEnd&&(Q.setSelectionRange(1,1),Q.setSelectionRange(0,0))};const I=this._elementRef.nativeElement,P=I.nodeName.toLowerCase();this._inputValueAccessor=p||I,this._previousNativeValue=this.value,this.id=this.id,i.IOS&&b.runOutsideAngular(()=>{e.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===P,this._isTextarea="textarea"===P,this._isInFormField=!!D,this._isNativeSelect&&(this.controlType=I.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(e){this._disabled=_n(e),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(e){this._id=e||this._uid}get required(){var e,i,r,s;return null!==(s=null!==(e=this._required)&&void 0!==e?e:null===(r=null===(i=this.ngControl)||void 0===i?void 0:i.control)||void 0===r?void 0:r.hasValidator(G2.required))&&void 0!==s&&s}set required(e){this._required=_n(e)}get type(){return this._type}set type(e){this._type=e||"text",this._validateType(),!this._isTextarea&&YU().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(e){e!==this.value&&(this._inputValueAccessor.value=e,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(e){this._readonly=_n(e)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(e=>{this.autofilled=e.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(e){this._elementRef.nativeElement.focus(e)}_focusChanged(e){e!==this.focused&&(this.focused=e,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){var e,i;const r=(null===(i=null===(e=this._formField)||void 0===e?void 0:e._hideControlPlaceholder)||void 0===i?void 0:i.call(e))?null:this.placeholder;if(r!==this._previousPlaceholder){const s=this._elementRef.nativeElement;this._previousPlaceholder=r,r?s.setAttribute("placeholder",r):s.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const e=this._elementRef.nativeElement.value;this._previousNativeValue!==e&&(this._previousNativeValue=e,this.stateChanges.next())}_validateType(){A7.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let e=this._elementRef.nativeElement.validity;return e&&e.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const e=this._elementRef.nativeElement,i=e.options[0];return this.focused||e.multiple||!this.empty||!!(e.selectedIndex>-1&&i&&i.label)}return this.focused||!this.empty}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const e=this._elementRef.nativeElement;return this._isNativeSelect&&(e.multiple||e.size>1)}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(c.SBq),c.Y36(Us),c.Y36(fd,10),c.Y36(GM,8),c.Y36(zM,8),c.Y36(M1),c.Y36(cj,10),c.Y36(I7),c.Y36(c.R0b),c.Y36(k1,8))},n.\u0275dir=c.lG2({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:12,hostBindings:function(e,i){1&e&&c.NdJ("focus",function(){return i._focusChanged(!0)})("blur",function(){return i._focusChanged(!1)})("input",function(){return i._onInput()}),2&e&&(c.Ikx("disabled",i.disabled)("required",i.required),c.uIk("id",i.id)("data-placeholder",i.placeholder)("name",i.name||null)("readonly",i.readonly&&!i._isNativeSelect||null)("aria-invalid",i.empty&&i.required?null:i.errorState)("aria-required",i.required),c.ekj("mat-input-server",i._isServer)("mat-native-select-inline",i._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[c._Bn([{provide:A1,useExisting:n}]),c.qOj,c.TTD]}),n})(),uj=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[M1],imports:[[lj,UC,Tt],lj,UC]}),n})();const O7=["mat-button",""],P7=["*"],F7=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],L7=ey(FC(Km(class{constructor(n){this._elementRef=n}})));let ty=(()=>{class n extends L7{constructor(e,i,r){super(e),this._focusMonitor=i,this._animationMode=r,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const s of F7)this._hasHostAttributes(s)&&this._getHostElement().classList.add(s);e.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(e,i){e?this._focusMonitor.focusVia(this._getHostElement(),e,i):this._getHostElement().focus(i)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...e){return e.some(i=>this._getHostElement().hasAttribute(i))}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(c.SBq),c.Y36(vf),c.Y36(fl,8))},n.\u0275cmp=c.Xpm({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(e,i){if(1&e&&c.Gf(wf,5),2&e){let r;c.iGM(r=c.CRH())&&(i.ripple=r.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(e,i){2&e&&(c.uIk("disabled",i.disabled||null),c.ekj("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-button-disabled",i.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[c.qOj],attrs:O7,ngContentSelectors:P7,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(e,i){1&e&&(c.F$t(),c.TgZ(0,"span",0),c.Hsn(1),c.qZA(),c._UZ(2,"span",1)(3,"span",2)),2&e&&(c.xp6(2),c.ekj("mat-button-ripple-round",i.isRoundButton||i.isIconButton),c.Q6J("matRippleDisabled",i._isRippleDisabled())("matRippleCentered",i.isIconButton)("matRippleTrigger",i._getHostElement()))},directives:[wf],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),n})(),jC=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[tu,Tt],Tt]}),n})();function B7(n,t){if(1&n){const e=c.EpF();c.TgZ(0,"div",3)(1,"mat-form-field")(2,"mat-label"),c._uU(3,"Email"),c.qZA(),c.TgZ(4,"input",4),c.NdJ("ngModelChange",function(r){return c.CHM(e),c.oxw().email=r}),c.qZA()(),c._UZ(5,"br"),c.TgZ(6,"mat-form-field")(7,"mat-label"),c._uU(8,"Password"),c.qZA(),c.TgZ(9,"input",5),c.NdJ("ngModelChange",function(r){return c.CHM(e),c.oxw().password=r}),c.qZA()(),c._UZ(10,"br"),c.TgZ(11,"button",6),c.NdJ("click",function(){return c.CHM(e),c.oxw().signIn()}),c._uU(12,"Login"),c.qZA(),c._UZ(13,"br"),c.TgZ(14,"button",6),c.NdJ("click",function(){return c.CHM(e),c.oxw().showSignUp()}),c._uU(15,"Register"),c.qZA()()}if(2&n){const e=c.oxw();c.xp6(4),c.Q6J("ngModel",e.email),c.xp6(5),c.Q6J("ngModel",e.password)}}function V7(n,t){if(1&n){const e=c.EpF();c.TgZ(0,"div",7)(1,"mat-form-field")(2,"mat-label"),c._uU(3,"Email"),c.qZA(),c.TgZ(4,"input",4),c.NdJ("ngModelChange",function(r){return c.CHM(e),c.oxw().regEmail=r}),c.qZA()(),c._UZ(5,"br"),c.TgZ(6,"mat-form-field")(7,"mat-label"),c._uU(8,"Name"),c.qZA(),c.TgZ(9,"input",8),c.NdJ("ngModelChange",function(r){return c.CHM(e),c.oxw().name=r}),c.qZA()(),c._UZ(10,"br"),c.TgZ(11,"mat-form-field")(12,"mat-label"),c._uU(13,"Password"),c.qZA(),c.TgZ(14,"input",9),c.NdJ("ngModelChange",function(r){return c.CHM(e),c.oxw().regPassword=r}),c.qZA()(),c.TgZ(15,"mat-form-field")(16,"mat-label"),c._uU(17,"Confirm Password"),c.qZA(),c.TgZ(18,"input",10),c.NdJ("ngModelChange",function(r){return c.CHM(e),c.oxw().regPassword2=r}),c.qZA()(),c._UZ(19,"br"),c.TgZ(20,"button",6),c.NdJ("click",function(){return c.CHM(e),c.oxw().signUp()}),c._uU(21,"Submit"),c.qZA()()}if(2&n){const e=c.oxw();c.xp6(4),c.Q6J("ngModel",e.regEmail),c.xp6(5),c.Q6J("ngModel",e.name),c.xp6(5),c.Q6J("ngModel",e.regPassword),c.xp6(4),c.Q6J("ngModel",e.regPassword2)}}let U7=(()=>{class n{constructor(e,i){this.authService=e,this.firestore=i,this.email="",this.password="",this.showRegister=!1,this.regEmail="",this.regPassword="",this.regPassword2="",this.name=""}signIn(){this.authService.SignIn(this.email,this.password).then(e=>{console.log(e)})}signUp(){null!=this.name&&""!=this.name?null!=this.regEmail&&""!=this.regEmail?this.validateEmail(this.regEmail)?this.regPassword.length<3?alert("Password is too short. Retry with a longer one."):this.regPassword===this.regPassword2?(this.email=this.regEmail,this.password=this.regPassword,this.authService.SignUp(this.email,this.password,this.name).then(i=>{alert("User succesfully registered!"),this.showRegister=!1})):alert("Passwords do not match. Retry."):alert("Invalid email."):alert("You didn't enter an email."):alert("You didn't enter a valid name. Please retry.")}validateEmail(e){return!!/^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/.test(e)}showSignUp(){this.showRegister=!0}addCase(){let r={barcode:1234,userid:JSON.parse(localStorage.getItem("user")).uid,beercount:30,beerstaken:0};return new Promise((s,l)=>{this.firestore.collection("cases").add(r).then(d=>{console.log(d)},d=>l(d))})}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(xC),c.Y36(ud))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-login"]],decls:7,vars:2,consts:[[1,"header"],["class","loginCont",4,"ngIf"],["class","registerCont",4,"ngIf"],[1,"loginCont"],["type","text","matInput","","name","email",3,"ngModel","ngModelChange"],["type","password","matInput","","name","password",3,"ngModel","ngModelChange"],["mat-raised-button","",1,"loginBtn",3,"click"],[1,"registerCont"],["type","text","matInput","","name","name",3,"ngModel","ngModelChange"],["type","password","matInput","","name","regPassword",3,"ngModel","ngModelChange"],["type","password","matInput","","name","regPassword2",3,"ngModel","ngModelChange"]],template:function(e,i){1&e&&(c.TgZ(0,"div",0)(1,"h1"),c._uU(2,"Merchants"),c.qZA()(),c._UZ(3,"br")(4,"br"),c.YNc(5,B7,16,2,"div",1),c.YNc(6,V7,22,4,"div",2)),2&e&&(c.xp6(5),c.Q6J("ngIf",!i.showRegister),c.xp6(1),c.Q6J("ngIf",i.showRegister))},directives:[Ni,VC,Qm,HC,pf,zv,Um,ty],styles:["h1[_ngcontent-%COMP%]{text-align:center;font-family:Brush Script MT;font-size:3em;color:gold;margin-top:0!important;margin-bottom:0!important}.header[_ngcontent-%COMP%]{background-color:#006400;background-image:url(https://www.transparenttextures.com/patterns/binding-light.png)}.loginCont[_ngcontent-%COMP%]{width:90%;background-color:#8f8f8f;margin:auto;display:block;border-radius:4px;padding:5em 5px;background-image:url(https://www.transparenttextures.com/patterns/binding-light.png)}.registerCont[_ngcontent-%COMP%]{width:90%;background-color:#8f8f8f;margin:auto;display:block;border-radius:4px;padding:5em 5px;background-image:url(https://www.transparenttextures.com/patterns/binding-light.png)}.mat-form-field[_ngcontent-%COMP%]{display:block;margin:auto;width:60%}.loginBtn[_ngcontent-%COMP%]{color:gold;background-color:#006400;margin:auto;display:block}"]}),n})(),dj=[];dj=[{path:"",redirectTo:"/login",pathMatch:"full"},{path:"login",component:U7},{path:"dashboard",component:jP}];let H7=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[eb.forRoot(dj,{relativeLinkResolution:"legacy"})],eb]}),n})(),N1=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Tt],Tt]}),n})(),Ej=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Tt],Tt]}),n})(),Dj=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Tt],Tt]}),n})();var Mj=F(4408);const qC={schedule(n){let t=requestAnimationFrame,e=cancelAnimationFrame;const{delegate:i}=qC;i&&(t=i.requestAnimationFrame,e=i.cancelAnimationFrame);const r=t(s=>{e=void 0,n(s)});return new yr.w0(()=>null==e?void 0:e(r))},requestAnimationFrame(...n){const{delegate:t}=qC;return((null==t?void 0:t.requestAnimationFrame)||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:t}=qC;return((null==t?void 0:t.cancelAnimationFrame)||cancelAnimationFrame)(...n)},delegate:void 0};var Tj=F(7565);new class sQ extends Tj.v{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;t=t||i.shift();do{if(r=t.execute(t.state,t.delay))break}while((t=i[0])&&t.id===e&&i.shift());if(this._active=!1,r){for(;(t=i[0])&&t.id===e&&i.shift();)t.unsubscribe();throw r}}}(class rQ extends Mj.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,i=0){return null!==i&&i>0?super.requestAsyncId(t,e,i):(t.actions.push(this),t._scheduled||(t._scheduled=qC.requestAnimationFrame(()=>t.flush(void 0))))}recycleAsyncId(t,e,i=0){if(null!=i&&i>0||null==i&&this.delay>0)return super.recycleAsyncId(t,e,i);t.actions.some(r=>r.id===e)||(qC.cancelAnimationFrame(e),t._scheduled=void 0)}});let B1,aQ=1;const yT={};function Ij(n){return n in yT&&(delete yT[n],!0)}const lQ={setImmediate(n){const t=aQ++;return yT[t]=!0,B1||(B1=Promise.resolve()),B1.then(()=>Ij(t)&&n()),t},clearImmediate(n){Ij(n)}},{setImmediate:cQ,clearImmediate:uQ}=lQ,bT={setImmediate(...n){const{delegate:t}=bT;return((null==t?void 0:t.setImmediate)||cQ)(...n)},clearImmediate(n){const{delegate:t}=bT;return((null==t?void 0:t.clearImmediate)||uQ)(n)},delegate:void 0};new class hQ extends Tj.v{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;t=t||i.shift();do{if(r=t.execute(t.state,t.delay))break}while((t=i[0])&&t.id===e&&i.shift());if(this._active=!1,r){for(;(t=i[0])&&t.id===e&&i.shift();)t.unsubscribe();throw r}}}(class dQ extends Mj.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,i=0){return null!==i&&i>0?super.requestAsyncId(t,e,i):(t.actions.push(this),t._scheduled||(t._scheduled=bT.setImmediate(t.flush.bind(t,void 0))))}recycleAsyncId(t,e,i=0){if(null!=i&&i>0||null==i&&this.delay>0)return super.recycleAsyncId(t,e,i);t.actions.some(r=>r.id===e)||(bT.clearImmediate(e),t._scheduled=void 0)}});function Aj(n,t=gs.z){return function pQ(n){return(0,Qn.e)((t,e)=>{let i=!1,r=null,s=null,l=!1;const d=()=>{if(null==s||s.unsubscribe(),s=null,i){i=!1;const _=r;r=null,e.next(_)}l&&e.complete()},p=()=>{s=null,l&&e.complete()};t.subscribe((0,Un.x)(e,_=>{i=!0,r=_,s||(0,Ba.Xf)(n(_)).subscribe(s=(0,Un.x)(e,d,p))},()=>{l=!0,(!i||!s||s.closed)&&e.complete()}))})}(()=>_g(n,t))}let gQ=(()=>{class n{constructor(e,i,r){this._ngZone=e,this._platform=i,this._scrolled=new Et.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const i=this.scrollContainers.get(e);i&&(i.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new Ui.y(i=>{this._globalSubscription||this._addGlobalListener();const r=e>0?this._scrolled.pipe(Aj(e)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):at()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(e,i){const r=this.getAncestorScrollContainers(e);return this.scrolled(i).pipe(Gn(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(e){const i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,e)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,i){let r=pd(i),s=e.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>la(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(c.R0b),c.LFG(Us),c.LFG(oe,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),wT=(()=>{class n{constructor(e,i,r){this._platform=e,this._change=new Et.x,this._changeListener=s=>{this._change.next(s)},this._document=r,i.runOutsideAngular(()=>{if(e.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+r,right:e.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,i=this._getWindow(),r=e.documentElement,s=r.getBoundingClientRect();return{top:-s.top||e.body.scrollTop||i.scrollY||r.scrollTop||0,left:-s.left||e.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(Aj(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(Us),c.LFG(c.R0b),c.LFG(oe,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Df=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})(),V1=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Wv,Df],Wv,Df]}),n})(),kQ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[V1]]}),n})(),Hj=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[kQ,Tt],Tt]}),n})();class K1{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class Q1 extends K1{constructor(t,e,i,r){super(),this.component=t,this.viewContainerRef=e,this.injector=i,this.componentFactoryResolver=r}}class jj extends K1{constructor(t,e,i){super(),this.templateRef=t,this.viewContainerRef=e,this.context=i}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class ZQ extends K1{constructor(t){super(),this.element=t instanceof c.SBq?t.nativeElement:t}}class X1{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof Q1?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof jj?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof ZQ?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class KQ extends X1{constructor(t,e,i,r,s){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=l=>{const d=l.element,p=this._document.createComment("dom-portal");d.parentNode.insertBefore(p,d),this.outletElement.appendChild(d),this._attachedPortal=l,super.setDisposeFn(()=>{p.parentNode&&p.parentNode.replaceChild(d,p)})},this._document=s}attachComponentPortal(t){const i=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let r;return t.viewContainerRef?(r=t.viewContainerRef.createComponent(i,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector),this.setDisposeFn(()=>r.destroy())):(r=i.create(t.injector||this._defaultInjector||c.zs3.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=t,r}attachTemplatePortal(t){let e=t.viewContainerRef,i=e.createEmbeddedView(t.templateRef,t.context);return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=e.indexOf(i);-1!==r&&e.remove(r)}),this._attachedPortal=t,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let Gj=(()=>{class n extends X1{constructor(e,i,r){super(),this._componentFactoryResolver=e,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new c.vpe,this.attachDomPortal=s=>{const l=s.element,d=this._document.createComment("dom-portal");s.setAttachedHost(this),l.parentNode.insertBefore(d,l),this._getRootNode().appendChild(l),this._attachedPortal=s,super.setDisposeFn(()=>{d.parentNode&&d.parentNode.replaceChild(l,d)})},this._document=r}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(e){e.setAttachedHost(this);const i=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,s=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),l=i.createComponent(s,i.length,e.injector||i.injector);return i!==this._viewContainerRef&&this._getRootNode().appendChild(l.hostView.rootNodes[0]),super.setDisposeFn(()=>l.destroy()),this._attachedPortal=e,this._attachedRef=l,this.attached.emit(l),l}attachTemplatePortal(e){e.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(c._Vd),c.Y36(c.s_b),c.Y36(oe))},n.\u0275dir=c.lG2({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[c.qOj]}),n})(),Jm=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();const zj=iY();class QQ{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=Pr(-this._previousScrollPosition.left),t.style.top=Pr(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,i=t.style,r=this._document.body.style,s=i.scrollBehavior||"",l=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),zj&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),zj&&(i.scrollBehavior=s,r.scrollBehavior=l)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,i=this._viewportRuler.getViewportSize();return e.scrollHeight>i.height||e.scrollWidth>i.width}}class XQ{constructor(t,e,i,r){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class $j{enable(){}disable(){}attach(){}}function J1(n,t){return t.some(e=>n.bottom<e.top||n.top>e.bottom||n.right<e.left||n.left>e.right)}function qj(n,t){return t.some(e=>n.top<e.top||n.bottom>e.bottom||n.left<e.left||n.right>e.right)}class JQ{constructor(t,e,i,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();J1(e,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let e9=(()=>{class n{constructor(e,i,r,s){this._scrollDispatcher=e,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new $j,this.close=l=>new XQ(this._scrollDispatcher,this._ngZone,this._viewportRuler,l),this.block=()=>new QQ(this._viewportRuler,this._document),this.reposition=l=>new JQ(this._scrollDispatcher,this._viewportRuler,this._ngZone,l),this._document=s}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(gQ),c.LFG(wT),c.LFG(c.R0b),c.LFG(oe))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Wj{constructor(t){if(this.scrollStrategy=new $j,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const i of e)void 0!==t[i]&&(this[i]=t[i])}}}class t9{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}class n9{constructor(t,e,i,r,s,l,d,p,_){this._portalOutlet=t,this._host=e,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=l,this._document=d,this._location=p,this._outsideClickDispatcher=_,this._backdropElement=null,this._backdropClick=new Et.x,this._attachments=new Et.x,this._detachments=new Et.x,this._locationChanges=yr.w0.EMPTY,this._backdropClickHandler=b=>this._backdropClick.next(b),this._backdropTransitionendHandler=b=>{this._disposeBackdrop(b.target)},this._keydownEvents=new Et.x,this._outsidePointerEvents=new Et.x,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,Hn.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){var t;const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),null===(t=this._host)||void 0===t||t.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=Object.assign(Object.assign({},this._config),t),this._updateElementSize()}setDirection(t){this._config=Object.assign(Object.assign({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=Pr(this._config.width),t.height=Pr(this._config.height),t.minWidth=Pr(this._config.minWidth),t.minHeight=Pr(this._config.minHeight),t.maxWidth=Pr(this._config.maxWidth),t.maxHeight=Pr(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const t=this._backdropElement;!t||(t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500)))}_toggleClasses(t,e,i){const r=zU(e||[]).filter(s=>!!s);r.length&&(i?t.classList.add(...r):t.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe(cs((0,Xs.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}let eN=(()=>{class n{constructor(e,i){this._platform=i,this._document=e}ngOnDestroy(){var e;null===(e=this._containerElement)||void 0===e||e.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||WP()){const r=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}const i=this._document.createElement("div");i.classList.add(e),WP()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(oe),c.LFG(Us))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Yj="cdk-overlay-connected-position-bounding-box",r9=/([A-Za-z%]+)$/;class s9{constructor(t,e,i,r,s){this._viewportRuler=e,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Et.x,this._resizeSubscription=yr.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}get positions(){return this._preferredPositions}attach(t){this._validatePositions(),t.hostElement.classList.add(Yj),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._originRect,e=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[];let l;for(let d of this._preferredPositions){let p=this._getOriginPoint(t,r,d),_=this._getOverlayPoint(p,e,d),b=this._getOverlayFit(_,e,i,d);if(b.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(d,p);this._canFitWithFlexibleDimensions(b,_,i)?s.push({position:d,origin:p,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(p,d)}):(!l||l.overlayFit.visibleArea<b.visibleArea)&&(l={overlayFit:b,overlayPoint:_,originPoint:p,position:d,overlayRect:e})}if(s.length){let d=null,p=-1;for(const _ of s){const b=_.boundingBoxRect.width*_.boundingBoxRect.height*(_.position.weight||1);b>p&&(p=b,d=_)}return this._isPushed=!1,void this._applyPosition(d.position,d.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(l.position,l.originPoint);this._applyPosition(l.position,l.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&eg(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Yj),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,i){let r,s;if("center"==i.originX)r=t.left+t.width/2;else{const l=this._isRtl()?t.right:t.left,d=this._isRtl()?t.left:t.right;r="start"==i.originX?l:d}return e.left<0&&(r-=e.left),s="center"==i.originY?t.top+t.height/2:"top"==i.originY?t.top:t.bottom,e.top<0&&(s-=e.top),{x:r,y:s}}_getOverlayPoint(t,e,i){let r,s;return r="center"==i.overlayX?-e.width/2:"start"===i.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,s="center"==i.overlayY?-e.height/2:"top"==i.overlayY?0:-e.height,{x:t.x+r,y:t.y+s}}_getOverlayFit(t,e,i,r){const s=Kj(e);let{x:l,y:d}=t,p=this._getOffset(r,"x"),_=this._getOffset(r,"y");p&&(l+=p),_&&(d+=_);let I=0-d,P=d+s.height-i.height,U=this._subtractOverflows(s.width,0-l,l+s.width-i.width),Q=this._subtractOverflows(s.height,I,P),le=U*Q;return{visibleArea:le,isCompletelyWithinViewport:s.width*s.height===le,fitsInViewportVertically:Q===s.height,fitsInViewportHorizontally:U==s.width}}_canFitWithFlexibleDimensions(t,e,i){if(this._hasFlexibleDimensions){const r=i.bottom-e.y,s=i.right-e.x,l=Zj(this._overlayRef.getConfig().minHeight),d=Zj(this._overlayRef.getConfig().minWidth),_=t.fitsInViewportHorizontally||null!=d&&d<=s;return(t.fitsInViewportVertically||null!=l&&l<=r)&&_}return!1}_pushOverlayOnScreen(t,e,i){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const r=Kj(e),s=this._viewportRect,l=Math.max(t.x+r.width-s.width,0),d=Math.max(t.y+r.height-s.height,0),p=Math.max(s.top-i.top-t.y,0),_=Math.max(s.left-i.left-t.x,0);let b=0,D=0;return b=r.width<=s.width?_||-l:t.x<this._viewportMargin?s.left-i.left-t.x:0,D=r.height<=s.height?p||-d:t.y<this._viewportMargin?s.top-i.top-t.y:0,this._previousPushAmount={x:b,y:D},{x:t.x+b,y:t.y+D}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new t9(t,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=t.overlayY;i="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let s=0;s<e.length;s++)e[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(t,e){const i=this._viewportRect,r=this._isRtl();let s,l,d,b,D,I;if("top"===e.overlayY)l=t.y,s=i.height-l+this._viewportMargin;else if("bottom"===e.overlayY)d=i.height-t.y+2*this._viewportMargin,s=i.height-d+this._viewportMargin;else{const P=Math.min(i.bottom-t.y+i.top,t.y),U=this._lastBoundingBoxSize.height;s=2*P,l=t.y-P,s>U&&!this._isInitialRender&&!this._growAfterOpen&&(l=t.y-U/2)}if("end"===e.overlayX&&!r||"start"===e.overlayX&&r)I=i.width-t.x+this._viewportMargin,b=t.x-this._viewportMargin;else if("start"===e.overlayX&&!r||"end"===e.overlayX&&r)D=t.x,b=i.right-t.x;else{const P=Math.min(i.right-t.x+i.left,t.x),U=this._lastBoundingBoxSize.width;b=2*P,D=t.x-P,b>U&&!this._isInitialRender&&!this._growAfterOpen&&(D=t.x-U/2)}return{top:l,left:D,bottom:d,right:I,width:b,height:s}}_setBoundingBoxStyles(t,e){const i=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,l=this._overlayRef.getConfig().maxWidth;r.height=Pr(i.height),r.top=Pr(i.top),r.bottom=Pr(i.bottom),r.width=Pr(i.width),r.left=Pr(i.left),r.right=Pr(i.right),r.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",r.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=Pr(s)),l&&(r.maxWidth=Pr(l))}this._lastBoundingBoxSize=i,eg(this._boundingBox.style,r)}_resetBoundingBoxStyles(){eg(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){eg(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,l=this._overlayRef.getConfig();if(r){const b=this._viewportRuler.getViewportScrollPosition();eg(i,this._getExactOverlayY(e,t,b)),eg(i,this._getExactOverlayX(e,t,b))}else i.position="static";let d="",p=this._getOffset(e,"x"),_=this._getOffset(e,"y");p&&(d+=`translateX(${p}px) `),_&&(d+=`translateY(${_}px)`),i.transform=d.trim(),l.maxHeight&&(r?i.maxHeight=Pr(l.maxHeight):s&&(i.maxHeight="")),l.maxWidth&&(r?i.maxWidth=Pr(l.maxWidth):s&&(i.maxWidth="")),eg(this._pane.style,i)}_getExactOverlayY(t,e,i){let r={top:"",bottom:""},s=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),"bottom"===t.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=Pr(s.y),r}_getExactOverlayX(t,e,i){let l,r={left:"",right:""},s=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),l=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===l?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=Pr(s.x),r}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:qj(t,i),isOriginOutsideView:J1(t,i),isOverlayClipped:qj(e,i),isOverlayOutsideView:J1(e,i)}}_subtractOverflows(t,...e){return e.reduce((i,r)=>i-Math.max(r,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+t-this._viewportMargin,bottom:i.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?null==t.offsetX?this._offsetX:t.offsetX:null==t.offsetY?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&zU(t).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof c.SBq)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,i=t.height||0;return{top:t.y,bottom:t.y+i,left:t.x,right:t.x+e,height:i,width:e}}}function eg(n,t){for(let e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function Zj(n){if("number"!=typeof n&&null!=n){const[t,e]=n.split(r9);return e&&"px"!==e?null:parseFloat(t)}return n||null}function Kj(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const Qj="cdk-global-overlay-wrapper";class o9{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(Qj),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._rightOffset="",this._leftOffset=t,this._justifyContent="flex-start",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._leftOffset="",this._rightOffset=t,this._justifyContent="flex-end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._justifyContent="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:l,maxHeight:d}=i,p=!("100%"!==r&&"100vw"!==r||l&&"100%"!==l&&"100vw"!==l),_=!("100%"!==s&&"100vh"!==s||d&&"100%"!==d&&"100vh"!==d);t.position=this._cssPosition,t.marginLeft=p?"0":this._leftOffset,t.marginTop=_?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=this._rightOffset,p?e.justifyContent="flex-start":"center"===this._justifyContent?e.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?e.justifyContent="flex-end":"flex-end"===this._justifyContent&&(e.justifyContent="flex-start"):e.justifyContent=this._justifyContent,e.alignItems=_?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,i=e.style;e.classList.remove(Qj),i.justifyContent=i.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let a9=(()=>{class n{constructor(e,i,r,s){this._viewportRuler=e,this._document=i,this._platform=r,this._overlayContainer=s}global(){return new o9}flexibleConnectedTo(e){return new s9(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(wT),c.LFG(oe),c.LFG(Us),c.LFG(eN))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Xj=(()=>{class n{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const i=this._attachedOverlays.indexOf(e);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(oe))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),l9=(()=>{class n extends Xj{constructor(e,i){super(e),this._ngZone=i,this._keydownListener=r=>{const s=this._attachedOverlays;for(let l=s.length-1;l>-1;l--)if(s[l]._keydownEvents.observers.length>0){const d=s[l]._keydownEvents;this._ngZone?this._ngZone.run(()=>d.next(r)):d.next(r);break}}}add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(oe),c.LFG(c.R0b,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),c9=(()=>{class n extends Xj{constructor(e,i,r){super(e),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=zm(s)},this._clickListener=s=>{const l=zm(s),d="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:l;this._pointerDownEventTarget=null;const p=this._attachedOverlays.slice();for(let _=p.length-1;_>-1;_--){const b=p[_];if(b._outsidePointerEvents.observers.length<1||!b.hasAttached())continue;if(b.overlayElement.contains(l)||b.overlayElement.contains(d))break;const D=b._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>D.next(s)):D.next(s)}}}add(e){if(super.add(e),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(oe),c.LFG(Us),c.LFG(c.R0b,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),u9=0,xf=(()=>{class n{constructor(e,i,r,s,l,d,p,_,b,D,I){this.scrollStrategies=e,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=l,this._injector=d,this._ngZone=p,this._document=_,this._directionality=b,this._location=D,this._outsideClickDispatcher=I}create(e){const i=this._createHostElement(),r=this._createPaneElement(i),s=this._createPortalOutlet(r),l=new Wj(e);return l.direction=l.direction||this._directionality.value,new n9(s,i,r,l,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(e){const i=this._document.createElement("div");return i.id="cdk-overlay-"+u9++,i.classList.add("cdk-overlay-pane"),e.appendChild(i),i}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(c.z2F)),new KQ(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(e9),c.LFG(eN),c.LFG(c._Vd),c.LFG(a9),c.LFG(l9),c.LFG(c.zs3),c.LFG(c.R0b),c.LFG(oe),c.LFG(jm),c.LFG(Oe),c.LFG(c9))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const f9={provide:new c.OlP("cdk-connected-overlay-scroll-strategy"),deps:[xf],useFactory:function h9(n){return()=>n.scrollStrategies.reposition()}};let sy=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[xf,f9],imports:[[Wv,Jm,V1],V1]}),n})();const v9={provide:new c.OlP("mat-select-scroll-strategy"),deps:[xf],useFactory:function _9(n){return()=>n.scrollStrategies.reposition()}};let tN=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[v9],imports:[[Zn,sy,rj,Tt],Df,UC,rj,Tt]}),n})();const C9={provide:new c.OlP("mat-tooltip-scroll-strategy"),deps:[xf],useFactory:function w9(n){return()=>n.scrollStrategies.reposition({scrollThrottle:20})}};let nN=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[C9],imports:[[KP,Zn,sy,Tt],Tt,Df]}),n})(),iN=(()=>{class n{constructor(){this.changes=new Et.x,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(e,i,r)=>{if(0==r||0==i)return`0 of ${r}`;const s=e*i;return`${s+1} \u2013 ${s<(r=Math.max(r,0))?Math.min(s+i,r):s+i} of ${r}`}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const T9={provide:iN,deps:[[new c.FiY,new c.tp0,iN]],useFactory:function M9(n){return n||new iN}};let eG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[T9],imports:[[Zn,jC,tN,nN,Tt]]}),n})(),rN=(()=>{class n{constructor(){this.changes=new Et.x}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const A9={provide:rN,deps:[[new c.FiY,new c.tp0,rN]],useFactory:function I9(n){return n||new rN}};let tG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[A9],imports:[[Zn,Tt]]}),n})(),nG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Zn,Tt,Df],Df,Tt]}),n})(),F9=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})(),iG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[F9,Tt],Tt]}),n})();function z9(n,t){}class cN{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const $9={dialogContainer:ir("dialogContainer",[on("void, exit",pt({opacity:0,transform:"scale(0.7)"})),on("enter",pt({transform:"none"})),vn("* => enter",ZM([Rn("150ms cubic-bezier(0, 0, 0.2, 1)",pt({transform:"none",opacity:1})),Qv("@*",Kv(),{optional:!0})])),vn("* => void, * => exit",ZM([Rn("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",pt({opacity:0})),Qv("@*",Kv(),{optional:!0})]))])};let q9=(()=>{class n extends X1{constructor(e,i,r,s,l,d,p,_){super(),this._elementRef=e,this._focusTrapFactory=i,this._changeDetectorRef=r,this._config=l,this._interactivityChecker=d,this._ngZone=p,this._focusMonitor=_,this._animationStateChanged=new c.vpe,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=b=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(b)),this._ariaLabelledBy=l.ariaLabelledBy||null,this._document=s}_initializeWithAttachedContent(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=qP())}attachComponentPortal(e){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(e)}attachTemplatePortal(e){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(e)}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(e,i){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{e.removeEventListener("blur",r),e.removeEventListener("mousedown",r),e.removeAttribute("tabindex")};e.addEventListener("blur",r),e.addEventListener("mousedown",r)})),e.focus(i)}_focusByCssSelector(e,i){let r=this._elementRef.nativeElement.querySelector(e);r&&this._forceFocus(r,i)}_trapFocus(){const e=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||e.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(i=>{i||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const e=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&e&&"function"==typeof e.focus){const i=qP(),r=this._elementRef.nativeElement;(!i||i===this._document.body||i===r||r.contains(i))&&(this._focusMonitor?(this._focusMonitor.focusVia(e,this._closeInteractionType),this._closeInteractionType=null):e.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const e=this._elementRef.nativeElement,i=qP();return e===i||e.contains(i)}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(c.SBq),c.Y36(NY),c.Y36(c.sBO),c.Y36(oe,8),c.Y36(cN),c.Y36(iH),c.Y36(c.R0b),c.Y36(vf))},n.\u0275dir=c.lG2({type:n,viewQuery:function(e,i){if(1&e&&c.Gf(Gj,7),2&e){let r;c.iGM(r=c.CRH())&&(i._portalOutlet=r.first)}},features:[c.qOj]}),n})(),W9=(()=>{class n extends q9{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:e,totalTime:i}){"enter"===e?(this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:i})):"exit"===e&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:i}))}_onAnimationStart({toState:e,totalTime:i}){"enter"===e?this._animationStateChanged.next({state:"opening",totalTime:i}):("exit"===e||"void"===e)&&this._animationStateChanged.next({state:"closing",totalTime:i})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}_initializeWithAttachedContent(){super._initializeWithAttachedContent(),this._config.delayFocusTrap||this._trapFocus()}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=c.n5z(n)))(i||n)}}(),n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(e,i){1&e&&c.WFA("@dialogContainer.start",function(s){return i._onAnimationStart(s)})("@dialogContainer.done",function(s){return i._onAnimationDone(s)}),2&e&&(c.Ikx("id",i._id),c.uIk("role",i._config.role)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledBy)("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null),c.d8E("@dialogContainer",i._state))},features:[c.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(e,i){1&e&&c.YNc(0,z9,0,0,"ng-template",0)},directives:[Gj],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[$9.dialogContainer]}}),n})(),Y9=0;class Z9{constructor(t,e,i="mat-dialog-"+Y9++){this._overlayRef=t,this._containerInstance=e,this.id=i,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new Et.x,this._afterClosed=new Et.x,this._beforeClosed=new Et.x,this._state=0,e._id=i,e._animationStateChanged.pipe(Gn(r=>"opened"===r.state),(0,Hn.q)(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),e._animationStateChanged.pipe(Gn(r=>"closed"===r.state),(0,Hn.q)(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),t.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),t.keydownEvents().pipe(Gn(r=>27===r.keyCode&&!this.disableClose&&!function RC(n,...t){return t.length?t.some(e=>n[e]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}(r))).subscribe(r=>{r.preventDefault(),rG(this,"keyboard")}),t.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():rG(this,"mouse")})}close(t){this._result=t,this._containerInstance._animationStateChanged.pipe(Gn(e=>"closing"===e.state),(0,Hn.q)(1)).subscribe(e=>{this._beforeClosed.next(t),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(t){let e=this._getPositionStrategy();return t&&(t.left||t.right)?t.left?e.left(t.left):e.right(t.right):e.centerHorizontally(),t&&(t.top||t.bottom)?t.top?e.top(t.top):e.bottom(t.bottom):e.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(t="",e=""){return this._overlayRef.updateSize({width:t,height:e}),this._overlayRef.updatePosition(),this}addPanelClass(t){return this._overlayRef.addPanelClass(t),this}removePanelClass(t){return this._overlayRef.removePanelClass(t),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function rG(n,t,e){return void 0!==n._containerInstance&&(n._containerInstance._closeInteractionType=t),n.close(e)}const K9=new c.OlP("MatDialogData"),Q9=new c.OlP("mat-dialog-default-options"),sG=new c.OlP("mat-dialog-scroll-strategy"),J9={provide:sG,deps:[xf],useFactory:function X9(n){return()=>n.scrollStrategies.block()}};let eX=(()=>{class n{constructor(e,i,r,s,l,d,p,_,b,D){this._overlay=e,this._injector=i,this._defaultOptions=r,this._parentDialog=s,this._overlayContainer=l,this._dialogRefConstructor=p,this._dialogContainerType=_,this._dialogDataToken=b,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Et.x,this._afterOpenedAtThisLevel=new Et.x,this._ariaHiddenElements=new Map,this.afterAllClosed=ri(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Xr(void 0))),this._scrollStrategy=d}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(e,i){i=function nX(n,t){return Object.assign(Object.assign({},t),n)}(i,this._defaultOptions||new cN),i.id&&this.getDialogById(i.id);const r=this._createOverlay(i),s=this._attachDialogContainer(r,i),l=this._attachDialogContent(e,s,r,i);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(l),l.afterClosed().subscribe(()=>this._removeOpenDialog(l)),this.afterOpened.next(l),s._initializeWithAttachedContent(),l}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(i=>i.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_createOverlay(e){const i=this._getOverlayConfig(e);return this._overlay.create(i)}_getOverlayConfig(e){const i=new Wj({positionStrategy:this._overlay.position().global(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(i.backdropClass=e.backdropClass),i}_attachDialogContainer(e,i){const s=c.zs3.create({parent:i&&i.viewContainerRef&&i.viewContainerRef.injector||this._injector,providers:[{provide:cN,useValue:i}]}),l=new Q1(this._dialogContainerType,i.viewContainerRef,s,i.componentFactoryResolver);return e.attach(l).instance}_attachDialogContent(e,i,r,s){const l=new this._dialogRefConstructor(r,i,s.id);if(e instanceof c.Rgc)i.attachTemplatePortal(new jj(e,null,{$implicit:s.data,dialogRef:l}));else{const d=this._createInjector(s,l,i),p=i.attachComponentPortal(new Q1(e,s.viewContainerRef,d,s.componentFactoryResolver));l.componentInstance=p.instance}return l.updateSize(s.width,s.height).updatePosition(s.position),l}_createInjector(e,i,r){const s=e&&e.viewContainerRef&&e.viewContainerRef.injector,l=[{provide:this._dialogContainerType,useValue:r},{provide:this._dialogDataToken,useValue:e.data},{provide:this._dialogRefConstructor,useValue:i}];return e.direction&&(!s||!s.get(jm,null,c.XFs.Optional))&&l.push({provide:jm,useValue:{value:e.direction,change:at()}}),c.zs3.create({parent:s||this._injector,providers:l})}_removeOpenDialog(e){const i=this.openDialogs.indexOf(e);i>-1&&(this.openDialogs.splice(i,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((r,s)=>{r?s.setAttribute("aria-hidden",r):s.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const e=this._overlayContainer.getContainerElement();if(e.parentElement){const i=e.parentElement.children;for(let r=i.length-1;r>-1;r--){let s=i[r];s!==e&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_closeDialogs(e){let i=e.length;for(;i--;)e[i].close()}}return n.\u0275fac=function(e){c.$Z()},n.\u0275dir=c.lG2({type:n}),n})(),tX=(()=>{class n extends eX{constructor(e,i,r,s,l,d,p,_){super(e,i,s,d,p,l,Z9,W9,K9,_)}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(xf),c.LFG(c.zs3),c.LFG(Oe,8),c.LFG(Q9,8),c.LFG(sG),c.LFG(n,12),c.LFG(eN),c.LFG(fl,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),oG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[tX,J9],imports:[[sy,Jm,Tt],Tt]}),n})(),cG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Zn,Tt],Tt]}),n})(),hG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})(),fG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[tu,Tt,AC,hG],Tt,hG]}),n})(),DX=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})(),mG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Zn,Tt,DX,Jm]]}),n})(),xX=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Wv]]}),n})(),dN=(()=>{class n{constructor(){this.changes=new Et.x,this.optionalLabel="Optional",this.completedLabel="Completed",this.editableLabel="Editable"}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const FX={provide:dN,deps:[[new c.FiY,new c.tp0,dN]],useFactory:function NX(n){return n||new dN}};let _G=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[FX,M1],imports:[[Tt,Zn,Jm,jC,xX,N1,tu],Tt]}),n})(),yG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[mT,Tt],mT,Tt]}),n})(),bG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Zn,Tt,Jm,tu,AC,KP],Tt]}),n})(),XX=(()=>{class n{constructor(){this.changes=new Et.x,this.calendarLabel="Calendar",this.openCalendarLabel="Open calendar",this.closeCalendarLabel="Close calendar",this.prevMonthLabel="Previous month",this.nextMonthLabel="Next month",this.prevYearLabel="Previous year",this.nextYearLabel="Next year",this.prevMultiYearLabel="Previous 24 years",this.nextMultiYearLabel="Next 24 years",this.switchToMonthViewLabel="Choose date",this.switchToMultiYearViewLabel="Choose month and year"}formatYearRange(e,i){return`${e} \u2013 ${i}`}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const tJ={provide:new c.OlP("mat-datepicker-scroll-strategy"),deps:[xf],useFactory:function eJ(n){return()=>n.scrollStrategies.reposition()}};let DG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[XX,tJ],imports:[[Zn,jC,sy,KP,Jm,Tt],Df]}),n})(),TG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[tu,Tt],Tt]}),n})();function vJ(n,t){if(1&n&&(c.O4$(),c._UZ(0,"circle",4)),2&n){const e=c.oxw(),i=c.MAs(1);c.Udp("animation-name","mat-progress-spinner-stroke-rotate-"+e._spinnerAnimationLabel)("stroke-dashoffset",e._getStrokeDashOffset(),"px")("stroke-dasharray",e._getStrokeCircumference(),"px")("stroke-width",e._getCircleStrokeWidth(),"%")("transform-origin",e._getCircleTransformOrigin(i)),c.uIk("r",e._getCircleRadius())}}function yJ(n,t){if(1&n&&(c.O4$(),c._UZ(0,"circle",4)),2&n){const e=c.oxw(),i=c.MAs(1);c.Udp("stroke-dashoffset",e._getStrokeDashOffset(),"px")("stroke-dasharray",e._getStrokeCircumference(),"px")("stroke-width",e._getCircleStrokeWidth(),"%")("transform-origin",e._getCircleTransformOrigin(i)),c.uIk("r",e._getCircleRadius())}}const wJ=ey(class{constructor(n){this._elementRef=n}},"primary"),CJ=new c.OlP("mat-progress-spinner-default-options",{providedIn:"root",factory:function EJ(){return{diameter:100}}});class Mf extends wJ{constructor(t,e,i,r,s,l,d,p){super(t),this._document=i,this._diameter=100,this._value=0,this._resizeSubscription=yr.w0.EMPTY,this.mode="determinate";const _=Mf._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),_.has(i.head)||_.set(i.head,new Set([100])),this._noopAnimations="NoopAnimations"===r&&!!s&&!s._forceAnimations,"mat-spinner"===t.nativeElement.nodeName.toLowerCase()&&(this.mode="indeterminate"),s&&(s.diameter&&(this.diameter=s.diameter),s.strokeWidth&&(this.strokeWidth=s.strokeWidth)),e.isBrowser&&e.SAFARI&&d&&l&&p&&(this._resizeSubscription=d.change(150).subscribe(()=>{"indeterminate"===this.mode&&p.run(()=>l.markForCheck())}))}get diameter(){return this._diameter}set diameter(t){this._diameter=Xo(t),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(t){this._strokeWidth=Xo(t)}get value(){return"determinate"===this.mode?this._value:0}set value(t){this._value=Math.max(0,Math.min(100,Xo(t)))}ngOnInit(){const t=this._elementRef.nativeElement;this._styleRoot=ZU(t)||this._document.head,this._attachStyleNode(),t.classList.add("mat-progress-spinner-indeterminate-animation")}ngOnDestroy(){this._resizeSubscription.unsubscribe()}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const t=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${t} ${t}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_getCircleTransformOrigin(t){var e;const i=50*(null!==(e=t.currentScale)&&void 0!==e?e:1);return`${i}% ${i}%`}_attachStyleNode(){const t=this._styleRoot,e=this._diameter,i=Mf._diameters;let r=i.get(t);if(!r||!r.has(e)){const s=this._document.createElement("style");s.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),s.textContent=this._getAnimationText(),t.appendChild(s),r||(r=new Set,i.set(t,r)),r.add(e)}}_getAnimationText(){const t=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*t).replace(/END_VALUE/g,""+.2*t).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}Mf._diameters=new WeakMap,Mf.\u0275fac=function(t){return new(t||Mf)(c.Y36(c.SBq),c.Y36(Us),c.Y36(oe,8),c.Y36(fl,8),c.Y36(CJ),c.Y36(c.sBO),c.Y36(wT),c.Y36(c.R0b))},Mf.\u0275cmp=c.Xpm({type:Mf,selectors:[["mat-progress-spinner"],["mat-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner","mat-spinner"],hostVars:10,hostBindings:function(t,e){2&t&&(c.uIk("aria-valuemin","determinate"===e.mode?0:null)("aria-valuemax","determinate"===e.mode?100:null)("aria-valuenow","determinate"===e.mode?e.value:null)("mode",e.mode),c.Udp("width",e.diameter,"px")("height",e.diameter,"px"),c.ekj("_mat-animation-noopable",e._noopAnimations))},inputs:{color:"color",diameter:"diameter",strokeWidth:"strokeWidth",mode:"mode",value:"value"},exportAs:["matProgressSpinner"],features:[c.qOj],decls:4,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["svg",""],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(t,e){1&t&&(c.O4$(),c.TgZ(0,"svg",0,1),c.YNc(2,vJ,1,11,"circle",2),c.YNc(3,yJ,1,9,"circle",3),c.qZA()),2&t&&(c.Udp("width",e.diameter,"px")("height",e.diameter,"px"),c.Q6J("ngSwitch","indeterminate"===e.mode),c.uIk("viewBox",e._getViewBox()),c.xp6(2),c.Q6J("ngSwitchCase",!0),c.xp6(1),c.Q6J("ngSwitchCase",!1))},directives:[Lr,gr],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}\n"],encapsulation:2,changeDetection:0});let IG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Tt,Zn],Tt]}),n})(),xJ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Tt],Tt]}),n})(),kG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[mT,tu,Tt,I1,Zn],mT,Tt,I1,xJ]}),n})(),RG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})(),OG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[RG,tu,Tt,AC],RG,Tt]}),n})(),BG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Tt,tu],Tt]}),n})();const aee={provide:new c.OlP("mat-menu-scroll-strategy"),deps:[xf],useFactory:function oee(n){return()=>n.scrollStrategies.reposition()}};let UG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[aee],imports:[[Zn,Tt,tu,sy],Df,Tt]}),n})(),HG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[sy,Tt,Jm],Tt]}),n})();const lee=[uj,N1,UC,Ej,jC,Dj,Hj,eG,tG,nG,iG,oG,cG,fG,mG,_G,tN,yG,bG,DG,ej,TG,IG,kG,OG,BG,UG,nN,HG];let cee=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[lee],uj,N1,UC,Ej,jC,Dj,Hj,eG,tG,nG,iG,oG,cG,fG,mG,_G,tN,yG,bG,DG,ej,TG,IG,kG,OG,BG,UG,nN,HG]}),n})(),uee=(()=>{class n{constructor(e,i,r){this.parent=e,this.firestore=i,this.cdr=r,this.amount=1}ngOnInit(){}goBack(){this.showProps.showChalkBeer=!1,this.showProps.showMainMenu=!0}submit(){let e=this.showProps.card;e.availableBeers>=this.amount?(e.availableBeers=e.availableBeers-this.amount,e.totalDrank=e.totalDrank+this.amount,this.firestore.collection("cards").doc(e.cardid).update(e).then(i=>{alert("Beer has been chalked!"),this.goBack()})):alert("Shit bud - You don't have enough purchased beers to chalk this. Go back to the main menu and add some.")}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(jP),c.Y36(ud),c.Y36(c.sBO))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-chalk-beer-form"]],inputs:{showProps:"showProps"},decls:13,vars:1,consts:[[1,"chalkCont"],[1,"formCont"],["appearance","outline"],["type","number","matInput","","name","amount",3,"ngModel","ngModelChange"],["mat-raised-button","",3,"click"]],template:function(e,i){1&e&&(c.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"mat-label"),c._uU(4,"Amount of beers to chalk"),c.qZA(),c.TgZ(5,"input",3),c.NdJ("ngModelChange",function(s){return i.amount=s}),c.qZA()()(),c._UZ(6,"br"),c.TgZ(7,"button",4),c.NdJ("click",function(){return i.goBack()}),c._uU(8,"Back"),c.qZA(),c._UZ(9,"br")(10,"br"),c.TgZ(11,"button",4),c.NdJ("click",function(){return i.submit()}),c._uU(12,"Submit"),c.qZA()()),2&e&&(c.xp6(5),c.Q6J("ngModel",i.amount))},directives:[VC,Qm,qv,HC,pf,zv,Um,ty],styles:[".chalkCont[_ngcontent-%COMP%]{display:block;width:100%;height:100%;text-align:center;overflow-y:scroll}.formCont[_ngcontent-%COMP%]{width:90%;background-color:#8f8f8f;margin:auto;display:block;border-radius:4px;padding:5em 5px;background-image:url(https://www.transparenttextures.com/patterns/binding-light.png)}"]}),n})(),dee=(()=>{class n{constructor(e,i){this.firestore=e,this.authService=i,this.amount=8,this.serial=""}ngOnInit(){}goBack(){this.showProps.showPayBeer=!1,this.showProps.showMainMenu=!0}submit(){if(this.serial.length<10)return void alert("Serial numbers on Canadian Bills are 10 digits long. Re-enter a valid one.");if(this.amount<1)return void alert("You need to buy more than 1 beer Mr. Stupid!");const e={serial:this.serial,spent:!1,userid:this.authService.currentUser.uid};this.firestore.collection("bills").add(e).then(i=>{let r=this.showProps.card,s=!1;r.owing>0?(this.amount>r.owing?(r.availableBeers=r.availableBeers+(this.amount-r.owing),r.owing=r.owing-(this.amount-r.owing)):r.owing=r.owing-this.amount,s=!0):r.availableBeers=r.availableBeers+this.amount,this.firestore.collection("cards").doc(r.cardid).update(r).then(l=>{alert(s?"You have succesfully paid off "+this.amount+" beers.":"Your card has succesfully been updated with "+this.amount+" beers."),this.goBack()}),console.log("Added a bill.")},i=>console.log(i))}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(ud),c.Y36(xC))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-pay-form"]],inputs:{showProps:"showProps"},decls:22,vars:4,consts:[[1,"payCont"],[1,"formCont"],["appearance","outline"],["type","number","matInput","","name","amount",3,"ngModel","ngModelChange"],["type","text","matInput","","name","amount",3,"ngModel","ngModelChange"],[2,"color","gold"],["mat-raised-button","",3,"click"]],template:function(e,i){1&e&&(c.TgZ(0,"div",0)(1,"p"),c._uU(2),c.qZA(),c.TgZ(3,"div",1)(4,"mat-form-field",2)(5,"mat-label"),c._uU(6,"Amount of Beers to Buy"),c.qZA(),c.TgZ(7,"input",3),c.NdJ("ngModelChange",function(s){return i.amount=s}),c.qZA()(),c._UZ(8,"br"),c.TgZ(9,"mat-form-field",2)(10,"mat-label"),c._uU(11,"Bill Serial #(s)"),c.qZA(),c.TgZ(12,"input",4),c.NdJ("ngModelChange",function(s){return i.serial=s}),c.qZA(),c.TgZ(13,"small",5),c._uU(14,"If more than one bill, separate by commas."),c.qZA()()(),c._UZ(15,"br"),c.TgZ(16,"button",6),c.NdJ("click",function(){return i.goBack()}),c._uU(17,"Back"),c.qZA(),c._UZ(18,"br")(19,"br"),c.TgZ(20,"button",6),c.NdJ("click",function(){return i.submit()}),c._uU(21,"Submit"),c.qZA()()),2&e&&(c.xp6(2),c.AsE("",i.amount," beers costs $",2.5*i.amount,""),c.xp6(5),c.Q6J("ngModel",i.amount),c.xp6(5),c.Q6J("ngModel",i.serial))},directives:[VC,Qm,qv,HC,pf,zv,Um,ty],styles:[".payCont[_ngcontent-%COMP%]{display:block;width:100%;height:100%;text-align:center;overflow-y:scroll}.formCont[_ngcontent-%COMP%]{width:90%;background-color:#8f8f8f;margin:auto;display:block;border-radius:4px;padding:2em 5px;background-image:url(https://www.transparenttextures.com/patterns/binding-light.png)}p[_ngcontent-%COMP%]{text-align:center;font-family:Arial,Helvetica,sans-serif;margin-top:0!important;margin-bottom:0!important;color:#006400}"]}),n})(),hee=(()=>{class n{constructor(e){this.firestore=e,this.amount=8}ngOnInit(){}goBack(){this.showProps.showFinanceBeer=!1,this.showProps.showMainMenu=!0}submit(){if(null==this.amount||this.amount<1)return void alert("You need to add at least one beer to finance!");let e=this.showProps.card;e.availableBeers=e.availableBeers+this.amount,e.owing=this.amount,this.firestore.collection("cards").doc(e.cardid).update(e).then(i=>{alert(`Beer has been added. You ower $${2.5*this.amount} and this can be paid from the 'Pay for Beers' option on the main menu.`),this.goBack()})}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(ud))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-finance-form"]],inputs:{showProps:"showProps"},decls:15,vars:2,consts:[[1,"financeCont"],[1,"formCont"],["appearance","outline"],["type","number","matInput","","name","amount",3,"ngModel","ngModelChange"],[2,"color","gold"],["mat-raised-button","",3,"click"]],template:function(e,i){1&e&&(c.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"mat-label"),c._uU(4,"Amount of Beers to Owe"),c.qZA(),c.TgZ(5,"input",3),c.NdJ("ngModelChange",function(s){return i.amount=s}),c.qZA(),c.TgZ(6,"small",4),c._uU(7),c.qZA()()(),c._UZ(8,"br"),c.TgZ(9,"button",5),c.NdJ("click",function(){return i.goBack()}),c._uU(10,"Back"),c.qZA(),c._UZ(11,"br")(12,"br"),c.TgZ(13,"button",5),c.NdJ("click",function(){return i.submit()}),c._uU(14,"Submit"),c.qZA()()),2&e&&(c.xp6(5),c.Q6J("ngModel",i.amount),c.xp6(2),c.hij("Note: You aren't paying for these beers yet. You will owe $",2.5*i.amount,"."))},directives:[VC,Qm,qv,HC,pf,zv,Um,ty],styles:[".financeCont[_ngcontent-%COMP%]{display:block;width:100%;height:100%;text-align:center;overflow-y:scroll}.formCont[_ngcontent-%COMP%]{width:90%;background-color:#8f8f8f;margin:auto;display:block;border-radius:4px;padding:2em 5px;background-image:url(https://www.transparenttextures.com/patterns/binding-light.png)}"]}),n})(),fee=(()=>{class n{constructor(e,i,r){this.storage=e,this.authService=i,this.firestore=r,this.selectedFile=null,this.disableSubmit=!1,this.amount=0}ngOnInit(){}goBack(){this.showProps.showAddCase=!1,this.showProps.showMainMenu=!0}onFileSelected(e){this.selectedFile=e.target.files[0]}submit(){if(this.amount<6)return void alert("You can't add less than 6 beers buddy... Bump that number up.");if(null==this.serial||this.serial.toString().length<6)return void alert("This serial number seems like bullshit. Please enter a real one.");if(null==this.selectedFile)return void alert("You need to add a picture of the case with the serial number visible!");this.disableSubmit=!0;var e=Date.now();const r=this.storage.ref(`CaseImages/${this.authService.currentUser.uid}_${e}`);this.storage.upload(`CaseImages/${this.authService.currentUser.uid}_${e}`,this.selectedFile).snapshotChanges().pipe(M(()=>{this.downloadURL=r.getDownloadURL(),this.downloadURL.subscribe(l=>{l&&(this.fb=l);const d={serial:this.serial,beercount:this.amount,beerstaken:0,userid:this.authService.currentUser.uid};this.firestore.collection("cases").add(d).then(p=>{this.disableSubmit=!1,alert("Case has been succesfully added! Thanks for contributing! You're a beauty!"),this.goBack()},p=>console.log(p)),console.log(this.fb)})})).subscribe(l=>{l&&console.log(l)})}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(ND),c.Y36(xC),c.Y36(ud))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-add-case-form"]],inputs:{showProps:"showProps"},decls:27,vars:3,consts:[[1,"caseCont"],[1,"formCont"],["appearance","outline"],["type","number","matInput","","name","amount",3,"ngModel","ngModelChange"],["type","number","matInput","","name","serial",3,"ngModel","ngModelChange"],[2,"color","gold"],[2,"color","white"],["type","file","id","file","name","image","autocomplete","off",3,"change"],["userPhoto",""],["mat-raised-button","",3,"click"],["mat-raised-button","",3,"disabled","click"]],template:function(e,i){1&e&&(c.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"mat-label"),c._uU(4,"Amount of Beers in Case"),c.qZA(),c.TgZ(5,"input",3),c.NdJ("ngModelChange",function(s){return i.amount=s}),c.qZA()(),c._UZ(6,"br"),c.TgZ(7,"mat-form-field",2)(8,"mat-label"),c._uU(9,"Case Serial Number"),c.qZA(),c.TgZ(10,"input",4),c.NdJ("ngModelChange",function(s){return i.serial=s}),c.qZA(),c.TgZ(11,"small",5),c._uU(12,"Note: We can check to make sure the case photo and serial # you enter line up."),c.qZA()(),c._UZ(13,"br"),c.TgZ(14,"mat-label",6),c._uU(15,"Upload a photo of the case below. Make sure serial # is visible."),c.qZA(),c._UZ(16,"br")(17,"br"),c.TgZ(18,"input",7,8),c.NdJ("change",function(s){return i.onFileSelected(s)}),c.qZA()(),c._UZ(20,"br"),c.TgZ(21,"button",9),c.NdJ("click",function(){return i.goBack()}),c._uU(22,"Back"),c.qZA(),c._UZ(23,"br")(24,"br"),c.TgZ(25,"button",10),c.NdJ("click",function(){return i.submit()}),c._uU(26,"Submit"),c.qZA()()),2&e&&(c.xp6(5),c.Q6J("ngModel",i.amount),c.xp6(5),c.Q6J("ngModel",i.serial),c.xp6(15),c.Q6J("disabled",i.disableSubmit))},directives:[VC,Qm,qv,HC,pf,zv,Um,ty],styles:[".caseCont[_ngcontent-%COMP%]{display:block;width:100%;height:100%;text-align:center;overflow-y:scroll}.formCont[_ngcontent-%COMP%]{width:90%;background-color:#8f8f8f;margin:auto;display:block;border-radius:4px;padding:2em 2px 5em;background-image:url(https://www.transparenttextures.com/patterns/binding-light.png)}input[_ngcontent-%COMP%]{text-align:center;display:block;margin:auto}"]}),n})(),pee=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n,bootstrap:[_N]}),n.\u0275inj=c.cJS({providers:[xC],imports:[[hc,Ai.hO.initializeApp(wP_firebase),qI,M6,Tp,HW,j8,H7,BK,cee,wr.register("ngsw-worker.js",{enabled:true,registrationStrategy:"registerWhenStable:30000"})]]}),n})();c.B6R(jP,[Ni,bi,uee,dee,hee,fee,ty],[]),(0,c.G48)(),Fd().bootstrapModule(pee).catch(n=>console.error(n))},2011:(lt,De,F)=>{F.d(De,{hO:()=>Ke,xv:()=>we,Dh:()=>fe,GT:()=>be,cc:()=>Ne,on:()=>W,pX:()=>he});var c=F(5e3),G=F(127),N=F(5813);lt=F.hmd(lt);const de=["ngOnDestroy"],he=(Ae,Ze,We,Fe={})=>new Proxy(Ae,{get:(Oe,Se)=>We.runOutsideAngular(()=>{var Qe;if(Ae[Se])return(null===(Qe=null==Fe?void 0:Fe.spy)||void 0===Qe?void 0:Qe.get)&&Fe.spy.get(Se,Ae[Se]),Ae[Se];if(de.indexOf(Se)>-1)return()=>{};const re=Ze.toPromise().then(_e=>{const Me=_e&&_e[Se];return"function"==typeof Me?Me.bind(_e):Me&&Me.then?Me.then(J=>We.run(()=>J)):We.run(()=>Me)});return new Proxy(()=>{},{get:(_e,Me)=>re[Me],apply:(_e,Me,J)=>re.then(se=>{var ue;const Ce=se&&se(...J);return(null===(ue=null==Fe?void 0:Fe.spy)||void 0===ue?void 0:ue.apply)&&Fe.spy.apply(Se,J,Ce),Ce})})})}),be=(Ae,Ze)=>{Ze.forEach(We=>{Object.getOwnPropertyNames(We.prototype||We).forEach(Fe=>{Object.defineProperty(Ae.prototype,Fe,Object.getOwnPropertyDescriptor(We.prototype||We,Fe))})})};class oe{constructor(Ze){return Ze}}const fe=new c.OlP("angularfire2.app.options"),we=new c.OlP("angularfire2.app.name");function W(Ae,Ze,We){const Oe="object"==typeof We&&We||{};Oe.name=Oe.name||"string"==typeof We&&We||"[DEFAULT]";const Qe=G.Z.apps.filter(re=>re&&re.name===Oe.name)[0]||Ze.runOutsideAngular(()=>G.Z.initializeApp(Ae,Oe));try{JSON.stringify(Ae)!==JSON.stringify(Qe.options)&&$("error",`${Qe.name} Firebase App already initialized with different options${lt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(re){}return new oe(Qe)}const $=(Ae,...Ze)=>{(0,c.X6Q)()&&"undefined"!=typeof console&&console[Ae](...Ze)},ae={provide:oe,useFactory:W,deps:[fe,c.R0b,[new c.FiY,we]]};let Ke=(()=>{class Ae{constructor(We){G.Z.registerVersion("angularfire",N.q4.full,"core"),G.Z.registerVersion("angularfire",N.q4.full,"app-compat"),G.Z.registerVersion("angular",c.q4F.full,We.toString())}static initializeApp(We,Fe){return{ngModule:Ae,providers:[{provide:fe,useValue:We},{provide:we,useValue:Fe}]}}}return Ae.\u0275fac=function(We){return new(We||Ae)(c.LFG(c.Lbi))},Ae.\u0275mod=c.oAB({type:Ae}),Ae.\u0275inj=c.cJS({providers:[ae]}),Ae})();function Ne(Ae,Ze,We,Fe,Oe){const[,Se,Qe]=globalThis.\u0275AngularfireInstanceCache.find(re=>re[0]===Ae)||[];if(Se)return function Ve(Ae,Ze){try{return Ae.toString()===Ze.toString()}catch(We){return Ae===Ze}}(Oe,Qe)||(ye("error",`${Ze} was already initialized on the ${We} Firebase App with different settings.${qe?" You may need to reload as Firebase is not HMR aware.":""}`),ye("warn",{is:Oe,was:Qe})),Se;{const re=Fe();return globalThis.\u0275AngularfireInstanceCache.push([Ae,re,Oe]),re}}const qe=!!lt.hot,ye=(Ae,...Ze)=>{(0,c.X6Q)()&&"undefined"!=typeof console&&console[Ae](...Ze)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(lt,De,F)=>{F.d(De,{q4:()=>Hi,iC:()=>ro,fc:()=>io,HU:()=>Xr,vb:()=>Hl,JM:()=>yg});var c=F(5e3),G=F(5867),N=F(5861),de=F(9681),he=F(2090),be=F(4859),oe=F(1877),fe=F(8766);const we="@firebase/installations",W="0.5.11",ae=`w:${W}`,Ke="FIS_v2",Ze=new he.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function We(S){return S instanceof he.ZR&&S.code.includes("request-failed")}function Fe({projectId:S}){return`https://firebaseinstallations.googleapis.com/v1/projects/${S}/installations`}function Oe(S){return{token:S.token,requestStatus:2,expiresIn:se(S.expiresIn),creationTime:Date.now()}}function Se(S,M){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,N.Z)(function*(S,M){const j=(yield M.json()).error;return Ze.create("request-failed",{requestName:S,serverCode:j.code,serverMessage:j.message,serverStatus:j.status})})).apply(this,arguments)}function re({apiKey:S}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":S})}function _e(S,{refreshToken:M}){const O=re(S);return O.append("Authorization",function ue(S){return`${Ke} ${S}`}(M)),O}function Me(S){return J.apply(this,arguments)}function J(){return(J=(0,N.Z)(function*(S){const M=yield S();return M.status>=500&&M.status<600?S():M})).apply(this,arguments)}function se(S){return Number(S.replace("s","000"))}function Ce(S,M){return me.apply(this,arguments)}function me(){return(me=(0,N.Z)(function*({appConfig:S,heartbeatServiceProvider:M},{fid:O}){const j=Fe(S),X=re(S),pe=M.getImmediate({optional:!0});if(pe){const Nt=yield pe.getHeartbeatsHeader();Nt&&X.append("x-firebase-client",Nt)}const je={method:"POST",headers:X,body:JSON.stringify({fid:O,authVersion:Ke,appId:S.appId,sdkVersion:ae})},Mt=yield Me(()=>fetch(j,je));if(Mt.ok){const Nt=yield Mt.json();return{fid:Nt.fid||O,registrationStatus:2,refreshToken:Nt.refreshToken,authToken:Oe(Nt.authToken)}}throw yield Se("Create Installation",Mt)})).apply(this,arguments)}function Ue(S){return new Promise(M=>{setTimeout(M,S)})}const an=/^[cdef][\w-]{21}$/;function tt(){try{const S=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(S),S[0]=112+S[0]%16;const O=function xn(S){return function Ct(S){return btoa(String.fromCharCode(...S)).replace(/\+/g,"-").replace(/\//g,"_")}(S).substr(0,22)}(S);return an.test(O)?O:""}catch(S){return""}}function Jn(S){return`${S.appName}!${S.appId}`}const Sn=new Map;function fn(S,M){const O=Jn(S);jn(O,M),function ds(S,M){const O=function qn(){return!rr&&"BroadcastChannel"in self&&(rr=new BroadcastChannel("[Firebase] FID Change"),rr.onmessage=S=>{jn(S.data.key,S.data.fid)}),rr}();O&&O.postMessage({key:S,fid:M}),function xs(){0===Sn.size&&rr&&(rr.close(),rr=null)}()}(O,M)}function jn(S,M){const O=Sn.get(S);if(O)for(const j of O)j(M)}let rr=null;const ei="firebase-installations-store";let Ss=null;function Dt(){return Ss||(Ss=(0,fe.X3)("firebase-installations-database",1,{upgrade:(S,M)=>{0===M&&S.createObjectStore(ei)}})),Ss}function fr(S,M){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,N.Z)(function*(S,M){const O=Jn(S),X=(yield Dt()).transaction(ei,"readwrite"),pe=X.objectStore(ei),Le=yield pe.get(O);return yield pe.put(M,O),yield X.done,(!Le||Le.fid!==M.fid)&&fn(S,M.fid),M})).apply(this,arguments)}function pn(S){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,N.Z)(function*(S){const M=Jn(S),j=(yield Dt()).transaction(ei,"readwrite");yield j.objectStore(ei).delete(M),yield j.done})).apply(this,arguments)}function Si(S,M){return pr.apply(this,arguments)}function pr(){return(pr=(0,N.Z)(function*(S,M){const O=Jn(S),X=(yield Dt()).transaction(ei,"readwrite"),pe=X.objectStore(ei),Le=yield pe.get(O),je=M(Le);return void 0===je?yield pe.delete(O):yield pe.put(je,O),yield X.done,je&&(!Le||Le.fid!==je.fid)&&fn(S,je.fid),je})).apply(this,arguments)}function Vn(S){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,N.Z)(function*(S){let M;const O=yield Si(S.appConfig,j=>{const X=Hs(j),pe=Xt(S,X);return M=pe.registrationPromise,pe.installationEntry});return""===O.fid?{installationEntry:yield M}:{installationEntry:O,registrationPromise:M}})).apply(this,arguments)}function Hs(S){return fs(S||{fid:tt(),registrationStatus:0})}function Xt(S,M){if(0===M.registrationStatus){if(!navigator.onLine)return{installationEntry:M,registrationPromise:Promise.reject(Ze.create("app-offline"))};const O={fid:M.fid,registrationStatus:1,registrationTime:Date.now()},j=function yt(S,M){return dt.apply(this,arguments)}(S,O);return{installationEntry:O,registrationPromise:j}}return 1===M.registrationStatus?{installationEntry:M,registrationPromise:Wr(S)}:{installationEntry:M}}function dt(){return(dt=(0,N.Z)(function*(S,M){try{const O=yield Ce(S,M);return fr(S.appConfig,O)}catch(O){throw We(O)&&409===O.customData.serverCode?yield pn(S.appConfig):yield fr(S.appConfig,{fid:M.fid,registrationStatus:0}),O}})).apply(this,arguments)}function Wr(S){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,N.Z)(function*(S){let M=yield Jt(S.appConfig);for(;1===M.registrationStatus;)yield Ue(100),M=yield Jt(S.appConfig);if(0===M.registrationStatus){const{installationEntry:O,registrationPromise:j}=yield Vn(S);return j||O}return M})).apply(this,arguments)}function Jt(S){return Si(S,M=>{if(!M)throw Ze.create("installation-not-found");return fs(M)})}function fs(S){return function fi(S){return 1===S.registrationStatus&&S.registrationTime+1e4<Date.now()}(S)?{fid:S.fid,registrationStatus:0}:S}function Mn(S,M){return bt.apply(this,arguments)}function bt(){return(bt=(0,N.Z)(function*({appConfig:S,heartbeatServiceProvider:M},O){const j=K(S,O),X=_e(S,O),pe=M.getImmediate({optional:!0});if(pe){const Nt=yield pe.getHeartbeatsHeader();Nt&&X.append("x-firebase-client",Nt)}const je={method:"POST",headers:X,body:JSON.stringify({installation:{sdkVersion:ae,appId:S.appId}})},Mt=yield Me(()=>fetch(j,je));if(Mt.ok)return Oe(yield Mt.json());throw yield Se("Generate Auth Token",Mt)})).apply(this,arguments)}function K(S,{fid:M}){return`${Fe(S)}/${M}/authTokens:generate`}function z(S){return ee.apply(this,arguments)}function ee(){return(ee=(0,N.Z)(function*(S,M=!1){let O;const j=yield Si(S.appConfig,pe=>{if(!Ut(pe))throw Ze.create("not-registered");const Le=pe.authToken;if(!M&&ln(Le))return pe;if(1===Le.requestStatus)return O=te(S,M),pe;{if(!navigator.onLine)throw Ze.create("app-offline");const je=Wt(pe);return O=Ge(S,je),je}});return O?yield O:j.authToken})).apply(this,arguments)}function te(S,M){return H.apply(this,arguments)}function H(){return(H=(0,N.Z)(function*(S,M){let O=yield Ee(S.appConfig);for(;1===O.authToken.requestStatus;)yield Ue(100),O=yield Ee(S.appConfig);const j=O.authToken;return 0===j.requestStatus?z(S,M):j})).apply(this,arguments)}function Ee(S){return Si(S,M=>{if(!Ut(M))throw Ze.create("not-registered");return function ce(S){return 1===S.requestStatus&&S.requestTime+1e4<Date.now()}(M.authToken)?Object.assign(Object.assign({},M),{authToken:{requestStatus:0}}):M})}function Ge(S,M){return ut.apply(this,arguments)}function ut(){return(ut=(0,N.Z)(function*(S,M){try{const O=yield Mn(S,M),j=Object.assign(Object.assign({},M),{authToken:O});return yield fr(S.appConfig,j),O}catch(O){if(!We(O)||401!==O.customData.serverCode&&404!==O.customData.serverCode){const j=Object.assign(Object.assign({},M),{authToken:{requestStatus:0}});yield fr(S.appConfig,j)}else yield pn(S.appConfig);throw O}})).apply(this,arguments)}function Ut(S){return void 0!==S&&2===S.registrationStatus}function ln(S){return 2===S.requestStatus&&!function Tn(S){const M=Date.now();return M<S.creationTime||S.creationTime+S.expiresIn<M+36e5}(S)}function Wt(S){const M={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},S),{authToken:M})}function Y(){return(Y=(0,N.Z)(function*(S){const M=S,{installationEntry:O,registrationPromise:j}=yield Vn(M);return j?j.catch(console.error):z(M).catch(console.error),O.fid})).apply(this,arguments)}function Je(){return(Je=(0,N.Z)(function*(S,M=!1){const O=S;return yield _t(O),(yield z(O,M)).token})).apply(this,arguments)}function _t(S){return kt.apply(this,arguments)}function kt(){return(kt=(0,N.Z)(function*(S){const{registrationPromise:M}=yield Vn(S);M&&(yield M)})).apply(this,arguments)}function ml(S){return Ze.create("missing-app-config-values",{valueName:S})}const Fr="installations",zt=S=>{const M=S.getProvider("app").getImmediate(),O=function Pi(S){if(!S||!S.options)throw ml("App Configuration");if(!S.name)throw ml("App Name");const M=["projectId","apiKey","appId"];for(const O of M)if(!S.options[O])throw ml(O);return{appName:S.name,projectId:S.options.projectId,apiKey:S.options.apiKey,appId:S.options.appId}}(M);return{app:M,appConfig:O,heartbeatServiceProvider:(0,de._getProvider)(M,"heartbeat"),_delete:()=>Promise.resolve()}},Pn=S=>{const M=S.getProvider("app").getImmediate(),O=(0,de._getProvider)(M,Fr).getImmediate();return{getId:()=>function Z(S){return Y.apply(this,arguments)}(O),getToken:X=>function ke(S){return Je.apply(this,arguments)}(O,X)}};(function mr(){(0,de._registerComponent)(new be.wA(Fr,zt,"PUBLIC")),(0,de._registerComponent)(new be.wA("installations-internal",Pn,"PRIVATE"))})(),(0,de.registerVersion)(we,W),(0,de.registerVersion)(we,W,"esm2017");const js="@firebase/remote-config",ti=new he.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Ed{constructor(M,O,j,X){this.client=M,this.storage=O,this.storageCache=j,this.logger=X}isCachedDataFresh(M,O){if(!O)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const j=Date.now()-O,X=j<=M;return this.logger.debug(`Config fetch cache check. Cache age millis: ${j}. Cache max age millis (minimumFetchIntervalMillis setting): ${M}. Is cache hit: ${X}.`),X}fetch(M){var O=this;return(0,N.Z)(function*(){const[j,X]=yield Promise.all([O.storage.getLastSuccessfulFetchTimestampMillis(),O.storage.getLastSuccessfulFetchResponse()]);if(X&&O.isCachedDataFresh(M.cacheMaxAgeMillis,j))return X;M.eTag=X&&X.eTag;const pe=yield O.client.fetch(M),Le=[O.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===pe.status&&Le.push(O.storage.setLastSuccessfulFetchResponse(pe)),yield Promise.all(Le),pe})()}}function oc(S=navigator){return S.languages&&S.languages[0]||S.language}class wi{constructor(M,O,j,X,pe,Le){this.firebaseInstallations=M,this.sdkVersion=O,this.namespace=j,this.projectId=X,this.apiKey=pe,this.appId=Le}fetch(M){var O=this;return(0,N.Z)(function*(){var j,X,pe;const[Le,je]=yield Promise.all([O.firebaseInstallations.getId(),O.firebaseInstallations.getToken()]),Nt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${O.projectId}/namespaces/${O.namespace}:fetch?key=${O.apiKey}`,jt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":M.eTag||"*"},vt={sdk_version:O.sdkVersion,app_instance_id:Le,app_instance_id_token:je,app_id:O.appId,language_code:oc()},ji={method:"POST",headers:jt,body:JSON.stringify(vt)},Qi=fetch(Nt,ji),qa=new Promise((so,Cr)=>{M.signal.addEventListener(()=>{const Wa=new Error("The operation was aborted.");Wa.name="AbortError",Cr(Wa)})});let Ns;try{yield Promise.race([Qi,qa]),Ns=yield Qi}catch(so){let Cr="fetch-client-network";throw"AbortError"===(null===(j=so)||void 0===j?void 0:j.name)&&(Cr="fetch-timeout"),ti.create(Cr,{originalErrorMessage:null===(X=so)||void 0===X?void 0:X.message})}let _s=Ns.status;const yc=Ns.headers.get("ETag")||void 0;let Lo,Ft;if(200===Ns.status){let so;try{so=yield Ns.json()}catch(Cr){throw ti.create("fetch-client-parse",{originalErrorMessage:null===(pe=Cr)||void 0===pe?void 0:pe.message})}Lo=so.entries,Ft=so.state}if("INSTANCE_STATE_UNSPECIFIED"===Ft?_s=500:"NO_CHANGE"===Ft?_s=304:("NO_TEMPLATE"===Ft||"EMPTY_CONFIG"===Ft)&&(Lo={}),304!==_s&&200!==_s)throw ti.create("fetch-status",{httpStatus:_s});return{status:_s,eTag:yc,config:Lo}})()}}class zs{constructor(M,O){this.client=M,this.storage=O}fetch(M){var O=this;return(0,N.Z)(function*(){const j=(yield O.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return O.attemptFetch(M,j)})()}attemptFetch(M,{throttleEndTimeMillis:O,backoffCount:j}){var X=this;return(0,N.Z)(function*(){yield function Dd(S,M){return new Promise((O,j)=>{const X=Math.max(M-Date.now(),0),pe=setTimeout(O,X);S.addEventListener(()=>{clearTimeout(pe),j(ti.create("fetch-throttle",{throttleEndTimeMillis:M}))})})}(M.signal,O);try{const pe=yield X.client.fetch(M);return yield X.storage.deleteThrottleMetadata(),pe}catch(pe){if(!function sg(S){if(!(S instanceof he.ZR&&S.customData))return!1;const M=Number(S.customData.httpStatus);return 429===M||500===M||503===M||504===M}(pe))throw pe;const Le={throttleEndTimeMillis:Date.now()+(0,he.$s)(j),backoffCount:j+1};return yield X.storage.setThrottleMetadata(Le),X.attemptFetch(M,Le)}})()}}class ag{constructor(M,O,j,X,pe){this.app=M,this._client=O,this._storageCache=j,this._storage=X,this._logger=pe,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function gl(S,M){var O;const j=S.target.error||void 0;return ti.create(M,{originalErrorMessage:j&&(null===(O=j)||void 0===O?void 0:O.message)})}const Aa="app_namespace_store";class Md{constructor(M,O,j,X=function cg(){return new Promise((S,M)=>{var O;try{const j=indexedDB.open("firebase_remote_config",1);j.onerror=X=>{M(gl(X,"storage-open"))},j.onsuccess=X=>{S(X.target.result)},j.onupgradeneeded=X=>{0===X.oldVersion&&X.target.result.createObjectStore(Aa,{keyPath:"compositeKey"})}}catch(j){M(ti.create("storage-open",{originalErrorMessage:null===(O=j)||void 0===O?void 0:O.message}))}})}()){this.appId=M,this.appName=O,this.namespace=j,this.openDbPromise=X}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(M){return this.set("last_fetch_status",M)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(M){return this.set("last_successful_fetch_timestamp_millis",M)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(M){return this.set("last_successful_fetch_response",M)}getActiveConfig(){return this.get("active_config")}setActiveConfig(M){return this.set("active_config",M)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(M){return this.set("active_config_etag",M)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(M){return this.set("throttle_metadata",M)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(M){var O=this;return(0,N.Z)(function*(){const j=yield O.openDbPromise;return new Promise((X,pe)=>{var Le;const Mt=j.transaction([Aa],"readonly").objectStore(Aa),Nt=O.createCompositeKey(M);try{const jt=Mt.get(Nt);jt.onerror=vt=>{pe(gl(vt,"storage-get"))},jt.onsuccess=vt=>{const ji=vt.target.result;X(ji?ji.value:void 0)}}catch(jt){pe(ti.create("storage-get",{originalErrorMessage:null===(Le=jt)||void 0===Le?void 0:Le.message}))}})})()}set(M,O){var j=this;return(0,N.Z)(function*(){const X=yield j.openDbPromise;return new Promise((pe,Le)=>{var je;const Nt=X.transaction([Aa],"readwrite").objectStore(Aa),jt=j.createCompositeKey(M);try{const vt=Nt.put({compositeKey:jt,value:O});vt.onerror=ji=>{Le(gl(ji,"storage-set"))},vt.onsuccess=()=>{pe()}}catch(vt){Le(ti.create("storage-set",{originalErrorMessage:null===(je=vt)||void 0===je?void 0:je.message}))}})})()}delete(M){var O=this;return(0,N.Z)(function*(){const j=yield O.openDbPromise;return new Promise((X,pe)=>{var Le;const Mt=j.transaction([Aa],"readwrite").objectStore(Aa),Nt=O.createCompositeKey(M);try{const jt=Mt.delete(Nt);jt.onerror=vt=>{pe(gl(vt,"storage-delete"))},jt.onsuccess=()=>{X()}}catch(jt){pe(ti.create("storage-delete",{originalErrorMessage:null===(Le=jt)||void 0===Le?void 0:Le.message}))}})})()}createCompositeKey(M){return[this.appId,this.appName,this.namespace,M].join()}}class ka{constructor(M){this.storage=M}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var M=this;return(0,N.Z)(function*(){const O=M.storage.getLastFetchStatus(),j=M.storage.getLastSuccessfulFetchTimestampMillis(),X=M.storage.getActiveConfig(),pe=yield O;pe&&(M.lastFetchStatus=pe);const Le=yield j;Le&&(M.lastSuccessfulFetchTimestampMillis=Le);const je=yield X;je&&(M.activeConfig=je)})()}setLastFetchStatus(M){return this.lastFetchStatus=M,this.storage.setLastFetchStatus(M)}setLastSuccessfulFetchTimestampMillis(M){return this.lastSuccessfulFetchTimestampMillis=M,this.storage.setLastSuccessfulFetchTimestampMillis(M)}setActiveConfig(M){return this.activeConfig=M,this.storage.setActiveConfig(M)}}function ay(){return _l.apply(this,arguments)}function _l(){return(_l=(0,N.Z)(function*(){if(!(0,he.hl)())return!1;try{return yield(0,he.eu)()}catch(S){return!1}})).apply(this,arguments)}!function ug(){(0,de._registerComponent)(new be.wA("remote-config",function S(M,{instanceIdentifier:O}){const j=M.getProvider("app").getImmediate(),X=M.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw ti.create("registration-window");if(!(0,he.hl)())throw ti.create("indexed-db-unavailable");const{projectId:pe,apiKey:Le,appId:je}=j.options;if(!pe)throw ti.create("registration-project-id");if(!Le)throw ti.create("registration-api-key");if(!je)throw ti.create("registration-app-id");const Mt=new Md(je,j.name,O=O||"firebase"),Nt=new ka(Mt),jt=new oe.Yd(js);jt.logLevel=oe.in.ERROR;const vt=new wi(X,de.SDK_VERSION,O,pe,Le,je),ji=new zs(vt,Mt),Qi=new Ed(ji,Mt,Nt,jt),qa=new ag(j,Qi,Nt,Mt,jt);return function In(S){const M=(0,he.m9)(S);M._initializePromise||(M._initializePromise=M._storageCache.loadFromStorage().then(()=>{M._isInitializationComplete=!0}))}(qa),qa},"PUBLIC").setMultipleInstances(!0)),(0,de.registerVersion)(js,"0.3.10"),(0,de.registerVersion)(js,"0.3.10","esm2017")}();const Mo="/firebase-messaging-sw.js",Kr="/firebase-cloud-messaging-push-scope",Ra="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",yl="google.c.a.c_id",kf="google.c.a.c_l",dg="google.c.a.ts",Zn="google.c.a.e";var qs=(()=>{return(S=qs||(qs={})).PUSH_RECEIVED="push-received",S.NOTIFICATION_CLICKED="notification-clicked",qs;var S})();function ps(S){const M=new Uint8Array(S);return btoa(String.fromCharCode(...M)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Id(S){const O=(S+"=".repeat((4-S.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),j=atob(O),X=new Uint8Array(j.length);for(let pe=0;pe<j.length;++pe)X[pe]=j.charCodeAt(pe);return X}const Ti="fcm_token_details_db",Ad="fcm_token_object_Store";function kd(S){return ac.apply(this,arguments)}function ac(){return ac=(0,N.Z)(function*(S){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(pe=>pe.name).includes(Ti))return null;let M=null;return(yield(0,fe.X3)(Ti,5,{upgrade:(j=(0,N.Z)(function*(X,pe,Le,je){var Mt;if(pe<2||!X.objectStoreNames.contains(Ad))return;const Nt=je.objectStore(Ad),jt=yield Nt.index("fcmSenderId").get(S);if(yield Nt.clear(),jt)if(2===pe){const vt=jt;if(!vt.auth||!vt.p256dh||!vt.endpoint)return;M={token:vt.fcmToken,createTime:null!==(Mt=vt.createTime)&&void 0!==Mt?Mt:Date.now(),subscriptionOptions:{auth:vt.auth,p256dh:vt.p256dh,endpoint:vt.endpoint,swScope:vt.swScope,vapidKey:"string"==typeof vt.vapidKey?vt.vapidKey:ps(vt.vapidKey)}}}else if(3===pe){const vt=jt;M={token:vt.fcmToken,createTime:vt.createTime,subscriptionOptions:{auth:ps(vt.auth),p256dh:ps(vt.p256dh),endpoint:vt.endpoint,swScope:vt.swScope,vapidKey:ps(vt.vapidKey)}}}else if(4===pe){const vt=jt;M={token:vt.fcmToken,createTime:vt.createTime,subscriptionOptions:{auth:ps(vt.auth),p256dh:ps(vt.p256dh),endpoint:vt.endpoint,swScope:vt.swScope,vapidKey:ps(vt.vapidKey)}}}}),function(pe,Le,je,Mt){return j.apply(this,arguments)})})).close(),yield(0,fe.Lj)(Ti),yield(0,fe.Lj)("fcm_vapid_details_db"),yield(0,fe.Lj)("undefined"),lc(M)?M:null;var j}),ac.apply(this,arguments)}function lc(S){if(!S||!S.subscriptionOptions)return!1;const{subscriptionOptions:M}=S;return"number"==typeof S.createTime&&S.createTime>0&&"string"==typeof S.token&&S.token.length>0&&"string"==typeof M.auth&&M.auth.length>0&&"string"==typeof M.p256dh&&M.p256dh.length>0&&"string"==typeof M.endpoint&&M.endpoint.length>0&&"string"==typeof M.swScope&&M.swScope.length>0&&"string"==typeof M.vapidKey&&M.vapidKey.length>0}const Ws="firebase-messaging-store";let su=null;function Nn(){return su||(su=(0,fe.X3)("firebase-messaging-database",1,{upgrade:(S,M)=>{0===M&&S.createObjectStore(Ws)}})),su}function bl(S){return To.apply(this,arguments)}function To(){return(To=(0,N.Z)(function*(S){const M=Fi(S),j=yield(yield Nn()).transaction(Ws).objectStore(Ws).get(M);if(j)return j;{const X=yield kd(S.appConfig.senderId);if(X)return yield An(S,X),X}})).apply(this,arguments)}function An(S,M){return uc.apply(this,arguments)}function uc(){return(uc=(0,N.Z)(function*(S,M){const O=Fi(S),X=(yield Nn()).transaction(Ws,"readwrite");return yield X.objectStore(Ws).put(M,O),yield X.done,M})).apply(this,arguments)}function wl(S){return na.apply(this,arguments)}function na(){return(na=(0,N.Z)(function*(S){const M=Fi(S),j=(yield Nn()).transaction(Ws,"readwrite");yield j.objectStore(Ws).delete(M),yield j.done})).apply(this,arguments)}function Fi({appConfig:S}){return S.appId}const ni=new he.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Ys(S,M){return Li.apply(this,arguments)}function Li(){return(Li=(0,N.Z)(function*(S,M){var O;const j=yield Ao(S),X=Cl(M),pe={method:"POST",headers:j,body:JSON.stringify(X)};let Le;try{Le=yield(yield fetch(Io(S.appConfig),pe)).json()}catch(je){throw ni.create("token-subscribe-failed",{errorInfo:null===(O=je)||void 0===O?void 0:O.toString()})}if(Le.error)throw ni.create("token-subscribe-failed",{errorInfo:Le.error.message});if(!Le.token)throw ni.create("token-subscribe-no-token");return Le.token})).apply(this,arguments)}function Oa(S,M){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,N.Z)(function*(S,M){var O;const j=yield Ao(S),X=Cl(M.subscriptionOptions),pe={method:"PATCH",headers:j,body:JSON.stringify(X)};let Le;try{Le=yield(yield fetch(`${Io(S.appConfig)}/${M.token}`,pe)).json()}catch(je){throw ni.create("token-update-failed",{errorInfo:null===(O=je)||void 0===O?void 0:O.toString()})}if(Le.error)throw ni.create("token-update-failed",{errorInfo:Le.error.message});if(!Le.token)throw ni.create("token-update-no-token");return Le.token})).apply(this,arguments)}function ou(S,M){return Br.apply(this,arguments)}function Br(){return(Br=(0,N.Z)(function*(S,M){var O;const X={method:"DELETE",headers:yield Ao(S)};try{const Le=yield(yield fetch(`${Io(S.appConfig)}/${M}`,X)).json();if(Le.error)throw ni.create("token-unsubscribe-failed",{errorInfo:Le.error.message})}catch(pe){throw ni.create("token-unsubscribe-failed",{errorInfo:null===(O=pe)||void 0===O?void 0:O.toString()})}})).apply(this,arguments)}function Io({projectId:S}){return`https://fcmregistrations.googleapis.com/v1/projects/${S}/registrations`}function Ao(S){return St.apply(this,arguments)}function St(){return(St=(0,N.Z)(function*({appConfig:S,installations:M}){const O=yield M.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":S.apiKey,"x-goog-firebase-installations-auth":`FIS ${O}`})})).apply(this,arguments)}function Cl({p256dh:S,auth:M,endpoint:O,vapidKey:j}){const X={web:{endpoint:O,auth:M,p256dh:S}};return j!==Ra&&(X.web.applicationPubKey=j),X}const El=6048e5;function Rd(S){return Dl.apply(this,arguments)}function Dl(){return(Dl=(0,N.Z)(function*(S){const M=yield Kn(S.swRegistration,S.vapidKey),O={vapidKey:S.vapidKey,swScope:S.swRegistration.scope,endpoint:M.endpoint,auth:ps(M.getKey("auth")),p256dh:ps(M.getKey("p256dh"))},j=yield bl(S.firebaseDependencies);if(j){if(Ml(j.subscriptionOptions,O))return Date.now()>=j.createTime+El?Rf(S,{token:j.token,createTime:Date.now(),subscriptionOptions:O}):j.token;try{yield ou(S.firebaseDependencies,j.token)}catch(X){console.warn(X)}return en(S.firebaseDependencies,O)}return en(S.firebaseDependencies,O)})).apply(this,arguments)}function au(S){return xl.apply(this,arguments)}function xl(){return(xl=(0,N.Z)(function*(S){const M=yield bl(S.firebaseDependencies);M&&(yield ou(S.firebaseDependencies,M.token),yield wl(S.firebaseDependencies));const O=yield S.swRegistration.pushManager.getSubscription();return!O||O.unsubscribe()})).apply(this,arguments)}function Rf(S,M){return Re.apply(this,arguments)}function Re(){return(Re=(0,N.Z)(function*(S,M){try{const O=yield Oa(S.firebaseDependencies,M),j=Object.assign(Object.assign({},M),{token:O,createTime:Date.now()});return yield An(S.firebaseDependencies,j),O}catch(O){throw yield au(S),O}})).apply(this,arguments)}function en(S,M){return Sl.apply(this,arguments)}function Sl(){return(Sl=(0,N.Z)(function*(S,M){const j={token:yield Ys(S,M),createTime:Date.now(),subscriptionOptions:M};return yield An(S,j),j.token})).apply(this,arguments)}function Kn(S,M){return ko.apply(this,arguments)}function ko(){return(ko=(0,N.Z)(function*(S,M){return(yield S.pushManager.getSubscription())||S.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Id(M)})})).apply(this,arguments)}function Ml(S,M){return M.vapidKey===S.vapidKey&&M.endpoint===S.endpoint&&M.auth===S.auth&&M.p256dh===S.p256dh}function _r(S){const M={from:S.from,collapseKey:S.collapse_key,messageId:S.fcmMessageId};return function lu(S,M){if(!M.notification)return;S.notification={};const O=M.notification.title;O&&(S.notification.title=O);const j=M.notification.body;j&&(S.notification.body=j);const X=M.notification.image;X&&(S.notification.image=X)}(M,S),function cu(S,M){!M.data||(S.data=M.data)}(M,S),function Od(S,M){var O,j,X,pe,Le;if(!M.fcmOptions&&!(null===(O=M.notification)||void 0===O?void 0:O.click_action))return;S.fcmOptions={};const je=null!==(X=null===(j=M.fcmOptions)||void 0===j?void 0:j.link)&&void 0!==X?X:null===(pe=M.notification)||void 0===pe?void 0:pe.click_action;je&&(S.fcmOptions.link=je);const Mt=null===(Le=M.fcmOptions)||void 0===Le?void 0:Le.analytics_label;Mt&&(S.fcmOptions.analyticsLabel=Mt)}(M,S),M}function Pd(S){return"object"==typeof S&&!!S&&yl in S}function Tl(S,M){const O=[];for(let j=0;j<S.length;j++)O.push(S.charAt(j)),j<M.length&&O.push(M.charAt(j));return O.join("")}function Ii(S){return ni.create("missing-app-config-values",{valueName:S})}Tl("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Tl("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ms{constructor(M,O,j){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const X=function Pa(S){if(!S||!S.options)throw Ii("App Configuration Object");if(!S.name)throw Ii("App Name");const M=["projectId","apiKey","appId","messagingSenderId"],{options:O}=S;for(const j of M)if(!O[j])throw Ii(j);return{appName:S.name,projectId:O.projectId,apiKey:O.apiKey,appId:O.appId,senderId:O.messagingSenderId}}(M);this.firebaseDependencies={app:M,appConfig:X,installations:O,analyticsProvider:j}}_delete(){return Promise.resolve()}}function uu(S){return Is.apply(this,arguments)}function Is(){return(Is=(0,N.Z)(function*(S){var M;try{S.swRegistration=yield navigator.serviceWorker.register(Mo,{scope:Kr}),S.swRegistration.update().catch(()=>{})}catch(O){throw ni.create("failed-service-worker-registration",{browserErrorMessage:null===(M=O)||void 0===M?void 0:M.message})}})).apply(this,arguments)}function Zs(S,M){return Il.apply(this,arguments)}function Il(){return(Il=(0,N.Z)(function*(S,M){if(!M&&!S.swRegistration&&(yield uu(S)),M||!S.swRegistration){if(!(M instanceof ServiceWorkerRegistration))throw ni.create("invalid-sw-registration");S.swRegistration=M}})).apply(this,arguments)}function Nd(S,M){return Al.apply(this,arguments)}function Al(){return(Al=(0,N.Z)(function*(S,M){M?S.vapidKey=M:S.vapidKey||(S.vapidKey=Ra)})).apply(this,arguments)}function ia(){return(ia=(0,N.Z)(function*(S,M){if(!navigator)throw ni.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw ni.create("permission-blocked");return yield Nd(S,null==M?void 0:M.vapidKey),yield Zs(S,null==M?void 0:M.serviceWorkerRegistration),Rd(S)})).apply(this,arguments)}function hc(S,M,O){return kl.apply(this,arguments)}function kl(){return(kl=(0,N.Z)(function*(S,M,O){const j=du(M);(yield S.firebaseDependencies.analyticsProvider.get()).logEvent(j,{message_id:O[yl],message_name:O[kf],message_time:O[dg],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function du(S){switch(S){case qs.NOTIFICATION_CLICKED:return"notification_open";case qs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function fc(){return(fc=(0,N.Z)(function*(S,M){const O=M.data;if(!O.isFirebaseMessaging)return;S.onMessageHandler&&O.messageType===qs.PUSH_RECEIVED&&("function"==typeof S.onMessageHandler?S.onMessageHandler(_r(O)):S.onMessageHandler.next(_r(O)));const j=O.data;Pd(j)&&"1"===j[Zn]&&(yield hc(S,O.messageType,j))})).apply(this,arguments)}const ra="@firebase/messaging",sa=S=>{const M=new ms(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),S.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",O=>function hg(S,M){return fc.apply(this,arguments)}(M,O)),M},Ld=S=>{const M=S.getProvider("messaging").getImmediate();return{getToken:j=>function Fd(S,M){return ia.apply(this,arguments)}(M,j)}};function Na(){return As.apply(this,arguments)}function As(){return(As=(0,N.Z)(function*(){try{yield(0,he.eu)()}catch(S){return!1}return"undefined"!=typeof window&&(0,he.hl)()&&(0,he.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Of(){(0,de._registerComponent)(new be.wA("messaging",sa,"PUBLIC")),(0,de._registerComponent)(new be.wA("messaging-internal",Ld,"PRIVATE")),(0,de.registerVersion)(ra,"0.9.15"),(0,de.registerVersion)(ra,"0.9.15","esm2017")}();const Bd="analytics",fg="firebase_id",Ol="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",pc="https://www.googletagmanager.com/gtag/js",Vi=new oe.Yd("@firebase/analytics");function Ff(S){return Promise.all(S.map(M=>M.catch(O=>O)))}function oa(S,M){const O=document.createElement("script");O.src=`${pc}?l=${S}&id=${M}`,O.async=!0,document.head.appendChild(O)}function Vd(S,M,O,j,X,pe){return Ud.apply(this,arguments)}function Ud(){return(Ud=(0,N.Z)(function*(S,M,O,j,X,pe){const Le=j[X];try{if(Le)yield M[Le];else{const Mt=(yield Ff(O)).find(Nt=>Nt.measurementId===X);Mt&&(yield M[Mt.appId])}}catch(je){Vi.error(je)}S("config",X,pe)})).apply(this,arguments)}function ks(S,M,O,j,X){return La.apply(this,arguments)}function La(){return(La=(0,N.Z)(function*(S,M,O,j,X){try{let pe=[];if(X&&X.send_to){let Le=X.send_to;Array.isArray(Le)||(Le=[Le]);const je=yield Ff(O);for(const Mt of Le){const Nt=je.find(vt=>vt.measurementId===Mt),jt=Nt&&M[Nt.appId];if(!jt){pe=[];break}pe.push(jt)}}0===pe.length&&(pe=Object.values(M)),yield Promise.all(pe),S("event",j,X||{})}catch(pe){Vi.error(pe)}})).apply(this,arguments)}function Ui(){const S=window.document.getElementsByTagName("script");for(const M of Object.values(S))if(M.src&&M.src.includes(pc))return M;return null}const ri=new he.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),fu=new class si{constructor(M={},O=1e3){this.throttleMetadata=M,this.intervalMillis=O}getThrottleMetadata(M){return this.throttleMetadata[M]}setThrottleMetadata(M,O){this.throttleMetadata[M]=O}deleteThrottleMetadata(M){delete this.throttleMetadata[M]}};function ct(S){return new Headers({Accept:"application/json","x-goog-api-key":S})}function Va(S){return oi.apply(this,arguments)}function oi(){return(oi=(0,N.Z)(function*(S){var M;const{appId:O,apiKey:j}=S,X={method:"GET",headers:ct(j)},pe=Ol.replace("{app-id}",O),Le=yield fetch(pe,X);if(200!==Le.status&&304!==Le.status){let je="";try{const Mt=yield Le.json();(null===(M=Mt.error)||void 0===M?void 0:M.message)&&(je=Mt.error.message)}catch(Mt){}throw ri.create("config-fetch-failed",{httpStatus:Le.status,responseMessage:je})}return Le.json()})).apply(this,arguments)}function Ro(S){return aa.apply(this,arguments)}function aa(){return(aa=(0,N.Z)(function*(S,M=fu,O){const{appId:j,apiKey:X,measurementId:pe}=S.options;if(!j)throw ri.create("no-app-id");if(!X){if(pe)return{measurementId:pe,appId:j};throw ri.create("no-api-key")}const Le=M.getThrottleMetadata(j)||{backoffCount:0,throttleEndTimeMillis:Date.now()},je=new jd;return setTimeout((0,N.Z)(function*(){je.abort()}),void 0!==O?O:6e4),Pl({appId:j,apiKey:X,measurementId:pe},Le,je,M)})).apply(this,arguments)}function Pl(S,M,O){return mc.apply(this,arguments)}function mc(){return(mc=(0,N.Z)(function*(S,{throttleEndTimeMillis:M,backoffCount:O},j,X=fu){var pe,Le;const{appId:je,measurementId:Mt}=S;try{yield la(j,M)}catch(Nt){if(Mt)return Vi.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Mt} provided in the "measurementId" field in the local Firebase config. [${null===(pe=Nt)||void 0===pe?void 0:pe.message}]`),{appId:je,measurementId:Mt};throw Nt}try{const Nt=yield Va(S);return X.deleteThrottleMetadata(je),Nt}catch(Nt){const jt=Nt;if(!pu(jt)){if(X.deleteThrottleMetadata(je),Mt)return Vi.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Mt} provided in the "measurementId" field in the local Firebase config. [${null==jt?void 0:jt.message}]`),{appId:je,measurementId:Mt};throw Nt}const vt=503===Number(null===(Le=null==jt?void 0:jt.customData)||void 0===Le?void 0:Le.httpStatus)?(0,he.$s)(O,X.intervalMillis,30):(0,he.$s)(O,X.intervalMillis),ji={throttleEndTimeMillis:Date.now()+vt,backoffCount:O+1};return X.setThrottleMetadata(je,ji),Vi.debug(`Calling attemptFetch again in ${vt} millis`),Pl(S,ji,j,X)}})).apply(this,arguments)}function la(S,M){return new Promise((O,j)=>{const X=Math.max(M-Date.now(),0),pe=setTimeout(O,X);S.addEventListener(()=>{clearTimeout(pe),j(ri.create("fetch-throttle",{throttleEndTimeMillis:M}))})})}function pu(S){if(!(S instanceof he.ZR&&S.customData))return!1;const M=Number(S.customData.httpStatus);return 429===M||500===M||503===M||504===M}class jd{constructor(){this.listeners=[]}addEventListener(M){this.listeners.push(M)}abort(){this.listeners.forEach(M=>M())}}function Lf(){return Os.apply(this,arguments)}function Os(){return(Os=(0,N.Z)(function*(){var S;if(!(0,he.hl)())return Vi.warn(ri.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,he.eu)()}catch(M){return Vi.warn(ri.create("indexeddb-unavailable",{errorInfo:null===(S=M)||void 0===S?void 0:S.toString()}).message),!1}return!0})).apply(this,arguments)}function rn(){return(rn=(0,N.Z)(function*(S,M,O,j,X,pe,Le){var je;const Mt=Ro(S);Mt.then(Qi=>{O[Qi.measurementId]=Qi.appId,S.options.measurementId&&Qi.measurementId!==S.options.measurementId&&Vi.warn(`The measurement ID in the local Firebase config (${S.options.measurementId}) does not match the measurement ID fetched from the server (${Qi.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Qi=>Vi.error(Qi)),M.push(Mt);const Nt=Lf().then(Qi=>{if(Qi)return j.getId()}),[jt,vt]=yield Promise.all([Mt,Nt]);Ui()||oa(pe,jt.measurementId),X("js",new Date);const ji=null!==(je=null==Le?void 0:Le.config)&&void 0!==je?je:{};return ji.origin="firebase",ji.update=!0,null!=vt&&(ji[fg]=vt),X("config",jt.measurementId,ji),jt.measurementId})).apply(this,arguments)}class at{constructor(M){this.app=M}_delete(){return delete ar[this.app.options.appId],Promise.resolve()}}let ar={},gc=[];const Oo={};let Qr,Nl,Et="dataLayer",Xs=!1;function Gn(S,M,O){!function Un(){const S=[];if((0,he.ru)()&&S.push("This is a browser extension environment."),(0,he.zI)()||S.push("Cookies are not available."),S.length>0){const M=S.map((j,X)=>`(${X+1}) ${j}`).join(" "),O=ri.create("invalid-analytics-context",{errorInfo:M});Vi.warn(O.message)}}();const j=S.options.appId;if(!j)throw ri.create("no-app-id");if(!S.options.apiKey){if(!S.options.measurementId)throw ri.create("no-api-key");Vi.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${S.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ar[j])throw ri.create("already-exists",{id:j});if(!Xs){!function Fa(S){let M=[];Array.isArray(window[S])?M=window[S]:window[S]=M}(Et);const{wrappedGtag:pe,gtagCore:Le}=function pg(S,M,O,j,X){let pe=function(...Le){window[j].push(arguments)};return window[X]&&"function"==typeof window[X]&&(pe=window[X]),window[X]=function Hd(S,M,O,j){function pe(){return(pe=(0,N.Z)(function*(Le,je,Mt){try{"event"===Le?yield ks(S,M,O,je,Mt):"config"===Le?yield Vd(S,M,O,j,je,Mt):S("set",je)}catch(Nt){Vi.error(Nt)}})).apply(this,arguments)}return function X(Le,je,Mt){return pe.apply(this,arguments)}}(pe,S,M,O),{gtagCore:pe,wrappedGtag:window[X]}}(ar,gc,Oo,Et,"gtag");Nl=pe,Qr=Le,Xs=!0}return ar[j]=function Ps(S,M,O,j,X,pe,Le){return rn.apply(this,arguments)}(S,gc,Oo,M,Qr,Et,O),new at(S)}function yr(){return(yr=(0,N.Z)(function*(S,M,O,j,X){if(X&&X.global)S("event",O,j);else{const pe=yield M;S("event",O,Object.assign(Object.assign({},j),{send_to:pe}))}})).apply(this,arguments)}function mg(){return Fl.apply(this,arguments)}function Fl(){return(Fl=(0,N.Z)(function*(){if((0,he.ru)()||!(0,he.zI)()||!(0,he.hl)())return!1;try{return yield(0,he.eu)()}catch(S){return!1}})).apply(this,arguments)}const Ga="@firebase/analytics";!function gu(){(0,de._registerComponent)(new be.wA(Bd,(M,{options:O})=>Gn(M.getProvider("app").getImmediate(),M.getProvider("installations-internal").getImmediate(),O),"PUBLIC")),(0,de._registerComponent)(new be.wA("analytics-internal",function S(M){try{const O=M.getProvider(Bd).getImmediate();return{logEvent:(j,X,pe)=>function vg(S,M,O,j){S=(0,he.m9)(S),function Wn(S,M,O,j,X){return yr.apply(this,arguments)}(Nl,ar[S.app.options.appId],M,O,j).catch(X=>Vi.error(X))}(O,j,X,pe)}}catch(O){throw ri.create("interop-component-reg-failed",{reason:O})}},"PRIVATE")),(0,de.registerVersion)(Ga,"0.7.11"),(0,de.registerVersion)(Ga,"0.7.11","esm2017")}();var Ll=F(4408),li=F(7565);const Bl=new class za extends li.v{}(class _u extends Ll.o{constructor(M,O){super(M,O),this.scheduler=M,this.work=O}schedule(M,O=0){return O>0?super.schedule(M,O):(this.delay=O,this.state=M,this.scheduler.flush(this),this)}execute(M,O){return O>0||this.closed?super.execute(M,O):this._execute(M,O)}requestAsyncId(M,O,j=0){return null!=j&&j>0||null==j&&this.delay>0?super.requestAsyncId(M,O,j):M.flush(this)}});var zd=F(4986),br=F(8505),wr=F(5363),_c=F(9468);const Hi=new c.GfV("7.4.1"),Js="__angularfire_symbol__analyticsIsSupportedValue",vc="__angularfire_symbol__analyticsIsSupported",eo="__angularfire_symbol__remoteConfigIsSupportedValue",Vl="__angularfire_symbol__remoteConfigIsSupported",vu="__angularfire_symbol__messagingIsSupportedValue",$d="__angularfire_symbol__messagingIsSupported";function yg(S,M,O){if(M){if(1===M.length)return M[0];const pe=M.filter(Le=>Le.app===O);if(1===pe.length)return pe[0]}return O.container.getProvider(S).getImmediate({optional:!0})}globalThis[vc]||(globalThis[vc]=mg().then(S=>globalThis[Js]=S).catch(()=>globalThis[Js]=!1)),globalThis[$d]||(globalThis[$d]=Na().then(S=>globalThis[vu]=S).catch(()=>globalThis[vu]=!1)),globalThis[Vl]||(globalThis[Vl]=ay().then(S=>globalThis[eo]=S).catch(()=>globalThis[eo]=!1));const Hl=(S,M)=>{const O=M?[M]:(0,G.C6)(),j=[];return O.forEach(X=>{X.container.getProvider(S).instances.forEach(Le=>{j.includes(Le)||j.push(Le)})}),j};function $a(){}class da{constructor(M,O=Bl){this.zone=M,this.delegate=O}now(){return this.delegate.now()}schedule(M,O,j){const X=this.zone;return this.delegate.schedule(function(Le){X.runGuarded(()=>{M.apply(this,[Le])})},O,j)}}class ha{constructor(M){this.zone=M,this.task=null}call(M,O){const j=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",$a,{},$a,$a)),O.pipe((0,br.b)({next:j,complete:j,error:j})).subscribe(M).add(j)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Xr=(()=>{class S{constructor(O){this.ngZone=O,this.outsideAngular=O.runOutsideAngular(()=>new da(Zone.current)),this.insideAngular=O.run(()=>new da(Zone.current,zd.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return S.\u0275fac=function(O){return new(O||S)(c.LFG(c.R0b))},S.\u0275prov=c.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();function no(){const S=globalThis.\u0275AngularFireScheduler;if(!S)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return S}function io(S){return S.pipe((0,wr.Q)(no().outsideAngular))}function ro(S){return no(),function jl(S){return function(O){return(O=O.lift(new ha(S.ngZone))).pipe((0,_c.R)(S.outsideAngular),(0,wr.Q)(S.insideAngular))}}(no())(S)}},3673:(lt,De,F)=>{F.d(De,{$:()=>Io,A:()=>$,B:()=>Ne,G:()=>Pn,H:()=>wn,J:()=>zs,L:()=>ln,M:()=>_l,N:()=>vl,P:()=>vc,Q:()=>yl,R:()=>gu,T:()=>kf,U:()=>Ra,V:()=>qs,W:()=>ps,X:()=>kd,Y:()=>dc,Z:()=>Ys,_:()=>Oa,a:()=>Rs,a0:()=>Rd,a1:()=>au,a2:()=>Rf,a3:()=>en,a4:()=>Kn,a5:()=>Ml,a6:()=>lu,a7:()=>cu,a8:()=>Pd,a9:()=>Tl,aA:()=>Ft,aB:()=>qa,aC:()=>S,aD:()=>bg,aE:()=>ze,aI:()=>ct,aL:()=>Zn,aa:()=>uu,ab:()=>Zs,ac:()=>Nd,af:()=>hc,ag:()=>du,ah:()=>hg,ak:()=>Ws,al:()=>Bi,an:()=>pc,ao:()=>Ud,ap:()=>pi,aq:()=>Me,ar:()=>Yt,as:()=>_t,at:()=>We,au:()=>es,av:()=>bu,aw:()=>Fe,ax:()=>re,ay:()=>se,az:()=>Tn,b:()=>ri,c:()=>yg,d:()=>ha,e:()=>$a,f:()=>j,g:()=>Nt,h:()=>Le,i:()=>Gn,j:()=>ji,k:()=>Dg,l:()=>Bl,m:()=>xg,o:()=>fe,r:()=>zd,s:()=>li,u:()=>Hi});var c=F(5861),G=F(2090),N=F(9681),de=F(655),he=F(1877),be=F(4859);const fe={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},$={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Ne=function ae(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ve=function Ke(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},qe=new G.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ae=new he.Yd("@firebase/auth");function Ze(w,...g){Ae.logLevel<=he.in.ERROR&&Ae.error(`Auth (${N.SDK_VERSION}): ${w}`,...g)}function We(w,...g){throw Qe(w,...g)}function Fe(w,...g){return Qe(w,...g)}function Oe(w,g,v){const E=Object.assign(Object.assign({},Ve()),{[g]:v});return new G.LL("auth","Firebase",E).create(g,{appName:w.name})}function Se(w,g,v){if(!(g instanceof v))throw v.name!==g.constructor.name&&We(w,"argument-error"),Oe(w,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Qe(w,...g){if("string"!=typeof w){const v=g[0],E=[...g.slice(1)];return E[0]&&(E[0].appName=w.name),w._errorFactory.create(v,...E)}return qe.create(w,...g)}function re(w,g,...v){if(!w)throw Qe(g,...v)}function _e(w){const g="INTERNAL ASSERTION FAILED: "+w;throw Ze(g),new Error(g)}function Me(w,g){w||_e(g)}const J=new Map;function se(w){Me(w instanceof Function,"Expected a class definition");let g=J.get(w);return g?(Me(g instanceof w,"Instance stored in cache mismatched with class"),g):(g=new w,J.set(w,g),g)}function me(){var w;return"undefined"!=typeof self&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function Ue(){return"http:"===Ct()||"https:"===Ct()}function Ct(){var w;return"undefined"!=typeof self&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class tt{constructor(g,v){this.shortDelay=g,this.longDelay=v,Me(v>g,"Short delay should be less than long delay!"),this.isMobile=(0,G.uI)()||(0,G.b$)()}get(){return function an(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Ue()||(0,G.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function xn(w,g){Me(w.emulator,"Emulator should always be set here");const{url:v}=w.emulator;return g?`${v}${g.startsWith("/")?g.slice(1):g}`:v}class Jn{static initialize(g,v,E){this.fetchImpl=g,v&&(this.headersImpl=v),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void _e("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void _e("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void _e("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Sn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},fn=new tt(3e4,6e4);function qt(w,g){return w.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:w.tenantId}):g}function cn(w,g,v,E){return jn.apply(this,arguments)}function jn(){return(jn=(0,c.Z)(function*(w,g,v,E,k={}){return ds(w,k,(0,c.Z)(function*(){let B={},ie={};E&&("GET"===g?ie=E:B={body:JSON.stringify(E)});const Ie=(0,G.xO)(Object.assign({key:w.config.apiKey},ie)).slice(1),st=yield w._getAdditionalHeaders();return st["Content-Type"]="application/json",w.languageCode&&(st["X-Firebase-Locale"]=w.languageCode),Jn.fetch()(qr(w,w.config.apiHost,v,Ie),Object.assign({method:g,headers:st,referrerPolicy:"no-referrer"},B))}))})).apply(this,arguments)}function ds(w,g,v){return rr.apply(this,arguments)}function rr(){return(rr=(0,c.Z)(function*(w,g,v){w._canInitEmulator=!1;const E=Object.assign(Object.assign({},Sn),g);try{const k=new hs(w),B=yield Promise.race([v(),k.promise]);k.clearNetworkTimeout();const ie=yield B.json();if("needConfirmation"in ie)throw ei(w,"account-exists-with-different-credential",ie);if(B.ok&&!("errorMessage"in ie))return ie;{const Ie=B.ok?ie.errorMessage:ie.error.message,[st,xt]=Ie.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===st)throw ei(w,"credential-already-in-use",ie);if("EMAIL_EXISTS"===st)throw ei(w,"email-already-in-use",ie);if("USER_DISABLED"===st)throw ei(w,"user-disabled",ie);const Kt=E[st]||st.toLowerCase().replace(/[_\s]+/g,"-");if(xt)throw Oe(w,Kt,xt);We(w,Kt)}}catch(k){if(k instanceof G.ZR)throw k;We(w,"network-request-failed")}})).apply(this,arguments)}function qn(w,g,v,E){return xs.apply(this,arguments)}function xs(){return(xs=(0,c.Z)(function*(w,g,v,E,k={}){const B=yield cn(w,g,v,E,k);return"mfaPendingCredential"in B&&We(w,"multi-factor-auth-required",{_serverResponse:B}),B})).apply(this,arguments)}function qr(w,g,v,E){const k=`${g}${v}?${E}`;return w.config.emulator?xn(w.config,k):`${w.config.apiScheme}://${k}`}class hs{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((v,E)=>{this.timer=setTimeout(()=>E(Fe(this.auth,"network-request-failed")),fn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ei(w,g,v){const E={appName:w.name};v.email&&(E.email=v.email),v.phoneNumber&&(E.phoneNumber=v.phoneNumber);const k=Fe(w,g,E);return k.customData._tokenResponse=v,k}function Dt(){return(Dt=(0,c.Z)(function*(w,g){return cn(w,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function fr(w,g){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,c.Z)(function*(w,g){return cn(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function pn(w,g){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,c.Z)(function*(w,g){return cn(w,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function Si(w){if(w)try{const g=new Date(Number(w));if(!isNaN(g.getTime()))return g.toUTCString()}catch(g){}}function Mi(){return(Mi=(0,c.Z)(function*(w,g=!1){const v=(0,G.m9)(w),E=yield v.getIdToken(g),k=Xt(E);re(k&&k.exp&&k.auth_time&&k.iat,v.auth,"internal-error");const B="object"==typeof k.firebase?k.firebase:void 0,ie=null==B?void 0:B.sign_in_provider;return{claims:k,token:E,authTime:Si(Hs(k.auth_time)),issuedAtTime:Si(Hs(k.iat)),expirationTime:Si(Hs(k.exp)),signInProvider:ie||null,signInSecondFactor:(null==B?void 0:B.sign_in_second_factor)||null}})).apply(this,arguments)}function Hs(w){return 1e3*Number(w)}function Xt(w){var g;const[v,E,k]=w.split(".");if(void 0===v||void 0===E||void 0===k)return Ze("JWT malformed, contained fewer than 3 sections"),null;try{const B=(0,G.tV)(E);return B?JSON.parse(B):(Ze("Failed to decode base64 JWT payload"),null)}catch(B){return Ze("Caught error parsing JWT payload as JSON",null===(g=B)||void 0===g?void 0:g.toString()),null}}function dt(w,g){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,c.Z)(function*(w,g,v=!1){if(v)return g;try{return yield g}catch(E){throw E instanceof G.ZR&&Yr(E)&&w.auth.currentUser===w&&(yield w.auth.signOut()),E}})).apply(this,arguments)}function Yr({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}class Jt{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var v;if(g){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const k=(null!==(v=this.user.stsTokenManager.expirationTime)&&void 0!==v?v:0)-Date.now()-3e5;return Math.max(0,k)}}schedule(g=!1){var v=this;if(!this.isRunning)return;const E=this.getInterval(g);this.timerId=setTimeout((0,c.Z)(function*(){yield v.iteration()}),E)}iteration(){var g=this;return(0,c.Z)(function*(){var v;try{yield g.user.getIdToken(!0)}catch(E){return void("auth/network-request-failed"===(null===(v=E)||void 0===v?void 0:v.code)&&g.schedule(!0))}g.schedule()})()}}class fs{constructor(g,v){this.createdAt=g,this.lastLoginAt=v,this._initializeTime()}_initializeTime(){this.lastSignInTime=Si(this.lastLoginAt),this.creationTime=Si(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function fi(w){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,c.Z)(function*(w){var g;const v=w.auth,E=yield w.getIdToken(),k=yield dt(w,pn(v,{idToken:E}));re(null==k?void 0:k.users.length,v,"internal-error");const B=k.users[0];w._notifyReloadListener(B);const ie=(null===(g=B.providerUserInfo)||void 0===g?void 0:g.length)?ee(B.providerUserInfo):[],Ie=z(w.providerData,ie),Kt=!!w.isAnonymous&&!(w.email&&B.passwordHash||(null==Ie?void 0:Ie.length)),zn={uid:B.localId,displayName:B.displayName||null,photoURL:B.photoUrl||null,email:B.email||null,emailVerified:B.emailVerified||!1,phoneNumber:B.phoneNumber||null,tenantId:B.tenantId||null,providerData:Ie,metadata:new fs(B.createdAt,B.lastLoginAt),isAnonymous:Kt};Object.assign(w,zn)})).apply(this,arguments)}function K(){return(K=(0,c.Z)(function*(w){const g=(0,G.m9)(w);yield fi(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function z(w,g){return[...w.filter(E=>!g.some(k=>k.providerId===E.providerId)),...g]}function ee(w){return w.map(g=>{var{providerId:v}=g,E=(0,de._T)(g,["providerId"]);return{providerId:v,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function H(){return(H=(0,c.Z)(function*(w,g){const v=yield ds(w,{},(0,c.Z)(function*(){const E=(0,G.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:k,apiKey:B}=w.config,ie=qr(w,k,"/v1/token",`key=${B}`),Ie=yield w._getAdditionalHeaders();return Ie["Content-Type"]="application/x-www-form-urlencoded",Jn.fetch()(ie,{method:"POST",headers:Ie,body:E})}));return{accessToken:v.access_token,expiresIn:v.expires_in,refreshToken:v.refresh_token}})).apply(this,arguments)}class Ee{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){re(g.idToken,"internal-error"),re(void 0!==g.idToken,"internal-error"),re(void 0!==g.refreshToken,"internal-error");const v="expiresIn"in g&&void 0!==g.expiresIn?Number(g.expiresIn):function yt(w){const g=Xt(w);return re(g,"internal-error"),re(void 0!==g.exp,"internal-error"),re(void 0!==g.iat,"internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,v)}getToken(g,v=!1){var E=this;return(0,c.Z)(function*(){return re(!E.accessToken||E.refreshToken,g,"user-token-expired"),v||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(g,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,v){var E=this;return(0,c.Z)(function*(){const{accessToken:k,refreshToken:B,expiresIn:ie}=yield function te(w,g){return H.apply(this,arguments)}(g,v);E.updateTokensAndExpiration(k,B,Number(ie))})()}updateTokensAndExpiration(g,v,E){this.refreshToken=v||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(g,v){const{refreshToken:E,accessToken:k,expirationTime:B}=v,ie=new Ee;return E&&(re("string"==typeof E,"internal-error",{appName:g}),ie.refreshToken=E),k&&(re("string"==typeof k,"internal-error",{appName:g}),ie.accessToken=k),B&&(re("number"==typeof B,"internal-error",{appName:g}),ie.expirationTime=B),ie}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new Ee,this.toJSON())}_performRefresh(){return _e("not implemented")}}function Ge(w,g){re("string"==typeof w||void 0===w,"internal-error",{appName:g})}class ut{constructor(g){var{uid:v,auth:E,stsTokenManager:k}=g,B=(0,de._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Jt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=v,this.auth=E,this.stsTokenManager=k,this.accessToken=k.accessToken,this.displayName=B.displayName||null,this.email=B.email||null,this.emailVerified=B.emailVerified||!1,this.phoneNumber=B.phoneNumber||null,this.photoURL=B.photoURL||null,this.isAnonymous=B.isAnonymous||!1,this.tenantId=B.tenantId||null,this.providerData=B.providerData?[...B.providerData]:[],this.metadata=new fs(B.createdAt||void 0,B.lastLoginAt||void 0)}getIdToken(g){var v=this;return(0,c.Z)(function*(){const E=yield dt(v,v.stsTokenManager.getToken(v.auth,g));return re(E,v.auth,"internal-error"),v.accessToken!==E&&(v.accessToken=E,yield v.auth._persistUserIfCurrent(v),v.auth._notifyListenersIfCurrent(v)),E})()}getIdTokenResult(g){return function Vn(w){return Mi.apply(this,arguments)}(this,g)}reload(){return function bt(w){return K.apply(this,arguments)}(this)}_assign(g){this!==g&&(re(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(v=>Object.assign({},v)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new ut(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,v=!1){var E=this;return(0,c.Z)(function*(){let k=!1;g.idToken&&g.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(g),k=!0),v&&(yield fi(E)),yield E.auth._persistUserIfCurrent(E),k&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var g=this;return(0,c.Z)(function*(){const v=yield g.getIdToken();return yield dt(g,function Ss(w,g){return Dt.apply(this,arguments)}(g.auth,{idToken:v})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,v){var E,k,B,ie,Ie,st,xt,Kt;const zn=null!==(E=v.displayName)&&void 0!==E?E:void 0,cr=null!==(k=v.email)&&void 0!==k?k:void 0,oo=null!==(B=v.phoneNumber)&&void 0!==B?B:void 0,Gf=null!==(ie=v.photoURL)&&void 0!==ie?ie:void 0,Qd=null!==(Ie=v.tenantId)&&void 0!==Ie?Ie:void 0,Eu=null!==(st=v._redirectEventId)&&void 0!==st?st:void 0,Xd=null!==(xt=v.createdAt)&&void 0!==xt?xt:void 0,zf=null!==(Kt=v.lastLoginAt)&&void 0!==Kt?Kt:void 0,{uid:Du,emailVerified:Jd,isAnonymous:$f,providerData:Vo,stsTokenManager:qf}=v;re(Du&&qf,g,"internal-error");const Wf=Ee.fromJSON(this.name,qf);re("string"==typeof Du,g,"internal-error"),Ge(zn,g.name),Ge(cr,g.name),re("boolean"==typeof Jd,g,"internal-error"),re("boolean"==typeof $f,g,"internal-error"),Ge(oo,g.name),Ge(Gf,g.name),Ge(Qd,g.name),Ge(Eu,g.name),Ge(Xd,g.name),Ge(zf,g.name);const Yf=new ut({uid:Du,auth:g,email:cr,emailVerified:Jd,displayName:zn,isAnonymous:$f,photoURL:Gf,phoneNumber:oo,tenantId:Qd,stsTokenManager:Wf,createdAt:Xd,lastLoginAt:zf});return Vo&&Array.isArray(Vo)&&(Yf.providerData=Vo.map(Xn=>Object.assign({},Xn))),Eu&&(Yf._redirectEventId=Eu),Yf}static _fromIdTokenResponse(g,v,E=!1){return(0,c.Z)(function*(){const k=new Ee;k.updateFromServerResponse(v);const B=new ut({uid:v.localId,auth:g,stsTokenManager:k,isAnonymous:E});return yield fi(B),B})()}}const ln=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,c.Z)(function*(){return!0})()}_set(v,E){var k=this;return(0,c.Z)(function*(){k.storage[v]=E})()}_get(v){var E=this;return(0,c.Z)(function*(){const k=E.storage[v];return void 0===k?null:k})()}_remove(v){var E=this;return(0,c.Z)(function*(){delete E.storage[v]})()}_addListener(v,E){}_removeListener(v,E){}}return w.type="NONE",w})();function Tn(w,g,v){return`firebase:${w}:${g}:${v}`}class Wt{constructor(g,v,E){this.persistence=g,this.auth=v,this.userKey=E;const{config:k,name:B}=this.auth;this.fullUserKey=Tn(this.userKey,k.apiKey,B),this.fullPersistenceKey=Tn("persistence",k.apiKey,B),this.boundEventHandler=v._onStorageEvent.bind(v),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,c.Z)(function*(){const v=yield g.persistence._get(g.fullUserKey);return v?ut._fromJSON(g.auth,v):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var v=this;return(0,c.Z)(function*(){if(v.persistence===g)return;const E=yield v.getCurrentUser();return yield v.removeCurrentUser(),v.persistence=g,E?v.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,v,E="authUser"){return(0,c.Z)(function*(){if(!v.length)return new Wt(se(ln),g,E);const k=(yield Promise.all(v.map(function(){var xt=(0,c.Z)(function*(Kt){if(yield Kt._isAvailable())return Kt});return function(Kt){return xt.apply(this,arguments)}}()))).filter(xt=>xt);let B=k[0]||se(ln);const ie=Tn(E,g.config.apiKey,g.name);let Ie=null;for(const xt of v)try{const Kt=yield xt._get(ie);if(Kt){const zn=ut._fromJSON(g,Kt);xt!==B&&(Ie=zn),B=xt;break}}catch(Kt){}const st=k.filter(xt=>xt._shouldAllowMigration);return B._shouldAllowMigration&&st.length?(B=st[0],Ie&&(yield B._set(ie,Ie.toJSON())),yield Promise.all(v.map(function(){var xt=(0,c.Z)(function*(Kt){if(Kt!==B)try{yield Kt._remove(ie)}catch(zn){}});return function(Kt){return xt.apply(this,arguments)}}())),new Wt(B,g,E)):new Wt(B,g,E)})()}}function ce(w){const g=w.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(Je(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(Z(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(kt(g))return"Blackberry";if(nn(g))return"Webos";if(Y(g))return"Safari";if((g.includes("chrome/")||ke(g))&&!g.includes("edge/"))return"Chrome";if(_t(g))return"Android";{const E=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==E?void 0:E.length))return E[1]}return"Other"}function Z(w=(0,G.z$)()){return/firefox\//i.test(w)}function Y(w=(0,G.z$)()){const g=w.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function ke(w=(0,G.z$)()){return/crios\//i.test(w)}function Je(w=(0,G.z$)()){return/iemobile/i.test(w)}function _t(w=(0,G.z$)()){return/android/i.test(w)}function kt(w=(0,G.z$)()){return/blackberry/i.test(w)}function nn(w=(0,G.z$)()){return/webos/i.test(w)}function Yt(w=(0,G.z$)()){return/iphone|ipad|ipod/i.test(w)}function pi(w=(0,G.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}function sr(w=(0,G.z$)()){return Yt(w)||_t(w)||nn(w)||kt(w)||/windows phone/i.test(w)||Je(w)}function Pi(w,g=[]){let v;switch(w){case"Browser":v=ce((0,G.z$)());break;case"Worker":v=`${ce((0,G.z$)())}-${w}`;break;default:v=w}const E=g.length?g.join(","):"FirebaseCore-web";return`${v}/JsCore/${N.SDK_VERSION}/${E}`}class ml{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,v){const E=B=>new Promise((ie,Ie)=>{try{ie(g(B))}catch(st){Ie(st)}});E.onAbort=v,this.queue.push(E);const k=this.queue.length-1;return()=>{this.queue[k]=()=>Promise.resolve()}}runMiddleware(g){var v=this;return(0,c.Z)(function*(){var E;if(v.auth.currentUser===g)return;const k=[];try{for(const B of v.queue)yield B(g),B.onAbort&&k.push(B.onAbort)}catch(B){k.reverse();for(const ie of k)try{ie()}catch(Ie){}throw v.auth._errorFactory.create("login-blocked",{originalMessage:null===(E=B)||void 0===E?void 0:E.message})}})()}}class Fr{constructor(g,v,E){this.app=g,this.heartbeatServiceProvider=v,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zt(this),this.idTokenSubscription=new zt(this),this.beforeStateQueue=new ml(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qe,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(g,v){var E=this;return v&&(this._popupRedirectResolver=se(v)),this._initializationPromise=this.queue((0,c.Z)(function*(){var k,B;if(!E._deleted&&(E.persistenceManager=yield Wt.create(E,g),!E._deleted)){if(null===(k=E._popupRedirectResolver)||void 0===k?void 0:k._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch(ie){}yield E.initializeCurrentUser(v),E.lastNotifiedUid=(null===(B=E.currentUser)||void 0===B?void 0:B.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,c.Z)(function*(){if(g._deleted)return;const v=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||v){if(g.currentUser&&v&&g.currentUser.uid===v.uid)return g._currentUser._assign(v),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(v,!0)}})()}initializeCurrentUser(g){var v=this;return(0,c.Z)(function*(){var E;const k=yield v.assertedPersistence.getCurrentUser();let B=k,ie=!1;if(g&&v.config.authDomain){yield v.getOrInitRedirectPersistenceManager();const Ie=null===(E=v.redirectUser)||void 0===E?void 0:E._redirectEventId,st=null==B?void 0:B._redirectEventId,xt=yield v.tryRedirectSignIn(g);(!Ie||Ie===st)&&(null==xt?void 0:xt.user)&&(B=xt.user,ie=!0)}if(!B)return v.directlySetCurrentUser(null);if(!B._redirectEventId){if(ie)try{yield v.beforeStateQueue.runMiddleware(B)}catch(Ie){B=k,v._popupRedirectResolver._overrideRedirectResult(v,()=>Promise.reject(Ie))}return B?v.reloadAndSetCurrentUserOrClear(B):v.directlySetCurrentUser(null)}return re(v._popupRedirectResolver,v,"argument-error"),yield v.getOrInitRedirectPersistenceManager(),v.redirectUser&&v.redirectUser._redirectEventId===B._redirectEventId?v.directlySetCurrentUser(B):v.reloadAndSetCurrentUserOrClear(B)})()}tryRedirectSignIn(g){var v=this;return(0,c.Z)(function*(){let E=null;try{E=yield v._popupRedirectResolver._completeRedirectFn(v,g,!0)}catch(k){yield v._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(g){var v=this;return(0,c.Z)(function*(){var E;try{yield fi(g)}catch(k){if("auth/network-request-failed"!==(null===(E=k)||void 0===E?void 0:E.code))return v.directlySetCurrentUser(null)}return v.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function $t(){if("undefined"==typeof navigator)return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var g=this;return(0,c.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var v=this;return(0,c.Z)(function*(){const E=g?(0,G.m9)(g):null;return E&&re(E.auth.config.apiKey===v.config.apiKey,v,"invalid-user-token"),v._updateCurrentUser(E&&E._clone(v))})()}_updateCurrentUser(g,v=!1){var E=this;return(0,c.Z)(function*(){if(!E._deleted)return g&&re(E.tenantId===g.tenantId,E,"tenant-id-mismatch"),v||(yield E.beforeStateQueue.runMiddleware(g)),E.queue((0,c.Z)(function*(){yield E.directlySetCurrentUser(g),E.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,c.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var v=this;return this.queue((0,c.Z)(function*(){yield v.assertedPersistence.setPersistence(se(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new G.LL("auth","Firebase",g())}onAuthStateChanged(g,v,E){return this.registerStateListener(this.authStateSubscription,g,v,E)}beforeAuthStateChanged(g,v){return this.beforeStateQueue.pushCallback(g,v)}onIdTokenChanged(g,v,E){return this.registerStateListener(this.idTokenSubscription,g,v,E)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,v){var E=this;return(0,c.Z)(function*(){const k=yield E.getOrInitRedirectPersistenceManager(v);return null===g?k.removeCurrentUser():k.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var v=this;return(0,c.Z)(function*(){if(!v.redirectPersistenceManager){const E=g&&se(g)||v._popupRedirectResolver;re(E,v,"argument-error"),v.redirectPersistenceManager=yield Wt.create(v,[se(E._redirectPersistence)],"redirectUser"),v.redirectUser=yield v.redirectPersistenceManager.getCurrentUser()}return v.redirectPersistenceManager})()}_redirectUserForId(g){var v=this;return(0,c.Z)(function*(){var E,k;return v._isInitialized&&(yield v.queue((0,c.Z)(function*(){}))),(null===(E=v._currentUser)||void 0===E?void 0:E._redirectEventId)===g?v._currentUser:(null===(k=v.redirectUser)||void 0===k?void 0:k._redirectEventId)===g?v.redirectUser:null})()}_persistUserIfCurrent(g){var v=this;return(0,c.Z)(function*(){if(g===v.currentUser)return v.queue((0,c.Z)(function*(){return v.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,v;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(v=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==v?v:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,v,E,k){if(this._deleted)return()=>{};const B="function"==typeof v?v:v.next.bind(v),ie=this._isInitialized?Promise.resolve():this._initializationPromise;return re(ie,this,"internal-error"),ie.then(()=>B(this.currentUser)),"function"==typeof v?g.addObserver(v,E,k):g.addObserver(v)}directlySetCurrentUser(g){var v=this;return(0,c.Z)(function*(){v.currentUser&&v.currentUser!==g&&(v._currentUser._stopProactiveRefresh(),g&&v.isProactiveRefreshEnabled&&g._startProactiveRefresh()),v.currentUser=g,g?yield v.assertedPersistence.setCurrentUser(g):yield v.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Pi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,c.Z)(function*(){var v;const E={"X-Client-Version":g.clientVersion};g.app.options.appId&&(E["X-Firebase-gmpid"]=g.app.options.appId);const k=yield null===(v=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===v?void 0:v.getHeartbeatsHeader();return k&&(E["X-Firebase-Client"]=k),E})()}}function ze(w){return(0,G.m9)(w)}class zt{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,G.ne)(v=>this.observer=v)}get next(){return re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Pn(w,g,v){const E=ze(w);re(E._canInitEmulator,E,"emulator-config-failed"),re(/^https?:\/\//.test(g),E,"invalid-emulator-scheme");const k=!!(null==v?void 0:v.disableWarnings),B=mr(g),{host:ie,port:Ie}=function js(w){const g=mr(w),v=/(\/\/)?([^?#/]+)/.exec(w.substr(g.length));if(!v)return{host:"",port:null};const E=v[2].split("@").pop()||"",k=/^(\[[^\]]+\])(:|$)/.exec(E);if(k){const B=k[1];return{host:B,port:mi(E.substr(B.length+1))}}{const[B,ie]=E.split(":");return{host:B,port:mi(ie)}}}(g);E.config.emulator={url:`${B}//${ie}${null===Ie?"":`:${Ie}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:ie,port:Ie,protocol:B.replace(":",""),options:Object.freeze({disableWarnings:k})}),k||function Gs(){function w(){const g=document.createElement("p"),v=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",v.position="fixed",v.width="100%",v.backgroundColor="#ffffff",v.border=".1em solid #000000",v.color="#b50000",v.bottom="0px",v.left="0px",v.margin="0px",v.zIndex="10000",v.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}function mr(w){const g=w.indexOf(":");return g<0?"":w.substr(0,g+1)}function mi(w){if(!w)return null;const g=Number(w);return isNaN(g)?null:g}class wn{constructor(g,v){this.providerId=g,this.signInMethod=v}toJSON(){return _e("not implemented")}_getIdTokenResponse(g){return _e("not implemented")}_linkToIdToken(g,v){return _e("not implemented")}_getReauthenticationResolver(g){return _e("not implemented")}}function Jo(w,g){return ti.apply(this,arguments)}function ti(){return(ti=(0,c.Z)(function*(w,g){return cn(w,"POST","/v1/accounts:resetPassword",qt(w,g))})).apply(this,arguments)}function Ht(w,g){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,c.Z)(function*(w,g){return cn(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Ma(w,g){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,c.Z)(function*(w,g){return cn(w,"POST","/v1/accounts:update",qt(w,g))})).apply(this,arguments)}function bi(){return(bi=(0,c.Z)(function*(w,g){return qn(w,"POST","/v1/accounts:signInWithPassword",qt(w,g))})).apply(this,arguments)}function xo(w,g){return ea.apply(this,arguments)}function ea(){return(ea=(0,c.Z)(function*(w,g){return cn(w,"POST","/v1/accounts:sendOobCode",qt(w,g))})).apply(this,arguments)}function Ni(w,g){return In.apply(this,arguments)}function In(){return(In=(0,c.Z)(function*(w,g){return xo(w,g)})).apply(this,arguments)}function bd(w,g){return ta.apply(this,arguments)}function ta(){return(ta=(0,c.Z)(function*(w,g){return xo(w,g)})).apply(this,arguments)}function Lr(w,g){return gr.apply(this,arguments)}function gr(){return(gr=(0,c.Z)(function*(w,g){return xo(w,g)})).apply(this,arguments)}function wd(w,g){return sc.apply(this,arguments)}function sc(){return(sc=(0,c.Z)(function*(w,g){return xo(w,g)})).apply(this,arguments)}function Zr(){return(Zr=(0,c.Z)(function*(w,g){return qn(w,"POST","/v1/accounts:signInWithEmailLink",qt(w,g))})).apply(this,arguments)}function Ed(){return(Ed=(0,c.Z)(function*(w,g){return qn(w,"POST","/v1/accounts:signInWithEmailLink",qt(w,g))})).apply(this,arguments)}class oc extends wn{constructor(g,v,E,k=null){super("password",E),this._email=g,this._password=v,this._tenantId=k}static _fromEmailAndPassword(g,v){return new oc(g,v,"password")}static _fromEmailAndCode(g,v,E=null){return new oc(g,v,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const v="string"==typeof g?JSON.parse(g):g;if((null==v?void 0:v.email)&&(null==v?void 0:v.password)){if("password"===v.signInMethod)return this._fromEmailAndPassword(v.email,v.password);if("emailLink"===v.signInMethod)return this._fromEmailAndCode(v.email,v.password,v.tenantId)}return null}_getIdTokenResponse(g){var v=this;return(0,c.Z)(function*(){switch(v.signInMethod){case"password":return function Ia(w,g){return bi.apply(this,arguments)}(g,{returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function So(w,g){return Zr.apply(this,arguments)}(g,{email:v._email,oobCode:v._password});default:We(g,"internal-error")}})()}_linkToIdToken(g,v){var E=this;return(0,c.Z)(function*(){switch(E.signInMethod){case"password":return Ht(g,{idToken:v,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function Cd(w,g){return Ed.apply(this,arguments)}(g,{idToken:v,email:E._email,oobCode:E._password});default:We(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function wi(w,g){return Dd.apply(this,arguments)}function Dd(){return(Dd=(0,c.Z)(function*(w,g){return qn(w,"POST","/v1/accounts:signInWithIdp",qt(w,g))})).apply(this,arguments)}class zs extends wn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const v=new zs(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(v.idToken=g.idToken),g.accessToken&&(v.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(v.nonce=g.nonce),g.pendingToken&&(v.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(v.accessToken=g.oauthToken,v.secret=g.oauthTokenSecret):We("argument-error"),v}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const v="string"==typeof g?JSON.parse(g):g,{providerId:E,signInMethod:k}=v,B=(0,de._T)(v,["providerId","signInMethod"]);if(!E||!k)return null;const ie=new zs(E,k);return ie.idToken=B.idToken||void 0,ie.accessToken=B.accessToken||void 0,ie.secret=B.secret,ie.nonce=B.nonce,ie.pendingToken=B.pendingToken||null,ie}_getIdTokenResponse(g){return wi(g,this.buildRequest())}_linkToIdToken(g,v){const E=this.buildRequest();return E.idToken=v,wi(g,E)}_getReauthenticationResolver(g){const v=this.buildRequest();return v.autoCreate=!1,wi(g,v)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const v={};this.idToken&&(v.id_token=this.idToken),this.accessToken&&(v.access_token=this.accessToken),this.secret&&(v.oauth_token_secret=this.secret),v.providerId=this.providerId,this.nonce&&!this.pendingToken&&(v.nonce=this.nonce),g.postBody=(0,G.xO)(v)}return g}}function og(w,g){return xd.apply(this,arguments)}function xd(){return(xd=(0,c.Z)(function*(w,g){return cn(w,"POST","/v1/accounts:sendVerificationCode",qt(w,g))})).apply(this,arguments)}function gl(){return(gl=(0,c.Z)(function*(w,g){return qn(w,"POST","/v1/accounts:signInWithPhoneNumber",qt(w,g))})).apply(this,arguments)}function Sd(){return(Sd=(0,c.Z)(function*(w,g){const v=yield qn(w,"POST","/v1/accounts:signInWithPhoneNumber",qt(w,g));if(v.temporaryProof)throw ei(w,"account-exists-with-different-credential",v);return v})).apply(this,arguments)}const lg={USER_NOT_FOUND:"user-not-found"};function Md(){return(Md=(0,c.Z)(function*(w,g){return qn(w,"POST","/v1/accounts:signInWithPhoneNumber",qt(w,Object.assign(Object.assign({},g),{operation:"REAUTH"})),lg)})).apply(this,arguments)}class ka extends wn{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,v){return new ka({verificationId:g,verificationCode:v})}static _fromTokenResponse(g,v){return new ka({phoneNumber:g,temporaryProof:v})}_getIdTokenResponse(g){return function ag(w,g){return gl.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,v){return function Aa(w,g){return Sd.apply(this,arguments)}(g,Object.assign({idToken:v},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function cg(w,g){return Md.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:v,verificationId:E,verificationCode:k}=this.params;return g&&v?{temporaryProof:g,phoneNumber:v}:{sessionInfo:E,code:k}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:v,verificationCode:E,phoneNumber:k,temporaryProof:B}=g;return E||v||k||B?new ka({verificationId:v,verificationCode:E,phoneNumber:k,temporaryProof:B}):null}}class $s{constructor(g){var v,E,k,B,ie,Ie;const st=(0,G.zd)((0,G.pd)(g)),xt=null!==(v=st.apiKey)&&void 0!==v?v:null,Kt=null!==(E=st.oobCode)&&void 0!==E?E:null,zn=function ug(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(k=st.mode)&&void 0!==k?k:null);re(xt&&Kt&&zn,"argument-error"),this.apiKey=xt,this.operation=zn,this.code=Kt,this.continueUrl=null!==(B=st.continueUrl)&&void 0!==B?B:null,this.languageCode=null!==(ie=st.languageCode)&&void 0!==ie?ie:null,this.tenantId=null!==(Ie=st.tenantId)&&void 0!==Ie?Ie:null}static parseLink(g){const v=function Af(w){const g=(0,G.zd)((0,G.pd)(w)).link,v=g?(0,G.zd)((0,G.pd)(g)).deep_link_id:null,E=(0,G.zd)((0,G.pd)(w)).deep_link_id;return(E?(0,G.zd)((0,G.pd)(E)).link:null)||E||v||g||w}(g);try{return new $s(v)}catch(E){return null}}}let _l=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(v,E){return oc._fromEmailAndPassword(v,E)}static credentialWithLink(v,E){const k=$s.parseLink(E);return re(k,"argument-error"),oc._fromEmailAndCode(v,k.code,k.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class Mo{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class Kr extends Mo{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class Ra extends Kr{static credentialFromJSON(g){const v="string"==typeof g?JSON.parse(g):g;return re("providerId"in v&&"signInMethod"in v,"argument-error"),zs._fromParams(v)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return re(g.idToken||g.accessToken,"argument-error"),zs._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return Ra.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return Ra.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:v,oauthAccessToken:E,oauthTokenSecret:k,pendingToken:B,nonce:ie,providerId:Ie}=g;if(!E&&!k&&!v&&!B||!Ie)return null;try{return new Ra(Ie)._credential({idToken:v,accessToken:E,nonce:ie,pendingToken:B})}catch(st){return null}}}let vl=(()=>{class w extends Kr{constructor(){super("facebook.com")}static credential(v){return zs._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return w.credentialFromTaggedObject(v)}static credentialFromError(v){return w.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return w.credential(v.oauthAccessToken)}catch(E){return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),yl=(()=>{class w extends Kr{constructor(){super("google.com"),this.addScope("profile")}static credential(v,E){return zs._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:v,accessToken:E})}static credentialFromResult(v){return w.credentialFromTaggedObject(v)}static credentialFromError(v){return w.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthIdToken:E,oauthAccessToken:k}=v;if(!E&&!k)return null;try{return w.credential(E,k)}catch(B){return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),kf=(()=>{class w extends Kr{constructor(){super("github.com")}static credential(v){return zs._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return w.credentialFromTaggedObject(v)}static credentialFromError(v){return w.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return w.credential(v.oauthAccessToken)}catch(E){return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class Zn extends wn{constructor(g,v){super(g,g),this.pendingToken=v}_getIdTokenResponse(g){return wi(g,this.buildRequest())}_linkToIdToken(g,v){const E=this.buildRequest();return E.idToken=v,wi(g,E)}_getReauthenticationResolver(g){const v=this.buildRequest();return v.autoCreate=!1,wi(g,v)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const v="string"==typeof g?JSON.parse(g):g,{providerId:E,signInMethod:k,pendingToken:B}=v;return E&&k&&B&&E===k?new Zn(E,B):null}static _create(g,v){return new Zn(g,v)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class qs extends Mo{constructor(g){re(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return qs.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return qs.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const v=Zn.fromJSON(g);return re(v,"argument-error"),v}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:v,providerId:E}=g;if(!v||!E)return null;try{return Zn._create(E,v)}catch(k){return null}}}let ps=(()=>{class w extends Kr{constructor(){super("twitter.com")}static credential(v,E){return zs._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:v,oauthTokenSecret:E})}static credentialFromResult(v){return w.credentialFromTaggedObject(v)}static credentialFromError(v){return w.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthAccessToken:E,oauthTokenSecret:k}=v;if(!E||!k)return null;try{return w.credential(E,k)}catch(B){return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function Id(w,g){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,c.Z)(function*(w,g){return qn(w,"POST","/v1/accounts:signUp",qt(w,g))})).apply(this,arguments)}class or{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,v,E,k=!1){return(0,c.Z)(function*(){const B=yield ut._fromIdTokenResponse(g,E,k),ie=Ad(E);return new or({user:B,providerId:ie,_tokenResponse:E,operationType:v})})()}static _forOperation(g,v,E){return(0,c.Z)(function*(){yield g._updateTokensIfNecessary(E,!0);const k=Ad(E);return new or({user:g,providerId:k,_tokenResponse:E,operationType:v})})()}}function Ad(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function kd(w){return ac.apply(this,arguments)}function ac(){return(ac=(0,c.Z)(function*(w){var g;const v=ze(w);if(yield v._initializationPromise,null===(g=v.currentUser)||void 0===g?void 0:g.isAnonymous)return new or({user:v.currentUser,providerId:null,operationType:"signIn"});const E=yield Id(v,{returnSecureToken:!0}),k=yield or._fromIdTokenResponse(v,"signIn",E,!0);return yield v._updateCurrentUser(k.user),k})).apply(this,arguments)}class lc extends G.ZR{constructor(g,v,E,k){var B;super(v.code,v.message),this.operationType=E,this.user=k,Object.setPrototypeOf(this,lc.prototype),this.customData={appName:g.name,tenantId:null!==(B=g.tenantId)&&void 0!==B?B:void 0,_serverResponse:v.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(g,v,E,k){return new lc(g,v,E,k)}}function cc(w,g,v,E){return("reauthenticate"===g?v._getReauthenticationResolver(w):v._getIdTokenResponse(w)).catch(B=>{throw"auth/multi-factor-auth-required"===B.code?lc._fromErrorAndOperation(w,B,g,E):B})}function ru(w){return new Set(w.map(({providerId:g})=>g).filter(g=>!!g))}function Ws(w,g){return su.apply(this,arguments)}function su(){return(su=(0,c.Z)(function*(w,g){const v=(0,G.m9)(w);yield To(!0,v,g);const{providerUserInfo:E}=yield fr(v.auth,{idToken:yield v.getIdToken(),deleteProvider:[g]}),k=ru(E||[]);return v.providerData=v.providerData.filter(B=>k.has(B.providerId)),k.has("phone")||(v.phoneNumber=null),yield v.auth._persistUserIfCurrent(v),v})).apply(this,arguments)}function Nn(w,g){return bl.apply(this,arguments)}function bl(){return(bl=(0,c.Z)(function*(w,g,v=!1){const E=yield dt(w,g._linkToIdToken(w.auth,yield w.getIdToken()),v);return or._forOperation(w,"link",E)})).apply(this,arguments)}function To(w,g,v){return An.apply(this,arguments)}function An(){return(An=(0,c.Z)(function*(w,g,v){yield fi(g);const k=!1===w?"provider-already-linked":"no-such-provider";re(ru(g.providerData).has(v)===w,g.auth,k)})).apply(this,arguments)}function uc(w,g){return wl.apply(this,arguments)}function wl(){return(wl=(0,c.Z)(function*(w,g,v=!1){var E;const{auth:k}=w,B="reauthenticate";try{const ie=yield dt(w,cc(k,B,g,w),v);re(ie.idToken,k,"internal-error");const Ie=Xt(ie.idToken);re(Ie,k,"internal-error");const{sub:st}=Ie;return re(w.uid===st,k,"user-mismatch"),or._forOperation(w,B,ie)}catch(ie){throw"auth/user-not-found"===(null===(E=ie)||void 0===E?void 0:E.code)&&We(k,"user-mismatch"),ie}})).apply(this,arguments)}function na(w,g){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,c.Z)(function*(w,g,v=!1){const E="signIn",k=yield cc(w,E,g),B=yield or._fromIdTokenResponse(w,E,k);return v||(yield w._updateCurrentUser(B.user)),B})).apply(this,arguments)}function dc(w,g){return ni.apply(this,arguments)}function ni(){return(ni=(0,c.Z)(function*(w,g){return na(ze(w),g)})).apply(this,arguments)}function Ys(w,g){return Li.apply(this,arguments)}function Li(){return(Li=(0,c.Z)(function*(w,g){const v=(0,G.m9)(w);return yield To(!1,v,g.providerId),Nn(v,g)})).apply(this,arguments)}function Oa(w,g){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,c.Z)(function*(w,g){return uc((0,G.m9)(w),g)})).apply(this,arguments)}function ou(w,g){return Br.apply(this,arguments)}function Br(){return(Br=(0,c.Z)(function*(w,g){return qn(w,"POST","/v1/accounts:signInWithCustomToken",qt(w,g))})).apply(this,arguments)}function Io(w,g){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,c.Z)(function*(w,g){const v=ze(w),E=yield ou(v,{token:g,returnSecureToken:!0}),k=yield or._fromIdTokenResponse(v,"signIn",E);return yield v._updateCurrentUser(k.user),k})).apply(this,arguments)}class St{constructor(g,v){this.factorId=g,this.uid=v.mfaEnrollmentId,this.enrollmentTime=new Date(v.enrolledAt).toUTCString(),this.displayName=v.displayName}static _fromServerResponse(g,v){return"phoneInfo"in v?Cl._fromServerResponse(g,v):We(g,"internal-error")}}class Cl extends St{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,v){return new Cl(v)}}function El(w,g,v){var E;re((null===(E=v.url)||void 0===E?void 0:E.length)>0,w,"invalid-continue-uri"),re(void 0===v.dynamicLinkDomain||v.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),g.continueUrl=v.url,g.dynamicLinkDomain=v.dynamicLinkDomain,g.canHandleCodeInApp=v.handleCodeInApp,v.iOS&&(re(v.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),g.iOSBundleId=v.iOS.bundleId),v.android&&(re(v.android.packageName.length>0,w,"missing-android-pkg-name"),g.androidInstallApp=v.android.installApp,g.androidMinimumVersionCode=v.android.minimumVersion,g.androidPackageName=v.android.packageName)}function Rd(w,g,v){return Dl.apply(this,arguments)}function Dl(){return(Dl=(0,c.Z)(function*(w,g,v){const E=(0,G.m9)(w),k={requestType:"PASSWORD_RESET",email:g};v&&El(E,k,v),yield bd(E,k)})).apply(this,arguments)}function au(w,g,v){return xl.apply(this,arguments)}function xl(){return(xl=(0,c.Z)(function*(w,g,v){yield Jo((0,G.m9)(w),{oobCode:g,newPassword:v})})).apply(this,arguments)}function Rf(w,g){return Re.apply(this,arguments)}function Re(){return(Re=(0,c.Z)(function*(w,g){yield Ma((0,G.m9)(w),{oobCode:g})})).apply(this,arguments)}function en(w,g){return Sl.apply(this,arguments)}function Sl(){return(Sl=(0,c.Z)(function*(w,g){const v=(0,G.m9)(w),E=yield Jo(v,{oobCode:g}),k=E.requestType;switch(re(k,v,"internal-error"),k){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":re(E.newEmail,v,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":re(E.mfaInfo,v,"internal-error");default:re(E.email,v,"internal-error")}let B=null;return E.mfaInfo&&(B=St._fromServerResponse(ze(v),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:B},operation:k}})).apply(this,arguments)}function Kn(w,g){return ko.apply(this,arguments)}function ko(){return(ko=(0,c.Z)(function*(w,g){const{data:v}=yield en((0,G.m9)(w),g);return v.email})).apply(this,arguments)}function Ml(w,g,v){return _r.apply(this,arguments)}function _r(){return(_r=(0,c.Z)(function*(w,g,v){const E=ze(w),k=yield Id(E,{returnSecureToken:!0,email:g,password:v}),B=yield or._fromIdTokenResponse(E,"signIn",k);return yield E._updateCurrentUser(B.user),B})).apply(this,arguments)}function lu(w,g,v){return dc((0,G.m9)(w),_l.credential(g,v))}function cu(w,g,v){return Od.apply(this,arguments)}function Od(){return(Od=(0,c.Z)(function*(w,g,v){const E=(0,G.m9)(w),k={requestType:"EMAIL_SIGNIN",email:g};re(v.handleCodeInApp,E,"argument-error"),v&&El(E,k,v),yield Lr(E,k)})).apply(this,arguments)}function Pd(w,g){const v=$s.parseLink(g);return"EMAIL_SIGNIN"===(null==v?void 0:v.operation)}function Tl(w,g,v){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,c.Z)(function*(w,g,v){const E=(0,G.m9)(w),k=_l.credentialWithLink(g,v||me());return re(k._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),dc(E,k)})).apply(this,arguments)}function Ii(w,g){return ms.apply(this,arguments)}function ms(){return(ms=(0,c.Z)(function*(w,g){return cn(w,"POST","/v1/accounts:createAuthUri",qt(w,g))})).apply(this,arguments)}function uu(w,g){return Is.apply(this,arguments)}function Is(){return(Is=(0,c.Z)(function*(w,g){const E={identifier:g,continueUri:Ue()?me():"http://localhost"},{signinMethods:k}=yield Ii((0,G.m9)(w),E);return k||[]})).apply(this,arguments)}function Zs(w,g){return Il.apply(this,arguments)}function Il(){return(Il=(0,c.Z)(function*(w,g){const v=(0,G.m9)(w),k={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};g&&El(v.auth,k,g);const{email:B}=yield Ni(v.auth,k);B!==w.email&&(yield w.reload())})).apply(this,arguments)}function Nd(w,g,v){return Al.apply(this,arguments)}function Al(){return(Al=(0,c.Z)(function*(w,g,v){const E=(0,G.m9)(w),B={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:g};v&&El(E.auth,B,v);const{email:ie}=yield wd(E.auth,B);ie!==w.email&&(yield w.reload())})).apply(this,arguments)}function Fd(w,g){return ia.apply(this,arguments)}function ia(){return(ia=(0,c.Z)(function*(w,g){return cn(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function hc(w,g){return kl.apply(this,arguments)}function kl(){return(kl=(0,c.Z)(function*(w,{displayName:g,photoURL:v}){if(void 0===g&&void 0===v)return;const E=(0,G.m9)(w),B={idToken:yield E.getIdToken(),displayName:g,photoUrl:v,returnSecureToken:!0},ie=yield dt(E,Fd(E.auth,B));E.displayName=ie.displayName||null,E.photoURL=ie.photoUrl||null;const Ie=E.providerData.find(({providerId:st})=>"password"===st);Ie&&(Ie.displayName=E.displayName,Ie.photoURL=E.photoURL),yield E._updateTokensIfNecessary(ie)})).apply(this,arguments)}function du(w,g){return fc((0,G.m9)(w),g,null)}function hg(w,g){return fc((0,G.m9)(w),null,g)}function fc(w,g,v){return ra.apply(this,arguments)}function ra(){return(ra=(0,c.Z)(function*(w,g,v){const{auth:E}=w,B={idToken:yield w.getIdToken(),returnSecureToken:!0};g&&(B.email=g),v&&(B.password=v);const ie=yield dt(w,Ht(E,B));yield w._updateTokensIfNecessary(ie,!0)})).apply(this,arguments)}class sa{constructor(g,v,E={}){this.isNewUser=g,this.providerId=v,this.profile=E}}class Ld extends sa{constructor(g,v,E,k){super(g,v,E),this.username=k}}class Of extends sa{constructor(g,v){super(g,"facebook.com",v)}}class Na extends Ld{constructor(g,v){super(g,"github.com",v,"string"==typeof(null==v?void 0:v.login)?null==v?void 0:v.login:null)}}class As extends sa{constructor(g,v){super(g,"google.com",v)}}class Pf extends Ld{constructor(g,v,E){super(g,"twitter.com",v,E)}}function Bi(w){const{user:g,_tokenResponse:v}=w;return g.isAnonymous&&!v?{providerId:null,isNewUser:!1,profile:null}:function hu(w){var g,v;if(!w)return null;const{providerId:E}=w,k=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},B=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!E&&(null==w?void 0:w.idToken)){const ie=null===(v=null===(g=Xt(w.idToken))||void 0===g?void 0:g.firebase)||void 0===v?void 0:v.sign_in_provider;if(ie)return new sa(B,"anonymous"!==ie&&"custom"!==ie?ie:null)}if(!E)return null;switch(E){case"facebook.com":return new Of(B,k);case"github.com":return new Na(B,k);case"google.com":return new As(B,k);case"twitter.com":return new Pf(B,k,w.screenName||null);case"custom":case"anonymous":return new sa(B,null);default:return new sa(B,E,k)}}(v)}class Qs{constructor(g,v){this.type=g,this.credential=v}static _fromIdtoken(g){return new Qs("enroll",g)}static _fromMfaPendingCredential(g){return new Qs("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var v,E;if(null==g?void 0:g.multiFactorSession){if(null===(v=g.multiFactorSession)||void 0===v?void 0:v.pendingCredential)return Qs._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null===(E=g.multiFactorSession)||void 0===E?void 0:E.idToken)return Qs._fromIdtoken(g.multiFactorSession.idToken)}return null}}class Ol{constructor(g,v,E){this.session=g,this.hints=v,this.signInResolver=E}static _fromError(g,v){const E=ze(g),k=v.customData._serverResponse,B=(k.mfaInfo||[]).map(Ie=>St._fromServerResponse(E,Ie));re(k.mfaPendingCredential,E,"internal-error");const ie=Qs._fromMfaPendingCredential(k.mfaPendingCredential);return new Ol(ie,B,function(){var Ie=(0,c.Z)(function*(st){const xt=yield st._process(E,ie);delete k.mfaInfo,delete k.mfaPendingCredential;const Kt=Object.assign(Object.assign({},k),{idToken:xt.idToken,refreshToken:xt.refreshToken});switch(v.operationType){case"signIn":const zn=yield or._fromIdTokenResponse(E,v.operationType,Kt);return yield E._updateCurrentUser(zn.user),zn;case"reauthenticate":return re(v.user,E,"internal-error"),or._forOperation(v.user,v.operationType,Kt);default:We(E,"internal-error")}});return function(st){return Ie.apply(this,arguments)}}())}resolveSignIn(g){var v=this;return(0,c.Z)(function*(){return v.signInResolver(g)})()}}function pc(w,g){var v;const E=(0,G.m9)(w),k=g;return re(g.customData.operationType,E,"argument-error"),re(null===(v=k.customData._serverResponse)||void 0===v?void 0:v.mfaPendingCredential,E,"argument-error"),Ol._fromError(E,k)}function Vi(w,g){return cn(w,"POST","/v2/accounts/mfaEnrollment:start",qt(w,g))}class Fa{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(v=>{v.mfaInfo&&(this.enrolledFactors=v.mfaInfo.map(E=>St._fromServerResponse(g.auth,E)))})}static _fromUser(g){return new Fa(g)}getSession(){var g=this;return(0,c.Z)(function*(){return Qs._fromIdtoken(yield g.user.getIdToken())})()}enroll(g,v){var E=this;return(0,c.Z)(function*(){const k=g,B=yield E.getSession(),ie=yield dt(E.user,k._process(E.user.auth,B,v));return yield E.user._updateTokensIfNecessary(ie),E.user.reload()})()}unenroll(g){var v=this;return(0,c.Z)(function*(){var E;const k="string"==typeof g?g:g.uid,B=yield v.user.getIdToken(),ie=yield dt(v.user,function oa(w,g){return cn(w,"POST","/v2/accounts/mfaEnrollment:withdraw",qt(w,g))}(v.user.auth,{idToken:B,mfaEnrollmentId:k}));v.enrolledFactors=v.enrolledFactors.filter(({uid:Ie})=>Ie!==k),yield v.user._updateTokensIfNecessary(ie);try{yield v.user.reload()}catch(Ie){if("auth/user-token-expired"!==(null===(E=Ie)||void 0===E?void 0:E.code))throw Ie}})()}}const Vd=new WeakMap;function Ud(w){const g=(0,G.m9)(w);return Vd.has(g)||Vd.set(g,Fa._fromUser(g)),Vd.get(g)}const ks="__sak";class La{constructor(g,v){this.storageRetriever=g,this.type=v}_isAvailable(){try{return this.storage?(this.storage.setItem(ks,"1"),this.storage.removeItem(ks),Promise.resolve(!0)):Promise.resolve(!1)}catch(g){return Promise.resolve(!1)}}_set(g,v){return this.storage.setItem(g,JSON.stringify(v)),Promise.resolve()}_get(g){const v=this.storage.getItem(g);return Promise.resolve(v?JSON.parse(v):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const ri=(()=>{class w extends La{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(v,E)=>this.onStorageEvent(v,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Hd(){const w=(0,G.z$)();return Y(w)||Yt(w)}()&&function Ms(){try{return!(!window||window===window.top)}catch(w){return!1}}(),this.fallbackToPolling=sr(),this._shouldAllowMigration=!0}forAllChangedKeys(v){for(const E of Object.keys(this.listeners)){const k=this.storage.getItem(E),B=this.localCache[E];k!==B&&v(E,B,k)}}onStorageEvent(v,E=!1){if(!v.key)return void this.forAllChangedKeys((Ie,st,xt)=>{this.notifyListeners(Ie,xt)});const k=v.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ie=this.storage.getItem(k);if(v.newValue!==Ie)null!==v.newValue?this.storage.setItem(k,v.newValue):this.storage.removeItem(k);else if(this.localCache[k]===v.newValue&&!E)return}const B=()=>{const Ie=this.storage.getItem(k);!E&&this.localCache[k]===Ie||this.notifyListeners(k,Ie)},ie=this.storage.getItem(k);!function Zt(){return(0,G.w1)()&&10===document.documentMode}()||ie===v.newValue||v.newValue===v.oldValue?B():setTimeout(B,10)}notifyListeners(v,E){this.localCache[v]=E;const k=this.listeners[v];if(k)for(const B of Array.from(k))B(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((v,E,k)=>{this.onStorageEvent(new StorageEvent("storage",{key:v,oldValue:E,newValue:k}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(v,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[v]||(this.listeners[v]=new Set,this.localCache[v]=this.storage.getItem(v)),this.listeners[v].add(E)}_removeListener(v,E){this.listeners[v]&&(this.listeners[v].delete(E),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(v,E){var k=()=>super._set,B=this;return(0,c.Z)(function*(){yield k().call(B,v,E),B.localCache[v]=JSON.stringify(E)})()}_get(v){var E=()=>super._get,k=this;return(0,c.Z)(function*(){const B=yield E().call(k,v);return k.localCache[v]=JSON.stringify(B),B})()}_remove(v){var E=()=>super._remove,k=this;return(0,c.Z)(function*(){yield E().call(k,v),delete k.localCache[v]})()}}return w.type="LOCAL",w})(),Rs=(()=>{class w extends La{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(v,E){}_removeListener(v,E){}}return w.type="SESSION",w})();let fu=(()=>{class w{constructor(v){this.eventTarget=v,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(v){const E=this.receivers.find(B=>B.isListeningto(v));if(E)return E;const k=new w(v);return this.receivers.push(k),k}isListeningto(v){return this.eventTarget===v}handleEvent(v){var E=this;return(0,c.Z)(function*(){const k=v,{eventId:B,eventType:ie,data:Ie}=k.data,st=E.handlersMap[ie];if(!(null==st?void 0:st.size))return;k.ports[0].postMessage({status:"ack",eventId:B,eventType:ie});const xt=Array.from(st).map(function(){var zn=(0,c.Z)(function*(cr){return cr(k.origin,Ie)});return function(cr){return zn.apply(this,arguments)}}()),Kt=yield function si(w){return Promise.all(w.map(function(){var g=(0,c.Z)(function*(v){try{return{fulfilled:!0,value:yield v}}catch(E){return{fulfilled:!1,reason:E}}});return function(v){return g.apply(this,arguments)}}()))}(xt);k.ports[0].postMessage({status:"done",eventId:B,eventType:ie,response:Kt})})()}_subscribe(v,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[v]||(this.handlersMap[v]=new Set),this.handlersMap[v].add(E)}_unsubscribe(v,E){this.handlersMap[v]&&E&&this.handlersMap[v].delete(E),(!E||0===this.handlersMap[v].size)&&delete this.handlersMap[v],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function ct(w="",g=10){let v="";for(let E=0;E<g;E++)v+=Math.floor(10*Math.random());return w+v}class Va{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,v,E=50){var k=this;return(0,c.Z)(function*(){const B="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!B)throw new Error("connection_unavailable");let ie,Ie;return new Promise((st,xt)=>{const Kt=ct("",20);B.port1.start();const zn=setTimeout(()=>{xt(new Error("unsupported_event"))},E);Ie={messageChannel:B,onMessage(cr){const oo=cr;if(oo.data.eventId===Kt)switch(oo.data.status){case"ack":clearTimeout(zn),ie=setTimeout(()=>{xt(new Error("timeout"))},3e3);break;case"done":clearTimeout(ie),st(oo.data.response);break;default:clearTimeout(zn),clearTimeout(ie),xt(new Error("invalid_response"))}}},k.handlers.add(Ie),B.port1.addEventListener("message",Ie.onMessage),k.target.postMessage({eventType:g,eventId:Kt,data:v},[B.port2])}).finally(()=>{Ie&&k.removeMessageHandler(Ie)})})()}}function oi(){return window}function aa(){return void 0!==oi().WorkerGlobalScope&&"function"==typeof oi().importScripts}function mc(){return(mc=(0,c.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(w){return null}})).apply(this,arguments)}const jd="firebaseLocalStorageDb",Os="firebaseLocalStorage",Ps="fbase_key";class rn{constructor(g){this.request=g}toPromise(){return new Promise((g,v)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{v(this.request.error)})})}}function at(w,g){return w.transaction([Os],g?"readwrite":"readonly").objectStore(Os)}function gc(){const w=indexedDB.open(jd,1);return new Promise((g,v)=>{w.addEventListener("error",()=>{v(w.error)}),w.addEventListener("upgradeneeded",()=>{const E=w.result;try{E.createObjectStore(Os,{keyPath:Ps})}catch(k){v(k)}}),w.addEventListener("success",(0,c.Z)(function*(){const E=w.result;E.objectStoreNames.contains(Os)?g(E):(E.close(),yield function ar(){const w=indexedDB.deleteDatabase(jd);return new rn(w).toPromise()}(),g(yield gc()))}))})}function Oo(w,g,v){return Et.apply(this,arguments)}function Et(){return(Et=(0,c.Z)(function*(w,g,v){const E=at(w,!0).put({[Ps]:g,value:v});return new rn(E).toPromise()})).apply(this,arguments)}function Qr(){return(Qr=(0,c.Z)(function*(w,g){const v=at(w,!1).get(g),E=yield new rn(v).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Nl(w,g){const v=at(w,!0).delete(g);return new rn(v).toPromise()}const Gn=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var v=this;return(0,c.Z)(function*(){return v.db||(v.db=yield gc()),v.db})()}_withRetries(v){var E=this;return(0,c.Z)(function*(){let k=0;for(;;)try{const B=yield E._openDb();return yield v(B)}catch(B){if(k++>3)throw B;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var v=this;return(0,c.Z)(function*(){return aa()?v.initializeReceiver():v.initializeSender()})()}initializeReceiver(){var v=this;return(0,c.Z)(function*(){v.receiver=fu._getInstance(function pu(){return aa()?self:null}()),v.receiver._subscribe("keyChanged",function(){var E=(0,c.Z)(function*(k,B){return{keyProcessed:(yield v._poll()).includes(B.key)}});return function(k,B){return E.apply(this,arguments)}}()),v.receiver._subscribe("ping",function(){var E=(0,c.Z)(function*(k,B){return["keyChanged"]});return function(k,B){return E.apply(this,arguments)}}())})()}initializeSender(){var v=this;return(0,c.Z)(function*(){var E,k;if(v.activeServiceWorker=yield function Pl(){return mc.apply(this,arguments)}(),!v.activeServiceWorker)return;v.sender=new Va(v.activeServiceWorker);const B=yield v.sender._send("ping",{},800);!B||(null===(E=B[0])||void 0===E?void 0:E.fulfilled)&&(null===(k=B[0])||void 0===k?void 0:k.value.includes("keyChanged"))&&(v.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(v){var E=this;return(0,c.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function la(){var w;return(null===(w=null==navigator?void 0:navigator.serviceWorker)||void 0===w?void 0:w.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:v},E.serviceWorkerReceiverAvailable?800:50)}catch(k){}})()}_isAvailable(){return(0,c.Z)(function*(){try{if(!indexedDB)return!1;const v=yield gc();return yield Oo(v,ks,"1"),yield Nl(v,ks),!0}catch(v){}return!1})()}_withPendingWrite(v){var E=this;return(0,c.Z)(function*(){E.pendingWrites++;try{yield v()}finally{E.pendingWrites--}})()}_set(v,E){var k=this;return(0,c.Z)(function*(){return k._withPendingWrite((0,c.Z)(function*(){return yield k._withRetries(B=>Oo(B,v,E)),k.localCache[v]=E,k.notifyServiceWorker(v)}))})()}_get(v){var E=this;return(0,c.Z)(function*(){const k=yield E._withRetries(B=>function Ua(w,g){return Qr.apply(this,arguments)}(B,v));return E.localCache[v]=k,k})()}_remove(v){var E=this;return(0,c.Z)(function*(){return E._withPendingWrite((0,c.Z)(function*(){return yield E._withRetries(k=>Nl(k,v)),delete E.localCache[v],E.notifyServiceWorker(v)}))})()}_poll(){var v=this;return(0,c.Z)(function*(){const E=yield v._withRetries(ie=>{const Ie=at(ie,!1).getAll();return new rn(Ie).toPromise()});if(!E)return[];if(0!==v.pendingWrites)return[];const k=[],B=new Set;for(const{fbase_key:ie,value:Ie}of E)B.add(ie),JSON.stringify(v.localCache[ie])!==JSON.stringify(Ie)&&(v.notifyListeners(ie,Ie),k.push(ie));for(const ie of Object.keys(v.localCache))v.localCache[ie]&&!B.has(ie)&&(v.notifyListeners(ie,null),k.push(ie));return k})()}notifyListeners(v,E){this.localCache[v]=E;const k=this.listeners[v];if(k)for(const B of Array.from(k))B(E)}startPolling(){var v=this;this.stopPolling(),this.pollTimer=setInterval((0,c.Z)(function*(){return v._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(v,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[v]||(this.listeners[v]=new Set,this._get(v)),this.listeners[v].add(E)}_removeListener(v,E){this.listeners[v]&&(this.listeners[v].delete(E),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})();function Wn(w,g){return cn(w,"POST","/v2/accounts/mfaSignIn:start",qt(w,g))}function ua(){return(ua=(0,c.Z)(function*(w){return(yield cn(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ha(w){return new Promise((g,v)=>{const E=document.createElement("script");E.setAttribute("src",w),E.onload=g,E.onerror=k=>{const B=Fe("internal-error");B.customData=k,v(B)},E.type="text/javascript",E.charset="UTF-8",function mu(){var w,g;return null!==(g=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==g?g:document}().appendChild(E)})}function Po(w){return`__${w}${Math.floor(1e6*Math.random())}`}const Hn=1e12;class Ci{constructor(g){this.auth=g,this.counter=Hn,this._widgets=new Map}render(g,v){const E=this.counter;return this._widgets.set(E,new gs(g,this.auth.name,v||{})),this.counter++,E}reset(g){var v;const E=g||Hn;null===(v=this._widgets.get(E))||void 0===v||v.delete(),this._widgets.delete(E)}getResponse(g){var v;return(null===(v=this._widgets.get(g||Hn))||void 0===v?void 0:v.getResponse())||""}execute(g){var v=this;return(0,c.Z)(function*(){var E;return null===(E=v._widgets.get(g||Hn))||void 0===E||E.execute(),""})()}}class gs{constructor(g,v,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const k="string"==typeof g?document.getElementById(g):g;re(k,"argument-error",{appName:v}),this.container=k,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function mg(w){const g=[],v="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<w;E++)g.push(v.charAt(Math.floor(Math.random()*v.length)));return g.join("")}(50);const{callback:g,"expired-callback":v}=this.params;if(g)try{g(this.responseToken)}catch(E){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,v)try{v()}catch(E){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Fl=Po("rcb"),ai=new tt(3e4,6e4);class dy{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!oi().grecaptcha}load(g,v=""){return re(function _g(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(v),g,"argument-error"),this.shouldResolveImmediately(v)?Promise.resolve(oi().grecaptcha):new Promise((E,k)=>{const B=oi().setTimeout(()=>{k(Fe(g,"network-request-failed"))},ai.get());oi()[Fl]=()=>{oi().clearTimeout(B),delete oi()[Fl];const Ie=oi().grecaptcha;if(!Ie)return void k(Fe(g,"internal-error"));const st=Ie.render;Ie.render=(xt,Kt)=>{const zn=st(xt,Kt);return this.counter++,zn},this.hostLanguage=v,E(Ie)},Ha(`https://www.google.com/recaptcha/api.js??${(0,G.xO)({onload:Fl,render:"explicit",hl:v})}`).catch(()=>{clearTimeout(B),k(Fe(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){return!!oi().grecaptcha&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class vg{load(g){return(0,c.Z)(function*(){return new Ci(g)})()}clearedOneInstance(){}}const Ga="recaptcha",Bf={theme:"light",type:"image"};class gu{constructor(g,v=Object.assign({},Bf),E){this.parameters=v,this.type=Ga,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ze(E),this.isInvisible="invisible"===this.parameters.size,re("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const k="string"==typeof g?document.getElementById(g):g;re(k,this.auth,"argument-error"),this.container=k,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new vg:new dy,this.validateStartingState()}verify(){var g=this;return(0,c.Z)(function*(){g.assertNotDestroyed();const v=yield g.render(),E=g.getAssertedRecaptcha();return E.getResponse(v)||new Promise(B=>{const ie=Ie=>{!Ie||(g.tokenChangeListeners.delete(ie),B(Ie))};g.tokenChangeListeners.add(ie),g.isInvisible&&E.execute(v)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){re(!this.parameters.sitekey,this.auth,"argument-error"),re(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),re("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return v=>{if(this.tokenChangeListeners.forEach(E=>E(v)),"function"==typeof g)g(v);else if("string"==typeof g){const E=oi()[g];"function"==typeof E&&E(v)}}}assertNotDestroyed(){re(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,c.Z)(function*(){if(yield g.init(),!g.widgetId){let v=g.container;if(!g.isInvisible){const E=document.createElement("div");v.appendChild(E),v=E}g.widgetId=g.getAssertedRecaptcha().render(v,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,c.Z)(function*(){re(Ue()&&!aa(),g.auth,"internal-error"),yield function Ll(){let w=null;return new Promise(g=>{"complete"!==document.readyState?(w=()=>g(),window.addEventListener("load",w)):g()}).catch(g=>{throw w&&window.removeEventListener("load",w),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const v=yield function ca(w){return ua.apply(this,arguments)}(g.auth);re(v,g.auth,"internal-error"),g.parameters.sitekey=v})()}getAssertedRecaptcha(){return re(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class _u{constructor(g,v){this.verificationId=g,this.onConfirmation=v}confirm(g){const v=ka._fromVerification(this.verificationId,g);return this.onConfirmation(v)}}function li(w,g,v){return za.apply(this,arguments)}function za(){return(za=(0,c.Z)(function*(w,g,v){const E=ze(w),k=yield wr(E,g,(0,G.m9)(v));return new _u(k,B=>dc(E,B))})).apply(this,arguments)}function Bl(w,g,v){return Gd.apply(this,arguments)}function Gd(){return(Gd=(0,c.Z)(function*(w,g,v){const E=(0,G.m9)(w);yield To(!1,E,"phone");const k=yield wr(E.auth,g,(0,G.m9)(v));return new _u(k,B=>Ys(E,B))})).apply(this,arguments)}function zd(w,g,v){return br.apply(this,arguments)}function br(){return(br=(0,c.Z)(function*(w,g,v){const E=(0,G.m9)(w),k=yield wr(E.auth,g,(0,G.m9)(v));return new _u(k,B=>Oa(E,B))})).apply(this,arguments)}function wr(w,g,v){return _c.apply(this,arguments)}function _c(){return(_c=(0,c.Z)(function*(w,g,v){var E;const k=yield v.verify();try{let B;if(re("string"==typeof k,w,"argument-error"),re(v.type===Ga,w,"argument-error"),B="string"==typeof g?{phoneNumber:g}:g,"session"in B){const ie=B.session;if("phoneNumber"in B)return re("enroll"===ie.type,w,"internal-error"),(yield Vi(w,{idToken:ie.credential,phoneEnrollmentInfo:{phoneNumber:B.phoneNumber,recaptchaToken:k}})).phoneSessionInfo.sessionInfo;{re("signin"===ie.type,w,"internal-error");const Ie=(null===(E=B.multiFactorHint)||void 0===E?void 0:E.uid)||B.multiFactorUid;return re(Ie,w,"missing-multi-factor-info"),(yield Wn(w,{mfaPendingCredential:ie.credential,mfaEnrollmentId:Ie,phoneSignInInfo:{recaptchaToken:k}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ie}=yield og(w,{phoneNumber:B.phoneNumber,recaptchaToken:k});return ie}}finally{v._reset()}})).apply(this,arguments)}function Hi(w,g){return Js.apply(this,arguments)}function Js(){return(Js=(0,c.Z)(function*(w,g){yield Nn((0,G.m9)(w),g)})).apply(this,arguments)}let vc=(()=>{class w{constructor(v){this.providerId=w.PROVIDER_ID,this.auth=ze(v)}verifyPhoneNumber(v,E){return wr(this.auth,v,(0,G.m9)(E))}static credential(v,E){return ka._fromVerification(v,E)}static credentialFromResult(v){return w.credentialFromTaggedObject(v)}static credentialFromError(v){return w.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{phoneNumber:E,temporaryProof:k}=v;return E&&k?ka._fromTokenResponse(E,k):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function eo(w,g){return g?se(g):(re(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class Vl extends wn{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return wi(g,this._buildIdpRequest())}_linkToIdToken(g,v){return wi(g,this._buildIdpRequest(v))}_getReauthenticationResolver(g){return wi(g,this._buildIdpRequest())}_buildIdpRequest(g){const v={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(v.idToken=g),v}}function vu(w){return na(w.auth,new Vl(w),w.bypassAuthState)}function $d(w){const{auth:g,user:v}=w;return re(v,g,"internal-error"),uc(v,new Vl(w),w.bypassAuthState)}function to(w){return lr.apply(this,arguments)}function lr(){return(lr=(0,c.Z)(function*(w){const{auth:g,user:v}=w;return re(v,g,"internal-error"),Nn(v,new Vl(w),w.bypassAuthState)})).apply(this,arguments)}class yu{constructor(g,v,E,k,B=!1){this.auth=g,this.resolver=E,this.user=k,this.bypassAuthState=B,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(v)?v:[v]}execute(){var g=this;return new Promise(function(){var v=(0,c.Z)(function*(E,k){g.pendingPromise={resolve:E,reject:k};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(B){g.reject(B)}});return function(E,k){return v.apply(this,arguments)}}())}onAuthEvent(g){var v=this;return(0,c.Z)(function*(){const{urlResponse:E,sessionId:k,postBody:B,tenantId:ie,error:Ie,type:st}=g;if(Ie)return void v.reject(Ie);const xt={auth:v.auth,requestUri:E,sessionId:k,tenantId:ie||void 0,postBody:B||void 0,user:v.user,bypassAuthState:v.bypassAuthState};try{v.resolve(yield v.getIdpTask(st)(xt))}catch(Kt){v.reject(Kt)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return vu;case"linkViaPopup":case"linkViaRedirect":return to;case"reauthViaPopup":case"reauthViaRedirect":return $d;default:We(this.auth,"internal-error")}}resolve(g){Me(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){Me(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ul=new tt(2e3,1e4);function yg(w,g,v){return Hl.apply(this,arguments)}function Hl(){return(Hl=(0,c.Z)(function*(w,g,v){const E=ze(w);Se(w,g,Mo);const k=eo(E,v);return new no(E,"signInViaPopup",g,k).executeNotNull()})).apply(this,arguments)}function $a(w,g,v){return da.apply(this,arguments)}function da(){return(da=(0,c.Z)(function*(w,g,v){const E=(0,G.m9)(w);Se(E.auth,g,Mo);const k=eo(E.auth,v);return new no(E.auth,"reauthViaPopup",g,k,E).executeNotNull()})).apply(this,arguments)}function ha(w,g,v){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,c.Z)(function*(w,g,v){const E=(0,G.m9)(w);Se(E.auth,g,Mo);const k=eo(E.auth,v);return new no(E.auth,"linkViaPopup",g,k,E).executeNotNull()})).apply(this,arguments)}let no=(()=>{class w extends yu{constructor(v,E,k,B,ie){super(v,E,B,ie),this.provider=k,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var v=this;return(0,c.Z)(function*(){const E=yield v.execute();return re(E,v.auth,"internal-error"),E})()}onExecution(){var v=this;return(0,c.Z)(function*(){Me(1===v.filter.length,"Popup operations only handle one event");const E=ct();v.authWindow=yield v.resolver._openPopup(v.auth,v.provider,v.filter[0],E),v.authWindow.associatedEvent=E,v.resolver._originValidation(v.auth).catch(k=>{v.reject(k)}),v.resolver._isIframeWebStorageSupported(v.auth,k=>{k||v.reject(Fe(v.auth,"web-storage-unsupported"))}),v.pollUserCancellation()})()}get eventId(){var v;return(null===(v=this.authWindow)||void 0===v?void 0:v.associatedEvent)||null}cancel(){this.reject(Fe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const v=()=>{var E,k;this.pollId=(null===(k=null===(E=this.authWindow)||void 0===E?void 0:E.window)||void 0===k?void 0:k.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Fe(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(v,Ul.get())};v()}}return w.currentPopupAction=null,w})();const ci=new Map;class io extends yu{constructor(g,v,E=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],v,void 0,E),this.eventId=null}execute(){var g=()=>super.execute,v=this;return(0,c.Z)(function*(){let E=ci.get(v.auth._key());if(!E){try{const B=(yield function Vf(w,g){return ro.apply(this,arguments)}(v.resolver,v.auth))?yield g().call(v):null;E=()=>Promise.resolve(B)}catch(k){E=()=>Promise.reject(k)}ci.set(v.auth._key(),E)}return v.bypassAuthState||ci.set(v.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(g){var v=()=>super.onAuthEvent,E=this;return(0,c.Z)(function*(){if("signInViaRedirect"===g.type)return v().call(E,g);if("unknown"!==g.type){if(g.eventId){const k=yield E.auth._redirectUserForId(g.eventId);if(k)return E.user=k,v().call(E,g);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,c.Z)(function*(){})()}cleanUp(){}}function ro(){return(ro=(0,c.Z)(function*(w,g){const v=O(g),E=M(w);if(!(yield E._isAvailable()))return!1;const k="true"===(yield E._get(v));return yield E._remove(v),k})).apply(this,arguments)}function jl(w,g){return fa.apply(this,arguments)}function fa(){return(fa=(0,c.Z)(function*(w,g){return M(w)._set(O(g),"true")})).apply(this,arguments)}function bg(){ci.clear()}function S(w,g){ci.set(w._key(),g)}function M(w){return se(w._redirectPersistence)}function O(w){return Tn("pendingRedirect",w.config.apiKey,w.name)}function j(w,g,v){return function X(w,g,v){return pe.apply(this,arguments)}(w,g,v)}function pe(){return(pe=(0,c.Z)(function*(w,g,v){const E=ze(w);Se(w,g,Mo);const k=eo(E,v);return yield jl(k,E),k._openRedirect(E,g,"signInViaRedirect")})).apply(this,arguments)}function Le(w,g,v){return function je(w,g,v){return Mt.apply(this,arguments)}(w,g,v)}function Mt(){return(Mt=(0,c.Z)(function*(w,g,v){const E=(0,G.m9)(w);Se(E.auth,g,Mo);const k=eo(E.auth,v);yield jl(k,E.auth);const B=yield _s(E);return k._openRedirect(E.auth,g,"reauthViaRedirect",B)})).apply(this,arguments)}function Nt(w,g,v){return function jt(w,g,v){return vt.apply(this,arguments)}(w,g,v)}function vt(){return(vt=(0,c.Z)(function*(w,g,v){const E=(0,G.m9)(w);Se(E.auth,g,Mo);const k=eo(E.auth,v);yield To(!1,E,g.providerId),yield jl(k,E.auth);const B=yield _s(E);return k._openRedirect(E.auth,g,"linkViaRedirect",B)})).apply(this,arguments)}function ji(w,g){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,c.Z)(function*(w,g){return yield ze(w)._initializationPromise,qa(w,g,!1)})).apply(this,arguments)}function qa(w,g){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,c.Z)(function*(w,g,v=!1){const E=ze(w),k=eo(E,g),ie=yield new io(E,k,v).execute();return ie&&!v&&(delete ie.user._redirectEventId,yield E._persistUserIfCurrent(ie.user),yield E._setRedirectUser(null,g)),ie})).apply(this,arguments)}function _s(w){return yc.apply(this,arguments)}function yc(){return(yc=(0,c.Z)(function*(w){const g=ct(`${w.uid}:::`);return w._redirectEventId=g,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),g})).apply(this,arguments)}class Ft{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let v=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(g,E)&&(v=!0,this.sendToConsumer(g,E),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function Wa(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Cr(w);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,v||(this.queuedRedirectEvent=g,v=!0)),v}sendToConsumer(g,v){var E;if(g.error&&!Cr(g)){const k=(null===(E=g.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";v.onError(Fe(this.auth,k))}else v.onAuthEvent(g)}isEventForConsumer(g,v){const E=null===v.eventId||!!g.eventId&&g.eventId===v.eventId;return v.filter.includes(g.type)&&E}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(so(g))}saveEventToCache(g){this.cachedEventUids.add(so(g)),this.lastProcessedEventTime=Date.now()}}function so(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(g=>g).join("-")}function Cr({type:w,error:g}){return"unknown"===w&&"auth/no-auth-event"===(null==g?void 0:g.code)}function bu(w){return Uf.apply(this,arguments)}function Uf(){return(Uf=(0,c.Z)(function*(w,g={}){return cn(w,"GET","/v1/projects",g)})).apply(this,arguments)}const hy=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,bc=/^https?/;function qd(){return(qd=(0,c.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:g}=yield bu(w);for(const v of g)try{if(fy(v))return}catch(E){}We(w,"unauthorized-domain")})).apply(this,arguments)}function fy(w){const g=me(),{protocol:v,hostname:E}=new URL(g);if(w.startsWith("chrome-extension://")){const ie=new URL(w);return""===ie.hostname&&""===E?"chrome-extension:"===v&&w.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===v&&ie.hostname===E}if(!bc.test(v))return!1;if(hy.test(w))return E===w;const k=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+k+"|"+k+")$","i").test(E)}const Hf=new tt(3e4,6e4);function py(){const w=oi().___jsl;if(null==w?void 0:w.H)for(const g of Object.keys(w.H))if(w.H[g].r=w.H[g].r||[],w.H[g].L=w.H[g].L||[],w.H[g].r=[...w.H[g].L],w.CP)for(let v=0;v<w.CP.length;v++)w.CP[v]=null}let vs=null;function my(w){return vs=vs||function Er(w){return new Promise((g,v)=>{var E,k,B;function ie(){py(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{py(),v(Fe(w,"network-request-failed"))},timeout:Hf.get()})}if(null===(k=null===(E=oi().gapi)||void 0===E?void 0:E.iframes)||void 0===k?void 0:k.Iframe)g(gapi.iframes.getContext());else{if(!(null===(B=oi().gapi)||void 0===B?void 0:B.load)){const Ie=Po("iframefcb");return oi()[Ie]=()=>{gapi.load?ie():v(Fe(w,"network-request-failed"))},Ha(`https://apis.google.com/js/api.js?onload=${Ie}`).catch(st=>v(st))}ie()}}).catch(g=>{throw vs=null,g})}(w),vs}const gy=new tt(5e3,15e3),wc={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},wg=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _y(w){const g=w.config;re(g.authDomain,w,"auth-domain-config-required");const v=g.emulator?xn(g,"emulator/auth/iframe"):`https://${w.config.authDomain}/__/auth/iframe`,E={apiKey:g.apiKey,appName:w.name,v:N.SDK_VERSION},k=wg.get(w.config.apiHost);k&&(E.eid=k);const B=w._getFrameworks();return B.length&&(E.fw=B.join(",")),`${v}?${(0,G.xO)(E).slice(1)}`}function Gl(){return Gl=(0,c.Z)(function*(w){const g=yield my(w),v=oi().gapi;return re(v,w,"internal-error"),g.open({where:document.body,url:_y(w),messageHandlersFilter:v.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wc,dontclear:!0},E=>new Promise(function(){var k=(0,c.Z)(function*(B,ie){yield E.restyle({setHideOnLeave:!1});const Ie=Fe(w,"network-request-failed"),st=oi().setTimeout(()=>{ie(Ie)},gy.get());function xt(){oi().clearTimeout(st),B(E)}E.ping(xt).then(xt,()=>{ie(Ie)})});return function(B,ie){return k.apply(this,arguments)}}()))}),Gl.apply(this,arguments)}const Cc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Za{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(g){}}}function es(w,g,v,E,k,B){re(w.config.authDomain,w,"auth-domain-config-required"),re(w.config.apiKey,w,"invalid-api-key");const ie={apiKey:w.config.apiKey,appName:w.name,authType:v,redirectUrl:E,v:N.SDK_VERSION,eventId:k};if(g instanceof Mo){g.setDefaultLanguage(w.languageCode),ie.providerId=g.providerId||"",(0,G.xb)(g.getCustomParameters())||(ie.customParameters=JSON.stringify(g.getCustomParameters()));for(const[st,xt]of Object.entries(B||{}))ie[st]=xt}if(g instanceof Kr){const st=g.getScopes().filter(xt=>""!==xt);st.length>0&&(ie.scopes=st.join(","))}w.tenantId&&(ie.tid=w.tenantId);const Ie=ie;for(const st of Object.keys(Ie))void 0===Ie[st]&&delete Ie[st];return`${function Bo({config:w}){return w.emulator?xn(w,"emulator/auth/handler"):`https://${w.authDomain}/__/auth/handler`}(w)}?${(0,G.xO)(Ie).slice(1)}`}const Cu="webStorageSupport",Dg=class Yd{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Rs,this._completeRedirectFn=qa,this._overrideRedirectResult=S}_openPopup(g,v,E,k){var B=this;return(0,c.Z)(function*(){var ie;Me(null===(ie=B.eventManagers[g._key()])||void 0===ie?void 0:ie.manager,"_initialize() not called before _openPopup()");const Ie=es(g,v,E,me(),k);return function yy(w,g,v,E=500,k=600){const B=Math.max((window.screen.availHeight-k)/2,0).toString(),ie=Math.max((window.screen.availWidth-E)/2,0).toString();let Ie="";const st=Object.assign(Object.assign({},Cc),{width:E.toString(),height:k.toString(),top:B,left:ie}),xt=(0,G.z$)().toLowerCase();v&&(Ie=ke(xt)?"_blank":v),Z(xt)&&(g=g||"http://localhost",st.scrollbars="yes");const Kt=Object.entries(st).reduce((cr,[oo,Gf])=>`${cr}${oo}=${Gf},`,"");if(function Nr(w=(0,G.z$)()){var g;return Yt(w)&&!!(null===(g=window.navigator)||void 0===g?void 0:g.standalone)}(xt)&&"_self"!==Ie)return function Cg(w,g){const v=document.createElement("a");v.href=w,v.target=g;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),v.dispatchEvent(E)}(g||"",Ie),new Za(null);const zn=window.open(g||"",Ie,Kt);re(zn,w,"popup-blocked");try{zn.focus()}catch(cr){}return new Za(zn)}(g,Ie,ct())})()}_openRedirect(g,v,E,k){var B=this;return(0,c.Z)(function*(){return yield B._originValidation(g),function Ro(w){oi().location.href=w}(es(g,v,E,me(),k)),new Promise(()=>{})})()}_initialize(g){const v=g._key();if(this.eventManagers[v]){const{manager:k,promise:B}=this.eventManagers[v];return k?Promise.resolve(k):(Me(B,"If manager is not set, promise should be"),B)}const E=this.initAndGetManager(g);return this.eventManagers[v]={promise:E},E.catch(()=>{delete this.eventManagers[v]}),E}initAndGetManager(g){var v=this;return(0,c.Z)(function*(){const E=yield function vy(w){return Gl.apply(this,arguments)}(g),k=new Ft(g);return E.register("authEvent",B=>(re(null==B?void 0:B.authEvent,g,"invalid-auth-event"),{status:k.onEvent(B.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),v.eventManagers[g._key()]={manager:k},v.iframes[g._key()]=E,k})()}_isIframeWebStorageSupported(g,v){this.iframes[g._key()].send(Cu,{type:Cu},k=>{var B;const ie=null===(B=null==k?void 0:k[0])||void 0===B?void 0:B[Cu];void 0!==ie&&v(!!ie),We(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const v=g._key();return this.originValidationPromises[v]||(this.originValidationPromises[v]=function Jr(w){return qd.apply(this,arguments)}(g)),this.originValidationPromises[v]}get _shouldInitProactively(){return sr()||Y()||Yt()}};class Dc extends class jf{constructor(g){this.factorId=g}_process(g,v,E){switch(v.type){case"enroll":return this._finalizeEnroll(g,v.credential,E);case"signin":return this._finalizeSignIn(g,v.credential);default:return _e("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Dc(g)}_finalizeEnroll(g,v,E){return function Ff(w,g){return cn(w,"POST","/v2/accounts/mfaEnrollment:finalize",qt(w,g))}(g,{idToken:v,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,v){return function yr(w,g){return cn(w,"POST","/v2/accounts/mfaSignIn:finalize",qt(w,g))}(g,{mfaPendingCredential:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let xg=(()=>{class w{constructor(){}static assertion(v){return Dc._fromCredential(v)}}return w.FACTOR_ID="phone",w})();var Zd="@firebase/auth";class wy{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var v=this;return(0,c.Z)(function*(){return v.assertAuthConfigured(),yield v.auth._initializationPromise,v.auth.currentUser?{accessToken:yield v.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const v=this.auth.onIdTokenChanged(E=>{var k;g((null===(k=E)||void 0===k?void 0:k.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,v),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const v=this.internalListeners.get(g);!v||(this.internalListeners.delete(g),v(),this.updateProactiveRefresh())}assertAuthConfigured(){re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}!function Kd(w){(0,N._registerComponent)(new be.wA("auth",(g,{options:v})=>{const E=g.getProvider("app").getImmediate(),k=g.getProvider("heartbeat"),{apiKey:B,authDomain:ie}=E.options;return((Ie,st)=>{re(B&&!B.includes(":"),"invalid-api-key",{appName:Ie.name}),re(!(null==ie?void 0:ie.includes(":")),"argument-error",{appName:Ie.name});const xt={apiKey:B,authDomain:ie,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Pi(w)},Kt=new Fr(Ie,st,xt);return function Ce(w,g){const v=(null==g?void 0:g.persistence)||[],E=(Array.isArray(v)?v:[v]).map(se);(null==g?void 0:g.errorMap)&&w._updateErrorMap(g.errorMap),w._initializeWithPersistence(E,null==g?void 0:g.popupRedirectResolver)}(Kt,v),Kt})(E,k)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,v,E)=>{g.getProvider("auth-internal").initialize()})),(0,N._registerComponent)(new be.wA("auth-internal",g=>{const v=ze(g.getProvider("auth").getImmediate());return new wy(v)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,N.registerVersion)(Zd,"0.20.4",function Cy(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,N.registerVersion)(Zd,"0.20.4","esm2017")}("Browser")},2090:(lt,De,F)=>{F.d(De,{BH:()=>Ke,LL:()=>me,ZR:()=>Ce,gQ:()=>ei,zI:()=>J,hu:()=>G,g5:()=>N,US:()=>be,tV:()=>we,h$:()=>oe,L:()=>fe,$s:()=>fs,r3:()=>qt,Sg:()=>Ne,ne:()=>Ss,p$:()=>W,vZ:()=>rr,ZB:()=>$,gK:()=>Si,pd:()=>hs,m9:()=>bt,z$:()=>Ve,GJ:()=>fn,jU:()=>Ae,ru:()=>Ze,d:()=>Fe,xb:()=>jn,w1:()=>Oe,hl:()=>_e,uI:()=>qe,UG:()=>ye,Yr:()=>Qe,b$:()=>We,G6:()=>re,Mn:()=>Se,w9:()=>Sn,cI:()=>an,UI:()=>ds,xO:()=>xs,zd:()=>qr,DV:()=>cn,ug:()=>Xt,dS:()=>Hs,Pz:()=>$t,Dv:()=>Ki,Wj:()=>Vn,lb:()=>Mi,eu:()=>Me});const G=function(K,z){if(!K)throw N(z)},N=function(K){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+K)},de=function(K){const z=[];let ee=0;for(let te=0;te<K.length;te++){let H=K.charCodeAt(te);H<128?z[ee++]=H:H<2048?(z[ee++]=H>>6|192,z[ee++]=63&H|128):55296==(64512&H)&&te+1<K.length&&56320==(64512&K.charCodeAt(te+1))?(H=65536+((1023&H)<<10)+(1023&K.charCodeAt(++te)),z[ee++]=H>>18|240,z[ee++]=H>>12&63|128,z[ee++]=H>>6&63|128,z[ee++]=63&H|128):(z[ee++]=H>>12|224,z[ee++]=H>>6&63|128,z[ee++]=63&H|128)}return z},be={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(K,z){if(!Array.isArray(K))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ee=z?this.byteToCharMapWebSafe_:this.byteToCharMap_,te=[];for(let H=0;H<K.length;H+=3){const Ee=K[H],Ge=H+1<K.length,ut=Ge?K[H+1]:0,Ut=H+2<K.length,ln=Ut?K[H+2]:0;let ce=(15&ut)<<2|ln>>6,Z=63&ln;Ut||(Z=64,Ge||(ce=64)),te.push(ee[Ee>>2],ee[(3&Ee)<<4|ut>>4],ee[ce],ee[Z])}return te.join("")},encodeString(K,z){return this.HAS_NATIVE_SUPPORT&&!z?btoa(K):this.encodeByteArray(de(K),z)},decodeString(K,z){return this.HAS_NATIVE_SUPPORT&&!z?atob(K):function(K){const z=[];let ee=0,te=0;for(;ee<K.length;){const H=K[ee++];if(H<128)z[te++]=String.fromCharCode(H);else if(H>191&&H<224){const Ee=K[ee++];z[te++]=String.fromCharCode((31&H)<<6|63&Ee)}else if(H>239&&H<365){const Ut=((7&H)<<18|(63&K[ee++])<<12|(63&K[ee++])<<6|63&K[ee++])-65536;z[te++]=String.fromCharCode(55296+(Ut>>10)),z[te++]=String.fromCharCode(56320+(1023&Ut))}else{const Ee=K[ee++],Ge=K[ee++];z[te++]=String.fromCharCode((15&H)<<12|(63&Ee)<<6|63&Ge)}}return z.join("")}(this.decodeStringToByteArray(K,z))},decodeStringToByteArray(K,z){this.init_();const ee=z?this.charToByteMapWebSafe_:this.charToByteMap_,te=[];for(let H=0;H<K.length;){const Ee=ee[K.charAt(H++)],ut=H<K.length?ee[K.charAt(H)]:0;++H;const ln=H<K.length?ee[K.charAt(H)]:64;++H;const Wt=H<K.length?ee[K.charAt(H)]:64;if(++H,null==Ee||null==ut||null==ln||null==Wt)throw Error();te.push(Ee<<2|ut>>4),64!==ln&&(te.push(ut<<4&240|ln>>2),64!==Wt&&te.push(ln<<6&192|Wt))}return te},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let K=0;K<this.ENCODED_VALS.length;K++)this.byteToCharMap_[K]=this.ENCODED_VALS.charAt(K),this.charToByteMap_[this.byteToCharMap_[K]]=K,this.byteToCharMapWebSafe_[K]=this.ENCODED_VALS_WEBSAFE.charAt(K),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[K]]=K,K>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(K)]=K,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(K)]=K)}}},oe=function(K){const z=de(K);return be.encodeByteArray(z,!0)},fe=function(K){return oe(K).replace(/\./g,"")},we=function(K){try{return be.decodeString(K,!0)}catch(z){console.error("base64Decode failed: ",z)}return null};function W(K){return $(void 0,K)}function $(K,z){if(!(z instanceof Object))return z;switch(z.constructor){case Date:return new Date(z.getTime());case Object:void 0===K&&(K={});break;case Array:K=[];break;default:return z}for(const ee in z)!z.hasOwnProperty(ee)||!ae(ee)||(K[ee]=$(K[ee],z[ee]));return K}function ae(K){return"__proto__"!==K}class Ke{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((z,ee)=>{this.resolve=z,this.reject=ee})}wrapCallback(z){return(ee,te)=>{ee?this.reject(ee):this.resolve(te),"function"==typeof z&&(this.promise.catch(()=>{}),1===z.length?z(ee):z(ee,te))}}}function Ne(K,z){if(K.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const te=z||"demo-project",H=K.iat||0,Ee=K.sub||K.user_id;if(!Ee)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ge=Object.assign({iss:`https://securetoken.google.com/${te}`,aud:te,iat:H,exp:H+3600,auth_time:H,sub:Ee,user_id:Ee,firebase:{sign_in_provider:"custom",identities:{}}},K);return[fe(JSON.stringify({alg:"none",type:"JWT"})),fe(JSON.stringify(Ge)),""].join(".")}function Ve(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function qe(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ve())}function ye(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(K){return!1}}function Ae(){return"object"==typeof self&&self.self===self}function Ze(){const K="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof K&&void 0!==K.id}function We(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Fe(){return Ve().indexOf("Electron/")>=0}function Oe(){const K=Ve();return K.indexOf("MSIE ")>=0||K.indexOf("Trident/")>=0}function Se(){return Ve().indexOf("MSAppHost/")>=0}function Qe(){return!1}function re(){return!ye()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _e(){return"object"==typeof indexedDB}function Me(){return new Promise((K,z)=>{try{let ee=!0;const te="validate-browser-context-for-indexeddb-analytics-module",H=self.indexedDB.open(te);H.onsuccess=()=>{H.result.close(),ee||self.indexedDB.deleteDatabase(te),K(!0)},H.onupgradeneeded=()=>{ee=!1},H.onerror=()=>{var Ee;z((null===(Ee=H.error)||void 0===Ee?void 0:Ee.message)||"")}}catch(ee){z(ee)}})}function J(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Ce extends Error{constructor(z,ee,te){super(ee),this.code=z,this.customData=te,this.name="FirebaseError",Object.setPrototypeOf(this,Ce.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,me.prototype.create)}}class me{constructor(z,ee,te){this.service=z,this.serviceName=ee,this.errors=te}create(z,...ee){const te=ee[0]||{},H=`${this.service}/${z}`,Ee=this.errors[z],Ge=Ee?function Ue(K,z){return K.replace(Ct,(ee,te)=>{const H=z[te];return null!=H?String(H):`<${te}?>`})}(Ee,te):"Error";return new Ce(H,`${this.serviceName}: ${Ge} (${H}).`,te)}}const Ct=/\{\$([^}]+)}/g;function an(K){return JSON.parse(K)}function $t(K){return JSON.stringify(K)}const tt=function(K){let z={},ee={},te={},H="";try{const Ee=K.split(".");z=an(we(Ee[0])||""),ee=an(we(Ee[1])||""),H=Ee[2],te=ee.d||{},delete ee.d}catch(Ee){}return{header:z,claims:ee,data:te,signature:H}},Sn=function(K){const ee=tt(K).claims;return!!ee&&"object"==typeof ee&&ee.hasOwnProperty("iat")},fn=function(K){const z=tt(K).claims;return"object"==typeof z&&!0===z.admin};function qt(K,z){return Object.prototype.hasOwnProperty.call(K,z)}function cn(K,z){if(Object.prototype.hasOwnProperty.call(K,z))return K[z]}function jn(K){for(const z in K)if(Object.prototype.hasOwnProperty.call(K,z))return!1;return!0}function ds(K,z,ee){const te={};for(const H in K)Object.prototype.hasOwnProperty.call(K,H)&&(te[H]=z.call(ee,K[H],H,K));return te}function rr(K,z){if(K===z)return!0;const ee=Object.keys(K),te=Object.keys(z);for(const H of ee){if(!te.includes(H))return!1;const Ee=K[H],Ge=z[H];if(qn(Ee)&&qn(Ge)){if(!rr(Ee,Ge))return!1}else if(Ee!==Ge)return!1}for(const H of te)if(!ee.includes(H))return!1;return!0}function qn(K){return null!==K&&"object"==typeof K}function xs(K){const z=[];for(const[ee,te]of Object.entries(K))Array.isArray(te)?te.forEach(H=>{z.push(encodeURIComponent(ee)+"="+encodeURIComponent(H))}):z.push(encodeURIComponent(ee)+"="+encodeURIComponent(te));return z.length?"&"+z.join("&"):""}function qr(K){const z={};return K.replace(/^\?/,"").split("&").forEach(te=>{if(te){const[H,Ee]=te.split("=");z[decodeURIComponent(H)]=decodeURIComponent(Ee)}}),z}function hs(K){const z=K.indexOf("?");if(!z)return"";const ee=K.indexOf("#",z);return K.substring(z,ee>0?ee:void 0)}class ei{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let z=1;z<this.blockSize;++z)this.pad_[z]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(z,ee){ee||(ee=0);const te=this.W_;if("string"==typeof z)for(let Wt=0;Wt<16;Wt++)te[Wt]=z.charCodeAt(ee)<<24|z.charCodeAt(ee+1)<<16|z.charCodeAt(ee+2)<<8|z.charCodeAt(ee+3),ee+=4;else for(let Wt=0;Wt<16;Wt++)te[Wt]=z[ee]<<24|z[ee+1]<<16|z[ee+2]<<8|z[ee+3],ee+=4;for(let Wt=16;Wt<80;Wt++){const ce=te[Wt-3]^te[Wt-8]^te[Wt-14]^te[Wt-16];te[Wt]=4294967295&(ce<<1|ce>>>31)}let ln,Tn,H=this.chain_[0],Ee=this.chain_[1],Ge=this.chain_[2],ut=this.chain_[3],Ut=this.chain_[4];for(let Wt=0;Wt<80;Wt++){Wt<40?Wt<20?(ln=ut^Ee&(Ge^ut),Tn=1518500249):(ln=Ee^Ge^ut,Tn=1859775393):Wt<60?(ln=Ee&Ge|ut&(Ee|Ge),Tn=2400959708):(ln=Ee^Ge^ut,Tn=3395469782);const ce=(H<<5|H>>>27)+ln+Ut+Tn+te[Wt]&4294967295;Ut=ut,ut=Ge,Ge=4294967295&(Ee<<30|Ee>>>2),Ee=H,H=ce}this.chain_[0]=this.chain_[0]+H&4294967295,this.chain_[1]=this.chain_[1]+Ee&4294967295,this.chain_[2]=this.chain_[2]+Ge&4294967295,this.chain_[3]=this.chain_[3]+ut&4294967295,this.chain_[4]=this.chain_[4]+Ut&4294967295}update(z,ee){if(null==z)return;void 0===ee&&(ee=z.length);const te=ee-this.blockSize;let H=0;const Ee=this.buf_;let Ge=this.inbuf_;for(;H<ee;){if(0===Ge)for(;H<=te;)this.compress_(z,H),H+=this.blockSize;if("string"==typeof z){for(;H<ee;)if(Ee[Ge]=z.charCodeAt(H),++Ge,++H,Ge===this.blockSize){this.compress_(Ee),Ge=0;break}}else for(;H<ee;)if(Ee[Ge]=z[H],++Ge,++H,Ge===this.blockSize){this.compress_(Ee),Ge=0;break}}this.inbuf_=Ge,this.total_+=ee}digest(){const z=[];let ee=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let H=this.blockSize-1;H>=56;H--)this.buf_[H]=255&ee,ee/=256;this.compress_(this.buf_);let te=0;for(let H=0;H<5;H++)for(let Ee=24;Ee>=0;Ee-=8)z[te]=this.chain_[H]>>Ee&255,++te;return z}}function Ss(K,z){const ee=new Dt(K,z);return ee.subscribe.bind(ee)}class Dt{constructor(z,ee){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ee,this.task.then(()=>{z(this)}).catch(te=>{this.error(te)})}next(z){this.forEachObserver(ee=>{ee.next(z)})}error(z){this.forEachObserver(ee=>{ee.error(z)}),this.close(z)}complete(){this.forEachObserver(z=>{z.complete()}),this.close()}subscribe(z,ee,te){let H;if(void 0===z&&void 0===ee&&void 0===te)throw new Error("Missing Observer.");H=function Bn(K,z){if("object"!=typeof K||null===K)return!1;for(const ee of z)if(ee in K&&"function"==typeof K[ee])return!0;return!1}(z,["next","error","complete"])?z:{next:z,error:ee,complete:te},void 0===H.next&&(H.next=pn),void 0===H.error&&(H.error=pn),void 0===H.complete&&(H.complete=pn);const Ee=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?H.error(this.finalError):H.complete()}catch(Ge){}}),this.observers.push(H),Ee}unsubscribeOne(z){void 0===this.observers||void 0===this.observers[z]||(delete this.observers[z],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(z){if(!this.finalized)for(let ee=0;ee<this.observers.length;ee++)this.sendOne(ee,z)}sendOne(z,ee){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[z])try{ee(this.observers[z])}catch(te){"undefined"!=typeof console&&console.error&&console.error(te)}})}close(z){this.finalized||(this.finalized=!0,void 0!==z&&(this.finalError=z),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function pn(){}const Ki=function(K,z,ee,te){let H;if(te<z?H="at least "+z:te>ee&&(H=0===ee?"none":"no more than "+ee),H)throw new Error(K+" failed: Was called with "+te+(1===te?" argument.":" arguments.")+" Expects "+H+".")};function Si(K,z){return`${K} failed: ${z} argument `}function Vn(K,z,ee,te){if((!te||ee)&&"function"!=typeof ee)throw new Error(Si(K,z)+"must be a valid function.")}function Mi(K,z,ee,te){if((!te||ee)&&("object"!=typeof ee||null===ee))throw new Error(Si(K,z)+"must be a valid context object.")}const Hs=function(K){const z=[];let ee=0;for(let te=0;te<K.length;te++){let H=K.charCodeAt(te);if(H>=55296&&H<=56319){const Ee=H-55296;te++,G(te<K.length,"Surrogate pair missing trail surrogate."),H=65536+(Ee<<10)+(K.charCodeAt(te)-56320)}H<128?z[ee++]=H:H<2048?(z[ee++]=H>>6|192,z[ee++]=63&H|128):H<65536?(z[ee++]=H>>12|224,z[ee++]=H>>6&63|128,z[ee++]=63&H|128):(z[ee++]=H>>18|240,z[ee++]=H>>12&63|128,z[ee++]=H>>6&63|128,z[ee++]=63&H|128)}return z},Xt=function(K){let z=0;for(let ee=0;ee<K.length;ee++){const te=K.charCodeAt(ee);te<128?z++:te<2048?z+=2:te>=55296&&te<=56319?(z+=4,ee++):z+=3}return z};function fs(K,z=1e3,ee=2){const te=z*Math.pow(ee,K),H=Math.round(.5*te*(Math.random()-.5)*2);return Math.min(144e5,te+H)}function bt(K){return K&&K._delegate?K._delegate:K}},5867:(lt,De,F)=>{F.d(De,{Mq:()=>c.getApp,C6:()=>c.getApps});var c=F(9681);(0,c.registerVersion)("firebase","9.8.4","app")},127:(lt,De,F)=>{F.d(De,{Z:()=>c.Z});var c=F(3942);c.Z.registerVersion("firebase","9.8.4","app-compat")},5881:(lt,De,F)=>{F.r(De);var c=F(5861),G=F(3942),N=F(3673),de=F(2090),oe=(F(9681),F(1877),F(4859));function fe(){return window}function $(){return($=(0,c.Z)(function*(ce,Z,Y){var ke;const{BuildInfo:Je}=fe();(0,N.aq)(Z.sessionId,"AuthEvent did not contain a session ID");const _t=yield Ae(Z.sessionId),kt={};return(0,N.ar)()?kt.ibi=Je.packageName:(0,N.as)()?kt.apn=Je.packageName:(0,N.at)(ce,"operation-not-supported-in-this-environment"),Je.displayName&&(kt.appDisplayName=Je.displayName),kt.sessionId=_t,(0,N.au)(ce,Y,Z.type,void 0,null!==(ke=Z.eventId)&&void 0!==ke?ke:void 0,kt)})).apply(this,arguments)}function Ke(){return(Ke=(0,c.Z)(function*(ce){const{BuildInfo:Z}=fe(),Y={};(0,N.ar)()?Y.iosBundleId=Z.packageName:(0,N.as)()?Y.androidPackageName=Z.packageName:(0,N.at)(ce,"operation-not-supported-in-this-environment"),yield(0,N.av)(ce,Y)})).apply(this,arguments)}function qe(){return(qe=(0,c.Z)(function*(ce,Z,Y){const{cordova:ke}=fe();let Je=()=>{};try{yield new Promise((_t,kt)=>{let nn=null;function Yt(){var Zt;_t();const sr=null===(Zt=ke.plugins.browsertab)||void 0===Zt?void 0:Zt.close;"function"==typeof sr&&sr(),"function"==typeof(null==Y?void 0:Y.close)&&Y.close()}function pi(){nn||(nn=window.setTimeout(()=>{kt((0,N.aw)(ce,"redirect-cancelled-by-user"))},2e3))}function Nr(){"visible"===(null==document?void 0:document.visibilityState)&&pi()}Z.addPassiveListener(Yt),document.addEventListener("resume",pi,!1),(0,N.as)()&&document.addEventListener("visibilitychange",Nr,!1),Je=()=>{Z.removePassiveListener(Yt),document.removeEventListener("resume",pi,!1),document.removeEventListener("visibilitychange",Nr,!1),nn&&window.clearTimeout(nn)}})}finally{Je()}})).apply(this,arguments)}function Ae(ce){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,c.Z)(function*(ce){const Z=We(ce),Y=yield crypto.subtle.digest("SHA-256",Z);return Array.from(new Uint8Array(Y)).map(Je=>Je.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function We(ce){if((0,N.aq)(/[0-9a-zA-Z]+/.test(ce),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(ce);const Z=new ArrayBuffer(ce.length),Y=new Uint8Array(Z);for(let ke=0;ke<ce.length;ke++)Y[ke]=ce.charCodeAt(ke);return Y}class Oe extends N.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(Z=>{this.resolveInialized=Z})}addPassiveListener(Z){this.passiveListeners.add(Z)}removePassiveListener(Z){this.passiveListeners.delete(Z)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(Z){return this.resolveInialized(),this.passiveListeners.forEach(Y=>Y(Z)),super.onEvent(Z)}initialized(){var Z=this;return(0,c.Z)(function*(){yield Z.initPromise})()}}function re(ce){return _e.apply(this,arguments)}function _e(){return(_e=(0,c.Z)(function*(ce){const Z=yield se()._get(ue(ce));return Z&&(yield se()._remove(ue(ce))),Z})).apply(this,arguments)}function J(){const ce=[],Z="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let Y=0;Y<20;Y++){const ke=Math.floor(Math.random()*Z.length);ce.push(Z.charAt(ke))}return ce.join("")}function se(){return(0,N.ay)(N.b)}function ue(ce){return(0,N.az)("authEvent",ce.config.apiKey,ce.name)}function Ue(ce){if(!(null==ce?void 0:ce.includes("?")))return{};const[Z,...Y]=ce.split("?");return(0,de.zd)(Y.join("?"))}function tt(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,N.aw)("no-auth-event")}}function qt(){var ce;return(null===(ce=null==self?void 0:self.location)||void 0===ce?void 0:ce.protocol)||null}function jn(ce=(0,de.z$)()){return!("file:"!==qt()&&"ionic:"!==qt()&&"capacitor:"!==qt()||!ce.toLowerCase().match(/iphone|ipad|ipod|android/))}function qr(){try{const ce=self.localStorage,Z=N.aI();if(ce)return ce.setItem(Z,"1"),ce.removeItem(Z),!function xs(ce=(0,de.z$)()){return function rr(){return(0,de.w1)()&&11===(null==document?void 0:document.documentMode)}()||function qn(ce=(0,de.z$)()){return/Edge\/\d+/.test(ce)}(ce)}()||(0,de.hl)()}catch(ce){return hs()&&(0,de.hl)()}return!1}function hs(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function ei(){return(function cn(){return"http:"===qt()||"https:"===qt()}()||(0,de.ru)()||jn())&&!function ds(){return(0,de.b$)()||(0,de.UG)()}()&&qr()&&!hs()}function Ss(){return jn()&&"undefined"!=typeof document}function fr(){return(fr=(0,c.Z)(function*(){return!!Ss()&&new Promise(ce=>{const Z=setTimeout(()=>{ce(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(Z),ce(!0)})})})).apply(this,arguments)}const pn={LOCAL:"local",NONE:"none",SESSION:"session"},Ki=N.ax,Si="persistence";function Vn(ce){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,c.Z)(function*(ce){yield ce._initializationPromise;const Z=Xt(),Y=N.az(Si,ce.config.apiKey,ce.name);Z&&Z.setItem(Y,ce._getPersistence())})).apply(this,arguments)}function Xt(){var ce;try{return(null===(ce=function Bn(){return"undefined"!=typeof window?window:null}())||void 0===ce?void 0:ce.sessionStorage)||null}catch(Z){return null}}const yt=N.ax;class dt{constructor(){this.browserResolver=N.ay(N.k),this.cordovaResolver=N.ay(class an{constructor(){this._redirectPersistence=N.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=N.aB,this._overrideRedirectResult=N.aC}_initialize(Z){var Y=this;return(0,c.Z)(function*(){const ke=Z._key();let Je=Y.eventManagers.get(ke);return Je||(Je=new Oe(Z),Y.eventManagers.set(ke,Je),Y.attachCallbackListeners(Z,Je)),Je})()}_openPopup(Z){(0,N.at)(Z,"operation-not-supported-in-this-environment")}_openRedirect(Z,Y,ke,Je){var _t=this;return(0,c.Z)(function*(){!function ye(ce){var Z,Y,ke,Je,_t,kt,nn,Yt,pi,Nr;const Zt=fe();(0,N.ax)("function"==typeof(null===(Z=null==Zt?void 0:Zt.universalLinks)||void 0===Z?void 0:Z.subscribe),ce,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,N.ax)(void 0!==(null===(Y=null==Zt?void 0:Zt.BuildInfo)||void 0===Y?void 0:Y.packageName),ce,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,N.ax)("function"==typeof(null===(_t=null===(Je=null===(ke=null==Zt?void 0:Zt.cordova)||void 0===ke?void 0:ke.plugins)||void 0===Je?void 0:Je.browsertab)||void 0===_t?void 0:_t.openUrl),ce,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.ax)("function"==typeof(null===(Yt=null===(nn=null===(kt=null==Zt?void 0:Zt.cordova)||void 0===kt?void 0:kt.plugins)||void 0===nn?void 0:nn.browsertab)||void 0===Yt?void 0:Yt.isAvailable),ce,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.ax)("function"==typeof(null===(Nr=null===(pi=null==Zt?void 0:Zt.cordova)||void 0===pi?void 0:pi.InAppBrowser)||void 0===Nr?void 0:Nr.open),ce,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(Z);const kt=yield _t._initialize(Z);yield kt.initialized(),kt.resetRedirect(),(0,N.aD)(),yield _t._originValidation(Z);const nn=function Se(ce,Z,Y=null){return{type:Z,eventId:Y,urlResponse:null,sessionId:J(),postBody:null,tenantId:ce.tenantId,error:(0,N.aw)(ce,"no-auth-event")}}(Z,ke,Je);yield function Qe(ce,Z){return se()._set(ue(ce),Z)}(Z,nn);const Yt=yield function W(ce,Z,Y){return $.apply(this,arguments)}(Z,nn,Y),pi=yield function Ne(ce){const{cordova:Z}=fe();return new Promise(Y=>{Z.plugins.browsertab.isAvailable(ke=>{let Je=null;ke?Z.plugins.browsertab.openUrl(ce):Je=Z.InAppBrowser.open(ce,(0,N.ap)()?"_blank":"_system","location=yes"),Y(Je)})})}(Yt);return function Ve(ce,Z,Y){return qe.apply(this,arguments)}(Z,kt,pi)})()}_isIframeWebStorageSupported(Z,Y){throw new Error("Method not implemented.")}_originValidation(Z){const Y=Z._key();return this.originValidationPromises[Y]||(this.originValidationPromises[Y]=function ae(ce){return Ke.apply(this,arguments)}(Z)),this.originValidationPromises[Y]}attachCallbackListeners(Z,Y){const{universalLinks:ke,handleOpenURL:Je,BuildInfo:_t}=fe(),kt=setTimeout((0,c.Z)(function*(){yield re(Z),Y.onEvent(tt())}),500),nn=function(){var Nr=(0,c.Z)(function*(Zt){clearTimeout(kt);const sr=yield re(Z);let Ms=null;sr&&(null==Zt?void 0:Zt.url)&&(Ms=function Me(ce,Z){var Y,ke;const Je=function me(ce){const Z=Ue(ce),Y=Z.link?decodeURIComponent(Z.link):void 0,ke=Ue(Y).link,Je=Z.deep_link_id?decodeURIComponent(Z.deep_link_id):void 0;return Ue(Je).link||Je||ke||Y||ce}(Z);if(Je.includes("/__/auth/callback")){const _t=Ue(Je),kt=_t.firebaseError?function Ce(ce){try{return JSON.parse(ce)}catch(Z){return null}}(decodeURIComponent(_t.firebaseError)):null,nn=null===(ke=null===(Y=null==kt?void 0:kt.code)||void 0===Y?void 0:Y.split("auth/"))||void 0===ke?void 0:ke[1],Yt=nn?(0,N.aw)(nn):null;return Yt?{type:ce.type,eventId:ce.eventId,tenantId:ce.tenantId,error:Yt,urlResponse:null,sessionId:null,postBody:null}:{type:ce.type,eventId:ce.eventId,tenantId:ce.tenantId,sessionId:ce.sessionId,urlResponse:Je,postBody:null}}return null}(sr,Zt.url)),Y.onEvent(Ms||tt())});return function(sr){return Nr.apply(this,arguments)}}();void 0!==ke&&"function"==typeof ke.subscribe&&ke.subscribe(null,nn);const Yt=Je,pi=`${_t.packageName.toLowerCase()}://`;fe().handleOpenURL=function(){var Nr=(0,c.Z)(function*(Zt){if(Zt.toLowerCase().startsWith(pi)&&nn({url:Zt}),"function"==typeof Yt)try{Yt(Zt)}catch(sr){console.error(sr)}});return function(Zt){return Nr.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=N.a,this._completeRedirectFn=N.aB,this._overrideRedirectResult=N.aC}_initialize(Z){var Y=this;return(0,c.Z)(function*(){return yield Y.selectUnderlyingResolver(),Y.assertedUnderlyingResolver._initialize(Z)})()}_openPopup(Z,Y,ke,Je){var _t=this;return(0,c.Z)(function*(){return yield _t.selectUnderlyingResolver(),_t.assertedUnderlyingResolver._openPopup(Z,Y,ke,Je)})()}_openRedirect(Z,Y,ke,Je){var _t=this;return(0,c.Z)(function*(){return yield _t.selectUnderlyingResolver(),_t.assertedUnderlyingResolver._openRedirect(Z,Y,ke,Je)})()}_isIframeWebStorageSupported(Z,Y){this.assertedUnderlyingResolver._isIframeWebStorageSupported(Z,Y)}_originValidation(Z){return this.assertedUnderlyingResolver._originValidation(Z)}get _shouldInitProactively(){return Ss()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return yt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var Z=this;return(0,c.Z)(function*(){if(Z.underlyingResolver)return;const Y=yield function Dt(){return fr.apply(this,arguments)}();Z.underlyingResolver=Y?Z.cordovaResolver:Z.browserResolver})()}}function Wr(ce){return ce.unwrap()}function Jt(ce){return fi(ce)}function fi(ce){const{_tokenResponse:Z}=ce instanceof de.ZR?ce.customData:ce;if(!Z)return null;if(!(ce instanceof de.ZR)&&"temporaryProof"in Z&&"phoneNumber"in Z)return N.P.credentialFromResult(ce);const Y=Z.providerId;if(!Y||Y===N.o.PASSWORD)return null;let ke;switch(Y){case N.o.GOOGLE:ke=N.Q;break;case N.o.FACEBOOK:ke=N.N;break;case N.o.GITHUB:ke=N.T;break;case N.o.TWITTER:ke=N.W;break;default:const{oauthIdToken:Je,oauthAccessToken:_t,oauthTokenSecret:kt,pendingToken:nn,nonce:Yt}=Z;return _t||kt||Je||nn?nn?Y.startsWith("saml.")?N.aL._create(Y,nn):N.J._fromParams({providerId:Y,signInMethod:Y,pendingToken:nn,idToken:Je,accessToken:_t}):new N.U(Y).credential({idToken:Je,accessToken:_t,rawNonce:Yt}):null}return ce instanceof de.ZR?ke.credentialFromError(ce):ke.credentialFromResult(ce)}function Mn(ce,Z){return Z.catch(Y=>{throw Y instanceof de.ZR&&function fs(ce,Z){var Y,ke;const Je=null===(Y=Z.customData)||void 0===Y?void 0:Y._tokenResponse;if("auth/multi-factor-auth-required"===(null===(ke=Z)||void 0===ke?void 0:ke.code))Z.resolver=new z(ce,N.an(ce,Z));else if(Je){const _t=fi(Z),kt=Z;_t&&(kt.credential=_t,kt.tenantId=Je.tenantId||void 0,kt.email=Je.email||void 0,kt.phoneNumber=Je.phoneNumber||void 0)}}(ce,Y),Y}).then(Y=>{const Je=Y.user;return{operationType:Y.operationType,credential:Jt(Y),additionalUserInfo:N.al(Y),user:ee.getOrCreate(Je)}})}function bt(ce,Z){return K.apply(this,arguments)}function K(){return(K=(0,c.Z)(function*(ce,Z){const Y=yield Z;return{verificationId:Y.verificationId,confirm:ke=>Mn(ce,Y.confirm(ke))}})).apply(this,arguments)}class z{constructor(Z,Y){this.resolver=Y,this.auth=function Yr(ce){return ce.wrapped()}(Z)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(Z){return Mn(Wr(this.auth),this.resolver.resolveSignIn(Z))}}class ee{constructor(Z){this._delegate=Z,this.multiFactor=N.ao(Z)}static getOrCreate(Z){return ee.USER_MAP.has(Z)||ee.USER_MAP.set(Z,new ee(Z)),ee.USER_MAP.get(Z)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(Z){return this._delegate.getIdTokenResult(Z)}getIdToken(Z){return this._delegate.getIdToken(Z)}linkAndRetrieveDataWithCredential(Z){return this.linkWithCredential(Z)}linkWithCredential(Z){var Y=this;return(0,c.Z)(function*(){return Mn(Y.auth,N.Z(Y._delegate,Z))})()}linkWithPhoneNumber(Z,Y){var ke=this;return(0,c.Z)(function*(){return bt(ke.auth,N.l(ke._delegate,Z,Y))})()}linkWithPopup(Z){var Y=this;return(0,c.Z)(function*(){return Mn(Y.auth,N.d(Y._delegate,Z,dt))})()}linkWithRedirect(Z){var Y=this;return(0,c.Z)(function*(){return yield Vn(N.aE(Y.auth)),N.g(Y._delegate,Z,dt)})()}reauthenticateAndRetrieveDataWithCredential(Z){return this.reauthenticateWithCredential(Z)}reauthenticateWithCredential(Z){var Y=this;return(0,c.Z)(function*(){return Mn(Y.auth,N._(Y._delegate,Z))})()}reauthenticateWithPhoneNumber(Z,Y){return bt(this.auth,N.r(this._delegate,Z,Y))}reauthenticateWithPopup(Z){return Mn(this.auth,N.e(this._delegate,Z,dt))}reauthenticateWithRedirect(Z){var Y=this;return(0,c.Z)(function*(){return yield Vn(N.aE(Y.auth)),N.h(Y._delegate,Z,dt)})()}sendEmailVerification(Z){return N.ab(this._delegate,Z)}unlink(Z){var Y=this;return(0,c.Z)(function*(){return yield N.ak(Y._delegate,Z),Y})()}updateEmail(Z){return N.ag(this._delegate,Z)}updatePassword(Z){return N.ah(this._delegate,Z)}updatePhoneNumber(Z){return N.u(this._delegate,Z)}updateProfile(Z){return N.af(this._delegate,Z)}verifyBeforeUpdateEmail(Z,Y){return N.ac(this._delegate,Z,Y)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ee.USER_MAP=new WeakMap;const te=N.ax;let H=(()=>{class ce{constructor(Y,ke){if(this.app=Y,ke.isInitialized())return this._delegate=ke.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Je}=Y.options;te(Je,"invalid-api-key",{appName:Y.name}),te(Je,"invalid-api-key",{appName:Y.name});const _t="undefined"!=typeof window?dt:void 0;this._delegate=ke.initialize({options:{persistence:Ge(Je,Y.name),popupRedirectResolver:_t}}),this._delegate._updateErrorMap(N.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ee.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(Y){this._delegate.languageCode=Y}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(Y){this._delegate.tenantId=Y}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(Y,ke){N.G(this._delegate,Y,ke)}applyActionCode(Y){return N.a2(this._delegate,Y)}checkActionCode(Y){return N.a3(this._delegate,Y)}confirmPasswordReset(Y,ke){return N.a1(this._delegate,Y,ke)}createUserWithEmailAndPassword(Y,ke){var Je=this;return(0,c.Z)(function*(){return Mn(Je._delegate,N.a5(Je._delegate,Y,ke))})()}fetchProvidersForEmail(Y){return this.fetchSignInMethodsForEmail(Y)}fetchSignInMethodsForEmail(Y){return N.aa(this._delegate,Y)}isSignInWithEmailLink(Y){return N.a8(this._delegate,Y)}getRedirectResult(){var Y=this;return(0,c.Z)(function*(){te(ei(),Y._delegate,"operation-not-supported-in-this-environment");const ke=yield N.j(Y._delegate,dt);return ke?Mn(Y._delegate,Promise.resolve(ke)):{credential:null,user:null}})()}addFrameworkForLogging(Y){!function xn(ce,Z){(0,N.aE)(ce)._logFramework(Z)}(this._delegate,Y)}onAuthStateChanged(Y,ke,Je){const{next:_t,error:kt,complete:nn}=Ee(Y,ke,Je);return this._delegate.onAuthStateChanged(_t,kt,nn)}onIdTokenChanged(Y,ke,Je){const{next:_t,error:kt,complete:nn}=Ee(Y,ke,Je);return this._delegate.onIdTokenChanged(_t,kt,nn)}sendSignInLinkToEmail(Y,ke){return N.a7(this._delegate,Y,ke)}sendPasswordResetEmail(Y,ke){return N.a0(this._delegate,Y,ke||void 0)}setPersistence(Y){var ke=this;return(0,c.Z)(function*(){let Je;switch(function pr(ce,Z){Ki(Object.values(pn).includes(Z),ce,"invalid-persistence-type"),(0,de.b$)()?Ki(Z!==pn.SESSION,ce,"unsupported-persistence-type"):(0,de.UG)()?Ki(Z===pn.NONE,ce,"unsupported-persistence-type"):hs()?Ki(Z===pn.NONE||Z===pn.LOCAL&&(0,de.hl)(),ce,"unsupported-persistence-type"):Ki(Z===pn.NONE||qr(),ce,"unsupported-persistence-type")}(ke._delegate,Y),Y){case pn.SESSION:Je=N.a;break;case pn.LOCAL:Je=(yield N.ay(N.i)._isAvailable())?N.i:N.b;break;case pn.NONE:Je=N.L;break;default:return N.at("argument-error",{appName:ke._delegate.name})}return ke._delegate.setPersistence(Je)})()}signInAndRetrieveDataWithCredential(Y){return this.signInWithCredential(Y)}signInAnonymously(){return Mn(this._delegate,N.X(this._delegate))}signInWithCredential(Y){return Mn(this._delegate,N.Y(this._delegate,Y))}signInWithCustomToken(Y){return Mn(this._delegate,N.$(this._delegate,Y))}signInWithEmailAndPassword(Y,ke){return Mn(this._delegate,N.a6(this._delegate,Y,ke))}signInWithEmailLink(Y,ke){return Mn(this._delegate,N.a9(this._delegate,Y,ke))}signInWithPhoneNumber(Y,ke){return bt(this._delegate,N.s(this._delegate,Y,ke))}signInWithPopup(Y){var ke=this;return(0,c.Z)(function*(){return te(ei(),ke._delegate,"operation-not-supported-in-this-environment"),Mn(ke._delegate,N.c(ke._delegate,Y,dt))})()}signInWithRedirect(Y){var ke=this;return(0,c.Z)(function*(){return te(ei(),ke._delegate,"operation-not-supported-in-this-environment"),yield Vn(ke._delegate),N.f(ke._delegate,Y,dt)})()}updateCurrentUser(Y){return this._delegate.updateCurrentUser(Y)}verifyPasswordResetCode(Y){return N.a4(this._delegate,Y)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return ce.Persistence=pn,ce})();function Ee(ce,Z,Y){let ke=ce;"function"!=typeof ce&&({next:ke,error:Z,complete:Y}=ce);const Je=ke;return{next:kt=>Je(kt&&ee.getOrCreate(kt)),error:Z,complete:Y}}function Ge(ce,Z){const Y=function Hs(ce,Z){const Y=Xt();if(!Y)return[];const ke=N.az(Si,ce,Z);switch(Y.getItem(ke)){case pn.NONE:return[N.L];case pn.LOCAL:return[N.i,N.a];case pn.SESSION:return[N.a];default:return[]}}(ce,Z);if("undefined"!=typeof self&&!Y.includes(N.i)&&Y.push(N.i),"undefined"!=typeof window)for(const ke of[N.b,N.a])Y.includes(ke)||Y.push(ke);return Y.includes(N.L)||Y.push(N.L),Y}class ut{constructor(){this.providerId="phone",this._delegate=new N.P(Wr(G.Z.auth()))}static credential(Z,Y){return N.P.credential(Z,Y)}verifyPhoneNumber(Z,Y){return this._delegate.verifyPhoneNumber(Z,Y)}unwrap(){return this._delegate}}ut.PHONE_SIGN_IN_METHOD=N.P.PHONE_SIGN_IN_METHOD,ut.PROVIDER_ID=N.P.PROVIDER_ID;const Ut=N.ax;class ln{constructor(Z,Y,ke=G.Z.app()){var Je;Ut(null===(Je=ke.options)||void 0===Je?void 0:Je.apiKey,"invalid-api-key",{appName:ke.name}),this._delegate=new N.R(Z,Y,ke.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Wt(ce){ce.INTERNAL.registerComponent(new oe.wA("auth-compat",Z=>{const Y=Z.getProvider("app-compat").getImmediate(),ke=Z.getProvider("auth");return new H(Y,ke)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:N.A.EMAIL_SIGNIN,PASSWORD_RESET:N.A.PASSWORD_RESET,RECOVER_EMAIL:N.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:N.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:N.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:N.A.VERIFY_EMAIL}},EmailAuthProvider:N.M,FacebookAuthProvider:N.N,GithubAuthProvider:N.T,GoogleAuthProvider:N.Q,OAuthProvider:N.U,SAMLAuthProvider:N.V,PhoneAuthProvider:ut,PhoneMultiFactorGenerator:N.m,RecaptchaVerifier:ln,TwitterAuthProvider:N.W,Auth:H,AuthCredential:N.H,Error:de.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),ce.registerVersion("@firebase/auth-compat","0.2.17")}(G.Z)},8306:(lt,De,F)=>{F.d(De,{y:()=>W});var c=F(930),G=F(727),N=F(8822),de=F(4671);var oe=F(2416),fe=F(576),we=F(2806);let W=(()=>{class Ne{constructor(qe){qe&&(this._subscribe=qe)}lift(qe){const ye=new Ne;return ye.source=this,ye.operator=qe,ye}subscribe(qe,ye,Ae){const Ze=function Ke(Ne){return Ne&&Ne instanceof c.Lv||function ae(Ne){return Ne&&(0,fe.m)(Ne.next)&&(0,fe.m)(Ne.error)&&(0,fe.m)(Ne.complete)}(Ne)&&(0,G.Nn)(Ne)}(qe)?qe:new c.Hp(qe,ye,Ae);return(0,we.x)(()=>{const{operator:We,source:Fe}=this;Ze.add(We?We.call(Ze,Fe):Fe?this._subscribe(Ze):this._trySubscribe(Ze))}),Ze}_trySubscribe(qe){try{return this._subscribe(qe)}catch(ye){qe.error(ye)}}forEach(qe,ye){return new(ye=$(ye))((Ae,Ze)=>{const We=new c.Hp({next:Fe=>{try{qe(Fe)}catch(Oe){Ze(Oe),We.unsubscribe()}},error:Ze,complete:Ae});this.subscribe(We)})}_subscribe(qe){var ye;return null===(ye=this.source)||void 0===ye?void 0:ye.subscribe(qe)}[N.L](){return this}pipe(...qe){return function be(Ne){return 0===Ne.length?de.y:1===Ne.length?Ne[0]:function(qe){return Ne.reduce((ye,Ae)=>Ae(ye),qe)}}(qe)(this)}toPromise(qe){return new(qe=$(qe))((ye,Ae)=>{let Ze;this.subscribe(We=>Ze=We,We=>Ae(We),()=>ye(Ze))})}}return Ne.create=Ve=>new Ne(Ve),Ne})();function $(Ne){var Ve;return null!==(Ve=null!=Ne?Ne:oe.v.Promise)&&void 0!==Ve?Ve:Promise}},7579:(lt,De,F)=>{F.d(De,{x:()=>oe});var c=F(8306),G=F(727);const de=(0,F(3888).d)(we=>function(){we(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var he=F(8737),be=F(2806);let oe=(()=>{class we extends c.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift($){const ae=new fe(this,this);return ae.operator=$,ae}_throwIfClosed(){if(this.closed)throw new de}next($){(0,be.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ae of this.currentObservers)ae.next($)}})}error($){(0,be.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=$;const{observers:ae}=this;for(;ae.length;)ae.shift().error($)}})}complete(){(0,be.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:$}=this;for(;$.length;)$.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var $;return(null===($=this.observers)||void 0===$?void 0:$.length)>0}_trySubscribe($){return this._throwIfClosed(),super._trySubscribe($)}_subscribe($){return this._throwIfClosed(),this._checkFinalizedStatuses($),this._innerSubscribe($)}_innerSubscribe($){const{hasError:ae,isStopped:Ke,observers:Ne}=this;return ae||Ke?G.Lc:(this.currentObservers=null,Ne.push($),new G.w0(()=>{this.currentObservers=null,(0,he.P)(Ne,$)}))}_checkFinalizedStatuses($){const{hasError:ae,thrownError:Ke,isStopped:Ne}=this;ae?$.error(Ke):Ne&&$.complete()}asObservable(){const $=new c.y;return $.source=this,$}}return we.create=(W,$)=>new fe(W,$),we})();class fe extends oe{constructor(W,$){super(),this.destination=W,this.source=$}next(W){var $,ae;null===(ae=null===($=this.destination)||void 0===$?void 0:$.next)||void 0===ae||ae.call($,W)}error(W){var $,ae;null===(ae=null===($=this.destination)||void 0===$?void 0:$.error)||void 0===ae||ae.call($,W)}complete(){var W,$;null===($=null===(W=this.destination)||void 0===W?void 0:W.complete)||void 0===$||$.call(W)}_subscribe(W){var $,ae;return null!==(ae=null===($=this.source)||void 0===$?void 0:$.subscribe(W))&&void 0!==ae?ae:G.Lc}}},930:(lt,De,F)=>{F.d(De,{Hp:()=>qe,Lv:()=>ae});var c=F(576),G=F(727),N=F(2416),de=F(7849),he=F(5032);const be=we("C",void 0,void 0);function we(Fe,Oe,Se){return{kind:Fe,value:Oe,error:Se}}var W=F(3410),$=F(2806);class ae extends G.w0{constructor(Oe){super(),this.isStopped=!1,Oe?(this.destination=Oe,(0,G.Nn)(Oe)&&Oe.add(this)):this.destination=We}static create(Oe,Se,Qe){return new qe(Oe,Se,Qe)}next(Oe){this.isStopped?Ze(function fe(Fe){return we("N",Fe,void 0)}(Oe),this):this._next(Oe)}error(Oe){this.isStopped?Ze(function oe(Fe){return we("E",void 0,Fe)}(Oe),this):(this.isStopped=!0,this._error(Oe))}complete(){this.isStopped?Ze(be,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Oe){this.destination.next(Oe)}_error(Oe){try{this.destination.error(Oe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ke=Function.prototype.bind;function Ne(Fe,Oe){return Ke.call(Fe,Oe)}class Ve{constructor(Oe){this.partialObserver=Oe}next(Oe){const{partialObserver:Se}=this;if(Se.next)try{Se.next(Oe)}catch(Qe){ye(Qe)}}error(Oe){const{partialObserver:Se}=this;if(Se.error)try{Se.error(Oe)}catch(Qe){ye(Qe)}else ye(Oe)}complete(){const{partialObserver:Oe}=this;if(Oe.complete)try{Oe.complete()}catch(Se){ye(Se)}}}class qe extends ae{constructor(Oe,Se,Qe){let re;if(super(),(0,c.m)(Oe)||!Oe)re={next:null!=Oe?Oe:void 0,error:null!=Se?Se:void 0,complete:null!=Qe?Qe:void 0};else{let _e;this&&N.v.useDeprecatedNextContext?(_e=Object.create(Oe),_e.unsubscribe=()=>this.unsubscribe(),re={next:Oe.next&&Ne(Oe.next,_e),error:Oe.error&&Ne(Oe.error,_e),complete:Oe.complete&&Ne(Oe.complete,_e)}):re=Oe}this.destination=new Ve(re)}}function ye(Fe){N.v.useDeprecatedSynchronousErrorHandling?(0,$.O)(Fe):(0,de.h)(Fe)}function Ze(Fe,Oe){const{onStoppedNotification:Se}=N.v;Se&&W.z.setTimeout(()=>Se(Fe,Oe))}const We={closed:!0,next:he.Z,error:function Ae(Fe){throw Fe},complete:he.Z}},727:(lt,De,F)=>{F.d(De,{Lc:()=>be,w0:()=>he,Nn:()=>oe});var c=F(576);const N=(0,F(3888).d)(we=>function($){we(this),this.message=$?`${$.length} errors occurred during unsubscription:\n${$.map((ae,Ke)=>`${Ke+1}) ${ae.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=$});var de=F(8737);class he{constructor(W){this.initialTeardown=W,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let W;if(!this.closed){this.closed=!0;const{_parentage:$}=this;if($)if(this._parentage=null,Array.isArray($))for(const Ne of $)Ne.remove(this);else $.remove(this);const{initialTeardown:ae}=this;if((0,c.m)(ae))try{ae()}catch(Ne){W=Ne instanceof N?Ne.errors:[Ne]}const{_finalizers:Ke}=this;if(Ke){this._finalizers=null;for(const Ne of Ke)try{fe(Ne)}catch(Ve){W=null!=W?W:[],Ve instanceof N?W=[...W,...Ve.errors]:W.push(Ve)}}if(W)throw new N(W)}}add(W){var $;if(W&&W!==this)if(this.closed)fe(W);else{if(W instanceof he){if(W.closed||W._hasParent(this))return;W._addParent(this)}(this._finalizers=null!==($=this._finalizers)&&void 0!==$?$:[]).push(W)}}_hasParent(W){const{_parentage:$}=this;return $===W||Array.isArray($)&&$.includes(W)}_addParent(W){const{_parentage:$}=this;this._parentage=Array.isArray($)?($.push(W),$):$?[$,W]:W}_removeParent(W){const{_parentage:$}=this;$===W?this._parentage=null:Array.isArray($)&&(0,de.P)($,W)}remove(W){const{_finalizers:$}=this;$&&(0,de.P)($,W),W instanceof he&&W._removeParent(this)}}he.EMPTY=(()=>{const we=new he;return we.closed=!0,we})();const be=he.EMPTY;function oe(we){return we instanceof he||we&&"closed"in we&&(0,c.m)(we.remove)&&(0,c.m)(we.add)&&(0,c.m)(we.unsubscribe)}function fe(we){(0,c.m)(we)?we():we.unsubscribe()}},2416:(lt,De,F)=>{F.d(De,{v:()=>c});const c={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(lt,De,F)=>{F.d(De,{E:()=>G});const G=new(F(8306).y)(he=>he.complete())},8996:(lt,De,F)=>{F.d(De,{D:()=>Oe});var c=F(8421),G=F(5363),N=F(9468),be=F(8306),fe=F(2202),we=F(576),W=F(9672);function ae(Se,Qe){if(!Se)throw new Error("Iterable cannot be null");return new be.y(re=>{(0,W.f)(re,Qe,()=>{const _e=Se[Symbol.asyncIterator]();(0,W.f)(re,Qe,()=>{_e.next().then(Me=>{Me.done?re.complete():re.next(Me.value)})},0,!0)})})}var Ke=F(3670),Ne=F(8239),Ve=F(1144),qe=F(6495),ye=F(2206),Ae=F(4532),Ze=F(3260);function Oe(Se,Qe){return Qe?function Fe(Se,Qe){if(null!=Se){if((0,Ke.c)(Se))return function de(Se,Qe){return(0,c.Xf)(Se).pipe((0,N.R)(Qe),(0,G.Q)(Qe))}(Se,Qe);if((0,Ve.z)(Se))return function oe(Se,Qe){return new be.y(re=>{let _e=0;return Qe.schedule(function(){_e===Se.length?re.complete():(re.next(Se[_e++]),re.closed||this.schedule())})})}(Se,Qe);if((0,Ne.t)(Se))return function he(Se,Qe){return(0,c.Xf)(Se).pipe((0,N.R)(Qe),(0,G.Q)(Qe))}(Se,Qe);if((0,ye.D)(Se))return ae(Se,Qe);if((0,qe.T)(Se))return function $(Se,Qe){return new be.y(re=>{let _e;return(0,W.f)(re,Qe,()=>{_e=Se[fe.h](),(0,W.f)(re,Qe,()=>{let Me,J;try{({value:Me,done:J}=_e.next())}catch(se){return void re.error(se)}J?re.complete():re.next(Me)},0,!0)}),()=>(0,we.m)(null==_e?void 0:_e.return)&&_e.return()})}(Se,Qe);if((0,Ze.L)(Se))return function We(Se,Qe){return ae((0,Ze.Q)(Se),Qe)}(Se,Qe)}throw(0,Ae.z)(Se)}(Se,Qe):(0,c.Xf)(Se)}},8421:(lt,De,F)=>{F.d(De,{Xf:()=>Ke});var c=F(655),G=F(1144),N=F(8239),de=F(8306),he=F(3670),be=F(2206),oe=F(4532),fe=F(6495),we=F(3260),W=F(576),$=F(7849),ae=F(8822);function Ke(Fe){if(Fe instanceof de.y)return Fe;if(null!=Fe){if((0,he.c)(Fe))return function Ne(Fe){return new de.y(Oe=>{const Se=Fe[ae.L]();if((0,W.m)(Se.subscribe))return Se.subscribe(Oe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Fe);if((0,G.z)(Fe))return function Ve(Fe){return new de.y(Oe=>{for(let Se=0;Se<Fe.length&&!Oe.closed;Se++)Oe.next(Fe[Se]);Oe.complete()})}(Fe);if((0,N.t)(Fe))return function qe(Fe){return new de.y(Oe=>{Fe.then(Se=>{Oe.closed||(Oe.next(Se),Oe.complete())},Se=>Oe.error(Se)).then(null,$.h)})}(Fe);if((0,be.D)(Fe))return Ae(Fe);if((0,fe.T)(Fe))return function ye(Fe){return new de.y(Oe=>{for(const Se of Fe)if(Oe.next(Se),Oe.closed)return;Oe.complete()})}(Fe);if((0,we.L)(Fe))return function Ze(Fe){return Ae((0,we.Q)(Fe))}(Fe)}throw(0,oe.z)(Fe)}function Ae(Fe){return new de.y(Oe=>{(function We(Fe,Oe){var Se,Qe,re,_e;return(0,c.mG)(this,void 0,void 0,function*(){try{for(Se=(0,c.KL)(Fe);!(Qe=yield Se.next()).done;)if(Oe.next(Qe.value),Oe.closed)return}catch(Me){re={error:Me}}finally{try{Qe&&!Qe.done&&(_e=Se.return)&&(yield _e.call(Se))}finally{if(re)throw re.error}}Oe.complete()})})(Fe,Oe).catch(Se=>Oe.error(Se))})}},6451:(lt,De,F)=>{F.d(De,{T:()=>be});var c=F(8189),G=F(8421),N=F(515),de=F(3269),he=F(8996);function be(...oe){const fe=(0,de.yG)(oe),we=(0,de._6)(oe,1/0),W=oe;return W.length?1===W.length?(0,G.Xf)(W[0]):(0,c.J)(we)((0,he.D)(W,fe)):N.E}},5403:(lt,De,F)=>{F.d(De,{x:()=>G});var c=F(930);function G(de,he,be,oe,fe){return new N(de,he,be,oe,fe)}class N extends c.Lv{constructor(he,be,oe,fe,we,W){super(he),this.onFinalize=we,this.shouldUnsubscribe=W,this._next=be?function($){try{be($)}catch(ae){he.error(ae)}}:super._next,this._error=fe?function($){try{fe($)}catch(ae){he.error(ae)}finally{this.unsubscribe()}}:super._error,this._complete=oe?function(){try{oe()}catch($){he.error($)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var he;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:be}=this;super.unsubscribe(),!be&&(null===(he=this.onFinalize)||void 0===he||he.call(this))}}}},4004:(lt,De,F)=>{F.d(De,{U:()=>N});var c=F(4482),G=F(5403);function N(de,he){return(0,c.e)((be,oe)=>{let fe=0;be.subscribe((0,G.x)(oe,we=>{oe.next(de.call(he,we,fe++))}))})}},8189:(lt,De,F)=>{F.d(De,{J:()=>N});var c=F(5577),G=F(4671);function N(de=1/0){return(0,c.z)(G.y,de)}},5577:(lt,De,F)=>{F.d(De,{z:()=>fe});var c=F(4004),G=F(8421),N=F(4482),de=F(9672),he=F(5403),oe=F(576);function fe(we,W,$=1/0){return(0,oe.m)(W)?fe((ae,Ke)=>(0,c.U)((Ne,Ve)=>W(ae,Ne,Ke,Ve))((0,G.Xf)(we(ae,Ke))),$):("number"==typeof W&&($=W),(0,N.e)((ae,Ke)=>function be(we,W,$,ae,Ke,Ne,Ve,qe){const ye=[];let Ae=0,Ze=0,We=!1;const Fe=()=>{We&&!ye.length&&!Ae&&W.complete()},Oe=Qe=>Ae<ae?Se(Qe):ye.push(Qe),Se=Qe=>{Ne&&W.next(Qe),Ae++;let re=!1;(0,G.Xf)($(Qe,Ze++)).subscribe((0,he.x)(W,_e=>{null==Ke||Ke(_e),Ne?Oe(_e):W.next(_e)},()=>{re=!0},void 0,()=>{if(re)try{for(Ae--;ye.length&&Ae<ae;){const _e=ye.shift();Ve?(0,de.f)(W,Ve,()=>Se(_e)):Se(_e)}Fe()}catch(_e){W.error(_e)}}))};return we.subscribe((0,he.x)(W,Oe,()=>{We=!0,Fe()})),()=>{null==qe||qe()}}(ae,Ke,we,$)))}},5363:(lt,De,F)=>{F.d(De,{Q:()=>de});var c=F(9672),G=F(4482),N=F(5403);function de(he,be=0){return(0,G.e)((oe,fe)=>{oe.subscribe((0,N.x)(fe,we=>(0,c.f)(fe,he,()=>fe.next(we),be),()=>(0,c.f)(fe,he,()=>fe.complete(),be),we=>(0,c.f)(fe,he,()=>fe.error(we),be)))})}},3099:(lt,De,F)=>{F.d(De,{B:()=>be});var c=F(8996),G=F(5698),N=F(7579),de=F(930),he=F(4482);function be(fe={}){const{connector:we=(()=>new N.x),resetOnError:W=!0,resetOnComplete:$=!0,resetOnRefCountZero:ae=!0}=fe;return Ke=>{let Ne=null,Ve=null,qe=null,ye=0,Ae=!1,Ze=!1;const We=()=>{null==Ve||Ve.unsubscribe(),Ve=null},Fe=()=>{We(),Ne=qe=null,Ae=Ze=!1},Oe=()=>{const Se=Ne;Fe(),null==Se||Se.unsubscribe()};return(0,he.e)((Se,Qe)=>{ye++,!Ze&&!Ae&&We();const re=qe=null!=qe?qe:we();Qe.add(()=>{ye--,0===ye&&!Ze&&!Ae&&(Ve=oe(Oe,ae))}),re.subscribe(Qe),Ne||(Ne=new de.Hp({next:_e=>re.next(_e),error:_e=>{Ze=!0,We(),Ve=oe(Fe,W,_e),re.error(_e)},complete:()=>{Ae=!0,We(),Ve=oe(Fe,$),re.complete()}}),(0,c.D)(Se).subscribe(Ne))})(Ke)}}function oe(fe,we,...W){return!0===we?(fe(),null):!1===we?null:we(...W).pipe((0,G.q)(1)).subscribe(()=>fe())}},9468:(lt,De,F)=>{F.d(De,{R:()=>G});var c=F(4482);function G(N,de=0){return(0,c.e)((he,be)=>{be.add(N.schedule(()=>he.subscribe(be),de))})}},5698:(lt,De,F)=>{F.d(De,{q:()=>de});var c=F(515),G=F(4482),N=F(5403);function de(he){return he<=0?()=>c.E:(0,G.e)((be,oe)=>{let fe=0;be.subscribe((0,N.x)(oe,we=>{++fe<=he&&(oe.next(we),he<=fe&&oe.complete())}))})}},8505:(lt,De,F)=>{F.d(De,{b:()=>he});var c=F(576),G=F(4482),N=F(5403),de=F(4671);function he(be,oe,fe){const we=(0,c.m)(be)||oe||fe?{next:be,error:oe,complete:fe}:be;return we?(0,G.e)((W,$)=>{var ae;null===(ae=we.subscribe)||void 0===ae||ae.call(we);let Ke=!0;W.subscribe((0,N.x)($,Ne=>{var Ve;null===(Ve=we.next)||void 0===Ve||Ve.call(we,Ne),$.next(Ne)},()=>{var Ne;Ke=!1,null===(Ne=we.complete)||void 0===Ne||Ne.call(we),$.complete()},Ne=>{var Ve;Ke=!1,null===(Ve=we.error)||void 0===Ve||Ve.call(we,Ne),$.error(Ne)},()=>{var Ne,Ve;Ke&&(null===(Ne=we.unsubscribe)||void 0===Ne||Ne.call(we)),null===(Ve=we.finalize)||void 0===Ve||Ve.call(we)}))}):de.y}},4408:(lt,De,F)=>{F.d(De,{o:()=>he});var c=F(727);class G extends c.w0{constructor(oe,fe){super()}schedule(oe,fe=0){return this}}const N={setInterval(be,oe,...fe){const{delegate:we}=N;return(null==we?void 0:we.setInterval)?we.setInterval(be,oe,...fe):setInterval(be,oe,...fe)},clearInterval(be){const{delegate:oe}=N;return((null==oe?void 0:oe.clearInterval)||clearInterval)(be)},delegate:void 0};var de=F(8737);class he extends G{constructor(oe,fe){super(oe,fe),this.scheduler=oe,this.work=fe,this.pending=!1}schedule(oe,fe=0){if(this.closed)return this;this.state=oe;const we=this.id,W=this.scheduler;return null!=we&&(this.id=this.recycleAsyncId(W,we,fe)),this.pending=!0,this.delay=fe,this.id=this.id||this.requestAsyncId(W,this.id,fe),this}requestAsyncId(oe,fe,we=0){return N.setInterval(oe.flush.bind(oe,this),we)}recycleAsyncId(oe,fe,we=0){if(null!=we&&this.delay===we&&!1===this.pending)return fe;N.clearInterval(fe)}execute(oe,fe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const we=this._execute(oe,fe);if(we)return we;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(oe,fe){let W,we=!1;try{this.work(oe)}catch($){we=!0,W=$||new Error("Scheduled action threw falsy error")}if(we)return this.unsubscribe(),W}unsubscribe(){if(!this.closed){const{id:oe,scheduler:fe}=this,{actions:we}=fe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,de.P)(we,this),null!=oe&&(this.id=this.recycleAsyncId(fe,oe,null)),this.delay=null,super.unsubscribe()}}}},7565:(lt,De,F)=>{F.d(De,{v:()=>N});var c=F(6063);class G{constructor(he,be=G.now){this.schedulerActionCtor=he,this.now=be}schedule(he,be=0,oe){return new this.schedulerActionCtor(this,he).schedule(oe,be)}}G.now=c.l.now;class N extends G{constructor(he,be=G.now){super(he,be),this.actions=[],this._active=!1,this._scheduled=void 0}flush(he){const{actions:be}=this;if(this._active)return void be.push(he);let oe;this._active=!0;do{if(oe=he.execute(he.state,he.delay))break}while(he=be.shift());if(this._active=!1,oe){for(;he=be.shift();)he.unsubscribe();throw oe}}}},4986:(lt,De,F)=>{F.d(De,{z:()=>N,P:()=>de});var c=F(4408);const N=new(F(7565).v)(c.o),de=N},6063:(lt,De,F)=>{F.d(De,{l:()=>c});const c={now:()=>(c.delegate||Date).now(),delegate:void 0}},3410:(lt,De,F)=>{F.d(De,{z:()=>c});const c={setTimeout(G,N,...de){const{delegate:he}=c;return(null==he?void 0:he.setTimeout)?he.setTimeout(G,N,...de):setTimeout(G,N,...de)},clearTimeout(G){const{delegate:N}=c;return((null==N?void 0:N.clearTimeout)||clearTimeout)(G)},delegate:void 0}},2202:(lt,De,F)=>{F.d(De,{h:()=>G});const G=function c(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(lt,De,F)=>{F.d(De,{L:()=>c});const c="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(lt,De,F)=>{F.d(De,{jO:()=>de,yG:()=>he,_6:()=>be});var c=F(576),G=F(3532);function N(oe){return oe[oe.length-1]}function de(oe){return(0,c.m)(N(oe))?oe.pop():void 0}function he(oe){return(0,G.K)(N(oe))?oe.pop():void 0}function be(oe,fe){return"number"==typeof N(oe)?oe.pop():fe}},8737:(lt,De,F)=>{function c(G,N){if(G){const de=G.indexOf(N);0<=de&&G.splice(de,1)}}F.d(De,{P:()=>c})},3888:(lt,De,F)=>{function c(G){const de=G(he=>{Error.call(he),he.stack=(new Error).stack});return de.prototype=Object.create(Error.prototype),de.prototype.constructor=de,de}F.d(De,{d:()=>c})},2806:(lt,De,F)=>{F.d(De,{x:()=>N,O:()=>de});var c=F(2416);let G=null;function N(he){if(c.v.useDeprecatedSynchronousErrorHandling){const be=!G;if(be&&(G={errorThrown:!1,error:null}),he(),be){const{errorThrown:oe,error:fe}=G;if(G=null,oe)throw fe}}else he()}function de(he){c.v.useDeprecatedSynchronousErrorHandling&&G&&(G.errorThrown=!0,G.error=he)}},9672:(lt,De,F)=>{function c(G,N,de,he=0,be=!1){const oe=N.schedule(function(){de(),be?G.add(this.schedule(null,he)):this.unsubscribe()},he);if(G.add(oe),!be)return oe}F.d(De,{f:()=>c})},4671:(lt,De,F)=>{function c(G){return G}F.d(De,{y:()=>c})},1144:(lt,De,F)=>{F.d(De,{z:()=>c});const c=G=>G&&"number"==typeof G.length&&"function"!=typeof G},2206:(lt,De,F)=>{F.d(De,{D:()=>G});var c=F(576);function G(N){return Symbol.asyncIterator&&(0,c.m)(null==N?void 0:N[Symbol.asyncIterator])}},576:(lt,De,F)=>{function c(G){return"function"==typeof G}F.d(De,{m:()=>c})},3670:(lt,De,F)=>{F.d(De,{c:()=>N});var c=F(8822),G=F(576);function N(de){return(0,G.m)(de[c.L])}},6495:(lt,De,F)=>{F.d(De,{T:()=>N});var c=F(2202),G=F(576);function N(de){return(0,G.m)(null==de?void 0:de[c.h])}},8239:(lt,De,F)=>{F.d(De,{t:()=>G});var c=F(576);function G(N){return(0,c.m)(null==N?void 0:N.then)}},3260:(lt,De,F)=>{F.d(De,{Q:()=>N,L:()=>de});var c=F(655),G=F(576);function N(he){return(0,c.FC)(this,arguments,function*(){const oe=he.getReader();try{for(;;){const{value:fe,done:we}=yield(0,c.qq)(oe.read());if(we)return yield(0,c.qq)(void 0);yield yield(0,c.qq)(fe)}}finally{oe.releaseLock()}})}function de(he){return(0,G.m)(null==he?void 0:he.getReader)}},3532:(lt,De,F)=>{F.d(De,{K:()=>G});var c=F(576);function G(N){return N&&(0,c.m)(N.schedule)}},4482:(lt,De,F)=>{F.d(De,{A:()=>G,e:()=>N});var c=F(576);function G(de){return(0,c.m)(null==de?void 0:de.lift)}function N(de){return he=>{if(G(he))return he.lift(function(be){try{return de(be,this)}catch(oe){this.error(oe)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(lt,De,F)=>{function c(){}F.d(De,{Z:()=>c})},7849:(lt,De,F)=>{F.d(De,{h:()=>N});var c=F(2416),G=F(3410);function N(de){G.z.setTimeout(()=>{const{onUnhandledError:he}=c.v;if(!he)throw de;he(de)})}},4532:(lt,De,F)=>{function c(G){return new TypeError(`You provided ${null!==G&&"object"==typeof G?"an invalid object":`'${G}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(De,{z:()=>c})},655:(lt,De,F)=>{function de(J,se){var ue={};for(var Ce in J)Object.prototype.hasOwnProperty.call(J,Ce)&&se.indexOf(Ce)<0&&(ue[Ce]=J[Ce]);if(null!=J&&"function"==typeof Object.getOwnPropertySymbols){var me=0;for(Ce=Object.getOwnPropertySymbols(J);me<Ce.length;me++)se.indexOf(Ce[me])<0&&Object.prototype.propertyIsEnumerable.call(J,Ce[me])&&(ue[Ce[me]]=J[Ce[me]])}return ue}function fe(J,se,ue,Ce){return new(ue||(ue=Promise))(function(Ue,Ct){function an(xn){try{tt(Ce.next(xn))}catch(Jn){Ct(Jn)}}function $t(xn){try{tt(Ce.throw(xn))}catch(Jn){Ct(Jn)}}function tt(xn){xn.done?Ue(xn.value):function me(Ue){return Ue instanceof ue?Ue:new ue(function(Ct){Ct(Ue)})}(xn.value).then(an,$t)}tt((Ce=Ce.apply(J,se||[])).next())})}function ye(J){return this instanceof ye?(this.v=J,this):new ye(J)}function Ae(J,se,ue){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var me,Ce=ue.apply(J,se||[]),Ue=[];return me={},Ct("next"),Ct("throw"),Ct("return"),me[Symbol.asyncIterator]=function(){return this},me;function Ct(Sn){Ce[Sn]&&(me[Sn]=function(fn){return new Promise(function(qt,cn){Ue.push([Sn,fn,qt,cn])>1||an(Sn,fn)})})}function an(Sn,fn){try{!function $t(Sn){Sn.value instanceof ye?Promise.resolve(Sn.value.v).then(tt,xn):Jn(Ue[0][2],Sn)}(Ce[Sn](fn))}catch(qt){Jn(Ue[0][3],qt)}}function tt(Sn){an("next",Sn)}function xn(Sn){an("throw",Sn)}function Jn(Sn,fn){Sn(fn),Ue.shift(),Ue.length&&an(Ue[0][0],Ue[0][1])}}function We(J){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ue,se=J[Symbol.asyncIterator];return se?se.call(J):(J=function ae(J){var se="function"==typeof Symbol&&Symbol.iterator,ue=se&&J[se],Ce=0;if(ue)return ue.call(J);if(J&&"number"==typeof J.length)return{next:function(){return J&&Ce>=J.length&&(J=void 0),{value:J&&J[Ce++],done:!J}}};throw new TypeError(se?"Object is not iterable.":"Symbol.iterator is not defined.")}(J),ue={},Ce("next"),Ce("throw"),Ce("return"),ue[Symbol.asyncIterator]=function(){return this},ue);function Ce(Ue){ue[Ue]=J[Ue]&&function(Ct){return new Promise(function(an,$t){!function me(Ue,Ct,an,$t){Promise.resolve($t).then(function(tt){Ue({value:tt,done:an})},Ct)}(an,$t,(Ct=J[Ue](Ct)).done,Ct.value)})}}}F.d(De,{_T:()=>de,mG:()=>fe,qq:()=>ye,FC:()=>Ae,KL:()=>We})},5e3:(lt,De,F)=>{F.d(De,{deG:()=>gg,tb:()=>pw,AFp:()=>tr,ip1:()=>Ls,CZH:()=>fw,hGG:()=>Wh,z2F:()=>ww,sBO:()=>Uh,Sil:()=>rl,_Vd:()=>Hp,EJc:()=>em,SBq:()=>jp,qLn:()=>tp,vpe:()=>po,tBr:()=>Ns,XFs:()=>Dt,OlP:()=>ai,zs3:()=>ho,ZZ4:()=>fv,aQg:()=>Iw,soG:()=>Qu,YKP:()=>zp,h0i:()=>il,PXZ:()=>nm,R0b:()=>jr,FiY:()=>_s,Lbi:()=>sv,g9A:()=>Vc,n_E:()=>Yp,Qsj:()=>gx,FYo:()=>Zl,JOm:()=>Ka,q3G:()=>Xn,tp0:()=>Lo,Rgc:()=>ya,dDg:()=>nS,q4F:()=>bx,GfV:()=>yx,s_b:()=>zu,ifc:()=>Xt,eFA:()=>im,G48:()=>lS,Gpc:()=>$,f3M:()=>Nt,X6Q:()=>mk,_c5:()=>yS,VLi:()=>Gr,c2e:()=>Xx,zSh:()=>Nb,wAp:()=>ht,vHH:()=>Ve,EiD:()=>qf,mCW:()=>g,qzn:()=>Bo,JVY:()=>Yd,pB0:()=>xg,eBb:()=>jf,L6k:()=>Dg,LAX:()=>Dc,cg1:()=>x0,kL8:()=>S0,yhl:()=>Cu,dqk:()=>Jt,sIi:()=>Ic,CqO:()=>f_,QGY:()=>Xb,F4k:()=>Jb,RDi:()=>ru,AaK:()=>fe,z3N:()=>es,qOj:()=>Tc,TTD:()=>vl,_Bn:()=>ui,xp6:()=>eb,uIk:()=>Hb,ekj:()=>h0,Suo:()=>ev,Xpm:()=>ut,lG2:()=>ke,Yz7:()=>fn,cJS:()=>cn,oAB:()=>ce,Yjl:()=>Je,Y36:()=>Sp,_UZ:()=>d_,GkF:()=>Qb,BQk:()=>Mp,ynx:()=>h_,qZA:()=>u_,TgZ:()=>c_,EpF:()=>ED,n5z:()=>ua,Ikx:()=>C0,LFG:()=>je,$8M:()=>Ha,$Z:()=>CD,NdJ:()=>p_,CRH:()=>gt,kcU:()=>cy,O4$:()=>ly,oxw:()=>SD,Hsn:()=>MD,F$t:()=>t0,Q6J:()=>fo,VKq:()=>xx,iGM:()=>$i,MAs:()=>qb,CHM:()=>Sl,LSH:()=>Mg,B6R:()=>Ut,Udp:()=>d0,WFA:()=>e0,d8E:()=>E_,YNc:()=>rD,_uU:()=>Bt,Oqu:()=>yh,hij:()=>bh,AsE:()=>Pu,HOy:()=>Ip,Gf:()=>Oh});var c=F(7579),G=F(727),N=F(8306),de=F(6451),he=F(3099);function be(o){for(let a in o)if(o[a]===be)return a;throw Error("Could not find renamed property on target object.")}function oe(o,a){for(const u in a)a.hasOwnProperty(u)&&!o.hasOwnProperty(u)&&(o[u]=a[u])}function fe(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(fe).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const a=o.toString();if(null==a)return""+a;const u=a.indexOf("\n");return-1===u?a:a.substring(0,u)}function we(o,a){return null==o||""===o?null===a?"":a:null==a||""===a?o:o+" "+a}const W=be({__forward_ref__:be});function $(o){return o.__forward_ref__=$,o.toString=function(){return fe(this())},o}function ae(o){return Ke(o)?o():o}function Ke(o){return"function"==typeof o&&o.hasOwnProperty(W)&&o.__forward_ref__===$}class Ve extends Error{constructor(a,u){super(function qe(o,a){return`NG0${Math.abs(o)}${a?": "+a:""}`}(a,u)),this.code=a}}function ye(o){return"string"==typeof o?o:null==o?"":String(o)}function Ae(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():ye(o)}function Oe(o,a){const u=a?` in ${a}`:"";throw new Ve(-201,`No provider for ${Ae(o)} found${u}`)}function $t(o,a){null==o&&function tt(o,a,u,h){throw new Error(`ASSERTION ERROR: ${o}`+(null==h?"":` [Expected=> ${u} ${h} ${a} <=Actual]`))}(a,o,null,"!=")}function fn(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function cn(o){return{providers:o.providers||[],imports:o.imports||[]}}function jn(o){return ds(o,qr)||ds(o,ei)}function ds(o,a){return o.hasOwnProperty(a)?o[a]:null}function xs(o){return o&&(o.hasOwnProperty(hs)||o.hasOwnProperty(Ss))?o[hs]:null}const qr=be({\u0275prov:be}),hs=be({\u0275inj:be}),ei=be({ngInjectableDef:be}),Ss=be({ngInjectorDef:be});var Dt=(()=>((Dt=Dt||{})[Dt.Default=0]="Default",Dt[Dt.Host=1]="Host",Dt[Dt.Self=2]="Self",Dt[Dt.SkipSelf=4]="SkipSelf",Dt[Dt.Optional=8]="Optional",Dt))();let fr;function pn(o){const a=fr;return fr=o,a}function Ki(o,a,u){const h=jn(o);return h&&"root"==h.providedIn?void 0===h.value?h.value=h.factory():h.value:u&Dt.Optional?null:void 0!==a?a:void Oe(fe(o),"Injector")}function pr(o){return{toString:o}.toString()}var Vn=(()=>((Vn=Vn||{})[Vn.OnPush=0]="OnPush",Vn[Vn.Default=1]="Default",Vn))(),Xt=(()=>{return(o=Xt||(Xt={}))[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",Xt;var o})();const yt="undefined"!=typeof globalThis&&globalThis,dt="undefined"!=typeof window&&window,Wr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Jt=yt||"undefined"!=typeof global&&global||dt||Wr,Mn={},bt=[],K=be({\u0275cmp:be}),z=be({\u0275dir:be}),ee=be({\u0275pipe:be}),te=be({\u0275mod:be}),H=be({\u0275fac:be}),Ee=be({__NG_ELEMENT_ID__:be});let Ge=0;function ut(o){return pr(()=>{const u={},h={type:o.type,providersResolver:null,decls:o.decls,vars:o.vars,factory:null,template:o.template||null,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:o.exportAs||null,onPush:o.changeDetection===Vn.OnPush,directiveDefs:null,pipeDefs:null,selectors:o.selectors||bt,viewQuery:o.viewQuery||null,features:o.features||null,data:o.data||{},encapsulation:o.encapsulation||Xt.Emulated,id:"c",styles:o.styles||bt,_:null,setInput:null,schemas:o.schemas||null,tView:null},f=o.directives,m=o.features,y=o.pipes;return h.id+=Ge++,h.inputs=Y(o.inputs,u),h.outputs=Y(o.outputs),m&&m.forEach(C=>C(h)),h.directiveDefs=f?()=>("function"==typeof f?f():f).map(ln):null,h.pipeDefs=y?()=>("function"==typeof y?y():y).map(Tn):null,h})}function Ut(o,a,u){const h=o.\u0275cmp;h.directiveDefs=()=>a.map(ln),h.pipeDefs=()=>u.map(Tn)}function ln(o){return _t(o)||function kt(o){return o[z]||null}(o)}function Tn(o){return function nn(o){return o[ee]||null}(o)}const Wt={};function ce(o){return pr(()=>{const a={type:o.type,bootstrap:o.bootstrap||bt,declarations:o.declarations||bt,imports:o.imports||bt,exports:o.exports||bt,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null};return null!=o.id&&(Wt[o.id]=o.type),a})}function Y(o,a){if(null==o)return Mn;const u={};for(const h in o)if(o.hasOwnProperty(h)){let f=o[h],m=f;Array.isArray(f)&&(m=f[1],f=f[0]),u[f]=h,a&&(a[f]=m)}return u}const ke=ut;function Je(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,onDestroy:o.type.prototype.ngOnDestroy||null}}function _t(o){return o[K]||null}function Yt(o,a){const u=o[te]||null;if(!u&&!0===a)throw new Error(`Type ${fe(o)} does not have '\u0275mod' property.`);return u}function Lr(o){return Array.isArray(o)&&"object"==typeof o[1]}function gr(o){return Array.isArray(o)&&!0===o[1]}function wd(o){return 0!=(8&o.flags)}function sc(o){return 2==(2&o.flags)}function So(o){return 1==(1&o.flags)}function Zr(o){return null!==o.template}function Cd(o){return 0!=(512&o[2])}function Kr(o,a){return o.hasOwnProperty(H)?o[H]:null}class Ra{constructor(a,u,h){this.previousValue=a,this.currentValue=u,this.firstChange=h}isFirstChange(){return this.firstChange}}function vl(){return yl}function yl(o){return o.type.prototype.ngOnChanges&&(o.setInput=dg),kf}function kf(){const o=Td(this),a=null==o?void 0:o.current;if(a){const u=o.previous;if(u===Mn)o.previous=a;else for(let h in a)u[h]=a[h];o.current=null,this.ngOnChanges(a)}}function dg(o,a,u,h){const f=Td(o)||function qs(o,a){return o[Zn]=a}(o,{previous:Mn,current:null}),m=f.current||(f.current={}),y=f.previous,C=this.declaredInputs[u],x=y[C];m[C]=new Ra(x&&x.currentValue,a,y===Mn),o[h]=a}vl.ngInherit=!0;const Zn="__ngSimpleChanges__";function Td(o){return o[Zn]||null}let cc;function ru(o){cc=o}function Nn(o){return!!o.listen}const bl={createRenderer:(o,a)=>function Ws(){return void 0!==cc?cc:"undefined"!=typeof document?document:void 0}()};function An(o){for(;Array.isArray(o);)o=o[0];return o}function na(o,a){return An(a[o])}function Fi(o,a){return An(a[o.index])}function ni(o,a){return o.data[a]}function Li(o,a){const u=a[o];return Lr(u)?u:u[0]}function Oa(o){return 4==(4&o[2])}function Ts(o){return 128==(128&o[2])}function Br(o,a){return null==a?null:o[a]}function Io(o){o[18]=0}function Ao(o,a){o[5]+=a;let u=o,h=o[3];for(;null!==h&&(1===a&&1===u[5]||-1===a&&0===u[5]);)h[5]+=a,u=h,h=h[3]}const St={lFrame:sa(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function au(){return St.bindingsEnabled}function Re(){return St.lFrame.lView}function en(){return St.lFrame.tView}function Sl(o){return St.lFrame.contextLView=o,o[8]}function Kn(){let o=ko();for(;null!==o&&64===o.type;)o=o.parent;return o}function ko(){return St.lFrame.currentTNode}function _r(o,a){const u=St.lFrame;u.currentTNode=o,u.isParent=a}function lu(){return St.lFrame.isParent}function cu(){St.lFrame.isParent=!1}function Tl(){return St.isInCheckNoChangesMode}function Pa(o){St.isInCheckNoChangesMode=o}function ms(){return St.lFrame.bindingIndex}function Is(){return St.lFrame.bindingIndex++}function Zs(o){const a=St.lFrame,u=a.bindingIndex;return a.bindingIndex=a.bindingIndex+o,u}function Al(o,a){const u=St.lFrame;u.bindingIndex=u.bindingRootIndex=o,ia(a)}function ia(o){St.lFrame.currentDirectiveIndex=o}function hc(o){const a=St.lFrame.currentDirectiveIndex;return-1===a?null:o[a]}function kl(){return St.lFrame.currentQueryIndex}function du(o){St.lFrame.currentQueryIndex=o}function hg(o){const a=o[1];return 2===a.type?a.declTNode:1===a.type?o[6]:null}function fc(o,a,u){if(u&Dt.SkipSelf){let f=a,m=o;for(;!(f=f.parent,null!==f||u&Dt.Host||(f=hg(m),null===f||(m=m[15],10&f.type))););if(null===f)return!1;a=f,o=m}const h=St.lFrame=hu();return h.currentTNode=a,h.lView=o,!0}function ra(o){const a=hu(),u=o[1];St.lFrame=a,a.currentTNode=u.firstChild,a.lView=o,a.tView=u,a.contextLView=o,a.bindingIndex=u.bindingStartIndex,a.inI18n=!1}function hu(){const o=St.lFrame,a=null===o?null:o.child;return null===a?sa(o):a}function sa(o){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=a),a}function Ld(){const o=St.lFrame;return St.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const Of=Ld;function Na(){const o=Ld();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function Bi(){return St.lFrame.selectedIndex}function Ks(o){St.lFrame.selectedIndex=o}function ii(){const o=St.lFrame;return ni(o.tView,o.selectedIndex)}function ly(){St.lFrame.currentNamespace="svg"}function cy(){!function uy(){St.lFrame.currentNamespace=null}()}function Rl(o,a){for(let u=a.directiveStart,h=a.directiveEnd;u<h;u++){const m=o.data[u].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:C,ngAfterViewInit:x,ngAfterViewChecked:T,ngOnDestroy:R}=m;y&&(o.contentHooks||(o.contentHooks=[])).push(-u,y),C&&((o.contentHooks||(o.contentHooks=[])).push(u,C),(o.contentCheckHooks||(o.contentCheckHooks=[])).push(u,C)),x&&(o.viewHooks||(o.viewHooks=[])).push(-u,x),T&&((o.viewHooks||(o.viewHooks=[])).push(u,T),(o.viewCheckHooks||(o.viewCheckHooks=[])).push(u,T)),null!=R&&(o.destroyHooks||(o.destroyHooks=[])).push(u,R)}}function Qs(o,a,u){Vi(o,a,3,u)}function Ol(o,a,u,h){(3&o[2])===u&&Vi(o,a,u,h)}function pc(o,a){let u=o[2];(3&u)===a&&(u&=2047,u+=1,o[2]=u)}function Vi(o,a,u,h){const m=null!=h?h:-1,y=a.length-1;let C=0;for(let x=void 0!==h?65535&o[18]:0;x<y;x++)if("number"==typeof a[x+1]){if(C=a[x],null!=h&&C>=h)break}else a[x]<0&&(o[18]+=65536),(C<m||-1==m)&&(Ff(o,u,a,x),o[18]=(4294901760&o[18])+x+2),x++}function Ff(o,a,u,h){const f=u[h]<0,m=u[h+1],C=o[f?-u[h]:u[h]];if(f){if(o[2]>>11<o[18]>>16&&(3&o[2])===a){o[2]+=2048;try{m.call(C)}finally{}}}else try{m.call(C)}finally{}}class Fa{constructor(a,u,h){this.factory=a,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=h}}function ri(o,a,u){const h=Nn(o);let f=0;for(;f<u.length;){const m=u[f];if("number"==typeof m){if(0!==m)break;f++;const y=u[f++],C=u[f++],x=u[f++];h?o.setAttribute(a,C,x,y):a.setAttributeNS(y,C,x)}else{const y=m,C=u[++f];Rs(y)?h&&o.setProperty(a,y,C):h?o.setAttribute(a,y,C):a.setAttribute(y,C),f++}}return f}function vr(o){return 3===o||4===o||6===o}function Rs(o){return 64===o.charCodeAt(0)}function si(o,a){if(null!==a&&0!==a.length)if(null===o||0===o.length)o=a.slice();else{let u=-1;for(let h=0;h<a.length;h++){const f=a[h];"number"==typeof f?u=f:0===u||fu(o,u,f,null,-1===u||2===u?a[++h]:null)}}return o}function fu(o,a,u,h,f){let m=0,y=o.length;if(-1===a)y=-1;else for(;m<o.length;){const C=o[m++];if("number"==typeof C){if(C===a){y=-1;break}if(C>a){y=m-1;break}}}for(;m<o.length;){const C=o[m];if("number"==typeof C)break;if(C===u){if(null===h)return void(null!==f&&(o[m+1]=f));if(h===o[m+1])return void(o[m+2]=f)}m++,null!==h&&m++,null!==f&&m++}-1!==y&&(o.splice(y,0,a),m=y+1),o.splice(m++,0,u),null!==h&&o.splice(m++,0,h),null!==f&&o.splice(m++,0,f)}function ct(o){return-1!==o}function Va(o){return 32767&o}function Ro(o,a){let u=function oi(o){return o>>16}(o),h=a;for(;u>0;)h=h[15],u--;return h}let aa=!0;function Pl(o){const a=aa;return aa=o,a}let jd=0;function Os(o,a){const u=rn(o,a);if(-1!==u)return u;const h=a[1];h.firstCreatePass&&(o.injectorIndex=a.length,Ps(h.data,o),Ps(a,null),Ps(h.blueprint,null));const f=at(o,a),m=o.injectorIndex;if(ct(f)){const y=Va(f),C=Ro(f,a),x=C[1].data;for(let T=0;T<8;T++)a[m+T]=C[y+T]|x[y+T]}return a[m+8]=f,m}function Ps(o,a){o.push(0,0,0,0,0,0,0,0,a)}function rn(o,a){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===a[o.injectorIndex+8]?-1:o.injectorIndex}function at(o,a){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let u=0,h=null,f=a;for(;null!==f;){const m=f[1],y=m.type;if(h=2===y?m.declTNode:1===y?f[6]:null,null===h)return-1;if(u++,f=f[15],-1!==h.injectorIndex)return h.injectorIndex|u<<16}return-1}function ar(o,a,u){!function Lf(o,a,u){let h;"string"==typeof u?h=u.charCodeAt(0)||0:u.hasOwnProperty(Ee)&&(h=u[Ee]),null==h&&(h=u[Ee]=jd++);const f=255&h;a.data[o+(f>>5)]|=1<<f}(o,a,u)}function Oo(o,a,u){if(u&Dt.Optional)return o;Oe(a,"NodeInjector")}function Et(o,a,u,h){if(u&Dt.Optional&&void 0===h&&(h=null),0==(u&(Dt.Self|Dt.Host))){const f=o[9],m=pn(void 0);try{return f?f.get(a,h,u&Dt.Optional):Ki(a,h,u&Dt.Optional)}finally{pn(m)}}return Oo(h,a,u)}function Ua(o,a,u,h=Dt.Default,f){if(null!==o){const m=function Gn(o){if("string"==typeof o)return o.charCodeAt(0)||0;const a=o.hasOwnProperty(Ee)?o[Ee]:void 0;return"number"==typeof a?a>=0?255&a:Nl:a}(u);if("function"==typeof m){if(!fc(a,o,h))return h&Dt.Host?Oo(f,u,h):Et(a,u,h,f);try{const y=m(h);if(null!=y||h&Dt.Optional)return y;Oe(u)}finally{Of()}}else if("number"==typeof m){let y=null,C=rn(o,a),x=-1,T=h&Dt.Host?a[16][6]:null;for((-1===C||h&Dt.SkipSelf)&&(x=-1===C?at(o,a):a[C+8],-1!==x&&yr(h,!1)?(y=a[1],C=Va(x),a=Ro(x,a)):C=-1);-1!==C;){const R=a[1];if(Wn(m,C,R.data)){const V=Xs(C,a,u,y,h,T);if(V!==Qr)return V}x=a[C+8],-1!==x&&yr(h,a[1].data[C+8]===T)&&Wn(m,C,a)?(y=R,C=Va(x),a=Ro(x,a)):C=-1}}}return Et(a,u,h,f)}const Qr={};function Nl(){return new ca(Kn(),Re())}function Xs(o,a,u,h,f,m){const y=a[1],C=y.data[o+8],R=Qn(C,y,u,null==h?sc(C)&&aa:h!=y&&0!=(3&C.type),f&Dt.Host&&m===C);return null!==R?Un(a,y,R,C):Qr}function Qn(o,a,u,h,f){const m=o.providerIndexes,y=a.data,C=1048575&m,x=o.directiveStart,R=m>>20,q=f?C+R:o.directiveEnd;for(let ne=h?C:C+R;ne<q;ne++){const Te=y[ne];if(ne<x&&u===Te||ne>=x&&Te.type===u)return ne}if(f){const ne=y[x];if(ne&&Zr(ne)&&ne.type===u)return x}return null}function Un(o,a,u,h){let f=o[u];const m=a.data;if(function Vd(o){return o instanceof Fa}(f)){const y=f;y.resolving&&function Ze(o,a){const u=a?`. Dependency path: ${a.join(" > ")} > ${o}`:"";throw new Ve(-200,`Circular dependency in DI detected for ${o}${u}`)}(Ae(m[u]));const C=Pl(y.canSeeViewProviders);y.resolving=!0;const x=y.injectImpl?pn(y.injectImpl):null;fc(o,h,Dt.Default);try{f=o[u]=y.factory(void 0,m,o,h),a.firstCreatePass&&u>=h.directiveStart&&function fg(o,a,u){const{ngOnChanges:h,ngOnInit:f,ngDoCheck:m}=a.type.prototype;if(h){const y=yl(a);(u.preOrderHooks||(u.preOrderHooks=[])).push(o,y),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(o,y)}f&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-o,f),m&&((u.preOrderHooks||(u.preOrderHooks=[])).push(o,m),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(o,m))}(u,m[u],a)}finally{null!==x&&pn(x),Pl(C),y.resolving=!1,Of()}}return f}function Wn(o,a,u){return!!(u[a+(o>>5)]&1<<o)}function yr(o,a){return!(o&Dt.Self||o&Dt.Host&&a)}class ca{constructor(a,u){this._tNode=a,this._lView=u}get(a,u,h){return Ua(this._tNode,this._lView,a,h,u)}}function ua(o){return pr(()=>{const a=o.prototype.constructor,u=a[H]||mu(a),h=Object.prototype;let f=Object.getPrototypeOf(o.prototype).constructor;for(;f&&f!==h;){const m=f[H]||mu(f);if(m&&m!==u)return m;f=Object.getPrototypeOf(f)}return m=>new m})}function mu(o){return Ke(o)?()=>{const a=mu(ae(o));return a&&a()}:Kr(o)}function Ha(o){return function gc(o,a){if("class"===a)return o.classes;if("style"===a)return o.styles;const u=o.attrs;if(u){const h=u.length;let f=0;for(;f<h;){const m=u[f];if(vr(m))break;if(0===m)f+=2;else if("number"==typeof m)for(f++;f<h&&"string"==typeof u[f];)f++;else{if(m===a)return u[f+1];f+=2}}}return null}(Kn(),o)}const No="__parameters__";function gs(o,a,u){return pr(()=>{const h=function Ci(o){return function(...u){if(o){const h=o(...u);for(const f in h)this[f]=h[f]}}}(a);function f(...m){if(this instanceof f)return h.apply(this,m),this;const y=new f(...m);return C.annotation=y,C;function C(x,T,R){const V=x.hasOwnProperty(No)?x[No]:Object.defineProperty(x,No,{value:[]})[No];for(;V.length<=R;)V.push(null);return(V[R]=V[R]||[]).push(y),x}}return u&&(f.prototype=Object.create(u.prototype)),f.prototype.ngMetadataName=o,f.annotationCls=f,f})}class ai{constructor(a,u){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=fn({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}toString(){return`InjectionToken ${this._desc}`}}const gg=new ai("AnalyzeForEntryComponents");function br(o,a){void 0===a&&(a=o);for(let u=0;u<o.length;u++){let h=o[u];Array.isArray(h)?(a===o&&(a=o.slice(0,u)),br(h,a)):a!==o&&a.push(h)}return a}function wr(o,a){o.forEach(u=>Array.isArray(u)?wr(u,a):a(u))}function _c(o,a,u){a>=o.length?o.push(u):o.splice(a,0,u)}function Hi(o,a){return a>=o.length-1?o.pop():o.splice(a,1)[0]}function Js(o,a){const u=[];for(let h=0;h<o;h++)u.push(a);return u}function lr(o,a,u){let h=Ul(o,a);return h>=0?o[1|h]=u:(h=~h,function Vl(o,a,u,h){let f=o.length;if(f==a)o.push(u,h);else if(1===f)o.push(h,o[0]),o[0]=u;else{for(f--,o.push(o[f-1],o[f]);f>a;)o[f]=o[f-2],f--;o[a]=u,o[a+1]=h}}(o,h,a,u)),h}function yu(o,a){const u=Ul(o,a);if(u>=0)return o[1|u]}function Ul(o,a){return function Hl(o,a,u){let h=0,f=o.length>>u;for(;f!==h;){const m=h+(f-h>>1),y=o[m<<u];if(a===y)return m<<u;y>a?f=m:h=m+1}return~(f<<u)}(o,a,1)}const ro={},jl="__NG_DI_FLAG__",fa="ngTempTokenPath",S=/\n/gm,O="__source",j=be({provide:String,useValue:be});let X;function pe(o){const a=X;return X=o,a}function Le(o,a=Dt.Default){if(void 0===X)throw new Ve(203,"");return null===X?Ki(o,void 0,a):X.get(o,a&Dt.Optional?null:void 0,a)}function je(o,a=Dt.Default){return(function Bn(){return fr}()||Le)(ae(o),a)}const Nt=je;function jt(o){const a=[];for(let u=0;u<o.length;u++){const h=ae(o[u]);if(Array.isArray(h)){if(0===h.length)throw new Ve(900,"");let f,m=Dt.Default;for(let y=0;y<h.length;y++){const C=h[y],x=ji(C);"number"==typeof x?-1===x?f=C.token:m|=x:f=C}a.push(je(f,m))}else a.push(je(h))}return a}function vt(o,a){return o[jl]=a,o.prototype[jl]=a,o}function ji(o){return o[jl]}const Ns=vt(gs("Inject",o=>({token:o})),-1),_s=vt(gs("Optional"),8),Lo=vt(gs("SkipSelf"),4);let wu;function wc(o){var a;return(null===(a=function Wd(){if(void 0===wu&&(wu=null,Jt.trustedTypes))try{wu=Jt.trustedTypes.createPolicy("angular",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch(o){}return wu}())||void 0===a?void 0:a.createHTML(o))||o}class zl{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Za extends zl{getTypeName(){return"HTML"}}class yy extends zl{getTypeName(){return"Style"}}class Cg extends zl{getTypeName(){return"Script"}}class Eg extends zl{getTypeName(){return"URL"}}class by extends zl{getTypeName(){return"ResourceURL"}}function es(o){return o instanceof zl?o.changingThisBreaksApplicationSecurity:o}function Bo(o,a){const u=Cu(o);if(null!=u&&u!==a){if("ResourceURL"===u&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===a}function Cu(o){return o instanceof zl&&o.getTypeName()||null}function Yd(o){return new Za(o)}function Dg(o){return new yy(o)}function jf(o){return new Cg(o)}function Dc(o){return new Eg(o)}function xg(o){return new by(o)}class Sg{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const u=(new window.DOMParser).parseFromString(wc(a),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(a):(u.removeChild(u.firstChild),u)}catch(u){return null}}}class wy{constructor(a){if(this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const u=this.inertDocument.createElement("html");this.inertDocument.appendChild(u);const h=this.inertDocument.createElement("body");u.appendChild(h)}}getInertBodyElement(a){const u=this.inertDocument.createElement("template");if("content"in u)return u.innerHTML=wc(a),u;const h=this.inertDocument.createElement("body");return h.innerHTML=wc(a),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(h),h}stripCustomNsAttrs(a){const u=a.attributes;for(let f=u.length-1;0<f;f--){const y=u.item(f).name;("xmlns:ns1"===y||0===y.indexOf("ns1:"))&&a.removeAttribute(y)}let h=a.firstChild;for(;h;)h.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(h),h=h.nextSibling}}const Kd=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,w=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function g(o){return(o=String(o)).match(Kd)||o.match(w)?o:"unsafe:"+o}function E(o){const a={};for(const u of o.split(","))a[u]=!0;return a}function k(...o){const a={};for(const u of o)for(const h in u)u.hasOwnProperty(h)&&(a[h]=!0);return a}const B=E("area,br,col,hr,img,wbr"),ie=E("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Ie=E("rp,rt"),zn=k(B,k(ie,E("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),k(Ie,E("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),k(Ie,ie)),cr=E("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),oo=E("srcset"),Eu=k(cr,oo,E("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),E("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Xd=E("script,style,template");class zf{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(a){let u=a.firstChild,h=!0;for(;u;)if(u.nodeType===Node.ELEMENT_NODE?h=this.startElement(u):u.nodeType===Node.TEXT_NODE?this.chars(u.nodeValue):this.sanitizedSomething=!0,h&&u.firstChild)u=u.firstChild;else for(;u;){u.nodeType===Node.ELEMENT_NODE&&this.endElement(u);let f=this.checkClobberedElement(u,u.nextSibling);if(f){u=f;break}u=this.checkClobberedElement(u,u.parentNode)}return this.buf.join("")}startElement(a){const u=a.nodeName.toLowerCase();if(!zn.hasOwnProperty(u))return this.sanitizedSomething=!0,!Xd.hasOwnProperty(u);this.buf.push("<"),this.buf.push(u);const h=a.attributes;for(let f=0;f<h.length;f++){const m=h.item(f),y=m.name,C=y.toLowerCase();if(!Eu.hasOwnProperty(C)){this.sanitizedSomething=!0;continue}let x=m.value;cr[C]&&(x=g(x)),oo[C]&&(o=x,x=(o=String(o)).split(",").map(a=>g(a.trim())).join(", ")),this.buf.push(" ",y,'="',$f(x),'"')}var o;return this.buf.push(">"),!0}endElement(a){const u=a.nodeName.toLowerCase();zn.hasOwnProperty(u)&&!B.hasOwnProperty(u)&&(this.buf.push("</"),this.buf.push(u),this.buf.push(">"))}chars(a){this.buf.push($f(a))}checkClobberedElement(a,u){if(u&&(a.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${a.outerHTML}`);return u}}const Du=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Jd=/([^\#-~ |!])/g;function $f(o){return o.replace(/&/g,"&amp;").replace(Du,function(a){return"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";"}).replace(Jd,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Vo;function qf(o,a){let u=null;try{Vo=Vo||function Zd(o){const a=new wy(o);return function Cy(){try{return!!(new window.DOMParser).parseFromString(wc(""),"text/html")}catch(o){return!1}}()?new Sg(a):a}(o);let h=a?String(a):"";u=Vo.getInertBodyElement(h);let f=5,m=h;do{if(0===f)throw new Error("Failed to sanitize html because the input is unstable");f--,h=m,m=u.innerHTML,u=Vo.getInertBodyElement(h)}while(h!==m);return wc((new zf).sanitizeChildren(Wf(u)||u))}finally{if(u){const h=Wf(u)||u;for(;h.firstChild;)h.removeChild(h.firstChild)}}}function Wf(o){return"content"in o&&function Yf(o){return o.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===o.nodeName}(o)?o.content:null}var Xn=(()=>((Xn=Xn||{})[Xn.NONE=0]="NONE",Xn[Xn.HTML=1]="HTML",Xn[Xn.STYLE=2]="STYLE",Xn[Xn.SCRIPT=3]="SCRIPT",Xn[Xn.URL=4]="URL",Xn[Xn.RESOURCE_URL=5]="RESOURCE_URL",Xn))();function Mg(o){const a=function Kf(){const o=Re();return o&&o[12]}();return a?a.sanitize(Xn.URL,o)||"":Bo(o,"URL")?es(o):g(ye(o))}const Iy="__ngContext__";function ts(o,a){o[Iy]=a}function Ay(o){const a=function Qf(o){return o[Iy]||null}(o);return a?Array.isArray(a)?a:a.lView:null}function ep(o){return o.ngOriginalError}function tE(o,...a){o.error(...a)}class tp{constructor(){this._console=console}handleError(a){const u=this._findOriginalError(a),h=function $T(o){return o&&o.ngErrorLogger||tE}(a);h(this._console,"ERROR",a),u&&h(this._console,"ORIGINAL ERROR",u)}_findOriginalError(a){let u=a&&ep(a);for(;u&&ep(u);)u=ep(u);return u||null}}const KT=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Jt))();function ao(o){return o instanceof Function?o():o}var Ka=(()=>((Ka=Ka||{})[Ka.Important=1]="Important",Ka[Ka.DashCase=2]="DashCase",Ka))();function Fy(o,a){return undefined(o,a)}function np(o){const a=o[3];return gr(a)?a[3]:a}function By(o){return rp(o[13])}function Vy(o){return rp(o[4])}function rp(o){for(;null!==o&&!gr(o);)o=o[4];return o}function Qa(o,a,u,h,f){if(null!=h){let m,y=!1;gr(h)?m=h:Lr(h)&&(y=!0,h=h[0]);const C=An(h);0===o&&null!==u?null==f?lI(a,u,C):Sc(a,u,C,f||null,!0):1===o&&null!==u?Sc(a,u,C,f||null,!0):2===o?function pE(o,a,u){const h=op(o,a);h&&function lE(o,a,u,h){Nn(o)?o.removeChild(a,u,h):a.removeChild(u)}(o,h,a,u)}(a,C,y):3===o&&a.destroyNode(C),null!=m&&function uI(o,a,u,h,f){const m=u[7];m!==An(u)&&Qa(a,o,h,m,f);for(let C=10;C<u.length;C++){const x=u[C];th(x[1],x,o,a,h,m)}}(a,o,m,u,f)}}function Hy(o,a,u){if(Nn(o))return o.createElement(a,u);{const h=null!==u?function lc(o){const a=o.toLowerCase();return"svg"===a?"http://www.w3.org/2000/svg":"math"===a?"http://www.w3.org/1998/MathML/":null}(u):null;return null===h?o.createElement(a):o.createElementNS(h,a)}}function sE(o,a){const u=o[9],h=u.indexOf(a),f=a[3];1024&a[2]&&(a[2]&=-1025,Ao(f,-1)),u.splice(h,1)}function jy(o,a){if(o.length<=10)return;const u=10+a,h=o[u];if(h){const f=h[17];null!==f&&f!==o&&sE(f,h),a>0&&(o[u-1][4]=h[4]);const m=Hi(o,10+a);!function eI(o,a){th(o,a,a[11],2,null,null),a[0]=null,a[6]=null}(h[1],h);const y=m[19];null!==y&&y.detachView(m[1]),h[3]=null,h[4]=null,h[2]&=-129}return h}function Gy(o,a){if(!(256&a[2])){const u=a[11];Nn(u)&&u.destroyNode&&th(o,a,u,3,null,null),function iI(o){let a=o[13];if(!a)return zy(o[1],o);for(;a;){let u=null;if(Lr(a))u=a[13];else{const h=a[10];h&&(u=h)}if(!u){for(;a&&!a[4]&&a!==o;)Lr(a)&&zy(a[1],a),a=a[3];null===a&&(a=o),Lr(a)&&zy(a[1],a),u=a&&a[4]}a=u}}(a)}}function zy(o,a){if(!(256&a[2])){a[2]&=-129,a[2]|=256,function aI(o,a){let u;if(null!=o&&null!=(u=o.destroyHooks))for(let h=0;h<u.length;h+=2){const f=a[u[h]];if(!(f instanceof Fa)){const m=u[h+1];if(Array.isArray(m))for(let y=0;y<m.length;y+=2){const C=f[m[y]],x=m[y+1];try{x.call(C)}finally{}}else try{m.call(f)}finally{}}}}(o,a),function oI(o,a){const u=o.cleanup,h=a[7];let f=-1;if(null!==u)for(let m=0;m<u.length-1;m+=2)if("string"==typeof u[m]){const y=u[m+1],C="function"==typeof y?y(a):An(a[y]),x=h[f=u[m+2]],T=u[m+3];"boolean"==typeof T?C.removeEventListener(u[m],x,T):T>=0?h[f=T]():h[f=-T].unsubscribe(),m+=2}else{const y=h[f=u[m+1]];u[m].call(y)}if(null!==h){for(let m=f+1;m<h.length;m++)h[m]();a[7]=null}}(o,a),1===a[1].type&&Nn(a[11])&&a[11].destroy();const u=a[17];if(null!==u&&gr(a[3])){u!==a[3]&&sE(u,a);const h=a[19];null!==h&&h.detachView(o)}}}function oE(o,a,u){return function aE(o,a,u){let h=a;for(;null!==h&&40&h.type;)h=(a=h).parent;if(null===h)return u[0];if(2&h.flags){const f=o.data[h.directiveStart].encapsulation;if(f===Xt.None||f===Xt.Emulated)return null}return Fi(h,u)}(o,a.parent,u)}function Sc(o,a,u,h,f){Nn(o)?o.insertBefore(a,u,h,f):a.insertBefore(u,h,f)}function lI(o,a,u){Nn(o)?o.appendChild(a,u):a.appendChild(u)}function $y(o,a,u,h,f){null!==h?Sc(o,a,u,h,f):lI(o,a,u)}function op(o,a){return Nn(o)?o.parentNode(a):a.parentNode}function uE(o,a,u){return hE(o,a,u)}let hE=function dE(o,a,u){return 40&o.type?Fi(o,u):null};function Og(o,a,u,h){const f=oE(o,h,a),m=a[11],C=uE(h.parent||a[6],h,a);if(null!=f)if(Array.isArray(u))for(let x=0;x<u.length;x++)$y(m,f,u[x],C,!1);else $y(m,f,u,C,!1)}function eh(o,a){if(null!==a){const u=a.type;if(3&u)return Fi(a,o);if(4&u)return Yy(-1,o[a.index]);if(8&u){const h=a.child;if(null!==h)return eh(o,h);{const f=o[a.index];return gr(f)?Yy(-1,f):An(f)}}if(32&u)return Fy(a,o)()||An(o[a.index]);{const h=fE(o,a);return null!==h?Array.isArray(h)?h[0]:eh(np(o[16]),h):eh(o,a.next)}}return null}function fE(o,a){return null!==a?o[16][6].projection[a.projection]:null}function Yy(o,a){const u=10+o+1;if(u<a.length){const h=a[u],f=h[1].firstChild;if(null!==f)return eh(h,f)}return a[7]}function ap(o,a,u,h,f,m,y){for(;null!=u;){const C=h[u.index],x=u.type;if(y&&0===a&&(C&&ts(An(C),h),u.flags|=4),64!=(64&u.flags))if(8&x)ap(o,a,u.child,h,f,m,!1),Qa(a,o,f,C,m);else if(32&x){const T=Fy(u,h);let R;for(;R=T();)Qa(a,o,f,R,m);Qa(a,o,f,C,m)}else 16&x?mE(o,a,h,u,f,m):Qa(a,o,f,C,m);u=y?u.projectionNext:u.next}}function th(o,a,u,h,f,m){ap(u,h,o.firstChild,a,f,m,!1)}function mE(o,a,u,h,f,m){const y=u[16],x=y[6].projection[h.projection];if(Array.isArray(x))for(let T=0;T<x.length;T++)Qa(a,o,f,x[T],m);else ap(o,a,x,y[3],f,m,!0)}function Zy(o,a,u){Nn(o)?o.setAttribute(a,"style",u):a.style.cssText=u}function Ky(o,a,u){Nn(o)?""===u?o.removeAttribute(a,"class"):o.setAttribute(a,"class",u):a.className=u}function gE(o,a,u){let h=o.length;for(;;){const f=o.indexOf(a,u);if(-1===f)return f;if(0===f||o.charCodeAt(f-1)<=32){const m=a.length;if(f+m===h||o.charCodeAt(f+m)<=32)return f}u=f+1}}const _E="ng-template";function vE(o,a,u){let h=0;for(;h<o.length;){let f=o[h++];if(u&&"class"===f){if(f=o[h],-1!==gE(f.toLowerCase(),a,0))return!0}else if(1===f){for(;h<o.length&&"string"==typeof(f=o[h++]);)if(f.toLowerCase()===a)return!0;return!1}}return!1}function Pg(o){return 4===o.type&&o.value!==_E}function Qy(o,a,u){return a===(4!==o.type||u?o.value:_E)}function nh(o,a,u){let h=4;const f=o.attrs||[],m=function yE(o){for(let a=0;a<o.length;a++)if(vr(o[a]))return a;return o.length}(f);let y=!1;for(let C=0;C<a.length;C++){const x=a[C];if("number"!=typeof x){if(!y)if(4&h){if(h=2|1&h,""!==x&&!Qy(o,x,u)||""===x&&1===a.length){if(pa(h))return!1;y=!0}}else{const T=8&h?x:a[++C];if(8&h&&null!==o.attrs){if(!vE(o.attrs,T,u)){if(pa(h))return!1;y=!0}continue}const V=hI(8&h?"class":x,f,Pg(o),u);if(-1===V){if(pa(h))return!1;y=!0;continue}if(""!==T){let q;q=V>m?"":f[V+1].toLowerCase();const ne=8&h?q:null;if(ne&&-1!==gE(ne,T,0)||2&h&&T!==q){if(pa(h))return!1;y=!0}}}}else{if(!y&&!pa(h)&&!pa(x))return!1;if(y&&pa(x))continue;y=!1,h=x|1&h}}return pa(h)||y}function pa(o){return 0==(1&o)}function hI(o,a,u,h){if(null===a)return-1;let f=0;if(h||!u){let m=!1;for(;f<a.length;){const y=a[f];if(y===o)return f;if(3===y||6===y)m=!0;else{if(1===y||2===y){let C=a[++f];for(;"string"==typeof C;)C=a[++f];continue}if(4===y)break;if(0===y){f+=4;continue}}f+=m?1:2}return-1}return function bE(o,a){let u=o.indexOf(4);if(u>-1)for(u++;u<o.length;){const h=o[u];if("number"==typeof h)return-1;if(h===a)return u;u++}return-1}(a,o)}function Xy(o,a,u=!1){for(let h=0;h<a.length;h++)if(nh(o,a[h],u))return!0;return!1}function Jy(o,a){e:for(let u=0;u<a.length;u++){const h=a[u];if(o.length===h.length){for(let f=0;f<o.length;f++)if(o[f]!==h[f])continue e;return!0}}return!1}function pI(o,a){return o?":not("+a.trim()+")":a}function Tu(o){let a=o[0],u=1,h=2,f="",m=!1;for(;u<o.length;){let y=o[u];if("string"==typeof y)if(2&h){const C=o[++u];f+="["+y+(C.length>0?'="'+C+'"':"")+"]"}else 8&h?f+="."+y:4&h&&(f+=" "+y);else""!==f&&!pa(y)&&(a+=pI(m,f),f=""),h=y,m=m||!pa(h);u++}return""!==f&&(a+=pI(m,f)),a}const Gt={};function eb(o){CE(en(),Re(),Bi()+o,Tl())}function CE(o,a,u,h){if(!h)if(3==(3&a[2])){const m=o.preOrderCheckHooks;null!==m&&Qs(a,m,u)}else{const m=o.preOrderHooks;null!==m&&Ol(a,m,0,u)}Ks(u)}function Ng(o,a){return o<<17|a<<2}function Ho(o){return o>>17&32767}function tb(o){return 2|o}function ma(o){return(131068&o)>>2}function nb(o,a){return-131069&o|a<<2}function Fg(o){return 1|o}function IE(o,a){const u=o.contentQueries;if(null!==u)for(let h=0;h<u.length;h+=2){const f=u[h],m=u[h+1];if(-1!==m){const y=o.data[m];du(f),y.contentQueries(2,a[m],m)}}}function dp(o,a,u,h,f,m,y,C,x,T){const R=a.blueprint.slice();return R[0]=f,R[2]=140|h,Io(R),R[3]=R[15]=o,R[8]=u,R[10]=y||o&&o[10],R[11]=C||o&&o[11],R[12]=x||o&&o[12]||null,R[9]=T||o&&o[9]||null,R[6]=m,R[16]=2==a.type?o[16]:R,R}function ih(o,a,u,h,f){let m=o.data[a];if(null===m)m=function ub(o,a,u,h,f){const m=ko(),y=lu(),x=o.data[a]=function OE(o,a,u,h,f,m){return{type:u,index:h,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?m:m&&m.parent,u,a,h,f);return null===o.firstChild&&(o.firstChild=x),null!==m&&(y?null==m.child&&null!==x.parent&&(m.child=x):null===m.next&&(m.next=x)),x}(o,a,u,h,f),function Il(){return St.lFrame.inI18n}()&&(m.flags|=64);else if(64&m.type){m.type=u,m.value=h,m.attrs=f;const y=function Ml(){const o=St.lFrame,a=o.currentTNode;return o.isParent?a:a.parent}();m.injectorIndex=null===y?-1:y.injectorIndex}return _r(m,!0),m}function Xi(o,a,u,h){if(0===u)return-1;const f=a.length;for(let m=0;m<u;m++)a.push(h),o.blueprint.push(h),o.data.push(null);return f}function Mc(o,a,u){ra(a);try{const h=o.viewQuery;null!==h&&Sb(1,h,u);const f=o.template;null!==f&&hp(o,a,f,1,u),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&IE(o,a),o.staticViewQueries&&Sb(2,o.viewQuery,u);const m=o.components;null!==m&&function wI(o,a){for(let u=0;u<a.length;u++)PI(o,a[u])}(a,m)}catch(h){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),h}finally{a[2]&=-5,Na()}}function Au(o,a,u,h){const f=a[2];if(256==(256&f))return;ra(a);const m=Tl();try{Io(a),function uu(o){return St.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==u&&hp(o,a,u,2,h);const y=3==(3&f);if(!m)if(y){const T=o.preOrderCheckHooks;null!==T&&Qs(a,T,null)}else{const T=o.preOrderHooks;null!==T&&Ol(a,T,0,null),pc(a,0)}if(function RI(o){for(let a=By(o);null!==a;a=Vy(a)){if(!a[2])continue;const u=a[9];for(let h=0;h<u.length;h++){const f=u[h],m=f[3];0==(1024&f[2])&&Ao(m,1),f[2]|=1024}}}(a),function kI(o){for(let a=By(o);null!==a;a=Vy(a))for(let u=10;u<a.length;u++){const h=a[u],f=h[1];Ts(h)&&Au(f,h,f.template,h[8])}}(a),null!==o.contentQueries&&IE(o,a),!m)if(y){const T=o.contentCheckHooks;null!==T&&Qs(a,T)}else{const T=o.contentHooks;null!==T&&Ol(a,T,1),pc(a,1)}!function bI(o,a){const u=o.hostBindingOpCodes;if(null!==u)try{for(let h=0;h<u.length;h++){const f=u[h];if(f<0)Ks(~f);else{const m=f,y=u[++h],C=u[++h];Al(y,m),C(2,a[m])}}}finally{Ks(-1)}}(o,a);const C=o.components;null!==C&&function AE(o,a){for(let u=0;u<a.length;u++)OI(o,a[u])}(a,C);const x=o.viewQuery;if(null!==x&&Sb(2,x,h),!m)if(y){const T=o.viewCheckHooks;null!==T&&Qs(a,T)}else{const T=o.viewHooks;null!==T&&Ol(a,T,2),pc(a,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),m||(a[2]&=-73),1024&a[2]&&(a[2]&=-1025,Ao(a[3],-1))}finally{Na()}}function db(o,a,u,h){const f=a[10],m=!Tl(),y=Oa(a);try{m&&!y&&f.begin&&f.begin(),y&&Mc(o,a,h),Au(o,a,u,h)}finally{m&&!y&&f.end&&f.end()}}function hp(o,a,u,h,f){const m=Bi(),y=2&h;try{Ks(-1),y&&a.length>20&&CE(o,a,20,Tl()),u(h,f)}finally{Ks(m)}}function Vg(o,a,u){if(wd(a)){const f=a.directiveEnd;for(let m=a.directiveStart;m<f;m++){const y=o.data[m];y.contentQueries&&y.contentQueries(1,u[m],m)}}}function fp(o,a,u){!au()||(function _b(o,a,u,h){const f=u.directiveStart,m=u.directiveEnd;o.firstCreatePass||Os(u,a),ts(h,a);const y=u.initialInputs;for(let C=f;C<m;C++){const x=o.data[C],T=Zr(x);T&&bb(a,u,x);const R=Un(a,o,C,u);ts(R,a),null!==y&&AI(0,C-f,R,x,0,y),T&&(Li(u.index,a)[8]=R)}}(o,a,u,Fi(u,a)),128==(128&u.flags)&&function LE(o,a,u){const h=u.directiveStart,f=u.directiveEnd,y=u.index,C=function Fd(){return St.lFrame.currentDirectiveIndex}();try{Ks(y);for(let x=h;x<f;x++){const T=o.data[x],R=a[x];ia(x),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&vb(T,R)}}finally{Ks(-1),ia(C)}}(o,a,u))}function hb(o,a,u=Fi){const h=a.localNames;if(null!==h){let f=a.index+1;for(let m=0;m<h.length;m+=2){const y=h[m+1],C=-1===y?u(a,o):o[y];o[f++]=C}}}function kE(o){const a=o.tView;return null===a||a.incompleteFirstPass?o.tView=Ug(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts):a}function Ug(o,a,u,h,f,m,y,C,x,T){const R=20+h,V=R+f,q=function CI(o,a){const u=[];for(let h=0;h<a;h++)u.push(h<o?null:Gt);return u}(R,V),ne="function"==typeof T?T():T;return q[1]={type:o,blueprint:q,template:u,queries:null,viewQuery:C,declTNode:a,data:q.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:V,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:x,consts:ne,incompleteFirstPass:!1}}function pp(o,a,u,h){const f=Mb(a);null===u?f.push(h):(f.push(u),o.firstCreatePass&&Tb(o).push(h,f.length-1))}function PE(o,a,u){for(let h in o)if(o.hasOwnProperty(h)){const f=o[h];(u=null===u?{}:u).hasOwnProperty(h)?u[h].push(a,f):u[h]=[a,f]}return u}function uo(o,a,u,h,f,m,y,C){const x=Fi(a,u);let R,T=a.inputs;!C&&null!=T&&(R=T[h])?(BI(o,u,R,h,f),sc(a)&&function NE(o,a){const u=Li(a,o);16&u[2]||(u[2]|=64)}(u,a.index)):3&a.type&&(h=function DI(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(h),f=null!=y?y(f,a.value||"",h):f,Nn(m)?m.setProperty(x,h,f):Rs(h)||(x.setProperty?x.setProperty(h,f):x[h]=f))}function mp(o,a,u,h){let f=!1;if(au()){const m=function yb(o,a,u){const h=o.directiveRegistry;let f=null;if(h)for(let m=0;m<h.length;m++){const y=h[m];Xy(u,y.selectors,!1)&&(f||(f=[]),ar(Os(u,a),o,y.type),Zr(y)?(BE(o,u),f.unshift(y)):f.push(y))}return f}(o,a,u),y=null===h?null:{"":-1};if(null!==m){f=!0,gp(u,o.data.length,m.length);for(let R=0;R<m.length;R++){const V=m[R];V.providersResolver&&V.providersResolver(V)}let C=!1,x=!1,T=Xi(o,a,m.length,null);for(let R=0;R<m.length;R++){const V=m[R];u.mergedAttrs=si(u.mergedAttrs,V.hostAttrs),Gg(o,u,a,T,V),II(T,V,y),null!==V.contentQueries&&(u.flags|=8),(null!==V.hostBindings||null!==V.hostAttrs||0!==V.hostVars)&&(u.flags|=128);const q=V.type.prototype;!C&&(q.ngOnChanges||q.ngOnInit||q.ngDoCheck)&&((o.preOrderHooks||(o.preOrderHooks=[])).push(u.index),C=!0),!x&&(q.ngOnChanges||q.ngDoCheck)&&((o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(u.index),x=!0),T++}!function EI(o,a){const h=a.directiveEnd,f=o.data,m=a.attrs,y=[];let C=null,x=null;for(let T=a.directiveStart;T<h;T++){const R=f[T],V=R.inputs,q=null===m||Pg(a)?null:VE(V,m);y.push(q),C=PE(V,T,C),x=PE(R.outputs,T,x)}null!==C&&(C.hasOwnProperty("class")&&(a.flags|=16),C.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=y,a.inputs=C,a.outputs=x}(o,u)}y&&function TI(o,a,u){if(a){const h=o.localNames=[];for(let f=0;f<a.length;f+=2){const m=u[a[f+1]];if(null==m)throw new Ve(-301,!1);h.push(a[f],m)}}}(u,h,y)}return u.mergedAttrs=si(u.mergedAttrs,u.attrs),f}function gb(o,a,u,h,f,m){const y=m.hostBindings;if(y){let C=o.hostBindingOpCodes;null===C&&(C=o.hostBindingOpCodes=[]);const x=~a.index;(function MI(o){let a=o.length;for(;a>0;){const u=o[--a];if("number"==typeof u&&u<0)return u}return 0})(C)!=x&&C.push(x),C.push(h,f,y)}}function vb(o,a){null!==o.hostBindings&&o.hostBindings(1,a)}function BE(o,a){a.flags|=2,(o.components||(o.components=[])).push(a.index)}function II(o,a,u){if(u){if(a.exportAs)for(let h=0;h<a.exportAs.length;h++)u[a.exportAs[h]]=o;Zr(a)&&(u[""]=o)}}function gp(o,a,u){o.flags|=1,o.directiveStart=a,o.directiveEnd=a+u,o.providerIndexes=a}function Gg(o,a,u,h,f){o.data[h]=f;const m=f.factory||(f.factory=Kr(f.type)),y=new Fa(m,Zr(f),null);o.blueprint[h]=y,u[h]=y,gb(o,a,0,h,Xi(o,u,f.hostVars,Gt),f)}function bb(o,a,u){const h=Fi(a,o),f=kE(u),m=o[10],y=$g(o,dp(o,f,null,u.onPush?64:16,h,a,m,m.createRenderer(h,u),null,null));o[a.index]=y}function Go(o,a,u,h,f,m){const y=Fi(o,a);!function zg(o,a,u,h,f,m,y){if(null==m)Nn(o)?o.removeAttribute(a,f,u):a.removeAttribute(f);else{const C=null==y?ye(m):y(m,h||"",f);Nn(o)?o.setAttribute(a,f,C,u):u?a.setAttributeNS(u,f,C):a.setAttribute(f,C)}}(a[11],y,m,o.value,u,h,f)}function AI(o,a,u,h,f,m){const y=m[a];if(null!==y){const C=h.setInput;for(let x=0;x<y.length;){const T=y[x++],R=y[x++],V=y[x++];null!==C?h.setInput(u,V,T,R):u[R]=V}}}function VE(o,a){let u=null,h=0;for(;h<a.length;){const f=a[h];if(0!==f)if(5!==f){if("number"==typeof f)break;o.hasOwnProperty(f)&&(null===u&&(u=[]),u.push(f,o[f],a[h+1])),h+=2}else h+=2;else h+=4}return u}function UE(o,a,u,h){return new Array(o,!0,!1,a,null,0,h,u,null,null)}function OI(o,a){const u=Li(a,o);if(Ts(u)){const h=u[1];80&u[2]?Au(h,u,h.template,u[8]):u[5]>0&&Cb(u)}}function Cb(o){for(let h=By(o);null!==h;h=Vy(h))for(let f=10;f<h.length;f++){const m=h[f];if(1024&m[2]){const y=m[1];Au(y,m,y.template,m[8])}else m[5]>0&&Cb(m)}const u=o[1].components;if(null!==u)for(let h=0;h<u.length;h++){const f=Li(u[h],o);Ts(f)&&f[5]>0&&Cb(f)}}function PI(o,a){const u=Li(a,o),h=u[1];(function NI(o,a){for(let u=a.length;u<o.blueprint.length;u++)a.push(o.blueprint[u])})(h,u),Mc(h,u,u[8])}function $g(o,a){return o[13]?o[14][4]=a:o[13]=a,o[14]=a,a}function Eb(o){for(;o;){o[2]|=64;const a=np(o);if(Cd(o)&&!a)return o;o=a}return null}function qg(o,a,u){const h=a[10];h.begin&&h.begin();try{Au(o,a,o.template,u)}catch(f){throw Ab(a,f),f}finally{h.end&&h.end()}}function Db(o){!function rh(o){for(let a=0;a<o.components.length;a++){const u=o.components[a],h=Ay(u),f=h[1];db(f,h,f.template,u)}}(o[8])}function Sb(o,a,u){du(0),a(o,u)}const HE=(()=>Promise.resolve(null))();function Mb(o){return o[7]||(o[7]=[])}function Tb(o){return o.cleanup||(o.cleanup=[])}function Ib(o,a,u){return(null===o||Zr(o))&&(u=function uc(o){for(;Array.isArray(o);){if("object"==typeof o[1])return o;o=o[0]}return null}(u[a.index])),u[11]}function Ab(o,a){const u=o[9],h=u?u.get(tp,null):null;h&&h.handleError(a)}function BI(o,a,u,h,f){for(let m=0;m<u.length;){const y=u[m++],C=u[m++],x=a[y],T=o.data[y];null!==T.setInput?T.setInput(x,f,h,C):x[C]=f}}function $l(o,a,u){const h=na(a,o);!function rE(o,a,u){Nn(o)?o.setValue(a,u):a.textContent=u}(o[11],h,u)}function kb(o,a,u){let h=u?o.styles:null,f=u?o.classes:null,m=0;if(null!==a)for(let y=0;y<a.length;y++){const C=a[y];"number"==typeof C?m=C:1==m?f=we(f,C):2==m&&(h=we(h,C+": "+a[++y]+";"))}u?o.styles=h:o.stylesWithoutHost=h,u?o.classes=f:o.classesWithoutHost=f}const Ob=new ai("INJECTOR",-1);class Pb{get(a,u=ro){if(u===ro){const h=new Error(`NullInjectorError: No provider for ${fe(a)}!`);throw h.name="NullInjectorError",h}return u}}const Nb=new ai("Set Injector scope."),sh={},Fb={};let ku;function VI(){return void 0===ku&&(ku=new Pb),ku}function Wg(o,a=null,u=null,h){const f=UI(o,a,u,h);return f._resolveInjectorDefTypes(),f}function UI(o,a=null,u=null,h){return new HI(o,u,a||VI(),h)}class HI{constructor(a,u,h,f=null){this.parent=h,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const m=[];u&&wr(u,C=>this.processProvider(C,a,u)),wr([a],C=>this.processInjectorType(C,[],m)),this.records.set(Ob,_p(void 0,this));const y=this.records.get(Nb);this.scope=null!=y?y.value:null,this.source=f||("object"==typeof a?null:fe(a))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(a=>a.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(a,u=ro,h=Dt.Default){this.assertNotDestroyed();const f=pe(this),m=pn(void 0);try{if(!(h&Dt.SkipSelf)){let C=this.records.get(a);if(void 0===C){const x=function $I(o){return"function"==typeof o||"object"==typeof o&&o instanceof ai}(a)&&jn(a);C=x&&this.injectableDefInScope(x)?_p(jE(a),sh):null,this.records.set(a,C)}if(null!=C)return this.hydrate(a,C)}return(h&Dt.Self?VI():this.parent).get(a,u=h&Dt.Optional&&u===ro?null:u)}catch(y){if("NullInjectorError"===y.name){if((y[fa]=y[fa]||[]).unshift(fe(a)),f)throw y;return function Qi(o,a,u,h){const f=o[fa];throw a[O]&&f.unshift(a[O]),o.message=function qa(o,a,u,h=null){o=o&&"\n"===o.charAt(0)&&"\u0275"==o.charAt(1)?o.substr(2):o;let f=fe(a);if(Array.isArray(a))f=a.map(fe).join(" -> ");else if("object"==typeof a){let m=[];for(let y in a)if(a.hasOwnProperty(y)){let C=a[y];m.push(y+":"+("string"==typeof C?JSON.stringify(C):fe(C)))}f=`{${m.join(", ")}}`}return`${u}${h?"("+h+")":""}[${f}]: ${o.replace(S,"\n  ")}`}("\n"+o.message,f,u,h),o.ngTokenPath=f,o[fa]=null,o}(y,a,"R3InjectorError",this.source)}throw y}finally{pn(m),pe(f)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(a=>this.get(a))}toString(){const a=[];return this.records.forEach((h,f)=>a.push(fe(f))),`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ve(205,!1)}processInjectorType(a,u,h){if(!(a=ae(a)))return!1;let f=xs(a);const m=null==f&&a.ngModule||void 0,y=void 0===m?a:m,C=-1!==h.indexOf(y);if(void 0!==m&&(f=xs(m)),null==f)return!1;if(null!=f.imports&&!C){let R;h.push(y);try{wr(f.imports,V=>{this.processInjectorType(V,u,h)&&(void 0===R&&(R=[]),R.push(V))})}finally{}if(void 0!==R)for(let V=0;V<R.length;V++){const{ngModule:q,providers:ne}=R[V];wr(ne,Te=>this.processProvider(Te,q,ne||bt))}}this.injectorDefTypes.add(y);const x=Kr(y)||(()=>new y);this.records.set(y,_p(x,sh));const T=f.providers;if(null!=T&&!C){const R=a;wr(T,V=>this.processProvider(V,R,T))}return void 0!==m&&void 0!==a.providers}processProvider(a,u,h){let f=vp(a=ae(a))?a:ae(a&&a.provide);const m=function GI(o,a,u){return GE(o)?_p(void 0,o.useValue):_p(zI(o),sh)}(a);if(vp(a)||!0!==a.multi)this.records.get(f);else{let y=this.records.get(f);y||(y=_p(void 0,sh,!0),y.factory=()=>jt(y.multi),this.records.set(f,y)),f=a,y.multi.push(a)}this.records.set(f,m)}hydrate(a,u){return u.value===sh&&(u.value=Fb,u.value=u.factory()),"object"==typeof u.value&&u.value&&function Yg(o){return null!==o&&"object"==typeof o&&"function"==typeof o.ngOnDestroy}(u.value)&&this.onDestroy.add(u.value),u.value}injectableDefInScope(a){if(!a.providedIn)return!1;const u=ae(a.providedIn);return"string"==typeof u?"any"===u||u===this.scope:this.injectorDefTypes.has(u)}}function jE(o){const a=jn(o),u=null!==a?a.factory:Kr(o);if(null!==u)return u;if(o instanceof ai)throw new Ve(204,!1);if(o instanceof Function)return function jI(o){const a=o.length;if(a>0)throw Js(a,"?"),new Ve(204,!1);const u=function rr(o){const a=o&&(o[qr]||o[ei]);if(a){const u=function qn(o){if(o.hasOwnProperty("name"))return o.name;const a=(""+o).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(o);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),a}return null}(o);return null!==u?()=>u.factory(o):()=>new o}(o);throw new Ve(204,!1)}function zI(o,a,u){let h;if(vp(o)){const f=ae(o);return Kr(f)||jE(f)}if(GE(o))h=()=>ae(o.useValue);else if(function SN(o){return!(!o||!o.useFactory)}(o))h=()=>o.useFactory(...jt(o.deps||[]));else if(function xN(o){return!(!o||!o.useExisting)}(o))h=()=>je(ae(o.useExisting));else{const f=ae(o&&(o.useClass||o.provide));if(!function TN(o){return!!o.deps}(o))return Kr(f)||jE(f);h=()=>new f(...jt(o.deps))}return h}function _p(o,a,u=!1){return{factory:o,value:a,multi:u?[]:void 0}}function GE(o){return null!==o&&"object"==typeof o&&j in o}function vp(o){return"function"==typeof o}let ho=(()=>{class o{static create(u,h){var f;if(Array.isArray(u))return Wg({name:""},h,u,"");{const m=null!==(f=u.name)&&void 0!==f?f:"";return Wg({name:m},u.parent,u.providers,m)}}}return o.THROW_IF_NOT_FOUND=ro,o.NULL=new Pb,o.\u0275prov=fn({token:o,providedIn:"any",factory:()=>je(Ob)}),o.__NG_ELEMENT_ID__=-1,o})();function KE(o,a){Rl(Ay(o)[1],Kn())}function Tc(o){let a=function QE(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),u=!0;const h=[o];for(;a;){let f;if(Zr(o))f=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new Ve(903,"");f=a.\u0275dir}if(f){if(u){h.push(f);const y=o;y.inputs=e_(o.inputs),y.declaredInputs=e_(o.declaredInputs),y.outputs=e_(o.outputs);const C=f.hostBindings;C&&ns(o,C);const x=f.viewQuery,T=f.contentQueries;if(x&&Cp(o,x),T&&Ep(o,T),oe(o.inputs,f.inputs),oe(o.declaredInputs,f.declaredInputs),oe(o.outputs,f.outputs),Zr(f)&&f.data.animation){const R=o.data;R.animation=(R.animation||[]).concat(f.data.animation)}}const m=f.features;if(m)for(let y=0;y<m.length;y++){const C=m[y];C&&C.ngInherit&&C(o),C===Tc&&(u=!1)}}a=Object.getPrototypeOf(a)}!function XE(o){let a=0,u=null;for(let h=o.length-1;h>=0;h--){const f=o[h];f.hostVars=a+=f.hostVars,f.hostAttrs=si(f.hostAttrs,u=si(u,f.hostAttrs))}}(h)}function e_(o){return o===Mn?{}:o===bt?[]:o}function Cp(o,a){const u=o.viewQuery;o.viewQuery=u?(h,f)=>{a(h,f),u(h,f)}:a}function Ep(o,a){const u=o.contentQueries;o.contentQueries=u?(h,f,m)=>{a(h,f,m),u(h,f,m)}:a}function ns(o,a){const u=o.hostBindings;o.hostBindings=u?(h,f)=>{a(h,f),u(h,f)}:a}let t_=null;function oh(){if(!t_){const o=Jt.Symbol;if(o&&o.iterator)t_=o.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<a.length;++u){const h=a[u];"entries"!==h&&"size"!==h&&Map.prototype[h]===Map.prototype.entries&&(t_=h)}}}return t_}function Ic(o){return!!Dp(o)&&(Array.isArray(o)||!(o instanceof Map)&&oh()in o)}function Dp(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function Ei(o,a,u){return!Object.is(o[a],u)&&(o[a]=u,!0)}function Ru(o,a,u,h){const f=Ei(o,a,u);return Ei(o,a+1,h)||f}function Hb(o,a,u,h){const f=Re();return Ei(f,Is(),a)&&(en(),Go(ii(),f,o,a,u,h)),Hb}function hh(o,a,u,h,f,m,y,C,x,T){const V=function zo(o,a,u,h,f,m){const y=Ru(o,a,u,h);return Ru(o,a+2,f,m)||y}(o,ms(),u,f,y,x);return Zs(4),V?a+ye(u)+h+ye(f)+m+ye(y)+C+ye(x)+T:Gt}function rD(o,a,u,h,f,m,y,C){const x=Re(),T=en(),R=o+20,V=T.firstCreatePass?function $b(o,a,u,h,f,m,y,C,x){const T=a.consts,R=ih(a,o,4,y||null,Br(T,C));mp(a,u,R,Br(T,x)),Rl(a,R);const V=R.tViews=Ug(2,R,h,f,m,a.directiveRegistry,a.pipeRegistry,null,a.schemas,T);return null!==a.queries&&(a.queries.template(a,R),V.queries=a.queries.embeddedTView(R)),R}(R,T,x,a,u,h,f,m,y):T.data[R];_r(V,!1);const q=x[11].createComment("");Og(T,x,q,V),ts(q,x),$g(x,x[R]=UE(q,x,q,V)),So(V)&&fp(T,x,V),null!=y&&hb(x,V,C)}function qb(o){return function Ys(o,a){return o[a]}(function Pd(){return St.lFrame.contextLView}(),20+o)}function Sp(o,a=Dt.Default){const u=Re();return null===u?je(o,a):Ua(Kn(),u,ae(o),a)}function CD(){throw new Error("invalid")}function fo(o,a,u){const h=Re();return Ei(h,Is(),a)&&uo(en(),ii(),h,o,a,h[11],u,!1),fo}function Kb(o,a,u,h,f){const y=f?"class":"style";BI(o,u,a.inputs[y],y,h)}function c_(o,a,u,h){const f=Re(),m=en(),y=20+o,C=f[11],x=f[y]=Hy(C,a,function Bd(){return St.lFrame.currentNamespace}()),T=m.firstCreatePass?function lA(o,a,u,h,f,m,y){const C=a.consts,T=ih(a,o,2,f,Br(C,m));return mp(a,u,T,Br(C,y)),null!==T.attrs&&kb(T,T.attrs,!1),null!==T.mergedAttrs&&kb(T,T.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,T),T}(y,m,f,0,a,u,h):m.data[y];_r(T,!0);const R=T.mergedAttrs;null!==R&&ri(C,x,R);const V=T.classes;null!==V&&Ky(C,x,V);const q=T.styles;return null!==q&&Zy(C,x,q),64!=(64&T.flags)&&Og(m,f,x,T),0===function El(){return St.lFrame.elementDepthCount}()&&ts(x,f),function Rd(){St.lFrame.elementDepthCount++}(),So(T)&&(fp(m,f,T),Vg(m,T,f)),null!==h&&hb(f,T),c_}function u_(){let o=Kn();lu()?cu():(o=o.parent,_r(o,!1));const a=o;!function Dl(){St.lFrame.elementDepthCount--}();const u=en();return u.firstCreatePass&&(Rl(u,o),wd(o)&&u.queries.elementEnd(o)),null!=a.classesWithoutHost&&function Hd(o){return 0!=(16&o.flags)}(a)&&Kb(u,a,Re(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function pg(o){return 0!=(32&o.flags)}(a)&&Kb(u,a,Re(),a.stylesWithoutHost,!1),u_}function d_(o,a,u,h){return c_(o,a,u,h),u_(),d_}function h_(o,a,u){const h=Re(),f=en(),m=o+20,y=f.firstCreatePass?function cA(o,a,u,h,f){const m=a.consts,y=Br(m,h),C=ih(a,o,8,"ng-container",y);return null!==y&&kb(C,y,!0),mp(a,u,C,Br(m,f)),null!==a.queries&&a.queries.elementStart(a,C),C}(m,f,h,a,u):f.data[m];_r(y,!0);const C=h[m]=h[11].createComment("");return Og(f,h,C,y),ts(C,h),So(y)&&(fp(f,h,y),Vg(f,y,h)),null!=u&&hb(h,y),h_}function Mp(){let o=Kn();const a=en();return lu()?cu():(o=o.parent,_r(o,!1)),a.firstCreatePass&&(Rl(a,o),wd(o)&&a.queries.elementEnd(o)),Mp}function Qb(o,a,u){return h_(o,a,u),Mp(),Qb}function ED(){return Re()}function Xb(o){return!!o&&"function"==typeof o.then}function Jb(o){return!!o&&"function"==typeof o.subscribe}const f_=Jb;function p_(o,a,u,h){const f=Re(),m=en(),y=Kn();return DD(m,f,f[11],y,o,a,!!u,h),p_}function e0(o,a){const u=Kn(),h=Re(),f=en();return DD(f,h,Ib(hc(f.data),u,h),u,o,a,!1),e0}function DD(o,a,u,h,f,m,y,C){const x=So(h),R=o.firstCreatePass&&Tb(o),V=a[8],q=Mb(a);let ne=!0;if(3&h.type||C){const it=Fi(h,a),ft=C?C(it):it,Pe=q.length,It=C?un=>C(An(un[h.index])):h.index;if(Nn(u)){let un=null;if(!C&&x&&(un=function uA(o,a,u,h){const f=o.cleanup;if(null!=f)for(let m=0;m<f.length-1;m+=2){const y=f[m];if(y===u&&f[m+1]===h){const C=a[7],x=f[m+2];return C.length>x?C[x]:null}"string"==typeof y&&(m+=2)}return null}(o,a,f,h.index)),null!==un)(un.__ngLastListenerFn__||un).__ngNextListenerFn__=m,un.__ngLastListenerFn__=m,ne=!1;else{m=m_(h,a,V,m,!1);const Fn=u.listen(ft,f,m);q.push(m,Fn),R&&R.push(f,It,Pe,Pe+1)}}else m=m_(h,a,V,m,!0),ft.addEventListener(f,m,y),q.push(m),R&&R.push(f,It,Pe,y)}else m=m_(h,a,V,m,!1);const Te=h.outputs;let $e;if(ne&&null!==Te&&($e=Te[f])){const it=$e.length;if(it)for(let ft=0;ft<it;ft+=2){const zr=a[$e[ft]][$e[ft+1]].subscribe(m),$c=q.length;q.push(m,zr),R&&R.push(f,h.index,$c,-($c+1))}}}function xD(o,a,u,h){try{return!1!==u(h)}catch(f){return Ab(o,f),!1}}function m_(o,a,u,h,f){return function m(y){if(y===Function)return h;const C=2&o.flags?Li(o.index,a):a;0==(32&a[2])&&Eb(C);let x=xD(a,0,h,y),T=m.__ngNextListenerFn__;for(;T;)x=xD(a,0,T,y)&&x,T=T.__ngNextListenerFn__;return f&&!1===x&&(y.preventDefault(),y.returnValue=!1),x}}function SD(o=1){return function As(o){return(St.lFrame.contextLView=function Pf(o,a){for(;o>0;)a=a[15],o--;return a}(o,St.lFrame.contextLView))[8]}(o)}function dA(o,a){let u=null;const h=function fI(o){const a=o.attrs;if(null!=a){const u=a.indexOf(5);if(0==(1&u))return a[u+1]}return null}(o);for(let f=0;f<a.length;f++){const m=a[f];if("*"!==m){if(null===h?Xy(o,m,!0):Jy(h,m))return f}else u=f}return u}function t0(o){const a=Re()[16][6];if(!a.projection){const h=a.projection=Js(o?o.length:1,null),f=h.slice();let m=a.child;for(;null!==m;){const y=o?dA(m,o):0;null!==y&&(f[y]?f[y].projectionNext=m:h[y]=m,f[y]=m),m=m.next}}}function MD(o,a=0,u){const h=Re(),f=en(),m=ih(f,20+o,16,null,u||null);null===m.projection&&(m.projection=a),cu(),64!=(64&m.flags)&&function cI(o,a,u){mE(a[11],0,a,u,oE(o,u,a),uE(u.parent||a[6],u,a))}(f,h,m)}function ID(o,a,u,h,f){const m=o[u+1],y=null===a;let C=h?Ho(m):ma(m),x=!1;for(;0!==C&&(!1===x||y);){const R=o[C+1];_A(o[C],a)&&(x=!0,o[C+1]=h?Fg(R):tb(R)),C=h?Ho(R):ma(R)}x&&(o[u+1]=h?tb(m):Fg(m))}function _A(o,a){return null===o||null==a||(Array.isArray(o)?o[1]:o)===a||!(!Array.isArray(o)||"string"!=typeof a)&&Ul(o,a)>=0}function d0(o,a,u){return $o(o,a,u,!1),d0}function h0(o,a){return $o(o,a,null,!0),h0}function $o(o,a,u,h){const f=Re(),m=en(),y=Zs(2);m.firstUpdatePass&&function PD(o,a,u,h){const f=o.data;if(null===f[u+1]){const m=f[Bi()],y=function OD(o,a){return a>=o.expandoStartIndex}(o,u);(function y_(o,a){return 0!=(o.flags&(a?16:32))})(m,h)&&null===a&&!y&&(a=!1),a=function EA(o,a,u,h){const f=hc(o);let m=h?a.residualClasses:a.residualStyles;if(null===f)0===(h?a.classBindings:a.styleBindings)&&(u=Tp(u=f0(null,o,a,u,h),a.attrs,h),m=null);else{const y=a.directiveStylingLast;if(-1===y||o[y]!==f)if(u=f0(f,o,a,u,h),null===m){let x=function DA(o,a,u){const h=u?a.classBindings:a.styleBindings;if(0!==ma(h))return o[Ho(h)]}(o,a,h);void 0!==x&&Array.isArray(x)&&(x=f0(null,o,a,x[1],h),x=Tp(x,a.attrs,h),function ND(o,a,u,h){o[Ho(u?a.classBindings:a.styleBindings)]=h}(o,a,h,x))}else m=function BN(o,a,u){let h;const f=a.directiveEnd;for(let m=1+a.directiveStylingLast;m<f;m++)h=Tp(h,o[m].hostAttrs,u);return Tp(h,a.attrs,u)}(o,a,h)}return void 0!==m&&(h?a.residualClasses=m:a.residualStyles=m),u}(f,m,a,h),function mA(o,a,u,h,f,m){let y=m?a.classBindings:a.styleBindings,C=Ho(y),x=ma(y);o[h]=u;let R,T=!1;if(Array.isArray(u)){const V=u;R=V[1],(null===R||Ul(V,R)>0)&&(T=!0)}else R=u;if(f)if(0!==x){const q=Ho(o[C+1]);o[h+1]=Ng(q,C),0!==q&&(o[q+1]=nb(o[q+1],h)),o[C+1]=function gI(o,a){return 131071&o|a<<17}(o[C+1],h)}else o[h+1]=Ng(C,0),0!==C&&(o[C+1]=nb(o[C+1],h)),C=h;else o[h+1]=Ng(x,0),0===C?C=h:o[x+1]=nb(o[x+1],h),x=h;T&&(o[h+1]=tb(o[h+1])),ID(o,R,h,!0),ID(o,R,h,!1),function gA(o,a,u,h,f){const m=f?o.residualClasses:o.residualStyles;null!=m&&"string"==typeof a&&Ul(m,a)>=0&&(u[h+1]=Fg(u[h+1]))}(a,R,o,h,m),y=Ng(C,x),m?a.classBindings=y:a.styleBindings=y}(f,m,a,u,y,h)}}(m,o,y,h),a!==Gt&&Ei(f,y,a)&&function SA(o,a,u,h,f,m,y,C){if(!(3&a.type))return;const x=o.data,T=x[C+1];qo(function xE(o){return 1==(1&o)}(T)?FD(x,a,u,f,ma(T),y):void 0)||(qo(m)||function DE(o){return 2==(2&o)}(T)&&(m=FD(x,null,u,f,C,y)),function dI(o,a,u,h,f){const m=Nn(o);if(a)f?m?o.addClass(u,h):u.classList.add(h):m?o.removeClass(u,h):u.classList.remove(h);else{let y=-1===h.indexOf("-")?void 0:Ka.DashCase;if(null==f)m?o.removeStyle(u,h,y):u.style.removeProperty(h);else{const C="string"==typeof f&&f.endsWith("!important");C&&(f=f.slice(0,-10),y|=Ka.Important),m?o.setStyle(u,h,f,y):u.style.setProperty(h,f,C?"important":"")}}}(h,y,na(Bi(),u),f,m))}(m,m.data[Bi()],f,f[11],o,f[y+1]=function mt(o,a){return null==o||("string"==typeof a?o+=a:"object"==typeof o&&(o=fe(es(o)))),o}(a,u),h,y)}function f0(o,a,u,h,f){let m=null;const y=u.directiveEnd;let C=u.directiveStylingLast;for(-1===C?C=u.directiveStart:C++;C<y&&(m=a[C],h=Tp(h,m.hostAttrs,f),m!==o);)C++;return null!==o&&(u.directiveStylingLast=C),h}function Tp(o,a,u){const h=u?1:2;let f=-1;if(null!==a)for(let m=0;m<a.length;m++){const y=a[m];"number"==typeof y?f=y:f===h&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),lr(o,y,!!u||a[++m]))}return void 0===o?null:o}function FD(o,a,u,h,f,m){const y=null===a;let C;for(;f>0;){const x=o[f],T=Array.isArray(x),R=T?x[1]:x,V=null===R;let q=u[f+1];q===Gt&&(q=V?bt:void 0);let ne=V?yu(q,h):R===h?q:void 0;if(T&&!qo(ne)&&(ne=yu(x,h)),qo(ne)&&(C=ne,y))return C;const Te=o[f+1];f=y?Ho(Te):ma(Te)}if(null!==a){let x=m?a.residualClasses:a.residualStyles;null!=x&&(C=yu(x,h))}return C}function qo(o){return void 0!==o}function Bt(o,a=""){const u=Re(),h=en(),f=o+20,m=h.firstCreatePass?ih(h,f,1,a,null):h.data[f],y=u[f]=function Uy(o,a){return Nn(o)?o.createText(a):o.createTextNode(a)}(u[11],a);Og(h,u,y,m),_r(m,!1)}function yh(o){return bh("",o,""),yh}function bh(o,a,u){const h=Re(),f=function ch(o,a,u,h){return Ei(o,Is(),u)?a+ye(u)+h:Gt}(h,o,a,u);return f!==Gt&&$l(h,Bi(),f),bh}function Pu(o,a,u,h,f){const m=Re(),y=function uh(o,a,u,h,f,m){const C=Ru(o,ms(),u,f);return Zs(2),C?a+ye(u)+h+ye(f)+m:Gt}(m,o,a,u,h,f);return y!==Gt&&$l(m,Bi(),y),Pu}function Ip(o,a,u,h,f,m,y,C,x){const T=Re(),R=hh(T,o,a,u,h,f,m,y,C,x);return R!==Gt&&$l(T,Bi(),R),Ip}function C0(o,a,u){const h=Re();return Ei(h,Is(),a)&&uo(en(),ii(),h,o,a,h[11],u,!0),C0}function E_(o,a,u){const h=Re();if(Ei(h,Is(),a)){const m=en(),y=ii();uo(m,y,h,o,a,Ib(hc(m.data),y,h),u,!0)}return E_}const tl=void 0;var D0=["en",[["a","p"],["AM","PM"],tl],[["AM","PM"],tl,tl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],tl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],tl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",tl,"{1} 'at' {0}",tl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function E0(o){const u=Math.floor(Math.abs(o)),h=o.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===h?1:5}];let Rc={};function x0(o){const a=function kp(o){return o.toLowerCase().replace(/_/g,"-")}(o);let u=QD(a);if(u)return u;const h=a.split("-")[0];if(u=QD(h),u)return u;if("en"===h)return D0;throw new Error(`Missing locale data for the locale "${o}".`)}function S0(o){return x0(o)[ht.PluralCase]}function QD(o){return o in Rc||(Rc[o]=Jt.ng&&Jt.ng.common&&Jt.ng.common.locales&&Jt.ng.common.locales[o]),Rc[o]}var ht=(()=>((ht=ht||{})[ht.LocaleId=0]="LocaleId",ht[ht.DayPeriodsFormat=1]="DayPeriodsFormat",ht[ht.DayPeriodsStandalone=2]="DayPeriodsStandalone",ht[ht.DaysFormat=3]="DaysFormat",ht[ht.DaysStandalone=4]="DaysStandalone",ht[ht.MonthsFormat=5]="MonthsFormat",ht[ht.MonthsStandalone=6]="MonthsStandalone",ht[ht.Eras=7]="Eras",ht[ht.FirstDayOfWeek=8]="FirstDayOfWeek",ht[ht.WeekendRange=9]="WeekendRange",ht[ht.DateFormat=10]="DateFormat",ht[ht.TimeFormat=11]="TimeFormat",ht[ht.DateTimeFormat=12]="DateTimeFormat",ht[ht.NumberSymbols=13]="NumberSymbols",ht[ht.NumberFormats=14]="NumberFormats",ht[ht.CurrencyCode=15]="CurrencyCode",ht[ht.CurrencySymbol=16]="CurrencySymbol",ht[ht.CurrencyName=17]="CurrencyName",ht[ht.Currencies=18]="Currencies",ht[ht.Directionality=19]="Directionality",ht[ht.PluralCase=20]="PluralCase",ht[ht.ExtraData=21]="ExtraData",ht))();const D_="en-US";let x_=D_;function L_(o,a,u,h,f){if(o=ae(o),Array.isArray(o))for(let m=0;m<o.length;m++)L_(o[m],a,u,h,f);else{const m=en(),y=Re();let C=vp(o)?o:ae(o.provide),x=zI(o);const T=Kn(),R=1048575&T.providerIndexes,V=T.directiveStart,q=T.providerIndexes>>20;if(vp(o)||!o.multi){const ne=new Fa(x,f,Sp),Te=va(C,a,f?R:R+q,V);-1===Te?(ar(Os(T,y),m,C),K0(m,o,a.length),a.push(C),T.directiveStart++,T.directiveEnd++,f&&(T.providerIndexes+=1048576),u.push(ne),y.push(ne)):(u[Te]=ne,y[Te]=ne)}else{const ne=va(C,a,R+q,V),Te=va(C,a,R,R+q),$e=ne>=0&&u[ne],it=Te>=0&&u[Te];if(f&&!it||!f&&!$e){ar(Os(T,y),m,C);const ft=function px(o,a,u,h,f){const m=new Fa(o,u,Sp);return m.multi=[],m.index=a,m.componentProviders=0,Pc(m,f,h&&!u),m}(f?V_:B_,u.length,f,h,x);!f&&it&&(u[Te].providerFactory=ft),K0(m,o,a.length,0),a.push(C),T.directiveStart++,T.directiveEnd++,f&&(T.providerIndexes+=1048576),u.push(ft),y.push(ft)}else K0(m,o,ne>-1?ne:Te,Pc(u[f?Te:ne],x,!f&&h));!f&&h&&it&&u[Te].componentProviders++}}}function K0(o,a,u,h){const f=vp(a),m=function MN(o){return!!o.useClass}(a);if(f||m){const x=(m?ae(a.useClass):a).prototype.ngOnDestroy;if(x){const T=o.destroyHooks||(o.destroyHooks=[]);if(!f&&a.multi){const R=T.indexOf(u);-1===R?T.push(u,[h,x]):T[R+1].push(h,x)}else T.push(u,x)}}}function Pc(o,a,u){return u&&o.componentProviders++,o.multi.push(a)-1}function va(o,a,u,h){for(let f=u;f<h;f++)if(a[f]===o)return f;return-1}function B_(o,a,u,h){return xh(this.multi,[])}function V_(o,a,u,h){const f=this.multi;let m;if(this.providerFactory){const y=this.providerFactory.componentProviders,C=Un(u,u[1],this.providerFactory.index,h);m=C.slice(0,y),xh(f,m);for(let x=y;x<C.length;x++)m.push(C[x])}else m=[],xh(f,m);return m}function xh(o,a){for(let u=0;u<o.length;u++)a.push((0,o[u])());return a}function ui(o,a=[]){return u=>{u.providersResolver=(h,f)=>function Hu(o,a,u){const h=en();if(h.firstCreatePass){const f=Zr(o);L_(u,h.data,h.blueprint,f,!0),L_(a,h.data,h.blueprint,f,!1)}}(h,f?f(o):o,a)}}class mx{}class zA{resolveComponentFactory(a){throw function GA(o){const a=Error(`No component factory found for ${fe(o)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=o,a}(a)}}let Hp=(()=>{class o{}return o.NULL=new zA,o})();function $A(){return Mh(Kn(),Re())}function Mh(o,a){return new jp(Fi(o,a))}let jp=(()=>{class o{constructor(u){this.nativeElement=u}}return o.__NG_ELEMENT_ID__=$A,o})();function qA(o){return o instanceof jp?o.nativeElement:o}class Zl{}let gx=(()=>{class o{}return o.__NG_ELEMENT_ID__=()=>function vx(){const o=Re(),u=Li(Kn().index,o);return function _x(o){return o[11]}(Lr(u)?u:o)}(),o})(),Th=(()=>{class o{}return o.\u0275prov=fn({token:o,providedIn:"root",factory:()=>null}),o})();class yx{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const bx=new yx("13.2.7"),G_={};function z_(o,a,u,h,f=!1){for(;null!==u;){const m=a[u.index];if(null!==m&&h.push(An(m)),gr(m))for(let C=10;C<m.length;C++){const x=m[C],T=x[1].firstChild;null!==T&&z_(x[1],x,T,h)}const y=u.type;if(8&y)z_(o,a,u.child,h);else if(32&y){const C=Fy(u,a);let x;for(;x=C();)h.push(x)}else if(16&y){const C=fE(a,u);if(Array.isArray(C))h.push(...C);else{const x=np(a[16]);z_(x[1],x,C,h,!0)}}u=f?u.projectionNext:u.next}return h}class Ih{constructor(a,u){this._lView=a,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,u=a[1];return z_(u,a,u.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if(gr(a)){const u=a[8],h=u?u.indexOf(this):-1;h>-1&&(jy(a,h),Hi(u,h))}this._attachedToViewContainer=!1}Gy(this._lView[1],this._lView)}onDestroy(a){pp(this._lView[1],this._lView,null,a)}markForCheck(){Eb(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){qg(this._lView[1],this._lView,this.context)}checkNoChanges(){!function xb(o,a,u){Pa(!0);try{qg(o,a,u)}finally{Pa(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Ve(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function nI(o,a){th(o,a,a[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new Ve(902,"");this._appRef=a}}class wx extends Ih{constructor(a){super(a),this._view=a}detectChanges(){Db(this._view)}checkNoChanges(){!function LI(o){Pa(!0);try{Db(o)}finally{Pa(!1)}}(this._view)}get context(){return null}}class $_ extends Hp{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const u=_t(a);return new Gp(u,this.ngModule)}}function q_(o){const a=[];for(let u in o)o.hasOwnProperty(u)&&a.push({propName:o[u],templateName:u});return a}class Gp extends mx{constructor(a,u){super(),this.componentDef=a,this.ngModule=u,this.componentType=a.type,this.selector=function wE(o){return o.map(Tu).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return q_(this.componentDef.inputs)}get outputs(){return q_(this.componentDef.outputs)}create(a,u,h,f){const m=(f=f||this.ngModule)?function Ex(o,a){return{get:(u,h,f)=>{const m=o.get(u,G_,f);return m!==G_||h===G_?m:a.get(u,h,f)}}}(a,f.injector):a,y=m.get(Zl,bl),C=m.get(Th,null),x=y.createRenderer(null,this.componentDef),T=this.componentDef.selectors[0][0]||"div",R=h?function fb(o,a,u){if(Nn(o))return o.selectRootElement(a,u===Xt.ShadowDom);let h="string"==typeof a?o.querySelector(a):a;return h.textContent="",h}(x,h,this.componentDef.encapsulation):Hy(y.createRenderer(null,this.componentDef),T,function Cx(o){const a=o.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(T)),V=this.componentDef.onPush?576:528,q=function ZE(o,a){return{components:[],scheduler:o||KT,clean:HE,playerHandler:a||null,flags:0}}(),ne=Ug(0,null,null,1,0,null,null,null,null,null),Te=dp(null,ne,q,V,null,null,y,x,C,m);let $e,it;ra(Te);try{const ft=function WE(o,a,u,h,f,m){const y=u[1];u[20]=o;const x=ih(y,20,2,"#host",null),T=x.mergedAttrs=a.hostAttrs;null!==T&&(kb(x,T,!0),null!==o&&(ri(f,o,T),null!==x.classes&&Ky(f,o,x.classes),null!==x.styles&&Zy(f,o,x.styles)));const R=h.createRenderer(o,a),V=dp(u,kE(a),null,a.onPush?64:16,u[20],x,h,R,m||null,null);return y.firstCreatePass&&(ar(Os(x,u),y,a.type),BE(y,x),gp(x,u.length,1)),$g(u,V),u[20]=V}(R,this.componentDef,Te,y,x);if(R)if(h)ri(x,R,["ng-version",bx.full]);else{const{attrs:Pe,classes:It}=function mI(o){const a=[],u=[];let h=1,f=2;for(;h<o.length;){let m=o[h];if("string"==typeof m)2===f?""!==m&&a.push(m,o[++h]):8===f&&u.push(m);else{if(!pa(f))break;f=m}h++}return{attrs:a,classes:u}}(this.componentDef.selectors[0]);Pe&&ri(x,R,Pe),It&&It.length>0&&Ky(x,R,It.join(" "))}if(it=ni(ne,20),void 0!==u){const Pe=it.projection=[];for(let It=0;It<this.ngContentSelectors.length;It++){const un=u[It];Pe.push(null!=un?Array.from(un):null)}}$e=function YE(o,a,u,h,f){const m=u[1],y=function SI(o,a,u){const h=Kn();o.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),Gg(o,h,a,Xi(o,a,1,null),u));const f=Un(a,o,h.directiveStart,h);ts(f,a);const m=Fi(h,a);return m&&ts(m,a),f}(m,u,a);if(h.components.push(y),o[8]=y,f&&f.forEach(x=>x(y,a)),a.contentQueries){const x=Kn();a.contentQueries(1,y,x.directiveStart)}const C=Kn();return!m.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(Ks(C.index),gb(u[1],C,0,C.directiveStart,C.directiveEnd,a),vb(a,y)),y}(ft,this.componentDef,Te,q,[KE]),Mc(ne,Te,null)}finally{Na()}return new YA(this.componentType,$e,Mh(it,Te),Te,it)}}class YA extends class U_{}{constructor(a,u,h,f,m){super(),this.location=h,this._rootLView=f,this._tNode=m,this.instance=u,this.hostView=this.changeDetectorRef=new wx(f),this.componentType=a}get injector(){return new ca(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}class il{}class zp{}const Nc=new Map;class Dx extends il{constructor(a,u){super(),this._parent=u,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new $_(this);const h=Yt(a);this._bootstrapComponents=ao(h.bootstrap),this._r3Injector=UI(a,u,[{provide:il,useValue:this},{provide:Hp,useValue:this.componentFactoryResolver}],fe(a)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(a)}get(a,u=ho.THROW_IF_NOT_FOUND,h=Dt.Default){return a===ho||a===il||a===Ob?this:this._r3Injector.get(a,u,h)}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class Q0 extends zp{constructor(a){super(),this.moduleType=a,null!==Yt(a)&&function $p(o){const a=new Set;!function u(h){const f=Yt(h,!0),m=f.id;null!==m&&(function Ah(o,a,u){if(a&&a!==u)throw new Error(`Duplicate module registered for ${o} - ${fe(a)} vs ${fe(a.name)}`)}(m,Nc.get(m),h),Nc.set(m,h));const y=ao(f.imports);for(const C of y)a.has(C)||(a.add(C),u(C))}(o)}(a)}create(a){return new Dx(this.moduleType,a)}}function xx(o,a,u,h){return function kh(o,a,u,h,f,m){const y=a+u;return Ei(o,y,f)?function Sr(o,a,u){return o[a]=u}(o,y+1,m?h.call(m,f):h(f)):function ju(o,a){const u=o[a];return u===Gt?void 0:u}(o,y+1)}(Re(),function Ii(){const o=St.lFrame;let a=o.bindingRootIndex;return-1===a&&(a=o.bindingRootIndex=o.tView.bindingStartIndex),a}(),o,a,u,h)}function Q_(o){return a=>{setTimeout(o,void 0,a)}}const po=class tw extends c.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,u,h){var f,m,y;let C=a,x=u||(()=>null),T=h;if(a&&"object"==typeof a){const V=a;C=null===(f=V.next)||void 0===f?void 0:f.bind(V),x=null===(m=V.error)||void 0===m?void 0:m.bind(V),T=null===(y=V.complete)||void 0===y?void 0:y.bind(V)}this.__isAsync&&(x=Q_(x),C&&(C=Q_(C)),T&&(T=Q_(T)));const R=super.subscribe({next:C,error:x,complete:T});return a instanceof G.w0&&a.add(R),R}};function Px(){return this._results[oh()]()}class Yp{constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=oh(),h=Yp.prototype;h[u]||(h[u]=Px)}get changes(){return this._changes||(this._changes=new po)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,u){return this._results.reduce(a,u)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,u){const h=this;h.dirty=!1;const f=br(a);(this._changesDetected=!function zd(o,a,u){if(o.length!==a.length)return!1;for(let h=0;h<o.length;h++){let f=o[h],m=a[h];if(u&&(f=u(f),m=u(m)),m!==f)return!1}return!0}(h._results,f,u))&&(h._results=f,h.length=f.length,h.last=f[this.length-1],h.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let ya=(()=>{class o{}return o.__NG_ELEMENT_ID__=Lx,o})();const Nx=ya,Fx=class extends Nx{constructor(a,u,h){super(),this._declarationLView=a,this._declarationTContainer=u,this.elementRef=h}createEmbeddedView(a){const u=this._declarationTContainer.tViews,h=dp(this._declarationLView,u,a,16,null,u.declTNode,null,null,null,null);h[17]=this._declarationLView[this._declarationTContainer.index];const m=this._declarationLView[19];return null!==m&&(h[19]=m.createEmbeddedView(u)),Mc(u,h,a),new Ih(h)}};function Lx(){return Zp(Kn(),Re())}function Zp(o,a){return 4&o.type?new Fx(a,o,Mh(o,a)):null}let zu=(()=>{class o{}return o.__NG_ELEMENT_ID__=mo,o})();function mo(){return Vx(Kn(),Re())}const Bx=zu,nw=class extends Bx{constructor(a,u,h){super(),this._lContainer=a,this._hostTNode=u,this._hostLView=h}get element(){return Mh(this._hostTNode,this._hostLView)}get injector(){return new ca(this._hostTNode,this._hostLView)}get parentInjector(){const a=at(this._hostTNode,this._hostLView);if(ct(a)){const u=Ro(a,this._hostLView),h=Va(a);return new ca(u[1].data[h+8],u)}return new ca(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const u=$u(this._lContainer);return null!==u&&u[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,u,h){const f=a.createEmbeddedView(u||{});return this.insert(f,h),f}createComponent(a,u,h,f,m){const y=a&&!function Bl(o){return"function"==typeof o}(a);let C;if(y)C=u;else{const V=u||{};C=V.index,h=V.injector,f=V.projectableNodes,m=V.ngModuleRef}const x=y?a:new Gp(_t(a)),T=h||this.parentInjector;if(!m&&null==x.ngModule){const q=(y?T:this.parentInjector).get(il,null);q&&(m=q)}const R=x.create(T,f,void 0,m);return this.insert(R.hostView,C),R}insert(a,u){const h=a._lView,f=h[1];if(function ou(o){return gr(o[3])}(h)){const R=this.indexOf(a);if(-1!==R)this.detach(R);else{const V=h[3],q=new nw(V,V[6],V[3]);q.detach(q.indexOf(a))}}const m=this._adjustIndex(u),y=this._lContainer;!function rI(o,a,u,h){const f=10+h,m=u.length;h>0&&(u[f-1][4]=a),h<m-10?(a[4]=u[f],_c(u,10+h,a)):(u.push(a),a[4]=null),a[3]=u;const y=a[17];null!==y&&u!==y&&function sI(o,a){const u=o[9];a[16]!==a[3][3][16]&&(o[2]=!0),null===u?o[9]=[a]:u.push(a)}(y,a);const C=a[19];null!==C&&C.insertView(o),a[2]|=128}(f,h,y,m);const C=Yy(m,y),x=h[11],T=op(x,y[7]);return null!==T&&function tI(o,a,u,h,f,m){h[0]=f,h[6]=a,th(o,h,u,1,f,m)}(f,y[6],x,h,T,C),a.attachToViewContainerRef(),_c(iw(y),m,a),a}move(a,u){return this.insert(a,u)}indexOf(a){const u=$u(this._lContainer);return null!==u?u.indexOf(a):-1}remove(a){const u=this._adjustIndex(a,-1),h=jy(this._lContainer,u);h&&(Hi(iw(this._lContainer),u),Gy(h[1],h))}detach(a){const u=this._adjustIndex(a,-1),h=jy(this._lContainer,u);return h&&null!=Hi(iw(this._lContainer),u)?new Ih(h):null}_adjustIndex(a,u=0){return null==a?this.length+u:a}};function $u(o){return o[8]}function iw(o){return o[8]||(o[8]=[])}function Vx(o,a){let u;const h=a[o.index];if(gr(h))u=h;else{let f;if(8&o.type)f=An(h);else{const m=a[11];f=m.createComment("");const y=Fi(o,a);Sc(m,op(m,y),f,function cE(o,a){return Nn(o)?o.nextSibling(a):a.nextSibling}(m,y),!1)}a[o.index]=u=UE(h,a,f,o),$g(a,u)}return new nw(u,o,a)}class X_{constructor(a){this.queryList=a,this.matches=null}clone(){return new X_(this.queryList)}setDirty(){this.queryList.setDirty()}}class sw{constructor(a=[]){this.queries=a}createEmbeddedView(a){const u=a.queries;if(null!==u){const h=null!==a.contentQueries?a.contentQueries[0]:u.length,f=[];for(let m=0;m<h;m++){const y=u.getByIndex(m);f.push(this.queries[y.indexInDeclarationView].clone())}return new sw(f)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let u=0;u<this.queries.length;u++)null!==Be(a,u).matches&&this.queries[u].setDirty()}}class Kp{constructor(a,u,h=null){this.predicate=a,this.flags=u,this.read=h}}class ow{constructor(a=[]){this.queries=a}elementStart(a,u){for(let h=0;h<this.queries.length;h++)this.queries[h].elementStart(a,u)}elementEnd(a){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(a)}embeddedTView(a){let u=null;for(let h=0;h<this.length;h++){const f=null!==u?u.length:0,m=this.getByIndex(h).embeddedTView(a,f);m&&(m.indexInDeclarationView=h,null!==u?u.push(m):u=[m])}return null!==u?new ow(u):null}template(a,u){for(let h=0;h<this.queries.length;h++)this.queries[h].template(a,u)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class J_{constructor(a,u=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(a,u){this.isApplyingToNode(u)&&this.matchTNode(a,u)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,u){this.elementStart(a,u)}embeddedTView(a,u){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,u),new J_(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let h=a.parent;for(;null!==h&&8&h.type&&h.index!==u;)h=h.parent;return u===(null!==h?h.index:-1)}return this._appliesToNextNode}matchTNode(a,u){const h=this.metadata.predicate;if(Array.isArray(h))for(let f=0;f<h.length;f++){const m=h[f];this.matchTNodeWithReadOption(a,u,Ar(u,m)),this.matchTNodeWithReadOption(a,u,Qn(u,a,m,!1,!1))}else h===ya?4&u.type&&this.matchTNodeWithReadOption(a,u,-1):this.matchTNodeWithReadOption(a,u,Qn(u,a,h,!1,!1))}matchTNodeWithReadOption(a,u,h){if(null!==h){const f=this.metadata.read;if(null!==f)if(f===jp||f===zu||f===ya&&4&u.type)this.addMatch(u.index,-2);else{const m=Qn(u,a,f,!1,!1);null!==m&&this.addMatch(u.index,m)}else this.addMatch(u.index,h)}}addMatch(a,u){null===this.matches?this.matches=[a,u]:this.matches.push(a,u)}}function Ar(o,a){const u=o.localNames;if(null!==u)for(let h=0;h<u.length;h+=2)if(u[h]===a)return u[h+1];return null}function Fc(o,a,u,h){return-1===u?function Rh(o,a){return 11&o.type?Mh(o,a):4&o.type?Zp(o,a):null}(a,o):-2===u?function aw(o,a,u){return u===jp?Mh(a,o):u===ya?Zp(a,o):u===zu?Vx(a,o):void 0}(o,a,h):Un(o,o[1],u,a)}function Ux(o,a,u,h){const f=a[19].queries[h];if(null===f.matches){const m=o.data,y=u.matches,C=[];for(let x=0;x<y.length;x+=2){const T=y[x];C.push(T<0?null:Fc(a,m[T],y[x+1],u.metadata.read))}f.matches=C}return f.matches}function He(o,a,u,h){const f=o.queries.getByIndex(u),m=f.matches;if(null!==m){const y=Ux(o,a,f,u);for(let C=0;C<m.length;C+=2){const x=m[C];if(x>0)h.push(y[C/2]);else{const T=m[C+1],R=a[-x];for(let V=10;V<R.length;V++){const q=R[V];q[17]===q[3]&&He(q[1],q,T,h)}if(null!==R[9]){const V=R[9];for(let q=0;q<V.length;q++){const ne=V[q];He(ne[1],ne,T,h)}}}}}return h}function $i(o){const a=Re(),u=en(),h=kl();du(h+1);const f=Be(u,h);if(o.dirty&&Oa(a)===(2==(2&f.metadata.flags))){if(null===f.matches)o.reset([]);else{const m=f.crossesNgTemplate?He(u,a,h,[]):Ux(u,a,f,h);o.reset(m,qA),o.notifyOnChanges()}return!0}return!1}function Oh(o,a,u){const h=en();h.firstCreatePass&&(ot(h,new Kp(o,a,u),-1),2==(2&a)&&(h.staticViewQueries=!0)),Hx(h,Re(),a)}function ev(o,a,u,h){const f=en();if(f.firstCreatePass){const m=Kn();ot(f,new Kp(a,u,h),m.index),function ve(o,a){const u=o.contentQueries||(o.contentQueries=[]);a!==(u.length?u[u.length-1]:-1)&&u.push(o.queries.length-1,a)}(f,o),2==(2&u)&&(f.staticContentQueries=!0)}Hx(f,Re(),u)}function gt(){return function Pt(o,a){return o[19].queries[a].queryList}(Re(),kl())}function Hx(o,a,u){const h=new Yp(4==(4&u));pp(o,a,h,h.destroy),null===a[19]&&(a[19]=new sw),a[19].queries.push(new X_(h))}function ot(o,a,u){null===o.queries&&(o.queries=new ow),o.queries.track(new J_(a,u))}function Be(o,a){return o.queries.getByIndex(a)}function Xp(...o){}const Ls=new ai("Application Initializer");let fw=(()=>{class o{constructor(u){this.appInits=u,this.resolve=Xp,this.reject=Xp,this.initialized=!1,this.done=!1,this.donePromise=new Promise((h,f)=>{this.resolve=h,this.reject=f})}runInitializers(){if(this.initialized)return;const u=[],h=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const m=this.appInits[f]();if(Xb(m))u.push(m);else if(f_(m)){const y=new Promise((C,x)=>{m.subscribe({complete:C,error:x})});u.push(y)}}Promise.all(u).then(()=>{h()}).catch(f=>{this.reject(f)}),0===u.length&&h(),this.initialized=!0}}return o.\u0275fac=function(u){return new(u||o)(je(Ls,8))},o.\u0275prov=fn({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const tr=new ai("AppId",{providedIn:"root",factory:function Qx(){return`${_i()}${_i()}${_i()}`}});function _i(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Vc=new ai("Platform Initializer"),sv=new ai("Platform ID"),pw=new ai("appBootstrapListener");let Xx=(()=>{class o{log(u){console.log(u)}warn(u){console.warn(u)}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=fn({token:o,factory:o.\u0275fac}),o})();const Qu=new ai("LocaleId",{providedIn:"root",factory:()=>Nt(Qu,Dt.Optional|Dt.SkipSelf)||function Jl(){return"undefined"!=typeof $localize&&$localize.locale||D_}()}),em=new ai("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Ju{constructor(a,u){this.ngModuleFactory=a,this.componentFactories=u}}let rl=(()=>{class o{compileModuleSync(u){return new Q0(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const h=this.compileModuleSync(u),m=ao(Yt(u).declarations).reduce((y,C)=>{const x=_t(C);return x&&y.push(new Gp(x)),y},[]);return new Ju(h,m)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=fn({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const Jx=(()=>Promise.resolve(0))();function Uc(o){"undefined"==typeof Zone?Jx.then(()=>{o&&o.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",o)}class jr{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:h=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new po(!1),this.onMicrotaskEmpty=new po(!1),this.onStable=new po(!1),this.onError=new po(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!h&&u,f.shouldCoalesceRunChangeDetection=h,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function gw(){let o=Jt.requestAnimationFrame,a=Jt.cancelAnimationFrame;if("undefined"!=typeof Zone&&o&&a){const u=o[Zone.__symbol__("OriginalDelegate")];u&&(o=u);const h=a[Zone.__symbol__("OriginalDelegate")];h&&(a=h)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function tS(o){const a=()=>{!function eS(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(Jt,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,Bh(o),o.isCheckStableRunning=!0,td(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),Bh(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,h,f,m,y,C)=>{try{return Vh(o),u.invokeTask(f,m,y,C)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||o.shouldCoalesceRunChangeDetection)&&a(),vw(o)}},onInvoke:(u,h,f,m,y,C,x)=>{try{return Vh(o),u.invoke(f,m,y,C,x)}finally{o.shouldCoalesceRunChangeDetection&&a(),vw(o)}},onHasTask:(u,h,f,m)=>{u.hasTask(f,m),h===f&&("microTask"==m.change?(o._hasPendingMicrotasks=m.microTask,Bh(o),td(o)):"macroTask"==m.change&&(o.hasPendingMacrotasks=m.macroTask))},onHandleError:(u,h,f,m)=>(u.handleError(f,m),o.runOutsideAngular(()=>o.onError.emit(m)),!1)})}(f)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!jr.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(jr.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(a,u,h){return this._inner.run(a,u,h)}runTask(a,u,h,f){const m=this._inner,y=m.scheduleEventTask("NgZoneEvent: "+f,a,_w,Xp,Xp);try{return m.runTask(y,u,h)}finally{m.cancelTask(y)}}runGuarded(a,u,h){return this._inner.runGuarded(a,u,h)}runOutsideAngular(a){return this._outer.run(a)}}const _w={};function td(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function Bh(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function Vh(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function vw(o){o._nesting--,td(o)}class lk{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new po,this.onMicrotaskEmpty=new po,this.onStable=new po,this.onError=new po}run(a,u,h){return a.apply(u,h)}runGuarded(a,u,h){return a.apply(u,h)}runOutsideAngular(a){return a()}runTask(a,u,h,f){return a.apply(u,h)}}let nS=(()=>{class o{constructor(u){this._ngZone=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{jr.assertNotInAngularZone(),Uc(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Uc(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(h=>!h.updateCb||!h.updateCb(u)||(clearTimeout(h.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,h,f){let m=-1;h&&h>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==m),u(this._didWork,this.getPendingTasks())},h)),this._callbacks.push({doneCb:u,timeoutId:m,updateCb:f})}whenStable(u,h,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,h,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(u,h,f){return[]}}return o.\u0275fac=function(u){return new(u||o)(je(jr))},o.\u0275prov=fn({token:o,factory:o.\u0275fac}),o})(),yw=(()=>{class o{constructor(){this._applications=new Map,av.addToWindow(this)}registerApplication(u,h){this._applications.set(u,h)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,h=!0){return av.findTestabilityInTree(this,u,h)}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=fn({token:o,factory:o.\u0275fac}),o})();class iS{addToWindow(a){}findTestabilityInTree(a,u,h){return null}}function Gr(o){av=o}let mn,av=new iS;const rS=new ai("AllowMultipleToken");class nm{constructor(a,u){this.name=a,this.token=u}}function im(o,a,u=[]){const h=`Platform: ${a}`,f=new ai(h);return(m=[])=>{let y=Rr();if(!y||y.injector.get(rS,!1))if(o)o(u.concat(m).concat({provide:f,useValue:!0}));else{const C=u.concat(m).concat({provide:f,useValue:!0},{provide:Nb,useValue:"platform"});!function lv(o){if(mn&&!mn.destroyed&&!mn.injector.get(rS,!1))throw new Ve(400,"");mn=o.get(oS);const a=o.get(Vc,null);a&&a.forEach(u=>u())}(ho.create({providers:C,name:h}))}return function sS(o){const a=Rr();if(!a)throw new Ve(401,"");return a}()}}function Rr(){return mn&&!mn.destroyed?mn:null}let oS=(()=>{class o{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,h){const C=function hk(o,a){let u;return u="noop"===o?new lk:("zone.js"===o?void 0:o)||new jr({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==a?void 0:a.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==a?void 0:a.ngZoneRunCoalescing)}),u}(h?h.ngZone:void 0,{ngZoneEventCoalescing:h&&h.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:h&&h.ngZoneRunCoalescing||!1}),x=[{provide:jr,useValue:C}];return C.run(()=>{const T=ho.create({providers:x,parent:this.injector,name:u.moduleType.name}),R=u.create(T),V=R.injector.get(tp,null);if(!V)throw new Ve(402,"");return C.runOutsideAngular(()=>{const q=C.onError.subscribe({next:ne=>{V.handleError(ne)}});R.onDestroy(()=>{Cw(this._modules,R),q.unsubscribe()})}),function fk(o,a,u){try{const h=u();return Xb(h)?h.catch(f=>{throw a.runOutsideAngular(()=>o.handleError(f)),f}):h}catch(h){throw a.runOutsideAngular(()=>o.handleError(h)),h}}(V,C,()=>{const q=R.injector.get(fw);return q.runInitializers(),q.donePromise.then(()=>(function M0(o){$t(o,"Expected localeId to be defined"),"string"==typeof o&&(x_=o.toLowerCase().replace(/_/g,"-"))}(R.injector.get(Qu,D_)||D_),this._moduleDoBootstrap(R),R))})})}bootstrapModule(u,h=[]){const f=bw({},h);return function ck(o,a,u){const h=new Q0(u);return Promise.resolve(h)}(0,0,u).then(m=>this.bootstrapModuleFactory(m,f))}_moduleDoBootstrap(u){const h=u.injector.get(ww);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(f=>h.bootstrap(f));else{if(!u.instance.ngDoBootstrap)throw new Ve(403,"");u.instance.ngDoBootstrap(h)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ve(404,"");this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u()),this._destroyed=!0}get destroyed(){return this._destroyed}}return o.\u0275fac=function(u){return new(u||o)(je(ho))},o.\u0275prov=fn({token:o,factory:o.\u0275fac}),o})();function bw(o,a){return Array.isArray(a)?a.reduce(bw,o):Object.assign(Object.assign({},o),a)}let ww=(()=>{class o{constructor(u,h,f,m,y){this._zone=u,this._injector=h,this._exceptionHandler=f,this._componentFactoryResolver=m,this._initStatus=y,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const C=new N.y(T=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{T.next(this._stable),T.complete()})}),x=new N.y(T=>{let R;this._zone.runOutsideAngular(()=>{R=this._zone.onStable.subscribe(()=>{jr.assertNotInAngularZone(),Uc(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,T.next(!0))})})});const V=this._zone.onUnstable.subscribe(()=>{jr.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{T.next(!1)}))});return()=>{R.unsubscribe(),V.unsubscribe()}});this.isStable=(0,de.T)(C,x.pipe((0,he.B)()))}bootstrap(u,h){if(!this._initStatus.done)throw new Ve(405,"");let f;f=u instanceof mx?u:this._componentFactoryResolver.resolveComponentFactory(u),this.componentTypes.push(f.componentType);const m=function nd(o){return o.isBoundToModule}(f)?void 0:this._injector.get(il),C=f.create(ho.NULL,[],h||f.selector,m),x=C.location.nativeElement,T=C.injector.get(nS,null),R=T&&C.injector.get(yw);return T&&R&&R.registerApplication(x,T),C.onDestroy(()=>{this.detachView(C.hostView),Cw(this.components,C),R&&R.unregisterApplication(x)}),this._loadComponent(C),C}tick(){if(this._runningTick)throw new Ve(101,"");try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const h=u;this._views.push(h),h.attachToAppRef(this)}detachView(u){const h=u;Cw(this._views,h),h.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(pw,[]).concat(this._bootstrapListeners).forEach(f=>f(u))}ngOnDestroy(){this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return o.\u0275fac=function(u){return new(u||o)(je(jr),je(ho),je(tp),je(Hp),je(fw))},o.\u0275prov=fn({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function Cw(o,a){const u=o.indexOf(a);u>-1&&o.splice(u,1)}let ec=!0,id=!1;function mk(){return id=!0,ec}function lS(){if(id)throw new Error("Cannot enable prod mode after platform setup.");ec=!1}let Uh=(()=>{class o{}return o.__NG_ELEMENT_ID__=_k,o})();function _k(o){return function Dw(o,a,u){if(sc(o)&&!u){const h=Li(o.index,a);return new Ih(h,h)}return 47&o.type?new Ih(a[16],a):null}(Kn(),Re(),16==(16&o))}class Gc{constructor(){}supports(a){return Ic(a)}create(a){return new Gh(a)}}const fS=(o,a)=>a;class Gh{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||fS}forEachItem(a){let u;for(u=this._itHead;null!==u;u=u._next)a(u)}forEachOperation(a){let u=this._itHead,h=this._removalsHead,f=0,m=null;for(;u||h;){const y=!h||u&&u.currentIndex<gS(h,f,m)?u:h,C=gS(y,f,m),x=y.currentIndex;if(y===h)f--,h=h._nextRemoved;else if(u=u._next,null==y.previousIndex)f++;else{m||(m=[]);const T=C-f,R=x-f;if(T!=R){for(let q=0;q<T;q++){const ne=q<m.length?m[q]:m[q]=0,Te=ne+q;R<=Te&&Te<T&&(m[q]=ne+1)}m[y.previousIndex]=R-T}}C!==x&&a(y,C,x)}}forEachPreviousItem(a){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)a(u)}forEachAddedItem(a){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)a(u)}forEachMovedItem(a){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)a(u)}forEachRemovedItem(a){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)a(u)}forEachIdentityChange(a){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)a(u)}diff(a){if(null==a&&(a=[]),!Ic(a))throw new Ve(900,"");return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let f,m,y,u=this._itHead,h=!1;if(Array.isArray(a)){this.length=a.length;for(let C=0;C<this.length;C++)m=a[C],y=this._trackByFn(C,m),null!==u&&Object.is(u.trackById,y)?(h&&(u=this._verifyReinsertion(u,m,y,C)),Object.is(u.item,m)||this._addIdentityChange(u,m)):(u=this._mismatch(u,m,y,C),h=!0),u=u._next}else f=0,function Ub(o,a){if(Array.isArray(o))for(let u=0;u<o.length;u++)a(o[u]);else{const u=o[oh()]();let h;for(;!(h=u.next()).done;)a(h.value)}}(a,C=>{y=this._trackByFn(f,C),null!==u&&Object.is(u.trackById,y)?(h&&(u=this._verifyReinsertion(u,C,y,f)),Object.is(u.item,C)||this._addIdentityChange(u,C)):(u=this._mismatch(u,C,y,f),h=!0),u=u._next,f++}),this.length=f;return this._truncate(u),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,u,h,f){let m;return null===a?m=this._itTail:(m=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null))?(Object.is(a.item,u)||this._addIdentityChange(a,u),this._reinsertAfter(a,m,f)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(h,f))?(Object.is(a.item,u)||this._addIdentityChange(a,u),this._moveAfter(a,m,f)):a=this._addAfter(new pS(u,h),m,f),a}_verifyReinsertion(a,u,h,f){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null);return null!==m?a=this._reinsertAfter(m,a._prev,f):a.currentIndex!=f&&(a.currentIndex=f,this._addToMoves(a,f)),a}_truncate(a){for(;null!==a;){const u=a._next;this._addToRemovals(this._unlink(a)),a=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,u,h){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const f=a._prevRemoved,m=a._nextRemoved;return null===f?this._removalsHead=m:f._nextRemoved=m,null===m?this._removalsTail=f:m._prevRemoved=f,this._insertAfter(a,u,h),this._addToMoves(a,h),a}_moveAfter(a,u,h){return this._unlink(a),this._insertAfter(a,u,h),this._addToMoves(a,h),a}_addAfter(a,u,h){return this._insertAfter(a,u,h),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,u,h){const f=null===u?this._itHead:u._next;return a._next=f,a._prev=u,null===f?this._itTail=a:f._prev=a,null===u?this._itHead=a:u._next=a,null===this._linkedRecords&&(this._linkedRecords=new zh),this._linkedRecords.put(a),a.currentIndex=h,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const u=a._prev,h=a._next;return null===u?this._itHead=h:u._next=h,null===h?this._itTail=u:h._prev=u,a}_addToMoves(a,u){return a.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new zh),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,u){return a.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class pS{constructor(a,u){this.item=a,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class mS{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,u){let h;for(h=this._head;null!==h;h=h._nextDup)if((null===u||u<=h.currentIndex)&&Object.is(h.trackById,a))return h;return null}remove(a){const u=a._prevDup,h=a._nextDup;return null===u?this._head=h:u._nextDup=h,null===h?this._tail=u:h._prevDup=u,null===this._head}}class zh{constructor(){this.map=new Map}put(a){const u=a.trackById;let h=this.map.get(u);h||(h=new mS,this.map.set(u,h)),h.add(a)}get(a,u){const f=this.map.get(a);return f?f.get(a,u):null}remove(a){const u=a.trackById;return this.map.get(u).remove(a)&&this.map.delete(u),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function gS(o,a,u){const h=o.previousIndex;if(null===h)return h;let f=0;return u&&h<u.length&&(f=u[h]),h+a+f}class _S{constructor(){}supports(a){return a instanceof Map||Dp(a)}create(){return new Di}}class Di{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let u;for(u=this._mapHead;null!==u;u=u._next)a(u)}forEachPreviousItem(a){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)a(u)}forEachChangedItem(a){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)a(u)}forEachAddedItem(a){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)a(u)}forEachRemovedItem(a){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)a(u)}diff(a){if(a){if(!(a instanceof Map||Dp(a)))throw new Ve(900,"")}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(a,(h,f)=>{if(u&&u.key===f)this._maybeAddToChanges(u,h),this._appendAfter=u,u=u._next;else{const m=this._getOrCreateRecordForKey(f,h);u=this._insertBeforeOrAppend(u,m)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let h=u;null!==h;h=h._nextRemoved)h===this._mapHead&&(this._mapHead=null),this._records.delete(h.key),h._nextRemoved=h._next,h.previousValue=h.currentValue,h.currentValue=null,h._prev=null,h._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,u){if(a){const h=a._prev;return u._next=a,u._prev=h,a._prev=u,h&&(h._next=u),a===this._mapHead&&(this._mapHead=u),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(a,u){if(this._records.has(a)){const f=this._records.get(a);this._maybeAddToChanges(f,u);const m=f._prev,y=f._next;return m&&(m._next=y),y&&(y._prev=m),f._next=null,f._prev=null,f}const h=new hv(a);return this._records.set(a,h),h.currentValue=u,this._addToAdditions(h),h}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,u){Object.is(u,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=u,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,u){a instanceof Map?a.forEach(u):Object.keys(a).forEach(h=>u(a[h],h))}}class hv{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function lm(){return new fv([new Gc])}let fv=(()=>{class o{constructor(u){this.factories=u}static create(u,h){if(null!=h){const f=h.factories.slice();u=u.concat(f)}return new o(u)}static extend(u){return{provide:o,useFactory:h=>o.create(u,h||lm()),deps:[[o,new Lo,new _s]]}}find(u){const h=this.factories.find(f=>f.supports(u));if(null!=h)return h;throw new Ve(901,"")}}return o.\u0275prov=fn({token:o,providedIn:"root",factory:lm}),o})();function $h(){return new Iw([new _S])}let Iw=(()=>{class o{constructor(u){this.factories=u}static create(u,h){if(h){const f=h.factories.slice();u=u.concat(f)}return new o(u)}static extend(u){return{provide:o,useFactory:h=>o.create(u,h||$h()),deps:[[o,new Lo,new _s]]}}find(u){const h=this.factories.find(m=>m.supports(u));if(h)return h;throw new Ve(901,"")}}return o.\u0275prov=fn({token:o,providedIn:"root",factory:$h}),o})();const yS=im(null,"core",[{provide:sv,useValue:"unknown"},{provide:oS,deps:[ho]},{provide:yw,deps:[]},{provide:Xx,deps:[]}]);let Wh=(()=>{class o{constructor(u){}}return o.\u0275fac=function(u){return new(u||o)(je(ww))},o.\u0275mod=ce({type:o}),o.\u0275inj=cn({}),o})()},3942:(lt,De,F)=>{F.d(De,{Z:()=>Ve});var c=F(2090),G=F(4859),N=F(9681),de=F(1877);class he{constructor(ye,Ae){this._delegate=ye,this.firebase=Ae,(0,N._addComponent)(ye,new G.wA("app-compat",()=>this,"PUBLIC")),this.container=ye.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ye){this._delegate.automaticDataCollectionEnabled=ye}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ye=>{this._delegate.checkDestroyed(),ye()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,N.deleteApp)(this._delegate)))}_getService(ye,Ae=N._DEFAULT_ENTRY_NAME){var Ze;this._delegate.checkDestroyed();const We=this._delegate.container.getProvider(ye);return!We.isInitialized()&&"EXPLICIT"===(null===(Ze=We.getComponent())||void 0===Ze?void 0:Ze.instantiationMode)&&We.initialize(),We.getImmediate({identifier:Ae})}_removeServiceInstance(ye,Ae=N._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ye).clearInstance(Ae)}_addComponent(ye){(0,N._addComponent)(this._delegate,ye)}_addOrOverwriteComponent(ye){(0,N._addOrOverwriteComponent)(this._delegate,ye)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const oe=new c.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),W=function we(){const qe=function fe(qe){const ye={},Ae={__esModule:!0,initializeApp:function Fe(re,_e={}){const Me=N.initializeApp(re,_e);if((0,c.r3)(ye,Me.name))return ye[Me.name];const J=new qe(Me,Ae);return ye[Me.name]=J,J},app:We,registerVersion:N.registerVersion,setLogLevel:N.setLogLevel,onLog:N.onLog,apps:null,SDK_VERSION:N.SDK_VERSION,INTERNAL:{registerComponent:function Se(re){const _e=re.name,Me=_e.replace("-compat","");if(N._registerComponent(re)&&"PUBLIC"===re.type){const J=(se=We())=>{if("function"!=typeof se[Me])throw oe.create("invalid-app-argument",{appName:_e});return se[Me]()};void 0!==re.serviceProps&&(0,c.ZB)(J,re.serviceProps),Ae[Me]=J,qe.prototype[Me]=function(...se){return this._getService.bind(this,_e).apply(this,re.multipleInstances?se:[])}}return"PUBLIC"===re.type?Ae[Me]:null},removeApp:function Ze(re){delete ye[re]},useAsService:function Qe(re,_e){return"serverAuth"===_e?null:_e},modularAPIs:N}};function We(re){if(!(0,c.r3)(ye,re=re||N._DEFAULT_ENTRY_NAME))throw oe.create("no-app",{appName:re});return ye[re]}return Ae.default=Ae,Object.defineProperty(Ae,"apps",{get:function Oe(){return Object.keys(ye).map(re=>ye[re])}}),We.App=qe,Ae}(he);return qe.INTERNAL=Object.assign(Object.assign({},qe.INTERNAL),{createFirebaseNamespace:we,extendNamespace:function ye(Ae){(0,c.ZB)(qe,Ae)},createSubscribe:c.ne,ErrorFactory:c.LL,deepExtend:c.ZB}),qe}(),$=new de.Yd("@firebase/app-compat");if((0,c.jU)()&&void 0!==self.firebase){$.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const qe=self.firebase.SDK_VERSION;qe&&qe.indexOf("LITE")>=0&&$.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ve=W;!function Ne(qe){(0,N.registerVersion)("@firebase/app-compat","0.1.28",qe)}()},9681:(lt,De,F)=>{F.r(De),F.d(De,{FirebaseError:()=>de.ZR,SDK_VERSION:()=>qr,_DEFAULT_ENTRY_NAME:()=>$t,_addComponent:()=>Sn,_addOrOverwriteComponent:()=>fn,_apps:()=>xn,_clearComponents:()=>ds,_components:()=>Jn,_getProvider:()=>cn,_registerComponent:()=>qt,_removeServiceInstance:()=>jn,deleteApp:()=>Dt,getApp:()=>ei,getApps:()=>Ss,initializeApp:()=>hs,onLog:()=>pn,registerVersion:()=>Bn,setLogLevel:()=>Ki});var c=F(5861),G=F(4859),N=F(1877),de=F(2090),he=F(8766);class be{constructor(H){this.container=H}getPlatformInfoString(){return this.container.getProviders().map(Ee=>{if(function oe(te){const H=te.getComponent();return"VERSION"===(null==H?void 0:H.type)}(Ee)){const Ge=Ee.getImmediate();return`${Ge.library}/${Ge.version}`}return null}).filter(Ee=>Ee).join(" ")}}const fe="@firebase/app",W=new N.Yd("@firebase/app"),$t="[DEFAULT]",tt={[fe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},xn=new Map,Jn=new Map;function Sn(te,H){try{te.container.addComponent(H)}catch(Ee){W.debug(`Component ${H.name} failed to register with FirebaseApp ${te.name}`,Ee)}}function fn(te,H){te.container.addOrOverwriteComponent(H)}function qt(te){const H=te.name;if(Jn.has(H))return W.debug(`There were multiple attempts to register component ${H}.`),!1;Jn.set(H,te);for(const Ee of xn.values())Sn(Ee,te);return!0}function cn(te,H){const Ee=te.container.getProvider("heartbeat").getImmediate({optional:!0});return Ee&&Ee.triggerHeartbeat(),te.container.getProvider(H)}function jn(te,H,Ee=$t){cn(te,H).clearInstance(Ee)}function ds(){Jn.clear()}const qn=new de.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class xs{constructor(H,Ee,Ge){this._isDeleted=!1,this._options=Object.assign({},H),this._config=Object.assign({},Ee),this._name=Ee.name,this._automaticDataCollectionEnabled=Ee.automaticDataCollectionEnabled,this._container=Ge,this.container.addComponent(new G.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(H){this.checkDestroyed(),this._automaticDataCollectionEnabled=H}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(H){this._isDeleted=H}checkDestroyed(){if(this.isDeleted)throw qn.create("app-deleted",{appName:this._name})}}const qr="9.8.4";function hs(te,H={}){"object"!=typeof H&&(H={name:H});const Ee=Object.assign({name:$t,automaticDataCollectionEnabled:!1},H),Ge=Ee.name;if("string"!=typeof Ge||!Ge)throw qn.create("bad-app-name",{appName:String(Ge)});const ut=xn.get(Ge);if(ut){if((0,de.vZ)(te,ut.options)&&(0,de.vZ)(Ee,ut.config))return ut;throw qn.create("duplicate-app",{appName:Ge})}const Ut=new G.H0(Ge);for(const Tn of Jn.values())Ut.addComponent(Tn);const ln=new xs(te,Ee,Ut);return xn.set(Ge,ln),ln}function ei(te=$t){const H=xn.get(te);if(!H)throw qn.create("no-app",{appName:te});return H}function Ss(){return Array.from(xn.values())}function Dt(te){return fr.apply(this,arguments)}function fr(){return(fr=(0,c.Z)(function*(te){const H=te.name;xn.has(H)&&(xn.delete(H),yield Promise.all(te.container.getProviders().map(Ee=>Ee.delete())),te.isDeleted=!0)})).apply(this,arguments)}function Bn(te,H,Ee){var Ge;let ut=null!==(Ge=tt[te])&&void 0!==Ge?Ge:te;Ee&&(ut+=`-${Ee}`);const Ut=ut.match(/\s|\//),ln=H.match(/\s|\//);if(Ut||ln){const Tn=[`Unable to register library "${ut}" with version "${H}":`];return Ut&&Tn.push(`library name "${ut}" contains illegal characters (whitespace or "/")`),Ut&&ln&&Tn.push("and"),ln&&Tn.push(`version name "${H}" contains illegal characters (whitespace or "/")`),void W.warn(Tn.join(" "))}qt(new G.wA(`${ut}-version`,()=>({library:ut,version:H}),"VERSION"))}function pn(te,H){if(null!==te&&"function"!=typeof te)throw qn.create("invalid-log-argument");(0,N.Am)(te,H)}function Ki(te){(0,N.Ub)(te)}const Vn="firebase-heartbeat-store";let Mi=null;function Hs(){return Mi||(Mi=(0,he.X3)("firebase-heartbeat-database",1,{upgrade:(te,H)=>{0===H&&te.createObjectStore(Vn)}}).catch(te=>{throw qn.create("storage-open",{originalErrorMessage:te.message})})),Mi}function yt(){return(yt=(0,c.Z)(function*(te){var H;try{return(yield Hs()).transaction(Vn).objectStore(Vn).get(Yr(te))}catch(Ee){throw qn.create("storage-get",{originalErrorMessage:null===(H=Ee)||void 0===H?void 0:H.message})}})).apply(this,arguments)}function dt(te,H){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,c.Z)(function*(te,H){var Ee;try{const ut=(yield Hs()).transaction(Vn,"readwrite");return yield ut.objectStore(Vn).put(H,Yr(te)),ut.done}catch(Ge){throw qn.create("storage-set",{originalErrorMessage:null===(Ee=Ge)||void 0===Ee?void 0:Ee.message})}})).apply(this,arguments)}function Yr(te){return`${te.name}!${te.options.appId}`}class fi{constructor(H){this.container=H,this._heartbeatsCache=null;const Ee=this.container.getProvider("app").getImmediate();this._storage=new K(Ee),this._heartbeatsCachePromise=this._storage.read().then(Ge=>(this._heartbeatsCache=Ge,Ge))}triggerHeartbeat(){var H=this;return(0,c.Z)(function*(){const Ge=H.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),ut=Mn();if(null===H._heartbeatsCache&&(H._heartbeatsCache=yield H._heartbeatsCachePromise),H._heartbeatsCache.lastSentHeartbeatDate!==ut&&!H._heartbeatsCache.heartbeats.some(Ut=>Ut.date===ut))return H._heartbeatsCache.heartbeats.push({date:ut,agent:Ge}),H._heartbeatsCache.heartbeats=H._heartbeatsCache.heartbeats.filter(Ut=>{const ln=new Date(Ut.date).valueOf();return Date.now()-ln<=2592e6}),H._storage.overwrite(H._heartbeatsCache)})()}getHeartbeatsHeader(){var H=this;return(0,c.Z)(function*(){if(null===H._heartbeatsCache&&(yield H._heartbeatsCachePromise),null===H._heartbeatsCache||0===H._heartbeatsCache.heartbeats.length)return"";const Ee=Mn(),{heartbeatsToSend:Ge,unsentEntries:ut}=function bt(te,H=1024){const Ee=[];let Ge=te.slice();for(const ut of te){const Ut=Ee.find(ln=>ln.agent===ut.agent);if(Ut){if(Ut.dates.push(ut.date),z(Ee)>H){Ut.dates.pop();break}}else if(Ee.push({agent:ut.agent,dates:[ut.date]}),z(Ee)>H){Ee.pop();break}Ge=Ge.slice(1)}return{heartbeatsToSend:Ee,unsentEntries:Ge}}(H._heartbeatsCache.heartbeats),Ut=(0,de.L)(JSON.stringify({version:2,heartbeats:Ge}));return H._heartbeatsCache.lastSentHeartbeatDate=Ee,ut.length>0?(H._heartbeatsCache.heartbeats=ut,yield H._storage.overwrite(H._heartbeatsCache)):(H._heartbeatsCache.heartbeats=[],H._storage.overwrite(H._heartbeatsCache)),Ut})()}}function Mn(){return(new Date).toISOString().substring(0,10)}class K{constructor(H){this.app=H,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,c.Z)(function*(){return!!(0,de.hl)()&&(0,de.eu)().then(()=>!0).catch(()=>!1)})()}read(){var H=this;return(0,c.Z)(function*(){return(yield H._canUseIndexedDBPromise)&&(yield function Xt(te){return yt.apply(this,arguments)}(H.app))||{heartbeats:[]}})()}overwrite(H){var Ee=this;return(0,c.Z)(function*(){var Ge;if(yield Ee._canUseIndexedDBPromise){const Ut=yield Ee.read();return dt(Ee.app,{lastSentHeartbeatDate:null!==(Ge=H.lastSentHeartbeatDate)&&void 0!==Ge?Ge:Ut.lastSentHeartbeatDate,heartbeats:H.heartbeats})}})()}add(H){var Ee=this;return(0,c.Z)(function*(){var Ge;if(yield Ee._canUseIndexedDBPromise){const Ut=yield Ee.read();return dt(Ee.app,{lastSentHeartbeatDate:null!==(Ge=H.lastSentHeartbeatDate)&&void 0!==Ge?Ge:Ut.lastSentHeartbeatDate,heartbeats:[...Ut.heartbeats,...H.heartbeats]})}})()}}function z(te){return(0,de.L)(JSON.stringify({version:2,heartbeats:te})).length}!function ee(te){qt(new G.wA("platform-logger",H=>new be(H),"PRIVATE")),qt(new G.wA("heartbeat",H=>new fi(H),"PRIVATE")),Bn(fe,"0.7.27",te),Bn(fe,"0.7.27","esm2017"),Bn("fire-js","")}("")},4859:(lt,De,F)=>{F.d(De,{wA:()=>N,H0:()=>fe,zt:()=>he});var c=F(5861),G=F(2090);class N{constructor(W,$,ae){this.name=W,this.instanceFactory=$,this.type=ae,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(W){return this.instantiationMode=W,this}setMultipleInstances(W){return this.multipleInstances=W,this}setServiceProps(W){return this.serviceProps=W,this}setInstanceCreatedCallback(W){return this.onInstanceCreated=W,this}}const de="[DEFAULT]";class he{constructor(W,$){this.name=W,this.container=$,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(W){const $=this.normalizeInstanceIdentifier(W);if(!this.instancesDeferred.has($)){const ae=new G.BH;if(this.instancesDeferred.set($,ae),this.isInitialized($)||this.shouldAutoInitialize())try{const Ke=this.getOrInitializeService({instanceIdentifier:$});Ke&&ae.resolve(Ke)}catch(Ke){}}return this.instancesDeferred.get($).promise}getImmediate(W){var $;const ae=this.normalizeInstanceIdentifier(null==W?void 0:W.identifier),Ke=null!==($=null==W?void 0:W.optional)&&void 0!==$&&$;if(!this.isInitialized(ae)&&!this.shouldAutoInitialize()){if(Ke)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ae})}catch(Ne){if(Ke)return null;throw Ne}}getComponent(){return this.component}setComponent(W){if(W.name!==this.name)throw Error(`Mismatching Component ${W.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=W,this.shouldAutoInitialize()){if(function oe(we){return"EAGER"===we.instantiationMode}(W))try{this.getOrInitializeService({instanceIdentifier:de})}catch($){}for(const[$,ae]of this.instancesDeferred.entries()){const Ke=this.normalizeInstanceIdentifier($);try{const Ne=this.getOrInitializeService({instanceIdentifier:Ke});ae.resolve(Ne)}catch(Ne){}}}}clearInstance(W=de){this.instancesDeferred.delete(W),this.instancesOptions.delete(W),this.instances.delete(W)}delete(){var W=this;return(0,c.Z)(function*(){const $=Array.from(W.instances.values());yield Promise.all([...$.filter(ae=>"INTERNAL"in ae).map(ae=>ae.INTERNAL.delete()),...$.filter(ae=>"_delete"in ae).map(ae=>ae._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(W=de){return this.instances.has(W)}getOptions(W=de){return this.instancesOptions.get(W)||{}}initialize(W={}){const{options:$={}}=W,ae=this.normalizeInstanceIdentifier(W.instanceIdentifier);if(this.isInitialized(ae))throw Error(`${this.name}(${ae}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ke=this.getOrInitializeService({instanceIdentifier:ae,options:$});for(const[Ne,Ve]of this.instancesDeferred.entries())ae===this.normalizeInstanceIdentifier(Ne)&&Ve.resolve(Ke);return Ke}onInit(W,$){var ae;const Ke=this.normalizeInstanceIdentifier($),Ne=null!==(ae=this.onInitCallbacks.get(Ke))&&void 0!==ae?ae:new Set;Ne.add(W),this.onInitCallbacks.set(Ke,Ne);const Ve=this.instances.get(Ke);return Ve&&W(Ve,Ke),()=>{Ne.delete(W)}}invokeOnInitCallbacks(W,$){const ae=this.onInitCallbacks.get($);if(ae)for(const Ke of ae)try{Ke(W,$)}catch(Ne){}}getOrInitializeService({instanceIdentifier:W,options:$={}}){let ae=this.instances.get(W);if(!ae&&this.component&&(ae=this.component.instanceFactory(this.container,{instanceIdentifier:(we=W,we===de?void 0:we),options:$}),this.instances.set(W,ae),this.instancesOptions.set(W,$),this.invokeOnInitCallbacks(ae,W),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,W,ae)}catch(Ke){}var we;return ae||null}normalizeInstanceIdentifier(W=de){return this.component?this.component.multipleInstances?W:de:W}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class fe{constructor(W){this.name=W,this.providers=new Map}addComponent(W){const $=this.getProvider(W.name);if($.isComponentSet())throw new Error(`Component ${W.name} has already been registered with ${this.name}`);$.setComponent(W)}addOrOverwriteComponent(W){this.getProvider(W.name).isComponentSet()&&this.providers.delete(W.name),this.addComponent(W)}getProvider(W){if(this.providers.has(W))return this.providers.get(W);const $=new he(W,this);return this.providers.set(W,$),$}getProviders(){return Array.from(this.providers.values())}}},1877:(lt,De,F)=>{F.d(De,{in:()=>G,Yd:()=>oe,Ub:()=>fe,Am:()=>we});const c=[];var G=(()=>{return(W=G||(G={}))[W.DEBUG=0]="DEBUG",W[W.VERBOSE=1]="VERBOSE",W[W.INFO=2]="INFO",W[W.WARN=3]="WARN",W[W.ERROR=4]="ERROR",W[W.SILENT=5]="SILENT",G;var W})();const N={debug:G.DEBUG,verbose:G.VERBOSE,info:G.INFO,warn:G.WARN,error:G.ERROR,silent:G.SILENT},de=G.INFO,he={[G.DEBUG]:"log",[G.VERBOSE]:"log",[G.INFO]:"info",[G.WARN]:"warn",[G.ERROR]:"error"},be=(W,$,...ae)=>{if($<W.logLevel)return;const Ke=(new Date).toISOString(),Ne=he[$];if(!Ne)throw new Error(`Attempted to log a message with an invalid logType (value: ${$})`);console[Ne](`[${Ke}]  ${W.name}:`,...ae)};class oe{constructor($){this.name=$,this._logLevel=de,this._logHandler=be,this._userLogHandler=null,c.push(this)}get logLevel(){return this._logLevel}set logLevel($){if(!($ in G))throw new TypeError(`Invalid value "${$}" assigned to \`logLevel\``);this._logLevel=$}setLogLevel($){this._logLevel="string"==typeof $?N[$]:$}get logHandler(){return this._logHandler}set logHandler($){if("function"!=typeof $)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=$}get userLogHandler(){return this._userLogHandler}set userLogHandler($){this._userLogHandler=$}debug(...$){this._userLogHandler&&this._userLogHandler(this,G.DEBUG,...$),this._logHandler(this,G.DEBUG,...$)}log(...$){this._userLogHandler&&this._userLogHandler(this,G.VERBOSE,...$),this._logHandler(this,G.VERBOSE,...$)}info(...$){this._userLogHandler&&this._userLogHandler(this,G.INFO,...$),this._logHandler(this,G.INFO,...$)}warn(...$){this._userLogHandler&&this._userLogHandler(this,G.WARN,...$),this._logHandler(this,G.WARN,...$)}error(...$){this._userLogHandler&&this._userLogHandler(this,G.ERROR,...$),this._logHandler(this,G.ERROR,...$)}}function fe(W){c.forEach($=>{$.setLogLevel(W)})}function we(W,$){for(const ae of c){let Ke=null;$&&$.level&&(Ke=N[$.level]),ae.userLogHandler=null===W?null:(Ne,Ve,...qe)=>{const ye=qe.map(Ae=>{if(null==Ae)return null;if("string"==typeof Ae)return Ae;if("number"==typeof Ae||"boolean"==typeof Ae)return Ae.toString();if(Ae instanceof Error)return Ae.message;try{return JSON.stringify(Ae)}catch(Ze){return null}}).filter(Ae=>Ae).join(" ");Ve>=(null!=Ke?Ke:Ne.logLevel)&&W({level:G[Ve].toLowerCase(),message:ye,args:qe,type:Ne.name})}}}},8766:(lt,De,F)=>{F.d(De,{Lj:()=>Fe,X3:()=>We});var c=F(5861);let N,de;const oe=new WeakMap,fe=new WeakMap,we=new WeakMap,W=new WeakMap,$=new WeakMap;let Ne={get(_e,Me,J){if(_e instanceof IDBTransaction){if("done"===Me)return fe.get(_e);if("objectStoreNames"===Me)return _e.objectStoreNames||we.get(_e);if("store"===Me)return J.objectStoreNames[1]?void 0:J.objectStore(J.objectStoreNames[0])}return Ae(_e[Me])},set:(_e,Me,J)=>(_e[Me]=J,!0),has:(_e,Me)=>_e instanceof IDBTransaction&&("done"===Me||"store"===Me)||Me in _e};function ye(_e){return"function"==typeof _e?function qe(_e){return _e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function be(){return de||(de=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(_e)?function(...Me){return _e.apply(Ze(this),Me),Ae(oe.get(this))}:function(...Me){return Ae(_e.apply(Ze(this),Me))}:function(Me,...J){const se=_e.call(Ze(this),Me,...J);return we.set(se,Me.sort?Me.sort():[Me]),Ae(se)}}(_e):(_e instanceof IDBTransaction&&function Ke(_e){if(fe.has(_e))return;const Me=new Promise((J,se)=>{const ue=()=>{_e.removeEventListener("complete",Ce),_e.removeEventListener("error",me),_e.removeEventListener("abort",me)},Ce=()=>{J(),ue()},me=()=>{se(_e.error||new DOMException("AbortError","AbortError")),ue()};_e.addEventListener("complete",Ce),_e.addEventListener("error",me),_e.addEventListener("abort",me)});fe.set(_e,Me)}(_e),((_e,Me)=>Me.some(J=>_e instanceof J))(_e,function he(){return N||(N=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(_e,Ne):_e)}function Ae(_e){if(_e instanceof IDBRequest)return function ae(_e){const Me=new Promise((J,se)=>{const ue=()=>{_e.removeEventListener("success",Ce),_e.removeEventListener("error",me)},Ce=()=>{J(Ae(_e.result)),ue()},me=()=>{se(_e.error),ue()};_e.addEventListener("success",Ce),_e.addEventListener("error",me)});return Me.then(J=>{J instanceof IDBCursor&&oe.set(J,_e)}).catch(()=>{}),$.set(Me,_e),Me}(_e);if(W.has(_e))return W.get(_e);const Me=ye(_e);return Me!==_e&&(W.set(_e,Me),$.set(Me,_e)),Me}const Ze=_e=>$.get(_e);function We(_e,Me,{blocked:J,upgrade:se,blocking:ue,terminated:Ce}={}){const me=indexedDB.open(_e,Me),Ue=Ae(me);return se&&me.addEventListener("upgradeneeded",Ct=>{se(Ae(me.result),Ct.oldVersion,Ct.newVersion,Ae(me.transaction))}),J&&me.addEventListener("blocked",()=>J()),Ue.then(Ct=>{Ce&&Ct.addEventListener("close",()=>Ce()),ue&&Ct.addEventListener("versionchange",()=>ue())}).catch(()=>{}),Ue}function Fe(_e,{blocked:Me}={}){const J=indexedDB.deleteDatabase(_e);return Me&&J.addEventListener("blocked",()=>Me()),Ae(J).then(()=>{})}const Oe=["get","getKey","getAll","getAllKeys","count"],Se=["put","add","delete","clear"],Qe=new Map;function re(_e,Me){if(!(_e instanceof IDBDatabase)||Me in _e||"string"!=typeof Me)return;if(Qe.get(Me))return Qe.get(Me);const J=Me.replace(/FromIndex$/,""),se=Me!==J,ue=Se.includes(J);if(!(J in(se?IDBIndex:IDBObjectStore).prototype)||!ue&&!Oe.includes(J))return;const Ce=function(){var me=(0,c.Z)(function*(Ue,...Ct){const an=this.transaction(Ue,ue?"readwrite":"readonly");let $t=an.store;return se&&($t=$t.index(Ct.shift())),(yield Promise.all([$t[J](...Ct),ue&&an.done]))[0]});return function(Ct){return me.apply(this,arguments)}}();return Qe.set(Me,Ce),Ce}!function Ve(_e){Ne=_e(Ne)}(_e=>ZG(YG({},_e),{get:(Me,J,se)=>re(Me,J)||_e.get(Me,J,se),has:(Me,J)=>!!re(Me,J)||_e.has(Me,J)}))},5861:(lt,De,F)=>{function c(N,de,he,be,oe,fe,we){try{var W=N[fe](we),$=W.value}catch(ae){return void he(ae)}W.done?de($):Promise.resolve($).then(be,oe)}function G(N){return function(){var de=this,he=arguments;return new Promise(function(be,oe){var fe=N.apply(de,he);function we($){c(fe,be,oe,we,W,"next",$)}function W($){c(fe,be,oe,we,W,"throw",$)}we(void 0)})}}F.d(De,{Z:()=>G})}},lt=>{lt(lt.s=9121)}]);
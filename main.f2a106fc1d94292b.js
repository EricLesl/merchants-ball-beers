"use strict";var mee=Object.defineProperty,gee=Object.defineProperties,_ee=Object.getOwnPropertyDescriptors,ZG=Object.getOwnPropertySymbols,vee=Object.prototype.hasOwnProperty,yee=Object.prototype.propertyIsEnumerable,KG=(ut,Se,L)=>Se in ut?mee(ut,Se,{enumerable:!0,configurable:!0,writable:!0,value:L}):ut[Se]=L,QG=(ut,Se)=>{for(var L in Se||(Se={}))vee.call(Se,L)&&KG(ut,L,Se[L]);if(ZG)for(var L of ZG(Se))yee.call(Se,L)&&KG(ut,L,Se[L]);return ut},XG=(ut,Se)=>gee(ut,_ee(Se));(self.webpackChunkmerchants_ball_beers=self.webpackChunkmerchants_ball_beers||[]).push([[179],{9121:(ut,Se,L)=>{var c=L(5e3);let G=null;function N(){return G}const oe=new c.OlP("DocumentToken");let pe=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return function Ee(){return(0,c.LFG)(q)}()},providedIn:"platform"}),n})();const W=new c.OlP("Location Initialized");let q=(()=>{class n extends pe{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return N().getBaseHref(this._doc)}onPopState(e){const i=N().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){const i=N().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,i,r){ae()?this._history.pushState(e,i,r):this.location.hash=r}replaceState(e,i,r){ae()?this._history.replaceState(e,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(oe))},n.\u0275prov=c.Yz7({token:n,factory:function(){return function Xe(){return new q((0,c.LFG)(oe))}()},providedIn:"platform"}),n})();function ae(){return!!window.history.pushState}function Fe(n,t){if(0==n.length)return t;if(0==t.length)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?n+t.substring(1):1==e?n+t:n+"/"+t}function Ve(n){const t=n.match(/#|\?|$/),e=t&&t.index||n.length;return n.slice(0,e-("/"===n[e-1]?1:0))+n.slice(e)}function qe(n){return n&&"?"!==n[0]?"?"+n:n}let we=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return function Ae(n){const t=(0,c.LFG)(oe).location;return new We((0,c.LFG)(pe),t&&t.origin||"")}()},providedIn:"root"}),n})();const Ke=new c.OlP("appBaseHref");let We=(()=>{class n extends we{constructor(e,i){if(super(),this._platformLocation=e,this._removeListenerFns=[],null==i&&(i=this._platformLocation.getBaseHrefFromDOM()),null==i)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=i}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Fe(this._baseHref,e)}path(e=!1){const i=this._platformLocation.pathname+qe(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,s){const l=this.prepareExternalUrl(r+qe(s));this._platformLocation.pushState(e,i,l)}replaceState(e,i,r,s){const l=this.prepareExternalUrl(r+qe(s));this._platformLocation.replaceState(e,i,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,e)}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(pe),c.LFG(Ke,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Le=(()=>{class n extends we{constructor(e,i){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(e){const i=Fe(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,r,s){let l=this.prepareExternalUrl(r+qe(s));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(e,i,l)}replaceState(e,i,r,s){let l=this.prepareExternalUrl(r+qe(s));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(e,i,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,e)}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(pe),c.LFG(Ke,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Pe=(()=>{class n{constructor(e,i){this._subject=new c.vpe,this._urlChangeListeners=[],this._platformStrategy=e;const r=this._platformStrategy.getBaseHref();this._platformLocation=i,this._baseHref=Ve(re(r)),this._platformStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+qe(i))}normalize(e){return n.stripTrailingSlash(function Je(n,t){return n&&t.startsWith(n)?t.substring(n.length):t}(this._baseHref,re(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._platformStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+qe(i)),r)}replaceState(e,i="",r=null){this._platformStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+qe(i)),r)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(e=0){var i,r;null===(r=(i=this._platformStrategy).historyGo)||void 0===r||r.call(i,e)}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}))}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i,complete:r})}}return n.normalizeQueryParams=qe,n.joinWithSlash=Fe,n.stripTrailingSlash=Ve,n.\u0275fac=function(e){return new(e||n)(c.LFG(we),c.LFG(pe))},n.\u0275prov=c.Yz7({token:n,factory:function(){return function Me(){return new Pe((0,c.LFG)(we),(0,c.LFG)(pe))}()},providedIn:"root"}),n})();function re(n){return n.replace(/\/index.html$/,"")}class Pa{constructor(t,e,i,r){this.$implicit=t,this.ngForOf=e,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let yi=(()=>{class n{constructor(e,i,r){this._viewContainer=e,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const i=this._viewContainer;e.forEachOperation((r,s,l)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new Pa(r.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)i.remove(null===s?void 0:s);else if(null!==s){const d=i.get(s);i.move(d,l),vo(d,r)}});for(let r=0,s=i.length;r<s;r++){const d=i.get(r).context;d.index=r,d.count=s,d.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{vo(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(e,i){return!0}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(c.s_b),c.Y36(c.Rgc),c.Y36(c.ZZ4))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function vo(n,t){n.context.$implicit=t.item}let Bi=(()=>{class n{constructor(e,i){this._viewContainer=e,this._context=new Rn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){Md("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){Md("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,i){return!0}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(c.s_b),c.Y36(c.Rgc))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class Rn{constructor(){this.$implicit=null,this.ngIf=null}}function Md(n,t){if(t&&!t.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,c.AaK)(t)}'.`)}class zo{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let Mr=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(e)}_matchCase(e){const i=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(e){if(this._defaultViews&&e!==this._defaultUsed){this._defaultUsed=e;for(let i=0;i<this._defaultViews.length;i++)this._defaultViews[i].enforceState(e)}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=c.lG2({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),n})(),hr=(()=>{class n{constructor(e,i,r){this.ngSwitch=r,r._addCase(),this._view=new zo(e,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(c.s_b),c.Y36(c.Rgc),c.Y36(Mr,9))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),n})(),Jn=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();const Nd="browser";function ki(n){return n===Nd}function ir(n){return"server"===n}let yc=(()=>{class n{}return n.\u0275prov=(0,c.Yz7)({token:n,providedIn:"root",factory:()=>new bc((0,c.LFG)(oe),window)}),n})();class bc{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function Ks(n,t){const e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const l=s.getElementById(t)||s.querySelector(`[name="${t}"]`);if(l)return l}r=i.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),i=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=pu(this.window.history)||pu(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function pu(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class wo extends class xl extends class Ce{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function fe(n){G||(G=n)}(new wo)}onAndCancel(t,e,i){return t.addEventListener(e,i,!1),()=>{t.removeEventListener(e,i,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function wc(){return On=On||document.querySelector("base"),On?On.getAttribute("href"):null}();return null==e?null:function $o(n){Sl=Sl||document.createElement("a"),Sl.setAttribute("href",n);const t=Sl.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){On=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function ka(n,t){t=encodeURIComponent(t);for(const e of n.split(";")){const i=e.indexOf("="),[r,s]=-1==i?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===t)return decodeURIComponent(s)}return null}(document.cookie,t)}}let Sl,On=null;const Vi=new c.OlP("TRANSITION_ID"),ri=[{provide:c.ip1,useFactory:function Cc(n,t,e){return()=>{e.get(c.CZH).donePromise.then(()=>{const i=N(),r=t.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[Vi,oe,c.zs3],multi:!0}];class Qs{static init(){(0,c.VLi)(new Qs)}addToWindow(t){c.dqk.getAngularTestability=(i,r=!0)=>{const s=t.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},c.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),c.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),c.dqk.frameworkStabilizers||(c.dqk.frameworkStabilizers=[]),c.dqk.frameworkStabilizers.push(i=>{const r=c.dqk.getAllAngularTestabilities();let s=r.length,l=!1;const d=function(p){l=l||p,s--,0==s&&i(l)};r.forEach(function(p){p.whenStable(d)})})}findTestabilityInTree(t,e,i){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:i?N().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let Ui=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Ba=new c.OlP("EventManagerPlugins");let Ds=(()=>{class n{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(r=>r.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,i,r){return this._findPluginFor(i).addEventListener(e,i,r)}addGlobalEventListener(e,i,r){return this._findPluginFor(i).addGlobalEventListener(e,i,r)}getZone(){return this._zone}_findPluginFor(e){const i=this._eventNameToPlugin.get(e);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const l=r[s];if(l.supports(e))return this._eventNameToPlugin.set(e,l),l}throw new Error(`No event manager plugin found for event ${e}`)}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(Ba),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class gu{constructor(t){this._doc=t}addGlobalEventListener(t,e,i){const r=N().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,i)}}let Tr=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(e){const i=new Set;e.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Co=(()=>{class n extends Tr{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,i,r){e.forEach(s=>{const l=this._doc.createElement("style");l.textContent=s,r.push(i.appendChild(l))})}addHost(e){const i=[];this._addStylesToHost(this._stylesSet,e,i),this._hostNodes.set(e,i)}removeHost(e){const i=this._hostNodes.get(e);i&&i.forEach(Eo),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(e,r,i)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(Eo))}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(oe))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function Eo(n){N().remove(n)}const Et={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ml=/%COMP%/g;function Oe(n,t,e){for(let i=0;i<t.length;i++){let r=t[i];Array.isArray(r)?Oe(n,r,e):(r=r.replace(Ml,n),e.push(r))}return e}function tn(n){return t=>{if("__ngUnwrap__"===t)return n;!1===n(t)&&(t.preventDefault(),t.returnValue=!1)}}let ei=(()=>{class n{constructor(e,i,r){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new Do(e)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;switch(i.encapsulation){case c.ifc.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new vu(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(e),r}case 1:case c.ifc.ShadowDom:return new yu(this.eventManager,this.sharedStylesHost,e,i);default:if(!this.rendererByCompId.has(i.id)){const r=Oe(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(Ds),c.LFG(Co),c.LFG(c.AFp))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class Do{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS(Et[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,i){t&&t.insertBefore(e,i)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let i="string"==typeof t?document.querySelector(t):t;if(!i)throw new Error(`The selector "${t}" did not match any elements`);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,r){if(r){e=r+":"+e;const s=Et[r];s?t.setAttributeNS(s,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){const r=Et[i];r?t.removeAttributeNS(r,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,r){r&(c.JOm.DashCase|c.JOm.Important)?t.style.setProperty(e,i,r&c.JOm.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&c.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t[e]=i}setValue(t,e){t.nodeValue=e}listen(t,e,i){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,tn(i)):this.eventManager.addEventListener(t,e,tn(i))}}class vu extends Do{constructor(t,e,i,r){super(t),this.component=i;const s=Oe(r+"-"+i.id,i.styles,[]);e.addStyles(s),this.contentAttr=function Al(n){return"_ngcontent-%COMP%".replace(Ml,n)}(r+"-"+i.id),this.hostAttr=function Bf(n){return"_nghost-%COMP%".replace(Ml,n)}(r+"-"+i.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}}class yu extends Do{constructor(t,e,i,r){super(t),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=Oe(r.id,r.styles,[]);for(let l=0;l<s.length;l++){const d=document.createElement("style");d.textContent=s[l],this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let Ud=(()=>{class n extends gu{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r){return e.addEventListener(i,r,!1),()=>this.removeEventListener(e,i,r)}removeEventListener(e,i,r){return e.removeEventListener(i,r)}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(oe))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Hd=["alt","control","meta","shift"],Va={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ri={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ds={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let bu=(()=>{class n extends gu{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,i,r){const s=n.parseEventName(i),l=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>N().onAndCancel(e,s.domEventName,l))}static parseEventName(e){const i=e.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let l="";if(Hd.forEach(p=>{const _=i.indexOf(p);_>-1&&(i.splice(_,1),l+=p+".")}),l+=s,0!=i.length||0===s.length)return null;const d={};return d.domEventName=r,d.fullKey=l,d}static getEventFullKey(e){let i="",r=function xs(n){let t=n.key;if(null==t){if(t=n.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===n.location&&Ri.hasOwnProperty(t)&&(t=Ri[t]))}return Va[t]||t}(e);return r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),Hd.forEach(s=>{s!=r&&ds[s](e)&&(i+=s+".")}),i+=r,i}static eventCallback(e,i,r){return s=>{n.getEventFullKey(s)===e&&r.runGuarded(()=>i(s))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(oe))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Gd=(0,c.eFA)(c._c5,"browser",[{provide:c.Lbi,useValue:Nd},{provide:c.g9A,useValue:function Xs(){wo.makeCurrent(),Qs.init()},multi:!0},{provide:oe,useFactory:function jd(){return(0,c.RDi)(document),document},deps:[]}]),qo=[{provide:c.zSh,useValue:"root"},{provide:c.qLn,useFactory:function Pl(){return new c.qLn},deps:[]},{provide:Ba,useClass:Ud,multi:!0,deps:[oe,c.R0b,c.Lbi]},{provide:Ba,useClass:bu,multi:!0,deps:[oe]},{provide:ei,useClass:ei,deps:[Ds,Co,c.AFp]},{provide:c.FYo,useExisting:ei},{provide:Tr,useExisting:Co},{provide:Co,useClass:Co,deps:[oe]},{provide:c.dDg,useClass:c.dDg,deps:[c.R0b]},{provide:Ds,useClass:Ds,deps:[Ba,c.R0b]},{provide:class Vn{},useClass:Ui,deps:[]}];let Ec=(()=>{class n{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:n,providers:[{provide:c.AFp,useValue:e.appId},{provide:Vi,useExisting:c.AFp},ri]}}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(n,12))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:qo,imports:[Jn,c.hGG]}),n})();"undefined"!=typeof window&&window;var Nn=L(8996),Vl=L(3269);function Ye(...n){const t=(0,Vl.yG)(n);return(0,Nn.D)(n,t)}var Tt=L(7579);class Oi extends Tt.x{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:i}=this;if(t)throw e;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}}var oi=L(8306);const{isArray:Eu}=Array,{getPrototypeOf:Ga,prototype:za,keys:ai}=Object;function Ko(n){if(1===n.length){const t=n[0];if(Eu(t))return{args:t,keys:null};if(function Qo(n){return n&&"object"==typeof n&&Ga(n)===za}(t)){const e=ai(t);return{args:e.map(i=>t[i]),keys:e}}}return{args:n,keys:null}}var Ts=L(4671),ht=L(4004);const{isArray:Zd}=Array;function Sc(n){return(0,ht.U)(t=>function Kd(n,t){return Zd(t)?n(...t):n(t)}(n,t))}function Qd(n,t){return n.reduce((e,i,r)=>(e[i]=t[r],e),{})}var _n=L(5403),Mc=L(9672);function Ir(n,t,e){n?(0,Mc.f)(e,n,t):t()}var Gi=L(576);function no(n,t){const e=(0,Gi.m)(n)?n:()=>n,i=r=>r.error(e());return new oi.y(t?r=>t.schedule(i,0,r):i)}const $a=(0,L(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var xo=L(8189);function ea(...n){return function qa(){return(0,xo.J)(1)}()((0,Nn.D)(n,(0,Vl.yG)(n)))}var Is=L(8421);function So(n){return new oi.y(t=>{(0,Is.Xf)(n()).subscribe(t)})}var Mo=L(515),Hr=L(727),Qn=L(4482);function ta(){return(0,Qn.e)((n,t)=>{let e=null;n._refCount++;const i=(0,_n.x)(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(e=null);const r=n._connection,s=e;e=null,r&&(!s||r===s)&&r.unsubscribe(),t.unsubscribe()});n.subscribe(i),i.closed||(e=n.connect())})}class na extends oi.y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,(0,Qn.A)(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,null==t||t.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new Hr.w0;const e=this.getSubject();t.add(this.source.subscribe((0,_n.x)(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),t.closed&&(this._connection=null,t=Hr.w0.EMPTY)}return t}refCount(){return ta()(this)}}function $n(n,t){return(0,Qn.e)((e,i)=>{let r=null,s=0,l=!1;const d=()=>l&&!r&&i.complete();e.subscribe((0,_n.x)(i,p=>{null==r||r.unsubscribe();let _=0;const b=s++;(0,Is.Xf)(n(p,b)).subscribe(r=(0,_n.x)(i,D=>i.next(t?t(p,D,b,_++):D),()=>{r=null,d()}))},()=>{l=!0,d()}))})}var qn=L(5698);function Zi(...n){const t=(0,Vl.yG)(n);return(0,Qn.e)((e,i)=>{(t?ea(n,e,t):ea(n,e)).subscribe(i)})}function To(n,t,e,i,r){return(s,l)=>{let d=e,p=t,_=0;s.subscribe((0,_n.x)(l,b=>{const D=_++;p=d?n(p,b,D):(d=!0,b),i&&l.next(p)},r&&(()=>{d&&l.next(p),l.complete()})))}}function jr(n,t){return(0,Qn.e)(To(n,t,arguments.length>=2,!0))}function Dn(n,t){return(0,Qn.e)((e,i)=>{let r=0;e.subscribe((0,_n.x)(i,s=>n.call(t,s,r++)&&i.next(s)))})}function As(n){return(0,Qn.e)((t,e)=>{let s,i=null,r=!1;i=t.subscribe((0,_n.x)(e,void 0,void 0,l=>{s=(0,Is.Xf)(n(l,As(n)(t))),i?(i.unsubscribe(),i=null,s.subscribe(e)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(e))})}var Xn=L(5577);function Ul(n,t){return(0,Gi.m)(t)?(0,Xn.z)(n,t,1):(0,Xn.z)(n,1)}function ia(n){return n<=0?()=>Mo.E:(0,Qn.e)((t,e)=>{let i=[];t.subscribe((0,_n.x)(e,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)e.next(r);e.complete()},void 0,()=>{i=null}))})}function li(n=yg){return(0,Qn.e)((t,e)=>{let i=!1;t.subscribe((0,_n.x)(e,r=>{i=!0,e.next(r)},()=>i?e.complete():e.error(n())))})}function yg(){return new $a}function bg(n){return(0,Qn.e)((t,e)=>{let i=!1;t.subscribe((0,_n.x)(e,r=>{i=!0,e.next(r)},()=>{i||e.next(n),e.complete()}))})}function Wa(n,t){const e=arguments.length>=2;return i=>i.pipe(n?Dn((r,s)=>n(r,s,i)):Ts.y,(0,qn.q)(1),e?bg(t):li(()=>new $a))}var wi=L(8505);function Du(n){return(0,Qn.e)((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}class Io{constructor(t,e){this.id=t,this.url=e}}class ra extends Io{constructor(t,e,i="imperative",r=null){super(t,e),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ya extends Io{constructor(t,e,i){super(t,e),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class fi extends Io{constructor(t,e,i){super(t,e),this.reason=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Hl extends Io{constructor(t,e,i){super(t,e),this.error=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class jl extends Io{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Gf extends Io{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zf extends Io{constructor(t,e,i,r,s){super(t,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class pr extends Io{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mr extends Io{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Gl{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class zl{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class io{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Tc{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ro{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $l{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xu{constructor(t,e,i){this.routerEvent=t,this.position=e,this.anchor=i}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const qt="primary";class Ic{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Ci(n){return new Ic(n)}const Ac="ngNavigationCancelingError";function sa(n){const t=Error("NavigationCancelingError: "+n);return t[Ac]=!0,t}function kc(n,t,e){const i=e.path.split("/");if(i.length>n.length||"full"===e.pathMatch&&(t.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const l=i[s],d=n[s];if(l.startsWith(":"))r[l.substring(1)]=d;else if(l!==d.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function Ar(n,t){const e=n?Object.keys(n):void 0,i=t?Object.keys(t):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let s=0;s<e.length;s++)if(r=e[s],!Xd(n[r],t[r]))return!1;return!0}function Xd(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;const e=[...n].sort(),i=[...t].sort();return e.every((r,s)=>i[s]===r)}return n===t}function Rc(n){return Array.prototype.concat.apply([],n)}function ks(n){return n.length>0?n[n.length-1]:null}function xn(n,t){for(const e in n)n.hasOwnProperty(e)&&t(n[e],e)}function kr(n){return(0,c.CqO)(n)?n:(0,c.QGY)(n)?(0,Nn.D)(Promise.resolve(n)):Ye(n)}const Ao={exact:function S(n,t,e){if(!It(n.segments,t.segments)||!X(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(const i in t.children)if(!n.children[i]||!S(n.children[i],t.children[i],e))return!1;return!0},subset:O},Ka={exact:function Cg(n,t){return Ar(n,t)},subset:function M(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>Xd(n[e],t[e]))},ignored:()=>!0};function oa(n,t,e){return Ao[e.paths](n.root,t.root,e.matrixParams)&&Ka[e.queryParams](n.queryParams,t.queryParams)&&!("exact"===e.fragment&&n.fragment!==t.fragment)}function O(n,t,e){return j(n,t,t.segments,e)}function j(n,t,e,i){if(n.segments.length>e.length){const r=n.segments.slice(0,e.length);return!(!It(r,e)||t.hasChildren()||!X(r,e,i))}if(n.segments.length===e.length){if(!It(n.segments,e)||!X(n.segments,e,i))return!1;for(const r in t.children)if(!n.children[r]||!O(n.children[r],t.children[r],i))return!1;return!0}{const r=e.slice(0,n.segments.length),s=e.slice(n.segments.length);return!!(It(n.segments,r)&&X(n.segments,r,i)&&n.children[qt])&&j(n.children[qt],t,s,i)}}function X(n,t,e){return t.every((i,r)=>Ka[e](n[r].parameters,i.parameters))}class he{constructor(t,e,i){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ci(this.queryParams)),this._queryParamMap}toString(){return rr.serialize(this)}}class ve{constructor(t,e){this.segments=t,this.children=e,this.parent=null,xn(e,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return so(this)}}class Ue{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Ci(this.parameters)),this._parameterMap}toString(){return Qa(this)}}function It(n,t){return n.length===t.length&&n.every((e,i)=>e.path===t[i].path)}class _t{}class zi{parse(t){const e=new Dg(t);return new he(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${gr(t.root,!0)}`,i=function Wf(n){const t=Object.keys(n).map(e=>{const i=n[e];return Array.isArray(i)?i.map(r=>`${aa(e)}=${aa(r)}`).join("&"):`${aa(e)}=${aa(i)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${e}${i}${"string"==typeof t.fragment?`#${function la(n){return encodeURI(n)}(t.fragment)}`:""}`}}const rr=new zi;function so(n){return n.segments.map(t=>Qa(t)).join("/")}function gr(n,t){if(!n.hasChildren())return so(n);if(t){const e=n.children[qt]?gr(n.children[qt],!1):"",i=[];return xn(n.children,(r,s)=>{s!==qt&&i.push(`${s}:${gr(r,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}{const e=function jt(n,t){let e=[];return xn(n.children,(i,r)=>{r===qt&&(e=e.concat(t(i,r)))}),xn(n.children,(i,r)=>{r!==qt&&(e=e.concat(t(i,r)))}),e}(n,(i,r)=>r===qt?[gr(n.children[qt],!1)]:[`${r}:${gr(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[qt]?`${so(n)}/${e[0]}`:`${so(n)}/(${e.join("//")})`}}function Gr(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function aa(n){return Gr(n).replace(/%3B/gi,";")}function ko(n){return Gr(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function zr(n){return decodeURIComponent(n)}function Rs(n){return zr(n.replace(/\+/g,"%20"))}function Qa(n){return`${ko(n.path)}${function qf(n){return Object.keys(n).map(t=>`;${ko(t)}=${ko(n[t])}`).join("")}(n.parameters)}`}const sy=/^[^\/()?;=#]+/;function ca(n){const t=n.match(sy);return t?t[0]:""}const Su=/^[^=?&#]+/,$C=/^[^&#]+/;class Dg{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ve([],{}):new ve([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[qt]=new ve(t,e)),i}parseSegment(){const t=ca(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new Ue(zr(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=ca(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const r=ca(this.remaining);r&&(i=r,this.capture(i))}t[zr(e)]=zr(i)}parseQueryParam(t){const e=function Yf(n){const t=n.match(Su);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const l=function Eg(n){const t=n.match($C);return t?t[0]:""}(this.remaining);l&&(i=l,this.capture(i))}const r=Rs(e),s=Rs(i);if(t.hasOwnProperty(r)){let l=t[r];Array.isArray(l)||(l=[l],t[r]=l),l.push(s)}else t[r]=s}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=ca(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let s;i.indexOf(":")>-1?(s=i.substr(0,i.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=qt);const l=this.parseChildren();e[s]=1===Object.keys(l).length?l[qt]:new ve([],l),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class oy{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Oc(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){const e=Oc(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=Zf(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return Zf(t,this._root).map(e=>e.value)}}function Oc(n,t){if(n===t.value)return t;for(const e of t.children){const i=Oc(n,e);if(i)return i}return null}function Zf(n,t){if(n===t.value)return[t];for(const e of t.children){const i=Zf(n,e);if(i.length)return i.unshift(t),i}return[]}class ua{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function da(n){const t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}class Jd extends oy{constructor(t,e){super(t),this.snapshot=e,eh(this,t)}toString(){return this.snapshot.toString()}}function ql(n,t){const e=function ay(n,t){const l=new Fc([],{},{},"",{},qt,t,null,n.root,-1,{});return new Kf("",new ua(l,[]))}(n,t),i=new Oi([new Ue("",{})]),r=new Oi({}),s=new Oi({}),l=new Oi({}),d=new Oi(""),p=new Pc(i,r,l,d,s,qt,t,e.root);return p.snapshot=e.root,new Jd(new ua(p,[]),e)}class Pc{constructor(t,e,i,r,s,l,d,p){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=l,this.component=d,this._futureSnapshot=p}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ht.U)(t=>Ci(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ht.U)(t=>Ci(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ly(n,t="emptyOnly"){const e=n.pathFromRoot;let i=0;if("always"!==t)for(i=e.length-1;i>=1;){const r=e[i],s=e[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function Nc(n){return n.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(e.slice(i))}class Fc{constructor(t,e,i,r,s,l,d,p,_,b,D){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=l,this.component=d,this.routeConfig=p,this._urlSegment=_,this._lastPathIndex=b,this._resolve=D}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ci(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ci(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Kf extends oy{constructor(t,e){super(e),this.url=t,eh(this,e)}toString(){return Qf(this._root)}}function eh(n,t){t.value._routerState=n,t.children.forEach(e=>eh(n,e))}function Qf(n){const t=n.children.length>0?` { ${n.children.map(Qf).join(", ")} } `:"";return`${n.value}${t}`}function ha(n){if(n.snapshot){const t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,Ar(t.queryParams,e.queryParams)||n.queryParams.next(e.queryParams),t.fragment!==e.fragment&&n.fragment.next(e.fragment),Ar(t.params,e.params)||n.params.next(e.params),function Za(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!Ar(n[e],t[e]))return!1;return!0}(t.url,e.url)||n.url.next(e.url),Ar(t.data,e.data)||n.data.next(e.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function th(n,t){const e=Ar(n.params,t.params)&&function Dt(n,t){return It(n,t)&&n.every((e,i)=>Ar(e.parameters,t[i].parameters))}(n.url,t.url);return e&&!(!n.parent!=!t.parent)&&(!n.parent||th(n.parent,t.parent))}function Mu(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){const i=e.value;i._futureSnapshot=t.value;const r=function uy(n,t,e){return t.children.map(i=>{for(const r of e.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return Mu(n,i,r);return Mu(n,i)})}(n,t,e);return new ua(i,r)}{if(n.shouldAttach(t.value)){const s=n.retrieve(t.value);if(null!==s){const l=s.route;return l.value._futureSnapshot=t.value,l.children=t.children.map(d=>Mu(n,d)),l}}const i=function dy(n){return new Pc(new Oi(n.url),new Oi(n.params),new Oi(n.queryParams),new Oi(n.fragment),new Oi(n.data),n.outlet,n.component,n)}(t.value),r=t.children.map(s=>Mu(n,s));return new ua(i,r)}}function fa(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Xa(n){return"object"==typeof n&&null!=n&&n.outlets}function Xf(n,t,e,i,r){let s={};if(i&&xn(i,(d,p)=>{s[p]=Array.isArray(d)?d.map(_=>`${_}`):`${d}`}),n===t)return new he(e,s,r);const l=Jf(n,t,e);return new he(l,s,r)}function Jf(n,t,e){const i={};return xn(n.children,(r,s)=>{i[s]=r===t?e:Jf(r,t,e)}),new ve(n.segments,i)}class xg{constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&fa(i[0]))throw new Error("Root segment cannot have matrix parameters");const r=i.find(Xa);if(r&&r!==ks(i))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class tp{constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}}function Mg(n,t,e){if(n||(n=new ve([],{})),0===n.segments.length&&n.hasChildren())return nh(n,t,e);const i=function cT(n,t,e){let i=0,r=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=e.length)return s;const l=n.segments[r],d=e[i];if(Xa(d))break;const p=`${d}`,_=i<e.length-1?e[i+1]:null;if(r>0&&void 0===p)break;if(p&&_&&"object"==typeof _&&void 0===_.outlets){if(!E(p,_,l))return s;i+=2}else{if(!E(p,{},l))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,t,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new ve(n.segments.slice(0,i.pathIndex),{});return s.children[qt]=new ve(n.segments.slice(i.pathIndex),n.children),nh(s,0,r)}return i.match&&0===r.length?new ve(n.segments,{}):i.match&&!n.hasChildren()?w(n,t,e):i.match?nh(n,0,r):w(n,t,e)}function nh(n,t,e){if(0===e.length)return new ve(n.segments,{});{const i=function hy(n){return Xa(n[0])?n[0].outlets:{[qt]:n}}(e),r={};return xn(i,(s,l)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[l]=Mg(n.children[l],t,s))}),xn(n.children,(s,l)=>{void 0===i[l]&&(r[l]=s)}),new ve(n.segments,r)}}function w(n,t,e){const i=n.segments.slice(0,t);let r=0;for(;r<e.length;){const s=e[r];if(Xa(s)){const p=g(s.outlets);return new ve(i,p)}if(0===r&&fa(e[0])){i.push(new Ue(n.segments[t].path,v(e[0]))),r++;continue}const l=Xa(s)?s.outlets[qt]:`${s}`,d=r<e.length-1?e[r+1]:null;l&&d&&fa(d)?(i.push(new Ue(l,v(d))),r+=2):(i.push(new Ue(l,{})),r++)}return new ve(i,{})}function g(n){const t={};return xn(n,(e,i)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[i]=w(new ve([],{}),0,e))}),t}function v(n){const t={};return xn(n,(e,i)=>t[i]=`${e}`),t}function E(n,t,e){return n==e.path&&Ar(t,e.parameters)}class B{constructor(t,e,i,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=r}activate(t){const e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),ha(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){const r=da(e);t.children.forEach(s=>{const l=s.value.outlet;this.deactivateRoutes(s,r[l],i),delete r[l]}),xn(r,(s,l)=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(t,e,i){const r=t.value,s=e?e.value:null;if(r===s)if(r.component){const l=i.getContext(r.outlet);l&&this.deactivateChildRoutes(t,e,l.children)}else this.deactivateChildRoutes(t,e,i);else s&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=da(t);for(const l of Object.keys(s))this.deactivateRouteAndItsChildren(s[l],r);if(i&&i.outlet){const l=i.outlet.detach(),d=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:l,route:t,contexts:d})}}deactivateRouteAndOutlet(t,e){const i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=da(t);for(const l of Object.keys(s))this.deactivateRouteAndItsChildren(s[l],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(t,e,i){const r=da(e);t.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new $l(s.value.snapshot))}),t.children.length&&this.forwardEvent(new Tc(t.value.snapshot))}activateRoutes(t,e,i){const r=t.value,s=e?e.value:null;if(ha(r),r===s)if(r.component){const l=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,l.children)}else this.activateChildRoutes(t,e,i);else if(r.component){const l=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const d=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),l.children.onOutletReAttached(d.contexts),l.attachRef=d.componentRef,l.route=d.route.value,l.outlet&&l.outlet.attach(d.componentRef,d.route.value),ha(d.route.value),this.activateChildRoutes(t,null,l.children)}else{const d=function ie(n){for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(r.snapshot),p=d?d.module.componentFactoryResolver:null;l.attachRef=null,l.route=r,l.resolver=p,l.outlet&&l.outlet.activateWith(r,p),this.activateChildRoutes(t,null,l.children)}}else this.activateChildRoutes(t,null,i)}}class ke{constructor(t,e){this.routes=t,this.module=e}}function lt(n){return"function"==typeof n}function Ft(n){return n instanceof he}const Tu=Symbol("INITIAL_VALUE");function Ja(){return $n(n=>function to(...n){const t=(0,Vl.yG)(n),e=(0,Vl.jO)(n),{args:i,keys:r}=Ko(n);if(0===i.length)return(0,Nn.D)([],t);const s=new oi.y(function Xo(n,t,e=Ts.y){return i=>{Ir(t,()=>{const{length:r}=n,s=new Array(r);let l=r,d=r;for(let p=0;p<r;p++)Ir(t,()=>{const _=(0,Nn.D)(n[p],t);let b=!1;_.subscribe((0,_n.x)(i,D=>{s[p]=D,b||(b=!0,d--),d||i.next(e(s.slice()))},()=>{--l||i.complete()}))},i)},i)}}(i,t,r?l=>Qd(r,l):Ts.y));return e?s.pipe(Sc(e)):s}(n.map(t=>t.pipe((0,qn.q)(1),Zi(Tu)))).pipe(jr((t,e)=>{let i=!1;return e.reduce((r,s,l)=>r!==Tu?r:(s===Tu&&(i=!0),i||!1!==s&&l!==e.length-1&&!Ft(s)?r:s),t)},Tu),Dn(t=>t!==Tu),(0,ht.U)(t=>Ft(t)?t:!0===t),(0,qn.q)(1)))}class Tg{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Lc,this.attachRef=null}}class Lc{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const i=this.getOrCreateContext(t);i.outlet=e,this.contexts.set(t,i)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null,e.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new Tg,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}let Iu=(()=>{class n{constructor(e,i,r,s,l){this.parentContexts=e,this.location=i,this.resolver=r,this.changeDetector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new c.vpe,this.deactivateEvents=new c.vpe,this.attachEvents=new c.vpe,this.detachEvents=new c.vpe,this.name=s||qt,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const l=(i=i||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),d=this.parentContexts.getOrCreateContext(this.name).children,p=new Ig(e,d,this.location.injector);this.activated=this.location.createComponent(l,this.location.length,p),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(Lc),c.Y36(c.s_b),c.Y36(c._Vd),c.$8M("name"),c.Y36(c.sBO))},n.\u0275dir=c.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Ig{constructor(t,e,i){this.route=t,this.childContexts=e,this.parent=i}get(t,e){return t===Pc?this.route:t===Lc?this.childContexts:this.parent.get(t,e)}}let ih=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,i){1&e&&c._UZ(0,"router-outlet")},directives:[Iu],encapsulation:2}),n})();function Wl(n,t=""){for(let e=0;e<n.length;e++){const i=n[e];rp(i,sp(t,i))}}function rp(n,t){n.children&&Wl(n.children,t)}function sp(n,t){return t?n||t.path?n&&!t.path?`${n}/`:!n&&t.path?t.path:`${n}/${t.path}`:"":n}function Au(n){const t=n.children&&n.children.map(Au),e=t?Object.assign(Object.assign({},n),{children:t}):Object.assign({},n);return!e.component&&(t||e.loadChildren)&&e.outlet&&e.outlet!==qt&&(e.component=ih),e}function yn(n){return n.outlet||qt}function qC(n,t){const e=n.filter(i=>yn(i)===t);return e.push(...n.filter(i=>yn(i)!==t)),e}const WC={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function rh(n,t,e){var i;if(""===t.path)return"full"===t.pathMatch&&(n.hasChildren()||e.length>0)?Object.assign({},WC):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const s=(t.matcher||kc)(e,n,t);if(!s)return Object.assign({},WC);const l={};xn(s.posParams,(p,_)=>{l[_]=p.path});const d=s.consumed.length>0?Object.assign(Object.assign({},l),s.consumed[s.consumed.length-1].parameters):l;return{matched:!0,consumedSegments:s.consumed,remainingSegments:e.slice(s.consumed.length),parameters:d,positionalParamSegments:null!==(i=s.posParams)&&void 0!==i?i:{}}}function op(n,t,e,i,r="corrected"){if(e.length>0&&function hT(n,t,e){return e.some(i=>Ag(n,t,i)&&yn(i)!==qt)}(n,e,i)){const l=new ve(t,function dT(n,t,e,i){const r={};r[qt]=i,i._sourceSegment=n,i._segmentIndexShift=t.length;for(const s of e)if(""===s.path&&yn(s)!==qt){const l=new ve([],{});l._sourceSegment=n,l._segmentIndexShift=t.length,r[yn(s)]=l}return r}(n,t,i,new ve(e,n.children)));return l._sourceSegment=n,l._segmentIndexShift=t.length,{segmentGroup:l,slicedSegments:[]}}if(0===e.length&&function fT(n,t,e){return e.some(i=>Ag(n,t,i))}(n,e,i)){const l=new ve(n.segments,function uT(n,t,e,i,r,s){const l={};for(const d of i)if(Ag(n,e,d)&&!r[yn(d)]){const p=new ve([],{});p._sourceSegment=n,p._segmentIndexShift="legacy"===s?n.segments.length:t.length,l[yn(d)]=p}return Object.assign(Object.assign({},r),l)}(n,t,e,i,n.children,r));return l._sourceSegment=n,l._segmentIndexShift=t.length,{segmentGroup:l,slicedSegments:e}}const s=new ve(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:e}}function Ag(n,t,e){return(!(n.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function pT(n,t,e,i){return!!(yn(n)===i||i!==qt&&Ag(t,e,n))&&("**"===n.path||rh(t,n,e).matched)}function mT(n,t,e){return 0===t.length&&!n.children[e]}class Bc{constructor(t){this.segmentGroup=t||null}}class $r{constructor(t){this.urlTree=t}}function ku(n){return no(new Bc(n))}function fy(n){return no(new $r(n))}class py{constructor(t,e,i,r,s){this.configLoader=e,this.urlSerializer=i,this.urlTree=r,this.config=s,this.allowRedirects=!0,this.ngModule=t.get(c.h0i)}apply(){const t=op(this.urlTree.root,[],[],this.config).segmentGroup,e=new ve(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,qt).pipe((0,ht.U)(s=>this.createUrlTree(my(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(As(s=>{if(s instanceof $r)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof Bc?this.noMatchError(s):s}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,qt).pipe((0,ht.U)(r=>this.createUrlTree(my(r),t.queryParams,t.fragment))).pipe(As(r=>{throw r instanceof Bc?this.noMatchError(r):r}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,i){const r=t.segments.length>0?new ve([],{[qt]:t}):t;return new he(r,e,i)}expandSegmentGroup(t,e,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(t,e,i).pipe((0,ht.U)(s=>new ve([],s))):this.expandSegment(t,i,e,i.segments,r,!0)}expandChildren(t,e,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return(0,Nn.D)(r).pipe(Ul(s=>{const l=i.children[s],d=qC(e,s);return this.expandSegmentGroup(t,d,l,s).pipe((0,ht.U)(p=>({segment:p,outlet:s})))}),jr((s,l)=>(s[l.outlet]=l.segment,s),{}),function iy(n,t){const e=arguments.length>=2;return i=>i.pipe(n?Dn((r,s)=>n(r,s,i)):Ts.y,ia(1),e?bg(t):li(()=>new $a))}())}expandSegment(t,e,i,r,s,l){return(0,Nn.D)(i).pipe(Ul(d=>this.expandSegmentAgainstRoute(t,e,i,d,r,s,l).pipe(As(_=>{if(_ instanceof Bc)return Ye(null);throw _}))),Wa(d=>!!d),As((d,p)=>{if(d instanceof $a||"EmptyError"===d.name)return mT(e,r,s)?Ye(new ve([],{})):ku(e);throw d}))}expandSegmentAgainstRoute(t,e,i,r,s,l,d){return pT(r,e,s,l)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,s,l):d&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,i,r,s,l):ku(e):ku(e)}expandSegmentAgainstRouteUsingRedirect(t,e,i,r,s,l){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,i,r,l):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,r,s,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,i,r){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?fy(s):this.lineralizeSegments(i,s).pipe((0,Xn.z)(l=>{const d=new ve(l,{});return this.expandSegment(t,d,e,l,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,r,s,l){const{matched:d,consumedSegments:p,remainingSegments:_,positionalParamSegments:b}=rh(e,r,s);if(!d)return ku(e);const D=this.applyRedirectCommands(p,r.redirectTo,b);return r.redirectTo.startsWith("/")?fy(D):this.lineralizeSegments(r,D).pipe((0,Xn.z)(I=>this.expandSegment(t,e,i,I.concat(_),l,!1)))}matchSegmentAgainstRoute(t,e,i,r,s){if("**"===i.path)return i.loadChildren?(i._loadedConfig?Ye(i._loadedConfig):this.configLoader.load(t.injector,i)).pipe((0,ht.U)(D=>(i._loadedConfig=D,new ve(r,{})))):Ye(new ve(r,{}));const{matched:l,consumedSegments:d,remainingSegments:p}=rh(e,i,r);return l?this.getChildConfig(t,i,r).pipe((0,Xn.z)(b=>{const D=b.module,I=b.routes,{segmentGroup:P,slicedSegments:U}=op(e,d,p,I),Q=new ve(P.segments,P.children);if(0===U.length&&Q.hasChildren())return this.expandChildren(D,I,Q).pipe((0,ht.U)(at=>new ve(d,at)));if(0===I.length&&0===U.length)return Ye(new ve(d,{}));const le=yn(i)===s;return this.expandSegment(D,Q,I,U,le?qt:s,!0).pipe((0,ht.U)(rt=>new ve(d.concat(rt.segments),rt.children)))})):ku(e)}getChildConfig(t,e,i){return e.children?Ye(new ke(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Ye(e._loadedConfig):this.runCanLoadGuards(t.injector,e,i).pipe((0,Xn.z)(r=>r?this.configLoader.load(t.injector,e).pipe((0,ht.U)(s=>(e._loadedConfig=s,s))):function qr(n){return no(sa(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(e))):Ye(new ke([],t))}runCanLoadGuards(t,e,i){const r=e.canLoad;return r&&0!==r.length?Ye(r.map(l=>{const d=t.get(l);let p;if(function Wn(n){return n&&lt(n.canLoad)}(d))p=d.canLoad(e,i);else{if(!lt(d))throw new Error("Invalid CanLoad guard");p=d(e,i)}return kr(p)})).pipe(Ja(),(0,wi.b)(l=>{if(!Ft(l))return;const d=sa(`Redirecting to "${this.urlSerializer.serialize(l)}"`);throw d.url=l,d}),(0,ht.U)(l=>!0===l)):Ye(!0)}lineralizeSegments(t,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return Ye(i);if(r.numberOfChildren>1||!r.children[qt])return no(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t.redirectTo}'`));r=r.children[qt]}}applyRedirectCommands(t,e,i){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,i)}applyRedirectCreatreUrlTree(t,e,i,r){const s=this.createSegmentGroup(t,e.root,i,r);return new he(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const i={};return xn(t,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const d=r.substring(1);i[s]=e[d]}else i[s]=r}),i}createSegmentGroup(t,e,i,r){const s=this.createSegments(t,e.segments,i,r);let l={};return xn(e.children,(d,p)=>{l[p]=this.createSegmentGroup(t,d,i,r)}),new ve(s,l)}createSegments(t,e,i,r){return e.map(s=>s.path.startsWith(":")?this.findPosParam(t,s,r):this.findOrReturn(s,i))}findPosParam(t,e,i){const r=i[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let i=0;for(const r of e){if(r.path===t.path)return e.splice(i),r;i++}return t}}function my(n){const t={};for(const i of Object.keys(n.children)){const s=my(n.children[i]);(s.segments.length>0||s.hasChildren())&&(t[i]=s)}return function gT(n){if(1===n.numberOfChildren&&n.children[qt]){const t=n.children[qt];return new ve(n.segments.concat(t.segments),t.children)}return n}(new ve(n.segments,t))}class KC{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class lp{constructor(t,e){this.component=t,this.route=e}}function _T(n,t,e){const i=n._root;return Ru(i,t?t._root:null,e,[i.value])}function kg(n,t,e){const i=function vT(n){if(!n)return null;for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(t);return(i?i.module.injector:e).get(n)}function Ru(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=da(t);return n.children.forEach(l=>{(function yT(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,l=t?t.value:null,d=e?e.getContext(n.value.outlet):null;if(l&&s.routeConfig===l.routeConfig){const p=function bT(n,t,e){if("function"==typeof e)return e(n,t);switch(e){case"pathParamsChange":return!It(n.url,t.url);case"pathParamsOrQueryParamsChange":return!It(n.url,t.url)||!Ar(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!th(n,t)||!Ar(n.queryParams,t.queryParams);default:return!th(n,t)}}(l,s,s.routeConfig.runGuardsAndResolvers);p?r.canActivateChecks.push(new KC(i)):(s.data=l.data,s._resolvedData=l._resolvedData),Ru(n,t,s.component?d?d.children:null:e,i,r),p&&d&&d.outlet&&d.outlet.isActivated&&r.canDeactivateChecks.push(new lp(d.outlet.component,l))}else l&&Ou(t,d,r),r.canActivateChecks.push(new KC(i)),Ru(n,null,s.component?d?d.children:null:e,i,r)})(l,s[l.value.outlet],e,i.concat([l.value]),r),delete s[l.value.outlet]}),xn(s,(l,d)=>Ou(l,e.getContext(d),r)),r}function Ou(n,t,e){const i=da(n),r=n.value;xn(i,(s,l)=>{Ou(s,r.component?t?t.children.getContext(l):null:t,e)}),e.canDeactivateChecks.push(new lp(r.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,r))}class XC{}function JC(n){return new oi.y(t=>t.error(n))}class IT{constructor(t,e,i,r,s,l){this.rootComponentType=t,this.config=e,this.urlTree=i,this.url=r,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=l}recognize(){const t=op(this.urlTree.root,[],[],this.config.filter(l=>void 0===l.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,qt);if(null===e)return null;const i=new Fc([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},qt,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new ua(i,e),s=new Kf(this.url,r);return this.inheritParamsAndData(s._root),s}inheritParamsAndData(t){const e=t.value,i=ly(e,this.paramsInheritanceStrategy);e.params=Object.freeze(i.params),e.data=Object.freeze(i.data),t.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(t,e,i){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,i)}processChildren(t,e){const i=[];for(const s of Object.keys(e.children)){const l=e.children[s],d=qC(t,s),p=this.processSegmentGroup(d,l,s);if(null===p)return null;i.push(...p)}const r=eE(i);return function AT(n){n.sort((t,e)=>t.value.outlet===qt?-1:e.value.outlet===qt?1:t.value.outlet.localeCompare(e.value.outlet))}(r),r}processSegment(t,e,i,r){for(const s of t){const l=this.processSegmentAgainstRoute(s,e,i,r);if(null!==l)return l}return mT(e,i,r)?[]:null}processSegmentAgainstRoute(t,e,i,r){if(t.redirectTo||!pT(t,e,i,r))return null;let s,l=[],d=[];if("**"===t.path){const P=i.length>0?ks(i).parameters:{};s=new Fc(i,P,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,OT(t),yn(t),t.component,t,Pu(e),pa(e)+i.length,PT(t))}else{const P=rh(e,t,i);if(!P.matched)return null;l=P.consumedSegments,d=P.remainingSegments,s=new Fc(l,P.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,OT(t),yn(t),t.component,t,Pu(e),pa(e)+l.length,PT(t))}const p=function kT(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(t),{segmentGroup:_,slicedSegments:b}=op(e,l,d,p.filter(P=>void 0===P.redirectTo),this.relativeLinkResolution);if(0===b.length&&_.hasChildren()){const P=this.processChildren(p,_);return null===P?null:[new ua(s,P)]}if(0===p.length&&0===b.length)return[new ua(s,[])];const D=yn(t)===r,I=this.processSegment(p,_,b,D?qt:r);return null===I?null:[new ua(s,I)]}}function RT(n){const t=n.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function eE(n){const t=[],e=new Set;for(const i of n){if(!RT(i)){t.push(i);continue}const r=t.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),e.add(r)):t.push(i)}for(const i of e){const r=eE(i.children);t.push(new ua(i.value,r))}return t.filter(i=>!e.has(i))}function Pu(n){let t=n;for(;t._sourceSegment;)t=t._sourceSegment;return t}function pa(n){let t=n,e=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift?t._segmentIndexShift:0;return e-1}function OT(n){return n.data||{}}function PT(n){return n.resolve||{}}function Og(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Pg(n){return $n(t=>{const e=n(t);return e?(0,Nn.D)(e).pipe((0,ht.U)(()=>t)):Ye(t)})}class iE extends class nE{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const up=new c.OlP("ROUTES");class Ng{constructor(t,e,i,r){this.injector=t,this.compiler=e,this.onLoadStartListener=i,this.onLoadEndListener=r}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const r=this.loadModuleFactory(e.loadChildren).pipe((0,ht.U)(s=>{this.onLoadEndListener&&this.onLoadEndListener(e);const l=s.create(t);return new ke(Rc(l.injector.get(up,void 0,c.XFs.Self|c.XFs.Optional)).map(Au),l)}),As(s=>{throw e._loader$=void 0,s}));return e._loader$=new na(r,()=>new Tt.x).pipe(ta()),e._loader$}loadModuleFactory(t){return kr(t()).pipe((0,Xn.z)(e=>e instanceof c.YKP?Ye(e):(0,Nn.D)(this.compiler.compileModuleAsync(e))))}}class uN{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function sh(n){throw n}function _y(n,t,e){return t.parse("/")}function vy(n,t){return Ye(null)}const FT={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},yy={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ps=(()=>{class n{constructor(e,i,r,s,l,d,p){this.rootComponentType=e,this.urlSerializer=i,this.rootContexts=r,this.location=s,this.config=p,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Tt.x,this.errorHandler=sh,this.malformedUriErrorHandler=_y,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:vy,afterPreactivation:vy},this.urlHandlingStrategy=new uN,this.routeReuseStrategy=new iE,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=l.get(c.h0i),this.console=l.get(c.c2e);const D=l.get(c.R0b);this.isNgZoneEnabled=D instanceof c.R0b&&c.R0b.isInAngularZone(),this.resetConfig(p),this.currentUrlTree=function ry(){return new he(new ve([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Ng(l,d,I=>this.triggerEvent(new Gl(I)),I=>this.triggerEvent(new zl(I))),this.routerState=ql(this.currentUrlTree,this.rootComponentType),this.transitions=new Oi({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var e;return null===(e=this.location.getState())||void 0===e?void 0:e.\u0275routerPageId}setupNavigations(e){const i=this.events;return e.pipe(Dn(r=>0!==r.id),(0,ht.U)(r=>Object.assign(Object.assign({},r),{extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),$n(r=>{let s=!1,l=!1;return Ye(r).pipe((0,wi.b)(d=>{this.currentNavigation={id:d.id,initialUrl:d.currentRawUrl,extractedUrl:d.extractedUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),$n(d=>{const p=this.browserUrlTree.toString(),_=!this.navigated||d.extractedUrl.toString()!==p||p!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||_)&&this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return sE(d.source)&&(this.browserUrlTree=d.extractedUrl),Ye(d).pipe($n(D=>{const I=this.transitions.getValue();return i.next(new ra(D.id,this.serializeUrl(D.extractedUrl),D.source,D.restoredState)),I!==this.transitions.getValue()?Mo.E:Promise.resolve(D)}),function ZC(n,t,e,i){return $n(r=>function ap(n,t,e,i,r){return new py(n,t,e,i,r).apply()}(n,t,e,r.extractedUrl,i).pipe((0,ht.U)(s=>Object.assign(Object.assign({},r),{urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,wi.b)(D=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:D.urlAfterRedirects})}),function tE(n,t,e,i,r){return(0,Xn.z)(s=>function TT(n,t,e,i,r="emptyOnly",s="legacy"){try{const l=new IT(n,t,e,i,r,s).recognize();return null===l?JC(new XC):Ye(l)}catch(l){return JC(l)}}(n,t,s.urlAfterRedirects,e(s.urlAfterRedirects),i,r).pipe((0,ht.U)(l=>Object.assign(Object.assign({},s),{targetSnapshot:l}))))}(this.rootComponentType,this.config,D=>this.serializeUrl(D),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,wi.b)(D=>{if("eager"===this.urlUpdateStrategy){if(!D.extras.skipLocationChange){const P=this.urlHandlingStrategy.merge(D.urlAfterRedirects,D.rawUrl);this.setBrowserUrl(P,D)}this.browserUrlTree=D.urlAfterRedirects}const I=new jl(D.id,this.serializeUrl(D.extractedUrl),this.serializeUrl(D.urlAfterRedirects),D.targetSnapshot);i.next(I)}));if(_&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:I,extractedUrl:P,source:U,restoredState:Q,extras:le}=d,Ze=new ra(I,this.serializeUrl(P),U,Q);i.next(Ze);const rt=ql(P,this.rootComponentType).snapshot;return Ye(Object.assign(Object.assign({},d),{targetSnapshot:rt,urlAfterRedirects:P,extras:Object.assign(Object.assign({},le),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=d.rawUrl,d.resolve(null),Mo.E}),Pg(d=>{const{targetSnapshot:p,id:_,extractedUrl:b,rawUrl:D,extras:{skipLocationChange:I,replaceUrl:P}}=d;return this.hooks.beforePreactivation(p,{navigationId:_,appliedUrlTree:b,rawUrlTree:D,skipLocationChange:!!I,replaceUrl:!!P})}),(0,wi.b)(d=>{const p=new Gf(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);this.triggerEvent(p)}),(0,ht.U)(d=>Object.assign(Object.assign({},d),{guards:_T(d.targetSnapshot,d.currentSnapshot,this.rootContexts)})),function wT(n,t){return(0,Xn.z)(e=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:l}}=e;return 0===l.length&&0===s.length?Ye(Object.assign(Object.assign({},e),{guardsResult:!0})):function CT(n,t,e,i){return(0,Nn.D)(n).pipe((0,Xn.z)(r=>function MT(n,t,e,i,r){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return s&&0!==s.length?Ye(s.map(d=>{const p=kg(d,t,r);let _;if(function ip(n){return n&&lt(n.canDeactivate)}(p))_=kr(p.canDeactivate(n,t,e,i));else{if(!lt(p))throw new Error("Invalid CanDeactivate guard");_=kr(p(n,t,e,i))}return _.pipe(Wa())})).pipe(Ja()):Ye(!0)}(r.component,r.route,e,t,i)),Wa(r=>!0!==r,!0))}(l,i,r,n).pipe((0,Xn.z)(d=>d&&function xt(n){return"boolean"==typeof n}(d)?function Rg(n,t,e,i){return(0,Nn.D)(t).pipe(Ul(r=>ea(function DT(n,t){return null!==n&&t&&t(new io(n)),Ye(!0)}(r.route.parent,i),function ET(n,t){return null!==n&&t&&t(new ro(n)),Ye(!0)}(r.route,i),function ST(n,t,e){const i=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(l=>function QC(n){const t=n.routeConfig?n.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:n,guards:t}:null}(l)).filter(l=>null!==l).map(l=>So(()=>Ye(l.guards.map(p=>{const _=kg(p,l.node,e);let b;if(function Ro(n){return n&&lt(n.canActivateChild)}(_))b=kr(_.canActivateChild(i,n));else{if(!lt(_))throw new Error("Invalid CanActivateChild guard");b=kr(_(i,n))}return b.pipe(Wa())})).pipe(Ja())));return Ye(s).pipe(Ja())}(n,r.path,e),function xT(n,t,e){const i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||0===i.length)return Ye(!0);const r=i.map(s=>So(()=>{const l=kg(s,t,e);let d;if(function Os(n){return n&&lt(n.canActivate)}(l))d=kr(l.canActivate(t,n));else{if(!lt(l))throw new Error("Invalid CanActivate guard");d=kr(l(t,n))}return d.pipe(Wa())}));return Ye(r).pipe(Ja())}(n,r.route,e))),Wa(r=>!0!==r,!0))}(i,s,n,t):Ye(d)),(0,ht.U)(d=>Object.assign(Object.assign({},e),{guardsResult:d})))})}(this.ngModule.injector,d=>this.triggerEvent(d)),(0,wi.b)(d=>{if(Ft(d.guardsResult)){const _=sa(`Redirecting to "${this.serializeUrl(d.guardsResult)}"`);throw _.url=d.guardsResult,_}const p=new zf(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.triggerEvent(p)}),Dn(d=>!!d.guardsResult||(this.restoreHistory(d),this.cancelNavigationTransition(d,""),!1)),Pg(d=>{if(d.guards.canActivateChecks.length)return Ye(d).pipe((0,wi.b)(p=>{const _=new pr(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(_)}),$n(p=>{let _=!1;return Ye(p).pipe(function cN(n,t){return(0,Xn.z)(e=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return Ye(e);let s=0;return(0,Nn.D)(r).pipe(Ul(l=>function el(n,t,e,i){return function gy(n,t,e,i){const r=Og(n);if(0===r.length)return Ye({});const s={};return(0,Nn.D)(r).pipe((0,Xn.z)(l=>function NT(n,t,e,i){const r=kg(n,t,i);return kr(r.resolve?r.resolve(t,e):r(t,e))}(n[l],t,e,i).pipe((0,wi.b)(d=>{s[l]=d}))),ia(1),(0,Xn.z)(()=>Og(s).length===r.length?Ye(s):Mo.E))}(n._resolve,n,t,i).pipe((0,ht.U)(s=>(n._resolvedData=s,n.data=Object.assign(Object.assign({},n.data),ly(n,e).resolve),null)))}(l.route,i,n,t)),(0,wi.b)(()=>s++),ia(1),(0,Xn.z)(l=>s===r.length?Ye(e):Mo.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,wi.b)({next:()=>_=!0,complete:()=>{_||(this.restoreHistory(p),this.cancelNavigationTransition(p,"At least one route resolver didn't emit any value."))}}))}),(0,wi.b)(p=>{const _=new mr(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(_)}))}),Pg(d=>{const{targetSnapshot:p,id:_,extractedUrl:b,rawUrl:D,extras:{skipLocationChange:I,replaceUrl:P}}=d;return this.hooks.afterPreactivation(p,{navigationId:_,appliedUrlTree:b,rawUrlTree:D,skipLocationChange:!!I,replaceUrl:!!P})}),(0,ht.U)(d=>{const p=function cy(n,t,e){const i=Mu(n,t._root,e?e._root:void 0);return new Jd(i,t)}(this.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return Object.assign(Object.assign({},d),{targetRouterState:p})}),(0,wi.b)(d=>{this.currentUrlTree=d.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl),this.routerState=d.targetRouterState,"deferred"===this.urlUpdateStrategy&&(d.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,d),this.browserUrlTree=d.urlAfterRedirects)}),((n,t,e)=>(0,ht.U)(i=>(new B(t,i.targetRouterState,i.currentRouterState,e).activate(n),i)))(this.rootContexts,this.routeReuseStrategy,d=>this.triggerEvent(d)),(0,wi.b)({next(){s=!0},complete(){s=!0}}),Du(()=>{var d;s||l||this.cancelNavigationTransition(r,`Navigation ID ${r.id} is not equal to the current navigation id ${this.navigationId}`),(null===(d=this.currentNavigation)||void 0===d?void 0:d.id)===r.id&&(this.currentNavigation=null)}),As(d=>{if(l=!0,function wg(n){return n&&n[Ac]}(d)){const p=Ft(d.url);p||(this.navigated=!0,this.restoreHistory(r,!0));const _=new fi(r.id,this.serializeUrl(r.extractedUrl),d.message);i.next(_),p?setTimeout(()=>{const b=this.urlHandlingStrategy.merge(d.url,this.rawUrlTree),D={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||sE(r.source)};this.scheduleNavigation(b,"imperative",null,D,{resolve:r.resolve,reject:r.reject,promise:r.promise})},0):r.resolve(!1)}else{this.restoreHistory(r,!0);const p=new Hl(r.id,this.serializeUrl(r.extractedUrl),d);i.next(p);try{r.resolve(this.errorHandler(d))}catch(_){r.reject(_)}}return Mo.E}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const i="popstate"===e.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{var r;const s={replaceUrl:!0},l=(null===(r=e.state)||void 0===r?void 0:r.navigationId)?e.state:null;if(l){const p=Object.assign({},l);delete p.navigationId,delete p.\u0275routerPageId,0!==Object.keys(p).length&&(s.state=p)}const d=this.parseUrl(e.url);this.scheduleNavigation(d,i,l,s)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){Wl(e),this.config=e.map(Au),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,i={}){const{relativeTo:r,queryParams:s,fragment:l,queryParamsHandling:d,preserveFragment:p}=i,_=r||this.routerState.root,b=p?this.currentUrlTree.fragment:l;let D=null;switch(d){case"merge":D=Object.assign(Object.assign({},this.currentUrlTree.queryParams),s);break;case"preserve":D=this.currentUrlTree.queryParams;break;default:D=s||null}return null!==D&&(D=this.removeEmptyProps(D)),function oo(n,t,e,i,r){if(0===e.length)return Xf(t.root,t.root,t.root,i,r);const s=function ep(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new xg(!0,0,n);let t=0,e=!1;const i=n.reduce((r,s,l)=>{if("object"==typeof s&&null!=s){if(s.outlets){const d={};return xn(s.outlets,(p,_)=>{d[_]="string"==typeof p?p.split("/"):p}),[...r,{outlets:d}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===l?(s.split("/").forEach((d,p)=>{0==p&&"."===d||(0==p&&""===d?e=!0:".."===d?t++:""!=d&&r.push(d))}),r):[...r,s]},[]);return new xg(e,t,i)}(e);if(s.toRoot())return Xf(t.root,t.root,new ve([],{}),i,r);const l=function np(n,t,e){if(n.isAbsolute)return new tp(t.root,!0,0);if(-1===e.snapshot._lastPathIndex){const s=e.snapshot._urlSegment;return new tp(s,s===t.root,0)}const i=fa(n.commands[0])?0:1;return function Sg(n,t,e){let i=n,r=t,s=e;for(;s>r;){if(s-=r,i=i.parent,!i)throw new Error("Invalid number of '../'");r=i.segments.length}return new tp(i,!1,r-s)}(e.snapshot._urlSegment,e.snapshot._lastPathIndex+i,n.numberOfDoubleDots)}(s,t,n),d=l.processChildren?nh(l.segmentGroup,l.index,s.commands):Mg(l.segmentGroup,l.index,s.commands);return Xf(t.root,l.segmentGroup,d,i,r)}(_,this.currentUrlTree,e,D,null!=b?b:null)}navigateByUrl(e,i={skipLocationChange:!1}){const r=Ft(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,i)}navigate(e,i={skipLocationChange:!1}){return function LT(n){for(let t=0;t<n.length;t++){const e=n[t];if(null==e)throw new Error(`The requested path contains ${e} segment at index ${t}`)}}(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let i;try{i=this.urlSerializer.parse(e)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,e)}return i}isActive(e,i){let r;if(r=!0===i?Object.assign({},FT):!1===i?Object.assign({},yy):i,Ft(e))return oa(this.currentUrlTree,e,r);const s=this.parseUrl(e);return oa(this.currentUrlTree,s,r)}removeEmptyProps(e){return Object.keys(e).reduce((i,r)=>{const s=e[r];return null!=s&&(i[r]=s),i},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new Ya(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,i,r,s,l){var d,p;if(this.disposed)return Promise.resolve(!1);let _,b,D;l?(_=l.resolve,b=l.reject,D=l.promise):D=new Promise((U,Q)=>{_=U,b=Q});const I=++this.navigationId;let P;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),P=r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?null!==(d=this.browserPageId)&&void 0!==d?d:0:(null!==(p=this.browserPageId)&&void 0!==p?p:0)+1):P=0,this.setTransition({id:I,targetPageId:P,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:s,resolve:_,reject:b,promise:D,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),D.catch(U=>Promise.reject(U))}setBrowserUrl(e,i){const r=this.urlSerializer.serialize(e),s=Object.assign(Object.assign({},i.extras.state),this.generateNgRouterState(i.id,i.targetPageId));this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(e,i=!1){var r,s;if("computed"===this.canceledNavigationResolution){const l=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(r=this.currentNavigation)||void 0===r?void 0:r.finalUrl)||0===l?this.currentUrlTree===(null===(s=this.currentNavigation)||void 0===s?void 0:s.finalUrl)&&0===l&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(l)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,i){const r=new fi(e.id,this.serializeUrl(e.extractedUrl),i);this.triggerEvent(r),e.resolve(!1)}generateNgRouterState(e,i){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}}return n.\u0275fac=function(e){c.$Z()},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function sE(n){return"imperative"!==n}class Ey{}class aE{preload(t,e){return Ye(null)}}let lE=(()=>{class n{constructor(e,i,r,s){this.router=e,this.injector=r,this.preloadingStrategy=s,this.loader=new Ng(r,i,p=>e.triggerEvent(new Gl(p)),p=>e.triggerEvent(new zl(p)))}setUpPreloading(){this.subscription=this.router.events.pipe(Dn(e=>e instanceof Ya),Ul(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(c.h0i);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){const r=[];for(const s of i)if(s.loadChildren&&!s.canLoad&&s._loadedConfig){const l=s._loadedConfig;r.push(this.processRoutes(l.module,l.routes))}else s.loadChildren&&!s.canLoad?r.push(this.preloadConfig(e,s)):s.children&&r.push(this.processRoutes(e,s.children));return(0,Nn.D)(r).pipe((0,xo.J)(),(0,ht.U)(s=>{}))}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>(i._loadedConfig?Ye(i._loadedConfig):this.loader.load(e.injector,i)).pipe((0,Xn.z)(s=>(i._loadedConfig=s,this.processRoutes(s.module,s.routes)))))}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(Ps),c.LFG(c.Sil),c.LFG(c.zs3),c.LFG(Ey))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Fg=(()=>{class n{constructor(e,i,r={}){this.router=e,this.viewportScroller=i,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof ra?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Ya&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof xu&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.router.triggerEvent(new xu(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(e){c.$Z()},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const ao=new c.OlP("ROUTER_CONFIGURATION"),xy=new c.OlP("ROUTER_FORROOT_GUARD"),cE=[Pe,{provide:_t,useClass:zi},{provide:Ps,useFactory:function My(n,t,e,i,r,s,l={},d,p){const _=new Ps(null,n,t,e,i,r,Rc(s));return d&&(_.urlHandlingStrategy=d),p&&(_.routeReuseStrategy=p),function hE(n,t){n.errorHandler&&(t.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(t.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(t.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(t.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(t.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(t.canceledNavigationResolution=n.canceledNavigationResolution)}(l,_),l.enableTracing&&_.events.subscribe(b=>{var D,I;null===(D=console.group)||void 0===D||D.call(console,`Router Event: ${b.constructor.name}`),console.log(b.toString()),console.log(b),null===(I=console.groupEnd)||void 0===I||I.call(console)}),_},deps:[_t,Lc,Pe,c.zs3,c.Sil,up,ao,[class rE{},new c.FiY],[class cp{},new c.FiY]]},Lc,{provide:Pc,useFactory:function Lg(n){return n.routerState.root},deps:[Ps]},lE,aE,class Dy{preload(t,e){return e().pipe(As(()=>Ye(null)))}},{provide:ao,useValue:{enableTracing:!1}}];function VT(){return new c.PXZ("Router",Ps)}let dp=(()=>{class n{constructor(e,i){}static forRoot(e,i){return{ngModule:n,providers:[cE,Sy(e),{provide:xy,useFactory:dE,deps:[[Ps,new c.FiY,new c.tp0]]},{provide:ao,useValue:i||{}},{provide:we,useFactory:uE,deps:[pe,[new c.tBr(Ke),new c.FiY],ao]},{provide:Fg,useFactory:UT,deps:[Ps,yc,ao]},{provide:Ey,useExisting:i&&i.preloadingStrategy?i.preloadingStrategy:aE},{provide:c.PXZ,multi:!0,useFactory:VT},[ah,{provide:c.ip1,multi:!0,useFactory:fE,deps:[ah]},{provide:Iy,useFactory:Ty,deps:[ah]},{provide:c.tb,multi:!0,useExisting:Iy}]]}}static forChild(e){return{ngModule:n,providers:[Sy(e)]}}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(xy,8),c.LFG(Ps,8))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();function UT(n,t,e){return e.scrollOffset&&t.setOffset(e.scrollOffset),new Fg(n,t,e)}function uE(n,t,e={}){return e.useHash?new Le(n,t):new We(n,t)}function dE(n){return"guarded"}function Sy(n){return[{provide:c.deG,multi:!0,useValue:n},{provide:up,multi:!0,useValue:n}]}let ah=(()=>{class n{constructor(e){this.injector=e,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Tt.x}appInitializer(){return this.injector.get(W,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let i=null;const r=new Promise(d=>i=d),s=this.injector.get(Ps),l=this.injector.get(ao);return"disabled"===l.initialNavigation?(s.setUpLocationChangeListener(),i(!0)):"enabled"===l.initialNavigation||"enabledBlocking"===l.initialNavigation?(s.hooks.afterPreactivation=()=>this.initNavigation?Ye(null):(this.initNavigation=!0,i(!0),this.resultOfPreactivationDone),s.initialNavigation()):i(!0),r})}bootstrapListener(e){const i=this.injector.get(ao),r=this.injector.get(lE),s=this.injector.get(Fg),l=this.injector.get(Ps),d=this.injector.get(c.z2F);e===d.components[0]&&(("enabledNonBlocking"===i.initialNavigation||void 0===i.initialNavigation)&&l.initialNavigation(),r.setUpPreloading(),s.init(),l.resetRootComponentType(d.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(c.zs3))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function fE(n){return n.appInitializer.bind(n)}function Ty(n){return n.bootstrapListener.bind(n)}const Iy=new c.OlP("Router Initializer");let HT=(()=>{class n{constructor(){this.title="merchants-ball-beers"}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,consts:[[1,"outLet"]],template:function(e,i){1&e&&c._UZ(0,"router-outlet",0)},directives:[Iu],styles:[""]}),n})();var Ki=L(2011),Nu=L(6451),Vg=L(5363),pE=L(6063);class ky extends Tt.x{constructor(t=1/0,e=1/0,i=pE.l){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){const{isStopped:e,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:l}=this;e||(i.push(t),!r&&i.push(s.now()+l)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(t),{_infiniteTimeWindow:i,_buffer:r}=this,s=r.slice();for(let l=0;l<s.length&&!t.closed;l+=i?1:2)t.next(s[l]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){const{_bufferSize:t,_timestampProvider:e,_buffer:i,_infiniteTimeWindow:r}=this,s=(r?1:2)*t;if(t<1/0&&s<i.length&&i.splice(0,i.length-s),!r){const l=e.now();let d=0;for(let p=1;p<i.length&&i[p]<=l;p+=2)d=p;d&&i.splice(0,d+1)}}}var Ug=L(3099);function jT(n,t,e){let i,r=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:t=1/0,refCount:r=!1,scheduler:e}=n):i=null!=n?n:1/0,(0,Ug.B)({connector:()=>new ky(i,t,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function Ry(n,t){return(0,Gi.m)(t)?$n(()=>n,t):$n(()=>n)}var Oy=L(9468),Sn=L(5813);L(5867);var be=L(5861),Wr=L(9681),ga=L(4859),F=L(2090),sr=L(1877);const jg=new Map,vE={activated:!1,tokenObservers:[]},Fy={initialized:!1,enabled:!1};function Rr(n){return jg.get(n)||vE}function Oo(n,t){jg.set(n,t)}function Ly(){return Fy}class WT{constructor(t,e,i,r,s){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){var e=this;return(0,be.Z)(function*(){e.stop();try{e.pending=new F.BH,yield function YT(n){return new Promise(t=>{setTimeout(t,n)})}(e.getNextRun(t)),e.pending.resolve(),yield e.pending.promise,e.pending=new F.BH,yield e.operation(),e.pending.resolve(),yield e.pending.promise,e.process(!0).catch(()=>{})}catch(i){e.retryPolicy(i)?e.process(!1).catch(()=>{}):e.stop()}})()}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}}const hs=new F.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function KT(n){if(!Rr(n).activated)throw hs.create("use-before-activation",{appName:n.name})}function $g(n,t){return qg.apply(this,arguments)}function qg(){return(qg=(0,be.Z)(function*({url:n,body:t},e){var i,r;const s={"Content-Type":"application/json"},l=e.getImmediate({optional:!0});if(l){const P=yield l.getHeartbeatsHeader();P&&(s["X-Firebase-Client"]=P)}const d={method:"POST",body:JSON.stringify(t),headers:s};let p,_;try{p=yield fetch(n,d)}catch(P){throw hs.create("fetch-network-error",{originalErrorMessage:null===(i=P)||void 0===i?void 0:i.message})}if(200!==p.status)throw hs.create("fetch-status-error",{httpStatus:p.status});try{_=yield p.json()}catch(P){throw hs.create("fetch-parse-error",{originalErrorMessage:null===(r=P)||void 0===r?void 0:r.message})}const b=_.ttl.match(/^([\d.]+)(s)$/);if(!b||!b[2]||isNaN(Number(b[1])))throw hs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${_.ttl}`});const D=1e3*Number(b[1]),I=Date.now();return{token:_.token,expireTimeMillis:I+D,issuedAtTimeMillis:I}})).apply(this,arguments)}function vN(n,t){const{projectId:e,appId:i,apiKey:r}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${e}/apps/${i}:exchangeDebugToken?key=${r}`,body:{debug_token:t}}}const Wg="firebase-app-check-store";let Gy=null;function JT(){return Gy||(Gy=new Promise((n,t)=>{var e;try{const i=indexedDB.open("firebase-app-check-database",1);i.onsuccess=r=>{n(r.target.result)},i.onerror=r=>{var s;t(hs.create("storage-open",{originalErrorMessage:null===(s=r.target.error)||void 0===s?void 0:s.message}))},i.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Wg,{keyPath:"compositeKey"})}}catch(i){t(hs.create("storage-open",{originalErrorMessage:null===(e=i)||void 0===e?void 0:e.message}))}}),Gy)}function zy(){return(zy=(0,be.Z)(function*(n,t){const i=(yield JT()).transaction(Wg,"readwrite"),s=i.objectStore(Wg).put({compositeKey:n,value:t});return new Promise((l,d)=>{s.onsuccess=p=>{l()},i.onerror=p=>{var _;d(hs.create("storage-set",{originalErrorMessage:null===(_=p.target.error)||void 0===_?void 0:_.message}))}})})).apply(this,arguments)}const Fu=new sr.Yd("@firebase/app-check");function Wy(n,t){return(0,F.hl)()?function CN(n,t){return function Yg(n,t){return zy.apply(this,arguments)}(function qy(n){return`${n.options.appId}-${n.name}`}(n),t)}(n,t).catch(e=>{Fu.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}function yE(){return Ly().enabled}function Yy(){return Zy.apply(this,arguments)}function Zy(){return(Zy=(0,be.Z)(function*(){const n=Ly();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const mp={error:"UNKNOWN_ERROR"};function ch(n){return F.US.encodeString(JSON.stringify(n),!1)}function uh(n){return Uc.apply(this,arguments)}function Uc(){return(Uc=(0,be.Z)(function*(n,t=!1){const e=n.app;KT(e);const i=Rr(e);let s,r=i.token;if(!r){const p=yield i.cachedTokenPromise;p&&dh(p)&&(r=p)}if(!t&&r&&dh(r))return{token:r.token};let d,l=!1;if(yE()){i.exchangeTokenPromise||(i.exchangeTokenPromise=$g(vN(e,yield Yy()),n.heartbeatServiceProvider).then(_=>(i.exchangeTokenPromise=void 0,_)),l=!0);const p=yield i.exchangeTokenPromise;return yield Wy(e,p),Oo(e,Object.assign(Object.assign({},i),{token:p})),{token:p.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().then(p=>(i.exchangeTokenPromise=void 0,p)),l=!0),r=yield i.exchangeTokenPromise}catch(p){"appCheck/throttled"===p.code?Fu.warn(p.message):Fu.error(p),s=p}return r?(d={token:r.token},Oo(e,Object.assign(Object.assign({},i),{token:r})),yield Wy(e,r)):d=Qy(s),l&&Ky(e,d),d})).apply(this,arguments)}function Hc(n,t){const e=Rr(n),i=e.tokenObservers.filter(r=>r.next!==t);0===i.length&&e.tokenRefresher&&e.tokenRefresher.isRunning()&&e.tokenRefresher.stop(),Oo(n,Object.assign(Object.assign({},e),{tokenObservers:i}))}function bE(n){const{app:t}=n,e=Rr(t);let i=e.tokenRefresher;i||(i=function wE(n){const{app:t}=n;return new WT((0,be.Z)(function*(){let i;if(i=Rr(t).token?yield uh(n,!0):yield uh(n),i.error)throw i.error}),()=>!0,()=>{const e=Rr(t);if(e.token){let i=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return i=Math.min(i,e.token.expireTimeMillis-3e5),Math.max(0,i-Date.now())}return 0},3e4,96e4)}(n),Oo(t,Object.assign(Object.assign({},e),{tokenRefresher:i}))),!i.isRunning()&&e.isTokenAutoRefreshEnabled&&i.start()}function Ky(n,t){const e=Rr(n).tokenObservers;for(const i of e)try{"EXTERNAL"===i.type&&null!=t.error?i.error(t.error):i.next(t)}catch(r){}}function dh(n){return n.expireTimeMillis-Date.now()>0}function Qy(n){return{token:ch(mp),error:n}}class CE{constructor(t,e){this.app=t,this.heartbeatServiceProvider=e}_delete(){const{tokenObservers:t}=Rr(this.app);for(const e of t)Hc(this.app,e.next);return Promise.resolve()}}const IE="app-check-internal";!function AE(){(0,Wr._registerComponent)(new ga.wA("app-check",n=>function Zg(n,t){return new CE(n,t)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,t,e)=>{n.getProvider(IE).initialize()})),(0,Wr._registerComponent)(new ga.wA(IE,n=>function iI(n){return{getToken:t=>uh(n,t),addTokenListener:t=>function Lu(n,t,e,i){const{app:r}=n,s=Rr(r),l={next:e,error:i,type:t};if(Oo(r,Object.assign(Object.assign({},s),{tokenObservers:[...s.tokenObservers,l]})),s.token&&dh(s.token)){const d=s.token;Promise.resolve().then(()=>{e({token:d.token}),bE(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>bE(n))}(n,"INTERNAL",t),removeTokenListener:t=>Hc(n.app,t)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Wr.registerVersion)("@firebase/app-check","0.5.10")}();class Fs{constructor(){return(0,Sn.vb)("app-check")}}"undefined"!=typeof window&&window;var hh=L(127);const ob=new c.OlP("angularfire2.auth.use-emulator"),ab=new c.OlP("angularfire2.auth.settings"),gp=new c.OlP("angularfire2.auth.tenant-id"),FE=new c.OlP("angularfire2.auth.langugage-code"),lb=new c.OlP("angularfire2.auth.use-device-language"),Xg=new c.OlP("angularfire.auth.persistence"),Jg=(n,t,e,i,r,s,l,d)=>(0,Ki.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const p=t.runOutsideAngular(()=>n.auth());if(e&&p.useEmulator(...e),i&&(p.tenantId=i),p.languageCode=r,s&&p.useDeviceLanguage(),l)for(const[_,b]of Object.entries(l))p.settings[_]=b;return d&&p.setPersistence(d),p},[e,i,r,s,l,d]);let fh=(()=>{class n{constructor(e,i,r,s,l,d,p,_,b,D,I,P){const U=new Tt.x,Q=Ye(void 0).pipe((0,Vg.Q)(l.outsideAngular),$n(()=>s.runOutsideAngular(()=>Promise.resolve().then(L.bind(L,5881)))),(0,ht.U)(()=>(0,Ki.on)(e,s,i)),(0,ht.U)(le=>Jg(le,s,d,_,b,D,p,I)),jT({bufferSize:1,refCount:!1}));if(ir(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Ye(null);else{Q.pipe(Wa()).subscribe();const Ze=Q.pipe($n(et=>et.getRedirectResult().then(Ot=>Ot,()=>null)),Sn.iC,jT({bufferSize:1,refCount:!1})),rt=Q.pipe($n(et=>new oi.y(Ot=>({unsubscribe:s.runOutsideAngular(()=>et.onAuthStateChanged(Lt=>Ot.next(Lt),Lt=>Ot.error(Lt),()=>Ot.complete()))})))),at=Q.pipe($n(et=>new oi.y(Ot=>({unsubscribe:s.runOutsideAngular(()=>et.onIdTokenChanged(Lt=>Ot.next(Lt),Lt=>Ot.error(Lt),()=>Ot.complete()))}))));this.authState=Ze.pipe(Ry(rt),(0,Oy.R)(l.outsideAngular),(0,Vg.Q)(l.insideAngular)),this.user=Ze.pipe(Ry(at),(0,Oy.R)(l.outsideAngular),(0,Vg.Q)(l.insideAngular)),this.idToken=this.user.pipe($n(et=>et?(0,Nn.D)(et.getIdToken()):Ye(null))),this.idTokenResult=this.user.pipe($n(et=>et?(0,Nn.D)(et.getIdTokenResult()):Ye(null))),this.credential=(0,Nu.T)(Ze,U,this.authState.pipe(Dn(et=>!et))).pipe((0,ht.U)(et=>(null==et?void 0:et.user)?et:null),(0,Oy.R)(l.outsideAngular),(0,Vg.Q)(l.insideAngular))}return(0,Ki.pX)(this,Q,s,{spy:{apply:(le,Ze,rt)=>{(le.startsWith("signIn")||le.startsWith("createUser"))&&rt.then(at=>U.next(at))}}})}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(Ki.Dh),c.LFG(Ki.xv,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(Sn.HU),c.LFG(ob,8),c.LFG(ab,8),c.LFG(gp,8),c.LFG(FE,8),c.LFG(lb,8),c.LFG(Xg,8),c.LFG(Fs,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),LE=(()=>{class n{constructor(){hh.Z.registerVersion("angularfire",Sn.q4.full,"auth-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[fh]}),n})();var Bu=L(4986);function _a(n,t=Bu.z){return(0,Qn.e)((e,i)=>{let r=null,s=null,l=null;const d=()=>{if(r){r.unsubscribe(),r=null;const _=s;s=null,i.next(_)}};function p(){const _=l+n,b=t.now();if(b<_)return r=this.schedule(void 0,_-b),void i.add(r);d()}e.subscribe((0,_n.x)(i,_=>{s=_,l=t.now(),r||(r=t.schedule(p,n),i.add(r))},()=>{d(),i.complete()},void 0,()=>{s=r=null}))})}var ph=L(3942);const BE="firebasestorage.googleapis.com",VE="storageBucket";class Ei extends F.ZR{constructor(t,e){super(_p(t),`Firebase Storage: ${e} (${_p(t)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ei.prototype)}_codeEquals(t){return _p(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function _p(n){return"storage/"+n}function Vu(){return new Ei("unknown","An unknown error occurred, please check the error payload for server response.")}function e_(){return new Ei("canceled","User canceled the upload/download.")}function Uu(){return new Ei("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function mh(n){return new Ei("invalid-argument",n)}function Hu(){return new Ei("app-deleted","The Firebase app was deleted.")}function $E(n){return new Ei("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function vp(n,t){return new Ei("invalid-format","String does not match format '"+n+"': "+t)}function yp(n){throw new Ei("internal-error","Internal error: "+n)}class Yr{constructor(t,e){this.bucket=t,this.path_=e}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,e){let i;try{i=Yr.makeFromUrl(t,e)}catch(r){return new Yr(t,"")}if(""===i.path)return i;throw function vI(n){return new Ei("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(t)}static makeFromUrl(t,e){let i=null;const r="([A-Za-z0-9.\\-_]+)",d=new RegExp("^gs://"+r+"(/(.*))?$","i");function _(et){et.path_=decodeURIComponent(et.path)}const D=e.replace(/[.]/g,"\\."),at=[{regex:d,indices:{bucket:1,path:3},postModify:function s(et){"/"===et.path.charAt(et.path.length-1)&&(et.path_=et.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${D}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:_},{regex:new RegExp(`^https?://${e===BE?"(?:storage.googleapis.com|storage.cloud.google.com)":e}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:_}];for(let et=0;et<at.length;et++){const Ot=at[et],Lt=Ot.regex.exec(t);if(Lt){let lr=Lt[Ot.indices.path];lr||(lr=""),i=new Yr(Lt[Ot.indices.bucket],lr),Ot.postModify(i);break}}if(null==i)throw function _I(n){return new Ei("invalid-url","Invalid URL '"+n+"'.")}(t);return i}}class va{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}function t_(n){return"string"==typeof n||n instanceof String}function KE(n){return hb()&&n instanceof Blob}function hb(){return"undefined"!=typeof Blob}function fb(n,t,e,i){if(i<t)throw mh(`Invalid value for '${n}'. Expected ${t} or greater.`);if(i>e)throw mh(`Invalid value for '${n}'. Expected ${e} or less.`)}function nl(n,t,e){let i=t;return null==e&&(i=`https://${t}`),`${e}://${i}/v0${n}`}function bI(n){const t=encodeURIComponent;let e="?";for(const i in n)n.hasOwnProperty(i)&&(e=e+(t(i)+"=")+t(n[i])+"&");return e=e.slice(0,-1),e}var Yl=(()=>{return(n=Yl||(Yl={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",Yl;var n})();class wI{constructor(t,e,i,r,s,l,d,p,_,b,D){this.url_=t,this.method_=e,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=l,this.callback_=d,this.errorCallback_=p,this.timeout_=_,this.progressCallback_=b,this.connectionFactory_=D,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((I,P)=>{this.resolve_=I,this.reject_=P,this.start_()})}start_(){const e=(i,r)=>{const s=this.resolve_,l=this.reject_,d=r.connection;if(r.wasSuccessCode)try{const p=this.callback_(d,d.getResponse());!function WE(n){return void 0!==n}(p)?s():s(p)}catch(p){l(p)}else if(null!==d){const p=Vu();p.serverResponse=d.getErrorText(),l(this.errorCallback_?this.errorCallback_(d,p):p)}else l(r.canceled?this.appDelete_?Hu():e_():function gI(){return new Ei("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?e(0,new n_(!1,null,!0)):this.backoffId_=function db(n,t,e){let i=1,r=null,s=null,l=!1,d=0;function p(){return 2===d}let _=!1;function b(...le){_||(_=!0,t.apply(null,le))}function D(le){r=setTimeout(()=>{r=null,n(P,p())},le)}function I(){s&&clearTimeout(s)}function P(le,...Ze){if(_)return void I();if(le)return I(),void b.call(null,le,...Ze);if(p()||l)return I(),void b.call(null,le,...Ze);let at;i<64&&(i*=2),1===d?(d=2,at=0):at=1e3*(i+Math.random()),D(at)}let U=!1;function Q(le){U||(U=!0,I(),!_&&(null!==r?(le||(d=2),clearTimeout(r),D(0)):le||(d=1)))}return D(0),s=setTimeout(()=>{l=!0,Q(!0)},e),Q}((i,r)=>{if(r)return void i(!1,new n_(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const l=d=>{null!==this.progressCallback_&&this.progressCallback_(d.loaded,d.lengthComputable?d.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(l),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(l),this.pendingConnection_=null;const d=s.getErrorCode()===Yl.NO_ERROR,p=s.getStatus();if(!d||this.isRetryStatusCode_(p)){const b=s.getErrorCode()===Yl.ABORT;return void i(!1,new n_(!1,null,b))}const _=-1!==this.successCodes_.indexOf(p);i(!0,new n_(_,s))})},e,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function qE(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(t){const e=t>=500&&t<600,r=-1!==[408,429].indexOf(t),s=-1!==this.additionalRetryCodes_.indexOf(t);return e||r||s}}class n_{constructor(t,e,i){this.wasSuccessCode=t,this.connection=e,this.canceled=!!i}}function LN(...n){const t=function XE(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==t){const e=new t;for(let i=0;i<n.length;i++)e.append(n[i]);return e.getBlob()}if(hb())return new Blob(n);throw new Ei("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Po={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class i_{constructor(t,e){this.data=t,this.contentType=e||null}}function r_(n,t){switch(n){case Po.RAW:return new i_(mb(t));case Po.BASE64:case Po.BASE64URL:return new i_(DI(n,t));case Po.DATA_URL:return new i_(function _b(n){const t=new gb(n);return t.base64?DI(Po.BASE64,t.rest):function EI(n){let t;try{t=decodeURIComponent(n)}catch(e){throw vp(Po.DATA_URL,"Malformed data URL.")}return mb(t)}(t.rest)}(t),function xI(n){return new gb(n).contentType}(t))}throw Vu()}function mb(n){const t=[];for(let e=0;e<n.length;e++){let i=n.charCodeAt(e);i<=127?t.push(i):i<=2047?t.push(192|i>>6,128|63&i):55296==(64512&i)?e<n.length-1&&56320==(64512&n.charCodeAt(e+1))?(i=65536|(1023&i)<<10|1023&n.charCodeAt(++e),t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i)):t.push(239,191,189):56320==(64512&i)?t.push(239,191,189):t.push(224|i>>12,128|i>>6&63,128|63&i)}return new Uint8Array(t)}function DI(n,t){switch(n){case Po.BASE64:{const r=-1!==t.indexOf("-"),s=-1!==t.indexOf("_");if(r||s)throw vp(n,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case Po.BASE64URL:{const r=-1!==t.indexOf("+"),s=-1!==t.indexOf("/");if(r||s)throw vp(n,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let e;try{e=function BN(n){return atob(n)}(t)}catch(r){throw vp(n,"Invalid character found")}const i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i}class gb{constructor(t){this.base64=!1,this.contentType=null;const e=t.match(/^data:([^,]+)?,/);if(null===e)throw vp(Po.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=e[1]||null;null!=i&&(this.base64=function vb(n,t){return n.length>=t.length&&n.substring(n.length-t.length)===t}(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=t.substring(t.indexOf(",")+1)}}class il{constructor(t,e){let i=0,r="";KE(t)?(this.data_=t,i=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),i=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),i=t.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(t,e){if(KE(this.data_)){const r=function ya(n,t,e){return n.webkitSlice?n.webkitSlice(t,e):n.mozSlice?n.mozSlice(t,e):n.slice?n.slice(t,e):null}(this.data_,t,e);return null===r?null:new il(r)}{const i=new Uint8Array(this.data_.buffer,t,e-t);return new il(i,!0)}}static getBlob(...t){if(hb()){const e=t.map(i=>i instanceof il?i.data_:i);return new il(LN.apply(null,e))}{const e=t.map(l=>t_(l)?r_(Po.RAW,l).data:l.data_);let i=0;e.forEach(l=>{i+=l.byteLength});const r=new Uint8Array(i);let s=0;return e.forEach(l=>{for(let d=0;d<l.length;d++)r[s++]=l[d]}),new il(r,!0)}}uploadData(){return this.data_}}function yb(n){let t;try{t=JSON.parse(n)}catch(e){return null}return function ZE(n){return"object"==typeof n&&!Array.isArray(n)}(t)?t:null}function JE(n){const t=n.lastIndexOf("/",n.length-2);return-1===t?n:n.slice(t+1)}function TI(n,t){return t}class _r{constructor(t,e,i,r){this.server=t,this.local=e||t,this.writable=!!i,this.xform=r||TI}}let Zl=null;function Kl(){if(Zl)return Zl;const n=[];n.push(new _r("bucket")),n.push(new _r("generation")),n.push(new _r("metageneration")),n.push(new _r("name","fullPath",!0));const e=new _r("name");e.xform=function t(s,l){return function II(n){return!t_(n)||n.length<2?n:JE(n)}(l)},n.push(e);const r=new _r("size");return r.xform=function i(s,l){return void 0!==l?Number(l):l},n.push(r),n.push(new _r("timeCreated")),n.push(new _r("updated")),n.push(new _r("md5Hash",null,!0)),n.push(new _r("cacheControl",null,!0)),n.push(new _r("contentDisposition",null,!0)),n.push(new _r("contentEncoding",null,!0)),n.push(new _r("contentLanguage",null,!0)),n.push(new _r("contentType",null,!0)),n.push(new _r("metadata","customMetadata",!0)),Zl=n,Zl}function s_(n,t,e){const i=yb(t);return null===i?null:function kI(n,t,e){const i={type:"file"},r=e.length;for(let s=0;s<r;s++){const l=e[s];i[l.local]=l.xform(i,t[l.server])}return function AI(n,t){Object.defineProperty(n,"ref",{get:function e(){const s=new Yr(n.bucket,n.fullPath);return t._makeStorageReference(s)}})}(i,n),i}(n,i,e)}function ju(n,t){const e={},i=t.length;for(let r=0;r<i;r++){const s=t[r];s.writable&&(e[s.server]=n[s.local])}return JSON.stringify(e)}const Or="prefixes";class Fo{constructor(t,e,i,r){this.url=t,this.method=e,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function fs(n){if(!n)throw Vu()}function Ql(n,t){return function e(i,r){const s=s_(n,r,t);return fs(null!==s),s}}function ba(n){return function t(e,i){let r;return r=401===e.getStatus()?e.getErrorText().includes("Firebase App Check token is invalid")?function HE(){return new Ei("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function UE(){return new Ei("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===e.getStatus()?function ub(n){return new Ei("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===e.getStatus()?function jE(n){return new Ei("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):i,r.serverResponse=i.serverResponse,r}}function sl(n){const t=ba(n);return function e(i,r){let s=t(i,r);return 404===i.getStatus()&&(s=function mI(n){return new Ei("object-not-found","Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=r.serverResponse,s}}function Gu(n,t,e){const r=nl(t.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,d=new Fo(r,"GET",Ql(n,e),l);return d.errorHandler=sl(t),d}function vh(n,t,e,i,r){const s={};s.prefix=t.isRoot?"":t.path+"/",e&&e.length>0&&(s.delimiter=e),i&&(s.pageToken=i),r&&(s.maxResults=r);const d=nl(t.bucketOnlyServerUrl(),n.host,n._protocol),_=n.maxOperationRetryTime,b=new Fo(d,"GET",function gh(n,t){return function e(i,r){const s=function No(n,t,e){const i=yb(e);return null===i?null:function o_(n,t,e){const i={prefixes:[],items:[],nextPageToken:e.nextPageToken};if(e[Or])for(const r of e[Or]){const s=r.replace(/\/$/,""),l=n._makeStorageReference(new Yr(t,s));i.prefixes.push(l)}if(e.items)for(const r of e.items){const s=n._makeStorageReference(new Yr(t,r.name));i.items.push(s)}return i}(n,t,i)}(n,t,r);return fs(null!==s),s}}(n,t.bucket),_);return b.urlParams=s,b.errorHandler=ba(t),b}function bb(n,t,e){const i=Object.assign({},e);return i.fullPath=n.path,i.size=t.size(),i.contentType||(i.contentType=function iD(n,t){return n&&n.contentType||t&&t.type()||"application/octet-stream"}(null,t)),i}class bp{constructor(t,e,i,r){this.current=t,this.total=e,this.finalized=!!i,this.metadata=r||null}}function a_(n,t){let e=null;try{e=n.getResponseHeader("X-Goog-Upload-Status")}catch(r){fs(!1)}return fs(!!e&&-1!==(t||["active"]).indexOf(e)),e}const sD={STATE_CHANGED:"state_changed"},Zr={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Eb(n){switch(n){case"running":case"pausing":case"canceling":return Zr.RUNNING;case"paused":return Zr.PAUSED;case"success":return Zr.SUCCESS;case"canceled":return Zr.CANCELED;default:return Zr.ERROR}}class PI{constructor(t,e,i){if(function YE(n){return"function"==typeof n}(t)||null!=e||null!=i)this.next=t,this.error=null!=e?e:void 0,this.complete=null!=i?i:void 0;else{const s=t;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function $u(n){return(...t)=>{Promise.resolve().then(()=>n(...t))}}class NI extends class aD{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Yl.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Yl.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Yl.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,e,i,r){if(this.sent_)throw yp("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return void 0!==i?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw yp("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw yp("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}}getResponse(){if(!this.sent_)throw yp("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw yp("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)}}{initXhr(){this.xhr_.responseType="text"}}function wa(){return new NI}class lD{constructor(t,e,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=i,this._mappings=Kl(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{this._request=void 0,this._chunkMultiplier=1,r._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=r,this._transition("error"))},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals("canceled")?this.completeTransitions_():(this._error=r,this._transition("error"))},this._promise=new Promise((r,s)=>{this._resolve=r,this._reject=s,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const t=this._transferred;return e=>this._updateProgress(t+e)}_shouldDoResumable(t){return t.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(t){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([e,i])=>{switch(this._state){case"running":t(e,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((t,e)=>{const i=function rD(n,t,e,i,r){const s=t.bucketOnlyServerUrl(),l=bb(t,i,r),d={name:l.fullPath},p=nl(s,n.host,n._protocol),b={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},D=ju(l,e),U=new Fo(p,"POST",function P(Q){let le;a_(Q);try{le=Q.getResponseHeader("X-Goog-Upload-URL")}catch(Ze){fs(!1)}return fs(t_(le)),le},n.maxUploadRetryTime);return U.urlParams=d,U.headers=b,U.body=D,U.errorHandler=ba(t),U}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,wa,t,e);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const t=this._uploadUrl;this._resolveToken((e,i)=>{const r=function RI(n,t,e,i){const p=new Fo(e,"POST",function s(_){const b=a_(_,["active","final"]);let D=null;try{D=_.getResponseHeader("X-Goog-Upload-Size-Received")}catch(P){fs(!1)}D||fs(!1);const I=Number(D);return fs(!isNaN(I)),new bp(I,i.size(),"final"===b)},n.maxUploadRetryTime);return p.headers={"X-Goog-Upload-Command":"query"},p.errorHandler=ba(t),p}(this._ref.storage,this._ref._location,t,this._blob),s=this._ref.storage._makeRequest(r,wa,e,i);this._request=s,s.getPromise().then(l=>{l=l,this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const t=262144*this._chunkMultiplier,e=new bp(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((r,s)=>{let l;try{l=function OI(n,t,e,i,r,s,l,d){const p=new bp(0,0);if(l?(p.current=l.current,p.total=l.total):(p.current=0,p.total=i.size()),i.size()!==p.total)throw function zE(){return new Ei("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const _=p.total-p.current;let b=_;r>0&&(b=Math.min(b,r));const D=p.current,U={"X-Goog-Upload-Command":b===_?"upload, finalize":"upload","X-Goog-Upload-Offset":`${p.current}`},Q=i.slice(D,D+b);if(null===Q)throw Uu();const at=new Fo(e,"POST",function le(et,Ot){const Lt=a_(et,["active","final"]),Cn=p.current+b,lr=i.size();let Ia;return Ia="final"===Lt?Ql(t,s)(et,Ot):null,new bp(Cn,lr,"final"===Lt,Ia)},t.maxUploadRetryTime);return at.headers=U,at.body=Q.uploadData(),at.progressCallback=d||null,at.errorHandler=ba(n),at}(this._ref._location,this._ref.storage,i,this._blob,t,this._mappings,e,this._makeProgressCallback())}catch(p){return this._error=p,void this._transition("error")}const d=this._ref.storage._makeRequest(l,wa,r,s);this._request=d,d.getPromise().then(p=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(p.current),p.finalized?(this._metadata=p.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((t,e)=>{const i=Gu(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(i,wa,t,e);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((t,e)=>{const i=function wb(n,t,e,i,r){const s=t.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},p=function d(){let at="";for(let et=0;et<2;et++)at+=Math.random().toString().slice(2);return at}();l["Content-Type"]="multipart/related; boundary="+p;const _=bb(t,i,r),b=ju(_,e),P=il.getBlob("--"+p+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+b+"\r\n--"+p+"\r\nContent-Type: "+_.contentType+"\r\n\r\n",i,"\r\n--"+p+"--");if(null===P)throw Uu();const U={name:_.fullPath},Q=nl(s,n.host,n._protocol),Ze=n.maxUploadRetryTime,rt=new Fo(Q,"POST",Ql(n,e),Ze);return rt.urlParams=U,rt.headers=l,rt.body=P.uploadData(),rt.errorHandler=ba(t),rt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,wa,t,e);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(t){const e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()}_transition(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":const e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=t,this._notifyObservers();break;case"canceled":this._error=e_(),this._state=t,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const t=Eb(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}}on(t,e,i,r){const s=new PI(e||void 0,i||void 0,r||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(t,e){return this._promise.then(t,e)}catch(t){return this.then(null,t)}_addObserver(t){this._observers.push(t),this._notifyObserver(t)}_removeObserver(t){const e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(e=>{this._notifyObserver(e)})}_finishPromise(){if(void 0!==this._resolve){let t=!0;switch(Eb(this._state)){case Zr.SUCCESS:$u(this._resolve.bind(null,this.snapshot))();break;case Zr.CANCELED:case Zr.ERROR:$u(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(t){switch(Eb(this._state)){case Zr.RUNNING:case Zr.PAUSED:t.next&&$u(t.next.bind(t,this.snapshot))();break;case Zr.SUCCESS:t.complete&&$u(t.complete.bind(t))();break;default:t.error&&$u(t.error.bind(t,this._error))()}}resume(){const t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t}pause(){const t="running"===this._state;return t&&this._transition("pausing"),t}cancel(){const t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t}}class yh{constructor(t,e){this._service=t,this._location=e instanceof Yr?e:Yr.makeFromUrl(e,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,e){return new yh(t,e)}get root(){const t=new Yr(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return JE(this._location.path)}get storage(){return this._service}get parent(){const t=function SI(n){if(0===n.length)return null;const t=n.lastIndexOf("/");return-1===t?"":n.slice(0,t)}(this._location.path);if(null===t)return null;const e=new Yr(this._location.bucket,t);return new yh(this._service,e)}_throwIfRoot(t){if(""===this._location.path)throw $E(t)}}function qu(n,t,e){return Sb.apply(this,arguments)}function Sb(){return(Sb=(0,be.Z)(function*(n,t,e){const r=yield Mb(n,{pageToken:e});t.prefixes.push(...r.prefixes),t.items.push(...r.items),null!=r.nextPageToken&&(yield qu(n,t,r.nextPageToken))})).apply(this,arguments)}function Mb(n,t){null!=t&&"number"==typeof t.maxResults&&fb("options.maxResults",1,1e3,t.maxResults);const e=t||{},i=vh(n.storage,n._location,"/",e.pageToken,e.maxResults);return n.storage.makeRequestWithTokens(i,wa)}function l_(n){n._throwIfRoot("getDownloadURL");const t=function eD(n,t,e){const r=nl(t.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,d=new Fo(r,"GET",function _h(n,t){return function e(i,r){const s=s_(n,r,t);return fs(null!==s),function rl(n,t,e,i){const r=yb(t);if(null===r||!t_(r.downloadTokens))return null;const s=r.downloadTokens;if(0===s.length)return null;const l=encodeURIComponent;return s.split(",").map(_=>{const D=n.fullPath;return nl("/b/"+l(n.bucket)+"/o/"+l(D),e,i)+bI({alt:"media",token:_})})[0]}(s,r,n.host,n._protocol)}}(n,e),l);return d.errorHandler=sl(t),d}(n.storage,n._location,Kl());return n.storage.makeRequestWithTokens(t,wa).then(e=>{if(null===e)throw function yI(){return new Ei("no-download-url","The given file does not have any download URLs.")}();return e})}function Tb(n,t){const e=function MI(n,t){const e=t.split("/").filter(i=>i.length>0).join("/");return 0===n.length?e:n+"/"+e}(n._location.path,t),i=new Yr(n._location.bucket,e);return new yh(n.storage,i)}function hD(n,t){if(n instanceof Ib){const e=n;if(null==e._bucket)throw function GE(){return new Ei("no-default-bucket","No default bucket found. Did you set the '"+VE+"' property when initializing the app?")}();const i=new yh(e,e._bucket);return null!=t?hD(i,t):i}return void 0!==t?Tb(n,t):n}function jI(n,t){if(t&&function UI(n){return/^[A-Za-z]+:\/\//.test(n)}(t)){if(n instanceof Ib)return function HI(n,t){return new yh(n,t)}(n,t);throw mh("To use ref(service, url), the first argument must be a Storage instance.")}return hD(n,t)}function fD(n,t){const e=null==t?void 0:t[VE];return null==e?null:Yr.makeFromBucketSpec(e,n)}class Ib{constructor(t,e,i,r,s){this.app=t,this._authProvider=e,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=BE,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?Yr.makeFromBucketSpec(r,this._host):fD(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._bucket=null!=this._url?Yr.makeFromBucketSpec(this._url,t):fD(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){fb("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){fb("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}_getAuthToken(){var t=this;return(0,be.Z)(function*(){if(t._overrideAuthToken)return t._overrideAuthToken;const e=t._authProvider.getImmediate({optional:!0});if(e){const i=yield e.getToken();if(null!==i)return i.accessToken}return null})()}_getAppCheckToken(){var t=this;return(0,be.Z)(function*(){const e=t._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new yh(this,t)}_makeRequest(t,e,i,r){if(this._deleted)return new va(Hu());{const s=function QE(n,t,e,i,r,s){const l=bI(n.urlParams),d=n.url+l,p=Object.assign({},n.headers);return function pb(n,t){t&&(n["X-Firebase-GMPID"]=t)}(p,t),function NN(n,t){null!==t&&t.length>0&&(n.Authorization="Firebase "+t)}(p,e),function FN(n,t){n["X-Firebase-Storage-Version"]="webjs/"+(null!=t?t:"AppManager")}(p,s),function CI(n,t){null!==t&&(n["X-Firebase-AppCheck"]=t)}(p,i),new wI(d,n.method,p,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,r)}(t,this._appId,i,r,e,this._firebaseVersion);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(t,e){var i=this;return(0,be.Z)(function*(){const[r,s]=yield Promise.all([i._getAuthToken(),i._getAppCheckToken()]);return i._makeRequest(t,e,r,s).getPromise()})()}}const Ab="@firebase/storage";function Cp(n,t){return jI(n=(0,F.m9)(n),t)}function Lb(n,{instanceIdentifier:t}){const e=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),r=n.getProvider("app-check-internal");return new Ib(e,i,r,t,Wr.SDK_VERSION)}!function _D(){(0,Wr._registerComponent)(new ga.wA("storage",Lb,"PUBLIC").setMultipleInstances(!0)),(0,Wr.registerVersion)(Ab,"0.9.8",""),(0,Wr.registerVersion)(Ab,"0.9.8","esm2017")}();class bh{constructor(t,e,i){this._delegate=t,this.task=e,this.ref=i}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Bb{constructor(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new bh(this._delegate.snapshot,this,this._ref)}then(t,e){return this._delegate.then(i=>{if(t)return t(new bh(i,this,this._ref))},e)}on(t,e,i,r){let s;return e&&(s="function"==typeof e?l=>e(new bh(l,this,this._ref)):{next:e.next?l=>e.next(new bh(l,this,this._ref)):void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,s,i||void 0,r||void 0)}}class Vb{constructor(t,e){this._delegate=t,this._service=e}get prefixes(){return this._delegate.prefixes.map(t=>new Ca(t,this._service))}get items(){return this._delegate.items.map(t=>new Ca(t,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Ca{constructor(t,e){this._delegate=t,this.storage=e}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(t){const e=function Pb(n,t){return Tb(n,t)}(this._delegate,t);return new Ca(e,this.storage)}get root(){return new Ca(this._delegate.root,this.storage)}get parent(){const t=this._delegate.parent;return null==t?null:new Ca(t,this.storage)}put(t,e){return this._throwIfRoot("put"),new Bb(function zN(n,t,e){return function uD(n,t,e){return n._throwIfRoot("uploadBytesResumable"),new lD(n,new il(t),e)}(n=(0,F.m9)(n),t,e)}(this._delegate,t,e),this)}putString(t,e=Po.RAW,i){this._throwIfRoot("putString");const r=r_(e,t),s=Object.assign({},i);return null==s.contentType&&null!=r.contentType&&(s.contentType=r.contentType),new Bb(new lD(this._delegate,new il(r.data,!0),s),this)}listAll(){return function Ob(n){return function LI(n){const t={prefixes:[],items:[]};return qu(n,t).then(()=>t)}(n=(0,F.m9)(n))}(this._delegate).then(t=>new Vb(t,this.storage))}list(t){return function Rb(n,t){return Mb(n=(0,F.m9)(n),t)}(this._delegate,t||void 0).then(e=>new Vb(e,this.storage))}getMetadata(){return function wp(n){return function BI(n){n._throwIfRoot("getMetadata");const t=Gu(n.storage,n._location,Kl());return n.storage.makeRequestWithTokens(t,wa)}(n=(0,F.m9)(n))}(this._delegate)}updateMetadata(t){return function gD(n,t){return function dD(n,t){n._throwIfRoot("updateMetadata");const e=function tD(n,t,e,i){const s=nl(t.fullServerUrl(),n.host,n._protocol),d=ju(e,i),_=n.maxOperationRetryTime,b=new Fo(s,"PATCH",Ql(n,i),_);return b.headers={"Content-Type":"application/json; charset=utf-8"},b.body=d,b.errorHandler=sl(t),b}(n.storage,n._location,t,Kl());return n.storage.makeRequestWithTokens(e,wa)}(n=(0,F.m9)(n),t)}(this._delegate,t)}getDownloadURL(){return function GI(n){return l_(n=(0,F.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function u_(n){return function VI(n){n._throwIfRoot("deleteObject");const t=function nD(n,t){const i=nl(t.fullServerUrl(),n.host,n._protocol),d=new Fo(i,"DELETE",function l(p,_){},n.maxOperationRetryTime);return d.successCodes=[200,204],d.errorHandler=sl(t),d}(n.storage,n._location);return n.storage.makeRequestWithTokens(t,wa)}(n=(0,F.m9)(n))}(this._delegate)}_throwIfRoot(t){if(""===this._delegate._location.path)throw $E(t)}}class d_{constructor(t,e){this.app=t,this._delegate=e}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(t){if(vD(t))throw mh("ref() expected a child path but got a URL, use refFromURL instead.");return new Ca(Cp(this._delegate,t),this)}refFromURL(t){if(!vD(t))throw mh("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Yr.makeFromUrl(t,this._delegate.host)}catch(e){throw mh("refFromUrl() expected a valid full URL but got an invalid one.")}return new Ca(Cp(this._delegate,t),this)}setMaxUploadRetryTime(t){this._delegate.maxUploadRetryTime=t}setMaxOperationRetryTime(t){this._delegate.maxOperationRetryTime=t}useEmulator(t,e,i={}){!function zI(n,t,e,i={}){!function pD(n,t,e,i={}){n.host=`${t}:${e}`,n._protocol="http";const{mockUserToken:r}=i;r&&(n._overrideAuthToken="string"==typeof r?r:(0,F.Sg)(r,n.app.options.projectId))}(n,t,e,i)}(this._delegate,t,e,i)}}function vD(n){return/^[A-Za-z]+:\/\//.test(n)}function wD(n,{instanceIdentifier:t}){const e=n.getProvider("app-compat").getImmediate(),i=n.getProvider("storage").getImmediate({identifier:t});return new d_(e,i)}function Hb(n){const t=function CD(n){return new oi.y(t=>{const e=l=>t.next(l);e(n.snapshot);const s=n.on("state_changed",e);return n.then(l=>{e(l),t.complete()},l=>{e(n.snapshot),(l=>{t.error(l)})(l)}),function(){s()}}).pipe(_a(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>t,percentageChanges:()=>t.pipe((0,ht.U)(e=>e.bytesTransferred/e.totalBytes*100))}}function Ep(n){return{getDownloadURL:()=>Ye(void 0).pipe(Sn.fc,$n(()=>n.getDownloadURL()),Sn.iC),getMetadata:()=>Ye(void 0).pipe(Sn.fc,$n(()=>n.getMetadata()),Sn.iC),delete:()=>(0,Nn.D)(n.delete()),child:t=>Ep(n.child(t)),updateMetadata:t=>(0,Nn.D)(n.updateMetadata(t)),put:(t,e)=>Hb(n.put(t,e)),putString:(t,e,i)=>Hb(n.putString(t,e,i)),list:t=>(0,Nn.D)(n.list(t)),listAll:()=>(0,Nn.D)(n.listAll())}}!function $I(n){const t={TaskState:Zr,TaskEvent:sD,StringFormat:Po,Storage:d_,Reference:Ca};n.INTERNAL.registerComponent(new ga.wA("storage-compat",wD,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.16")}(ph.Z);const jb=new c.OlP("angularfire2.storageBucket"),ED=new c.OlP("angularfire2.storage.maxUploadRetryTime"),DD=new c.OlP("angularfire2.storage.maxOperationRetryTime"),xD=new c.OlP("angularfire2.storage.use-emulator");let Gb=(()=>{class n{constructor(e,i,r,s,l,d,p,_,b,D){const I=(0,Ki.on)(e,l,i);this.storage=(0,Ki.cc)(`${I.name}.storage.${r}`,"AngularFireStorage",I.name,()=>{const P=l.runOutsideAngular(()=>I.storage(r||void 0)),U=b;return U&&P.useEmulator(...U),p&&P.setMaxUploadRetryTime(p),_&&P.setMaxOperationRetryTime(_),P},[p,_])}ref(e){return Ep(this.storage.ref(e))}refFromURL(e){return Ep(this.storage.refFromURL(e))}upload(e,i,r){return Ep(this.storage.ref(e)).put(i,r)}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(Ki.Dh),c.LFG(Ki.xv,8),c.LFG(jb,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(Sn.HU),c.LFG(ED,8),c.LFG(DD,8),c.LFG(xD,8),c.LFG(Fs,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),SD=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})(),MD=(()=>{class n{constructor(){hh.Z.registerVersion("angularfire",Sn.q4.full,"gcs-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[Gb],imports:[SD]}),n})();function h_(){return(0,Qn.e)((n,t)=>{let e,i=!1;n.subscribe((0,_n.x)(t,r=>{const s=e;e=r,i&&t.next([s,r]),i=!0}))})}function TD(n,t=Ts.y){return n=null!=n?n:WI,(0,Qn.e)((e,i)=>{let r,s=!0;e.subscribe((0,_n.x)(i,l=>{const d=t(l);(s||!n(r,d))&&(s=!1,r=d,i.next(l))}))})}function WI(n,t){return n===t}L(5881);var Qe,ID="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Xl={},f_=f_||{},Gt=ID||self;function p_(){}function m_(n){var t=typeof n;return"array"==(t="object"!=t?t:n?Array.isArray(n)?"array":t:"null")||"object"==t&&"number"==typeof n.length}function Dp(n){var t=typeof n;return"object"==t&&null!=n||"function"==t}var g_="closure_uid_"+(1e9*Math.random()>>>0),wh=0;function YI(n,t,e){return n.call.apply(n.bind,arguments)}function ZI(n,t,e){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),n.apply(t,r)}}return function(){return n.apply(t,arguments)}}function vr(n,t,e){return(vr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?YI:ZI).apply(null,arguments)}function __(n,t){var e=Array.prototype.slice.call(arguments,1);return function(){var i=e.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function yr(n,t){function e(){}e.prototype=t.prototype,n.Z=t.prototype,n.prototype=new e,n.prototype.constructor=n,n.Vb=function(i,r,s){for(var l=Array(arguments.length-2),d=2;d<arguments.length;d++)l[d-2]=arguments[d];return t.prototype[r].apply(i,l)}}function Wu(){this.s=this.s,this.o=this.o}var $b={};Wu.prototype.s=!1,Wu.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function AD(n){return Object.prototype.hasOwnProperty.call(n,g_)&&n[g_]||(n[g_]=++wh)}(this);delete $b[n]}},Wu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Ea=Array.prototype.indexOf?function(n,t){return Array.prototype.indexOf.call(n,t,void 0)}:function(n,t){if("string"==typeof n)return"string"!=typeof t||1!=t.length?-1:n.indexOf(t,0);for(let e=0;e<n.length;e++)if(e in n&&n[e]===t)return e;return-1},kD=Array.prototype.forEach?function(n,t,e){Array.prototype.forEach.call(n,t,e)}:function(n,t,e){const i=n.length,r="string"==typeof n?n.split(""):n;for(let s=0;s<i;s++)s in r&&t.call(e,r[s],s,n)};function Da(n){return Array.prototype.concat.apply([],arguments)}function lo(n){const t=n.length;if(0<t){const e=Array(t);for(let i=0;i<t;i++)e[i]=n[i];return e}return[]}function Ls(n){return/^[\s\xa0]*$/.test(n)}var ps,qb=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Kr(n,t){return-1!=n.indexOf(t)}function Wb(n,t){return n<t?-1:n>t?1:0}e:{var RD=Gt.navigator;if(RD){var OD=RD.userAgent;if(OD){ps=OD;break e}}ps=""}function xp(n,t,e){for(const i in n)t.call(e,n[i],i,n)}function Ch(n){const t={};for(const e in n)t[e]=n[e];return t}var PD="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Yb(n,t){let e,i;for(let r=1;r<arguments.length;r++){for(e in i=arguments[r],i)n[e]=i[e];for(let s=0;s<PD.length;s++)e=PD[s],Object.prototype.hasOwnProperty.call(i,e)&&(n[e]=i[e])}}function Zb(n){return Zb[" "](n),n}Zb[" "]=p_;var Eh,n,FD=Kr(ps,"Opera"),Jl=Kr(ps,"Trident")||Kr(ps,"MSIE"),LD=Kr(ps,"Edge"),v_=LD||Jl,Kb=Kr(ps,"Gecko")&&!(Kr(ps.toLowerCase(),"webkit")&&!Kr(ps,"Edge"))&&!(Kr(ps,"Trident")||Kr(ps,"MSIE"))&&!Kr(ps,"Edge"),Qb=Kr(ps.toLowerCase(),"webkit")&&!Kr(ps,"Edge");function Sp(){var n=Gt.document;return n?n.documentMode:void 0}e:{var y_="",Mp=(n=ps,Kb?/rv:([^\);]+)(\)|;)/.exec(n):LD?/Edge\/([\d\.]+)/.exec(n):Jl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Qb?/WebKit\/(\S+)/.exec(n):FD?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Mp&&(y_=Mp?Mp[1]:""),Jl){var b_=Sp();if(null!=b_&&b_>parseFloat(y_)){Eh=String(b_);break e}}Eh=y_}var BD={};var QI=Gt.document&&Jl&&(Sp()||parseInt(Eh,10))||void 0,XI=function(){if(!Gt.addEventListener||!Object.defineProperty)return!1;var n=!1,t=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Gt.addEventListener("test",p_,t),Gt.removeEventListener("test",p_,t)}catch(e){}return n}();function Qr(n,t){this.type=n,this.g=this.target=t,this.defaultPrevented=!1}function Tp(n,t){if(Qr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var e=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=t,t=n.relatedTarget){if(Kb){e:{try{Zb(t.nodeName);var r=!0;break e}catch(s){}r=!1}r||(t=null)}}else"mouseover"==e?t=n.fromElement:"mouseout"==e&&(t=n.toElement);this.relatedTarget=t,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:JI[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Tp.Z.h.call(this)}}Qr.prototype.h=function(){this.defaultPrevented=!0},yr(Tp,Qr);var JI={2:"touch",3:"pen",4:"mouse"};Tp.prototype.h=function(){Tp.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Ip="closure_listenable_"+(1e6*Math.random()|0),eA=0;function tA(n,t,e,i,r){this.listener=n,this.proxy=null,this.src=t,this.type=e,this.capture=!!i,this.ia=r,this.key=++eA,this.ca=this.fa=!1}function C_(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function E_(n){this.src=n,this.g={},this.h=0}function Jb(n,t){var e=t.type;if(e in n.g){var s,i=n.g[e],r=Ea(i,t);(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(C_(t),0==n.g[e].length&&(delete n.g[e],n.h--))}}function e0(n,t,e,i){for(var r=0;r<n.length;++r){var s=n[r];if(!s.ca&&s.listener==t&&s.capture==!!e&&s.ia==i)return r}return-1}E_.prototype.add=function(n,t,e,i,r){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var l=e0(n,t,i,r);return-1<l?(t=n[l],e||(t.fa=!1)):((t=new tA(t,this.src,s,!!i,r)).fa=e,n.push(t)),t};var t0="closure_lm_"+(1e6*Math.random()|0),n0={};function UD(n,t,e,i,r){if(i&&i.once)return jD(n,t,e,i,r);if(Array.isArray(t)){for(var s=0;s<t.length;s++)UD(n,t[s],e,i,r);return null}return e=M_(e),n&&n[Ip]?n.N(t,e,Dp(i)?!!i.capture:!!i,r):HD(n,t,e,!1,i,r)}function HD(n,t,e,i,r,s){if(!t)throw Error("Invalid event type");var l=Dp(r)?!!r.capture:!!r,d=x_(n);if(d||(n[t0]=d=new E_(n)),(e=d.add(t,e,i,l,s)).proxy)return e;if(i=function nA(){var t=GD;return function n(e){return t.call(n.src,n.listener,e)}}(),e.proxy=i,i.src=n,i.listener=e,n.addEventListener)XI||(r=l),void 0===r&&(r=!1),n.addEventListener(t.toString(),i,r);else if(n.attachEvent)n.attachEvent(s0(t.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return e}function jD(n,t,e,i,r){if(Array.isArray(t)){for(var s=0;s<t.length;s++)jD(n,t[s],e,i,r);return null}return e=M_(e),n&&n[Ip]?n.O(t,e,Dp(i)?!!i.capture:!!i,r):HD(n,t,e,!0,i,r)}function r0(n,t,e,i,r){if(Array.isArray(t))for(var s=0;s<t.length;s++)r0(n,t[s],e,i,r);else i=Dp(i)?!!i.capture:!!i,e=M_(e),n&&n[Ip]?(n=n.i,(t=String(t).toString())in n.g&&-1<(e=e0(s=n.g[t],e,i,r))&&(C_(s[e]),Array.prototype.splice.call(s,e,1),0==s.length&&(delete n.g[t],n.h--))):n&&(n=x_(n))&&(t=n.g[t.toString()],n=-1,t&&(n=e0(t,e,i,r)),(e=-1<n?t[n]:null)&&D_(e))}function D_(n){if("number"!=typeof n&&n&&!n.ca){var t=n.src;if(t&&t[Ip])Jb(t.i,n);else{var e=n.type,i=n.proxy;t.removeEventListener?t.removeEventListener(e,i,n.capture):t.detachEvent?t.detachEvent(s0(e),i):t.addListener&&t.removeListener&&t.removeListener(i),(e=x_(t))?(Jb(e,n),0==e.h&&(e.src=null,t[t0]=null)):C_(n)}}}function s0(n){return n in n0?n0[n]:n0[n]="on"+n}function GD(n,t){if(n.ca)n=!0;else{t=new Tp(t,this);var e=n.listener,i=n.ia||n.src;n.fa&&D_(n),n=e.call(i,t)}return n}function x_(n){return(n=n[t0])instanceof E_?n:null}var S_="__closure_events_fn_"+(1e9*Math.random()>>>0);function M_(n){return"function"==typeof n?n:(n[S_]||(n[S_]=function(t){return n.handleEvent(t)}),n[S_])}function or(){Wu.call(this),this.i=new E_(this),this.P=this,this.I=null}function br(n,t){var e,i=n.I;if(i)for(e=[];i;i=i.I)e.push(i);if(n=n.P,i=t.type||t,"string"==typeof t)t=new Qr(t,n);else if(t instanceof Qr)t.target=t.target||n;else{var r=t;Yb(t=new Qr(i,n),r)}if(r=!0,e)for(var s=e.length-1;0<=s;s--){var l=t.g=e[s];r=Dh(l,i,!0,t)&&r}if(r=Dh(l=t.g=n,i,!0,t)&&r,r=Dh(l,i,!1,t)&&r,e)for(s=0;s<e.length;s++)r=Dh(l=t.g=e[s],i,!1,t)&&r}function Dh(n,t,e,i){if(!(t=n.i.g[String(t)]))return!0;t=t.concat();for(var r=!0,s=0;s<t.length;++s){var l=t[s];if(l&&!l.ca&&l.capture==e){var d=l.listener,p=l.ia||l.src;l.fa&&Jb(n.i,l),r=!1!==d.call(p,i)&&r}}return r&&!i.defaultPrevented}yr(or,Wu),or.prototype[Ip]=!0,or.prototype.removeEventListener=function(n,t,e,i){r0(this,n,t,e,i)},or.prototype.M=function(){if(or.Z.M.call(this),this.i){var t,n=this.i;for(t in n.g){for(var e=n.g[t],i=0;i<e.length;i++)C_(e[i]);delete n.g[t],n.h--}}this.I=null},or.prototype.N=function(n,t,e,i){return this.i.add(String(n),t,!1,e,i)},or.prototype.O=function(n,t,e,i){return this.i.add(String(n),t,!0,e,i)};var Ap=Gt.JSON.stringify;function Yu(){var n=rA;let t=null;return n.g&&(t=n.g,n.g=n.g.next,n.g||(n.h=null),t.next=null),t}var $D,zD=new class{constructor(n,t){this.i=n,this.j=t,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new xh,n=>n.reset());class xh{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function qN(n){Gt.setTimeout(()=>{throw n},0)}function kp(n,t){$D||function qD(){var n=Gt.Promise.resolve(void 0);$D=function(){n.then(At)}}(),T_||($D(),T_=!0),rA.add(n,t)}var T_=!1,rA=new class iA{constructor(){this.h=this.g=null}add(t,e){const i=zD.get();i.set(t,e),this.h?this.h.next=i:this.g=i,this.h=i}};function At(){for(var n;n=Yu();){try{n.h.call(n.g)}catch(e){qN(e)}var t=zD;t.j(n),100>t.h&&(t.h++,n.next=t.g,t.g=n)}T_=!1}function I_(n,t){or.call(this),this.h=n||1,this.g=t||Gt,this.j=vr(this.kb,this),this.l=Date.now()}function o0(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function a0(n,t,e){if("function"==typeof n)e&&(n=vr(n,e));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=vr(n.handleEvent,n)}return 2147483647<Number(t)?-1:Gt.setTimeout(n,t||0)}function Rp(n){n.g=a0(()=>{n.g=null,n.i&&(n.i=!1,Rp(n))},n.j);const t=n.h;n.h=null,n.m.apply(null,t)}yr(I_,or),(Qe=I_.prototype).da=!1,Qe.S=null,Qe.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),br(this,"tick"),this.da&&(o0(this),this.start()))}},Qe.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Qe.M=function(){I_.Z.M.call(this),o0(this),delete this.g};class sA extends Wu{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:Rp(this)}M(){super.M(),this.g&&(Gt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gc(n){Wu.call(this),this.h=n,this.g={}}yr(Gc,Wu);var Op=[];function Di(n,t,e,i){Array.isArray(e)||(e&&(Op[0]=e.toString()),e=Op);for(var r=0;r<e.length;r++){var s=UD(t,e[r],i||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function oA(n){xp(n.g,function(t,e){this.g.hasOwnProperty(e)&&D_(t)},n),n.g={}}function Pp(){this.g=!0}function Zu(n,t,e,i){n.info(function(){return"XMLHTTP TEXT ("+t+"): "+function YD(n,t){if(!n.g)return t;if(!t)return null;try{var e=JSON.parse(t);if(e)for(n=0;n<e.length;n++)if(Array.isArray(e[n])){var i=e[n];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var l=1;l<r.length;l++)r[l]=""}}}return Ap(e)}catch(d){return t}}(n,e)+(i?" "+i:"")})}Gc.prototype.M=function(){Gc.Z.M.call(this),oA(this)},Gc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Pp.prototype.Aa=function(){this.g=!1},Pp.prototype.info=function(){};var zc={},ZD=null;function A_(){return ZD=ZD||new or}function KD(n){Qr.call(this,zc.Ma,n)}function ec(n){const t=A_();br(t,new KD(t,n))}function QD(n,t){Qr.call(this,zc.STAT_EVENT,n),this.stat=t}function ms(n){const t=A_();br(t,new QD(t,n))}function XD(n,t){Qr.call(this,zc.Na,n),this.size=t}function $c(n,t){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Gt.setTimeout(function(){n()},t)}zc.Ma="serverreachability",yr(KD,Qr),zc.STAT_EVENT="statevent",yr(QD,Qr),zc.Na="timingevent",yr(XD,Qr);var Np={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},l0={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function k_(){}function Sh(){}k_.prototype.h=null;var d0,tc={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function c0(){Qr.call(this,"d")}function u0(){Qr.call(this,"c")}function Fp(){}function Mh(n,t,e,i){this.l=n,this.j=t,this.m=e,this.X=i||1,this.V=new Gc(this),this.P=cA,this.W=new I_(n=v_?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new h0}function h0(){this.i=null,this.g="",this.h=!1}yr(c0,Qr),yr(u0,Qr),yr(Fp,k_),Fp.prototype.g=function(){return new XMLHttpRequest},Fp.prototype.i=function(){return{}},d0=new Fp;var cA=45e3,R_={},O_={};function f0(n,t,e){n.K=1,n.v=Up(Bs(t)),n.s=e,n.U=!0,uA(n,null)}function uA(n,t){n.F=Date.now(),Th(n),n.A=Bs(n.v);var e=n.A,i=n.X;Array.isArray(i)||(i=[String(i)]),rx(e.h,"t",i),n.C=0,e=n.l.H,n.h=new h0,n.g=DA(n.l,e?t:null,!n.s),0<n.O&&(n.L=new sA(vr(n.Ia,n,n.g),n.O)),Di(n.V,n.g,"readystatechange",n.gb),t=n.H?Ch(n.H):{},n.s?(n.u||(n.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,t)):(n.u="GET",n.g.ea(n.A,n.u,null,t)),ec(1),function aA(n,t,e,i,r,s){n.info(function(){if(n.g)if(s)for(var l="",d=s.split("&"),p=0;p<d.length;p++){var _=d[p].split("=");if(1<_.length){var b=_[0];_=_[1];var D=b.split("_");l=2<=D.length&&"type"==D[1]?l+(b+"=")+_+"&":l+(b+"=redacted&")}}else l=null;else l=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+t+"\n"+e+"\n"+l})}(n.j,n.u,n.A,n.m,n.X,n.s)}function dA(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function hA(n,t,e){let r,i=!0;for(;!n.I&&n.C<e.length;){if(r=WN(n,e),r==O_){4==t&&(n.o=4,ms(14),i=!1),Zu(n.j,n.m,null,"[Incomplete Response]");break}if(r==R_){n.o=4,ms(15),Zu(n.j,n.m,e,"[Invalid Chunk]"),i=!1;break}Zu(n.j,n.m,r,null),Ku(n,r)}dA(n)&&r!=O_&&r!=R_&&(n.h.g="",n.C=0),4!=t||0!=e.length||n.h.h||(n.o=1,ms(16),i=!1),n.i=n.i&&i,i?0<e.length&&!n.aa&&(n.aa=!0,(t=n.l).g==n&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+e.length),k0(t),t.L=!0,ms(11))):(Zu(n.j,n.m,e,"[Invalid Chunked Response]"),qc(n),Bp(n))}function WN(n,t){var e=n.C,i=t.indexOf("\n",e);return-1==i?O_:(e=Number(t.substring(e,i)),isNaN(e)?R_:(i+=1)+e>t.length?O_:(t=t.substr(i,e),n.C=i+e,t))}function Th(n){n.Y=Date.now()+n.P,Lp(n,n.P)}function Lp(n,t){if(null!=n.B)throw Error("WatchDog timer not null");n.B=$c(vr(n.eb,n),t)}function P_(n){n.B&&(Gt.clearTimeout(n.B),n.B=null)}function Bp(n){0==n.l.G||n.I||R0(n.l,n)}function qc(n){P_(n);var t=n.L;t&&"function"==typeof t.na&&t.na(),n.L=null,o0(n.W),oA(n.V),n.g&&(t=n.g,n.g=null,t.abort(),t.na())}function Ku(n,t){try{var e=n.l;if(0!=e.G&&(e.g==n||w0(e.i,n)))if(e.I=n.N,!n.J&&w0(e.i,n)&&3==e.G){try{var i=e.Ca.g.parse(t)}catch(_){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0])e:if(e.u)e.ta=r[1],0<e.ta-e.U&&37500>r[2]&&e.N&&0==e.A&&!e.v&&(e.v=$c(vr(e.ab,e),6e3));else{if(e.g){if(!(e.g.F+3e3<n.F))break e;ic(e),ed(e)}vx(e),ms(18)}if(1>=ax(e.i)&&e.ka){try{e.ka()}catch(_){}e.ka=void 0}}else Bh(e,11)}else if((n.J||e.g==n)&&ic(e),!Ls(t))for(r=e.Ca.g.parse(t),t=0;t<r.length;t++){let _=r[t];if(e.U=_[0],_=_[1],2==e.G)if("c"==_[0]){e.J=_[1],e.la=_[2];const b=_[3];null!=b&&(e.ma=b,e.h.info("VER="+e.ma));const D=_[4];null!=D&&(e.za=D,e.h.info("SVER="+e.za));const I=_[5];null!=I&&"number"==typeof I&&0<I&&(e.K=i=1.5*I,e.h.info("backChannelRequestTimeoutMs_="+i)),i=e;const P=n.g;if(P){const U=P.g?P.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(U){var s=i.i;!s.g&&(Kr(U,"spdy")||Kr(U,"quic")||Kr(U,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(L_(s,s.h),s.h=null))}if(i.D){const Q=P.g?P.g.getResponseHeader("X-HTTP-Session-Id"):null;Q&&(i.sa=Q,pi(i.F,i.D,Q))}}e.G=3,e.j&&e.j.xa(),e.$&&(e.O=Date.now()-n.F,e.h.info("Handshake RTT: "+e.O+"ms"));var l=n;if((i=e).oa=bx(i,i.H?i.la:null,i.W),l.J){lx(i.i,l);var d=l,p=i.K;p&&d.setTimeout(p),d.B&&(P_(d),Th(d)),i.g=l}else _x(i);0<e.l.length&&qp(e)}else"stop"!=_[0]&&"close"!=_[0]||Bh(e,7);else 3==e.G&&("stop"==_[0]||"close"==_[0]?"stop"==_[0]?Bh(e,7):$p(e):"noop"!=_[0]&&e.j&&e.j.wa(_),e.A=0)}ec(4)}catch(_){}}function p0(n,t){if(n.forEach&&"function"==typeof n.forEach)n.forEach(t,void 0);else if(m_(n)||"string"==typeof n)kD(n,t,void 0);else{if(n.T&&"function"==typeof n.T)var e=n.T();else if(n.R&&"function"==typeof n.R)e=void 0;else if(m_(n)||"string"==typeof n){e=[];for(var i=n.length,r=0;r<i;r++)e.push(r)}else for(r in e=[],i=0,n)e[i++]=r;i=function fA(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(m_(n)){for(var t=[],e=n.length,i=0;i<e;i++)t.push(n[i]);return t}for(i in t=[],e=0,n)t[e++]=n[i];return t}(n),r=i.length;for(var s=0;s<r;s++)t.call(void 0,i[s],e&&e[s],n)}}function Ih(n,t){this.h={},this.g=[],this.i=0;var e=arguments.length;if(1<e){if(e%2)throw Error("Uneven number of arguments");for(var i=0;i<e;i+=2)this.set(arguments[i],arguments[i+1])}else if(n)if(n instanceof Ih)for(e=n.T(),i=0;i<e.length;i++)this.set(e[i],n.get(e[i]));else for(i in n)this.set(i,n[i])}function m0(n){if(n.i!=n.g.length){for(var t=0,e=0;t<n.g.length;){var i=n.g[t];Qu(n.h,i)&&(n.g[e++]=i),t++}n.g.length=e}if(n.i!=n.g.length){var r={};for(e=t=0;t<n.g.length;)Qu(r,i=n.g[t])||(n.g[e++]=i,r[i]=1),t++;n.g.length=e}}function Qu(n,t){return Object.prototype.hasOwnProperty.call(n,t)}(Qe=Mh.prototype).setTimeout=function(n){this.P=n},Qe.gb=function(n){n=n.target;const t=this.L;t&&3==nc(n)?t.l():this.Ia(n)},Qe.Ia=function(n){try{if(n==this.g)e:{const b=nc(this.g);var t=this.g.Da();const D=this.g.ba();if(!(3>b)&&(3!=b||v_||this.g&&(this.h.h||this.g.ga()||px(this.g)))){this.I||4!=b||7==t||ec(8==t||0>=D?3:2),P_(this);var e=this.g.ba();this.N=e;t:if(dA(this)){var i=px(this.g);n="";var r=i.length,s=4==nc(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){qc(this),Bp(this);var l="";break t}this.h.i=new Gt.TextDecoder}for(t=0;t<r;t++)this.h.h=!0,n+=this.h.i.decode(i[t],{stream:s&&t==r-1});i.splice(0,r),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ga();if(this.i=200==e,function lA(n,t,e,i,r,s,l){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+t+"\n"+e+"\n"+s+" "+l})}(this.j,this.u,this.A,this.m,this.X,b,e),this.i){if(this.$&&!this.J){t:{if(this.g){var d,p=this.g;if((d=p.g?p.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ls(d)){var _=d;break t}}_=null}if(!(e=_)){this.i=!1,this.o=3,ms(12),qc(this),Bp(this);break e}Zu(this.j,this.m,e,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ku(this,e)}this.U?(hA(this,b,l),v_&&this.i&&3==b&&(Di(this.V,this.W,"tick",this.fb),this.W.start())):(Zu(this.j,this.m,l,null),Ku(this,l)),4==b&&qc(this),this.i&&!this.I&&(4==b?R0(this.l,this):(this.i=!1,Th(this)))}else 400==e&&0<l.indexOf("Unknown SID")?(this.o=3,ms(12)):(this.o=0,ms(13)),qc(this),Bp(this)}}}catch(b){}},Qe.fb=function(){if(this.g){var n=nc(this.g),t=this.g.ga();this.C<t.length&&(P_(this),hA(this,n,t),this.i&&4!=n&&Th(this))}},Qe.cancel=function(){this.I=!0,qc(this)},Qe.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function WD(n,t){n.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(ec(3),ms(17)),qc(this),this.o=2,Bp(this)):Lp(this,this.Y-n)},(Qe=Ih.prototype).R=function(){m0(this);for(var n=[],t=0;t<this.g.length;t++)n.push(this.h[this.g[t]]);return n},Qe.T=function(){return m0(this),this.g.concat()},Qe.get=function(n,t){return Qu(this.h,n)?this.h[n]:t},Qe.set=function(n,t){Qu(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=t},Qe.forEach=function(n,t){for(var e=this.T(),i=0;i<e.length;i++){var r=e[i],s=this.get(r);n.call(t,s,r,this)}};var g0=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Xu(n,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Xu){this.g=void 0!==t?t:n.g,N_(this,n.j),this.s=n.s,Vp(this,n.i),F_(this,n.m),this.l=n.l,t=n.h;var e=new kh;e.i=t.i,t.g&&(e.g=new Ih(t.g),e.h=t.h),_0(this,e),this.o=n.o}else n&&(e=String(n).match(g0))?(this.g=!!t,N_(this,e[1]||"",!0),this.s=Hp(e[2]||""),Vp(this,e[3]||"",!0),F_(this,e[4]),this.l=Hp(e[5]||"",!0),_0(this,e[6]||"",!0),this.o=Hp(e[7]||"")):(this.g=!!t,this.h=new kh(null,this.g))}function Bs(n){return new Xu(n)}function N_(n,t,e){n.j=e?Hp(t,!0):t,n.j&&(n.j=n.j.replace(/:$/,""))}function Vp(n,t,e){n.i=e?Hp(t,!0):t}function F_(n,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);n.m=t}else n.m=null}function _0(n,t,e){t instanceof kh?(n.h=t,function yA(n,t){t&&!n.j&&(Wc(n),n.i=null,n.g.forEach(function(e,i){var r=i.toLowerCase();i!=r&&(nx(this,i),rx(this,r,e))},n)),n.j=t}(n.h,n.g)):(e||(t=Ah(t,y0)),n.h=new kh(t,n.g))}function pi(n,t,e){n.h.set(t,e)}function Up(n){return pi(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Hp(n,t){return n?t?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Ah(n,t,e){return"string"==typeof n?(n=encodeURI(n).replace(t,ex),e&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function ex(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Xu.prototype.toString=function(){var n=[],t=this.j;t&&n.push(Ah(t,tx,!0),":");var e=this.i;return(e||"file"==t)&&(n.push("//"),(t=this.s)&&n.push(Ah(t,tx,!0),"@"),n.push(encodeURIComponent(String(e)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(e=this.m)&&n.push(":",String(e))),(e=this.l)&&(this.i&&"/"!=e.charAt(0)&&n.push("/"),n.push(Ah(e,"/"==e.charAt(0)?_A:gA,!0))),(e=this.h.toString())&&n.push("?",e),(e=this.o)&&n.push("#",Ah(e,vA)),n.join("")};var tx=/[#\/\?@]/g,gA=/[#\?:]/g,_A=/[#\?]/g,y0=/[#\?@]/g,vA=/#/g;function kh(n,t){this.h=this.g=null,this.i=n||null,this.j=!!t}function Wc(n){n.g||(n.g=new Ih,n.h=0,n.i&&function pA(n,t){if(n){n=n.split("&");for(var e=0;e<n.length;e++){var i=n[e].indexOf("="),r=null;if(0<=i){var s=n[e].substring(0,i);r=n[e].substring(i+1)}else s=n[e];t(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(n.i,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function nx(n,t){Wc(n),t=Rh(n,t),Qu(n.g.h,t)&&(n.i=null,n.h-=n.g.get(t).length,Qu((n=n.g).h,t)&&(delete n.h[t],n.i--,n.g.length>2*n.i&&m0(n)))}function ix(n,t){return Wc(n),t=Rh(n,t),Qu(n.g.h,t)}function rx(n,t,e){nx(n,t),0<e.length&&(n.i=null,n.g.set(Rh(n,t),lo(e)),n.h+=e.length)}function Rh(n,t){return t=String(t),n.j&&(t=t.toLowerCase()),t}function sx(n){this.l=n||ox,n=Gt.PerformanceNavigationTiming?0<(n=Gt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Gt.g&&Gt.g.Ea&&Gt.g.Ea()&&Gt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Qe=kh.prototype).add=function(n,t){Wc(this),this.i=null,n=Rh(this,n);var e=this.g.get(n);return e||this.g.set(n,e=[]),e.push(t),this.h+=1,this},Qe.forEach=function(n,t){Wc(this),this.g.forEach(function(e,i){kD(e,function(r){n.call(t,r,i,this)},this)},this)},Qe.T=function(){Wc(this);for(var n=this.g.R(),t=this.g.T(),e=[],i=0;i<t.length;i++)for(var r=n[i],s=0;s<r.length;s++)e.push(t[i]);return e},Qe.R=function(n){Wc(this);var t=[];if("string"==typeof n)ix(this,n)&&(t=Da(t,this.g.get(Rh(this,n))));else{n=this.g.R();for(var e=0;e<n.length;e++)t=Da(t,n[e])}return t},Qe.set=function(n,t){return Wc(this),this.i=null,ix(this,n=Rh(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[t]),this.h+=1,this},Qe.get=function(n,t){return n&&0<(n=this.R(n)).length?String(n[0]):t},Qe.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],t=this.g.T(),e=0;e<t.length;e++){var i=t[e],r=encodeURIComponent(String(i));i=this.R(i);for(var s=0;s<i.length;s++){var l=r;""!==i[s]&&(l+="="+encodeURIComponent(String(i[s]))),n.push(l)}}return this.i=n.join("&")};var ox=10;function b0(n){return!!n.h||!!n.g&&n.g.size>=n.j}function ax(n){return n.h?1:n.g?n.g.size:0}function w0(n,t){return n.h?n.h==t:!!n.g&&n.g.has(t)}function L_(n,t){n.g?n.g.add(t):n.h=t}function lx(n,t){n.h&&n.h==t?n.h=null:n.g&&n.g.has(t)&&n.g.delete(t)}function cx(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let t=n.i;for(const e of n.g.values())t=t.concat(e.D);return t}return lo(n.i)}function C0(){}function E0(){this.g=new C0}function D0(n,t,e){const i=e||"";try{p0(n,function(r,s){let l=r;Dp(r)&&(l=Ap(r)),t.push(i+s+"="+encodeURIComponent(l))})}catch(r){throw t.push(i+"type="+encodeURIComponent("_badmap")),r}}function Oh(n,t,e,i,r){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,r(i)}catch(s){}}function jp(n){this.l=n.$b||null,this.j=n.ib||!1}function B_(n,t){or.call(this),this.D=n,this.u=t,this.m=void 0,this.readyState=Gp,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}sx.prototype.cancel=function(){if(this.i=cx(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},C0.prototype.stringify=function(n){return Gt.JSON.stringify(n,void 0)},C0.prototype.parse=function(n){return Gt.JSON.parse(n,void 0)},yr(jp,k_),jp.prototype.g=function(){return new B_(this.l,this.j)},jp.prototype.i=function(n){return function(){return n}}({}),yr(B_,or);var Gp=0;function dx(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Ph(n){n.readyState=4,n.l=null,n.j=null,n.A=null,zp(n)}function zp(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Qe=B_.prototype).open=function(n,t){if(this.readyState!=Gp)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=t,this.readyState=1,zp(this)},Qe.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(t.body=n),(this.D||Gt).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Qe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ph(this)),this.readyState=Gp},Qe.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,zp(this)),this.g&&(this.readyState=3,zp(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Gt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;dx(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Qe.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var t=n.value?n.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!n.done}))&&(this.response=this.responseText+=t)}n.done?Ph(this):zp(this),3==this.readyState&&dx(this)}},Qe.Ua=function(n){this.g&&(this.response=this.responseText=n,Ph(this))},Qe.Ta=function(n){this.g&&(this.response=n,Ph(this))},Qe.ha=function(){this.g&&Ph(this)},Qe.setRequestHeader=function(n,t){this.v.append(n,t)},Qe.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Qe.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],t=this.h.entries();for(var e=t.next();!e.done;)n.push((e=e.value)[0]+": "+e[1]),e=t.next();return n.join("\r\n")},Object.defineProperty(B_.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var hx=Gt.JSON.parse;function Qi(n){or.call(this),this.headers=new Ih,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=x0,this.K=this.L=!1}yr(Qi,or);var x0="",YN=/^https?$/i,wA=["POST","PUT"];function CA(n){return"content-type"==n.toLowerCase()}function Ju(n,t){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=t,n.m=5,Nh(n),S0(n)}function Nh(n){n.D||(n.D=!0,br(n,"complete"),br(n,"error"))}function fx(n){if(n.h&&void 0!==f_&&(!n.C[1]||4!=nc(n)||2!=n.ba()))if(n.v&&4==nc(n))a0(n.Fa,0,n);else if(br(n,"readystatechange"),4==nc(n)){n.h=!1;try{const d=n.ba();e:switch(d){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var e;if(!(e=t)){var i;if(i=0===d){var r=String(n.H).match(g0)[1]||null;if(!r&&Gt.self&&Gt.self.location){var s=Gt.self.location.protocol;r=s.substr(0,s.length-1)}i=!YN.test(r?r.toLowerCase():"")}e=i}if(e)br(n,"complete"),br(n,"success");else{n.m=6;try{var l=2<nc(n)?n.g.statusText:""}catch(p){l=""}n.j=l+" ["+n.ba()+"]",Nh(n)}}finally{S0(n)}}}function S0(n,t){if(n.g){M0(n);const e=n.g,i=n.C[0]?p_:null;n.g=null,n.C=null,t||br(n,"ready");try{e.onreadystatechange=i}catch(r){}}}function M0(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Gt.clearTimeout(n.A),n.A=null)}function nc(n){return n.g?n.g.readyState:0}function px(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case x0:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(t){return null}}function T0(n,t,e){e:{for(i in e){var i=!1;break e}i=!0}i||(e=function EA(n){let t="";return xp(n,function(e,i){t+=i,t+=":",t+=e,t+="\r\n"}),t}(e),"string"==typeof n?null!=e&&encodeURIComponent(String(e)):pi(n,t,e))}function Fh(n,t,e){return e&&e.internalChannelParams&&e.internalChannelParams[n]||t}function I0(n){this.za=0,this.l=[],this.h=new Pp,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Fh("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Fh("baseRetryDelayMs",5e3,n),this.$a=Fh("retryDelaySeedMs",1e4,n),this.Ya=Fh("forwardChannelMaxRetries",2,n),this.ra=Fh("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new sx(n&&n.concurrentRequestLimit),this.Ca=new E0,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function $p(n){if(Lh(n),3==n.G){var t=n.V++,e=Bs(n.F);pi(e,"SID",n.J),pi(e,"RID",t),pi(e,"TYPE","terminate"),Wp(n,e),(t=new Mh(n,n.h,t,void 0)).K=2,t.v=Up(Bs(e)),e=!1,Gt.navigator&&Gt.navigator.sendBeacon&&(e=Gt.navigator.sendBeacon(t.v.toString(),"")),!e&&Gt.Image&&((new Image).src=t.v,e=!0),e||(t.g=DA(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Th(t)}O0(n)}function ed(n){n.g&&(k0(n),n.g.cancel(),n.g=null)}function Lh(n){ed(n),n.u&&(Gt.clearTimeout(n.u),n.u=null),ic(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Gt.clearTimeout(n.m),n.m=null)}function A0(n,t){n.l.push(new class{constructor(n,t){this.h=n,this.g=t}}(n.Za++,t)),3==n.G&&qp(n)}function qp(n){b0(n.i)||n.m||(n.m=!0,kp(n.Ha,n),n.C=0)}function gx(n,t){var e;e=t?t.m:n.V++;const i=Bs(n.F);pi(i,"SID",n.J),pi(i,"RID",e),pi(i,"AID",n.U),Wp(n,i),n.o&&n.s&&T0(i,n.o,n.s),e=new Mh(n,n.h,e,n.C+1),null===n.o&&(e.H=n.s),t&&(n.l=t.D.concat(n.l)),t=U_(n,e,1e3),e.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),L_(n.i,e),f0(e,i,t)}function Wp(n,t){n.j&&p0({},function(e,i){pi(t,i,e)})}function U_(n,t,e){e=Math.min(n.l.length,e);var i=n.j?vr(n.j.Oa,n.j,n):null;e:{var r=n.l;let s=-1;for(;;){const l=["count="+e];-1==s?0<e?(s=r[0].h,l.push("ofs="+s)):s=0:l.push("ofs="+s);let d=!0;for(let p=0;p<e;p++){let _=r[p].h;const b=r[p].g;if(_-=s,0>_)s=Math.max(0,r[p].h-100),d=!1;else try{D0(b,l,"req"+_+"_")}catch(D){i&&i(b)}}if(d){i=l.join("&");break e}}}return n=n.l.splice(0,e),t.D=n,i}function _x(n){n.g||n.u||(n.Y=1,kp(n.Ga,n),n.A=0)}function vx(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=$c(vr(n.Ga,n),td(n,n.A)),n.A++,0))}function k0(n){null!=n.B&&(Gt.clearTimeout(n.B),n.B=null)}function yx(n){n.g=new Mh(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var t=Bs(n.oa);pi(t,"RID","rpc"),pi(t,"SID",n.J),pi(t,"CI",n.N?"0":"1"),pi(t,"AID",n.U),Wp(n,t),pi(t,"TYPE","xmlhttp"),n.o&&n.s&&T0(t,n.o,n.s),n.K&&n.g.setTimeout(n.K);var e=n.g;n=n.la,e.K=1,e.v=Up(Bs(t)),e.s=null,e.U=!0,uA(e,n)}function ic(n){null!=n.v&&(Gt.clearTimeout(n.v),n.v=null)}function R0(n,t){var e=null;if(n.g==t){ic(n),k0(n),n.g=null;var i=2}else{if(!w0(n.i,t))return;e=t.D,lx(n.i,t),i=1}if(n.I=t.N,0!=n.G)if(t.i)if(1==i){e=t.s?t.s.length:0,t=Date.now()-t.F;var r=n.C;br(i=A_(),new XD(i,e,t,r)),qp(n)}else _x(n);else if(3==(r=t.o)||0==r&&0<n.I||!(1==i&&function mx(n,t){return!(ax(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=t.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=$c(vr(n.Ha,n,t),td(n,n.C)),n.C++,0)))}(n,t)||2==i&&vx(n)))switch(e&&0<e.length&&(t=n.i,t.i=t.i.concat(e)),r){case 1:Bh(n,5);break;case 4:Bh(n,10);break;case 3:Bh(n,6);break;default:Bh(n,2)}}function td(n,t){let e=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(e*=2),e*t}function Bh(n,t){if(n.h.info("Error code "+t),2==t){var e=null;n.j&&(e=null);var i=vr(n.jb,n);e||(e=new Xu("//www.google.com/images/cleardot.gif"),Gt.location&&"http"==Gt.location.protocol||N_(e,"https"),Up(e)),function ux(n,t){const e=new Pp;if(Gt.Image){const i=new Image;i.onload=__(Oh,e,i,"TestLoadImage: loaded",!0,t),i.onerror=__(Oh,e,i,"TestLoadImage: error",!1,t),i.onabort=__(Oh,e,i,"TestLoadImage: abort",!1,t),i.ontimeout=__(Oh,e,i,"TestLoadImage: timeout",!1,t),Gt.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else t(!1)}(e.toString(),i)}else ms(2);n.G=0,n.j&&n.j.va(t),O0(n),Lh(n)}function O0(n){n.G=0,n.I=-1,n.j&&((0!=cx(n.i).length||0!=n.l.length)&&(n.i.i.length=0,lo(n.l),n.l.length=0),n.j.ua())}function bx(n,t,e){let i=function mA(n){return n instanceof Xu?Bs(n):new Xu(n,void 0)}(e);if(""!=i.i)t&&Vp(i,t+"."+i.i),F_(i,i.m);else{const r=Gt.location;i=function v0(n,t,e,i){var r=new Xu(null,void 0);return n&&N_(r,n),t&&Vp(r,t),e&&F_(r,e),i&&(r.l=i),r}(r.protocol,t?t+"."+r.hostname:r.hostname,+r.port,e)}return n.aa&&xp(n.aa,function(r,s){pi(i,s,r)}),e=n.sa,(t=n.D)&&e&&pi(i,t,e),pi(i,"VER",n.ma),Wp(n,i),i}function DA(n,t,e){if(t&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new Qi(e&&n.Ba&&!n.qa?new jp({ib:!0}):n.qa)).L=n.H,t}function P0(){}function N0(){if(Jl&&!(10<=Number(QI)))throw Error("Environmental error: no available transport.")}function Vs(n,t){or.call(this),this.g=new I0(t),this.l=n,this.h=t&&t.messageUrlParams||null,n=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(n?n["X-WebChannel-Content-Type"]=t.messageContentType:n={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(n?n["X-WebChannel-Client-Profile"]=t.ya:n={"X-WebChannel-Client-Profile":t.ya}),this.g.P=n,(n=t&&t.httpHeadersOverwriteParam)&&!Ls(n)&&(this.g.o=n),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Ls(t)&&(this.g.D=t,null!==(n=this.h)&&t in n&&t in(n=this.h)&&delete n[t]),this.j=new nd(this)}function H_(n){c0.call(this);var t=n.__sm__;if(t){e:{for(const e in t){n=e;break e}n=void 0}(this.i=n)&&(n=this.i,t=null!==t&&n in t?t[n]:void 0),this.data=t}else this.data=n}function wx(){u0.call(this),this.status=1}function nd(n){this.g=n}(Qe=Qi.prototype).ea=function(n,t,e,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);t=t?t.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():d0.g(),this.C=function JD(n){return n.h||(n.h=n.i())}(this.u?this.u:d0),this.g.onreadystatechange=vr(this.Fa,this);try{this.F=!0,this.g.open(t,String(n),!0),this.F=!1}catch(s){return void Ju(this,s)}n=e||"";const r=new Ih(this.headers);i&&p0(i,function(s,l){r.set(l,s)}),i=function KI(n){e:{var t=CA;const e=n.length,i="string"==typeof n?n.split(""):n;for(let r=0;r<e;r++)if(r in i&&t.call(void 0,i[r],r,n)){t=r;break e}t=-1}return 0>t?null:"string"==typeof n?n.charAt(t):n[t]}(r.T()),e=Gt.FormData&&n instanceof Gt.FormData,!(0<=Ea(wA,t))||i||e||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),r.forEach(function(s,l){this.g.setRequestHeader(l,s)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{M0(this),0<this.B&&((this.K=function V_(n){return Jl&&function VD(){return function ND(n){var t=BD;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=n(9)}(function(){let n=0;const t=qb(String(Eh)).split("."),e=qb("9").split("."),i=Math.max(t.length,e.length);for(let l=0;0==n&&l<i;l++){var r=t[l]||"",s=e[l]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==r[0].length&&0==s[0].length)break;n=Wb(0==r[1].length?0:parseInt(r[1],10),0==s[1].length?0:parseInt(s[1],10))||Wb(0==r[2].length,0==s[2].length)||Wb(r[2],s[2]),r=r[3],s=s[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=vr(this.pa,this)):this.A=a0(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){Ju(this,s)}},Qe.pa=function(){void 0!==f_&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,br(this,"timeout"),this.abort(8))},Qe.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,br(this,"complete"),br(this,"abort"),S0(this))},Qe.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),S0(this,!0)),Qi.Z.M.call(this)},Qe.Fa=function(){this.s||(this.F||this.v||this.l?fx(this):this.cb())},Qe.cb=function(){fx(this)},Qe.ba=function(){try{return 2<nc(this)?this.g.status:-1}catch(n){return-1}},Qe.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Qe.Qa=function(n){if(this.g){var t=this.g.responseText;return n&&0==t.indexOf(n)&&(t=t.substring(n.length)),hx(t)}},Qe.Da=function(){return this.m},Qe.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Qe=I0.prototype).ma=8,Qe.G=1,Qe.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(t){}},Qe.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const r=new Mh(this,this.h,n,void 0);let s=this.s;if(this.P&&(s?(s=Ch(s),Yb(s,this.P)):s=this.P),null===this.o&&(r.H=s),this.ja)e:{for(var t=0,e=0;e<this.l.length;e++){var i=this.l[e];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(t+=i)){t=e;break e}if(4096===t||e===this.l.length-1){t=e+1;break e}}t=1e3}else t=1e3;t=U_(this,r,t),pi(e=Bs(this.F),"RID",n),pi(e,"CVER",22),this.D&&pi(e,"X-HTTP-Session-Id",this.D),Wp(this,e),this.o&&s&&T0(e,this.o,s),L_(this.i,r),this.Ra&&pi(e,"TYPE","init"),this.ja?(pi(e,"$req",t),pi(e,"SID","null"),r.$=!0,f0(r,e,null)):f0(r,e,t),this.G=2}}else 3==this.G&&(n?gx(this,n):0==this.l.length||b0(this.i)||gx(this))},Qe.Ga=function(){if(this.u=null,yx(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=$c(vr(this.bb,this),n)}},Qe.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,ms(10),ed(this),yx(this))},Qe.ab=function(){null!=this.v&&(this.v=null,ed(this),vx(this),ms(19))},Qe.jb=function(n){n?(this.h.info("Successfully pinged google.com"),ms(2)):(this.h.info("Failed to ping google.com"),ms(1))},(Qe=P0.prototype).xa=function(){},Qe.wa=function(){},Qe.va=function(){},Qe.ua=function(){},Qe.Oa=function(){},N0.prototype.g=function(n,t){return new Vs(n,t)},yr(Vs,or),Vs.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,t=this.l,e=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),kp(vr(n.hb,n,t))),ms(0),n.W=t,n.aa=e||{},n.N=n.X,n.F=bx(n,null,n.W),qp(n)},Vs.prototype.close=function(){$p(this.g)},Vs.prototype.u=function(n){if("string"==typeof n){var t={};t.__data__=n,A0(this.g,t)}else this.v?((t={}).__data__=Ap(n),A0(this.g,t)):A0(this.g,n)},Vs.prototype.M=function(){this.g.j=null,delete this.j,$p(this.g),delete this.g,Vs.Z.M.call(this)},yr(H_,c0),yr(wx,u0),yr(nd,P0),nd.prototype.xa=function(){br(this.g,"a")},nd.prototype.wa=function(n){br(this.g,new H_(n))},nd.prototype.va=function(n){br(this.g,new wx(n))},nd.prototype.ua=function(){br(this.g,"b")},N0.prototype.createWebChannel=N0.prototype.g,Vs.prototype.send=Vs.prototype.u,Vs.prototype.open=Vs.prototype.m,Vs.prototype.close=Vs.prototype.close,Np.NO_ERROR=0,Np.TIMEOUT=8,Np.HTTP_ERROR=6,l0.COMPLETE="complete",Sh.EventType=tc,tc.OPEN="a",tc.CLOSE="b",tc.ERROR="c",tc.MESSAGE="d",or.prototype.listen=or.prototype.N,Qi.prototype.listenOnce=Qi.prototype.O,Qi.prototype.getLastError=Qi.prototype.La,Qi.prototype.getLastErrorCode=Qi.prototype.Da,Qi.prototype.getStatus=Qi.prototype.ba,Qi.prototype.getResponseJson=Qi.prototype.Qa,Qi.prototype.getResponseText=Qi.prototype.ga,Qi.prototype.send=Qi.prototype.ea;var xA=Xl.createWebChannelTransport=function(){return new N0},SA=Xl.getStatEventTarget=function(){return A_()},F0=Xl.ErrorCode=Np,MA=Xl.EventType=l0,TA=Xl.Event=zc,Cx=Xl.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},IA=Xl.FetchXmlHttpFactory=jp,j_=Xl.WebChannel=Sh,Yp=Xl.XhrIo=Qi;const L0="@firebase/firestore";class ar{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}ar.UNAUTHENTICATED=new ar(null),ar.GOOGLE_CREDENTIALS=new ar("google-credentials-uid"),ar.FIRST_PARTY=new ar("first-party-uid"),ar.MOCK_USER=new ar("mock-user");let id="9.8.4";const rc=new sr.Yd("@firebase/firestore");function G_(){return rc.logLevel}function je(n,...t){if(rc.logLevel<=sr.in.DEBUG){const e=t.map(B0);rc.debug(`Firestore (${id}): ${n}`,...e)}}function Xi(n,...t){if(rc.logLevel<=sr.in.ERROR){const e=t.map(B0);rc.error(`Firestore (${id}): ${n}`,...e)}}function Zp(n,...t){if(rc.logLevel<=sr.in.WARN){const e=t.map(B0);rc.warn(`Firestore (${id}): ${n}`,...e)}}function B0(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(e){return n}}function mt(n="Unexpected state"){const t=`FIRESTORE (${id}) INTERNAL ASSERTION FAILED: `+n;throw Xi(t),new Error(t)}function Pt(n,t){n||mt()}function ct(n,t){return n}const ye={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ne extends F.ZR{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class wr{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}class Qp{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Xp{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(ar.UNAUTHENTICATED))}shutdown(){}}class kA{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class RA{constructor(t){this.t=t,this.currentUser=ar.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){var i=this;let r=this.i;const s=_=>this.i!==r?(r=this.i,e(_)):Promise.resolve();let l=new wr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new wr,t.enqueueRetryable(()=>s(this.currentUser))};const d=()=>{const _=l;t.enqueueRetryable((0,be.Z)(function*(){yield _.promise,yield s(i.currentUser)}))},p=_=>{je("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(_=>p(_)),setTimeout(()=>{if(!this.auth){const _=this.t.getImmediate({optional:!0});_?p(_):(je("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new wr)}},0),d()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(je("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Pt("string"==typeof i.accessToken),new Qp(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Pt(null===t||"string"==typeof t),new ar(t)}}class OA{constructor(t,e,i){this.type="FirstParty",this.user=ar.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",e);const r=t.auth.getAuthHeaderValueForFirstParty([]);r&&this.headers.set("Authorization",r),i&&this.headers.set("X-Goog-Iam-Authorization-Token",i)}}class z_{constructor(t,e,i){this.h=t,this.l=e,this.m=i}getToken(){return Promise.resolve(new OA(this.h,this.l,this.m))}start(t,e){t.enqueueRetryable(()=>e(ar.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Jp{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class PA{constructor(t){this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(t,e){const i=s=>{null!=s.error&&je("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const l=s.token!==this.p;return this.p=s.token,je("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?e(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>i(s))};const r=s=>{je("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.g.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.g.getImmediate({optional:!0});s?r(s):je("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(Pt("string"==typeof e.token),this.p=e.token,new Jp(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Ex(n){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}class V0{static I(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let i="";for(;i.length<20;){const r=Ex(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<e&&(i+=t.charAt(r[s]%t.length))}return i}}function zt(n,t){return n<t?-1:n>t?1:0}function rd(n,t,e){return n.length===t.length&&n.every((i,r)=>e(i,t[r]))}function Dx(n){return n+"\0"}class mi{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Ne(ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Ne(ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Ne(ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ne(ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return mi.fromMillis(Date.now())}static fromDate(t){return mi.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor(1e6*(t-1e3*e));return new mi(e,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?zt(this.nanoseconds,t.nanoseconds):zt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Nt{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Nt(t)}static min(){return new Nt(new mi(0,0))}static max(){return new Nt(new mi(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class sd{constructor(t,e,i){void 0===e?e=0:e>t.length&&mt(),void 0===i?i=t.length-e:i>t.length-e&&mt(),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return 0===sd.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof sd?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let r=0;r<i;r++){const s=t.get(r),l=e.get(r);if(s<l)return-1;if(s>l)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class mn extends sd{construct(t,e,i){return new mn(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new Ne(ye.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(r=>r.length>0))}return new mn(e)}static emptyPath(){return new mn([])}}const xx=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class xi extends sd{construct(t,e,i){return new xi(t,e,i)}static isValidIdentifier(t){return xx.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),xi.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new xi(["__name__"])}static fromServerFormat(t){const e=[];let i="",r=0;const s=()=>{if(0===i.length)throw new Ne(ye.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let l=!1;for(;r<t.length;){const d=t[r];if("\\"===d){if(r+1===t.length)throw new Ne(ye.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const p=t[r+1];if("\\"!==p&&"."!==p&&"`"!==p)throw new Ne(ye.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=p,r+=2}else"`"===d?(l=!l,r++):"."!==d||l?(i+=d,r++):(s(),r++)}if(s(),l)throw new Ne(ye.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new xi(e)}static emptyPath(){return new xi([])}}class nt{constructor(t){this.path=t}static fromPath(t){return new nt(mn.fromString(t))}static fromName(t){return new nt(mn.fromString(t).popFirst(5))}static empty(){return new nt(mn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===mn.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return mn.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new nt(new mn(t.slice()))}}class $_{constructor(t,e,i,r){this.indexId=t,this.collectionGroup=e,this.fields=i,this.indexState=r}}function U0(n){return n.fields.find(t=>2===t.kind)}function od(n){return n.fields.filter(t=>2!==t.kind)}$_.UNKNOWN_ID=-1;class q_{constructor(t,e){this.fieldPath=t,this.kind=e}}class Vh{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new Vh(0,Us.min())}}function W_(n,t){const e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=Nt.fromTimestamp(1e9===i?new mi(e+1,0):new mi(e,i));return new Us(r,nt.empty(),t)}function H0(n){return new Us(n.readTime,n.key,-1)}class Us{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new Us(Nt.min(),nt.empty(),-1)}static max(){return new Us(Nt.max(),nt.empty(),-1)}}function Y_(n,t){let e=n.readTime.compareTo(t.readTime);return 0!==e?e:(e=nt.comparator(n.documentKey,t.documentKey),0!==e?e:zt(n.largestBatchId,t.largestBatchId))}const j0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Sx{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}function sc(n){return Z_.apply(this,arguments)}function Z_(){return Z_=(0,be.Z)(function*(n){if(n.code!==ye.FAILED_PRECONDITION||n.message!==j0)throw n;je("LocalStore","Unexpectedly lost primary lease")}),Z_.apply(this,arguments)}class ge{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&mt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new ge((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(e,s).next(i,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof ge?e:ge.resolve(e)}catch(e){return ge.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):ge.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):ge.reject(e)}static resolve(t){return new ge((e,i)=>{e(t)})}static reject(t){return new ge((e,i)=>{i(t)})}static waitFor(t){return new ge((e,i)=>{let r=0,s=0,l=!1;t.forEach(d=>{++r,d.next(()=>{++s,l&&s===r&&e()},p=>i(p))}),l=!0,s===r&&e()})}static or(t){let e=ge.resolve(!1);for(const i of t)e=e.next(r=>r?ge.resolve(r):i());return e}static forEach(t,e){const i=[];return t.forEach((r,s)=>{i.push(e.call(this,r,s))}),this.waitFor(i)}static mapArray(t,e){return new ge((i,r)=>{const s=t.length,l=new Array(s);let d=0;for(let p=0;p<s;p++){const _=p;e(t[_]).next(b=>{l[_]=b,++d,d===s&&i(l)},b=>r(b))}})}static doWhile(t,e){return new ge((i,r)=>{const s=()=>{!0===t()?e().next(()=>{s()},r):i()};s()})}}class em{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.T=new wr,this.transaction.oncomplete=()=>{this.T.resolve()},this.transaction.onabort=()=>{e.error?this.T.reject(new ol(t,e.error)):this.T.resolve()},this.transaction.onerror=i=>{const r=G0(i.target.error);this.T.reject(new ol(t,r))}}static open(t,e,i,r){try{return new em(e,t.transaction(r,i))}catch(s){throw new ol(e,s)}}get A(){return this.T.promise}abort(t){t&&this.T.reject(t),this.aborted||(je("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}R(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const e=this.transaction.objectStore(t);return new NA(e)}}class xa{constructor(t,e,i){this.name=t,this.version=e,this.P=i,12.2===xa.v((0,F.z$)())&&Xi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return je("SimpleDb","Removing database:",t),Uh(window.indexedDB.deleteDatabase(t)).toPromise()}static V(){if(!(0,F.hl)())return!1;if(xa.S())return!0;const t=(0,F.z$)(),e=xa.v(t),i=0<e&&e<10,r=xa.D(t),s=0<r&&r<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||i||s)}static S(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.C)}static N(t,e){return t.store(e)}static v(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static D(t){const e=t.match(/Android ([\d.]+)/i),i=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(i)}k(t){var e=this;return(0,be.Z)(function*(){return e.db||(je("SimpleDb","Opening database:",e.name),e.db=yield new Promise((i,r)=>{const s=indexedDB.open(e.name,e.version);s.onsuccess=l=>{i(l.target.result)},s.onblocked=()=>{r(new ol(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=l=>{const d=l.target.error;r("VersionError"===d.name?new Ne(ye.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===d.name?new Ne(ye.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d):new ol(t,d))},s.onupgradeneeded=l=>{je("SimpleDb",'Database "'+e.name+'" requires upgrade from version:',l.oldVersion),e.P.O(l.target.result,s.transaction,l.oldVersion,e.version).next(()=>{je("SimpleDb","Database upgrade to version "+e.version+" complete")})}})),e.M&&(e.db.onversionchange=i=>e.M(i)),e.db})()}F(t){this.M=t,this.db&&(this.db.onversionchange=e=>t(e))}runTransaction(t,e,i,r){var s=this;return(0,be.Z)(function*(){const l="readonly"===e;let d=0;for(;;){++d;try{s.db=yield s.k(t);const p=em.open(s.db,t,l?"readonly":"readwrite",i),_=r(p).next(b=>(p.R(),b)).catch(b=>(p.abort(b),ge.reject(b))).toPromise();return _.catch(()=>{}),yield p.A,_}catch(p){const _=p,b="FirebaseError"!==_.name&&d<3;if(je("SimpleDb","Transaction failed with error:",_.message,"Retrying:",b),s.close(),!b)return Promise.reject(_)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class gs{constructor(t){this.$=t,this.B=!1,this.L=null}get isDone(){return this.B}get U(){return this.L}set cursor(t){this.$=t}done(){this.B=!0}q(t){this.L=t}delete(){return Uh(this.$.delete())}}class ol extends Ne{constructor(t,e){super(ye.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function Yc(n){return"IndexedDbTransactionError"===n.name}class NA{constructor(t){this.store=t}put(t,e){let i;return void 0!==e?(je("SimpleDb","PUT",this.store.name,t,e),i=this.store.put(e,t)):(je("SimpleDb","PUT",this.store.name,"<auto-key>",t),i=this.store.put(t)),Uh(i)}add(t){return je("SimpleDb","ADD",this.store.name,t,t),Uh(this.store.add(t))}get(t){return Uh(this.store.get(t)).next(e=>(void 0===e&&(e=null),je("SimpleDb","GET",this.store.name,t,e),e))}delete(t){return je("SimpleDb","DELETE",this.store.name,t),Uh(this.store.delete(t))}count(){return je("SimpleDb","COUNT",this.store.name),Uh(this.store.count())}K(t,e){const i=this.options(t,e);if(i.index||"function"!=typeof this.store.getAll){const r=this.cursor(i),s=[];return this.G(r,(l,d)=>{s.push(d)}).next(()=>s)}{const r=this.store.getAll(i.range);return new ge((s,l)=>{r.onerror=d=>{l(d.target.error)},r.onsuccess=d=>{s(d.target.result)}})}}j(t,e){const i=this.store.getAll(t,null===e?void 0:e);return new ge((r,s)=>{i.onerror=l=>{s(l.target.error)},i.onsuccess=l=>{r(l.target.result)}})}W(t,e){je("SimpleDb","DELETE ALL",this.store.name);const i=this.options(t,e);i.H=!1;const r=this.cursor(i);return this.G(r,(s,l,d)=>d.delete())}J(t,e){let i;e?i=t:(i={},e=t);const r=this.cursor(i);return this.G(r,e)}Y(t){const e=this.cursor({});return new ge((i,r)=>{e.onerror=s=>{const l=G0(s.target.error);r(l)},e.onsuccess=s=>{const l=s.target.result;l?t(l.primaryKey,l.value).next(d=>{d?l.continue():i()}):i()}})}G(t,e){const i=[];return new ge((r,s)=>{t.onerror=l=>{s(l.target.error)},t.onsuccess=l=>{const d=l.target.result;if(!d)return void r();const p=new gs(d),_=e(d.primaryKey,d.value,p);if(_ instanceof ge){const b=_.catch(D=>(p.done(),ge.reject(D)));i.push(b)}p.isDone?r():null===p.U?d.continue():d.continue(p.U)}}).next(()=>ge.waitFor(i))}options(t,e){let i;return void 0!==t&&("string"==typeof t?i=t:e=t),{index:i,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const i=this.store.index(t.index);return t.H?i.openKeyCursor(t.range,e):i.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function Uh(n){return new ge((t,e)=>{n.onsuccess=i=>{t(i.target.result)},n.onerror=i=>{const r=G0(i.target.error);e(r)}})}let Hh=!1;function G0(n){const t=xa.v((0,F.z$)());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(e)>=0){const i=new Ne("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Hh||(Hh=!0,setTimeout(()=>{throw i},0)),i}}return n}class z0{constructor(t,e){this.asyncQueue=t,this.X=e,this.task=null}start(){}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}Z(t){var e=this;je("IndexBackiller",`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(0,be.Z)(function*(){e.task=null;try{je("IndexBackiller",`Documents written: ${yield e.X.tt()}`)}catch(i){Yc(i)?je("IndexBackiller","Ignoring IndexedDB error during index backfill: ",i):yield sc(i)}yield e.Z(1)}))}}class FA{constructor(t,e){this.localStore=t,this.persistence=e}tt(t=50){var e=this;return(0,be.Z)(function*(){return e.persistence.runTransaction("Backfill Indexes","readwrite-primary",i=>e.et(i,t))})()}et(t,e){const i=new Set;let r=e,s=!0;return ge.doWhile(()=>!0===s&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(l=>{if(null!==l&&!i.has(l))return je("IndexBackiller",`Processing collection: ${l}`),this.nt(t,l,r).next(d=>{r-=d,i.add(l)});s=!1})).next(()=>e-r)}nt(t,e,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next(r=>this.localStore.localDocuments.getNextDocuments(t,e,r,i).next(s=>{const l=s.changes;return this.localStore.indexManager.updateIndexEntries(t,l).next(()=>this.st(r,s)).next(d=>(je("IndexBackiller",`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(t,e,d))).next(()=>l.size)}))}st(t,e){let i=t;return e.changes.forEach((r,s)=>{const l=H0(s);Y_(l,i)>0&&(i=l)}),new Us(i.readTime,i.documentKey,Math.max(e.batchId,t.largestBatchId))}}class _s{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=i=>this.it(i),this.rt=i=>e.writeSequenceNumber(i))}it(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.rt&&this.rt(t),t}}function Mx(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function ad(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function K_(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}_s.ot=-1;class Si{constructor(t,e){this.comparator=t,this.root=e||Ji.EMPTY}insert(t,e){return new Si(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Ji.BLACK,null,null))}remove(t){return new Si(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ji.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(0===i)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(0===r)return e+i.left.size;r<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){const t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new tm(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new tm(this.root,t,this.comparator,!1)}getReverseIterator(){return new tm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new tm(this.root,t,this.comparator,!0)}}class tm{constructor(t,e,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=e?i(t.key,e):1,e&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(0===s){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Ji{constructor(t,e,i,r,s){this.key=t,this.value=e,this.color=null!=i?i:Ji.RED,this.left=null!=r?r:Ji.EMPTY,this.right=null!=s?s:Ji.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,r,s){return new Ji(null!=t?t:this.key,null!=e?e:this.value,null!=i?i:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let r=this;const s=i(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,e,i),null):0===s?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Ji.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===e(t,r.key)){if(r.right.isEmpty())return Ji.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Ji.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Ji.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw mt();const t=this.left.check();if(t!==this.right.check())throw mt();return t+(this.isRed()?0:1)}}Ji.EMPTY=null,Ji.RED=!0,Ji.BLACK=!1,Ji.EMPTY=new class{constructor(){this.size=0}get key(){throw mt()}get value(){throw mt()}get color(){throw mt()}get left(){throw mt()}get right(){throw mt()}copy(n,t,e,i,r){return this}insert(n,t,e){return new Ji(n,t)}remove(n,t){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Un{constructor(t){this.comparator=t,this.data=new Si(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let i;for(i=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new LA(this.data.getIterator())}getIteratorFrom(t){return new LA(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof Un)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=i.getNext().key;if(0!==this.comparator(r,s))return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new Un(this.comparator);return e.data=t,e}}class LA{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ld(n){return n.hasNext()?n.getNext():void 0}class co{constructor(t){this.fields=t,t.sort(xi.comparator)}static empty(){return new co([])}unionWith(t){let e=new Un(xi.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new co(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return rd(this.fields,t.fields,(e,i)=>e.isEqual(i))}}class Pi{constructor(t){this.binaryString=t}static fromBase64String(t){const e=atob(t);return new Pi(e)}static fromUint8Array(t){const e=function(i){let r="";for(let s=0;s<i.length;++s)r+=String.fromCharCode(i[s]);return r}(t);return new Pi(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let i=0;i<t.length;i++)e[i]=t.charCodeAt(i);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return zt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Pi.EMPTY_BYTE_STRING=new Pi("");const Ix=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zc(n){if(Pt(!!n),"string"==typeof n){let t=0;const e=Ix.exec(n);if(Pt(!!e),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:gi(n.seconds),nanos:gi(n.nanos)}}function gi(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function oc(n){return"string"==typeof n?Pi.fromBase64String(n):Pi.fromUint8Array(n)}function Ax(n){var t,e;return"server_timestamp"===(null===(e=((null===(t=null==n?void 0:n.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===e?void 0:e.stringValue)}function kx(n){const t=n.mapValue.fields.__previous_value__;return Ax(t)?kx(t):t}function nm(n){const t=Zc(n.mapValue.fields.__local_write_time__.timestampValue);return new mi(t.seconds,t.nanos)}class Rx{constructor(t,e,i,r,s,l,d,p){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=l,this.autoDetectLongPolling=d,this.useFetchStreams=p}}class al{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new al("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof al&&t.projectId===this.projectId&&t.database===this.database}}function im(n){return null==n}function jh(n){return 0===n&&1/n==-1/0}function $0(n){return"number"==typeof n&&Number.isInteger(n)&&!jh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Kc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Q_={nullValue:"NULL_VALUE"};function Qc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ax(n)?4:UA(n)?9007199254740991:10:mt()}function ll(n,t){if(n===t)return!0;const e=Qc(n);if(e!==Qc(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return nm(n).isEqual(nm(t));case 3:return function(i,r){if("string"==typeof i.timestampValue&&"string"==typeof r.timestampValue&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const s=Zc(i.timestampValue),l=Zc(r.timestampValue);return s.seconds===l.seconds&&s.nanos===l.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return r=t,oc(n.bytesValue).isEqual(oc(r.bytesValue));case 7:return n.referenceValue===t.referenceValue;case 8:return function(i,r){return gi(i.geoPointValue.latitude)===gi(r.geoPointValue.latitude)&&gi(i.geoPointValue.longitude)===gi(r.geoPointValue.longitude)}(n,t);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return gi(i.integerValue)===gi(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const s=gi(i.doubleValue),l=gi(r.doubleValue);return s===l?jh(s)===jh(l):isNaN(s)&&isNaN(l)}return!1}(n,t);case 9:return rd(n.arrayValue.values||[],t.arrayValue.values||[],ll);case 10:return function(i,r){const s=i.mapValue.fields||{},l=r.mapValue.fields||{};if(Mx(s)!==Mx(l))return!1;for(const d in s)if(s.hasOwnProperty(d)&&(void 0===l[d]||!ll(s[d],l[d])))return!1;return!0}(n,t);default:return mt()}var r}function Gh(n,t){return void 0!==(n.values||[]).find(e=>ll(e,t))}function ac(n,t){if(n===t)return 0;const e=Qc(n),i=Qc(t);if(e!==i)return zt(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return zt(n.booleanValue,t.booleanValue);case 2:return function(r,s){const l=gi(r.integerValue||r.doubleValue),d=gi(s.integerValue||s.doubleValue);return l<d?-1:l>d?1:l===d?0:isNaN(l)?isNaN(d)?0:-1:1}(n,t);case 3:return q0(n.timestampValue,t.timestampValue);case 4:return q0(nm(n),nm(t));case 5:return zt(n.stringValue,t.stringValue);case 6:return function(r,s){const l=oc(r),d=oc(s);return l.compareTo(d)}(n.bytesValue,t.bytesValue);case 7:return function(r,s){const l=r.split("/"),d=s.split("/");for(let p=0;p<l.length&&p<d.length;p++){const _=zt(l[p],d[p]);if(0!==_)return _}return zt(l.length,d.length)}(n.referenceValue,t.referenceValue);case 8:return function(r,s){const l=zt(gi(r.latitude),gi(s.latitude));return 0!==l?l:zt(gi(r.longitude),gi(s.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return function(r,s){const l=r.values||[],d=s.values||[];for(let p=0;p<l.length&&p<d.length;++p){const _=ac(l[p],d[p]);if(_)return _}return zt(l.length,d.length)}(n.arrayValue,t.arrayValue);case 10:return function(r,s){if(r===Kc.mapValue&&s===Kc.mapValue)return 0;if(r===Kc.mapValue)return 1;if(s===Kc.mapValue)return-1;const l=r.fields||{},d=Object.keys(l),p=s.fields||{},_=Object.keys(p);d.sort(),_.sort();for(let b=0;b<d.length&&b<_.length;++b){const D=zt(d[b],_[b]);if(0!==D)return D;const I=ac(l[d[b]],p[_[b]]);if(0!==I)return I}return zt(d.length,_.length)}(n.mapValue,t.mapValue);default:throw mt()}}function q0(n,t){if("string"==typeof n&&"string"==typeof t&&n.length===t.length)return zt(n,t);const e=Zc(n),i=Zc(t),r=zt(e.seconds,i.seconds);return 0!==r?r:zt(e.nanos,i.nanos)}function cd(n){return W0(n)}function W0(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const r=Zc(i);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?oc(n.bytesValue).toBase64():"referenceValue"in n?nt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(t=n.geoPointValue).latitude},${t.longitude})`:"arrayValue"in n?function(i){let r="[",s=!0;for(const l of i.values||[])s?s=!1:r+=",",r+=W0(l);return r+"]"}(n.arrayValue):"mapValue"in n?function(i){const r=Object.keys(i.fields||{}).sort();let s="{",l=!0;for(const d of r)l?l=!1:s+=",",s+=`${d}:${W0(i.fields[d])}`;return s+"}"}(n.mapValue):mt();var t}function ud(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function Ox(n){return!!n&&"integerValue"in n}function zh(n){return!!n&&"arrayValue"in n}function BA(n){return!!n&&"nullValue"in n}function VA(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Y0(n){return!!n&&"mapValue"in n}function X_(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return ad(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=X_(i)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=X_(n.arrayValue.values[e]);return t}return Object.assign({},n)}function UA(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function KN(n){return"nullValue"in n?Q_:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?ud(al.empty(),nt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:mt()}function QN(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?ud(al.empty(),nt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Kc:mt()}function HA(n,t){const e=ac(n.value,t.value);return 0!==e?e:n.inclusive&&!t.inclusive?-1:!n.inclusive&&t.inclusive?1:0}function rm(n,t){const e=ac(n.value,t.value);return 0!==e?e:n.inclusive&&!t.inclusive?1:!n.inclusive&&t.inclusive?-1:0}class Xr{constructor(t){this.value=t}static empty(){return new Xr({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!Y0(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=X_(e)}setAll(t){let e=xi.emptyPath(),i={},r=[];t.forEach((l,d)=>{if(!e.isImmediateParentOf(d)){const p=this.getFieldsMap(e);this.applyChanges(p,i,r),i={},r=[],e=d.popLast()}l?i[d.lastSegment()]=X_(l):r.push(d.lastSegment())});const s=this.getFieldsMap(e);this.applyChanges(s,i,r)}delete(t){const e=this.field(t.popLast());Y0(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return ll(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=e.mapValue.fields[t.get(i)];Y0(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,i){ad(e,(r,s)=>t[r]=s);for(const r of i)delete t[r]}clone(){return new Xr(X_(this.value))}}function Z0(n){const t=[];return ad(n.fields,(e,i)=>{const r=new xi([e]);if(Y0(i)){const s=Z0(i.mapValue).fields;if(0===s.length)t.push(r);else for(const l of s)t.push(r.child(l))}else t.push(r)}),new co(t)}class Yn{constructor(t,e,i,r,s,l){this.key=t,this.documentType=e,this.version=i,this.readTime=r,this.data=s,this.documentState=l}static newInvalidDocument(t){return new Yn(t,0,Nt.min(),Nt.min(),Xr.empty(),0)}static newFoundDocument(t,e,i){return new Yn(t,1,e,Nt.min(),i,0)}static newNoDocument(t,e){return new Yn(t,2,e,Nt.min(),Xr.empty(),0)}static newUnknownDocument(t,e){return new Yn(t,3,e,Nt.min(),Xr.empty(),2)}convertToFoundDocument(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Xr.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Xr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Nt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof Yn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Yn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Px{constructor(t,e=null,i=[],r=[],s=null,l=null,d=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=l,this.endAt=d,this.ut=null}}function K0(n,t=null,e=[],i=[],r=null,s=null,l=null){return new Px(n,t,e,i,r,s,l)}function $h(n){const t=ct(n);if(null===t.ut){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>{return(r=i).field.canonicalString()+r.op.toString()+cd(r.value);var r}).join(","),e+="|ob:",e+=t.orderBy.map(i=>{return(r=i).field.canonicalString()+r.dir;var r}).join(","),im(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>cd(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>cd(i)).join(",")),t.ut=e}return t.ut}function qh(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<n.orderBy.length;r++)if(!ew(n.orderBy[r],t.orderBy[r]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let r=0;r<n.filters.length;r++)if((e=n.filters[r]).op!==(i=t.filters[r]).op||!e.field.isEqual(i.field)||!ll(e.value,i.value))return!1;var e,i;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!Lo(n.startAt,t.startAt)&&Lo(n.endAt,t.endAt)}function sm(n){return nt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function om(n,t){return n.filters.filter(e=>e instanceof Pr&&e.field.isEqual(t))}function jA(n,t,e){let i=Q_,r=!0;for(const s of om(n,t)){let l=Q_,d=!0;switch(s.op){case"<":case"<=":l=KN(s.value);break;case"==":case"in":case">=":l=s.value;break;case">":l=s.value,d=!1;break;case"!=":case"not-in":l=Q_}HA({value:i,inclusive:r},{value:l,inclusive:d})<0&&(i=l,r=d)}if(null!==e)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(t)){const l=e.position[s];HA({value:i,inclusive:r},{value:l,inclusive:e.inclusive})<0&&(i=l,r=e.inclusive);break}return{value:i,inclusive:r}}function X0(n,t,e){let i=Kc,r=!0;for(const s of om(n,t)){let l=Kc,d=!0;switch(s.op){case">=":case">":l=QN(s.value),d=!1;break;case"==":case"in":case"<=":l=s.value;break;case"<":l=s.value,d=!1;break;case"!=":case"not-in":l=Kc}rm({value:i,inclusive:r},{value:l,inclusive:d})>0&&(i=l,r=d)}if(null!==e)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(t)){const l=e.position[s];rm({value:i,inclusive:r},{value:l,inclusive:e.inclusive})>0&&(i=l,r=e.inclusive);break}return{value:i,inclusive:r}}class Pr extends class{}{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?"in"===e||"not-in"===e?this.ct(t,e,i):new J0(t,e,i):"array-contains"===e?new JN(t,i):"in"===e?new $A(t,i):"not-in"===e?new qA(t,i):"array-contains-any"===e?new WA(t,i):new Pr(t,e,i)}static ct(t,e,i){return"in"===e?new GA(t,i):new XN(t,i)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.at(ac(e,this.value)):null!==e&&Qc(this.value)===Qc(e)&&this.at(ac(e,this.value))}at(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return mt()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class J0 extends Pr{constructor(t,e,i){super(t,e,i),this.key=nt.fromName(i.referenceValue)}matches(t){const e=nt.comparator(t.key,this.key);return this.at(e)}}class GA extends Pr{constructor(t,e){super(t,"in",e),this.keys=zA(0,e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class XN extends Pr{constructor(t,e){super(t,"not-in",e),this.keys=zA(0,e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function zA(n,t){var e;return((null===(e=t.arrayValue)||void 0===e?void 0:e.values)||[]).map(i=>nt.fromName(i.referenceValue))}class JN extends Pr{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return zh(e)&&Gh(e.arrayValue,this.value)}}class $A extends Pr{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&Gh(this.value.arrayValue,e)}}class qA extends Pr{constructor(t,e){super(t,"not-in",e)}matches(t){if(Gh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!Gh(this.value.arrayValue,e)}}class WA extends Pr{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!zh(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>Gh(this.value.arrayValue,i))}}class dd{constructor(t,e){this.position=t,this.inclusive=e}}class Wh{constructor(t,e="asc"){this.field=t,this.dir=e}}function ew(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}function Nx(n,t,e){let i=0;for(let r=0;r<n.position.length;r++){const s=t[r],l=n.position[r];if(i=s.field.isKeyField()?nt.comparator(nt.fromName(l.referenceValue),e.key):ac(l,e.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function Lo(n,t){if(null===n)return null===t;if(null===t||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!ll(n.position[e],t.position[e]))return!1;return!0}class lc{constructor(t,e=null,i=[],r=[],s=null,l="F",d=null,p=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=l,this.startAt=d,this.endAt=p,this.lt=null,this.ft=null}}function J_(n,t,e,i,r,s,l,d){return new lc(n,t,e,i,r,s,l,d)}function Yh(n){return new lc(n)}function am(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function ev(n){for(const t of n.filters)if(t.ht())return t.field;return null}function tv(n){return null!==n.collectionGroup}function Zh(n){const t=ct(n);if(null===t.lt){t.lt=[];const e=ev(t),i=am(t);if(null!==e&&null===i)e.isKeyField()||t.lt.push(new Wh(e)),t.lt.push(new Wh(xi.keyField(),"asc"));else{let r=!1;for(const s of t.explicitOrderBy)t.lt.push(s),s.field.isKeyField()&&(r=!0);if(!r){const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.lt.push(new Wh(xi.keyField(),s))}}}return t.lt}function uo(n){const t=ct(n);if(!t.ft)if("F"===t.limitType)t.ft=K0(t.path,t.collectionGroup,Zh(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const s of Zh(t))e.push(new Wh(s.field,"desc"===s.dir?"asc":"desc"));const i=t.endAt?new dd(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new dd(t.startAt.position,t.startAt.inclusive):null;t.ft=K0(t.path,t.collectionGroup,e,t.filters,t.limit,i,r)}return t.ft}function tw(n,t,e){return new lc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function lm(n,t){return qh(uo(n),uo(t))&&n.limitType===t.limitType}function Fx(n){return`${$h(uo(n))}|lt:${n.limitType}`}function cm(n){return`Query(target=${function Q0(n){let t=n.path.canonicalString();return null!==n.collectionGroup&&(t+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(t+=`, filters: [${n.filters.map(e=>{return`${(i=e).field.canonicalString()} ${i.op} ${cd(i.value)}`;var i}).join(", ")}]`),im(n.limit)||(t+=", limit: "+n.limit),n.orderBy.length>0&&(t+=`, orderBy: [${n.orderBy.map(e=>{return`${(i=e).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),n.startAt&&(t+=", startAt: ",t+=n.startAt.inclusive?"b:":"a:",t+=n.startAt.position.map(e=>cd(e)).join(",")),n.endAt&&(t+=", endAt: ",t+=n.endAt.inclusive?"a:":"b:",t+=n.endAt.position.map(e=>cd(e)).join(",")),`Target(${t})`}(uo(n))}; limitType=${n.limitType})`}function ho(n,t){return t.isFoundDocument()&&function(e,i){const r=i.key.path;return null!==e.collectionGroup?i.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(r):nt.isDocumentKey(e.path)?e.path.isEqual(r):e.path.isImmediateParentOf(r)}(n,t)&&function(e,i){for(const r of e.explicitOrderBy)if(!r.field.isKeyField()&&null===i.data.field(r.field))return!1;return!0}(n,t)&&function(e,i){for(const r of e.filters)if(!r.matches(i))return!1;return!0}(n,t)&&(i=t,!((e=n).startAt&&!function(r,s,l){const d=Nx(r,s,l);return r.inclusive?d<=0:d<0}(e.startAt,Zh(e),i)||e.endAt&&!function(r,s,l){const d=Nx(r,s,l);return r.inclusive?d>=0:d>0}(e.endAt,Zh(e),i)));var e,i}function Lx(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function ZA(n){return(t,e)=>{let i=!1;for(const r of Zh(n)){const s=KA(r,t,e);if(0!==s)return s;i=i||r.field.isKeyField()}return 0}}function KA(n,t,e){const i=n.field.isKeyField()?nt.comparator(t.key,e.key):function(r,s,l){const d=s.data.field(r),p=l.data.field(r);return null!==d&&null!==p?ac(d,p):mt()}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return mt()}}function nw(n,t){if(n.dt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jh(t)?"-0":t}}function Bx(n){return{integerValue:""+n}}function Vx(n,t){return $0(t)?Bx(t):nw(n,t)}class um{constructor(){this._=void 0}}function QA(n,t,e){return n instanceof hd?function(i,r){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&(s.fields.__previous_value__=r),{mapValue:s}}(e,t):n instanceof fd?Ux(n,t):n instanceof Xc?nv(n,t):function(i,r){const s=iw(i,r),l=rw(s)+rw(i._t);return Ox(s)&&Ox(i._t)?Bx(l):nw(i.wt,l)}(n,t)}function eF(n,t,e){return n instanceof fd?Ux(n,t):n instanceof Xc?nv(n,t):e}function iw(n,t){return n instanceof Jc?Ox(e=t)||(i=e)&&"doubleValue"in i?t:{integerValue:0}:null;var i,e}class hd extends um{}class fd extends um{constructor(t){super(),this.elements=t}}function Ux(n,t){const e=Hx(t);for(const i of n.elements)e.some(r=>ll(r,i))||e.push(i);return{arrayValue:{values:e}}}class Xc extends um{constructor(t){super(),this.elements=t}}function nv(n,t){let e=Hx(t);for(const i of n.elements)e=e.filter(r=>!ll(r,i));return{arrayValue:{values:e}}}class Jc extends um{constructor(t,e){super(),this.wt=t,this._t=e}}function rw(n){return gi(n.integerValue||n.doubleValue)}function Hx(n){return zh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Kh{constructor(t,e){this.field=t,this.transform=e}}class XA{constructor(t,e){this.version=t,this.transformResults=e}}class Mi{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Mi}static exists(t){return new Mi(void 0,t)}static updateTime(t){return new Mi(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function sw(n,t){return void 0!==n.updateTime?t.isFoundDocument()&&t.version.isEqual(n.updateTime):void 0===n.exists||n.exists===t.isFoundDocument()}class ow{}function aw(n,t){if(!n.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return n.isNoDocument()?new cc(n.key,Mi.none()):new hm(n.key,n.data,Mi.none());{const e=n.data,i=Xr.empty();let r=new Un(xi.comparator);for(let s of t.fields)if(!r.has(s)){let l=e.field(s);null===l&&s.length>1&&(s=s.popLast(),l=e.field(s)),null===l?i.delete(s):i.set(s,l),r=r.add(s)}return new eu(n.key,i,new co(r.toArray()),Mi.none())}}function JA(n,t,e){n instanceof hm?function(i,r,s){const l=i.value.clone(),d=ik(i.fieldTransforms,r,s.transformResults);l.setAll(d),r.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(n,t,e):n instanceof eu?function(i,r,s){if(!sw(i.precondition,r))return void r.convertToUnknownDocument(s.version);const l=ik(i.fieldTransforms,r,s.transformResults),d=r.data;d.setAll(nk(i)),d.setAll(l),r.convertToFoundDocument(s.version,d).setHasCommittedMutations()}(n,t,e):t.convertToNoDocument(e.version).setHasCommittedMutations()}function dm(n,t,e,i){return n instanceof hm?function(r,s,l,d){if(!sw(r.precondition,s))return l;const p=r.value.clone(),_=Gx(r.fieldTransforms,d,s);return p.setAll(_),s.convertToFoundDocument(s.version,p).setHasLocalMutations(),null}(n,t,e,i):n instanceof eu?function(r,s,l,d){if(!sw(r.precondition,s))return l;const p=Gx(r.fieldTransforms,d,s),_=s.data;return _.setAll(nk(r)),_.setAll(p),s.convertToFoundDocument(s.version,_).setHasLocalMutations(),null===l?null:l.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(b=>b.field))}(n,t,e,i):(l=e,sw(n.precondition,s=t)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):l);var s,l}function ek(n,t){let e=null;for(const i of n.fieldTransforms){const r=t.data.field(i.field),s=iw(i.transform,r||null);null!=s&&(null===e&&(e=Xr.empty()),e.set(i.field,s))}return e||null}function tk(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&(i=t.fieldTransforms,!!(void 0===(e=n.fieldTransforms)&&void 0===i||e&&i&&rd(e,i,(r,s)=>function jx(n,t){return n.field.isEqual(t.field)&&(i=t.transform,(e=n.transform)instanceof fd&&i instanceof fd||e instanceof Xc&&i instanceof Xc?rd(e.elements,i.elements,ll):e instanceof Jc&&i instanceof Jc?ll(e._t,i._t):e instanceof hd&&i instanceof hd);var e,i}(r,s))))&&(0===n.type?n.value.isEqual(t.value):1!==n.type||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask));var e,i}class hm extends ow{constructor(t,e,i,r=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class eu extends ow{constructor(t,e,i,r,s=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function nk(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const i=n.data.field(e);t.set(e,i)}}),t}function ik(n,t,e){const i=new Map;Pt(n.length===e.length);for(let r=0;r<e.length;r++){const s=n[r],l=s.transform,d=t.data.field(s.field);i.set(s.field,eF(l,d,e[r]))}return i}function Gx(n,t,e){const i=new Map;for(const r of n){const s=r.transform,l=e.data.field(r.field);i.set(r.field,QA(s,l,t))}return i}class cc extends ow{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class lw extends ow{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class rk{constructor(t){this.count=t}}var $i,on;function cw(n){switch(n){default:return mt();case ye.CANCELLED:case ye.UNKNOWN:case ye.DEADLINE_EXCEEDED:case ye.RESOURCE_EXHAUSTED:case ye.INTERNAL:case ye.UNAVAILABLE:case ye.UNAUTHENTICATED:return!1;case ye.INVALID_ARGUMENT:case ye.NOT_FOUND:case ye.ALREADY_EXISTS:case ye.PERMISSION_DENIED:case ye.FAILED_PRECONDITION:case ye.ABORTED:case ye.OUT_OF_RANGE:case ye.UNIMPLEMENTED:case ye.DATA_LOSS:return!0}}function iv(n){if(void 0===n)return Xi("GRPC error has no .code"),ye.UNKNOWN;switch(n){case $i.OK:return ye.OK;case $i.CANCELLED:return ye.CANCELLED;case $i.UNKNOWN:return ye.UNKNOWN;case $i.DEADLINE_EXCEEDED:return ye.DEADLINE_EXCEEDED;case $i.RESOURCE_EXHAUSTED:return ye.RESOURCE_EXHAUSTED;case $i.INTERNAL:return ye.INTERNAL;case $i.UNAVAILABLE:return ye.UNAVAILABLE;case $i.UNAUTHENTICATED:return ye.UNAUTHENTICATED;case $i.INVALID_ARGUMENT:return ye.INVALID_ARGUMENT;case $i.NOT_FOUND:return ye.NOT_FOUND;case $i.ALREADY_EXISTS:return ye.ALREADY_EXISTS;case $i.PERMISSION_DENIED:return ye.PERMISSION_DENIED;case $i.FAILED_PRECONDITION:return ye.FAILED_PRECONDITION;case $i.ABORTED:return ye.ABORTED;case $i.OUT_OF_RANGE:return ye.OUT_OF_RANGE;case $i.UNIMPLEMENTED:return ye.UNIMPLEMENTED;case $i.DATA_LOSS:return ye.DATA_LOSS;default:return mt()}}(on=$i||($i={}))[on.OK=0]="OK",on[on.CANCELLED=1]="CANCELLED",on[on.UNKNOWN=2]="UNKNOWN",on[on.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",on[on.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",on[on.NOT_FOUND=5]="NOT_FOUND",on[on.ALREADY_EXISTS=6]="ALREADY_EXISTS",on[on.PERMISSION_DENIED=7]="PERMISSION_DENIED",on[on.UNAUTHENTICATED=16]="UNAUTHENTICATED",on[on.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",on[on.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",on[on.ABORTED=10]="ABORTED",on[on.OUT_OF_RANGE=11]="OUT_OF_RANGE",on[on.UNIMPLEMENTED=12]="UNIMPLEMENTED",on[on.INTERNAL=13]="INTERNAL",on[on.UNAVAILABLE=14]="UNAVAILABLE",on[on.DATA_LOSS=15]="DATA_LOSS";class cl{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(void 0!==i)for(const[r,s]of i)if(this.equalsFn(r,t))return s}has(t){return void 0!==this.get(t)}set(t,e){const i=this.mapKeyFn(t),r=this.inner[i];if(void 0===r)return this.inner[i]=[[t,e]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(void 0===i)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return 1===i.length?delete this.inner[e]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){ad(this.inner,(e,i)=>{for(const[r,s]of i)t(r,s)})}isEmpty(){return K_(this.inner)}size(){return this.innerSize}}const sk=new Si(nt.comparator);function Jr(){return sk}const rv=new Si(nt.comparator);function tu(...n){let t=rv;for(const e of n)t=t.insert(e.key,e);return t}function ok(n){let t=rv;return n.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function uc(){return sv()}function ak(){return sv()}function sv(){return new cl(n=>n.toString(),(n,t)=>n.isEqual(t))}const zx=new Si(nt.comparator),lk=new Un(nt.comparator);function nn(...n){let t=lk;for(const e of n)t=t.add(e);return t}const ck=new Un(zt);function ov(){return ck}class Qh{constructor(t,e,i,r,s){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,e){const i=new Map;return i.set(t,Xh.createSynthesizedTargetChangeForCurrentChange(t,e)),new Qh(Nt.min(),i,ov(),Jr(),nn())}}class Xh{constructor(t,e,i,r,s){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,e){return new Xh(Pi.EMPTY_BYTE_STRING,e,nn(),nn(),nn())}}class fm{constructor(t,e,i,r){this.gt=t,this.removedTargetIds=e,this.key=i,this.yt=r}}class $x{constructor(t,e){this.targetId=t,this.It=e}}class qx{constructor(t,e,i=Pi.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=r}}class uw{constructor(){this.Tt=0,this.Et=hw(),this.At=Pi.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return 0!==this.Tt}get vt(){return this.bt}Vt(t){t.approximateByteSize()>0&&(this.bt=!0,this.At=t)}St(){let t=nn(),e=nn(),i=nn();return this.Et.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:i=i.add(r);break;default:mt()}}),new Xh(this.At,this.Rt,t,e,i)}Dt(){this.bt=!1,this.Et=hw()}Ct(t,e){this.bt=!0,this.Et=this.Et.insert(t,e)}xt(t){this.bt=!0,this.Et=this.Et.remove(t)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Ot(){this.bt=!0,this.Rt=!0}}class dw{constructor(t){this.Mt=t,this.Ft=new Map,this.$t=Jr(),this.Bt=uk(),this.Lt=new Un(zt)}Ut(t){for(const e of t.gt)t.yt&&t.yt.isFoundDocument()?this.qt(e,t.yt):this.Kt(e,t.key,t.yt);for(const e of t.removedTargetIds)this.Kt(e,t.key,t.yt)}Gt(t){this.forEachTarget(t,e=>{const i=this.Qt(e);switch(t.state){case 0:this.jt(e)&&i.Vt(t.resumeToken);break;case 1:i.kt(),i.Pt||i.Dt(),i.Vt(t.resumeToken);break;case 2:i.kt(),i.Pt||this.removeTarget(e);break;case 3:this.jt(e)&&(i.Ot(),i.Vt(t.resumeToken));break;case 4:this.jt(e)&&(this.Wt(e),i.Vt(t.resumeToken));break;default:mt()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Ft.forEach((i,r)=>{this.jt(r)&&e(r)})}zt(t){const e=t.targetId,i=t.It.count,r=this.Ht(e);if(r){const s=r.target;if(sm(s))if(0===i){const l=new nt(s.path);this.Kt(e,l,Yn.newNoDocument(l,Nt.min()))}else Pt(1===i);else this.Jt(e)!==i&&(this.Wt(e),this.Lt=this.Lt.add(e))}}Yt(t){const e=new Map;this.Ft.forEach((s,l)=>{const d=this.Ht(l);if(d){if(s.current&&sm(d.target)){const p=new nt(d.target.path);null!==this.$t.get(p)||this.Xt(l,p)||this.Kt(l,p,Yn.newNoDocument(p,t))}s.vt&&(e.set(l,s.St()),s.Dt())}});let i=nn();this.Bt.forEach((s,l)=>{let d=!0;l.forEachWhile(p=>{const _=this.Ht(p);return!_||2===_.purpose||(d=!1,!1)}),d&&(i=i.add(s))}),this.$t.forEach((s,l)=>l.setReadTime(t));const r=new Qh(t,e,this.Lt,this.$t,i);return this.$t=Jr(),this.Bt=uk(),this.Lt=new Un(zt),r}qt(t,e){if(!this.jt(t))return;const i=this.Xt(t,e.key)?2:0;this.Qt(t).Ct(e.key,i),this.$t=this.$t.insert(e.key,e),this.Bt=this.Bt.insert(e.key,this.Zt(e.key).add(t))}Kt(t,e,i){if(!this.jt(t))return;const r=this.Qt(t);this.Xt(t,e)?r.Ct(e,1):r.xt(e),this.Bt=this.Bt.insert(e,this.Zt(e).delete(t)),i&&(this.$t=this.$t.insert(e,i))}removeTarget(t){this.Ft.delete(t)}Jt(t){const e=this.Qt(t).St();return this.Mt.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Nt(t){this.Qt(t).Nt()}Qt(t){let e=this.Ft.get(t);return e||(e=new uw,this.Ft.set(t,e)),e}Zt(t){let e=this.Bt.get(t);return e||(e=new Un(zt),this.Bt=this.Bt.insert(t,e)),e}jt(t){const e=null!==this.Ht(t);return e||je("WatchChangeAggregator","Detected inactive target",t),e}Ht(t){const e=this.Ft.get(t);return e&&e.Pt?null:this.Mt.te(t)}Wt(t){this.Ft.set(t,new uw),this.Mt.getRemoteKeysForTarget(t).forEach(e=>{this.Kt(t,e,null)})}Xt(t,e){return this.Mt.getRemoteKeysForTarget(t).has(e)}}function uk(){return new Si(nt.comparator)}function hw(){return new Si(nt.comparator)}const fw={asc:"ASCENDING",desc:"DESCENDING"},dk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class hk{constructor(t,e){this.databaseId=t,this.dt=e}}function av(n,t){return n.dt?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function fk(n,t){return n.dt?t.toBase64():t.toUint8Array()}function tF(n,t){return av(n,t.toTimestamp())}function Cr(n){return Pt(!!n),Nt.fromTimestamp(function(t){const e=Zc(t);return new mi(e.seconds,e.nanos)}(n))}function pw(n,t){return(e=n,new mn(["projects",e.projectId,"databases",e.database])).child("documents").child(t).canonicalString();var e}function pk(n){const t=mn.fromString(n);return Pt(it(t)),t}function lv(n,t){return pw(n.databaseId,t.path)}function dc(n,t){const e=pk(t);if(e.get(1)!==n.databaseId.projectId)throw new Ne(ye.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new Ne(ye.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new nt(gk(e))}function Wx(n,t){return pw(n.databaseId,t)}function mk(n){const t=pk(n);return 4===t.length?mn.emptyPath():gk(t)}function pm(n){return new mn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function gk(n){return Pt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function _k(n,t,e){return{name:lv(n,t),fields:e.value.mapValue.fields}}function vk(n,t,e){const i=dc(n,t.name),r=Cr(t.updateTime),s=new Xr({mapValue:{fields:t.fields}}),l=Yn.newFoundDocument(i,r,s);return e&&l.setHasCommittedMutations(),e?l.setHasCommittedMutations():l}function a(n,t){let e;if(t instanceof hm)e={update:_k(n,t.key,t.value)};else if(t instanceof cc)e={delete:lv(n,t.key)};else if(t instanceof eu)e={update:_k(n,t.key,t.data),updateMask:$e(t.fieldMask)};else{if(!(t instanceof lw))return mt();e={verify:lv(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(r,s){const l=s.transform;if(l instanceof hd)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof fd)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Xc)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Jc)return{fieldPath:s.field.canonicalString(),increment:l._t};throw mt()}(0,i))),t.precondition.isNone||(e.currentDocument=void 0!==(r=t.precondition).updateTime?{updateTime:tF(n,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:mt()),e;var r}function u(n,t){const e=t.currentDocument?void 0!==(r=t.currentDocument).updateTime?Mi.updateTime(Cr(r.updateTime)):void 0!==r.exists?Mi.exists(r.exists):Mi.none():Mi.none(),i=t.updateTransforms?t.updateTransforms.map(r=>function(s,l){let d=null;"setToServerValue"in l?(Pt("REQUEST_TIME"===l.setToServerValue),d=new hd):"appendMissingElements"in l?d=new fd(l.appendMissingElements.values||[]):"removeAllFromArray"in l?d=new Xc(l.removeAllFromArray.values||[]):"increment"in l?d=new Jc(s,l.increment):mt();const p=xi.fromServerFormat(l.fieldPath);return new Kh(p,d)}(n,r)):[];var r;if(t.update){const r=dc(n,t.update.name),s=new Xr({mapValue:{fields:t.update.fields}});if(t.updateMask){const l=new co((t.updateMask.fieldPaths||[]).map(_=>xi.fromServerFormat(_)));return new eu(r,s,l,e,i)}return new hm(r,s,e,i)}if(t.delete){const r=dc(n,t.delete);return new cc(r,e)}if(t.verify){const r=dc(n,t.verify);return new lw(r,e)}return mt()}function f(n,t){return{documents:[Wx(n,t.path)]}}function m(n,t){const e={structuredQuery:{}},i=t.path;null!==t.collectionGroup?(e.parent=Wx(n,i),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(e.parent=Wx(n,i.popLast()),e.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(p){if(0===p.length)return;const _=p.map(b=>function(D){if("=="===D.op){if(VA(D.value))return{unaryFilter:{field:V(D.field),op:"IS_NAN"}};if(BA(D.value))return{unaryFilter:{field:V(D.field),op:"IS_NULL"}}}else if("!="===D.op){if(VA(D.value))return{unaryFilter:{field:V(D.field),op:"IS_NOT_NAN"}};if(BA(D.value))return{unaryFilter:{field:V(D.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:V(D.field),op:R(D.op),value:D.value}}}(b));return 1===_.length?_[0]:{compositeFilter:{op:"AND",filters:_}}}(t.filters);r&&(e.structuredQuery.where=r);const s=function(p){if(0!==p.length)return p.map(_=>{return{field:V((b=_).field),direction:T(b.dir)};var b})}(t.orderBy);s&&(e.structuredQuery.orderBy=s);const l=(_=t.limit,n.dt||im(_)?_:{value:_});var _,d,p;return null!==l&&(e.structuredQuery.limit=l),t.startAt&&(e.structuredQuery.startAt={before:(d=t.startAt).inclusive,values:d.position}),t.endAt&&(e.structuredQuery.endAt={before:!(p=t.endAt).inclusive,values:p.position}),e}function y(n){let t=mk(n.parent);const e=n.structuredQuery,i=e.from?e.from.length:0;let r=null;if(i>0){Pt(1===i);const b=e.from[0];b.allDescendants?r=b.collectionId:t=t.child(b.collectionId)}let s=[];e.where&&(s=x(e.where));let l=[];e.orderBy&&(l=e.orderBy.map(b=>{return new Wh($((D=b).field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction));var D}));let d=null;e.limit&&(d=function(b){let D;return D="object"==typeof b?b.value:b,im(D)?null:D}(e.limit));let p=null;var b;e.startAt&&(p=new dd((b=e.startAt).values||[],!!b.before));let _=null;return e.endAt&&(_=function(b){return new dd(b.values||[],!b.before)}(e.endAt)),J_(t,r,l,s,d,"F",p,_)}function x(n){return n?void 0!==n.unaryFilter?[Ie(n)]:void 0!==n.fieldFilter?[ne(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(t=>x(t)).reduce((t,e)=>t.concat(e)):mt():[]}function T(n){return fw[n]}function R(n){return dk[n]}function V(n){return{fieldPath:n.canonicalString()}}function $(n){return xi.fromServerFormat(n.fieldPath)}function ne(n){return Pr.create($(n.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return mt()}}(n.fieldFilter.op),n.fieldFilter.value)}function Ie(n){switch(n.unaryFilter.op){case"IS_NAN":const t=$(n.unaryFilter.field);return Pr.create(t,"==",{doubleValue:NaN});case"IS_NULL":const e=$(n.unaryFilter.field);return Pr.create(e,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=$(n.unaryFilter.field);return Pr.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=$(n.unaryFilter.field);return Pr.create(r,"!=",{nullValue:"NULL_VALUE"});default:return mt()}}function $e(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function it(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function ot(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=Mt(t)),t=Be(n.get(e),t);return Mt(t)}function Be(n,t){let e=t;const i=n.length;for(let r=0;r<i;r++){const s=n.charAt(r);switch(s){case"\0":e+="\x01\x10";break;case"\x01":e+="\x01\x11";break;default:e+=s}}return e}function Mt(n){return n+"\x01\x01"}function Bt(n){const t=n.length;if(Pt(t>=2),2===t)return Pt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),mn.emptyPath();const e=t-2,i=[];let r="";for(let s=0;s<t;){const l=n.indexOf("\x01",s);switch((l<0||l>e)&&mt(),n.charAt(l+1)){case"\x01":const d=n.substring(s,l);let p;0===r.length?p=d:(r+=d,p=r,r=""),i.push(p);break;case"\x10":r+=n.substring(s,l),r+="\0";break;case"\x11":r+=n.substring(s,l+1);break;default:mt()}s=l+2}return new mn(i)}const Fn=["userId","batchId"];function es(n,t){return[n,ot(t)]}function nu(n,t,e){return[n,ot(t),e]}const mw={},gw=["prefixPath","collectionGroup","readTime","documentId"],_w=["prefixPath","collectionGroup","documentId"],vw=["collectionGroup","readTime","prefixPath","documentId"],yw=["canonicalId","targetId"],bw=["targetId","path"],ww=["path","targetId"],Cw=["collectionId","parent"],Ew=["indexId","uid"],tz=["uid","sequenceNumber"],nz=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],iz=["indexId","uid","orderedDocumentKey"],rz=["userId","collectionPath","documentId"],sz=["userId","collectionPath","largestBatchId"],oz=["userId","collectionGroup","largestBatchId"],iF=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],az=[...iF,"documentOverlays"],rF=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],sF=rF,lz=[...sF,"indexConfiguration","indexState","indexEntries"];class yk extends Sx{constructor(t,e){super(),this.ee=t,this.currentSequenceNumber=e}}function ts(n,t){const e=ct(n);return xa.N(e.ee,t)}class bk{constructor(t,e,i,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(t.key)&&JA(s,t,i[r])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=dm(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=dm(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=ak();return this.mutations.forEach(r=>{const s=t.get(r.key),l=s.overlayedDocument;let d=this.applyToLocalView(l,s.mutatedFields);d=e.has(r.key)?null:d;const p=aw(l,d);null!==p&&i.set(r.key,p),l.isValidDocument()||l.convertToNoDocument(Nt.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),nn())}isEqual(t){return this.batchId===t.batchId&&rd(this.mutations,t.mutations,(e,i)=>tk(e,i))&&rd(this.baseMutations,t.baseMutations,(e,i)=>tk(e,i))}}class wk{constructor(t,e,i,r){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=r}static from(t,e,i){Pt(t.mutations.length===i.length);let r=zx;const s=t.mutations;for(let l=0;l<s.length;l++)r=r.insert(s[l].key,i[l].version);return new wk(t,e,i,r)}}class Ck{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Jh{constructor(t,e,i,r,s=Nt.min(),l=Nt.min(),d=Pi.EMPTY_BYTE_STRING){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=d}withSequenceNumber(t){return new Jh(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(t,e){return new Jh(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)}withLastLimboFreeSnapshotVersion(t){return new Jh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}class oF{constructor(t){this.ne=t}}function aF(n,t){const e=t.key,i={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:Yx(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())i.document={name:lv(r=n.ne,(s=t).key),fields:s.data.value.mapValue.fields,updateTime:av(r,s.version.toTimestamp())};else if(t.isNoDocument())i.noDocument={path:e.path.toArray(),readTime:mm(t.version)};else{if(!t.isUnknownDocument())return mt();i.unknownDocument={path:e.path.toArray(),version:mm(t.version)}}var r,s;return i}function Yx(n){const t=n.toTimestamp();return[t.seconds,t.nanoseconds]}function mm(n){const t=n.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function gm(n){const t=new mi(n.seconds,n.nanoseconds);return Nt.fromTimestamp(t)}function _m(n,t){const e=(t.baseMutations||[]).map(s=>u(n.ne,s));for(let s=0;s<t.mutations.length-1;++s){const l=t.mutations[s];s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform&&(l.updateTransforms=t.mutations[s+1].transform.fieldTransforms,t.mutations.splice(s+1,1),++s)}const i=t.mutations.map(s=>u(n.ne,s)),r=mi.fromMillis(t.localWriteTimeMs);return new bk(t.batchId,r,e,i)}function Dw(n){const t=gm(n.readTime),e=void 0!==n.lastLimboFreeSnapshotVersion?gm(n.lastLimboFreeSnapshotVersion):Nt.min();let i;var r;return void 0!==n.query.documents?(Pt(1===(r=n.query).documents.length),i=uo(Yh(mk(r.documents[0])))):i=uo(y(n.query)),new Jh(i,n.targetId,0,n.lastListenSequenceNumber,t,e,Pi.fromBase64String(n.resumeToken))}function lF(n,t){const e=mm(t.snapshotVersion),i=mm(t.lastLimboFreeSnapshotVersion);let r;r=sm(t.target)?f(n.ne,t.target):m(n.ne,t.target);const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:$h(t.target),readTime:e,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function Ek(n){const t=y({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?tw(t,t.limit,"L"):t}function Dk(n,t){return new Ck(t.largestBatchId,u(n.ne,t.overlayMutation))}function cF(n,t){const e=t.path.lastSegment();return[n,ot(t.path.popLast()),e]}function uF(n,t,e,i){return{indexId:n,uid:t.uid||"",sequenceNumber:e,readTime:mm(i.readTime),documentKey:ot(i.documentKey.path),largestBatchId:i.largestBatchId}}class uz{getBundleMetadata(t,e){return dF(t).get(e).next(i=>{if(i)return{id:(r=i).bundleId,createTime:gm(r.createTime),version:r.version};var r})}saveBundleMetadata(t,e){return dF(t).put({bundleId:(i=e).id,createTime:mm(Cr(i.createTime)),version:i.version});var i}getNamedQuery(t,e){return hF(t).get(e).next(i=>{if(i)return{name:(r=i).name,query:Ek(r.bundledQuery),readTime:gm(r.readTime)};var r})}saveNamedQuery(t,e){return hF(t).put({name:(i=e).name,readTime:mm(Cr(i.readTime)),bundledQuery:i.bundledQuery});var i}}function dF(n){return ts(n,"bundles")}function hF(n){return ts(n,"namedQueries")}class Zx{constructor(t,e){this.wt=t,this.userId=e}static se(t,e){return new Zx(t,e.uid||"")}getOverlay(t,e){return xw(t).get(cF(this.userId,e)).next(i=>i?Dk(this.wt,i):null)}getOverlays(t,e){const i=uc();return ge.forEach(e,r=>this.getOverlay(t,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(t,e,i){const r=[];return i.forEach((s,l)=>{const d=new Ck(e,l);r.push(this.ie(t,d))}),ge.waitFor(r)}removeOverlaysForBatchId(t,e,i){const r=new Set;e.forEach(l=>r.add(ot(l.getCollectionPath())));const s=[];return r.forEach(l=>{const d=IDBKeyRange.bound([this.userId,l,i],[this.userId,l,i+1],!1,!0);s.push(xw(t).W("collectionPathOverlayIndex",d))}),ge.waitFor(s)}getOverlaysForCollection(t,e,i){const r=uc(),s=ot(e),l=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return xw(t).K("collectionPathOverlayIndex",l).next(d=>{for(const p of d){const _=Dk(this.wt,p);r.set(_.getKey(),_)}return r})}getOverlaysForCollectionGroup(t,e,i,r){const s=uc();let l;const d=IDBKeyRange.bound([this.userId,e,i],[this.userId,e,Number.POSITIVE_INFINITY],!0);return xw(t).J({index:"collectionGroupOverlayIndex",range:d},(p,_,b)=>{const D=Dk(this.wt,_);s.size()<r||D.largestBatchId===l?(s.set(D.getKey(),D),l=D.largestBatchId):b.done()}).next(()=>s)}ie(t,e){return xw(t).put(function(i,r,s){const[l,d,p]=cF(r,s.mutation.key);return{userId:r,collectionPath:d,documentId:p,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:a(i.ne,s.mutation)}}(this.wt,this.userId,e))}}function xw(n){return ts(n,"documentOverlays")}class vm{constructor(){}re(t,e){this.oe(t,e),e.ue()}oe(t,e){if("nullValue"in t)this.ce(e,5);else if("booleanValue"in t)this.ce(e,10),e.ae(t.booleanValue?1:0);else if("integerValue"in t)this.ce(e,15),e.ae(gi(t.integerValue));else if("doubleValue"in t){const i=gi(t.doubleValue);isNaN(i)?this.ce(e,13):(this.ce(e,15),jh(i)?e.ae(0):e.ae(i))}else if("timestampValue"in t){const i=t.timestampValue;this.ce(e,20),"string"==typeof i?e.he(i):(e.he(`${i.seconds||""}`),e.ae(i.nanos||0))}else if("stringValue"in t)this.le(t.stringValue,e),this.fe(e);else if("bytesValue"in t)this.ce(e,30),e.de(oc(t.bytesValue)),this.fe(e);else if("referenceValue"in t)this._e(t.referenceValue,e);else if("geoPointValue"in t){const i=t.geoPointValue;this.ce(e,45),e.ae(i.latitude||0),e.ae(i.longitude||0)}else"mapValue"in t?UA(t)?this.ce(e,Number.MAX_SAFE_INTEGER):(this.we(t.mapValue,e),this.fe(e)):"arrayValue"in t?(this.me(t.arrayValue,e),this.fe(e)):mt()}le(t,e){this.ce(e,25),this.ge(t,e)}ge(t,e){e.he(t)}we(t,e){const i=t.fields||{};this.ce(e,55);for(const r of Object.keys(i))this.le(r,e),this.oe(i[r],e)}me(t,e){const i=t.values||[];this.ce(e,50);for(const r of i)this.oe(r,e)}_e(t,e){this.ce(e,37),nt.fromName(t).path.forEach(i=>{this.ce(e,60),this.ge(i,e)})}ce(t,e){t.ae(e)}fe(t){t.ae(2)}}function dz(n){if(0===n)return 8;let t=0;return n>>4==0&&(t+=4,n<<=4),n>>6==0&&(t+=2,n<<=2),n>>7==0&&(t+=1),t}function fF(n){const t=64-function(e){let i=0;for(let r=0;r<8;++r){const s=dz(255&e[r]);if(i+=s,8!==s)break}return i}(n);return Math.ceil(t/8)}vm.ye=new vm;class hz{constructor(){this.buffer=new Uint8Array(1024),this.position=0}pe(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.Ie(i.value),i=e.next();this.Te()}Ee(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.Ae(i.value),i=e.next();this.Re()}be(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.Ie(i);else if(i<2048)this.Ie(960|i>>>6),this.Ie(128|63&i);else if(e<"\ud800"||"\udbff"<e)this.Ie(480|i>>>12),this.Ie(128|63&i>>>6),this.Ie(128|63&i);else{const r=e.codePointAt(0);this.Ie(240|r>>>18),this.Ie(128|63&r>>>12),this.Ie(128|63&r>>>6),this.Ie(128|63&r)}}this.Te()}Pe(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.Ae(i);else if(i<2048)this.Ae(960|i>>>6),this.Ae(128|63&i);else if(e<"\ud800"||"\udbff"<e)this.Ae(480|i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i);else{const r=e.codePointAt(0);this.Ae(240|r>>>18),this.Ae(128|63&r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r)}}this.Re()}ve(t){const e=this.Ve(t),i=fF(e);this.Se(1+i),this.buffer[this.position++]=255&i;for(let r=e.length-i;r<e.length;++r)this.buffer[this.position++]=255&e[r]}De(t){const e=this.Ve(t),i=fF(e);this.Se(1+i),this.buffer[this.position++]=~(255&i);for(let r=e.length-i;r<e.length;++r)this.buffer[this.position++]=~(255&e[r])}Ce(){this.xe(255),this.xe(255)}Ne(){this.ke(255),this.ke(255)}reset(){this.position=0}seed(t){this.Se(t.length),this.buffer.set(t,this.position),this.position+=t.length}Oe(){return this.buffer.slice(0,this.position)}Ve(t){const e=function(r){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,r,!1),new Uint8Array(s.buffer)}(t),i=0!=(128&e[0]);e[0]^=i?255:128;for(let r=1;r<e.length;++r)e[r]^=i?255:0;return e}Ie(t){const e=255&t;0===e?(this.xe(0),this.xe(255)):255===e?(this.xe(255),this.xe(0)):this.xe(e)}Ae(t){const e=255&t;0===e?(this.ke(0),this.ke(255)):255===e?(this.ke(255),this.ke(0)):this.ke(t)}Te(){this.xe(0),this.xe(1)}Re(){this.ke(0),this.ke(1)}xe(t){this.Se(1),this.buffer[this.position++]=t}ke(t){this.Se(1),this.buffer[this.position++]=~t}Se(t){const e=t+this.position;if(e<=this.buffer.length)return;let i=2*this.buffer.length;i<e&&(i=e);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class fz{constructor(t){this.Me=t}de(t){this.Me.pe(t)}he(t){this.Me.be(t)}ae(t){this.Me.ve(t)}ue(){this.Me.Ce()}}class pz{constructor(t){this.Me=t}de(t){this.Me.Ee(t)}he(t){this.Me.Pe(t)}ae(t){this.Me.De(t)}ue(){this.Me.Ne()}}class Sw{constructor(){this.Me=new hz,this.Fe=new fz(this.Me),this.$e=new pz(this.Me)}seed(t){this.Me.seed(t)}Be(t){return 0===t?this.Fe:this.$e}Oe(){return this.Me.Oe()}reset(){this.Me.reset()}}class ym{constructor(t,e,i,r){this.indexId=t,this.documentKey=e,this.arrayValue=i,this.directionalValue=r}Le(){const t=this.directionalValue.length,e=0===t||255===this.directionalValue[t-1]?t+1:t,i=new Uint8Array(e);return i.set(this.directionalValue,0),e!==t?i.set([0],this.directionalValue.length):++i[i.length-1],new ym(this.indexId,this.documentKey,this.arrayValue,i)}}function bm(n,t){let e=n.indexId-t.indexId;return 0!==e?e:(e=pF(n.arrayValue,t.arrayValue),0!==e?e:(e=pF(n.directionalValue,t.directionalValue),0!==e?e:nt.comparator(n.documentKey,t.documentKey)))}function pF(n,t){for(let e=0;e<n.length&&e<t.length;++e){const i=n[e]-t[e];if(0!==i)return i}return n.length-t.length}class mz{constructor(t){this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ue=t.orderBy,this.qe=[];for(const e of t.filters){const i=e;i.ht()?this.Ke=i:this.qe.push(i)}}Ge(t){const e=U0(t);if(void 0!==e&&!this.Qe(e))return!1;const i=od(t);let r=0,s=0;for(;r<i.length&&this.Qe(i[r]);++r);if(r===i.length)return!0;if(void 0!==this.Ke){const l=i[r];if(!this.je(this.Ke,l)||!this.We(this.Ue[s++],l))return!1;++r}for(;r<i.length;++r){const l=i[r];if(s>=this.Ue.length||!this.We(this.Ue[s++],l))return!1}return!0}Qe(t){for(const e of this.qe)if(this.je(e,t))return!0;return!1}je(t,e){return!(void 0===t||!t.field.isEqual(e.fieldPath))&&2===e.kind==("array-contains"===t.op||"array-contains-any"===t.op)}We(t,e){return!!t.field.isEqual(e.fieldPath)&&(0===e.kind&&"asc"===t.dir||1===e.kind&&"desc"===t.dir)}}class gz{constructor(){this.ze=new xk}addToCollectionParentIndex(t,e){return this.ze.add(e),ge.resolve()}getCollectionParents(t,e){return ge.resolve(this.ze.getEntries(e))}addFieldIndex(t,e){return ge.resolve()}deleteFieldIndex(t,e){return ge.resolve()}getDocumentsMatchingTarget(t,e){return ge.resolve(null)}getIndexType(t,e){return ge.resolve(0)}getFieldIndexes(t,e){return ge.resolve([])}getNextCollectionGroupToUpdate(t){return ge.resolve(null)}getMinOffset(t,e){return ge.resolve(Us.min())}getMinOffsetFromCollectionGroup(t,e){return ge.resolve(Us.min())}updateCollectionGroup(t,e,i){return ge.resolve()}updateIndexEntries(t,e){return ge.resolve()}}class xk{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e]||new Un(mn.comparator),s=!r.has(i);return this.index[e]=r.add(i),s}has(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e];return r&&r.has(i)}getEntries(t){return(this.index[t]||new Un(mn.comparator)).toArray()}}const Kx=new Uint8Array(0);class _z{constructor(t,e){this.user=t,this.databaseId=e,this.He=new xk,this.Je=new cl(i=>$h(i),(i,r)=>qh(i,r)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.He.has(e)){const i=e.lastSegment(),r=e.popLast();t.addOnCommittedListener(()=>{this.He.add(e)});const s={collectionId:i,parent:ot(r)};return mF(t).put(s)}return ge.resolve()}getCollectionParents(t,e){const i=[],r=IDBKeyRange.bound([e,""],[Dx(e),""],!1,!0);return mF(t).K(r).next(s=>{for(const l of s){if(l.collectionId!==e)break;i.push(Bt(l.parent))}return i})}addFieldIndex(t,e){const i=Qx(t),r={indexId:(l=e).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var l;delete r.indexId;const s=i.add(r);if(e.indexState){const l=Tw(t);return s.next(d=>{l.put(uF(d,this.user,e.indexState.sequenceNumber,e.indexState.offset))})}return s.next()}deleteFieldIndex(t,e){const i=Qx(t),r=Tw(t),s=Mw(t);return i.delete(e.indexId).next(()=>r.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}getDocumentsMatchingTarget(t,e){const i=Mw(t);let r=!0;const s=new Map;return ge.forEach(this.Ye(e),l=>this.Xe(t,l).next(d=>{r&&(r=!!d),s.set(l,d)})).next(()=>{if(r){let l=nn();const d=[];return ge.forEach(s,(p,_)=>{var b;je("IndexedDbIndexManager",`Using index ${b=p,`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(at=>`${at.fieldPath}:${at.kind}`).join(",")}`} to execute ${$h(e)}`);const D=function(at,et){const Ot=U0(et);if(void 0===Ot)return null;for(const Lt of om(at,Ot.fieldPath))switch(Lt.op){case"array-contains-any":return Lt.value.arrayValue.values||[];case"array-contains":return[Lt.value]}return null}(_,p),I=function(at,et){const Ot=new Map;for(const Lt of od(et))for(const Cn of om(at,Lt.fieldPath))switch(Cn.op){case"==":case"in":Ot.set(Lt.fieldPath.canonicalString(),Cn.value);break;case"not-in":case"!=":return Ot.set(Lt.fieldPath.canonicalString(),Cn.value),Array.from(Ot.values())}return null}(_,p),P=function(at,et){const Ot=[];let Lt=!0;for(const Cn of od(et)){const lr=0===Cn.kind?jA(at,Cn.fieldPath,at.startAt):X0(at,Cn.fieldPath,at.startAt);Ot.push(lr.value),Lt&&(Lt=lr.inclusive)}return new dd(Ot,Lt)}(_,p),U=function(at,et){const Ot=[];let Lt=!0;for(const Cn of od(et)){const lr=0===Cn.kind?X0(at,Cn.fieldPath,at.endAt):jA(at,Cn.fieldPath,at.endAt);Ot.push(lr.value),Lt&&(Lt=lr.inclusive)}return new dd(Ot,Lt)}(_,p),Q=this.Ze(p,_,P),le=this.Ze(p,_,U),Ze=this.tn(p,_,I),rt=this.en(p.indexId,D,Q,P.inclusive,le,U.inclusive,Ze);return ge.forEach(rt,at=>i.j(at,e.limit).next(et=>{et.forEach(Ot=>{const Lt=nt.fromSegments(Ot.documentKey);l.has(Lt)||(l=l.add(Lt),d.push(Lt))})}))}).next(()=>d)}return ge.resolve(null)})}Ye(t){let e=this.Je.get(t);return e||(e=[t],this.Je.set(t,e),e)}en(t,e,i,r,s,l,d){const p=(null!=e?e.length:1)*Math.max(i.length,s.length),_=p/(null!=e?e.length:1),b=[];for(let D=0;D<p;++D){const I=e?this.nn(e[D/_]):Kx,P=this.sn(t,I,i[D%_],r),U=this.rn(t,I,s[D%_],l),Q=d.map(le=>this.sn(t,I,le,!0));b.push(...this.createRange(P,U,Q))}return b}sn(t,e,i,r){const s=new ym(t,nt.empty(),e,i);return r?s:s.Le()}rn(t,e,i,r){const s=new ym(t,nt.empty(),e,i);return r?s.Le():s}Xe(t,e){const i=new mz(e),r=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,r).next(s=>{let l=null;for(const d of s)i.Ge(d)&&(!l||d.fields.length>l.fields.length)&&(l=d);return l})}getIndexType(t,e){let i=2;return ge.forEach(this.Ye(e),r=>this.Xe(t,r).next(s=>{s?0!==i&&s.fields.length<function(l){let d=new Un(xi.comparator),p=!1;for(const _ of l.filters){const b=_;b.field.isKeyField()||("array-contains"===b.op||"array-contains-any"===b.op?p=!0:d=d.add(b.field))}for(const _ of l.orderBy)_.field.isKeyField()||(d=d.add(_.field));return d.size+(p?1:0)}(r)&&(i=1):i=0})).next(()=>i)}on(t,e){const i=new Sw;for(const r of od(t)){const s=e.data.field(r.fieldPath);if(null==s)return null;const l=i.Be(r.kind);vm.ye.re(s,l)}return i.Oe()}nn(t){const e=new Sw;return vm.ye.re(t,e.Be(0)),e.Oe()}un(t,e){const i=new Sw;return vm.ye.re(ud(this.databaseId,e),i.Be(function(r){const s=od(r);return 0===s.length?0:s[s.length-1].kind}(t))),i.Oe()}tn(t,e,i){if(null===i)return[];let r=[];r.push(new Sw);let s=0;for(const l of od(t)){const d=i[s++];for(const p of r)if(this.cn(e,l.fieldPath)&&zh(d))r=this.an(r,l,d);else{const _=p.Be(l.kind);vm.ye.re(d,_)}}return this.hn(r)}Ze(t,e,i){return this.tn(t,e,i.position)}hn(t){const e=[];for(let i=0;i<t.length;++i)e[i]=t[i].Oe();return e}an(t,e,i){const r=[...t],s=[];for(const l of i.arrayValue.values||[])for(const d of r){const p=new Sw;p.seed(d.Oe()),vm.ye.re(l,p.Be(e.kind)),s.push(p)}return s}cn(t,e){return!!t.filters.find(i=>i instanceof Pr&&i.field.isEqual(e)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(t,e){const i=Qx(t),r=Tw(t);return(e?i.K("collectionGroupIndex",IDBKeyRange.bound(e,e)):i.K()).next(s=>{const l=[];return ge.forEach(s,d=>r.get([d.indexId,this.uid]).next(p=>{l.push(function(_,b){const D=b?new Vh(b.sequenceNumber,new Us(gm(b.readTime),new nt(Bt(b.documentKey)),b.largestBatchId)):Vh.empty(),I=_.fields.map(([P,U])=>new q_(xi.fromServerFormat(P),U));return new $_(_.indexId,_.collectionGroup,I,D)}(d,p))})).next(()=>l)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>0===e.length?null:(e.sort((i,r)=>{const s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return 0!==s?s:zt(i.collectionGroup,r.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,i){const r=Qx(t),s=Tw(t);return this.ln(t).next(l=>r.K("collectionGroupIndex",IDBKeyRange.bound(e,e)).next(d=>ge.forEach(d,p=>s.put(uF(p.indexId,this.user,l,i)))))}updateIndexEntries(t,e){const i=new Map;return ge.forEach(e,(r,s)=>{const l=i.get(r.collectionGroup);return(l?ge.resolve(l):this.getFieldIndexes(t,r.collectionGroup)).next(d=>(i.set(r.collectionGroup,d),ge.forEach(d,p=>this.fn(t,r,p).next(_=>{const b=this.dn(s,p);return _.isEqual(b)?ge.resolve():this._n(t,s,p,_,b)}))))})}wn(t,e,i,r){return Mw(t).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.un(i,e.key),documentKey:e.key.path.toArray()})}mn(t,e,i,r){return Mw(t).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.un(i,e.key),e.key.path.toArray()])}fn(t,e,i){const r=Mw(t);let s=new Un(bm);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.un(i,e)])},(l,d)=>{s=s.add(new ym(i.indexId,e,d.arrayValue,d.directionalValue))}).next(()=>s)}dn(t,e){let i=new Un(bm);const r=this.on(e,t);if(null==r)return i;const s=U0(e);if(null!=s){const l=t.data.field(s.fieldPath);if(zh(l))for(const d of l.arrayValue.values||[])i=i.add(new ym(e.indexId,t.key,this.nn(d),r))}else i=i.add(new ym(e.indexId,t.key,Kx,r));return i}_n(t,e,i,r,s){je("IndexedDbIndexManager","Updating index entries for document '%s'",e.key);const l=[];return function(d,p,_,b,D){const I=d.getIterator(),P=p.getIterator();let U=ld(I),Q=ld(P);for(;U||Q;){let le=!1,Ze=!1;if(U&&Q){const rt=_(U,Q);rt<0?Ze=!0:rt>0&&(le=!0)}else null!=U?Ze=!0:le=!0;le?(b(Q),Q=ld(P)):Ze?(D(U),U=ld(I)):(U=ld(I),Q=ld(P))}}(r,s,bm,d=>{l.push(this.wn(t,e,i,d))},d=>{l.push(this.mn(t,e,i,d))}),ge.waitFor(l)}ln(t){let e=1;return Tw(t).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),e=r.sequenceNumber+1}).next(()=>e)}createRange(t,e,i){i=i.sort((l,d)=>bm(l,d)).filter((l,d,p)=>!d||0!==bm(l,p[d-1]));const r=[];r.push(t);for(const l of i){const d=bm(l,t),p=bm(l,e);if(0===d)r[0]=t.Le();else if(d>0&&p<0)r.push(l),r.push(l.Le());else if(p>0)break}r.push(e);const s=[];for(let l=0;l<r.length;l+=2)s.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,Kx,[]],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,Kx,[]]));return s}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(gF)}getMinOffset(t,e){return ge.mapArray(this.Ye(e),i=>this.Xe(t,i).next(r=>r||mt())).next(gF)}}function mF(n){return ts(n,"collectionParents")}function Mw(n){return ts(n,"indexEntries")}function Qx(n){return ts(n,"indexConfiguration")}function Tw(n){return ts(n,"indexState")}function gF(n){Pt(0!==n.length);let t=n[0].indexState.offset,e=t.largestBatchId;for(let i=1;i<n.length;i++){const r=n[i].indexState.offset;Y_(r,t)<0&&(t=r),e<r.largestBatchId&&(e=r.largestBatchId)}return new Us(t.readTime,t.documentKey,e)}const _F={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Bo{constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}static withCacheSize(t){return new Bo(t,Bo.DEFAULT_COLLECTION_PERCENTILE,Bo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function vF(n,t,e){const i=n.store("mutations"),r=n.store("documentMutations"),s=[],l=IDBKeyRange.only(e.batchId);let d=0;const p=i.J({range:l},(b,D,I)=>(d++,I.delete()));s.push(p.next(()=>{Pt(1===d)}));const _=[];for(const b of e.mutations){const D=nu(t,b.key.path,e.batchId);s.push(r.delete(D)),_.push(b.key)}return ge.waitFor(s).next(()=>_)}function Xx(n){if(!n)return 0;let t;if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw mt();t=n.noDocument}return JSON.stringify(t).length}Bo.DEFAULT_COLLECTION_PERCENTILE=10,Bo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bo.DEFAULT=new Bo(41943040,Bo.DEFAULT_COLLECTION_PERCENTILE,Bo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bo.DISABLED=new Bo(-1,0,0);class Jx{constructor(t,e,i,r){this.userId=t,this.wt=e,this.indexManager=i,this.referenceDelegate=r,this.gn={}}static se(t,e,i,r){Pt(""!==t.uid);const s=t.isAuthenticated()?t.uid:"";return new Jx(s,e,i,r)}checkEmpty(t){let e=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ef(t).J({index:"userMutationsIndex",range:i},(r,s,l)=>{e=!1,l.done()}).next(()=>e)}addMutationBatch(t,e,i,r){const s=cv(t),l=ef(t);return l.add({}).next(d=>{Pt("number"==typeof d);const p=new bk(d,e,i,r),_=function(I,P,U){const Q=U.baseMutations.map(Ze=>a(I.ne,Ze)),le=U.mutations.map(Ze=>a(I.ne,Ze));return{userId:P,batchId:U.batchId,localWriteTimeMs:U.localWriteTime.toMillis(),baseMutations:Q,mutations:le}}(this.wt,this.userId,p),b=[];let D=new Un((I,P)=>zt(I.canonicalString(),P.canonicalString()));for(const I of r){const P=nu(this.userId,I.key.path,d);D=D.add(I.key.path.popLast()),b.push(l.put(_)),b.push(s.put(P,mw))}return D.forEach(I=>{b.push(this.indexManager.addToCollectionParentIndex(t,I))}),t.addOnCommittedListener(()=>{this.gn[d]=p.keys()}),ge.waitFor(b).next(()=>p)})}lookupMutationBatch(t,e){return ef(t).get(e).next(i=>i?(Pt(i.userId===this.userId),_m(this.wt,i)):null)}yn(t,e){return this.gn[e]?ge.resolve(this.gn[e]):this.lookupMutationBatch(t,e).next(i=>{if(i){const r=i.keys();return this.gn[e]=r,r}return null})}getNextMutationBatchAfterBatchId(t,e){const i=e+1,r=IDBKeyRange.lowerBound([this.userId,i]);let s=null;return ef(t).J({index:"userMutationsIndex",range:r},(l,d,p)=>{d.userId===this.userId&&(Pt(d.batchId>=i),s=_m(this.wt,d)),p.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return ef(t).J({index:"userMutationsIndex",range:e,reverse:!0},(r,s,l)=>{i=s.batchId,l.done()}).next(()=>i)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ef(t).K("userMutationsIndex",e).next(i=>i.map(r=>_m(this.wt,r)))}getAllMutationBatchesAffectingDocumentKey(t,e){const i=es(this.userId,e.path),r=IDBKeyRange.lowerBound(i),s=[];return cv(t).J({range:r},(l,d,p)=>{const[_,b,D]=l,I=Bt(b);if(_===this.userId&&e.path.isEqual(I))return ef(t).get(D).next(P=>{if(!P)throw mt();Pt(P.userId===this.userId),s.push(_m(this.wt,P))});p.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new Un(zt);const r=[];return e.forEach(s=>{const l=es(this.userId,s.path),d=IDBKeyRange.lowerBound(l),p=cv(t).J({range:d},(_,b,D)=>{const[I,P,U]=_,Q=Bt(P);I===this.userId&&s.path.isEqual(Q)?i=i.add(U):D.done()});r.push(p)}),ge.waitFor(r).next(()=>this.pn(t,i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1,s=es(this.userId,i),l=IDBKeyRange.lowerBound(s);let d=new Un(zt);return cv(t).J({range:l},(p,_,b)=>{const[D,I,P]=p,U=Bt(I);D===this.userId&&i.isPrefixOf(U)?U.length===r&&(d=d.add(P)):b.done()}).next(()=>this.pn(t,d))}pn(t,e){const i=[],r=[];return e.forEach(s=>{r.push(ef(t).get(s).next(l=>{if(null===l)throw mt();Pt(l.userId===this.userId),i.push(_m(this.wt,l))}))}),ge.waitFor(r).next(()=>i)}removeMutationBatch(t,e){return vF(t.ee,this.userId,e).next(i=>(t.addOnCommittedListener(()=>{this.In(e.batchId)}),ge.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(t,r))))}In(t){delete this.gn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return ge.resolve();const i=IDBKeyRange.lowerBound([this.userId]),r=[];return cv(t).J({range:i},(s,l,d)=>{if(s[0]===this.userId){const p=Bt(s[1]);r.push(p)}else d.done()}).next(()=>{Pt(0===r.length)})})}containsKey(t,e){return yF(t,this.userId,e)}Tn(t){return bF(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function yF(n,t,e){const i=es(t,e.path),r=i[1],s=IDBKeyRange.lowerBound(i);let l=!1;return cv(n).J({range:s,H:!0},(d,p,_)=>{const[b,D,I]=d;b===t&&D===r&&(l=!0),_.done()}).next(()=>l)}function ef(n){return ts(n,"mutations")}function cv(n){return ts(n,"documentMutations")}function bF(n){return ts(n,"mutationQueues")}class wm{constructor(t){this.En=t}next(){return this.En+=2,this.En}static An(){return new wm(0)}static Rn(){return new wm(-1)}}class vz{constructor(t,e){this.referenceDelegate=t,this.wt=e}allocateTargetId(t){return this.bn(t).next(e=>{const i=new wm(e.highestTargetId);return e.highestTargetId=i.next(),this.Pn(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.bn(t).next(e=>Nt.fromTimestamp(new mi(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.bn(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,i){return this.bn(t).next(r=>(r.highestListenSequenceNumber=e,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),e>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e),this.Pn(t,r)))}addTargetData(t,e){return this.vn(t,e).next(()=>this.bn(t).next(i=>(i.targetCount+=1,this.Vn(e,i),this.Pn(t,i))))}updateTargetData(t,e){return this.vn(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>uv(t).delete(e.targetId)).next(()=>this.bn(t)).next(i=>(Pt(i.targetCount>0),i.targetCount-=1,this.Pn(t,i)))}removeTargets(t,e,i){let r=0;const s=[];return uv(t).J((l,d)=>{const p=Dw(d);p.sequenceNumber<=e&&null===i.get(p.targetId)&&(r++,s.push(this.removeTargetData(t,p)))}).next(()=>ge.waitFor(s)).next(()=>r)}forEachTarget(t,e){return uv(t).J((i,r)=>{const s=Dw(r);e(s)})}bn(t){return wF(t).get("targetGlobalKey").next(e=>(Pt(null!==e),e))}Pn(t,e){return wF(t).put("targetGlobalKey",e)}vn(t,e){return uv(t).put(lF(this.wt,e))}Vn(t,e){let i=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,i=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,i=!0),i}getTargetCount(t){return this.bn(t).next(e=>e.targetCount)}getTargetData(t,e){const i=$h(e),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let s=null;return uv(t).J({range:r,index:"queryTargetsIndex"},(l,d,p)=>{const _=Dw(d);qh(e,_.target)&&(s=_,p.done())}).next(()=>s)}addMatchingKeys(t,e,i){const r=[],s=tf(t);return e.forEach(l=>{const d=ot(l.path);r.push(s.put({targetId:i,path:d})),r.push(this.referenceDelegate.addReference(t,i,l))}),ge.waitFor(r)}removeMatchingKeys(t,e,i){const r=tf(t);return ge.forEach(e,s=>{const l=ot(s.path);return ge.waitFor([r.delete([i,l]),this.referenceDelegate.removeReference(t,i,s)])})}removeMatchingKeysForTargetId(t,e){const i=tf(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(t,e){const i=IDBKeyRange.bound([e],[e+1],!1,!0),r=tf(t);let s=nn();return r.J({range:i,H:!0},(l,d,p)=>{const _=Bt(l[1]),b=new nt(_);s=s.add(b)}).next(()=>s)}containsKey(t,e){const i=ot(e.path),r=IDBKeyRange.bound([i],[Dx(i)],!1,!0);let s=0;return tf(t).J({index:"documentTargetsIndex",H:!0,range:r},([l,d],p,_)=>{0!==l&&(s++,_.done())}).next(()=>s>0)}te(t,e){return uv(t).get(e).next(i=>i?Dw(i):null)}}function uv(n){return ts(n,"targets")}function wF(n){return ts(n,"targetGlobal")}function tf(n){return ts(n,"targetDocuments")}function CF([n,t],[e,i]){const r=zt(n,e);return 0===r?zt(t,i):r}class yz{constructor(t){this.Sn=t,this.buffer=new Un(CF),this.Dn=0}Cn(){return++this.Dn}xn(t){const e=[t,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();CF(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class bz{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Nn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}stop(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}get started(){return null!==this.Nn}kn(t){var e=this;je("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(0,be.Z)(function*(){e.Nn=null;try{yield e.localStore.collectGarbage(e.garbageCollector)}catch(i){Yc(i)?je("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield sc(i)}yield e.kn(3e5)}))}}class wz{constructor(t,e){this.On=t,this.params=e}calculateTargetCount(t,e){return this.On.Mn(t).next(i=>Math.floor(e/100*i))}nthSequenceNumber(t,e){if(0===e)return ge.resolve(_s.ot);const i=new yz(e);return this.On.forEachTarget(t,r=>i.xn(r.sequenceNumber)).next(()=>this.On.Fn(t,r=>i.xn(r))).next(()=>i.maxValue)}removeTargets(t,e,i){return this.On.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.On.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?(je("LruGarbageCollector","Garbage collection skipped; disabled"),ge.resolve(_F)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(je("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),_F):this.$n(t,e))}getCacheSize(t){return this.On.getCacheSize(t)}$n(t,e){let i,r,s,l,d,p,_;const b=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(D=>(D>this.params.maximumSequenceNumbersToCollect?(je("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${D}`),r=this.params.maximumSequenceNumbersToCollect):r=D,l=Date.now(),this.nthSequenceNumber(t,r))).next(D=>(i=D,d=Date.now(),this.removeTargets(t,i,e))).next(D=>(s=D,p=Date.now(),this.removeOrphanedDocuments(t,i))).next(D=>(_=Date.now(),G_()<=sr.in.DEBUG&&je("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-b}ms\n\tDetermined least recently used ${r} in `+(d-l)+`ms\n\tRemoved ${s} targets in `+(p-d)+`ms\n\tRemoved ${D} documents in `+(_-p)+`ms\nTotal Duration: ${_-b}ms`),ge.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:D})))}}class Cz{constructor(t,e){this.db=t,this.garbageCollector=new wz(this,e)}Mn(t){const e=this.Bn(t);return this.db.getTargetCache().getTargetCount(t).next(i=>e.next(r=>i+r))}Bn(t){let e=0;return this.Fn(t,i=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}Fn(t,e){return this.Ln(t,(i,r)=>e(r))}addReference(t,e,i){return eS(t,i)}removeReference(t,e,i){return eS(t,i)}removeTargets(t,e,i){return this.db.getTargetCache().removeTargets(t,e,i)}markPotentiallyOrphaned(t,e){return eS(t,e)}Un(t,e){return function(i,r){let s=!1;return bF(i).Y(l=>yF(i,l,r).next(d=>(d&&(s=!0),ge.resolve(!d)))).next(()=>s)}(t,e)}removeOrphanedDocuments(t,e){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.Ln(t,(l,d)=>{if(d<=e){const p=this.Un(t,l).next(_=>{if(!_)return s++,i.getEntry(t,l).next(()=>(i.removeEntry(l,Nt.min()),tf(t).delete([0,ot(l.path)])))});r.push(p)}}).next(()=>ge.waitFor(r)).next(()=>i.apply(t)).next(()=>s)}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,i)}updateLimboDocument(t,e){return eS(t,e)}Ln(t,e){const i=tf(t);let r,s=_s.ot;return i.J({index:"documentTargetsIndex"},([l,d],{path:p,sequenceNumber:_})=>{0===l?(s!==_s.ot&&e(new nt(Bt(r)),s),s=_,r=p):s=_s.ot}).next(()=>{s!==_s.ot&&e(new nt(Bt(r)),s)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function eS(n,t){return tf(n).put((i=n.currentSequenceNumber,{targetId:0,path:ot(t.path),sequenceNumber:i}));var i}class EF{constructor(){this.changes=new cl(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Yn.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return void 0!==i?ge.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class Ez{constructor(t){this.wt=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,i){return Cm(t).put(i)}removeEntry(t,e,i){return Cm(t).delete(function(r,s){const l=r.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],Yx(s),l[l.length-1]]}(e,i))}updateMetadata(t,e){return this.getMetadata(t).next(i=>(i.byteSize+=e,this.qn(t,i)))}getEntry(t,e){let i=Yn.newInvalidDocument(e);return Cm(t).J({index:"documentKeyIndex",range:IDBKeyRange.only(Iw(e))},(r,s)=>{i=this.Kn(e,s)}).next(()=>i)}Gn(t,e){let i={size:0,document:Yn.newInvalidDocument(e)};return Cm(t).J({index:"documentKeyIndex",range:IDBKeyRange.only(Iw(e))},(r,s)=>{i={document:this.Kn(e,s),size:Xx(s)}}).next(()=>i)}getEntries(t,e){let i=Jr();return this.Qn(t,e,(r,s)=>{const l=this.Kn(r,s);i=i.insert(r,l)}).next(()=>i)}jn(t,e){let i=Jr(),r=new Si(nt.comparator);return this.Qn(t,e,(s,l)=>{const d=this.Kn(s,l);i=i.insert(s,d),r=r.insert(s,Xx(l))}).next(()=>({documents:i,Wn:r}))}Qn(t,e,i){if(e.isEmpty())return ge.resolve();let r=new Un(MF);e.forEach(p=>r=r.add(p));const s=IDBKeyRange.bound(Iw(r.first()),Iw(r.last())),l=r.getIterator();let d=l.getNext();return Cm(t).J({index:"documentKeyIndex",range:s},(p,_,b)=>{const D=nt.fromSegments([..._.prefixPath,_.collectionGroup,_.documentId]);for(;d&&MF(d,D)<0;)i(d,null),d=l.getNext();d&&d.isEqual(D)&&(i(d,_),d=l.hasNext()?l.getNext():null),d?b.q(Iw(d)):b.done()}).next(()=>{for(;d;)i(d,null),d=l.hasNext()?l.getNext():null})}getAllFromCollection(t,e,i){const r=[e.popLast().toArray(),e.lastSegment(),Yx(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],s=[e.popLast().toArray(),e.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Cm(t).K(IDBKeyRange.bound(r,s,!0)).next(l=>{let d=Jr();for(const p of l){const _=this.Kn(nt.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);d=d.insert(_.key,_)}return d})}getAllFromCollectionGroup(t,e,i,r){let s=Jr();const l=SF(e,i),d=SF(e,Us.max());return Cm(t).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,d,!0)},(p,_,b)=>{const D=this.Kn(nt.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);s=s.insert(D.key,D),s.size===r&&b.done()}).next(()=>s)}newChangeBuffer(t){return new Dz(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return xF(t).get("remoteDocumentGlobalKey").next(e=>(Pt(!!e),e))}qn(t,e){return xF(t).put("remoteDocumentGlobalKey",e)}Kn(t,e){if(e){const i=function cz(n,t){let e;if(t.document)e=vk(n.ne,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const i=nt.fromSegments(t.noDocument.path),r=gm(t.noDocument.readTime);e=Yn.newNoDocument(i,r),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return mt();{const i=nt.fromSegments(t.unknownDocument.path),r=gm(t.unknownDocument.version);e=Yn.newUnknownDocument(i,r)}}return t.readTime&&e.setReadTime(function(i){const r=new mi(i[0],i[1]);return Nt.fromTimestamp(r)}(t.readTime)),e}(this.wt,e);if(!i.isNoDocument()||!i.version.isEqual(Nt.min()))return i}return Yn.newInvalidDocument(t)}}function DF(n){return new Ez(n)}class Dz extends EF{constructor(t,e){super(),this.zn=t,this.trackRemovals=e,this.Hn=new cl(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(t){const e=[];let i=0,r=new Un((s,l)=>zt(s.canonicalString(),l.canonicalString()));return this.changes.forEach((s,l)=>{const d=this.Hn.get(s);if(e.push(this.zn.removeEntry(t,s,d.readTime)),l.isValidDocument()){const p=aF(this.zn.wt,l);r=r.add(s.path.popLast()),i+=Xx(p)-d.size,e.push(this.zn.addEntry(t,s,p))}else if(i-=d.size,this.trackRemovals){const p=aF(this.zn.wt,l.convertToNoDocument(Nt.min()));e.push(this.zn.addEntry(t,s,p))}}),r.forEach(s=>{e.push(this.zn.indexManager.addToCollectionParentIndex(t,s))}),e.push(this.zn.updateMetadata(t,i)),ge.waitFor(e)}getFromCache(t,e){return this.zn.Gn(t,e).next(i=>(this.Hn.set(e,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(t,e){return this.zn.jn(t,e).next(({documents:i,Wn:r})=>(r.forEach((s,l)=>{this.Hn.set(s,{size:l,readTime:i.get(s).readTime})}),i))}}function xF(n){return ts(n,"remoteDocumentGlobal")}function Cm(n){return ts(n,"remoteDocumentsV14")}function Iw(n){const t=n.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function SF(n,t){const e=t.documentKey.path.toArray();return[n,Yx(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function MF(n,t){const e=n.path.toArray(),i=t.path.toArray();let r=0;for(let s=0;s<e.length-2&&s<i.length-2;++s)if(r=zt(e[s],i[s]),r)return r;return r=zt(e.length,i.length),r||(r=zt(e[e.length-2],i[i.length-2]),r||zt(e[e.length-1],i[i.length-1]))}class xz{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class TF{constructor(t,e,i,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(r=>(i=r,this.getBaseDocument(t,e,i))).next(r=>(null!==i&&dm(i.mutation,r,co.empty(),mi.now()),r))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,nn()).next(()=>i))}getLocalViewOfDocuments(t,e,i=nn()){const r=uc();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,i).next(s=>{let l=tu();return s.forEach((d,p)=>{l=l.insert(d,p.overlayedDocument)}),l}))}getOverlayedDocuments(t,e){const i=uc();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,nn()))}populateOverlays(t,e,i){const r=[];return i.forEach(s=>{e.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(t,r).next(s=>{s.forEach((l,d)=>{e.set(l,d)})})}computeViews(t,e,i,r){let s=Jr();const l=sv(),d=sv();return e.forEach((p,_)=>{const b=i.get(_.key);r.has(_.key)&&(void 0===b||b.mutation instanceof eu)?s=s.insert(_.key,_):void 0!==b&&(l.set(_.key,b.mutation.getFieldMask()),dm(b.mutation,_,b.mutation.getFieldMask(),mi.now()))}),this.recalculateAndSaveOverlays(t,s).next(p=>(p.forEach((_,b)=>l.set(_,b)),e.forEach((_,b)=>{var D;return d.set(_,new xz(b,null!==(D=l.get(_))&&void 0!==D?D:null))}),d))}recalculateAndSaveOverlays(t,e){const i=sv();let r=new Si((l,d)=>l-d),s=nn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(l=>{for(const d of l)d.keys().forEach(p=>{const _=e.get(p);if(null===_)return;let b=i.get(p)||co.empty();b=d.applyToLocalView(_,b),i.set(p,b);const D=(r.get(d.batchId)||nn()).add(p);r=r.insert(d.batchId,D)})}).next(()=>{const l=[],d=r.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),_=p.key,b=p.value,D=ak();b.forEach(I=>{if(!s.has(I)){const P=aw(e.get(I),i.get(I));null!==P&&D.set(I,P),s=s.add(I)}}),l.push(this.documentOverlayCache.saveOverlays(t,_,D))}return ge.waitFor(l)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i){return nt.isDocumentKey((r=e).path)&&null===r.collectionGroup&&0===r.filters.length?this.getDocumentsMatchingDocumentQuery(t,e.path):tv(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i):this.getDocumentsMatchingCollectionQuery(t,e,i);var r}getNextDocuments(t,e,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,r).next(s=>{const l=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,r-s.size):ge.resolve(uc());let d=-1,p=s;return l.next(_=>ge.forEach(_,(b,D)=>(d<D.largestBatchId&&(d=D.largestBatchId),s.get(b)?ge.resolve():this.getBaseDocument(t,b,D).next(I=>{p=p.insert(b,I)}))).next(()=>this.populateOverlays(t,_,s)).next(()=>this.computeViews(t,p,_,nn())).next(b=>({batchId:d,changes:ok(b)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new nt(e)).next(i=>{let r=tu();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,e,i){const r=e.collectionGroup;let s=tu();return this.indexManager.getCollectionParents(t,r).next(l=>ge.forEach(l,d=>{const p=(_=e,b=d.child(r),new lc(b,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt));var _,b;return this.getDocumentsMatchingCollectionQuery(t,p,i).next(_=>{_.forEach((b,D)=>{s=s.insert(b,D)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(t,e,i){let r;return this.remoteDocumentCache.getAllFromCollection(t,e.path,i).next(s=>(r=s,this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId))).next(s=>{s.forEach((d,p)=>{const _=p.getKey();null===r.get(_)&&(r=r.insert(_,Yn.newInvalidDocument(_)))});let l=tu();return r.forEach((d,p)=>{const _=s.get(d);void 0!==_&&dm(_.mutation,p,co.empty(),mi.now()),ho(e,p)&&(l=l.insert(d,p))}),l})}getBaseDocument(t,e,i){return null===i||1===i.mutation.type?this.remoteDocumentCache.getEntry(t,e):ge.resolve(Yn.newInvalidDocument(e))}}class Sz{constructor(t){this.wt=t,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(t,e){return ge.resolve(this.Jn.get(e))}saveBundleMetadata(t,e){var i;return this.Jn.set(e.id,{id:(i=e).id,version:i.version,createTime:Cr(i.createTime)}),ge.resolve()}getNamedQuery(t,e){return ge.resolve(this.Yn.get(e))}saveNamedQuery(t,e){return this.Yn.set(e.name,{name:(i=e).name,query:Ek(i.bundledQuery),readTime:Cr(i.readTime)}),ge.resolve();var i}}class Mz{constructor(){this.overlays=new Si(nt.comparator),this.Xn=new Map}getOverlay(t,e){return ge.resolve(this.overlays.get(e))}getOverlays(t,e){const i=uc();return ge.forEach(e,r=>this.getOverlay(t,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((r,s)=>{this.ie(t,e,s)}),ge.resolve()}removeOverlaysForBatchId(t,e,i){const r=this.Xn.get(i);return void 0!==r&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Xn.delete(i)),ge.resolve()}getOverlaysForCollection(t,e,i){const r=uc(),s=e.length+1,l=new nt(e.child("")),d=this.overlays.getIteratorFrom(l);for(;d.hasNext();){const p=d.getNext().value,_=p.getKey();if(!e.isPrefixOf(_.path))break;_.path.length===s&&p.largestBatchId>i&&r.set(p.getKey(),p)}return ge.resolve(r)}getOverlaysForCollectionGroup(t,e,i,r){let s=new Si((_,b)=>_-b);const l=this.overlays.getIterator();for(;l.hasNext();){const _=l.getNext().value;if(_.getKey().getCollectionGroup()===e&&_.largestBatchId>i){let b=s.get(_.largestBatchId);null===b&&(b=uc(),s=s.insert(_.largestBatchId,b)),b.set(_.getKey(),_)}}const d=uc(),p=s.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((_,b)=>d.set(_,b)),!(d.size()>=r)););return ge.resolve(d)}ie(t,e,i){const r=this.overlays.get(i.key);if(null!==r){const l=this.Xn.get(r.largestBatchId).delete(i.key);this.Xn.set(r.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new Ck(e,i));let s=this.Xn.get(e);void 0===s&&(s=nn(),this.Xn.set(e,s)),this.Xn.set(e,s.add(i.key))}}class Sk{constructor(){this.Zn=new Un(ns.ts),this.es=new Un(ns.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(t,e){const i=new ns(t,e);this.Zn=this.Zn.add(i),this.es=this.es.add(i)}ss(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.rs(new ns(t,e))}os(t,e){t.forEach(i=>this.removeReference(i,e))}us(t){const e=new nt(new mn([])),i=new ns(e,t),r=new ns(e,t+1),s=[];return this.es.forEachInRange([i,r],l=>{this.rs(l),s.push(l.key)}),s}cs(){this.Zn.forEach(t=>this.rs(t))}rs(t){this.Zn=this.Zn.delete(t),this.es=this.es.delete(t)}hs(t){const e=new nt(new mn([])),i=new ns(e,t),r=new ns(e,t+1);let s=nn();return this.es.forEachInRange([i,r],l=>{s=s.add(l.key)}),s}containsKey(t){const e=new ns(t,0),i=this.Zn.firstAfterOrEqual(e);return null!==i&&t.isEqual(i.key)}}class ns{constructor(t,e){this.key=t,this.ls=e}static ts(t,e){return nt.comparator(t.key,e.key)||zt(t.ls,e.ls)}static ns(t,e){return zt(t.ls,e.ls)||nt.comparator(t.key,e.key)}}class Tz{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.fs=1,this.ds=new Un(ns.ts)}checkEmpty(t){return ge.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,i,r){const s=this.fs;this.fs++;const l=new bk(s,e,i,r);this.mutationQueue.push(l);for(const d of r)this.ds=this.ds.add(new ns(d.key,s)),this.indexManager.addToCollectionParentIndex(t,d.key.path.popLast());return ge.resolve(l)}lookupMutationBatch(t,e){return ge.resolve(this._s(e))}getNextMutationBatchAfterBatchId(t,e){const r=this.ws(e+1),s=r<0?0:r;return ge.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ge.resolve(0===this.mutationQueue.length?-1:this.fs-1)}getAllMutationBatches(t){return ge.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new ns(e,0),r=new ns(e,Number.POSITIVE_INFINITY),s=[];return this.ds.forEachInRange([i,r],l=>{const d=this._s(l.ls);s.push(d)}),ge.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new Un(zt);return e.forEach(r=>{const s=new ns(r,0),l=new ns(r,Number.POSITIVE_INFINITY);this.ds.forEachInRange([s,l],d=>{i=i.add(d.ls)})}),ge.resolve(this.gs(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1;let s=i;nt.isDocumentKey(s)||(s=s.child(""));const l=new ns(new nt(s),0);let d=new Un(zt);return this.ds.forEachWhile(p=>{const _=p.key.path;return!!i.isPrefixOf(_)&&(_.length===r&&(d=d.add(p.ls)),!0)},l),ge.resolve(this.gs(d))}gs(t){const e=[];return t.forEach(i=>{const r=this._s(i);null!==r&&e.push(r)}),e}removeMutationBatch(t,e){Pt(0===this.ys(e.batchId,"removed")),this.mutationQueue.shift();let i=this.ds;return ge.forEach(e.mutations,r=>{const s=new ns(r.key,e.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.ds=i})}In(t){}containsKey(t,e){const i=new ns(e,0),r=this.ds.firstAfterOrEqual(i);return ge.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return ge.resolve()}ys(t,e){return this.ws(t)}ws(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}_s(t){const e=this.ws(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class Iz{constructor(t){this.ps=t,this.docs=new Si(nt.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,r=this.docs.get(i),s=r?r.size:0,l=this.ps(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:l}),this.size+=l-s,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return ge.resolve(i?i.document.mutableCopy():Yn.newInvalidDocument(e))}getEntries(t,e){let i=Jr();return e.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Yn.newInvalidDocument(r))}),ge.resolve(i)}getAllFromCollection(t,e,i){let r=Jr();const s=new nt(e.child("")),l=this.docs.getIteratorFrom(s);for(;l.hasNext();){const{key:d,value:{document:p}}=l.getNext();if(!e.isPrefixOf(d.path))break;d.path.length>e.length+1||Y_(H0(p),i)<=0||(r=r.insert(p.key,p.mutableCopy()))}return ge.resolve(r)}getAllFromCollectionGroup(t,e,i,r){mt()}Is(t,e){return ge.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new Az(this)}getSize(t){return ge.resolve(this.size)}}class Az extends EF{constructor(t){super(),this.zn=t}applyChanges(t){const e=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?e.push(this.zn.addEntry(t,r)):this.zn.removeEntry(i)}),ge.waitFor(e)}getFromCache(t,e){return this.zn.getEntry(t,e)}getAllFromCache(t,e){return this.zn.getEntries(t,e)}}class kz{constructor(t){this.persistence=t,this.Ts=new cl(e=>$h(e),qh),this.lastRemoteSnapshotVersion=Nt.min(),this.highestTargetId=0,this.Es=0,this.As=new Sk,this.targetCount=0,this.Rs=wm.An()}forEachTarget(t,e){return this.Ts.forEach((i,r)=>e(r)),ge.resolve()}getLastRemoteSnapshotVersion(t){return ge.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return ge.resolve(this.Es)}allocateTargetId(t){return this.highestTargetId=this.Rs.next(),ge.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.Es&&(this.Es=e),ge.resolve()}vn(t){this.Ts.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Rs=new wm(e),this.highestTargetId=e),t.sequenceNumber>this.Es&&(this.Es=t.sequenceNumber)}addTargetData(t,e){return this.vn(e),this.targetCount+=1,ge.resolve()}updateTargetData(t,e){return this.vn(e),ge.resolve()}removeTargetData(t,e){return this.Ts.delete(e.target),this.As.us(e.targetId),this.targetCount-=1,ge.resolve()}removeTargets(t,e,i){let r=0;const s=[];return this.Ts.forEach((l,d)=>{d.sequenceNumber<=e&&null===i.get(d.targetId)&&(this.Ts.delete(l),s.push(this.removeMatchingKeysForTargetId(t,d.targetId)),r++)}),ge.waitFor(s).next(()=>r)}getTargetCount(t){return ge.resolve(this.targetCount)}getTargetData(t,e){const i=this.Ts.get(e)||null;return ge.resolve(i)}addMatchingKeys(t,e,i){return this.As.ss(e,i),ge.resolve()}removeMatchingKeys(t,e,i){this.As.os(e,i);const r=this.persistence.referenceDelegate,s=[];return r&&e.forEach(l=>{s.push(r.markPotentiallyOrphaned(t,l))}),ge.waitFor(s)}removeMatchingKeysForTargetId(t,e){return this.As.us(e),ge.resolve()}getMatchingKeysForTargetId(t,e){const i=this.As.hs(e);return ge.resolve(i)}containsKey(t,e){return ge.resolve(this.As.containsKey(e))}}class IF{constructor(t,e){this.bs={},this.overlays={},this.Ps=new _s(0),this.vs=!1,this.vs=!0,this.referenceDelegate=t(this),this.Vs=new kz(this),this.indexManager=new gz,this.remoteDocumentCache=new Iz(i=>this.referenceDelegate.Ss(i)),this.wt=new oF(e),this.Ds=new Sz(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new Mz,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.bs[t.toKey()];return i||(i=new Tz(e,this.referenceDelegate),this.bs[t.toKey()]=i),i}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(t,e,i){je("MemoryPersistence","Starting transaction:",t);const r=new Rz(this.Ps.next());return this.referenceDelegate.Cs(),i(r).next(s=>this.referenceDelegate.xs(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Ns(t,e){return ge.or(Object.values(this.bs).map(i=>()=>i.containsKey(t,e)))}}class Rz extends Sx{constructor(t){super(),this.currentSequenceNumber=t}}class tS{constructor(t){this.persistence=t,this.ks=new Sk,this.Os=null}static Ms(t){return new tS(t)}get Fs(){if(this.Os)return this.Os;throw mt()}addReference(t,e,i){return this.ks.addReference(i,e),this.Fs.delete(i.toString()),ge.resolve()}removeReference(t,e,i){return this.ks.removeReference(i,e),this.Fs.add(i.toString()),ge.resolve()}markPotentiallyOrphaned(t,e){return this.Fs.add(e.toString()),ge.resolve()}removeTarget(t,e){this.ks.us(e.targetId).forEach(r=>this.Fs.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(s=>this.Fs.add(s.toString()))}).next(()=>i.removeTargetData(t,e))}Cs(){this.Os=new Set}xs(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ge.forEach(this.Fs,i=>{const r=nt.fromPath(i);return this.$s(t,r).next(s=>{s||e.removeEntry(r,Nt.min())})}).next(()=>(this.Os=null,e.apply(t)))}updateLimboDocument(t,e){return this.$s(t,e).next(i=>{i?this.Fs.delete(e.toString()):this.Fs.add(e.toString())})}Ss(t){return 0}$s(t,e){return ge.or([()=>ge.resolve(this.ks.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ns(t,e)])}}class Oz{constructor(t){this.wt=t}O(t,e,i,r){const s=new em("createOrUpgrade",e);var d;i<1&&r>=1&&(t.createObjectStore("owner"),(d=t).createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Fn,{unique:!0}),d.createObjectStore("documentMutations"),AF(t),function(d){d.createObjectStore("remoteDocuments")}(t));let l=ge.resolve();return i<3&&r>=3&&(0!==i&&(function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")}(t),AF(t)),l=l.next(()=>function(d){const p=d.store("targetGlobal"),_={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Nt.min().toTimestamp(),targetCount:0};return p.put("targetGlobalKey",_)}(s))),i<4&&r>=4&&(0!==i&&(l=l.next(()=>function(d,p){return p.store("mutations").K().next(_=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Fn,{unique:!0});const b=p.store("mutations"),D=_.map(I=>b.put(I));return ge.waitFor(D)})}(t,s))),l=l.next(()=>{!function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})}(t)})),i<5&&r>=5&&(l=l.next(()=>this.Bs(s))),i<6&&r>=6&&(l=l.next(()=>(function(d){d.createObjectStore("remoteDocumentGlobal")}(t),this.Ls(s)))),i<7&&r>=7&&(l=l.next(()=>this.Us(s))),i<8&&r>=8&&(l=l.next(()=>this.qs(t,s))),i<9&&r>=9&&(l=l.next(()=>{!function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")}(t)})),i<10&&r>=10&&(l=l.next(()=>this.Ks(s))),i<11&&r>=11&&(l=l.next(()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(d){d.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),i<12&&r>=12&&(l=l.next(()=>{!function(d){const p=d.createObjectStore("documentOverlays",{keyPath:rz});p.createIndex("collectionPathOverlayIndex",sz,{unique:!1}),p.createIndex("collectionGroupOverlayIndex",oz,{unique:!1})}(t)})),i<13&&r>=13&&(l=l.next(()=>function(d){const p=d.createObjectStore("remoteDocumentsV14",{keyPath:gw});p.createIndex("documentKeyIndex",_w),p.createIndex("collectionGroupIndex",vw)}(t)).next(()=>this.Gs(t,s)).next(()=>t.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(l=l.next(()=>this.Qs(t,s))),i<15&&r>=15&&(l=l.next(()=>function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:Ew}).createIndex("sequenceNumberIndex",tz,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:nz}).createIndex("documentKeyIndex",iz,{unique:!1})}(t))),l}Ls(t){let e=0;return t.store("remoteDocuments").J((i,r)=>{e+=Xx(r)}).next(()=>{const i={byteSize:e};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Bs(t){const e=t.store("mutationQueues"),i=t.store("mutations");return e.K().next(r=>ge.forEach(r,s=>{const l=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.K("userMutationsIndex",l).next(d=>ge.forEach(d,p=>{Pt(p.userId===s.userId);const _=_m(this.wt,p);return vF(t,s.userId,_).next(()=>{})}))}))}Us(t){const e=t.store("targetDocuments"),i=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(r=>{const s=[];return i.J((l,d)=>{const p=new mn(l),_=[0,ot(p)];s.push(e.get(_).next(b=>b?ge.resolve():e.put({targetId:0,path:ot(p),sequenceNumber:r.highestListenSequenceNumber})))}).next(()=>ge.waitFor(s))})}qs(t,e){t.createObjectStore("collectionParents",{keyPath:Cw});const i=e.store("collectionParents"),r=new xk,s=l=>{if(r.add(l)){const d=l.lastSegment(),p=l.popLast();return i.put({collectionId:d,parent:ot(p)})}};return e.store("remoteDocuments").J({H:!0},(l,d)=>{const p=new mn(l);return s(p.popLast())}).next(()=>e.store("documentMutations").J({H:!0},([l,d,p],_)=>{const b=Bt(d);return s(b.popLast())}))}Ks(t){const e=t.store("targets");return e.J((i,r)=>{const s=Dw(r),l=lF(this.wt,s);return e.put(l)})}Gs(t,e){const i=e.store("remoteDocuments"),r=[];return i.J((s,l)=>{const d=e.store("remoteDocumentsV14"),p=(_=l,_.document?new nt(mn.fromString(_.document.name).popFirst(5)):_.noDocument?nt.fromSegments(_.noDocument.path):_.unknownDocument?nt.fromSegments(_.unknownDocument.path):mt()).path.toArray();var _;const b={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};r.push(d.put(b))}).next(()=>ge.waitFor(r))}Qs(t,e){const i=e.store("mutations"),r=DF(this.wt),s=new IF(tS.Ms,this.wt.ne);return i.K().next(l=>{const d=new Map;return l.forEach(p=>{var _;let b=null!==(_=d.get(p.userId))&&void 0!==_?_:nn();_m(this.wt,p).keys().forEach(D=>b=b.add(D)),d.set(p.userId,b)}),ge.forEach(d,(p,_)=>{const b=new ar(_),D=Zx.se(this.wt,b),I=s.getIndexManager(b),P=Jx.se(b,this.wt,I,s.referenceDelegate);return new TF(r,P,D,I).recalculateAndSaveOverlaysForDocumentKeys(new yk(e,_s.ot),p).next()})})}}function AF(n){n.createObjectStore("targetDocuments",{keyPath:bw}).createIndex("documentTargetsIndex",ww,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",yw,{unique:!0}),n.createObjectStore("targetGlobal")}const Mk="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Tk{constructor(t,e,i,r,s,l,d,p,_,b,D=14){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=i,this.js=s,this.window=l,this.document=d,this.Ws=_,this.zs=b,this.Hs=D,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=I=>Promise.resolve(),!Tk.V())throw new Ne(ye.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Cz(this,r),this.ei=e+"main",this.wt=new oF(p),this.ni=new xa(this.ei,this.Hs,new Oz(this.wt)),this.Vs=new vz(this.referenceDelegate,this.wt),this.remoteDocumentCache=DF(this.wt),this.Ds=new uz,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===b&&Xi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ii().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ne(ye.FAILED_PRECONDITION,Mk);return this.ri(),this.oi(),this.ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Vs.getHighestSequenceNumber(t))}).then(t=>{this.Ps=new _s(t,this.Ws)}).then(()=>{this.vs=!0}).catch(t=>(this.ni&&this.ni.close(),Promise.reject(t)))}ci(t){var e=this;return this.ti=function(){var i=(0,be.Z)(function*(r){if(e.started)return t(r)});return function(r){return i.apply(this,arguments)}}(),t(this.isPrimary)}setDatabaseDeletedListener(t){this.ni.F(function(){var e=(0,be.Z)(function*(i){null===i.newVersion&&(yield t())});return function(i){return e.apply(this,arguments)}}())}setNetworkEnabled(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.js.enqueueAndForget((0,be.Z)(function*(){e.started&&(yield e.ii())})))}ii(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>nS(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ai(t).next(e=>{e||(this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)))})}).next(()=>this.hi(t)).next(e=>this.isPrimary&&!e?this.li(t).next(()=>!1):!!e&&this.fi(t).next(()=>!0))).catch(t=>{if(Yc(t))return je("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return je("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.js.enqueueRetryable(()=>this.ti(t)),this.isPrimary=t})}ai(t){return Aw(t).get("owner").next(e=>ge.resolve(this.di(e)))}_i(t){return nS(t).delete(this.clientId)}wi(){var t=this;return(0,be.Z)(function*(){if(t.isPrimary&&!t.mi(t.Zs,18e5)){t.Zs=Date.now();const e=yield t.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const r=ts(i,"clientMetadata");return r.K().next(s=>{const l=t.gi(s,18e5),d=s.filter(p=>-1===l.indexOf(p));return ge.forEach(d,p=>r.delete(p.clientId)).next(()=>d)})}).catch(()=>[]);if(t.si)for(const i of e)t.si.removeItem(t.yi(i.clientId))}})()}ui(){this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ii().then(()=>this.wi()).then(()=>this.ui()))}di(t){return!!t&&t.ownerId===this.clientId}hi(t){return this.zs?ge.resolve(!0):Aw(t).get("owner").next(e=>{if(null!==e&&this.mi(e.leaseTimestampMs,5e3)&&!this.pi(e.ownerId)){if(this.di(e)&&this.networkEnabled)return!0;if(!this.di(e)){if(!e.allowTabSynchronization)throw new Ne(ye.FAILED_PRECONDITION,Mk);return!1}}return!(!this.networkEnabled||!this.inForeground)||nS(t).K().next(i=>void 0===this.gi(i,5e3).find(r=>{if(this.clientId!==r.clientId){const l=!this.inForeground&&r.inForeground,d=this.networkEnabled===r.networkEnabled;if(!this.networkEnabled&&r.networkEnabled||l&&d)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&je("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){var t=this;return(0,be.Z)(function*(){t.vs=!1,t.Ii(),t.Xs&&(t.Xs.cancel(),t.Xs=null),t.Ti(),t.Ei(),yield t.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const i=new yk(e,_s.ot);return t.li(i).next(()=>t._i(i))}),t.ni.close(),t.Ai()})()}gi(t,e){return t.filter(i=>this.mi(i.updateTimeMs,e)&&!this.pi(i.clientId))}Ri(){return this.runTransaction("getActiveClients","readonly",t=>nS(t).K().next(e=>this.gi(e,18e5).map(i=>i.clientId)))}get started(){return this.vs}getMutationQueue(t,e){return Jx.se(t,this.wt,e,this.referenceDelegate)}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new _z(t,this.wt.ne.databaseId)}getDocumentOverlayCache(t){return Zx.se(this.wt,t)}getBundleCache(){return this.Ds}runTransaction(t,e,i){je("IndexedDbPersistence","Starting transaction:",t);const r="readonly"===e?"readonly":"readwrite",s=15===(l=this.Hs)?lz:14===l?sF:13===l?rF:12===l?az:11===l?iF:void mt();var l;let d;return this.ni.runTransaction(t,r,s,p=>(d=new yk(p,this.Ps?this.Ps.next():_s.ot),"readwrite-primary"===e?this.ai(d).next(_=>!!_||this.hi(d)).next(_=>{if(!_)throw Xi(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)),new Ne(ye.FAILED_PRECONDITION,j0);return i(d)}).next(_=>this.fi(d).next(()=>_)):this.bi(d).next(()=>i(d)))).then(p=>(d.raiseOnCommittedEvent(),p))}bi(t){return Aw(t).get("owner").next(e=>{if(null!==e&&this.mi(e.leaseTimestampMs,5e3)&&!this.pi(e.ownerId)&&!this.di(e)&&!(this.zs||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Ne(ye.FAILED_PRECONDITION,Mk)})}fi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Aw(t).put("owner",e)}static V(){return xa.V()}li(t){const e=Aw(t);return e.get("owner").next(i=>this.di(i)?(je("IndexedDbPersistence","Releasing primary lease."),e.delete("owner")):ge.resolve())}mi(t,e){const i=Date.now();return!(t<i-e||t>i&&(Xi(`Detected an update time that is in the future: ${t} > ${i}`),1))}ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=()=>{this.js.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ii()))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}Ti(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}oi(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Js=()=>{this.Ii(),(0,F.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.js.enterRestrictedMode(!0),this.js.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Js))}Ei(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}pi(t){var e;try{const i=null!==(null===(e=this.si)||void 0===e?void 0:e.getItem(this.yi(t)));return je("IndexedDbPersistence",`Client '${t}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Xi("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Ii(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(t){Xi("Failed to set zombie client id.",t)}}Ai(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch(t){}}yi(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function Aw(n){return ts(n,"owner")}function nS(n){return ts(n,"clientMetadata")}function Ik(n,t){let e=n.projectId;return n.isDefaultDatabase||(e+="."+n.database),"firestore/"+t+"/"+e+"/"}class Ak{constructor(t,e,i,r){this.targetId=t,this.fromCache=e,this.Pi=i,this.vi=r}static Vi(t,e){let i=nn(),r=nn();for(const s of e.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new Ak(t,e.fromCache,i,r)}}class kF{constructor(){this.Si=!1}initialize(t,e){this.Di=t,this.indexManager=e,this.Si=!0}getDocumentsMatchingQuery(t,e,i,r){return this.Ci(t,e).next(s=>s||this.xi(t,e,r,i)).next(s=>s||this.Ni(t,e))}Ci(t,e){return ge.resolve(null)}xi(t,e,i,r){return function YA(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(e)||r.isEqual(Nt.min())?this.Ni(t,e):this.Di.getDocuments(t,i).next(s=>{const l=this.ki(e,s);return this.Oi(e,l,i,r)?this.Ni(t,e):(G_()<=sr.in.DEBUG&&je("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),cm(e)),this.Mi(t,l,e,W_(r,-1)))})}ki(t,e){let i=new Un(ZA(t));return e.forEach((r,s)=>{ho(t,s)&&(i=i.add(s))}),i}Oi(t,e,i,r){if(null===t.limit)return!1;if(i.size!==e.size)return!0;const s="F"===t.limitType?e.last():e.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ni(t,e){return G_()<=sr.in.DEBUG&&je("QueryEngine","Using full collection scan to execute query:",cm(e)),this.Di.getDocumentsMatchingQuery(t,e,Us.min())}Mi(t,e,i,r){return this.Di.getDocumentsMatchingQuery(t,i,r).next(s=>(e.forEach(l=>{s=s.insert(l.key,l)}),s))}}class Pz{constructor(t,e,i,r){this.persistence=t,this.Fi=e,this.wt=r,this.$i=new Si(zt),this.Bi=new cl(s=>$h(s),qh),this.Li=new Map,this.Ui=t.getRemoteDocumentCache(),this.Vs=t.getTargetCache(),this.Ds=t.getBundleCache(),this.qi(i)}qi(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new TF(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.$i))}}function RF(n,t,e,i){return new Pz(n,t,e,i)}function OF(n,t){return kk.apply(this,arguments)}function kk(){return kk=(0,be.Z)(function*(n,t){const e=ct(n);return yield e.persistence.runTransaction("Handle user change","readonly",i=>{let r;return e.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,e.qi(t),e.mutationQueue.getAllMutationBatches(i))).next(s=>{const l=[],d=[];let p=nn();for(const _ of r){l.push(_.batchId);for(const b of _.mutations)p=p.add(b.key)}for(const _ of s){d.push(_.batchId);for(const b of _.mutations)p=p.add(b.key)}return e.localDocuments.getDocuments(i,p).next(_=>({Ki:_,removedBatchIds:l,addedBatchIds:d}))})})}),kk.apply(this,arguments)}function Nz(n,t){const e=ct(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=t.batch.keys(),s=e.Ui.newChangeBuffer({trackRemovals:!0});return function(l,d,p,_){const b=p.batch,D=b.keys();let I=ge.resolve();return D.forEach(P=>{I=I.next(()=>_.getEntry(d,P)).next(U=>{const Q=p.docVersions.get(P);Pt(null!==Q),U.version.compareTo(Q)<0&&(b.applyToRemoteDocument(U,p),U.isValidDocument()&&(U.setReadTime(p.commitVersion),_.addEntry(U)))})}),I.next(()=>l.mutationQueue.removeMutationBatch(d,b))}(e,i,t,s).next(()=>s.apply(i)).next(()=>e.mutationQueue.performConsistencyCheck(i)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let d=nn();for(let p=0;p<l.mutationResults.length;++p)l.mutationResults[p].transformResults.length>0&&(d=d.add(l.batch.mutations[p].key));return d}(t))).next(()=>e.localDocuments.getDocuments(i,r))})}function PF(n){const t=ct(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Vs.getLastRemoteSnapshotVersion(e))}function Fz(n,t){const e=ct(n),i=t.snapshotVersion;let r=e.$i;return e.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const l=e.Ui.newChangeBuffer({trackRemovals:!0});r=e.$i;const d=[];t.targetChanges.forEach((b,D)=>{const I=r.get(D);if(!I)return;d.push(e.Vs.removeMatchingKeys(s,b.removedDocuments,D).next(()=>e.Vs.addMatchingKeys(s,b.addedDocuments,D)));let P=I.withSequenceNumber(s.currentSequenceNumber);var U,Q,le;t.targetMismatches.has(D)?P=P.withResumeToken(Pi.EMPTY_BYTE_STRING,Nt.min()).withLastLimboFreeSnapshotVersion(Nt.min()):b.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(b.resumeToken,i)),r=r.insert(D,P),Q=P,le=b,(0===(U=I).resumeToken.approximateByteSize()||Q.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=3e8||le.addedDocuments.size+le.modifiedDocuments.size+le.removedDocuments.size>0)&&d.push(e.Vs.updateTargetData(s,P))});let p=Jr(),_=nn();if(t.documentUpdates.forEach(b=>{t.resolvedLimboDocuments.has(b)&&d.push(e.persistence.referenceDelegate.updateLimboDocument(s,b))}),d.push(NF(s,l,t.documentUpdates).next(b=>{p=b.Gi,_=b.Qi})),!i.isEqual(Nt.min())){const b=e.Vs.getLastRemoteSnapshotVersion(s).next(D=>e.Vs.setTargetsMetadata(s,s.currentSequenceNumber,i));d.push(b)}return ge.waitFor(d).next(()=>l.apply(s)).next(()=>e.localDocuments.getLocalViewOfDocuments(s,p,_)).next(()=>p)}).then(s=>(e.$i=r,s))}function NF(n,t,e){let i=nn(),r=nn();return e.forEach(s=>i=i.add(s)),t.getEntries(n,i).next(s=>{let l=Jr();return e.forEach((d,p)=>{const _=s.get(d);p.isFoundDocument()!==_.isFoundDocument()&&(r=r.add(d)),p.isNoDocument()&&p.version.isEqual(Nt.min())?(t.removeEntry(d,p.readTime),l=l.insert(d,p)):!_.isValidDocument()||p.version.compareTo(_.version)>0||0===p.version.compareTo(_.version)&&_.hasPendingWrites?(t.addEntry(p),l=l.insert(d,p)):je("LocalStore","Ignoring outdated watch update for ",d,". Current version:",_.version," Watch version:",p.version)}),{Gi:l,Qi:r}})}function Lz(n,t){const e=ct(n);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===t&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function dv(n,t){const e=ct(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return e.Vs.getTargetData(i,t).next(s=>s?(r=s,ge.resolve(r)):e.Vs.allocateTargetId(i).next(l=>(r=new Jh(t,l,0,i.currentSequenceNumber),e.Vs.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=e.$i.get(i.targetId);return(null===r||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.$i=e.$i.insert(i.targetId,i),e.Bi.set(t,i.targetId)),i})}function hv(n,t,e){return Rk.apply(this,arguments)}function Rk(){return Rk=(0,be.Z)(function*(n,t,e){const i=ct(n),r=i.$i.get(t),s=e?"readwrite":"readwrite-primary";try{e||(yield i.persistence.runTransaction("Release target",s,l=>i.persistence.referenceDelegate.removeTarget(l,r)))}catch(l){if(!Yc(l))throw l;je("LocalStore",`Failed to update sequence numbers for target ${t}: ${l}`)}i.$i=i.$i.remove(t),i.Bi.delete(r.target)}),Rk.apply(this,arguments)}function iS(n,t,e){const i=ct(n);let r=Nt.min(),s=nn();return i.persistence.runTransaction("Execute query","readonly",l=>function(d,p,_){const b=ct(d),D=b.Bi.get(_);return void 0!==D?ge.resolve(b.$i.get(D)):b.Vs.getTargetData(p,_)}(i,l,uo(t)).next(d=>{if(d)return r=d.lastLimboFreeSnapshotVersion,i.Vs.getMatchingKeysForTargetId(l,d.targetId).next(p=>{s=p})}).next(()=>i.Fi.getDocumentsMatchingQuery(l,t,e?r:Nt.min(),e?s:nn())).next(d=>(BF(i,Lx(t),d),{documents:d,ji:s})))}function FF(n,t){const e=ct(n),i=ct(e.Vs),r=e.$i.get(t);return r?Promise.resolve(r.target):e.persistence.runTransaction("Get target data","readonly",s=>i.te(s,t).next(l=>l?l.target:null))}function LF(n,t){const e=ct(n),i=e.Li.get(t)||Nt.min();return e.persistence.runTransaction("Get new document changes","readonly",r=>e.Ui.getAllFromCollectionGroup(r,t,W_(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(BF(e,t,r),r))}function BF(n,t,e){let i=Nt.min();e.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.Li.set(t,i)}function Ok(){return Ok=(0,be.Z)(function*(n,t,e,i){const r=ct(n);let s=nn(),l=Jr();for(const _ of e){const b=t.Wi(_.metadata.name);_.document&&(s=s.add(b));const D=t.zi(_);D.setReadTime(t.Hi(_.metadata.readTime)),l=l.insert(b,D)}const d=r.Ui.newChangeBuffer({trackRemovals:!0}),p=yield dv(r,(_=i,uo(Yh(mn.fromString(`__bundle__/docs/${_}`)))));var _;return r.persistence.runTransaction("Apply bundle documents","readwrite",_=>NF(_,d,l).next(b=>(d.apply(_),b)).next(b=>r.Vs.removeMatchingKeysForTargetId(_,p.targetId).next(()=>r.Vs.addMatchingKeys(_,s,p.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(_,b.Gi,b.Qi)).next(()=>b.Gi)))}),Ok.apply(this,arguments)}function Vz(n,t){return Pk.apply(this,arguments)}function Pk(){return Pk=(0,be.Z)(function*(n,t,e=nn()){const i=yield dv(n,uo(Ek(t.bundledQuery))),r=ct(n);return r.persistence.runTransaction("Save named query","readwrite",s=>{const l=Cr(t.readTime);if(i.snapshotVersion.compareTo(l)>=0)return r.Ds.saveNamedQuery(s,t);const d=i.withResumeToken(Pi.EMPTY_BYTE_STRING,l);return r.$i=r.$i.insert(d.targetId,d),r.Vs.updateTargetData(s,d).next(()=>r.Vs.removeMatchingKeysForTargetId(s,i.targetId)).next(()=>r.Vs.addMatchingKeys(s,e,i.targetId)).next(()=>r.Ds.saveNamedQuery(s,t))})}),Pk.apply(this,arguments)}function VF(n,t){return`firestore_clients_${n}_${t}`}function UF(n,t,e){let i=`firestore_mutations_${n}_${e}`;return t.isAuthenticated()&&(i+=`_${t.uid}`),i}function Nk(n,t){return`firestore_targets_${n}_${t}`}class rS{constructor(t,e,i,r){this.user=t,this.batchId=e,this.state=i,this.error=r}static Ji(t,e,i){const r=JSON.parse(i);let s,l="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return l&&r.error&&(l="string"==typeof r.error.message&&"string"==typeof r.error.code,l&&(s=new Ne(r.error.code,r.error.message))),l?new rS(t,e,r.state,s):(Xi("SharedClientState",`Failed to parse mutation state for ID '${e}': ${i}`),null)}Yi(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class kw{constructor(t,e,i){this.targetId=t,this.state=e,this.error=i}static Ji(t,e){const i=JSON.parse(e);let r,s="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(r=new Ne(i.error.code,i.error.message))),s?new kw(t,i.state,r):(Xi("SharedClientState",`Failed to parse target state for ID '${t}': ${e}`),null)}Yi(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class sS{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static Ji(t,e){const i=JSON.parse(e);let r="object"==typeof i&&i.activeTargetIds instanceof Array,s=ov();for(let l=0;r&&l<i.activeTargetIds.length;++l)r=$0(i.activeTargetIds[l]),s=s.add(i.activeTargetIds[l]);return r?new sS(t,s):(Xi("SharedClientState",`Failed to parse client data for instance '${t}': ${e}`),null)}}class Fk{constructor(t,e){this.clientId=t,this.onlineState=e}static Ji(t){const e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new Fk(e.clientId,e.onlineState):(Xi("SharedClientState",`Failed to parse online state: ${t}`),null)}}class Lk{constructor(){this.activeTargetIds=ov()}Xi(t){this.activeTargetIds=this.activeTargetIds.add(t)}Zi(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Yi(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Bk{constructor(t,e,i,r,s){this.window=t,this.js=e,this.persistenceKey=i,this.tr=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Si(zt),this.started=!1,this.ir=[];const l=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.rr=VF(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new Lk),this.cr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.ar=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static V(t){return!(!t||!t.localStorage)}start(){var t=this;return(0,be.Z)(function*(){const e=yield t.syncEngine.Ri();for(const r of e){if(r===t.tr)continue;const s=t.getItem(VF(t.persistenceKey,r));if(s){const l=sS.Ji(r,s);l&&(t.sr=t.sr.insert(l.clientId,l))}}t._r();const i=t.storage.getItem(t.lr);if(i){const r=t.wr(i);r&&t.mr(r)}for(const r of t.ir)t.nr(r);t.ir=[],t.window.addEventListener("pagehide",()=>t.shutdown()),t.started=!0})()}writeSequenceNumber(t){this.setItem(this.ur,JSON.stringify(t))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(t){let e=!1;return this.sr.forEach((i,r)=>{r.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.yr(t,"pending")}updateMutationState(t,e,i){this.yr(t,e,i),this.pr(t)}addLocalQueryTarget(t){let e="not-current";if(this.isActiveQueryTarget(t)){const i=this.storage.getItem(Nk(this.persistenceKey,t));if(i){const r=kw.Ji(t,i);r&&(e=r.state)}}return this.Ir.Xi(t),this._r(),e}removeLocalQueryTarget(t){this.Ir.Zi(t),this._r()}isLocalQueryTarget(t){return this.Ir.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(Nk(this.persistenceKey,t))}updateQueryState(t,e,i){this.Tr(t,e,i)}handleUserChange(t,e,i){e.forEach(r=>{this.pr(r)}),this.currentUser=t,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(t){this.Er(t)}notifyBundleLoaded(t){this.Ar(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return je("SharedClientState","READ",t,e),e}setItem(t,e){je("SharedClientState","SET",t,e),this.storage.setItem(t,e)}removeItem(t){je("SharedClientState","REMOVE",t),this.storage.removeItem(t)}nr(t){var e=this;const i=t;if(i.storageArea===this.storage){if(je("SharedClientState","EVENT",i.key,i.newValue),i.key===this.rr)return void Xi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable((0,be.Z)(function*(){if(e.started){if(null!==i.key)if(e.cr.test(i.key)){if(null==i.newValue){const r=e.Rr(i.key);return e.br(r,null)}{const r=e.Pr(i.key,i.newValue);if(r)return e.br(r.clientId,r)}}else if(e.ar.test(i.key)){if(null!==i.newValue){const r=e.vr(i.key,i.newValue);if(r)return e.Vr(r)}}else if(e.hr.test(i.key)){if(null!==i.newValue){const r=e.Sr(i.key,i.newValue);if(r)return e.Dr(r)}}else if(i.key===e.lr){if(null!==i.newValue){const r=e.wr(i.newValue);if(r)return e.mr(r)}}else if(i.key===e.ur){const r=function(s){let l=_s.ot;if(null!=s)try{const d=JSON.parse(s);Pt("number"==typeof d),l=d}catch(d){Xi("SharedClientState","Failed to read sequence number from WebStorage",d)}return l}(i.newValue);r!==_s.ot&&e.sequenceNumberHandler(r)}else if(i.key===e.dr){const r=e.Cr(i.newValue);yield Promise.all(r.map(s=>e.syncEngine.Nr(s)))}}else e.ir.push(i)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(t,e,i){const r=new rS(this.currentUser,t,e,i),s=UF(this.persistenceKey,this.currentUser,t);this.setItem(s,r.Yi())}pr(t){const e=UF(this.persistenceKey,this.currentUser,t);this.removeItem(e)}Er(t){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:t}))}Tr(t,e,i){const r=Nk(this.persistenceKey,t),s=new kw(t,e,i);this.setItem(r,s.Yi())}Ar(t){const e=JSON.stringify(Array.from(t));this.setItem(this.dr,e)}Rr(t){const e=this.cr.exec(t);return e?e[1]:null}Pr(t,e){const i=this.Rr(t);return sS.Ji(i,e)}vr(t,e){const i=this.ar.exec(t),r=Number(i[1]);return rS.Ji(new ar(void 0!==i[2]?i[2]:null),r,e)}Sr(t,e){const i=this.hr.exec(t),r=Number(i[1]);return kw.Ji(r,e)}wr(t){return Fk.Ji(t)}Cr(t){return JSON.parse(t)}Vr(t){var e=this;return(0,be.Z)(function*(){if(t.user.uid===e.currentUser.uid)return e.syncEngine.kr(t.batchId,t.state,t.error);je("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})()}Dr(t){return this.syncEngine.Or(t.targetId,t.state,t.error)}br(t,e){const i=e?this.sr.insert(t,e):this.sr.remove(t),r=this.gr(this.sr),s=this.gr(i),l=[],d=[];return s.forEach(p=>{r.has(p)||l.push(p)}),r.forEach(p=>{s.has(p)||d.push(p)}),this.syncEngine.Mr(l,d).then(()=>{this.sr=i})}mr(t){this.sr.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}gr(t){let e=ov();return t.forEach((i,r)=>{e=e.unionWith(r.activeTargetIds)}),e}}class HF{constructor(){this.Fr=new Lk,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t){return this.Fr.Xi(t),this.$r[t]||"not-current"}updateQueryState(t,e,i){this.$r[t]=e}removeLocalQueryTarget(t){this.Fr.Zi(t)}isLocalQueryTarget(t){return this.Fr.activeTargetIds.has(t)}clearQueryState(t){delete this.$r[t]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(t){return this.Fr.activeTargetIds.has(t)}start(){return this.Fr=new Lk,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class Uz{Br(t){}shutdown(){}}class jF{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(t){this.Gr.push(t)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){je("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.Gr)t(0)}Kr(){je("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.Gr)t(1)}static V(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Hz={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class jz{constructor(t){this.jr=t.jr,this.Wr=t.Wr}zr(t){this.Hr=t}Jr(t){this.Yr=t}onMessage(t){this.Xr=t}close(){this.Wr()}send(t){this.jr(t)}Zr(){this.Hr()}eo(t){this.Yr(t)}no(t){this.Xr(t)}}class Gz extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.so=(t.ssl?"https":"http")+"://"+t.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(t,e,i,r,s){const l=this.oo(t,e);je("RestConnection","Sending: ",l,i);const d={};return this.uo(d,r,s),this.co(t,l,d,i).then(p=>(je("RestConnection","Received: ",p),p),p=>{throw Zp("RestConnection",`${t} failed with error: `,p,"url: ",l,"request:",i),p})}ao(t,e,i,r,s,l){return this.ro(t,e,i,r,s)}uo(t,e,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+id,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((r,s)=>t[s]=r),i&&i.headers.forEach((r,s)=>t[s]=r)}oo(t,e){return`${this.so}/v1/${e}:${Hz[t]}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams}co(t,e,i,r){return new Promise((s,l)=>{const d=new Yp;d.listenOnce(MA.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case F0.NO_ERROR:const _=d.getResponseJson();je("Connection","XHR received:",JSON.stringify(_)),s(_);break;case F0.TIMEOUT:je("Connection",'RPC "'+t+'" timed out'),l(new Ne(ye.DEADLINE_EXCEEDED,"Request time out"));break;case F0.HTTP_ERROR:const b=d.getStatus();if(je("Connection",'RPC "'+t+'" failed with status:',b,"response text:",d.getResponseText()),b>0){const D=d.getResponseJson().error;if(D&&D.status&&D.message){const I=function(P){const U=P.toLowerCase().replace(/_/g,"-");return Object.values(ye).indexOf(U)>=0?U:ye.UNKNOWN}(D.status);l(new Ne(I,D.message))}else l(new Ne(ye.UNKNOWN,"Server responded with status "+d.getStatus()))}else l(new Ne(ye.UNAVAILABLE,"Connection failed."));break;default:mt()}}finally{je("Connection",'RPC "'+t+'" completed.')}});const p=JSON.stringify(r);d.send(e,"POST",p,i,15)})}ho(t,e,i){const r=[this.so,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=xA(),l=SA(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(d.xmlHttpFactory=new IA({})),this.uo(d.initMessageHeaders,e,i),(0,F.uI)()||(0,F.b$)()||(0,F.d)()||(0,F.w1)()||(0,F.Mn)()||(0,F.ru)()||(d.httpHeadersOverwriteParam="$httpHeaders");const p=r.join("");je("Connection","Creating WebChannel: "+p,d);const _=s.createWebChannel(p,d);let b=!1,D=!1;const I=new jz({jr:U=>{D?je("Connection","Not sending because WebChannel is closed:",U):(b||(je("Connection","Opening WebChannel transport."),_.open(),b=!0),je("Connection","WebChannel sending:",U),_.send(U))},Wr:()=>_.close()}),P=(U,Q,le)=>{U.listen(Q,Ze=>{try{le(Ze)}catch(rt){setTimeout(()=>{throw rt},0)}})};return P(_,j_.EventType.OPEN,()=>{D||je("Connection","WebChannel transport opened.")}),P(_,j_.EventType.CLOSE,()=>{D||(D=!0,je("Connection","WebChannel transport closed"),I.eo())}),P(_,j_.EventType.ERROR,U=>{D||(D=!0,Zp("Connection","WebChannel transport errored:",U),I.eo(new Ne(ye.UNAVAILABLE,"The operation could not be completed")))}),P(_,j_.EventType.MESSAGE,U=>{var Q;if(!D){const le=U.data[0];Pt(!!le);const Ze=le,rt=Ze.error||(null===(Q=Ze[0])||void 0===Q?void 0:Q.error);if(rt){je("Connection","WebChannel received error:",rt);const at=rt.status;let et=function(Lt){const Cn=$i[Lt];if(void 0!==Cn)return iv(Cn)}(at),Ot=rt.message;void 0===et&&(et=ye.INTERNAL,Ot="Unknown error status: "+at+" with message "+rt.message),D=!0,I.eo(new Ne(et,Ot)),_.close()}else je("Connection","WebChannel received:",le),I.no(le)}}),P(l,TA.STAT_EVENT,U=>{U.stat===Cx.PROXY?je("Connection","Detected buffering proxy"):U.stat===Cx.NOPROXY&&je("Connection","Detected no buffering proxy")}),setTimeout(()=>{I.Zr()},0),I}}function GF(){return"undefined"!=typeof window?window:null}function oS(){return"undefined"!=typeof document?document:null}function Rw(n){return new hk(n,!0)}class Vk{constructor(t,e,i=1e3,r=1.5,s=6e4){this.js=t,this.timerId=e,this.lo=i,this.fo=r,this._o=s,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(t){this.cancel();const e=Math.floor(this.wo+this.To()),i=Math.max(0,Date.now()-this.yo),r=Math.max(0,e-i);r>0&&je("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.wo} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,r,()=>(this.yo=Date.now(),t())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class zF{constructor(t,e,i,r,s,l,d,p){this.js=t,this.Ao=i,this.Ro=r,this.bo=s,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new Vk(t,e)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var t=this;return(0,be.Z)(function*(){t.Do()&&(yield t.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Oo()))}Mo(t){this.Fo(),this.stream.send(t)}Oo(){var t=this;return(0,be.Z)(function*(){if(t.Co())return t.close(0)})()}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}close(t,e){var i=this;return(0,be.Z)(function*(){i.Fo(),i.$o(),i.So.cancel(),i.Po++,4!==t?i.So.reset():e&&e.code===ye.RESOURCE_EXHAUSTED?(Xi(e.toString()),Xi("Using maximum backoff delay to prevent overloading the backend."),i.So.po()):e&&e.code===ye.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.Bo(),i.stream.close(),i.stream=null),i.state=t,yield i.listener.Jr(e)})()}Bo(){}auth(){this.state=1;const t=this.Lo(this.Po),e=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Po===e&&this.Uo(i,r)},i=>{t(()=>{const r=new Ne(ye.UNKNOWN,"Fetching auth token failed: "+i.message);return this.qo(r)})})}Uo(t,e){const i=this.Lo(this.Po);this.stream=this.Ko(t,e),this.stream.zr(()=>{i(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(r=>{i(()=>this.qo(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}xo(){var t=this;this.state=5,this.So.Io((0,be.Z)(function*(){t.state=0,t.start()}))}qo(t){return je("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Lo(t){return e=>{this.js.enqueueAndForget(()=>this.Po===t?e():(je("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class zz extends zF{constructor(t,e,i,r,s,l){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,r,l),this.wt=s}Ko(t,e){return this.bo.ho("Listen",t,e)}onMessage(t){this.So.reset();const e=function o(n,t){let e;if("targetChange"in t){const i="NO_CHANGE"===(p=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===p?1:"REMOVE"===p?2:"CURRENT"===p?3:"RESET"===p?4:mt(),r=t.targetChange.targetIds||[],s=function(p,_){return p.dt?(Pt(void 0===_||"string"==typeof _),Pi.fromBase64String(_||"")):(Pt(void 0===_||_ instanceof Uint8Array),Pi.fromUint8Array(_||new Uint8Array))}(n,t.targetChange.resumeToken),l=t.targetChange.cause,d=l&&function(p){const _=void 0===p.code?ye.UNKNOWN:iv(p.code);return new Ne(_,p.message||"")}(l);e=new qx(i,r,s,d||null)}else if("documentChange"in t){const i=t.documentChange,r=dc(n,i.document.name),s=Cr(i.document.updateTime),l=new Xr({mapValue:{fields:i.document.fields}}),d=Yn.newFoundDocument(r,s,l);e=new fm(i.targetIds||[],i.removedTargetIds||[],d.key,d)}else if("documentDelete"in t){const i=t.documentDelete,r=dc(n,i.document),s=i.readTime?Cr(i.readTime):Nt.min(),l=Yn.newNoDocument(r,s);e=new fm([],i.removedTargetIds||[],l.key,l)}else if("documentRemove"in t){const i=t.documentRemove,r=dc(n,i.document);e=new fm([],i.removedTargetIds||[],r,null)}else{if(!("filter"in t))return mt();{const i=t.filter,s=new rk(i.count||0);e=new $x(i.targetId,s)}}var p;return e}(this.wt,t),i=function(r){if(!("targetChange"in r))return Nt.min();const s=r.targetChange;return s.targetIds&&s.targetIds.length?Nt.min():s.readTime?Cr(s.readTime):Nt.min()}(t);return this.listener.Go(e,i)}Qo(t){const e={};e.database=pm(this.wt),e.addTarget=function(r,s){let l;const d=s.target;return l=sm(d)?{documents:f(r,d)}:{query:m(r,d)},l.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?l.resumeToken=fk(r,s.resumeToken):s.snapshotVersion.compareTo(Nt.min())>0&&(l.readTime=av(r,s.snapshotVersion.toTimestamp())),l}(this.wt,t);const i=function C(n,t){const e=function(i,r){switch(r){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return mt()}}(0,t.purpose);return null==e?null:{"goog-listen-tags":e}}(0,t);i&&(e.labels=i),this.Mo(e)}jo(t){const e={};e.database=pm(this.wt),e.removeTarget=t,this.Mo(e)}}class $z extends zF{constructor(t,e,i,r,s,l){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,r,l),this.wt=s,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(t,e){return this.bo.ho("Write",t,e)}onMessage(t){if(Pt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Wo){this.So.reset();const e=function h(n,t){return n&&n.length>0?(Pt(void 0!==t),n.map(e=>function(i,r){let s=Cr(i.updateTime?i.updateTime:r);return s.isEqual(Nt.min())&&(s=Cr(r)),new XA(s,i.transformResults||[])}(e,t))):[]}(t.writeResults,t.commitTime),i=Cr(t.commitTime);return this.listener.Jo(i,e)}return Pt(!t.writeResults||0===t.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const t={};t.database=pm(this.wt),this.Mo(t)}Ho(t){const e={streamToken:this.lastStreamToken,writes:t.map(i=>a(this.wt,i))};this.Mo(e)}}class qz extends class{}{constructor(t,e,i,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.bo=i,this.wt=r,this.Zo=!1}tu(){if(this.Zo)throw new Ne(ye.FAILED_PRECONDITION,"The client has already been terminated.")}ro(t,e,i){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.bo.ro(t,e,i,r,s)).catch(r=>{throw"FirebaseError"===r.name?(r.code===ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new Ne(ye.UNKNOWN,r.toString())})}ao(t,e,i,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,l])=>this.bo.ao(t,e,i,s,l,r)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ne(ye.UNKNOWN,s.toString())})}terminate(){this.Zo=!0}}class Wz{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(t){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ru("Offline")))}set(t){this.cu(),this.eu=0,"Online"===t&&(this.su=!1),this.ru(t)}ru(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ou(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(Xi(e),this.su=!1):je("OnlineStateTracker",e)}cu(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class Yz{constructor(t,e,i,r,s){var l=this;this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=s,this.du.Br(d=>{i.enqueueAndForget((0,be.Z)(function*(){var p;nf(l)&&(je("RemoteStore","Restarting streams for network reachability change."),yield(p=(0,be.Z)(function*(_){const b=ct(_);b.lu.add(4),yield fv(b),b._u.set("Unknown"),b.lu.delete(4),yield Ow(b)}),function(_){return p.apply(this,arguments)})(l))}))}),this._u=new Wz(i,r)}}function Ow(n){return Uk.apply(this,arguments)}function Uk(){return Uk=(0,be.Z)(function*(n){if(nf(n))for(const t of n.fu)yield t(!0)}),Uk.apply(this,arguments)}function fv(n){return Hk.apply(this,arguments)}function Hk(){return Hk=(0,be.Z)(function*(n){for(const t of n.fu)yield t(!1)}),Hk.apply(this,arguments)}function aS(n,t){const e=ct(n);e.hu.has(t.targetId)||(e.hu.set(t.targetId,t),zk(e)?Gk(e):mv(e).Co()&&jk(e,t))}function Pw(n,t){const e=ct(n),i=mv(e);e.hu.delete(t),i.Co()&&$F(e,t),0===e.hu.size&&(i.Co()?i.ko():nf(e)&&e._u.set("Unknown"))}function jk(n,t){n.wu.Nt(t.targetId),mv(n).Qo(t)}function $F(n,t){n.wu.Nt(t),mv(n).jo(t)}function Gk(n){n.wu=new dw({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),te:t=>n.hu.get(t)||null}),mv(n).start(),n._u.iu()}function zk(n){return nf(n)&&!mv(n).Do()&&n.hu.size>0}function nf(n){return 0===ct(n).lu.size}function qF(n){n.wu=void 0}function Zz(n){return $k.apply(this,arguments)}function $k(){return $k=(0,be.Z)(function*(n){n.hu.forEach((t,e)=>{jk(n,t)})}),$k.apply(this,arguments)}function Kz(n,t){return qk.apply(this,arguments)}function qk(){return qk=(0,be.Z)(function*(n,t){qF(n),zk(n)?(n._u.uu(t),Gk(n)):n._u.set("Unknown")}),qk.apply(this,arguments)}function Qz(n,t,e){return Wk.apply(this,arguments)}function Wk(){return Wk=(0,be.Z)(function*(n,t,e){if(n._u.set("Online"),t instanceof qx&&2===t.state&&t.cause)try{yield(i=(0,be.Z)(function*(r,s){const l=s.cause;for(const d of s.targetIds)r.hu.has(d)&&(yield r.remoteSyncer.rejectListen(d,l),r.hu.delete(d),r.wu.removeTarget(d))}),function(r,s){return i.apply(this,arguments)})(n,t)}catch(i){je("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),i),yield lS(n,i)}else if(t instanceof fm?n.wu.Ut(t):t instanceof $x?n.wu.zt(t):n.wu.Gt(t),!e.isEqual(Nt.min()))try{const i=yield PF(n.localStore);e.compareTo(i)>=0&&(yield function(r,s){const l=r.wu.Yt(s);return l.targetChanges.forEach((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const _=r.hu.get(p);_&&r.hu.set(p,_.withResumeToken(d.resumeToken,s))}}),l.targetMismatches.forEach(d=>{const p=r.hu.get(d);if(!p)return;r.hu.set(d,p.withResumeToken(Pi.EMPTY_BYTE_STRING,p.snapshotVersion)),$F(r,d);const _=new Jh(p.target,d,1,p.sequenceNumber);jk(r,_)}),r.remoteSyncer.applyRemoteEvent(l)}(n,e))}catch(i){je("RemoteStore","Failed to raise snapshot:",i),yield lS(n,i)}var i}),Wk.apply(this,arguments)}function lS(n,t,e){return Yk.apply(this,arguments)}function Yk(){return Yk=(0,be.Z)(function*(n,t,e){if(!Yc(t))throw t;n.lu.add(1),yield fv(n),n._u.set("Offline"),e||(e=()=>PF(n.localStore)),n.asyncQueue.enqueueRetryable((0,be.Z)(function*(){je("RemoteStore","Retrying IndexedDB access"),yield e(),n.lu.delete(1),yield Ow(n)}))}),Yk.apply(this,arguments)}function WF(n,t){return t().catch(e=>lS(n,e,t))}function pv(n){return Zk.apply(this,arguments)}function Zk(){return Zk=(0,be.Z)(function*(n){const t=ct(n),e=rf(t);let i=t.au.length>0?t.au[t.au.length-1].batchId:-1;for(;Xz(t);)try{const r=yield Lz(t.localStore,i);if(null===r){0===t.au.length&&e.ko();break}i=r.batchId,Jz(t,r)}catch(r){yield lS(t,r)}YF(t)&&ZF(t)}),Zk.apply(this,arguments)}function Xz(n){return nf(n)&&n.au.length<10}function Jz(n,t){n.au.push(t);const e=rf(n);e.Co()&&e.zo&&e.Ho(t.mutations)}function YF(n){return nf(n)&&!rf(n).Do()&&n.au.length>0}function ZF(n){rf(n).start()}function e3(n){return Kk.apply(this,arguments)}function Kk(){return Kk=(0,be.Z)(function*(n){rf(n).Xo()}),Kk.apply(this,arguments)}function t3(n){return Qk.apply(this,arguments)}function Qk(){return Qk=(0,be.Z)(function*(n){const t=rf(n);for(const e of n.au)t.Ho(e.mutations)}),Qk.apply(this,arguments)}function n3(n,t,e){return Xk.apply(this,arguments)}function Xk(){return Xk=(0,be.Z)(function*(n,t,e){const i=n.au.shift(),r=wk.from(i,t,e);yield WF(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield pv(n)}),Xk.apply(this,arguments)}function r3(n,t){return Jk.apply(this,arguments)}function Jk(){return Jk=(0,be.Z)(function*(n,t){var e;t&&rf(n).zo&&(yield(e=(0,be.Z)(function*(i,r){if(cw(s=r.code)&&s!==ye.ABORTED){const l=i.au.shift();rf(i).No(),yield WF(i,()=>i.remoteSyncer.rejectFailedWrite(l.batchId,r)),yield pv(i)}var s}),function(i,r){return e.apply(this,arguments)})(n,t)),YF(n)&&ZF(n)}),Jk.apply(this,arguments)}function KF(n,t){return eR.apply(this,arguments)}function eR(){return eR=(0,be.Z)(function*(n,t){const e=ct(n);e.asyncQueue.verifyOperationInProgress(),je("RemoteStore","RemoteStore received new credentials");const i=nf(e);e.lu.add(3),yield fv(e),i&&e._u.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(t),e.lu.delete(3),yield Ow(e)}),eR.apply(this,arguments)}function tR(n,t){return nR.apply(this,arguments)}function nR(){return nR=(0,be.Z)(function*(n,t){const e=ct(n);t?(e.lu.delete(2),yield Ow(e)):t||(e.lu.add(2),yield fv(e),e._u.set("Unknown"))}),nR.apply(this,arguments)}function mv(n){return n.mu||(n.mu=function(t,e,i){const r=ct(t);return r.tu(),new zz(e,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,i)}(n.datastore,n.asyncQueue,{zr:Zz.bind(null,n),Jr:Kz.bind(null,n),Go:Qz.bind(null,n)}),n.fu.push(function(){var t=(0,be.Z)(function*(e){e?(n.mu.No(),zk(n)?Gk(n):n._u.set("Unknown")):(yield n.mu.stop(),qF(n))});return function(e){return t.apply(this,arguments)}}())),n.mu}function rf(n){return n.gu||(n.gu=function(t,e,i){const r=ct(t);return r.tu(),new $z(e,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,i)}(n.datastore,n.asyncQueue,{zr:e3.bind(null,n),Jr:r3.bind(null,n),Yo:t3.bind(null,n),Jo:n3.bind(null,n)}),n.fu.push(function(){var t=(0,be.Z)(function*(e){e?(n.gu.No(),yield pv(n)):(yield n.gu.stop(),n.au.length>0&&(je("RemoteStore",`Stopping write stream with ${n.au.length} pending writes`),n.au=[]))});return function(e){return t.apply(this,arguments)}}())),n.gu}class iR{constructor(t,e,i,r,s){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new wr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(t,e,i,r,s){const l=Date.now()+i,d=new iR(t,e,l,r,s);return d.start(i),d}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ne(ye.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gv(n,t){if(Xi("AsyncQueue",`${t}: ${n}`),Yc(n))return new Ne(ye.UNAVAILABLE,`${t}: ${n}`);throw n}class _v{constructor(t){this.comparator=t?(e,i)=>t(e,i)||nt.comparator(e.key,i.key):(e,i)=>nt.comparator(e.key,i.key),this.keyedMap=tu(),this.sortedSet=new Si(this.comparator)}static emptySet(t){return new _v(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof _v)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const i=new _v;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}class QF{constructor(){this.yu=new Si(nt.comparator)}track(t){const e=t.doc.key,i=this.yu.get(e);i?0!==t.type&&3===i.type?this.yu=this.yu.insert(e,t):3===t.type&&1!==i.type?this.yu=this.yu.insert(e,{type:i.type,doc:t.doc}):2===t.type&&2===i.type?this.yu=this.yu.insert(e,{type:2,doc:t.doc}):2===t.type&&0===i.type?this.yu=this.yu.insert(e,{type:0,doc:t.doc}):1===t.type&&0===i.type?this.yu=this.yu.remove(e):1===t.type&&2===i.type?this.yu=this.yu.insert(e,{type:1,doc:i.doc}):0===t.type&&1===i.type?this.yu=this.yu.insert(e,{type:2,doc:t.doc}):mt():this.yu=this.yu.insert(e,t)}pu(){const t=[];return this.yu.inorderTraversal((e,i)=>{t.push(i)}),t}}class vv{constructor(t,e,i,r,s,l,d,p){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=l,this.syncStateChanged=d,this.excludesMetadataChanges=p}static fromInitialDocuments(t,e,i,r){const s=[];return e.forEach(l=>{s.push({type:0,doc:l})}),new vv(t,e,_v.emptySet(e),s,i,r,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&lm(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==i[r].type||!e[r].doc.isEqual(i[r].doc))return!1;return!0}}class s3{constructor(){this.Iu=void 0,this.listeners=[]}}class o3{constructor(){this.queries=new cl(t=>Fx(t),lm),this.onlineState="Unknown",this.Tu=new Set}}function rR(n,t){return sR.apply(this,arguments)}function sR(){return sR=(0,be.Z)(function*(n,t){const e=ct(n),i=t.query;let r=!1,s=e.queries.get(i);if(s||(r=!0,s=new s3),r)try{s.Iu=yield e.onListen(i)}catch(l){const d=gv(l,`Initialization of query '${cm(t.query)}' failed`);return void t.onError(d)}e.queries.set(i,s),s.listeners.push(t),t.Eu(e.onlineState),s.Iu&&t.Au(s.Iu)&&lR(e)}),sR.apply(this,arguments)}function oR(n,t){return aR.apply(this,arguments)}function aR(){return aR=(0,be.Z)(function*(n,t){const e=ct(n),i=t.query;let r=!1;const s=e.queries.get(i);if(s){const l=s.listeners.indexOf(t);l>=0&&(s.listeners.splice(l,1),r=0===s.listeners.length)}if(r)return e.queries.delete(i),e.onUnlisten(i)}),aR.apply(this,arguments)}function a3(n,t){const e=ct(n);let i=!1;for(const r of t){const l=e.queries.get(r.query);if(l){for(const d of l.listeners)d.Au(r)&&(i=!0);l.Iu=r}}i&&lR(e)}function l3(n,t,e){const i=ct(n),r=i.queries.get(t);if(r)for(const s of r.listeners)s.onError(e);i.queries.delete(t)}function lR(n){n.Tu.forEach(t=>{t.next()})}class cR{constructor(t,e,i){this.query=t,this.Ru=e,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=i||{}}Au(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)3!==r.type&&i.push(r);t=new vv(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}let e=!1;return this.bu?this.vu(t)&&(this.Ru.next(t),e=!0):this.Vu(t,this.onlineState)&&(this.Su(t),e=!0),this.Pu=t,e}onError(t){this.Ru.error(t)}Eu(t){this.onlineState=t;let e=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,t)&&(this.Su(this.Pu),e=!0),e}Vu(t,e){return!t.fromCache||!(this.options.Du&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)}vu(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(t){t=vv.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.bu=!0,this.Ru.next(t)}}class c3{constructor(t,e){this.payload=t,this.byteLength=e}Cu(){return"metadata"in this.payload}}class XF{constructor(t){this.wt=t}Wi(t){return dc(this.wt,t)}zi(t){return t.metadata.exists?vk(this.wt,t.document,!1):Yn.newNoDocument(this.Wi(t.metadata.name),this.Hi(t.metadata.readTime))}Hi(t){return Cr(t)}}class u3{constructor(t,e,i){this.xu=t,this.localStore=e,this.wt=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=JF(t)}Nu(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.payload.namedQuery)this.queries.push(t.payload.namedQuery);else if(t.payload.documentMetadata){this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e;const i=mn.fromString(t.payload.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}ku(t){const e=new Map,i=new XF(this.wt);for(const r of t)if(r.metadata.queries){const s=i.Wi(r.metadata.name);for(const l of r.metadata.queries){const d=(e.get(l)||nn()).add(s);e.set(l,d)}}return e}complete(){var t=this;return(0,be.Z)(function*(){const e=yield function Bz(n,t,e,i){return Ok.apply(this,arguments)}(t.localStore,new XF(t.wt),t.documents,t.xu.id),i=t.ku(t.documents);for(const r of t.queries)yield Vz(t.localStore,r,i.get(r.name));return t.progress.taskState="Success",{progress:t.progress,Ou:t.collectionGroups,Mu:e}})()}}function JF(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class eL{constructor(t){this.key=t}}class tL{constructor(t){this.key=t}}class nL{constructor(t,e){this.query=t,this.Fu=e,this.$u=null,this.current=!1,this.Bu=nn(),this.mutatedKeys=nn(),this.Lu=ZA(t),this.Uu=new _v(this.Lu)}get qu(){return this.Fu}Ku(t,e){const i=e?e.Gu:new QF,r=e?e.Uu:this.Uu;let s=e?e.mutatedKeys:this.mutatedKeys,l=r,d=!1;const p="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,_="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((b,D)=>{const I=r.get(b),P=ho(this.query,D)?D:null,U=!!I&&this.mutatedKeys.has(I.key),Q=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let le=!1;I&&P?I.data.isEqual(P.data)?U!==Q&&(i.track({type:3,doc:P}),le=!0):this.Qu(I,P)||(i.track({type:2,doc:P}),le=!0,(p&&this.Lu(P,p)>0||_&&this.Lu(P,_)<0)&&(d=!0)):!I&&P?(i.track({type:0,doc:P}),le=!0):I&&!P&&(i.track({type:1,doc:I}),le=!0,(p||_)&&(d=!0)),le&&(P?(l=l.add(P),s=Q?s.add(b):s.delete(b)):(l=l.delete(b),s=s.delete(b)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const b="F"===this.query.limitType?l.last():l.first();l=l.delete(b.key),s=s.delete(b.key),i.track({type:1,doc:b})}return{Uu:l,Gu:i,Oi:d,mutatedKeys:s}}Qu(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i){const r=this.Uu;this.Uu=t.Uu,this.mutatedKeys=t.mutatedKeys;const s=t.Gu.pu();s.sort((_,b)=>function(D,I){const P=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return mt()}};return P(D)-P(I)}(_.type,b.type)||this.Lu(_.doc,b.doc)),this.ju(i);const l=e?this.Wu():[],d=0===this.Bu.size&&this.current?1:0,p=d!==this.$u;return this.$u=d,0!==s.length||p?{snapshot:new vv(this.query,t.Uu,r,s,t.mutatedKeys,0===d,p,!1),zu:l}:{zu:l}}Eu(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new QF,mutatedKeys:this.mutatedKeys,Oi:!1},!1)):{zu:[]}}Hu(t){return!this.Fu.has(t)&&!!this.Uu.has(t)&&!this.Uu.get(t).hasLocalMutations}ju(t){t&&(t.addedDocuments.forEach(e=>this.Fu=this.Fu.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Fu=this.Fu.delete(e)),this.current=t.current)}Wu(){if(!this.current)return[];const t=this.Bu;this.Bu=nn(),this.Uu.forEach(i=>{this.Hu(i.key)&&(this.Bu=this.Bu.add(i.key))});const e=[];return t.forEach(i=>{this.Bu.has(i)||e.push(new tL(i))}),this.Bu.forEach(i=>{t.has(i)||e.push(new eL(i))}),e}Ju(t){this.Fu=t.ji,this.Bu=nn();const e=this.Ku(t.documents);return this.applyChanges(e,!0)}Yu(){return vv.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class d3{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class h3{constructor(t){this.key=t,this.Xu=!1}}class f3{constructor(t,e,i,r,s,l){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=l,this.Zu={},this.tc=new cl(d=>Fx(d),lm),this.ec=new Map,this.nc=new Set,this.sc=new Si(nt.comparator),this.ic=new Map,this.rc=new Sk,this.oc={},this.uc=new Map,this.cc=wm.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return!0===this.ac}}function p3(n,t){return uR.apply(this,arguments)}function uR(){return uR=(0,be.Z)(function*(n,t){const e=OR(n);let i,r;const s=e.tc.get(t);if(s)i=s.targetId,e.sharedClientState.addLocalQueryTarget(i),r=s.view.Yu();else{const l=yield dv(e.localStore,uo(t));e.isPrimaryClient&&aS(e.remoteStore,l);const d=e.sharedClientState.addLocalQueryTarget(l.targetId);i=l.targetId,r=yield dR(e,t,i,"current"===d)}return r}),uR.apply(this,arguments)}function dR(n,t,e,i){return hR.apply(this,arguments)}function hR(){return hR=(0,be.Z)(function*(n,t,e,i){n.hc=(b,D,I)=>{return(P=(0,be.Z)(function*(U,Q,le,Ze){let rt=Q.view.Ku(le);rt.Oi&&(rt=yield iS(U.localStore,Q.query,!1).then(({documents:Ot})=>Q.view.Ku(Ot,rt)));const at=Ze&&Ze.targetChanges.get(Q.targetId),et=Q.view.applyChanges(rt,U.isPrimaryClient,at);return CR(U,Q.targetId,et.zu),et.snapshot}),function(U,Q,le,Ze){return P.apply(this,arguments)})(n,b,D,I);var P};const r=yield iS(n.localStore,t,!0),s=new nL(t,r.ji),l=s.Ku(r.documents),d=Xh.createSynthesizedTargetChangeForCurrentChange(e,i&&"Offline"!==n.onlineState),p=s.applyChanges(l,n.isPrimaryClient,d);CR(n,e,p.zu);const _=new d3(t,e,s);return n.tc.set(t,_),n.ec.has(e)?n.ec.get(e).push(t):n.ec.set(e,[t]),p.snapshot}),hR.apply(this,arguments)}function m3(n,t){return fR.apply(this,arguments)}function fR(){return fR=(0,be.Z)(function*(n,t){const e=ct(n),i=e.tc.get(t),r=e.ec.get(i.targetId);if(r.length>1)return e.ec.set(i.targetId,r.filter(s=>!lm(s,t))),void e.tc.delete(t);e.isPrimaryClient?(e.sharedClientState.removeLocalQueryTarget(i.targetId),e.sharedClientState.isActiveQueryTarget(i.targetId)||(yield hv(e.localStore,i.targetId,!1).then(()=>{e.sharedClientState.clearQueryState(i.targetId),Pw(e.remoteStore,i.targetId),yv(e,i.targetId)}).catch(sc))):(yv(e,i.targetId),yield hv(e.localStore,i.targetId,!0))}),fR.apply(this,arguments)}function pR(){return pR=(0,be.Z)(function*(n,t,e){const i=PR(n);try{const r=yield function(s,l){const d=ct(s),p=mi.now(),_=l.reduce((I,P)=>I.add(P.key),nn());let b,D;return d.persistence.runTransaction("Locally write mutations","readwrite",I=>{let P=Jr(),U=nn();return d.Ui.getEntries(I,_).next(Q=>{P=Q,P.forEach((le,Ze)=>{Ze.isValidDocument()||(U=U.add(le))})}).next(()=>d.localDocuments.getOverlayedDocuments(I,P)).next(Q=>{b=Q;const le=[];for(const Ze of l){const rt=ek(Ze,b.get(Ze.key).overlayedDocument);null!=rt&&le.push(new eu(Ze.key,rt,Z0(rt.value.mapValue),Mi.exists(!0)))}return d.mutationQueue.addMutationBatch(I,p,le,l)}).next(Q=>{D=Q;const le=Q.applyToLocalDocumentSet(b,U);return d.documentOverlayCache.saveOverlays(I,Q.batchId,le)})}).then(()=>({batchId:D.batchId,changes:ok(b)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(s,l,d){let p=s.oc[s.currentUser.toKey()];p||(p=new Si(zt)),p=p.insert(l,d),s.oc[s.currentUser.toKey()]=p}(i,r.batchId,e),yield pd(i,r.changes),yield pv(i.remoteStore)}catch(r){const s=gv(r,"Failed to persist write");e.reject(s)}}),pR.apply(this,arguments)}function iL(n,t){return mR.apply(this,arguments)}function mR(){return mR=(0,be.Z)(function*(n,t){const e=ct(n);try{const i=yield Fz(e.localStore,t);t.targetChanges.forEach((r,s)=>{const l=e.ic.get(s);l&&(Pt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?l.Xu=!0:r.modifiedDocuments.size>0?Pt(l.Xu):r.removedDocuments.size>0&&(Pt(l.Xu),l.Xu=!1))}),yield pd(e,i,t)}catch(i){yield sc(i)}}),mR.apply(this,arguments)}function rL(n,t,e){const i=ct(n);if(i.isPrimaryClient&&0===e||!i.isPrimaryClient&&1===e){const r=[];i.tc.forEach((s,l)=>{const d=l.view.Eu(t);d.snapshot&&r.push(d.snapshot)}),function(s,l){const d=ct(s);d.onlineState=l;let p=!1;d.queries.forEach((_,b)=>{for(const D of b.listeners)D.Eu(l)&&(p=!0)}),p&&lR(d)}(i.eventManager,t),r.length&&i.Zu.Go(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}function _3(n,t,e){return gR.apply(this,arguments)}function gR(){return gR=(0,be.Z)(function*(n,t,e){const i=ct(n);i.sharedClientState.updateQueryState(t,"rejected",e);const r=i.ic.get(t),s=r&&r.key;if(s){let l=new Si(nt.comparator);l=l.insert(s,Yn.newNoDocument(s,Nt.min()));const d=nn().add(s),p=new Qh(Nt.min(),new Map,new Un(zt),l,d);yield iL(i,p),i.sc=i.sc.remove(s),i.ic.delete(t),ER(i)}else yield hv(i.localStore,t,!1).then(()=>yv(i,t,e)).catch(sc)}),gR.apply(this,arguments)}function v3(n,t){return _R.apply(this,arguments)}function _R(){return _R=(0,be.Z)(function*(n,t){const e=ct(n),i=t.batch.batchId;try{const r=yield Nz(e.localStore,t);wR(e,i,null),bR(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),yield pd(e,r)}catch(r){yield sc(r)}}),_R.apply(this,arguments)}function y3(n,t,e){return vR.apply(this,arguments)}function vR(){return vR=(0,be.Z)(function*(n,t,e){const i=ct(n);try{const r=yield function(s,l){const d=ct(s);return d.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let _;return d.mutationQueue.lookupMutationBatch(p,l).next(b=>(Pt(null!==b),_=b.keys(),d.mutationQueue.removeMutationBatch(p,b))).next(()=>d.mutationQueue.performConsistencyCheck(p)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(p,_,l)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,_)).next(()=>d.localDocuments.getDocuments(p,_))})}(i.localStore,t);wR(i,t,e),bR(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),yield pd(i,r)}catch(r){yield sc(r)}}),vR.apply(this,arguments)}function yR(){return yR=(0,be.Z)(function*(n,t){const e=ct(n);nf(e.remoteStore)||je("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(s){const l=ct(s);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",d=>l.mutationQueue.getHighestUnacknowledgedBatchId(d))}(e.localStore);if(-1===i)return void t.resolve();const r=e.uc.get(i)||[];r.push(t),e.uc.set(i,r)}catch(i){const r=gv(i,"Initialization of waitForPendingWrites() operation failed");t.reject(r)}}),yR.apply(this,arguments)}function bR(n,t){(n.uc.get(t)||[]).forEach(e=>{e.resolve()}),n.uc.delete(t)}function wR(n,t,e){const i=ct(n);let r=i.oc[i.currentUser.toKey()];if(r){const s=r.get(t);s&&(e?s.reject(e):s.resolve(),r=r.remove(t)),i.oc[i.currentUser.toKey()]=r}}function yv(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const i of n.ec.get(t))n.tc.delete(i),e&&n.Zu.lc(i,e);n.ec.delete(t),n.isPrimaryClient&&n.rc.us(t).forEach(i=>{n.rc.containsKey(i)||sL(n,i)})}function sL(n,t){n.nc.delete(t.path.canonicalString());const e=n.sc.get(t);null!==e&&(Pw(n.remoteStore,e),n.sc=n.sc.remove(t),n.ic.delete(e),ER(n))}function CR(n,t,e){for(const i of e)i instanceof eL?(n.rc.addReference(i.key,t),w3(n,i)):i instanceof tL?(je("SyncEngine","Document no longer in limbo: "+i.key),n.rc.removeReference(i.key,t),n.rc.containsKey(i.key)||sL(n,i.key)):mt()}function w3(n,t){const e=t.key,i=e.path.canonicalString();n.sc.get(e)||n.nc.has(i)||(je("SyncEngine","New document in limbo: "+e),n.nc.add(i),ER(n))}function ER(n){for(;n.nc.size>0&&n.sc.size<n.maxConcurrentLimboResolutions;){const t=n.nc.values().next().value;n.nc.delete(t);const e=new nt(mn.fromString(t)),i=n.cc.next();n.ic.set(i,new h3(e)),n.sc=n.sc.insert(e,i),aS(n.remoteStore,new Jh(uo(Yh(e.path)),i,2,_s.ot))}}function pd(n,t,e){return DR.apply(this,arguments)}function DR(){return DR=(0,be.Z)(function*(n,t,e){const i=ct(n),r=[],s=[],l=[];var d;i.tc.isEmpty()||(i.tc.forEach((d,p)=>{l.push(i.hc(p,t,e).then(_=>{if(_){i.isPrimaryClient&&i.sharedClientState.updateQueryState(p.targetId,_.fromCache?"not-current":"current"),r.push(_);const b=Ak.Vi(p.targetId,_);s.push(b)}}))}),yield Promise.all(l),i.Zu.Go(r),yield(d=(0,be.Z)(function*(p,_){const b=ct(p);try{yield b.persistence.runTransaction("notifyLocalViewChanges","readwrite",D=>ge.forEach(_,I=>ge.forEach(I.Pi,P=>b.persistence.referenceDelegate.addReference(D,I.targetId,P)).next(()=>ge.forEach(I.vi,P=>b.persistence.referenceDelegate.removeReference(D,I.targetId,P)))))}catch(D){if(!Yc(D))throw D;je("LocalStore","Failed to update sequence numbers: "+D)}for(const D of _){const I=D.targetId;if(!D.fromCache){const P=b.$i.get(I),Q=P.withLastLimboFreeSnapshotVersion(P.snapshotVersion);b.$i=b.$i.insert(I,Q)}}}),function(p,_){return d.apply(this,arguments)})(i.localStore,s))}),DR.apply(this,arguments)}function C3(n,t){return xR.apply(this,arguments)}function xR(){return xR=(0,be.Z)(function*(n,t){const e=ct(n);if(!e.currentUser.isEqual(t)){je("SyncEngine","User change. New user:",t.toKey());const i=yield OF(e.localStore,t);e.currentUser=t,(r=e).uc.forEach(l=>{l.forEach(d=>{d.reject(new Ne(ye.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),r.uc.clear(),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),yield pd(e,i.Ki)}var r}),xR.apply(this,arguments)}function E3(n,t){const e=ct(n),i=e.ic.get(t);if(i&&i.Xu)return nn().add(i.key);{let r=nn();const s=e.ec.get(t);if(!s)return r;for(const l of s){const d=e.tc.get(l);r=r.unionWith(d.view.qu)}return r}}function D3(n,t){return SR.apply(this,arguments)}function SR(){return SR=(0,be.Z)(function*(n,t){const e=ct(n),i=yield iS(e.localStore,t.query,!0),r=t.view.Ju(i);return e.isPrimaryClient&&CR(e,t.targetId,r.zu),r}),SR.apply(this,arguments)}function x3(n,t){return MR.apply(this,arguments)}function MR(){return MR=(0,be.Z)(function*(n,t){const e=ct(n);return LF(e.localStore,t).then(i=>pd(e,i))}),MR.apply(this,arguments)}function S3(n,t,e,i){return TR.apply(this,arguments)}function TR(){return TR=(0,be.Z)(function*(n,t,e,i){const r=ct(n),s=yield function(l,d){const p=ct(l),_=ct(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",b=>_.yn(b,d).next(D=>D?p.localDocuments.getDocuments(b,D):ge.resolve(null)))}(r.localStore,t);var d;null!==s?("pending"===e?yield pv(r.remoteStore):"acknowledged"===e||"rejected"===e?(wR(r,t,i||null),bR(r,t),d=t,ct(ct(r.localStore).mutationQueue).In(d)):mt(),yield pd(r,s)):je("SyncEngine","Cannot apply mutation batch with id: "+t)}),TR.apply(this,arguments)}function IR(){return IR=(0,be.Z)(function*(n,t){const e=ct(n);if(OR(e),PR(e),!0===t&&!0!==e.ac){const i=e.sharedClientState.getAllActiveQueryTargets(),r=yield oL(e,i.toArray());e.ac=!0,yield tR(e.remoteStore,!0);for(const s of r)aS(e.remoteStore,s)}else if(!1===t&&!1!==e.ac){const i=[];let r=Promise.resolve();e.ec.forEach((s,l)=>{e.sharedClientState.isLocalQueryTarget(l)?i.push(l):r=r.then(()=>(yv(e,l),hv(e.localStore,l,!0))),Pw(e.remoteStore,l)}),yield r,yield oL(e,i),function(s){const l=ct(s);l.ic.forEach((d,p)=>{Pw(l.remoteStore,p)}),l.rc.cs(),l.ic=new Map,l.sc=new Si(nt.comparator)}(e),e.ac=!1,yield tR(e.remoteStore,!1)}}),IR.apply(this,arguments)}function oL(n,t,e){return AR.apply(this,arguments)}function AR(){return AR=(0,be.Z)(function*(n,t,e){const i=ct(n),r=[],s=[];for(const l of t){let d;const p=i.ec.get(l);if(p&&0!==p.length){d=yield dv(i.localStore,uo(p[0]));for(const _ of p){const b=i.tc.get(_),D=yield D3(i,b);D.snapshot&&s.push(D.snapshot)}}else{const _=yield FF(i.localStore,l);d=yield dv(i.localStore,_),yield dR(i,aL(_),l,!1)}r.push(d)}return i.Zu.Go(s),r}),AR.apply(this,arguments)}function aL(n){return J_(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function T3(n){const t=ct(n);return ct(ct(t.localStore).persistence).Ri()}function I3(n,t,e,i){return kR.apply(this,arguments)}function kR(){return kR=(0,be.Z)(function*(n,t,e,i){const r=ct(n);if(r.ac)return void je("SyncEngine","Ignoring unexpected query state notification.");const s=r.ec.get(t);if(s&&s.length>0)switch(e){case"current":case"not-current":{const l=yield LF(r.localStore,Lx(s[0])),d=Qh.createSynthesizedRemoteEventForCurrentChange(t,"current"===e);yield pd(r,l,d);break}case"rejected":yield hv(r.localStore,t,!0),yv(r,t,i);break;default:mt()}}),kR.apply(this,arguments)}function A3(n,t,e){return RR.apply(this,arguments)}function RR(){return RR=(0,be.Z)(function*(n,t,e){const i=OR(n);if(i.ac){for(const r of t){if(i.ec.has(r)){je("SyncEngine","Adding an already active target "+r);continue}const s=yield FF(i.localStore,r),l=yield dv(i.localStore,s);yield dR(i,aL(s),l.targetId,!1),aS(i.remoteStore,l)}for(const r of e)i.ec.has(r)&&(yield hv(i.localStore,r,!1).then(()=>{Pw(i.remoteStore,r),yv(i,r)}).catch(sc))}}),RR.apply(this,arguments)}function OR(n){const t=ct(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=iL.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=E3.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=_3.bind(null,t),t.Zu.Go=a3.bind(null,t.eventManager),t.Zu.lc=l3.bind(null,t.eventManager),t}function PR(n){const t=ct(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=v3.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=y3.bind(null,t),t}class lL{constructor(){this.synchronizeTabs=!1}initialize(t){var e=this;return(0,be.Z)(function*(){e.wt=Rw(t.databaseInfo.databaseId),e.sharedClientState=e.dc(t),e.persistence=e._c(t),yield e.persistence.start(),e.localStore=e.wc(t),e.gcScheduler=e.mc(t,e.localStore),e.indexBackfillerScheduler=e.gc(t,e.localStore)})()}mc(t,e){return null}gc(t,e){return null}wc(t){return RF(this.persistence,new kF,t.initialUser,this.wt)}_c(t){return new IF(tS.Ms,this.wt)}dc(t){return new HF}terminate(){var t=this;return(0,be.Z)(function*(){t.gcScheduler&&t.gcScheduler.stop(),yield t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}class cL extends lL{constructor(t,e,i){super(),this.yc=t,this.cacheSizeBytes=e,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(t){var e=()=>super.initialize,i=this;return(0,be.Z)(function*(){yield e().call(i,t),yield i.yc.initialize(i,t),yield PR(i.yc.syncEngine),yield pv(i.yc.remoteStore),yield i.persistence.ci(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(),i.indexBackfillerScheduler&&!i.indexBackfillerScheduler.started&&i.indexBackfillerScheduler.start(),Promise.resolve()))})()}wc(t){return RF(this.persistence,new kF,t.initialUser,this.wt)}mc(t,e){return new bz(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue,e)}gc(t,e){const i=new FA(e,this.persistence);return new z0(t.asyncQueue,i)}_c(t){const e=Ik(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?Bo.withCacheSize(this.cacheSizeBytes):Bo.DEFAULT;return new Tk(this.synchronizeTabs,e,t.clientId,i,t.asyncQueue,GF(),oS(),this.wt,this.sharedClientState,!!this.forceOwnership)}dc(t){return new HF}}class R3 extends cL{constructor(t,e){super(t,e,!1),this.yc=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}initialize(t){var e=()=>super.initialize,i=this;return(0,be.Z)(function*(){yield e().call(i,t);const r=i.yc.syncEngine;i.sharedClientState instanceof Bk&&(i.sharedClientState.syncEngine={kr:S3.bind(null,r),Or:I3.bind(null,r),Mr:A3.bind(null,r),Ri:T3.bind(null,r),Nr:x3.bind(null,r)},yield i.sharedClientState.start()),yield i.persistence.ci(function(){var s=(0,be.Z)(function*(l){yield function M3(n,t){return IR.apply(this,arguments)}(i.yc.syncEngine,l),i.gcScheduler&&(l&&!i.gcScheduler.started?i.gcScheduler.start():l||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(l&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():l||i.indexBackfillerScheduler.stop())});return function(l){return s.apply(this,arguments)}}())})()}dc(t){const e=GF();if(!Bk.V(e))throw new Ne(ye.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=Ik(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Bk(e,t.asyncQueue,i,t.clientId,t.initialUser)}}class NR{initialize(t,e){var i=this;return(0,be.Z)(function*(){i.localStore||(i.localStore=t.localStore,i.sharedClientState=t.sharedClientState,i.datastore=i.createDatastore(e),i.remoteStore=i.createRemoteStore(e),i.eventManager=i.createEventManager(e),i.syncEngine=i.createSyncEngine(e,!t.synchronizeTabs),i.sharedClientState.onlineStateHandler=r=>rL(i.syncEngine,r,1),i.remoteStore.remoteSyncer.handleCredentialChange=C3.bind(null,i.syncEngine),yield tR(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(t){return new o3}createDatastore(t){const e=Rw(t.databaseInfo.databaseId),i=new Gz(t.databaseInfo);return new qz(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return e=this.localStore,i=this.datastore,r=t.asyncQueue,s=d=>rL(this.syncEngine,d,0),l=jF.V()?new jF:new Uz,new Yz(e,i,r,s,l);var e,i,r,s,l}createSyncEngine(t,e){return function(i,r,s,l,d,p,_){const b=new f3(i,r,s,l,d,p);return _&&(b.ac=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return(t=(0,be.Z)(function*(e){const i=ct(e);je("RemoteStore","RemoteStore shutting down."),i.lu.add(5),yield fv(i),i.du.shutdown(),i._u.set("Unknown")}),function(e){return t.apply(this,arguments)})(this.remoteStore);var t}}function uL(n,t=10240){let e=0;return{read:()=>(0,be.Z)(function*(){if(e<n.byteLength){const i={value:n.slice(e,e+t),done:!1};return e+=t,i}return{done:!0}})(),cancel:()=>(0,be.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class cS{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ic(this.observer.next,t)}error(t){this.observer.error?this.Ic(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)}Tc(){this.muted=!0}Ic(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}}class O3{constructor(t,e){this.Ec=t,this.wt=e,this.metadata=new wr,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then(i=>{i&&i.Cu()?this.metadata.resolve(i.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==i?void 0:i.payload)}`))},i=>this.metadata.reject(i))}close(){return this.Ec.cancel()}getMetadata(){var t=this;return(0,be.Z)(function*(){return t.metadata.promise})()}fc(){var t=this;return(0,be.Z)(function*(){return yield t.getMetadata(),t.Rc()})()}Rc(){var t=this;return(0,be.Z)(function*(){const e=yield t.bc();if(null===e)return null;const i=t.Ac.decode(e),r=Number(i);isNaN(r)&&t.Pc(`length string (${i}) is not valid number`);const s=yield t.vc(r);return new c3(JSON.parse(s),e.length+r)})()}Vc(){return this.buffer.findIndex(t=>t==="{".charCodeAt(0))}bc(){var t=this;return(0,be.Z)(function*(){for(;t.Vc()<0&&!(yield t.Sc()););if(0===t.buffer.length)return null;const e=t.Vc();e<0&&t.Pc("Reached the end of bundle when a length string is expected.");const i=t.buffer.slice(0,e);return t.buffer=t.buffer.slice(e),i})()}vc(t){var e=this;return(0,be.Z)(function*(){for(;e.buffer.length<t;)(yield e.Sc())&&e.Pc("Reached the end of bundle when more is expected.");const i=e.Ac.decode(e.buffer.slice(0,t));return e.buffer=e.buffer.slice(t),i})()}Pc(t){throw this.Ec.cancel(),new Error(`Invalid bundle format: ${t}`)}Sc(){var t=this;return(0,be.Z)(function*(){const e=yield t.Ec.read();if(!e.done){const i=new Uint8Array(t.buffer.length+e.value.length);i.set(t.buffer),i.set(e.value,t.buffer.length),t.buffer=i}return e.done})()}}class P3{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(t){var e=this;return(0,be.Z)(function*(){if(e.ensureCommitNotCalled(),e.mutations.length>0)throw new Ne(ye.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(r=(0,be.Z)(function*(s,l){const d=ct(s),p=pm(d.wt)+"/documents",_={documents:l.map(P=>lv(d.wt,P))},b=yield d.ao("BatchGetDocuments",p,_,l.length),D=new Map;b.forEach(P=>{const U=function nF(n,t){return"found"in t?function(e,i){Pt(!!i.found);const r=dc(e,i.found.name),s=Cr(i.found.updateTime),l=new Xr({mapValue:{fields:i.found.fields}});return Yn.newFoundDocument(r,s,l)}(n,t):"missing"in t?function(e,i){Pt(!!i.missing),Pt(!!i.readTime);const r=dc(e,i.missing),s=Cr(i.readTime);return Yn.newNoDocument(r,s)}(n,t):mt()}(d.wt,P);D.set(U.key.toString(),U)});const I=[];return l.forEach(P=>{const U=D.get(P.toString());Pt(!!U),I.push(U)}),I}),function(s,l){return r.apply(this,arguments)})(e.datastore,t);var r;return i.forEach(r=>e.recordVersion(r)),i})()}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new cc(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){var t=this;return(0,be.Z)(function*(){if(t.ensureCommitNotCalled(),t.lastWriteError)throw t.lastWriteError;const e=t.readVersions;var i;t.mutations.forEach(i=>{e.delete(i.key.toString())}),e.forEach((i,r)=>{const s=nt.fromPath(r);t.mutations.push(new lw(s,t.precondition(s)))}),yield(i=(0,be.Z)(function*(r,s){const l=ct(r),d=pm(l.wt)+"/documents",p={writes:s.map(_=>a(l.wt,_))};yield l.ro("Commit",d,p)}),function(r,s){return i.apply(this,arguments)})(t.datastore,t.mutations),t.committed=!0})()}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw mt();e=Nt.min()}const i=this.readVersions.get(t.key.toString());if(i){if(!e.isEqual(i))throw new Ne(ye.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Mi.updateTime(e):Mi.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Nt.min()))throw new Ne(ye.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Mi.updateTime(e)}return Mi.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}class N3{constructor(t,e,i,r,s){this.asyncQueue=t,this.datastore=e,this.options=i,this.updateFunction=r,this.deferred=s,this.Dc=i.maxAttempts,this.So=new Vk(this.asyncQueue,"transaction_retry")}run(){this.Dc-=1,this.Cc()}Cc(){var t=this;this.So.Io((0,be.Z)(function*(){const e=new P3(t.datastore),i=t.xc(e);i&&i.then(r=>{t.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{t.deferred.resolve(r)}).catch(s=>{t.Nc(s)}))}).catch(r=>{t.Nc(r)})}))}xc(t){try{const e=this.updateFunction(t);return!im(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Nc(t){this.Dc>0&&this.kc(t)?(this.Dc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Cc(),Promise.resolve()))):this.deferred.reject(t)}kc(t){if("FirebaseError"===t.name){const e=t.code;return"aborted"===e||"failed-precondition"===e||!cw(e)}return!1}}class F3{constructor(t,e,i,r){var s=this;this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=r,this.user=ar.UNAUTHENTICATED,this.clientId=V0.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var l=(0,be.Z)(function*(d){je("FirestoreClient","Received user=",d.uid),yield s.authCredentialListener(d),s.user=d});return function(d){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(i,l=>(je("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var t=this;return(0,be.Z)(function*(){return{asyncQueue:t.asyncQueue,databaseInfo:t.databaseInfo,clientId:t.clientId,authCredentials:t.authCredentials,appCheckCredentials:t.appCheckCredentials,initialUser:t.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ne(ye.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var t=this;this.asyncQueue.enterRestrictedMode();const e=new wr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,be.Z)(function*(){try{t.onlineComponents&&(yield t.onlineComponents.terminate()),t.offlineComponents&&(yield t.offlineComponents.terminate()),t.authCredentials.shutdown(),t.appCheckCredentials.shutdown(),e.resolve()}catch(i){const r=gv(i,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}function dL(n,t){return FR.apply(this,arguments)}function FR(){return FR=(0,be.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress(),je("FirestoreClient","Initializing OfflineComponentProvider");const e=yield n.getConfiguration();yield t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(function(){var r=(0,be.Z)(function*(s){i.isEqual(s)||(yield OF(t.localStore,s),i=s)});return function(s){return r.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=t}),FR.apply(this,arguments)}function hL(n,t){return LR.apply(this,arguments)}function LR(){return LR=(0,be.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress();const e=yield BR(n);je("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield t.initialize(e,i),n.setCredentialChangeListener(r=>KF(t.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>KF(t.remoteStore,s)),n.onlineComponents=t}),LR.apply(this,arguments)}function BR(n){return VR.apply(this,arguments)}function VR(){return VR=(0,be.Z)(function*(n){return n.offlineComponents||(je("FirestoreClient","Using default OfflineComponentProvider"),yield dL(n,new lL)),n.offlineComponents}),VR.apply(this,arguments)}function uS(n){return UR.apply(this,arguments)}function UR(){return UR=(0,be.Z)(function*(n){return n.onlineComponents||(je("FirestoreClient","Using default OnlineComponentProvider"),yield hL(n,new NR)),n.onlineComponents}),UR.apply(this,arguments)}function fL(n){return BR(n).then(t=>t.persistence)}function HR(n){return BR(n).then(t=>t.localStore)}function pL(n){return uS(n).then(t=>t.remoteStore)}function jR(n){return uS(n).then(t=>t.syncEngine)}function bv(n){return GR.apply(this,arguments)}function GR(){return GR=(0,be.Z)(function*(n){const t=yield uS(n),e=t.eventManager;return e.onListen=p3.bind(null,t.syncEngine),e.onUnlisten=m3.bind(null,t.syncEngine),e}),GR.apply(this,arguments)}function mL(n,t,e={}){const i=new wr;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function(r,s,l,d,p){const _=new cS({next:D=>{s.enqueueAndForget(()=>oR(r,b));const I=D.docs.has(l);!I&&D.fromCache?p.reject(new Ne(ye.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&D.fromCache&&d&&"server"===d.source?p.reject(new Ne(ye.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(D)},error:D=>p.reject(D)}),b=new cR(Yh(l.path),_,{includeMetadataChanges:!0,Du:!0});return rR(r,b)}(yield bv(n),n.asyncQueue,t,e,i)})),i.promise}function gL(n,t,e={}){const i=new wr;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function(r,s,l,d,p){const _=new cS({next:D=>{s.enqueueAndForget(()=>oR(r,b)),D.fromCache&&"server"===d.source?p.reject(new Ne(ye.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(D)},error:D=>p.reject(D)}),b=new cR(l,_,{includeMetadataChanges:!0,Du:!0});return rR(r,b)}(yield bv(n),n.asyncQueue,t,e,i)})),i.promise}const _L=new Map;function zR(n,t,e){if(!e)throw new Ne(ye.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function vL(n,t,e,i){if(!0===t&&!0===i)throw new Ne(ye.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function yL(n){if(!nt.isDocumentKey(n))throw new Ne(ye.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function bL(n){if(nt.isDocumentKey(n))throw new Ne(ye.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function dS(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const t=(e=n).constructor?e.constructor.name:null;return t?`a custom ${t} object`:"an object"}}var e;return"function"==typeof n?"a function":mt()}function Mn(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new Ne(ye.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=dS(n);throw new Ne(ye.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}function wL(n,t){if(t<=0)throw new Ne(ye.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${t}.`)}class CL{constructor(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Ne(ye.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Ne(ye.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,vL("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Nw{constructor(t,e,i){this._authCredentials=e,this._appCheckCredentials=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new CL({}),this._settingsFrozen=!1,t instanceof al?this._databaseId=t:(this._app=t,this._databaseId=function(r){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new Ne(ye.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new al(r.options.projectId)}(t))}get app(){if(!this._app)throw new Ne(ye.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Ne(ye.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new CL(t),void 0!==t.credentials&&(this._authCredentials=function(e){if(!e)return new Xp;switch(e.type){case"gapi":const i=e.client;return Pt(!("object"!=typeof i||null===i||!i.auth||!i.auth.getAuthHeaderValueForFirstParty)),new z_(i,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Ne(ye.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=_L.get(t);e&&(je("ComponentProvider","Removing Datastore"),_L.delete(t),e.terminate())}(this),Promise.resolve()}}class Ti{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new iu(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ti(this.firestore,t,this._key)}}class Hs{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new Hs(this.firestore,t,this._query)}}class iu extends Hs{constructor(t,e,i){super(t,e,Yh(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ti(this.firestore,null,new nt(t))}withConverter(t){return new iu(this.firestore,t,this._path)}}function EL(n,t,...e){if(n=(0,F.m9)(n),zR("collection","path",t),n instanceof Nw){const i=mn.fromString(t,...e);return bL(i),new iu(n,null,i)}{if(!(n instanceof Ti||n instanceof iu))throw new Ne(ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(mn.fromString(t,...e));return bL(i),new iu(n.firestore,null,i)}}function hS(n,t,...e){if(n=(0,F.m9)(n),1===arguments.length&&(t=V0.I()),zR("doc","path",t),n instanceof Nw){const i=mn.fromString(t,...e);return yL(i),new Ti(n,null,new nt(i))}{if(!(n instanceof Ti||n instanceof iu))throw new Ne(ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(mn.fromString(t,...e));return yL(i),new Ti(n.firestore,n instanceof iu?n.converter:null,new nt(i))}}function DL(n,t){return n=(0,F.m9)(n),t=(0,F.m9)(t),(n instanceof Ti||n instanceof iu)&&(t instanceof Ti||t instanceof iu)&&n.firestore===t.firestore&&n.path===t.path&&n.converter===t.converter}function xL(n,t){return n=(0,F.m9)(n),t=(0,F.m9)(t),n instanceof Hs&&t instanceof Hs&&n.firestore===t.firestore&&lm(n._query,t._query)&&n.converter===t.converter}class W3{constructor(){this.Oc=Promise.resolve(),this.Mc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new Vk(this,"async_queue_retry"),this.Kc=()=>{const e=oS();e&&je("AsyncQueue","Visibility state changed to "+e.visibilityState),this.So.Eo()};const t=oS();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Gc(),this.Qc(t)}enterRestrictedMode(t){if(!this.Fc){this.Fc=!0,this.Uc=t||!1;const e=oS();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Kc)}}enqueue(t){if(this.Gc(),this.Fc)return new Promise(()=>{});const e=new wr;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Mc.push(t),this.jc()))}jc(){var t=this;return(0,be.Z)(function*(){if(0!==t.Mc.length){try{yield t.Mc[0](),t.Mc.shift(),t.So.reset()}catch(e){if(!Yc(e))throw e;je("AsyncQueue","Operation failed with retryable error: "+e)}t.Mc.length>0&&t.So.Io(()=>t.jc())}})()}Qc(t){const e=this.Oc.then(()=>(this.Lc=!0,t().catch(i=>{throw this.Bc=i,this.Lc=!1,Xi("INTERNAL UNHANDLED ERROR: ",function(s){let l=s.message||"";return s.stack&&(l=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),l}(i)),i}).then(i=>(this.Lc=!1,i))));return this.Oc=e,e}enqueueAfterDelay(t,e,i){this.Gc(),this.qc.indexOf(t)>-1&&(e=0);const r=iR.createAndSchedule(this,t,e,i,s=>this.Wc(s));return this.$c.push(r),r}Gc(){this.Bc&&mt()}verifyOperationInProgress(){}zc(){var t=this;return(0,be.Z)(function*(){let e;do{e=t.Oc,yield e}while(e!==t.Oc)})()}Hc(t){for(const e of this.$c)if(e.timerId===t)return!0;return!1}Jc(t){return this.zc().then(()=>{this.$c.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(const e of this.$c)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.zc()})}Yc(t){this.qc.push(t)}Wc(t){const e=this.$c.indexOf(t);this.$c.splice(e,1)}}function $R(n){return function(t,e){if("object"!=typeof t||null===t)return!1;const i=t;for(const r of["next","error","complete"])if(r in i&&"function"==typeof i[r])return!0;return!1}(n)}class Y3{constructor(){this._progressObserver={},this._taskCompletionResolver=new wr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,i){this._progressObserver={next:t,error:e,complete:i}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}class Ni extends Nw{constructor(t,e,i){super(t,e,i),this.type="firestore",this._queue=new W3,this._persistenceKey="name"in t?t.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||SL(this),this._firestoreClient.terminate()}}function Er(n){return n._firestoreClient||SL(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function SL(n){var t;const e=n._freezeSettings(),i=(s=(null===(t=n._app)||void 0===t?void 0:t.options.appId)||"",new Rx(n._databaseId,s,n._persistenceKey,(d=e).host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,d.useFetchStreams));var s,d;n._firestoreClient=new F3(n._authCredentials,n._appCheckCredentials,n._queue,i)}function ML(n,t,e){const i=new wr;return n.asyncQueue.enqueue((0,be.Z)(function*(){try{yield dL(n,e),yield hL(n,t),i.resolve()}catch(r){const s=r;if(!("FirebaseError"===(l=s).name?l.code===ye.FAILED_PRECONDITION||l.code===ye.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw s;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+s),i.reject(s)}var l})).then(()=>i.promise)}function TL(n){if(n._initialized||n._terminated)throw new Ne(ye.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class md{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new Ne(ye.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xi(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class ru{constructor(t){this._byteString=t}static fromBase64String(t){try{return new ru(Pi.fromBase64String(t))}catch(e){throw new Ne(ye.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new ru(Pi.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class Em{constructor(t){this._methodName=t}}class fS{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Ne(ye.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Ne(ye.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return zt(this._lat,t._lat)||zt(this._long,t._long)}}const r$=/^__.*__$/;class s${constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return null!==this.fieldMask?new eu(t,this.data,this.fieldMask,e,this.fieldTransforms):new hm(t,this.data,e,this.fieldTransforms)}}class IL{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new eu(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function AL(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw mt()}}class pS{constructor(t,e,i,r,s,l){this.settings=t,this.databaseId=e,this.wt=i,this.ignoreUndefinedProperties=r,void 0===s&&this.Xc(),this.fieldTransforms=s||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(t){return new pS(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(t){var e;const i=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.ta({path:i,na:!1});return r.sa(t),r}ia(t){var e;const i=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.ta({path:i,na:!1});return r.Xc(),r}ra(t){return this.ta({path:void 0,na:!0})}oa(t){return _S(t,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(t){return void 0!==this.fieldMask.find(e=>t.isPrefixOf(e))||void 0!==this.fieldTransforms.find(e=>t.isPrefixOf(e.field))}Xc(){if(this.path)for(let t=0;t<this.path.length;t++)this.sa(this.path.get(t))}sa(t){if(0===t.length)throw this.oa("Document fields must not be empty");if(AL(this.Zc)&&r$.test(t))throw this.oa('Document fields cannot begin and end with "__"')}}class o${constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.wt=i||Rw(t)}aa(t,e,i,r=!1){return new pS({Zc:t,methodName:e,ca:i,path:xi.emptyPath(),na:!1,ua:r},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function Dm(n){const t=n._freezeSettings(),e=Rw(n._databaseId);return new o$(n._databaseId,!!t.ignoreUndefinedProperties,e)}function mS(n,t,e,i,r,s={}){const l=n.aa(s.merge||s.mergeFields?2:0,t,e,r);ZR("Data must be an object, but it was:",l,i);const d=OL(i,l);let p,_;if(s.merge)p=new co(l.fieldMask),_=l.fieldTransforms;else if(s.mergeFields){const b=[];for(const D of s.mergeFields){const I=KR(t,D,e);if(!l.contains(I))throw new Ne(ye.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);NL(b,I)||b.push(I)}p=new co(b),_=l.fieldTransforms.filter(D=>p.covers(D.field))}else p=null,_=l.fieldTransforms;return new s$(new Xr(d),p,_)}class Fw extends Em{_toFieldTransform(t){if(2!==t.Zc)throw t.oa(1===t.Zc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Fw}}function kL(n,t,e){return new pS({Zc:3,ca:t.settings.ca,methodName:n._methodName,na:e},t.databaseId,t.wt,t.ignoreUndefinedProperties)}class qR extends Em{_toFieldTransform(t){return new Kh(t.path,new hd)}isEqual(t){return t instanceof qR}}class a$ extends Em{constructor(t,e){super(t),this.ha=e}_toFieldTransform(t){const e=kL(this,t,!0),i=this.ha.map(s=>xm(s,e)),r=new fd(i);return new Kh(t.path,r)}isEqual(t){return this===t}}class l$ extends Em{constructor(t,e){super(t),this.ha=e}_toFieldTransform(t){const e=kL(this,t,!0),i=this.ha.map(s=>xm(s,e)),r=new Xc(i);return new Kh(t.path,r)}isEqual(t){return this===t}}class c$ extends Em{constructor(t,e){super(t),this.la=e}_toFieldTransform(t){const e=new Jc(t.wt,Vx(t.wt,this.la));return new Kh(t.path,e)}isEqual(t){return this===t}}function WR(n,t,e,i){const r=n.aa(1,t,e);ZR("Data must be an object, but it was:",r,i);const s=[],l=Xr.empty();ad(i,(p,_)=>{const b=gS(t,p,e);_=(0,F.m9)(_);const D=r.ia(b);if(_ instanceof Fw)s.push(b);else{const I=xm(_,D);null!=I&&(s.push(b),l.set(b,I))}});const d=new co(s);return new IL(l,d,r.fieldTransforms)}function YR(n,t,e,i,r,s){const l=n.aa(1,t,e),d=[KR(t,i,e)],p=[r];if(s.length%2!=0)throw new Ne(ye.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<s.length;I+=2)d.push(KR(t,s[I])),p.push(s[I+1]);const _=[],b=Xr.empty();for(let I=d.length-1;I>=0;--I)if(!NL(_,d[I])){const P=d[I];let U=p[I];U=(0,F.m9)(U);const Q=l.ia(P);if(U instanceof Fw)_.push(P);else{const le=xm(U,Q);null!=le&&(_.push(P),b.set(P,le))}}const D=new co(_);return new IL(b,D,l.fieldTransforms)}function RL(n,t,e,i=!1){return xm(e,n.aa(i?4:3,t))}function xm(n,t){if(PL(n=(0,F.m9)(n)))return ZR("Unsupported field value:",t,n),OL(n,t);if(n instanceof Em)return function(e,i){if(!AL(i.Zc))throw i.oa(`${e._methodName}() can only be used with update() and set()`);if(!i.path)throw i.oa(`${e._methodName}() is not currently supported inside arrays`);const r=e._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(n,t),null;if(void 0===n&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.na&&4!==t.Zc)throw t.oa("Nested arrays are not supported");return function(e,i){const r=[];let s=0;for(const l of e){let d=xm(l,i.ra(s));null==d&&(d={nullValue:"NULL_VALUE"}),r.push(d),s++}return{arrayValue:{values:r}}}(n,t)}return function(e,i){if(null===(e=(0,F.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Vx(i.wt,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const r=mi.fromDate(e);return{timestampValue:av(i.wt,r)}}if(e instanceof mi){const r=new mi(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:av(i.wt,r)}}if(e instanceof fS)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof ru)return{bytesValue:fk(i.wt,e._byteString)};if(e instanceof Ti){const r=i.databaseId,s=e.firestore._databaseId;if(!s.isEqual(r))throw i.oa(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:pw(e.firestore._databaseId||i.databaseId,e._key.path)}}throw i.oa(`Unsupported field value: ${dS(e)}`)}(n,t)}function OL(n,t){const e={};return K_(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ad(n,(i,r)=>{const s=xm(r,t.ea(i));null!=s&&(e[i]=s)}),{mapValue:{fields:e}}}function PL(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof mi||n instanceof fS||n instanceof ru||n instanceof Ti||n instanceof Em)}function ZR(n,t,e){if(!PL(e)||"object"!=typeof(i=e)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const i=dS(e);throw t.oa("an object"===i?n+" a custom object":n+" "+i)}var i}function KR(n,t,e){if((t=(0,F.m9)(t))instanceof md)return t._internalPath;if("string"==typeof t)return gS(n,t);throw _S("Field path arguments must be of type string or ",n,!1,void 0,e)}const u$=new RegExp("[~\\*/\\[\\]]");function gS(n,t,e){if(t.search(u$)>=0)throw _S(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new md(...t.split("."))._internalPath}catch(i){throw _S(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function _S(n,t,e,i,r){const s=i&&!i.isEmpty(),l=void 0!==r;let d=`Function ${t}() called with invalid data`;e&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(s||l)&&(p+=" (found",s&&(p+=` in field ${i}`),l&&(p+=` in document ${r}`),p+=")"),new Ne(ye.INVALID_ARGUMENT,d+n+p)}function NL(n,t){return n.some(e=>e.isEqual(t))}class Lw{constructor(t,e,i,r,s){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ti(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new d$(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(vS("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class d$ extends Lw{data(){return super.data()}}function vS(n,t){return"string"==typeof t?gS(n,t):t instanceof md?t._internalPath:t._delegate._internalPath}class Sm{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class gd extends Lw{constructor(t,e,i,r,s,l){super(t,e,i,r,l),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Bw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(vS("DocumentSnapshot.get",t));if(null!==i)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}}class Bw extends gd{data(t={}){return super.data(t)}}class sf{constructor(t,e,i,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Sm(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new Bw(this._firestore,this._userDataWriter,i.key,i,new Sm(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Ne(ye.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(l=>({type:"added",doc:new Bw(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Sm(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>r||3!==l.type).map(l=>{const d=new Bw(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Sm(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let p=-1,_=-1;return 0!==l.type&&(p=s.indexOf(l.doc.key),s=s.delete(l.doc.key)),1!==l.type&&(s=s.add(l.doc),_=s.indexOf(l.doc.key)),{type:h$(l.type),doc:d,oldIndex:p,newIndex:_}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function h$(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return mt()}}function FL(n,t){return n instanceof gd&&t instanceof gd?n._firestore===t._firestore&&n._key.isEqual(t._key)&&(null===n._document?null===t._document:n._document.isEqual(t._document))&&n._converter===t._converter:n instanceof sf&&t instanceof sf&&n._firestore===t._firestore&&xL(n.query,t.query)&&n.metadata.isEqual(t.metadata)&&n._snapshot.isEqual(t._snapshot)}function LL(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ne(ye.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Vw{}function af(n,...t){for(const e of t)n=e._apply(n);return n}class f$ extends Vw{constructor(t,e,i){super(),this.fa=t,this.da=e,this._a=i,this.type="where"}_apply(t){const e=Dm(t.firestore),i=function(r,s,l,d,p,_,b){let D;if(p.isKeyField()){if("array-contains"===_||"array-contains-any"===_)throw new Ne(ye.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if("in"===_||"not-in"===_){GL(b,_);const P=[];for(const U of b)P.push(jL(d,r,U));D={arrayValue:{values:P}}}else D=jL(d,r,b)}else"in"!==_&&"not-in"!==_&&"array-contains-any"!==_||GL(b,_),D=RL(l,"where",b,"in"===_||"not-in"===_);const I=Pr.create(p,_,D);return function(P,U){if(U.ht()){const le=ev(P);if(null!==le&&!le.isEqual(U.field))throw new Ne(ye.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${le.toString()}' and '${U.field.toString()}'`);const Ze=am(P);null!==Ze&&zL(0,U.field,Ze)}const Q=function(le,Ze){for(const rt of le.filters)if(Ze.indexOf(rt.op)>=0)return rt.op;return null}(P,function(le){switch(le){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(U.op));if(null!==Q)throw new Ne(ye.INVALID_ARGUMENT,Q===U.op?`Invalid query. You cannot use more than one '${U.op.toString()}' filter.`:`Invalid query. You cannot use '${U.op.toString()}' filters with '${Q.toString()}' filters.`)}(r,I),I}(t._query,0,e,t.firestore._databaseId,this.fa,this.da,this._a);return new Hs(t.firestore,t.converter,function(r,s){const l=r.filters.concat([s]);return new lc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),l,r.limit,r.limitType,r.startAt,r.endAt)}(t._query,i))}}class m$ extends Vw{constructor(t,e){super(),this.fa=t,this.wa=e,this.type="orderBy"}_apply(t){const e=function(i,r,s){if(null!==i.startAt)throw new Ne(ye.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new Ne(ye.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new Wh(r,s);return function(d,p){if(null===am(d)){const _=ev(d);null!==_&&zL(0,_,p.field)}}(i,l),l}(t._query,this.fa,this.wa);return new Hs(t.firestore,t.converter,function(i,r){const s=i.explicitOrderBy.concat([r]);return new lc(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,e))}}class BL extends Vw{constructor(t,e,i){super(),this.type=t,this.ma=e,this.ga=i}_apply(t){return new Hs(t.firestore,t.converter,tw(t._query,this.ma,this.ga))}}class VL extends Vw{constructor(t,e,i){super(),this.type=t,this.ya=e,this.pa=i}_apply(t){const e=HL(t,this.type,this.ya,this.pa);return new Hs(t.firestore,t.converter,(r=e,new lc((i=t._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,r,i.endAt)));var i,r}}class UL extends Vw{constructor(t,e,i){super(),this.type=t,this.ya=e,this.pa=i}_apply(t){const e=HL(t,this.type,this.ya,this.pa);return new Hs(t.firestore,t.converter,(r=e,new lc((i=t._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,r)));var i,r}}function HL(n,t,e,i){if(e[0]=(0,F.m9)(e[0]),e[0]instanceof Lw)return function(r,s,l,d,p){if(!d)throw new Ne(ye.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const _=[];for(const b of Zh(r))if(b.field.isKeyField())_.push(ud(s,d.key));else{const D=d.data.field(b.field);if(Ax(D))throw new Ne(ye.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+b.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===D){const I=b.field.canonicalString();throw new Ne(ye.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${I}' (used as the orderBy) does not exist.`)}_.push(D)}return new dd(_,p)}(n._query,n.firestore._databaseId,t,e[0]._document,i);{const r=Dm(n.firestore);return function(s,l,d,p,_,b){const D=s.explicitOrderBy;if(_.length>D.length)throw new Ne(ye.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const I=[];for(let P=0;P<_.length;P++){const U=_[P];if(D[P].field.isKeyField()){if("string"!=typeof U)throw new Ne(ye.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof U}`);if(!tv(s)&&-1!==U.indexOf("/"))throw new Ne(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${U}' contains a slash.`);const Q=s.path.child(mn.fromString(U));if(!nt.isDocumentKey(Q))throw new Ne(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${Q}' is not because it contains an odd number of segments.`);const le=new nt(Q);I.push(ud(l,le))}else{const Q=RL(d,p,U);I.push(Q)}}return new dd(I,b)}(n._query,n.firestore._databaseId,r,t,e,i)}}function jL(n,t,e){if("string"==typeof(e=(0,F.m9)(e))){if(""===e)throw new Ne(ye.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!tv(t)&&-1!==e.indexOf("/"))throw new Ne(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const i=t.path.child(mn.fromString(e));if(!nt.isDocumentKey(i))throw new Ne(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return ud(n,new nt(i))}if(e instanceof Ti)return ud(n,e._key);throw new Ne(ye.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${dS(e)}.`)}function GL(n,t){if(!Array.isArray(n)||0===n.length)throw new Ne(ye.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`);if(n.length>10)throw new Ne(ye.INVALID_ARGUMENT,`Invalid Query. '${t.toString()}' filters support a maximum of 10 elements in the value array.`)}function zL(n,t,e){if(!e.isEqual(t))throw new Ne(ye.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${e.toString()}' instead.`)}const E$={maxAttempts:5};class QR{convertValue(t,e="none"){switch(Qc(t)){case 0:return null;case 1:return t.booleanValue;case 2:return gi(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(oc(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw mt()}}convertObject(t,e){const i={};return ad(t.fields,(r,s)=>{i[r]=this.convertValue(s,e)}),i}convertGeoPoint(t){return new fS(gi(t.latitude),gi(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":const i=kx(t);return null==i?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(nm(t));default:return null}}convertTimestamp(t){const e=Zc(t);return new mi(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=mn.fromString(t);Pt(it(i));const r=new al(i.get(1),i.get(3)),s=new nt(i.popFirst(5));return r.isEqual(e)||Xi(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),s}}function yS(n,t,e){let i;return i=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,i}class D$ extends QR{constructor(t){super(),this.firestore=t}convertBytes(t){return new ru(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Ti(this.firestore,null,e)}}class $L{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Dm(t)}set(t,e,i){this._verifyNotCommitted();const r=lf(t,this._firestore),s=yS(r.converter,e,i),l=mS(this._dataReader,"WriteBatch.set",r._key,s,null!==r.converter,i);return this._mutations.push(l.toMutation(r._key,Mi.none())),this}update(t,e,i,...r){this._verifyNotCommitted();const s=lf(t,this._firestore);let l;return l="string"==typeof(e=(0,F.m9)(e))||e instanceof md?YR(this._dataReader,"WriteBatch.update",s._key,e,i,r):WR(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(l.toMutation(s._key,Mi.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=lf(t,this._firestore);return this._mutations=this._mutations.concat(new cc(e._key,Mi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ne(ye.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function lf(n,t){if((n=(0,F.m9)(n)).firestore!==t)throw new Ne(ye.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Mm extends QR{constructor(t){super(),this.firestore=t}convertBytes(t){return new ru(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Ti(this.firestore,null,e)}}function qL(n,t,e){n=Mn(n,Ti);const i=Mn(n.firestore,Ni),r=yS(n.converter,t,e);return wv(i,[mS(Dm(i),"setDoc",n._key,r,null!==n.converter,e).toMutation(n._key,Mi.none())])}function WL(n,t,e,...i){n=Mn(n,Ti);const r=Mn(n.firestore,Ni),s=Dm(r);let l;return l="string"==typeof(t=(0,F.m9)(t))||t instanceof md?YR(s,"updateDoc",n._key,t,e,i):WR(s,"updateDoc",n._key,t),wv(r,[l.toMutation(n._key,Mi.exists(!0))])}function YL(n,...t){var e,i,r;n=(0,F.m9)(n);let s={includeMetadataChanges:!1},l=0;"object"!=typeof t[l]||$R(t[l])||(s=t[l],l++);const d={includeMetadataChanges:s.includeMetadataChanges};if($R(t[l])){const D=t[l];t[l]=null===(e=D.next)||void 0===e?void 0:e.bind(D),t[l+1]=null===(i=D.error)||void 0===i?void 0:i.bind(D),t[l+2]=null===(r=D.complete)||void 0===r?void 0:r.bind(D)}let p,_,b;if(n instanceof Ti)_=Mn(n.firestore,Ni),b=Yh(n._key.path),p={next:D=>{t[l]&&t[l](XR(_,n,D))},error:t[l+1],complete:t[l+2]};else{const D=Mn(n,Hs);_=Mn(D.firestore,Ni),b=D._query;const I=new Mm(_);p={next:P=>{t[l]&&t[l](new sf(_,I,D,P))},error:t[l+1],complete:t[l+2]},LL(n._query)}return function(D,I,P,U){const Q=new cS(U),le=new cR(I,Q,P);return D.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return rR(yield bv(D),le)})),()=>{Q.Tc(),D.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return oR(yield bv(D),le)}))}}(Er(_),b,d,p)}function wv(n,t){return function(e,i){const r=new wr;return e.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function g3(n,t,e){return pR.apply(this,arguments)}(yield jR(e),i,r)})),r.promise}(Er(n),t)}function XR(n,t,e){const i=e.docs.get(t._key),r=new Mm(n);return new gd(n,r,t._key,i,new Sm(e.hasPendingWrites,e.fromCache),t.converter)}class P$ extends class{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=Dm(t)}get(t){const e=lf(t,this._firestore),i=new D$(this._firestore);return this._transaction.lookup([e._key]).then(r=>{if(!r||1!==r.length)return mt();const s=r[0];if(s.isFoundDocument())return new Lw(this._firestore,i,s.key,s,e.converter);if(s.isNoDocument())return new Lw(this._firestore,i,e._key,null,e.converter);throw mt()})}set(t,e,i){const r=lf(t,this._firestore),s=yS(r.converter,e,i),l=mS(this._dataReader,"Transaction.set",r._key,s,null!==r.converter,i);return this._transaction.set(r._key,l),this}update(t,e,i,...r){const s=lf(t,this._firestore);let l;return l="string"==typeof(e=(0,F.m9)(e))||e instanceof md?YR(this._dataReader,"Transaction.update",s._key,e,i,r):WR(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,l),this}delete(t){const e=lf(t,this._firestore);return this._transaction.delete(e._key),this}}{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=lf(t,this._firestore),i=new Mm(this._firestore);return super.get(t).then(r=>new gd(this._firestore,i,e._key,r._document,new Sm(!1,!1),e.converter))}}function JR(n,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Ne("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return t}function KL(){if("undefined"==typeof Uint8Array)throw new Ne("unimplemented","Uint8Arrays are not available in this environment.")}function QL(){if(!function Tx(){return"undefined"!=typeof atob}())throw new Ne("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,t=!0){id=Wr.SDK_VERSION,(0,Wr._registerComponent)(new ga.wA("firestore",(e,{options:i})=>{const r=e.getProvider("app").getImmediate(),s=new Ni(r,new RA(e.getProvider("auth-internal")),new PA(e.getProvider("app-check-internal")));return i=Object.assign({useFetchStreams:t},i),s._setSettings(i),s},"PUBLIC")),(0,Wr.registerVersion)(L0,"3.4.11",n),(0,Wr.registerVersion)(L0,"3.4.11","esm2017")}();class Uw{constructor(t){this._delegate=t}static fromBase64String(t){return QL(),new Uw(ru.fromBase64String(t))}static fromUint8Array(t){return KL(),new Uw(ru.fromUint8Array(t))}toBase64(){return QL(),this._delegate.toBase64()}toUint8Array(){return KL(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function eO(n){return function G$(n,t){if("object"!=typeof n||null===n)return!1;const e=n;for(const i of t)if(i in e&&"function"==typeof e[i])return!0;return!1}(n,["next","error","complete"])}class z${enableIndexedDbPersistence(t,e){return function K3(n,t){TL(n=Mn(n,Ni));const e=Er(n),i=n._freezeSettings(),r=new NR;return ML(e,r,new cL(r,i.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return function Q3(n){TL(n=Mn(n,Ni));const t=Er(n),e=n._freezeSettings(),i=new NR;return ML(t,i,new R3(i,e.cacheSizeBytes))}(t._delegate)}clearIndexedDbPersistence(t){return function X3(n){if(n._initialized&&!n._terminated)throw new Ne(ye.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new wr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,be.Z)(function*(){try{yield(e=(0,be.Z)(function*(i){if(!xa.V())return Promise.resolve();const r=i+"main";yield xa.delete(r)}),function(i){return e.apply(this,arguments)})(Ik(n._databaseId,n._persistenceKey)),t.resolve()}catch(e){t.reject(e)}var e})),t.promise}(t._delegate)}}class XL{constructor(t,e,i){this._delegate=e,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},t instanceof al||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const e=this._delegate._getSettings();!t.merge&&e.host!==t.host&&Zp("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)}useEmulator(t,e,i={}){!function $3(n,t,e,i={}){var r;const s=(n=Mn(n,Nw))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==t&&Zp("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},s),{host:`${t}:${e}`,ssl:!1})),i.mockUserToken){let l,d;if("string"==typeof i.mockUserToken)l=i.mockUserToken,d=ar.MOCK_USER;else{l=(0,F.Sg)(i.mockUserToken,null===(r=n._app)||void 0===r?void 0:r.options.projectId);const p=i.mockUserToken.sub||i.mockUserToken.user_id;if(!p)throw new Ne(ye.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new ar(p)}n._authCredentials=new kA(new Qp(l,d))}}(this._delegate,t,e,i)}enableNetwork(){return function e$(n){return function L3(n){return n.asyncQueue.enqueue((0,be.Z)(function*(){const t=yield fL(n),e=yield pL(n);return t.setNetworkEnabled(!0),function(i){const r=ct(i);return r.lu.delete(0),Ow(r)}(e)}))}(Er(n=Mn(n,Ni)))}(this._delegate)}disableNetwork(){return function t$(n){return function B3(n){return n.asyncQueue.enqueue((0,be.Z)(function*(){const t=yield fL(n),e=yield pL(n);return t.setNetworkEnabled(!1),(i=(0,be.Z)(function*(r){const s=ct(r);s.lu.add(0),yield fv(s),s._u.set("Offline")}),function(r){return i.apply(this,arguments)})(e);var i}))}(Er(n=Mn(n,Ni)))}(this._delegate)}enablePersistence(t){let e=!1,i=!1;return t&&(e=!!t.synchronizeTabs,i=!!t.experimentalForceOwningTab,vL("synchronizeTabs",e,"experimentalForceOwningTab",i)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function J3(n){return function(t){const e=new wr;return t.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function b3(n,t){return yR.apply(this,arguments)}(yield jR(t),e)})),e.promise}(Er(n=Mn(n,Ni)))}(this._delegate)}onSnapshotsInSync(t){return function O$(n,t){return function H3(n,t){const e=new cS(t);return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return i=yield bv(n),r=e,ct(i).Tu.add(r),void r.next();var i,r})),()=>{e.Tc(),n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return i=yield bv(n),r=e,void ct(i).Tu.delete(r);var i,r}))}}(Er(n=Mn(n,Ni)),$R(t)?t:{next:t})}(this._delegate,t)}get app(){if(!this._appCompat)throw new Ne("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new Cv(this,EL(this._delegate,t))}catch(e){throw fo(e,"collection()","Firestore.collection()")}}doc(t){try{return new ul(this,hS(this._delegate,t))}catch(e){throw fo(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new po(this,function q3(n,t){if(n=Mn(n,Nw),zR("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Ne(ye.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Hs(n,null,(e=t,new lc(mn.emptyPath(),e)));var e}(this._delegate,t))}catch(e){throw fo(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return function N$(n,t,e){n=Mn(n,Ni);const i=Object.assign(Object.assign({},E$),e);return function(r){if(r.maxAttempts<1)throw new Ne(ye.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function j3(n,t,e){const i=new wr;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){const r=yield(s=n,uS(s).then(l=>l.datastore));var s;new N3(n.asyncQueue,r,e,t,i).run()})),i.promise}(Er(n),r=>t(new P$(n,r)),i)}(this._delegate,e=>t(new JL(this,e)))}batch(){return Er(this._delegate),new eB(new $L(this._delegate,t=>wv(this._delegate,t)))}loadBundle(t){return function n$(n,t){const e=Er(n=Mn(n,Ni)),i=new Y3;return function G3(n,t,e,i){const r=function(s,l){let d;return d="string"==typeof s?(new TextEncoder).encode(s):s,p=function(p,_){if(p instanceof Uint8Array)return uL(p,_);if(p instanceof ArrayBuffer)return uL(new Uint8Array(p),_);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(d),new O3(p,l);var p}(e,Rw(t));n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){!function k3(n,t,e){const i=ct(n);var r;(r=(0,be.Z)(function*(s,l,d){try{const p=yield l.getMetadata();if(yield function(I,P){const U=ct(I),Q=Cr(P.createTime);return U.persistence.runTransaction("hasNewerBundle","readonly",le=>U.Ds.getBundleMetadata(le,P.id)).then(le=>!!le&&le.createTime.compareTo(Q)>=0)}(s.localStore,p))return yield l.close(),d._completeWith({taskState:"Success",documentsLoaded:(I=p).totalDocuments,bytesLoaded:I.totalBytes,totalDocuments:I.totalDocuments,totalBytes:I.totalBytes}),Promise.resolve(new Set);d._updateProgress(JF(p));const _=new u3(p,s.localStore,l.wt);let b=yield l.fc();for(;b;){const I=yield _.Nu(b);I&&d._updateProgress(I),b=yield l.fc()}const D=yield _.complete();return yield pd(s,D.Mu,void 0),yield function(I,P){const U=ct(I);return U.persistence.runTransaction("Save bundle","readwrite",Q=>U.Ds.saveBundleMetadata(Q,P))}(s.localStore,p),d._completeWith(D.progress),Promise.resolve(D.Ou)}catch(p){return Zp("SyncEngine",`Loading bundle failed with ${p}`),d._failWith(p),Promise.resolve(new Set)}var I}),function(s,l,d){return r.apply(this,arguments)})(i,t,e).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}(yield jR(n),r,i)}))}(e,n._databaseId,t,i),i}(this._delegate,t)}namedQuery(t){return function i$(n,t){return function z3(n,t){return n.asyncQueue.enqueue((0,be.Z)(function*(){return function(e,i){const r=ct(e);return r.persistence.runTransaction("Get named query","readonly",s=>r.Ds.getNamedQuery(s,i))}(yield HR(n),t)}))}(Er(n=Mn(n,Ni)),t).then(e=>e?new Hs(n,null,e.query):null)}(this._delegate,t).then(e=>e?new po(this,e):null)}}class bS extends QR{constructor(t){super(),this.firestore=t}convertBytes(t){return new Uw(new ru(t))}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return ul.forKey(e,this.firestore,null)}}class JL{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new bS(t)}get(t){const e=Im(t);return this._delegate.get(e).then(i=>new Hw(this._firestore,new gd(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,e.converter)))}set(t,e,i){const r=Im(t);return i?(JR("Transaction.set",i),this._delegate.set(r,e,i)):this._delegate.set(r,e),this}update(t,e,i,...r){const s=Im(t);return 2===arguments.length?this._delegate.update(s,e):this._delegate.update(s,e,i,...r),this}delete(t){const e=Im(t);return this._delegate.delete(e),this}}class eB{constructor(t){this._delegate=t}set(t,e,i){const r=Im(t);return i?(JR("WriteBatch.set",i),this._delegate.set(r,e,i)):this._delegate.set(r,e),this}update(t,e,i,...r){const s=Im(t);return 2===arguments.length?this._delegate.update(s,e):this._delegate.update(s,e,i,...r),this}delete(t){const e=Im(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}}class Tm{constructor(t,e,i){this._firestore=t,this._userDataWriter=e,this._delegate=i}fromFirestore(t,e){const i=new Bw(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new jw(this._firestore,i),null!=e?e:{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){const i=Tm.INSTANCES;let r=i.get(t);r||(r=new WeakMap,i.set(t,r));let s=r.get(e);return s||(s=new Tm(t,new bS(t),e),r.set(e,s)),s}}Tm.INSTANCES=new WeakMap;class ul{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new bS(t)}static forPath(t,e,i){if(t.length%2!=0)throw new Ne("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new ul(e,new Ti(e._delegate,i,new nt(t)))}static forKey(t,e,i){return new ul(e,new Ti(e._delegate,i,t))}get id(){return this._delegate.id}get parent(){return new Cv(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new Cv(this.firestore,EL(this._delegate,t))}catch(e){throw fo(e,"collection()","DocumentReference.collection()")}}isEqual(t){return(t=(0,F.m9)(t))instanceof Ti&&DL(this._delegate,t)}set(t,e){e=JR("DocumentReference.set",e);try{return e?qL(this._delegate,t,e):qL(this._delegate,t)}catch(i){throw fo(i,"setDoc()","DocumentReference.set()")}}update(t,e,...i){try{return 1===arguments.length?WL(this._delegate,t):WL(this._delegate,t,e,...i)}catch(r){throw fo(r,"updateDoc()","DocumentReference.update()")}}delete(){return function k$(n){return wv(Mn(n.firestore,Ni),[new cc(n._key,Mi.none())])}(this._delegate)}onSnapshot(...t){const e=tB(t),i=nB(t,r=>new Hw(this.firestore,new gd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return YL(this._delegate,e,i)}get(t){let e;return e="cache"===(null==t?void 0:t.source)?function S$(n){n=Mn(n,Ti);const t=Mn(n.firestore,Ni),e=Er(t),i=new Mm(t);return function V3(n,t){const e=new wr;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return(i=(0,be.Z)(function*(r,s,l){try{const d=yield function(p,_){const b=ct(p);return b.persistence.runTransaction("read document","readonly",D=>b.localDocuments.getDocument(D,_))}(r,s);d.isFoundDocument()?l.resolve(d):d.isNoDocument()?l.resolve(null):l.reject(new Ne(ye.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const p=gv(d,`Failed to get document '${s} from cache`);l.reject(p)}}),function(r,s,l){return i.apply(this,arguments)})(yield HR(n),t,e);var i})),e.promise}(e,n._key).then(r=>new gd(t,i,n._key,r,new Sm(null!==r&&r.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==t?void 0:t.source)?function M$(n){n=Mn(n,Ti);const t=Mn(n.firestore,Ni);return mL(Er(t),n._key,{source:"server"}).then(e=>XR(t,n,e))}(this._delegate):function x$(n){n=Mn(n,Ti);const t=Mn(n.firestore,Ni);return mL(Er(t),n._key).then(e=>XR(t,n,e))}(this._delegate),e.then(i=>new Hw(this.firestore,new gd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(t){return new ul(this.firestore,this._delegate.withConverter(t?Tm.getInstance(this.firestore,t):null))}}function fo(n,t,e){return n.message=n.message.replace(t,e),n}function tB(n){for(const t of n)if("object"==typeof t&&!eO(t))return t;return{}}function nB(n,t){var e,i;let r;return r=eO(n[0])?n[0]:eO(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{r.next&&r.next(t(s))},error:null===(e=r.error)||void 0===e?void 0:e.bind(r),complete:null===(i=r.complete)||void 0===i?void 0:i.bind(r)}}class Hw{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new ul(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return FL(this._delegate,t._delegate)}}class jw extends Hw{data(t){const e=this._delegate.data(t);return function Kp(n,t){n||mt()}(void 0!==e),e}}class po{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new bS(t)}where(t,e,i){try{return new po(this.firestore,af(this._delegate,function p$(n,t,e){const i=t,r=vS("where",n);return new f$(r,i,e)}(t,e,i)))}catch(r){throw fo(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new po(this.firestore,af(this._delegate,function g$(n,t="asc"){const e=t,i=vS("orderBy",n);return new m$(i,e)}(t,e)))}catch(i){throw fo(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new po(this.firestore,af(this._delegate,function _$(n){return wL("limit",n),new BL("limit",n,"F")}(t)))}catch(e){throw fo(e,"limit()","Query.limit()")}}limitToLast(t){try{return new po(this.firestore,af(this._delegate,function v$(n){return wL("limitToLast",n),new BL("limitToLast",n,"L")}(t)))}catch(e){throw fo(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new po(this.firestore,af(this._delegate,function y$(...n){return new VL("startAt",n,!0)}(...t)))}catch(e){throw fo(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new po(this.firestore,af(this._delegate,function b$(...n){return new VL("startAfter",n,!1)}(...t)))}catch(e){throw fo(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new po(this.firestore,af(this._delegate,function w$(...n){return new UL("endBefore",n,!1)}(...t)))}catch(e){throw fo(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new po(this.firestore,af(this._delegate,function C$(...n){return new UL("endAt",n,!0)}(...t)))}catch(e){throw fo(e,"endAt()","Query.endAt()")}}isEqual(t){return xL(this._delegate,t._delegate)}get(t){let e;return e="cache"===(null==t?void 0:t.source)?function I$(n){n=Mn(n,Hs);const t=Mn(n.firestore,Ni),e=Er(t),i=new Mm(t);return function U3(n,t){const e=new wr;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return(i=(0,be.Z)(function*(r,s,l){try{const d=yield iS(r,s,!0),p=new nL(s,d.ji),_=p.Ku(d.documents),b=p.applyChanges(_,!1);l.resolve(b.snapshot)}catch(d){const p=gv(d,`Failed to execute query '${s} against cache`);l.reject(p)}}),function(r,s,l){return i.apply(this,arguments)})(yield HR(n),t,e);var i})),e.promise}(e,n._query).then(r=>new sf(t,i,n,r))}(this._delegate):"server"===(null==t?void 0:t.source)?function A$(n){n=Mn(n,Hs);const t=Mn(n.firestore,Ni),e=Er(t),i=new Mm(t);return gL(e,n._query,{source:"server"}).then(r=>new sf(t,i,n,r))}(this._delegate):function T$(n){n=Mn(n,Hs);const t=Mn(n.firestore,Ni),e=Er(t),i=new Mm(t);return LL(n._query),gL(e,n._query).then(r=>new sf(t,i,n,r))}(this._delegate),e.then(i=>new tO(this.firestore,new sf(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...t){const e=tB(t),i=nB(t,r=>new tO(this.firestore,new sf(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return YL(this._delegate,e,i)}withConverter(t){return new po(this.firestore,this._delegate.withConverter(t?Tm.getInstance(this.firestore,t):null))}}class q${constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new jw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class tO{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new po(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new jw(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(e=>new q$(this._firestore,e))}forEach(t,e){this._delegate.forEach(i=>{t.call(e,new jw(this._firestore,i))})}isEqual(t){return FL(this._delegate,t._delegate)}}class Cv extends po{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new ul(this.firestore,t):null}doc(t){try{return new ul(this.firestore,void 0===t?hS(this._delegate):hS(this._delegate,t))}catch(e){throw fo(e,"doc()","CollectionReference.doc()")}}add(t){return function R$(n,t){const e=Mn(n.firestore,Ni),i=hS(n),r=yS(n.converter,t);return wv(e,[mS(Dm(n.firestore),"addDoc",i._key,r,null!==n.converter,{}).toMutation(i._key,Mi.exists(!1))]).then(()=>i)}(this._delegate,t).then(e=>new ul(this.firestore,e))}isEqual(t){return DL(this._delegate,t._delegate)}withConverter(t){return new Cv(this.firestore,this._delegate.withConverter(t?Tm.getInstance(this.firestore,t):null))}}function Im(n){return Mn(n,Ti)}class nO{constructor(...t){this._delegate=new md(...t)}static documentId(){return new nO(xi.keyField().canonicalString())}isEqual(t){return(t=(0,F.m9)(t))instanceof md&&this._delegate._internalPath.isEqual(t._internalPath)}}class Am{constructor(t){this._delegate=t}static serverTimestamp(){const t=function L$(){return new qR("serverTimestamp")}();return t._methodName="FieldValue.serverTimestamp",new Am(t)}static delete(){const t=function F$(){return new Fw("deleteField")}();return t._methodName="FieldValue.delete",new Am(t)}static arrayUnion(...t){const e=function B$(...n){return new a$("arrayUnion",n)}(...t);return e._methodName="FieldValue.arrayUnion",new Am(e)}static arrayRemove(...t){const e=function V$(...n){return new l$("arrayRemove",n)}(...t);return e._methodName="FieldValue.arrayRemove",new Am(e)}static increment(t){const e=function U$(n){return new c$("increment",n)}(t);return e._methodName="FieldValue.increment",new Am(e)}isEqual(t){return this._delegate.isEqual(t._delegate)}}const W$={Firestore:XL,GeoPoint:fS,Timestamp:mi,Blob:Uw,Transaction:JL,WriteBatch:eB,DocumentReference:ul,DocumentSnapshot:Hw,Query:po,QueryDocumentSnapshot:jw,QuerySnapshot:tO,CollectionReference:Cv,FieldPath:nO,FieldValue:Am,setLogLevel:function $$(n){!function AA(n){rc.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function iB(n,t){return function K$(n,t=Bu.z){return new oi.y(e=>{let i;return null!=t?t.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},e)}):i=n.onSnapshot({includeMetadataChanges:!0},e),()=>{null!=i&&i()}})}(n,t)}function iO(n,t){return iB(n,t).pipe((0,ht.U)(e=>({payload:e,type:"query"})))}function wS(n,t){return iO(n,t).pipe(Zi(void 0),h_(),(0,ht.U)(([e,i])=>{const r=i.payload.docChanges(),s=r.map(l=>({type:l.type,payload:l}));return e&&JSON.stringify(e.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((l,d)=>{const p=r.find(b=>b.doc.ref.isEqual(l.ref)),_=null==e?void 0:e.payload.docs.find(b=>b.ref.isEqual(l.ref));p&&JSON.stringify(p.doc.metadata)===JSON.stringify(l.metadata)||!p&&_&&JSON.stringify(_.metadata)===JSON.stringify(l.metadata)||s.push({type:"modified",payload:{oldIndex:d,newIndex:d,type:"modified",doc:l}})}),s}))}function rB(n,t,e){return wS(n,e).pipe(jr((i,r)=>function X$(n,t,e){return t.forEach(i=>{e.indexOf(i.type)>-1&&(n=function J$(n,t){switch(t.type){case"added":if(!n[t.newIndex]||!n[t.newIndex].doc.ref.isEqual(t.doc.ref))return rO(n,t.newIndex,0,t);break;case"modified":if(null==n[t.oldIndex]||n[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const e=n.slice();return e.splice(t.oldIndex,1),e.splice(t.newIndex,0,t),e}return rO(n,t.newIndex,1,t)}break;case"removed":if(n[t.oldIndex]&&n[t.oldIndex].doc.ref.isEqual(t.doc.ref))return rO(n,t.oldIndex,1)}return n}(n,i))}),n}(i,r.map(s=>s.payload),t),[]),TD(),(0,ht.U)(i=>i.map(r=>({type:r.type,payload:r}))))}function rO(n,t,e,...i){const r=n.slice();return r.splice(t,e,...i),r}function sB(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function Z$(n){(function Y$(n,t){n.INTERNAL.registerComponent(new ga.wA("firestore-compat",e=>{const i=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(i,r)},"PUBLIC").setServiceProps(Object.assign({},W$)))})(n,(t,e)=>new XL(t,e,new z$)),n.registerVersion("@firebase/firestore-compat","0.1.20")}(ph.Z);class oB{constructor(t,e,i){this.ref=t,this.query=e,this.afs=i}stateChanges(t){let e=wS(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,ht.U)(i=>i.filter(r=>t.indexOf(r.type)>-1)))),e.pipe(Zi(void 0),h_(),Dn(([i,r])=>r.length>0||!i),(0,ht.U)(([i,r])=>r),Sn.iC)}auditTrail(t){return this.stateChanges(t).pipe(jr((e,i)=>[...e,...i],[]))}snapshotChanges(t){const e=sB(t);return rB(this.query,e,this.afs.schedulers.outsideAngular).pipe(Sn.iC)}valueChanges(t={}){return iO(this.query,this.afs.schedulers.outsideAngular).pipe((0,ht.U)(e=>e.payload.docs.map(i=>t.idField?Object.assign(Object.assign({},i.data()),{[t.idField]:i.id}):i.data())),Sn.iC)}get(t){return(0,Nn.D)(this.query.get(t)).pipe(Sn.iC)}add(t){return this.ref.add(t)}doc(t){return new aB(this.ref.doc(t),this.afs)}}class aB{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const i=this.ref.collection(t),{ref:r,query:s}=uB(i,e);return new oB(r,s,this.afs)}snapshotChanges(){return function Q$(n,t){return iB(n,t).pipe(Zi(void 0),h_(),(0,ht.U)(([e,i])=>i.exists?(null==e?void 0:e.exists)?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Sn.iC)}valueChanges(t={}){return this.snapshotChanges().pipe((0,ht.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,Nn.D)(this.ref.get(t)).pipe(Sn.iC)}}class e6{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?wS(this.query,this.afs.schedulers.outsideAngular).pipe((0,ht.U)(e=>e.filter(i=>t.indexOf(i.type)>-1)),Dn(e=>e.length>0),Sn.iC):wS(this.query,this.afs.schedulers.outsideAngular).pipe(Sn.iC)}auditTrail(t){return this.stateChanges(t).pipe(jr((e,i)=>[...e,...i],[]))}snapshotChanges(t){const e=sB(t);return rB(this.query,e,this.afs.schedulers.outsideAngular).pipe(Sn.iC)}valueChanges(t={}){return iO(this.query,this.afs.schedulers.outsideAngular).pipe((0,ht.U)(i=>i.payload.docs.map(r=>t.idField?Object.assign({[t.idField]:r.id},r.data()):r.data())),Sn.iC)}get(t){return(0,Nn.D)(this.query.get(t)).pipe(Sn.iC)}}const lB=new c.OlP("angularfire2.enableFirestorePersistence"),cB=new c.OlP("angularfire2.firestore.persistenceSettings"),t6=new c.OlP("angularfire2.firestore.settings"),n6=new c.OlP("angularfire2.firestore.use-emulator");function uB(n,t=(e=>e)){return{query:t(n),ref:n}}let _d=(()=>{class n{constructor(e,i,r,s,l,d,p,_,b,D,I,P,U,Q,le,Ze,rt){this.schedulers=p;const at=(0,Ki.on)(e,d,i),et=b;D&&Jg(at,d,I,U,Q,le,P,Ze),[this.firestore,this.persistenceEnabled$]=(0,Ki.cc)(`${at.name}.firestore`,"AngularFirestore",at.name,()=>{const Ot=d.runOutsideAngular(()=>at.firestore());if(s&&Ot.settings(s),et&&Ot.useEmulator(...et),r&&!ir(l)){const Lt=()=>{try{return(0,Nn.D)(Ot.enablePersistence(_||void 0).then(()=>!0,()=>!1))}catch(Cn){return"undefined"!=typeof console&&console.warn(Cn),Ye(!1)}};return[Ot,d.runOutsideAngular(Lt)]}return[Ot,Ye(!1)]},[s,et,r])}collection(e,i){let r;r="string"==typeof e?this.firestore.collection(e):e;const{ref:s,query:l}=uB(r,i),d=this.schedulers.ngZone.run(()=>s);return new oB(d,l,this)}collectionGroup(e,i){const r=i||(l=>l),s=this.firestore.collectionGroup(e);return new e6(r(s),this)}doc(e){let i;i="string"==typeof e?this.firestore.doc(e):e;const r=this.schedulers.ngZone.run(()=>i);return new aB(r,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(Ki.Dh),c.LFG(Ki.xv,8),c.LFG(lB,8),c.LFG(t6,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(Sn.HU),c.LFG(cB,8),c.LFG(n6,8),c.LFG(fh,8),c.LFG(ob,8),c.LFG(ab,8),c.LFG(gp,8),c.LFG(FE,8),c.LFG(lb,8),c.LFG(Xg,8),c.LFG(Fs,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),r6=(()=>{class n{constructor(){hh.Z.registerVersion("angularfire",Sn.q4.full,"fst-compat")}static enablePersistence(e){return{ngModule:n,providers:[{provide:lB,useValue:!0},{provide:cB,useValue:e}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[_d]}),n})();var CS=L(5032);const dB="@firebase/database";let sO="";function fB(n){sO=n}class a6{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,F.Pz)(e))}get(t){const e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,F.cI)(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class l6{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e}get(t){return(0,F.r3)(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const pB=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const t=window[n];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new a6(t)}}catch(t){}return new l6},km=pB("localStorage"),oO=pB("sessionStorage"),Ev=new sr.Yd("@firebase/database"),mB=function(){let n=1;return function(){return n++}}(),gB=function(n){const t=(0,F.dS)(n),e=new F.gQ;e.update(t);const i=e.digest();return F.US.encodeByteArray(i)},Gw=function(...n){let t="";for(let e=0;e<n.length;e++){const i=n[e];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?t+=Gw.apply(null,i):t+="object"==typeof i?(0,F.Pz)(i):i,t+=" "}return t};let Rm=null,_B=!0;const vB=function(n,t){(0,F.hu)(!t||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Ev.logLevel=sr.in.VERBOSE,Rm=Ev.log.bind(Ev),t&&oO.set("logging_enabled",!0)):"function"==typeof n?Rm=n:(Rm=null,oO.remove("logging_enabled"))},is=function(...n){if(!0===_B&&(_B=!1,null===Rm&&!0===oO.get("logging_enabled")&&vB(!0)),Rm){const t=Gw.apply(null,n);Rm(t)}},zw=function(n){return function(...t){is(n,...t)}},aO=function(...n){const t="FIREBASE INTERNAL ERROR: "+Gw(...n);Ev.error(t)},su=function(...n){const t=`FIREBASE FATAL ERROR: ${Gw(...n)}`;throw Ev.error(t),new Error(t)},js=function(...n){const t="FIREBASE WARNING: "+Gw(...n);Ev.warn(t)},ES=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},vd="[MIN_NAME]",ou="[MAX_NAME]",Om=function(n,t){if(n===t)return 0;if(n===vd||t===ou)return-1;if(t===vd||n===ou)return 1;{const e=DS(n),i=DS(t);return null!==e?null!==i?e-i==0?n.length-t.length:e-i:-1:null!==i?1:n<t?-1:1}},d6=function(n,t){return n===t?0:n<t?-1:1},$w=function(n,t){if(t&&n in t)return t[n];throw new Error("Missing required key ("+n+") in object: "+(0,F.Pz)(t))},lO=function(n){if("object"!=typeof n||null===n)return(0,F.Pz)(n);const t=[];for(const i in n)t.push(i);t.sort();let e="{";for(let i=0;i<t.length;i++)0!==i&&(e+=","),e+=(0,F.Pz)(t[i]),e+=":",e+=lO(n[t[i]]);return e+="}",e},yB=function(n,t){const e=n.length;if(e<=t)return[n];const i=[];for(let r=0;r<e;r+=t)i.push(n.substring(r,r+t>e?e:r+t));return i};function rs(n,t){for(const e in n)n.hasOwnProperty(e)&&t(e,n[e])}const bB=function(n){(0,F.hu)(!ES(n),"Invalid JSON number");const i=1023;let r,s,l,d,p;0===n?(s=0,l=0,r=1/n==-1/0?1:0):(r=n<0,(n=Math.abs(n))>=Math.pow(2,1-i)?(d=Math.min(Math.floor(Math.log(n)/Math.LN2),i),s=d+i,l=Math.round(n*Math.pow(2,52-d)-Math.pow(2,52))):(s=0,l=Math.round(n/Math.pow(2,-1074))));const _=[];for(p=52;p;p-=1)_.push(l%2?1:0),l=Math.floor(l/2);for(p=11;p;p-=1)_.push(s%2?1:0),s=Math.floor(s/2);_.push(r?1:0),_.reverse();const b=_.join("");let D="";for(p=0;p<64;p+=8){let I=parseInt(b.substr(p,8),2).toString(16);1===I.length&&(I="0"+I),D+=I}return D.toLowerCase()},m6=new RegExp("^-?(0*)\\d{1,10}$"),wB=-2147483648,cO=2147483647,DS=function(n){if(m6.test(n)){const t=Number(n);if(t>=wB&&t<=cO)return t}return null},Dv=function(n){try{n()}catch(t){setTimeout(()=>{throw js("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}},qw=function(n,t){const e=setTimeout(n,t);return"object"==typeof e&&e.unref&&e.unref(),e};class _6{constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=null==e?void 0:e.getImmediate({optional:!0}),this.appCheck||null==e||e.get().then(i=>this.appCheck=i)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((e,i)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(i=>i.addTokenListener(t))}notifyForInvalidToken(){js(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class v6{constructor(t,e,i){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(e=>e&&"auth/token-not-initialized"===e.code?(is("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,i)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',js(t)}}let Ww=(()=>{class n{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const SB=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,IB="websocket",AB="long_polling";class dO{constructor(t,e,i,r,s=!1,l="",d=!1){this.secure=e,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=l,this.includeNamespaceInQueryParams=d,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=km.get("host:"+t)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&km.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function kB(n,t,e){let i;if((0,F.hu)("string"==typeof t,"typeof type must == string"),(0,F.hu)("object"==typeof e,"typeof params must == object"),t===IB)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(t!==AB)throw new Error("Unknown connection type: "+t);i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function y6(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(e.ns=n.namespace);const r=[];return rs(e,(s,l)=>{r.push(s+"="+l)}),i+r.join("&")}class b6{constructor(){this.counters_={}}incrementCounter(t,e=1){(0,F.r3)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return(0,F.p$)(this.counters_)}}const hO={},fO={};function pO(n){const t=n.toString();return hO[t]||(hO[t]=new b6),hO[t]}class C6{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&Dv(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class cf{constructor(t,e,i,r,s,l,d){this.connId=t,this.repoInfo=e,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=l,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=zw(t),this.stats_=pO(e),this.urlFn=p=>(this.appCheckToken&&(p.ac=this.appCheckToken),kB(e,AB,p))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new C6(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,F.Yr)()||"complete"===document.readyState)n();else{let t=!1;const e=function(){document.body?t||(t=!0,n()):setTimeout(e,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&e()}),window.attachEvent("onload",e))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new mO((...s)=>{const[l,d,p,_,b]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=d,this.password=p;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[l,d]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(l,d)},()=>{this.onClosed_()},this.urlFn);const i={start:"t"};i.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(i.cb=this.scriptTagHolder.uniqueCallbackIdentifier),i.v="5",this.transportSessionId&&(i.s=this.transportSessionId),this.lastSessionId&&(i.ls=this.lastSessionId),this.applicationId&&(i.p=this.applicationId),this.appCheckToken&&(i.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&SB.test(location.hostname)&&(i.r="f");const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){cf.forceAllow_=!0}static forceDisallow(){cf.forceDisallow_=!0}static isAvailable(){return!((0,F.Yr)()||!cf.forceAllow_&&(cf.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const e=(0,F.Pz)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const i=(0,F.h$)(e),r=yB(i,1840);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(t,e){if((0,F.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=t,i.pw=e,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const e=(0,F.Pz)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class mO{constructor(t,e,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,F.Yr)())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=mB(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=mO.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(d){is("frame writing exception"),d.stack&&is(d.stack),is(d)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||is("No IE domain setting required")}catch(e){const i=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;let e=this.urlFn(t),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const l=this.pendingSegs.shift();i=i+"&seg"+r+"="+l.seg+"&ts"+r+"="+l.ts+"&d"+r+"="+l.d,r++}return e+=i,this.addLongPollTag_(e,this.currentSerial),!0}return!1}enqueueSegment(t,e,i){this.pendingSegs.push({seg:t,ts:e,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);const i=()=>{this.outstandingRequests.delete(e),this.newRequest_()},r=setTimeout(i,Math.floor(25e3));this.addTag(t,()=>{clearTimeout(r),i()})}addTag(t,e){(0,F.Yr)()?this.doNodeLongPoll(t,e):setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||"loaded"===r||"complete"===r)&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),e())},i.onerror=()=>{is("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch(i){}},Math.floor(1))}}let SS=null;"undefined"!=typeof MozWebSocket?SS=MozWebSocket:"undefined"!=typeof WebSocket&&(SS=WebSocket);let xv=(()=>{class n{constructor(e,i,r,s,l,d,p){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=zw(this.connId),this.stats_=pO(i),this.connURL=n.connectionURL_(i,d,p,s,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(e,i,r,s,l){const d={v:"5"};return!(0,F.Yr)()&&"undefined"!=typeof location&&location.hostname&&SB.test(location.hostname)&&(d.r="f"),i&&(d.s=i),r&&(d.ls=r),s&&(d.ac=s),l&&(d.p=l),kB(e,IB,d)}open(e,i){this.onDisconnect=i,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,km.set("previous_websocket_failure",!0);try{let r;if((0,F.Yr)()){const l={headers:{"User-Agent":`Firebase/5/${sO}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(l.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(l.headers["X-Firebase-AppCheck"]=this.appCheckToken);const d=process.env,p=0===this.connURL.indexOf("wss://")?d.HTTPS_PROXY||d.https_proxy:d.HTTP_PROXY||d.http_proxy;p&&(l.proxy={origin:p})}this.mySock=new SS(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const r=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&null!==SS&&!n.forceDisallow_}static previouslyFailed(){return km.isInMemoryStorage||!0===km.get("previous_websocket_failure")}markConnectionHealthy(){km.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const r=(0,F.cI)(i);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,F.hu)(null===this.frames,"We already have a frame buffer"),e.length<=6){const i=Number(e);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const i=e.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{const r=this.extractFrameCount_(i);null!==r&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const i=(0,F.Pz)(e);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=yB(i,16384);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),BB=(()=>{class n{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[cf,xv]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const i=xv&&xv.isAvailable();let r=i&&!xv.previouslyFailed();if(e.webSocketOnly&&(i||js("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[xv];else{const s=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&s.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class $B{constructor(t,e,i,r,s,l,d,p,_,b){this.id=t,this.repoInfo_=e,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=l,this.onReady_=d,this.onDisconnect_=p,this.onKill_=_,this.lastSessionId=b,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=zw("c:"+this.id+":"),this.transportManager_=new BB(e),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,i)},Math.floor(0));const r=t.healthyTimeout||0;r>0&&(this.healthyTimeout_=qw(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{2!==this.state_&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){this.sendData_({t:"d",d:t})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if("t"in t){const e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const e=$w("t",t),i=$w("d",t);if("c"===e)this.onSecondaryControl_(i);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const e=$w("t",t),i=$w("d",t);"c"===e?this.onControl_(i):"d"===e&&this.onDataMessage_(i)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const e=$w("t",t);if("d"in t){const i=t.d;if("h"===e)this.onHandshake_(i);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(i):"r"===e?this.onReset_(i):"e"===e?aO("Server Error: "+i):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):aO("Unknown control packet command: "+e)}}onHandshake_(t){const e=t.ts,i=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==i&&js("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,i),qw(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):qw(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(km.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class qB{put(t,e,i,r){}merge(t,e,i,r){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,i){}onDisconnectMerge(t,e,i){}onDisconnectCancel(t,e){}reportStats(t){}}class WB{constructor(t){this.allowedEvents_=t,this.listeners_={},(0,F.hu)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){const i=[...this.listeners_[t]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,e)}}on(t,e,i){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:i});const r=this.getInitialEvent(t);r&&e.apply(i,r)}off(t,e,i){this.validateEventType_(t);const r=this.listeners_[t]||[];for(let s=0;s<r.length;s++)if(r[s].callback===e&&(!i||i===r[s].context))return void r.splice(s,1)}validateEventType_(t){(0,F.hu)(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}}class MS extends WB{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,F.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new MS}getInitialEvent(t){return(0,F.hu)("online"===t,"Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}class Zn{constructor(t,e){if(void 0===e){this.pieces_=t.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"}}function Hn(){return new Zn("")}function dn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function uf(n){return n.pieces_.length-n.pieceNum_}function ci(n){let t=n.pieceNum_;return t<n.pieces_.length&&t++,new Zn(n.pieces_,t)}function _O(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Yw(n,t=0){return n.pieces_.slice(n.pieceNum_+t)}function KB(n){if(n.pieceNum_>=n.pieces_.length)return null;const t=[];for(let e=n.pieceNum_;e<n.pieces_.length-1;e++)t.push(n.pieces_[e]);return new Zn(t,0)}function Fi(n,t){const e=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)e.push(n.pieces_[i]);if(t instanceof Zn)for(let i=t.pieceNum_;i<t.pieces_.length;i++)e.push(t.pieces_[i]);else{const i=t.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&e.push(i[r])}return new Zn(e,0)}function hn(n){return n.pieceNum_>=n.pieces_.length}function mo(n,t){const e=dn(n),i=dn(t);if(null===e)return t;if(e===i)return mo(ci(n),ci(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+n+")")}function z6(n,t){const e=Yw(n,0),i=Yw(t,0);for(let r=0;r<e.length&&r<i.length;r++){const s=Om(e[r],i[r]);if(0!==s)return s}return e.length===i.length?0:e.length<i.length?-1:1}function vO(n,t){if(uf(n)!==uf(t))return!1;for(let e=n.pieceNum_,i=t.pieceNum_;e<=n.pieces_.length;e++,i++)if(n.pieces_[e]!==t.pieces_[i])return!1;return!0}function dl(n,t){let e=n.pieceNum_,i=t.pieceNum_;if(uf(n)>uf(t))return!1;for(;e<n.pieces_.length;){if(n.pieces_[e]!==t.pieces_[i])return!1;++e,++i}return!0}class $6{constructor(t,e){this.errorPrefix_=e,this.parts_=Yw(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=(0,F.ug)(this.parts_[i]);QB(this)}}function QB(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Pm(n))}function Pm(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class yO extends WB{constructor(){let t,e;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(e="visibilitychange",t="hidden"):void 0!==document.mozHidden?(e="mozvisibilitychange",t="mozHidden"):void 0!==document.msHidden?(e="msvisibilitychange",t="msHidden"):void 0!==document.webkitHidden&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{const i=!document[t];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new yO}getInitialEvent(t){return(0,F.hu)("visible"===t,"Unknown event type: "+t),[this.visible_]}}const Zw=1e3;let IS,Nm=(()=>{class n extends qB{constructor(e,i,r,s,l,d,p,_){if(super(),this.repoInfo_=e,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=l,this.authTokenProvider_=d,this.appCheckTokenProvider_=p,this.authOverride_=_,this.id=n.nextPersistentConnectionId_++,this.log_=zw("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Zw,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,_&&!(0,F.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");yO.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&MS.getInstance().on("online",this.onOnline_,this)}sendRequest(e,i,r){const s=++this.requestNumber_,l={r:s,a:e,b:i};this.log_((0,F.Pz)(l)),(0,F.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const i=new F.BH,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:d=>{const p=d.d;"ok"===d.s?i.resolve(p):i.reject(p)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const l=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const d=this.outstandingGets_[l];void 0===d||s!==d||(delete this.outstandingGets_[l],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+l+" timed out on connection"),i.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(l),i.promise}listen(e,i,r,s){this.initConnection_();const l=e._queryIdentifier,d=e._path.toString();this.log_("Listen called for "+d+" "+l),this.listens.has(d)||this.listens.set(d,new Map),(0,F.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,F.hu)(!this.listens.get(d).has(l),"listen() called twice for same path/queryId.");const p={onComplete:s,hashFn:i,query:e,tag:r};this.listens.get(d).set(l,p),this.connected_&&this.sendListen_(p)}sendGet_(e){const i=this.outstandingGets_[e];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(e){const i=e.query,r=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+r+" for "+s);const l={p:r};e.tag&&(l.q=i._queryObject,l.t=e.tag),l.h=e.hashFn(),this.sendRequest("q",l,p=>{const _=p.d,b=p.s;n.warnOnListenWarnings_(_,i),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",p),"ok"!==b&&this.removeListen_(r,s),e.onComplete&&e.onComplete(b,_))})}static warnOnListenWarnings_(e,i){if(e&&"object"==typeof e&&(0,F.r3)(e,"w")){const r=(0,F.DV)(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',l=i._path.toString();js(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||(0,F.GJ)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,i=(0,F.w9)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(i,r,s=>{const l=s.s,d=s.d||"error";this.authToken_===e&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const i=e.s,r=e.d||"error";"ok"===i?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(e,i){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),(0,F.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,i)}sendUnlisten_(e,i,r,s){this.log_("Unlisten on "+e+" for "+i);const l={p:e};s&&(l.q=r,l.t=s),this.sendRequest("n",l)}onDisconnectPut(e,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,i,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:i,onComplete:r})}onDisconnectMerge(e,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,i,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:i,onComplete:r})}onDisconnectCancel(e,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(e,i,r,s){const l={p:i,d:r};this.log_("onDisconnect "+e,l),this.sendRequest(e,l,d=>{s&&setTimeout(()=>{s(d.s,d.d)},Math.floor(0))})}put(e,i,r,s){this.putInternal("p",e,i,r,s)}merge(e,i,r,s){this.putInternal("m",e,i,r,s)}putInternal(e,i,r,s,l){this.initConnection_();const d={p:i,d:r};void 0!==l&&(d.h=l),this.outstandingPuts_.push({action:e,request:d,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+i)}sendPut_(e){const i=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(i,r,l=>{this.log_(i+" response",l),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(l.s,l.d)})}reportStats(e){if(this.connected_){const i={c:e};this.log_("reportStats",i),this.sendRequest("s",i,r=>{"ok"!==r.s&&this.log_("reportStats","Error sending stats: "+r.d)})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,F.Pz)(e));const i=e.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,i){this.log_("handleServerMessage",e,i),"d"===e?this.onDataUpdate_(i.p,i.d,!1,i.t):"m"===e?this.onDataUpdate_(i.p,i.d,!0,i.t):"c"===e?this.onListenRevoked_(i.p,i.q):"ac"===e?this.onAuthRevoked_(i.s,i.d):"apc"===e?this.onAppCheckRevoked_(i.s,i.d):"sd"===e?this.onSecurityDebugPacket_(i):aO("Unrecognized action received from server: "+(0,F.Pz)(e)+"\nAre you using the latest client?")}onReady_(e,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,F.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Zw,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Zw,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Zw),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-e);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var e=this;return(0,be.Z)(function*(){if(e.shouldReconnect_()){e.log_("Making a connection attempt"),e.lastConnectionAttemptTime_=(new Date).getTime(),e.lastConnectionEstablishedTime_=null;const i=e.onDataMessage_.bind(e),r=e.onReady_.bind(e),s=e.onRealtimeDisconnect_.bind(e),l=e.id+":"+n.nextConnectionId_++,d=e.lastSessionId;let p=!1,_=null;const b=function(){_?_.close():(p=!0,s())};e.realtime_={close:b,sendRequest:function(P){(0,F.hu)(_,"sendRequest call when we're not connected not allowed."),_.sendRequest(P)}};const I=e.forceTokenRefresh_;e.forceTokenRefresh_=!1;try{const[P,U]=yield Promise.all([e.authTokenProvider_.getToken(I),e.appCheckTokenProvider_.getToken(I)]);p?is("getToken() completed but was canceled"):(is("getToken() completed. Creating connection."),e.authToken_=P&&P.accessToken,e.appCheckToken_=U&&U.token,_=new $B(l,e.repoInfo_,e.applicationId_,e.appCheckToken_,e.authToken_,i,r,s,Q=>{js(Q+" ("+e.repoInfo_.toString()+")"),e.interrupt("server_kill")},d))}catch(P){e.log_("Failed to get token: "+P),p||(e.repoInfo_.nodeAdmin&&js(P),b())}}})()}interrupt(e){is("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){is("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,F.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Zw,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const i=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const i=this.outstandingPuts_[e];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,i){let r;r=i?i.map(l=>lO(l)).join("$"):"default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,i){const r=new Zn(e).toString();let s;if(this.listens.has(r)){const l=this.listens.get(r);s=l.get(i),l.delete(i),0===l.size&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,i){is("Auth token revoked: "+e+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===e||"permission_denied"===e)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,i){is("App check token revoked: "+e+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===e||"permission_denied"===e)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const i of e.values())this.sendListen_(i);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let i="js";(0,F.Yr)()&&(i=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+i+"."+sO.replace(/\./g,"-")]=1,(0,F.uI)()?e["framework.cordova"]=1:(0,F.b$)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=MS.getInstance().currentlyOnline();return(0,F.xb)(this.interruptReasons_)&&e}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class gn{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new gn(t,e)}}class TS{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){const i=new gn(vd,t),r=new gn(vd,e);return 0!==this.compare(i,r)}minPost(){return gn.MIN}}class eV extends TS{static get __EMPTY_NODE(){return IS}static set __EMPTY_NODE(t){IS=t}compare(t,e){return Om(t.name,e.name)}isDefinedOn(t){throw(0,F.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return gn.MIN}maxPost(){return new gn(ou,IS)}makePost(t,e){return(0,F.hu)("string"==typeof t,"KeyIndex indexValue must always be a string."),new gn(t,IS)}toString(){return".key"}}const au=new eV;class AS{constructor(t,e,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let l=1;for(;!t.isEmpty();)if(t=t,l=e?i(t.key,e):1,r&&(l*=-1),l<0)t=this.isReverse_?t.left:t.right;else{if(0===l){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}let wO,hc=(()=>{class n{constructor(e,i,r,s,l){this.key=e,this.value=i,this.color=null!=r?r:n.RED,this.left=null!=s?s:Vo.EMPTY_NODE,this.right=null!=l?l:Vo.EMPTY_NODE}copy(e,i,r,s,l){return new n(null!=e?e:this.key,null!=i?i:this.value,null!=r?r:this.color,null!=s?s:this.left,null!=l?l:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,r){let s=this;const l=r(e,s.key);return s=l<0?s.copy(null,null,null,s.left.insert(e,i,r),null):0===l?s.copy(null,i,null,null,null):s.copy(null,null,null,null,s.right.insert(e,i,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Vo.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,i){let r,s;if(r=this,i(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),0===i(e,r.key)){if(r.right.isEmpty())return Vo.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Vo{constructor(t,e=Vo.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new Vo(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,hc.BLACK,null,null))}remove(t){return new Vo(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,hc.BLACK,null,null))}get(t){let e,i=this.root_;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),0===e)return i.value;e<0?i=i.left:e>0&&(i=i.right)}return null}getPredecessorKey(t){let e,i=this.root_,r=null;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),0===e){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}e<0?i=i.left:e>0&&(r=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new AS(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new AS(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new AS(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new AS(this.root_,null,this.comparator_,!0,t)}}function eq(n,t){return Om(n.name,t.name)}function bO(n,t){return Om(n,t)}Vo.EMPTY_NODE=new class J6{copy(t,e,i,r,s){return this}insert(t,e,i){return new hc(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const tV=function(n){return"number"==typeof n?"number:"+bB(n):"string:"+n},nV=function(n){if(n.isLeafNode()){const t=n.val();(0,F.hu)("string"==typeof t||"number"==typeof t||"object"==typeof t&&(0,F.r3)(t,".sv"),"Priority must be a string or number.")}else(0,F.hu)(n===wO||n.isEmpty(),"priority of unexpected type.");(0,F.hu)(n===wO||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let iV,rV,sV,Sv=(()=>{class n{constructor(e,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=i,this.lazyHash_=null,(0,F.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),nV(this.priorityNode_)}static set __childrenNodeConstructor(e){iV=e}static get __childrenNodeConstructor(){return iV}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new n(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return hn(e)?this:".priority"===dn(e)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,i){return null}updateImmediateChild(e,i){return".priority"===e?this.updatePriority(i):i.isEmpty()&&".priority"!==e?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,i).updatePriority(this.priorityNode_)}updateChild(e,i){const r=dn(e);return null===r?i:i.isEmpty()&&".priority"!==r?this:((0,F.hu)(".priority"!==r||1===uf(e),".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(ci(e),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,i){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+tV(this.priorityNode_.val())+":");const i=typeof this.value_;e+=i+":",e+="number"===i?bB(this.value_):this.value_,this.lazyHash_=gB(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===n.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof n.__childrenNodeConstructor?-1:((0,F.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const i=typeof e.value_,r=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(i),l=n.VALUE_TYPE_ORDER.indexOf(r);return(0,F.hu)(s>=0,"Unknown leaf type: "+i),(0,F.hu)(l>=0,"Unknown leaf type: "+r),s===l?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:l-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const i=e;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const _i=new class rq extends TS{compare(t,e){const i=t.node.getPriority(),r=e.node.getPriority(),s=i.compareTo(r);return 0===s?Om(t.name,e.name):s}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return gn.MIN}maxPost(){return new gn(ou,new Sv("[PRIORITY-POST]",sV))}makePost(t,e){const i=rV(t);return new gn(e,new Sv("[PRIORITY-POST]",i))}toString(){return".priority"}},sq=Math.log(2);class oq{constructor(t){this.count=parseInt(Math.log(t+1)/sq,10),this.current_=this.count-1;const r=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=t+1&r}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const kS=function(n,t,e,i){n.sort(t);const r=function(p,_){const b=_-p;let D,I;if(0===b)return null;if(1===b)return D=n[p],I=e?e(D):D,new hc(I,D.node,hc.BLACK,null,null);{const P=parseInt(b/2,10)+p,U=r(p,P),Q=r(P+1,_);return D=n[P],I=e?e(D):D,new hc(I,D.node,hc.BLACK,U,Q)}},d=function(p){let _=null,b=null,D=n.length;const I=function(U,Q){const le=D-U,Ze=D;D-=U;const rt=r(le+1,Ze),at=n[le],et=e?e(at):at;P(new hc(et,at.node,Q,null,rt))},P=function(U){_?(_.left=U,_=U):(b=U,_=U)};for(let U=0;U<p.count;++U){const Q=p.nextBitIsOne(),le=Math.pow(2,p.count-(U+1));Q?I(le,hc.BLACK):(I(le,hc.BLACK),I(le,hc.RED))}return b}(new oq(n.length));return new Vo(i||t,d)};let CO;const Mv={};class yd{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return(0,F.hu)(Mv&&_i,"ChildrenNode.ts has not been loaded"),CO=CO||new yd({".priority":Mv},{".priority":_i}),CO}get(t){const e=(0,F.DV)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Vo?e:null}hasIndex(t){return(0,F.r3)(this.indexSet_,t.toString())}addIndex(t,e){(0,F.hu)(t!==au,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const s=e.getIterator(gn.Wrap);let d,l=s.getNext();for(;l;)r=r||t.isDefinedOn(l.node),i.push(l),l=s.getNext();d=r?kS(i,t.getCompare()):Mv;const p=t.toString(),_=Object.assign({},this.indexSet_);_[p]=t;const b=Object.assign({},this.indexes_);return b[p]=d,new yd(b,_)}addToIndexes(t,e){const i=(0,F.UI)(this.indexes_,(r,s)=>{const l=(0,F.DV)(this.indexSet_,s);if((0,F.hu)(l,"Missing index implementation for "+s),r===Mv){if(l.isDefinedOn(t.node)){const d=[],p=e.getIterator(gn.Wrap);let _=p.getNext();for(;_;)_.name!==t.name&&d.push(_),_=p.getNext();return d.push(t),kS(d,l.getCompare())}return Mv}{const d=e.get(t.name);let p=r;return d&&(p=p.remove(new gn(t.name,d))),p.insert(t,t.node)}});return new yd(i,this.indexSet_)}removeFromIndexes(t,e){const i=(0,F.UI)(this.indexes_,r=>{if(r===Mv)return r;{const s=e.get(t.name);return s?r.remove(new gn(t.name,s)):r}});return new yd(i,this.indexSet_)}}let Kw,rn=(()=>{class n{constructor(e,i,r){this.children_=e,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&nV(this.priorityNode_),this.children_.isEmpty()&&(0,F.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Kw||(Kw=new n(new Vo(bO),null,yd.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Kw}updatePriority(e){return this.children_.isEmpty()?this:new n(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const i=this.children_.get(e);return null===i?Kw:i}}getChild(e){const i=dn(e);return null===i?this:this.getImmediateChild(i).getChild(ci(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,i){if((0,F.hu)(i,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(i);{const r=new gn(e,i);let s,l;i.isEmpty()?(s=this.children_.remove(e),l=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,i),l=this.indexMap_.addToIndexes(r,this.children_));const d=s.isEmpty()?Kw:this.priorityNode_;return new n(s,d,l)}}updateChild(e,i){const r=dn(e);if(null===r)return i;{(0,F.hu)(".priority"!==dn(e)||1===uf(e),".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(ci(e),i);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const i={};let r=0,s=0,l=!0;if(this.forEachChild(_i,(d,p)=>{i[d]=p.val(e),r++,l&&n.INTEGER_REGEXP_.test(d)?s=Math.max(s,Number(d)):l=!1}),!e&&l&&s<2*r){const d=[];for(const p in i)d[p]=i[p];return d}return e&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+tV(this.getPriority().val())+":"),this.forEachChild(_i,(i,r)=>{const s=r.hash();""!==s&&(e+=":"+i+":"+s)}),this.lazyHash_=""===e?"":gB(e)}return this.lazyHash_}getPredecessorChildName(e,i,r){const s=this.resolveIndex_(r);if(s){const l=s.getPredecessorKey(new gn(e,i));return l?l.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const i=this.resolveIndex_(e);if(i){const r=i.minKey();return r&&r.name}return this.children_.minKey()}getFirstChild(e){const i=this.getFirstChildName(e);return i?new gn(i,this.children_.get(i)):null}getLastChildName(e){const i=this.resolveIndex_(e);if(i){const r=i.maxKey();return r&&r.name}return this.children_.maxKey()}getLastChild(e){const i=this.getLastChildName(e);return i?new gn(i,this.children_.get(i)):null}forEachChild(e,i){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,i){const r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,gn.Wrap);let l=s.peek();for(;null!=l&&i.compare(l,e)<0;)s.getNext(),l=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,i){const r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,gn.Wrap);let l=s.peek();for(;null!=l&&i.compare(l,e)>0;)s.getNext(),l=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Qw?-1:0}withIndex(e){if(e===au||this.indexMap_.hasIndex(e))return this;{const i=this.indexMap_.addIndex(e,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(e){return e===au||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const i=e;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){const r=this.getIterator(_i),s=i.getIterator(_i);let l=r.getNext(),d=s.getNext();for(;l&&d;){if(l.name!==d.name||!l.node.equals(d.node))return!1;l=r.getNext(),d=s.getNext()}return null===l&&null===d}return!1}return!1}}resolveIndex_(e){return e===au?null:this.indexMap_.get(e.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const Qw=new class aq extends rn{constructor(){super(new Vo(bO),rn.EMPTY_NODE,yd.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return rn.EMPTY_NODE}isEmpty(){return!1}};function qi(n,t=null){if(null===n)return rn.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(t=n[".priority"]),(0,F.hu)(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Sv(n,qi(t));if(n instanceof Array){let e=rn.EMPTY_NODE;return rs(n,(i,r)=>{if((0,F.r3)(n,i)&&"."!==i.substring(0,1)){const s=qi(r);(s.isLeafNode()||!s.isEmpty())&&(e=e.updateImmediateChild(i,s))}}),e.updatePriority(qi(t))}{const e=[];let i=!1;if(rs(n,(l,d)=>{if("."!==l.substring(0,1)){const p=qi(d);p.isEmpty()||(i=i||!p.getPriority().isEmpty(),e.push(new gn(l,p)))}}),0===e.length)return rn.EMPTY_NODE;const s=kS(e,eq,l=>l.name,bO);if(i){const l=kS(e,_i.getCompare());return new rn(s,qi(t),new yd({".priority":l},{".priority":_i}))}return new rn(s,qi(t),yd.Default)}}Object.defineProperties(gn,{MIN:{value:new gn(vd,rn.EMPTY_NODE)},MAX:{value:new gn(ou,Qw)}}),eV.__EMPTY_NODE=rn.EMPTY_NODE,Sv.__childrenNodeConstructor=rn,function tq(n){wO=n}(Qw),function iq(n){sV=n}(Qw),function nq(n){rV=n}(qi);class EO extends TS{constructor(t){super(),this.indexPath_=t,(0,F.hu)(!hn(t)&&".priority"!==dn(t),"Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){const i=this.extractChild(t.node),r=this.extractChild(e.node),s=i.compareTo(r);return 0===s?Om(t.name,e.name):s}makePost(t,e){const i=qi(t),r=rn.EMPTY_NODE.updateChild(this.indexPath_,i);return new gn(e,r)}maxPost(){const t=rn.EMPTY_NODE.updateChild(this.indexPath_,Qw);return new gn(ou,t)}toString(){return Yw(this.indexPath_,0).join("/")}}const DO=new class cq extends TS{compare(t,e){const i=t.node.compareTo(e.node);return 0===i?Om(t.name,e.name):i}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return gn.MIN}maxPost(){return gn.MAX}makePost(t,e){const i=qi(t);return new gn(e,i)}toString(){return".value"}},Tv="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",uq=function(){let n=0;const t=[];return function(e){const i=e===n;let r;n=e;const s=new Array(8);for(r=7;r>=0;r--)s[r]=Tv.charAt(e%64),e=Math.floor(e/64);(0,F.hu)(0===e,"Cannot push at time == 0");let l=s.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)l+=Tv.charAt(t[r]);return(0,F.hu)(20===l.length,"nextPushId: Length should be 20."),l}}(),lV=function(n){if(n===""+cO)return"-";const t=DS(n);if(null!=t)return""+(t+1);const e=new Array(n.length);for(let l=0;l<e.length;l++)e[l]=n.charAt(l);if(e.length<786)return e.push("-"),e.join("");let i=e.length-1;for(;i>=0&&"z"===e[i];)i--;if(-1===i)return ou;const s=Tv.charAt(Tv.indexOf(e[i])+1);return e[i]=s,e.slice(0,i+1).join("")},cV=function(n){if(n===""+wB)return vd;const t=DS(n);if(null!=t)return""+(t-1);const e=new Array(n.length);for(let i=0;i<e.length;i++)e[i]=n.charAt(i);return"-"===e[e.length-1]?1===e.length?""+cO:(delete e[e.length-1],e.join("")):(e[e.length-1]=Tv.charAt(Tv.indexOf(e[e.length-1])-1),e.join("")+"z".repeat(786-e.length))};function uV(n){return{type:"value",snapshotNode:n}}function Iv(n,t){return{type:"child_added",snapshotNode:t,childName:n}}function Xw(n,t){return{type:"child_removed",snapshotNode:t,childName:n}}function Jw(n,t,e){return{type:"child_changed",snapshotNode:t,childName:n,oldSnap:e}}class SO{constructor(t){this.index_=t}updateChild(t,e,i,r,s,l){(0,F.hu)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const d=t.getImmediateChild(e);return d.getChild(r).equals(i.getChild(r))&&d.isEmpty()===i.isEmpty()||(null!=l&&(i.isEmpty()?t.hasChild(e)?l.trackChildChange(Xw(e,d)):(0,F.hu)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):d.isEmpty()?l.trackChildChange(Iv(e,i)):l.trackChildChange(Jw(e,i,d))),t.isLeafNode()&&i.isEmpty())?t:t.updateImmediateChild(e,i).withIndex(this.index_)}updateFullNode(t,e,i){return null!=i&&(t.isLeafNode()||t.forEachChild(_i,(r,s)=>{e.hasChild(r)||i.trackChildChange(Xw(r,s))}),e.isLeafNode()||e.forEachChild(_i,(r,s)=>{if(t.hasChild(r)){const l=t.getImmediateChild(r);l.equals(s)||i.trackChildChange(Jw(r,s,l))}else i.trackChildChange(Iv(r,s))})),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?rn.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class eC{constructor(t){this.indexedFilter_=new SO(t.getIndex()),this.index_=t.getIndex(),this.startPost_=eC.getStartPost_(t),this.endPost_=eC.getEndPost_(t)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0}updateChild(t,e,i,r,s,l){return this.matches(new gn(e,i))||(i=rn.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,i,r,s,l)}updateFullNode(t,e,i){e.isLeafNode()&&(e=rn.EMPTY_NODE);let r=e.withIndex(this.index_);r=r.updatePriority(rn.EMPTY_NODE);const s=this;return e.forEachChild(_i,(l,d)=>{s.matches(new gn(l,d))||(r=r.updateImmediateChild(l,rn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()}}class hq{constructor(t){this.rangedFilter_=new eC(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}updateChild(t,e,i,r,s,l){return this.rangedFilter_.matches(new gn(e,i))||(i=rn.EMPTY_NODE),t.getImmediateChild(e).equals(i)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,i,r,s,l):this.fullLimitUpdateChild_(t,e,i,s,l)}updateFullNode(t,e,i){let r;if(e.isLeafNode()||e.isEmpty())r=rn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){let s;r=rn.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;s.hasNext()&&l<this.limit_;){const d=s.getNext();let p;if(p=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),d)<=0:this.index_.compare(d,this.rangedFilter_.getEndPost())<=0,!p)break;r=r.updateImmediateChild(d.name,d.node),l++}}else{let s,l,d,p;if(r=e.withIndex(this.index_),r=r.updatePriority(rn.EMPTY_NODE),this.reverse_){p=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),l=this.rangedFilter_.getStartPost();const D=this.index_.getCompare();d=(I,P)=>D(P,I)}else p=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),l=this.rangedFilter_.getEndPost(),d=this.index_.getCompare();let _=0,b=!1;for(;p.hasNext();){const D=p.getNext();!b&&d(s,D)<=0&&(b=!0),b&&_<this.limit_&&d(D,l)<=0?_++:r=r.updateImmediateChild(D.name,rn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,i,r,s){let l;if(this.reverse_){const D=this.index_.getCompare();l=(I,P)=>D(P,I)}else l=this.index_.getCompare();const d=t;(0,F.hu)(d.numChildren()===this.limit_,"");const p=new gn(e,i),_=this.reverse_?d.getFirstChild(this.index_):d.getLastChild(this.index_),b=this.rangedFilter_.matches(p);if(d.hasChild(e)){const D=d.getImmediateChild(e);let I=r.getChildAfterChild(this.index_,_,this.reverse_);for(;null!=I&&(I.name===e||d.hasChild(I.name));)I=r.getChildAfterChild(this.index_,I,this.reverse_);const P=null==I?1:l(I,p);if(b&&!i.isEmpty()&&P>=0)return null!=s&&s.trackChildChange(Jw(e,i,D)),d.updateImmediateChild(e,i);{null!=s&&s.trackChildChange(Xw(e,D));const Q=d.updateImmediateChild(e,rn.EMPTY_NODE);return null!=I&&this.rangedFilter_.matches(I)?(null!=s&&s.trackChildChange(Iv(I.name,I.node)),Q.updateImmediateChild(I.name,I.node)):Q}}return i.isEmpty()?t:b&&l(_,p)>=0?(null!=s&&(s.trackChildChange(Xw(_.name,_.node)),s.trackChildChange(Iv(e,i))),d.updateImmediateChild(e,i).updateImmediateChild(_.name,rn.EMPTY_NODE)):t}}class RS{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=_i}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,F.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,F.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:vd}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,F.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,F.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ou}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,F.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===_i}copy(){const t=new RS;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function MO(n,t,e){const i=n.copy();return i.startSet_=!0,void 0===t&&(t=null),i.indexStartValue_=t,null!=e?(i.startNameSet_=!0,i.indexStartName_=e):(i.startNameSet_=!1,i.indexStartName_=""),i}function TO(n,t,e){const i=n.copy();return i.endSet_=!0,void 0===t&&(t=null),i.indexEndValue_=t,void 0!==e?(i.endNameSet_=!0,i.indexEndName_=e):(i.endNameSet_=!1,i.indexEndName_=""),i}function OS(n,t){const e=n.copy();return e.index_=t,e}function dV(n){const t={};if(n.isDefault())return t;let e;return n.index_===_i?e="$priority":n.index_===DO?e="$value":n.index_===au?e="$key":((0,F.hu)(n.index_ instanceof EO,"Unrecognized index type!"),e=n.index_.toString()),t.orderBy=(0,F.Pz)(e),n.startSet_&&(t.startAt=(0,F.Pz)(n.indexStartValue_),n.startNameSet_&&(t.startAt+=","+(0,F.Pz)(n.indexStartName_))),n.endSet_&&(t.endAt=(0,F.Pz)(n.indexEndValue_),n.endNameSet_&&(t.endAt+=","+(0,F.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?t.limitToFirst=n.limit_:t.limitToLast=n.limit_),t}function hV(n){const t={};if(n.startSet_&&(t.sp=n.indexStartValue_,n.startNameSet_&&(t.sn=n.indexStartName_)),n.endSet_&&(t.ep=n.indexEndValue_,n.endNameSet_&&(t.en=n.indexEndName_)),n.limitSet_){t.l=n.limit_;let e=n.viewFrom_;""===e&&(e=n.isViewFromLeft()?"l":"r"),t.vf=e}return n.index_!==_i&&(t.i=n.index_.toString()),t}class PS extends qB{constructor(t,e,i,r){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=zw("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return void 0!==e?"tag$"+e:((0,F.hu)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,e,i,r){const s=t._path.toString();this.log_("Listen called for "+s+" "+t._queryIdentifier);const l=PS.getListenId_(t,i),d={};this.listens_[l]=d;const p=dV(t._queryParams);this.restRequest_(s+".json",p,(_,b)=>{let D=b;if(404===_&&(D=null,_=null),null===_&&this.onDataUpdate_(s,D,!1,i),(0,F.DV)(this.listens_,l)===d){let I;I=_?401===_?"permission_denied":"rest_error:"+_:"ok",r(I,null)}})}unlisten(t,e){const i=PS.getListenId_(t,e);delete this.listens_[i]}get(t){const e=dV(t._queryParams),i=t._path.toString(),r=new F.BH;return this.restRequest_(i+".json",e,(s,l)=>{let d=l;404===s&&(d=null,s=null),null===s?(this.onDataUpdate_(i,d,!1,null),r.resolve(d)):r.reject(new Error(d))}),r.promise}refreshAuthToken(t){}restRequest_(t,e={},i){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(e.auth=r.accessToken),s&&s.token&&(e.ac=s.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+(0,F.xO)(e);this.log_("Sending REST request for "+l);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(i&&4===d.readyState){this.log_("REST Response for "+l+" received. status:",d.status,"response:",d.responseText);let p=null;if(d.status>=200&&d.status<300){try{p=(0,F.cI)(d.responseText)}catch(_){js("Failed to parse JSON response for "+l+": "+d.responseText)}i(null,p)}else 401!==d.status&&404!==d.status&&js("Got unsuccessful REST response for "+l+" Status: "+d.status),i(d.status);i=null}},d.open("GET",l,!0),d.send()})}}class vq{constructor(){this.rootNode_=rn.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}}function NS(){return{value:null,children:new Map}}function Av(n,t,e){if(hn(t))n.value=e,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(t,e);else{const i=dn(t);n.children.has(i)||n.children.set(i,NS()),Av(n.children.get(i),t=ci(t),e)}}function IO(n,t){if(hn(t))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const e=n.value;return n.value=null,e.forEachChild(_i,(i,r)=>{Av(n,new Zn(i),r)}),IO(n,t)}}if(n.children.size>0){const e=dn(t);return t=ci(t),n.children.has(e)&&IO(n.children.get(e),t)&&n.children.delete(e),0===n.children.size}return!0}function AO(n,t,e){null!==n.value?e(t,n.value):function yq(n,t){n.children.forEach((e,i)=>{t(i,e)})}(n,(i,r)=>{AO(r,new Zn(t.toString()+"/"+i),e)})}class bq{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),e=Object.assign({},t);return this.last_&&rs(this.last_,(i,r)=>{e[i]=e[i]-r}),this.last_=t,e}}class Eq{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new bq(t);const i=1e4+2e4*Math.random();qw(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const t=this.statsListener_.get(),e={};let i=!1;rs(t,(r,s)=>{s>0&&(0,F.r3)(this.statsToReport_,r)&&(e[r]=s,i=!0)}),i&&this.server_.reportStats(e),qw(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var hl=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(hl||(hl={})),hl))();function OO(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class FS{constructor(t,e,i){this.path=t,this.affectedTree=e,this.revert=i,this.type=hl.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(t){if(hn(this.path)){if(null!=this.affectedTree.value)return(0,F.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new Zn(t));return new FS(Hn(),e,this.revert)}}return(0,F.hu)(dn(this.path)===t,"operationForChild called for unrelated child."),new FS(ci(this.path),this.affectedTree,this.revert)}}class tC{constructor(t,e){this.source=t,this.path=e,this.type=hl.LISTEN_COMPLETE}operationForChild(t){return hn(this.path)?new tC(this.source,Hn()):new tC(this.source,ci(this.path))}}class Fm{constructor(t,e,i){this.source=t,this.path=e,this.snap=i,this.type=hl.OVERWRITE}operationForChild(t){return hn(this.path)?new Fm(this.source,Hn(),this.snap.getImmediateChild(t)):new Fm(this.source,ci(this.path),this.snap)}}class kv{constructor(t,e,i){this.source=t,this.path=e,this.children=i,this.type=hl.MERGE}operationForChild(t){if(hn(this.path)){const e=this.children.subtree(new Zn(t));return e.isEmpty()?null:e.value?new Fm(this.source,Hn(),e.value):new kv(this.source,Hn(),e)}return(0,F.hu)(dn(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new kv(this.source,ci(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class df{constructor(t,e,i){this.node_=t,this.fullyInitialized_=e,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(hn(t))return this.isFullyInitialized()&&!this.filtered_;const e=dn(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}class Dq{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function nC(n,t,e,i,r,s){const l=i.filter(d=>d.type===e);l.sort((d,p)=>function Mq(n,t,e){if(null==t.childName||null==e.childName)throw(0,F.g5)("Should only compare child_ events.");const i=new gn(t.childName,t.snapshotNode),r=new gn(e.childName,e.snapshotNode);return n.index_.compare(i,r)}(n,d,p)),l.forEach(d=>{const p=function Sq(n,t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,n.index_)),t}(n,d,s);r.forEach(_=>{_.respondsTo(d.type)&&t.push(_.createEvent(p,n.query_))})})}function LS(n,t){return{eventCache:n,serverCache:t}}function iC(n,t,e,i){return LS(new df(t,e,i),n.serverCache)}function pV(n,t,e,i){return LS(n.eventCache,new df(t,e,i))}function BS(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Lm(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let PO;class vi{constructor(t,e=(()=>(PO||(PO=new Vo(d6)),PO))()){this.value=t,this.children=e}static fromObject(t){let e=new vi(null);return rs(t,(i,r)=>{e=e.set(new Zn(i),r)}),e}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(null!=this.value&&e(this.value))return{path:Hn(),value:this.value};if(hn(t))return null;{const i=dn(t),r=this.children.get(i);if(null!==r){const s=r.findRootMostMatchingPathAndValue(ci(t),e);return null!=s?{path:Fi(new Zn(i),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(hn(t))return this;{const e=dn(t),i=this.children.get(e);return null!==i?i.subtree(ci(t)):new vi(null)}}set(t,e){if(hn(t))return new vi(e,this.children);{const i=dn(t),s=(this.children.get(i)||new vi(null)).set(ci(t),e),l=this.children.insert(i,s);return new vi(this.value,l)}}remove(t){if(hn(t))return this.children.isEmpty()?new vi(null):new vi(null,this.children);{const e=dn(t),i=this.children.get(e);if(i){const r=i.remove(ci(t));let s;return s=r.isEmpty()?this.children.remove(e):this.children.insert(e,r),null===this.value&&s.isEmpty()?new vi(null):new vi(this.value,s)}return this}}get(t){if(hn(t))return this.value;{const e=dn(t),i=this.children.get(e);return i?i.get(ci(t)):null}}setTree(t,e){if(hn(t))return e;{const i=dn(t),s=(this.children.get(i)||new vi(null)).setTree(ci(t),e);let l;return l=s.isEmpty()?this.children.remove(i):this.children.insert(i,s),new vi(this.value,l)}}fold(t){return this.fold_(Hn(),t)}fold_(t,e){const i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(Fi(t,r),e)}),e(t,this.value,i)}findOnPath(t,e){return this.findOnPath_(t,Hn(),e)}findOnPath_(t,e,i){const r=!!this.value&&i(e,this.value);if(r)return r;if(hn(t))return null;{const s=dn(t),l=this.children.get(s);return l?l.findOnPath_(ci(t),Fi(e,s),i):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,Hn(),e)}foreachOnPath_(t,e,i){if(hn(t))return this;{this.value&&i(e,this.value);const r=dn(t),s=this.children.get(r);return s?s.foreachOnPath_(ci(t),Fi(e,r),i):new vi(null)}}foreach(t){this.foreach_(Hn(),t)}foreach_(t,e){this.children.inorderTraversal((i,r)=>{r.foreach_(Fi(t,i),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,i)=>{i.value&&t(e,i.value)})}}class fc{constructor(t){this.writeTree_=t}static empty(){return new fc(new vi(null))}}function rC(n,t,e){if(hn(t))return new fc(new vi(e));{const i=n.writeTree_.findRootMostValueAndPath(t);if(null!=i){const r=i.path;let s=i.value;const l=mo(r,t);return s=s.updateChild(l,e),new fc(n.writeTree_.set(r,s))}{const r=new vi(e),s=n.writeTree_.setTree(t,r);return new fc(s)}}}function NO(n,t,e){let i=n;return rs(e,(r,s)=>{i=rC(i,Fi(t,r),s)}),i}function mV(n,t){if(hn(t))return fc.empty();{const e=n.writeTree_.setTree(t,new vi(null));return new fc(e)}}function FO(n,t){return null!=Bm(n,t)}function Bm(n,t){const e=n.writeTree_.findRootMostValueAndPath(t);return null!=e?n.writeTree_.get(e.path).getChild(mo(e.path,t)):null}function gV(n){const t=[],e=n.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(_i,(i,r)=>{t.push(new gn(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{null!=r.value&&t.push(new gn(i,r.value))}),t}function hf(n,t){if(hn(t))return n;{const e=Bm(n,t);return new fc(null!=e?new vi(e):n.writeTree_.subtree(t))}}function LO(n){return n.writeTree_.isEmpty()}function Rv(n,t){return _V(Hn(),n.writeTree_,t)}function _V(n,t,e){if(null!=t.value)return e.updateChild(n,t.value);{let i=null;return t.children.inorderTraversal((r,s)=>{".priority"===r?((0,F.hu)(null!==s.value,"Priority writes must always be leaf nodes"),i=s.value):e=_V(Fi(n,r),s,e)}),!e.getChild(n).isEmpty()&&null!==i&&(e=e.updateChild(Fi(n,".priority"),i)),e}}function VS(n,t){return CV(t,n)}function Oq(n,t){if(n.snap)return dl(n.path,t);for(const e in n.children)if(n.children.hasOwnProperty(e)&&dl(Fi(n.path,e),t))return!0;return!1}function Nq(n){return n.visible}function vV(n,t,e){let i=fc.empty();for(let r=0;r<n.length;++r){const s=n[r];if(t(s)){const l=s.path;let d;if(s.snap)dl(e,l)?(d=mo(e,l),i=rC(i,d,s.snap)):dl(l,e)&&(d=mo(l,e),i=rC(i,Hn(),s.snap.getChild(d)));else{if(!s.children)throw(0,F.g5)("WriteRecord should have .snap or .children");if(dl(e,l))d=mo(e,l),i=NO(i,d,s.children);else if(dl(l,e))if(d=mo(l,e),hn(d))i=NO(i,Hn(),s.children);else{const p=(0,F.DV)(s.children,dn(d));if(p){const _=p.getChild(ci(d));i=rC(i,Hn(),_)}}}}}return i}function yV(n,t,e,i,r){if(i||r){const s=hf(n.visibleWrites,t);return!r&&LO(s)?e:r||null!=e||FO(s,Hn())?Rv(vV(n.allWrites,function(_){return(_.visible||r)&&(!i||!~i.indexOf(_.writeId))&&(dl(_.path,t)||dl(t,_.path))},t),e||rn.EMPTY_NODE):null}{const s=Bm(n.visibleWrites,t);if(null!=s)return s;{const l=hf(n.visibleWrites,t);return LO(l)?e:null!=e||FO(l,Hn())?Rv(l,e||rn.EMPTY_NODE):null}}}function US(n,t,e,i){return yV(n.writeTree,n.treePath,t,e,i)}function BO(n,t){return function Fq(n,t,e){let i=rn.EMPTY_NODE;const r=Bm(n.visibleWrites,t);if(r)return r.isLeafNode()||r.forEachChild(_i,(s,l)=>{i=i.updateImmediateChild(s,l)}),i;if(e){const s=hf(n.visibleWrites,t);return e.forEachChild(_i,(l,d)=>{const p=Rv(hf(s,new Zn(l)),d);i=i.updateImmediateChild(l,p)}),gV(s).forEach(l=>{i=i.updateImmediateChild(l.name,l.node)}),i}return gV(hf(n.visibleWrites,t)).forEach(l=>{i=i.updateImmediateChild(l.name,l.node)}),i}(n.writeTree,n.treePath,t)}function bV(n,t,e,i){return function Lq(n,t,e,i,r){(0,F.hu)(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=Fi(t,e);if(FO(n.visibleWrites,s))return null;{const l=hf(n.visibleWrites,s);return LO(l)?r.getChild(e):Rv(l,r.getChild(e))}}(n.writeTree,n.treePath,t,e,i)}function HS(n,t){return function Vq(n,t){return Bm(n.visibleWrites,t)}(n.writeTree,Fi(n.treePath,t))}function VO(n,t,e){return function Bq(n,t,e,i){const r=Fi(t,e),s=Bm(n.visibleWrites,r);return null!=s?s:i.isCompleteForChild(e)?Rv(hf(n.visibleWrites,r),i.getNode().getImmediateChild(e)):null}(n.writeTree,n.treePath,t,e)}function wV(n,t){return CV(Fi(n.treePath,t),n.writeTree)}function CV(n,t){return{treePath:n,writeTree:t}}class Gq{constructor(){this.changeMap=new Map}trackChildChange(t){const e=t.type,i=t.childName;(0,F.hu)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,F.hu)(".priority"!==i,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const s=r.type;if("child_added"===e&&"child_removed"===s)this.changeMap.set(i,Jw(i,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===s)this.changeMap.delete(i);else if("child_removed"===e&&"child_changed"===s)this.changeMap.set(i,Xw(i,r.oldSnap));else if("child_changed"===e&&"child_added"===s)this.changeMap.set(i,Iv(i,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==s)throw(0,F.g5)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(i,Jw(i,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(i,t)}getChanges(){return Array.from(this.changeMap.values())}}const EV=new class zq{getCompleteChild(t){return null}getChildAfterChild(t,e,i){return null}};class UO{constructor(t,e,i=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=i}getCompleteChild(t){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{const i=null!=this.optCompleteServerCache_?new df(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return VO(this.writes_,t,i)}}getChildAfterChild(t,e,i){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Lm(this.viewCache_),s=function jq(n,t,e,i,r,s){return function Uq(n,t,e,i,r,s,l){let d;const p=hf(n.visibleWrites,t),_=Bm(p,Hn());if(null!=_)d=_;else{if(null==e)return[];d=Rv(p,e)}if(d=d.withIndex(l),d.isEmpty()||d.isLeafNode())return[];{const b=[],D=l.getCompare(),I=s?d.getReverseIteratorFrom(i,l):d.getIteratorFrom(i,l);let P=I.getNext();for(;P&&b.length<r;)0!==D(P,i)&&b.push(P),P=I.getNext();return b}}(n.writeTree,n.treePath,t,e,i,r,s)}(this.writes_,r,e,1,i,t);return 0===s.length?null:s[0]}}function DV(n,t,e,i,r,s){const l=t.eventCache;if(null!=HS(i,e))return t;{let d,p;if(hn(e))if((0,F.hu)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const _=Lm(t),D=BO(i,_ instanceof rn?_:rn.EMPTY_NODE);d=n.filter.updateFullNode(t.eventCache.getNode(),D,s)}else{const _=US(i,Lm(t));d=n.filter.updateFullNode(t.eventCache.getNode(),_,s)}else{const _=dn(e);if(".priority"===_){(0,F.hu)(1===uf(e),"Can't have a priority with additional path components");const b=l.getNode();p=t.serverCache.getNode();const D=bV(i,e,b,p);d=null!=D?n.filter.updatePriority(b,D):l.getNode()}else{const b=ci(e);let D;if(l.isCompleteForChild(_)){p=t.serverCache.getNode();const I=bV(i,e,l.getNode(),p);D=null!=I?l.getNode().getImmediateChild(_).updateChild(b,I):l.getNode().getImmediateChild(_)}else D=VO(i,_,t.serverCache);d=null!=D?n.filter.updateChild(l.getNode(),_,D,b,r,s):l.getNode()}}return iC(t,d,l.isFullyInitialized()||hn(e),n.filter.filtersNodes())}}function jS(n,t,e,i,r,s,l,d){const p=t.serverCache;let _;const b=l?n.filter:n.filter.getIndexedFilter();if(hn(e))_=b.updateFullNode(p.getNode(),i,null);else if(b.filtersNodes()&&!p.isFiltered()){const P=p.getNode().updateChild(e,i);_=b.updateFullNode(p.getNode(),P,null)}else{const P=dn(e);if(!p.isCompleteForPath(e)&&uf(e)>1)return t;const U=ci(e),le=p.getNode().getImmediateChild(P).updateChild(U,i);_=".priority"===P?b.updatePriority(p.getNode(),le):b.updateChild(p.getNode(),P,le,U,EV,null)}const D=pV(t,_,p.isFullyInitialized()||hn(e),b.filtersNodes());return DV(n,D,e,r,new UO(r,D,s),d)}function HO(n,t,e,i,r,s,l){const d=t.eventCache;let p,_;const b=new UO(r,t,s);if(hn(e))_=n.filter.updateFullNode(t.eventCache.getNode(),i,l),p=iC(t,_,!0,n.filter.filtersNodes());else{const D=dn(e);if(".priority"===D)_=n.filter.updatePriority(t.eventCache.getNode(),i),p=iC(t,_,d.isFullyInitialized(),d.isFiltered());else{const I=ci(e),P=d.getNode().getImmediateChild(D);let U;if(hn(I))U=i;else{const Q=b.getCompleteChild(D);U=null!=Q?".priority"===_O(I)&&Q.getChild(KB(I)).isEmpty()?Q:Q.updateChild(I,i):rn.EMPTY_NODE}p=P.equals(U)?t:iC(t,n.filter.updateChild(d.getNode(),D,U,I,b,l),d.isFullyInitialized(),n.filter.filtersNodes())}}return p}function xV(n,t){return n.eventCache.isCompleteForChild(t)}function SV(n,t,e){return e.foreach((i,r)=>{t=t.updateChild(i,r)}),t}function jO(n,t,e,i,r,s,l,d){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let _,p=t;_=hn(e)?i:new vi(null).setTree(e,i);const b=t.serverCache.getNode();return _.children.inorderTraversal((D,I)=>{if(b.hasChild(D)){const U=SV(0,t.serverCache.getNode().getImmediateChild(D),I);p=jS(n,p,new Zn(D),U,r,s,l,d)}}),_.children.inorderTraversal((D,I)=>{const P=!t.serverCache.isCompleteForChild(D)&&void 0===I.value;if(!b.hasChild(D)&&!P){const Q=SV(0,t.serverCache.getNode().getImmediateChild(D),I);p=jS(n,p,new Zn(D),Q,r,s,l,d)}}),p}class Jq{constructor(t,e){this.query_=t,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new SO(i.getIndex()),s=function fq(n){return n.loadsAllData()?new SO(n.getIndex()):n.hasLimit()?new hq(n):new eC(n)}(i);this.processor_=function $q(n){return{filter:n}}(s);const l=e.serverCache,d=e.eventCache,p=r.updateFullNode(rn.EMPTY_NODE,l.getNode(),null),_=s.updateFullNode(rn.EMPTY_NODE,d.getNode(),null),b=new df(p,l.isFullyInitialized(),r.filtersNodes()),D=new df(_,d.isFullyInitialized(),s.filtersNodes());this.viewCache_=LS(D,b),this.eventGenerator_=new Dq(this.query_)}get query(){return this.query_}}function n5(n,t){const e=Lm(n.viewCache_);return e&&(n.query._queryParams.loadsAllData()||!hn(t)&&!e.getImmediateChild(dn(t)).isEmpty())?e.getChild(t):null}function MV(n){return 0===n.eventRegistrations_.length}function TV(n,t,e){const i=[];if(e){(0,F.hu)(null==t,"A cancel should cancel all event registrations.");const r=n.query._path;n.eventRegistrations_.forEach(s=>{const l=s.createCancelEvent(e,r);l&&i.push(l)})}if(t){let r=[];for(let s=0;s<n.eventRegistrations_.length;++s){const l=n.eventRegistrations_[s];if(l.matches(t)){if(t.hasAnyCallback()){r=r.concat(n.eventRegistrations_.slice(s+1));break}}else r.push(l)}n.eventRegistrations_=r}else n.eventRegistrations_=[];return i}function IV(n,t,e,i){t.type===hl.MERGE&&null!==t.source.queryId&&((0,F.hu)(Lm(n.viewCache_),"We should always have a full cache before handling merges"),(0,F.hu)(BS(n.viewCache_),"Missing event cache, even though we have a server cache"));const r=n.viewCache_,s=function Wq(n,t,e,i,r){const s=new Gq;let l,d;if(e.type===hl.OVERWRITE){const _=e;_.source.fromUser?l=HO(n,t,_.path,_.snap,i,r,s):((0,F.hu)(_.source.fromServer,"Unknown source."),d=_.source.tagged||t.serverCache.isFiltered()&&!hn(_.path),l=jS(n,t,_.path,_.snap,i,r,d,s))}else if(e.type===hl.MERGE){const _=e;_.source.fromUser?l=function Zq(n,t,e,i,r,s,l){let d=t;return i.foreach((p,_)=>{const b=Fi(e,p);xV(t,dn(b))&&(d=HO(n,d,b,_,r,s,l))}),i.foreach((p,_)=>{const b=Fi(e,p);xV(t,dn(b))||(d=HO(n,d,b,_,r,s,l))}),d}(n,t,_.path,_.children,i,r,s):((0,F.hu)(_.source.fromServer,"Unknown source."),d=_.source.tagged||t.serverCache.isFiltered(),l=jO(n,t,_.path,_.children,i,r,d,s))}else if(e.type===hl.ACK_USER_WRITE){const _=e;l=_.revert?function Xq(n,t,e,i,r,s){let l;if(null!=HS(i,e))return t;{const d=new UO(i,t,r),p=t.eventCache.getNode();let _;if(hn(e)||".priority"===dn(e)){let b;if(t.serverCache.isFullyInitialized())b=US(i,Lm(t));else{const D=t.serverCache.getNode();(0,F.hu)(D instanceof rn,"serverChildren would be complete if leaf node"),b=BO(i,D)}b=b,_=n.filter.updateFullNode(p,b,s)}else{const b=dn(e);let D=VO(i,b,t.serverCache);null==D&&t.serverCache.isCompleteForChild(b)&&(D=p.getImmediateChild(b)),_=null!=D?n.filter.updateChild(p,b,D,ci(e),d,s):t.eventCache.getNode().hasChild(b)?n.filter.updateChild(p,b,rn.EMPTY_NODE,ci(e),d,s):p,_.isEmpty()&&t.serverCache.isFullyInitialized()&&(l=US(i,Lm(t)),l.isLeafNode()&&(_=n.filter.updateFullNode(_,l,s)))}return l=t.serverCache.isFullyInitialized()||null!=HS(i,Hn()),iC(t,_,l,n.filter.filtersNodes())}}(n,t,_.path,i,r,s):function Kq(n,t,e,i,r,s,l){if(null!=HS(r,e))return t;const d=t.serverCache.isFiltered(),p=t.serverCache;if(null!=i.value){if(hn(e)&&p.isFullyInitialized()||p.isCompleteForPath(e))return jS(n,t,e,p.getNode().getChild(e),r,s,d,l);if(hn(e)){let _=new vi(null);return p.getNode().forEachChild(au,(b,D)=>{_=_.set(new Zn(b),D)}),jO(n,t,e,_,r,s,d,l)}return t}{let _=new vi(null);return i.foreach((b,D)=>{const I=Fi(e,b);p.isCompleteForPath(I)&&(_=_.set(b,p.getNode().getChild(I)))}),jO(n,t,e,_,r,s,d,l)}}(n,t,_.path,_.affectedTree,i,r,s)}else{if(e.type!==hl.LISTEN_COMPLETE)throw(0,F.g5)("Unknown operation type: "+e.type);l=function Qq(n,t,e,i,r){const s=t.serverCache;return DV(n,pV(t,s.getNode(),s.isFullyInitialized()||hn(e),s.isFiltered()),e,i,EV,r)}(n,t,e.path,i,s)}const p=s.getChanges();return function Yq(n,t,e){const i=t.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=BS(n);(e.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&e.push(uV(BS(t)))}}(t,l,p),{viewCache:l,changes:p}}(n.processor_,r,t,e,i);return function qq(n,t){(0,F.hu)(t.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,F.hu)(t.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,F.hu)(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,AV(n,s.changes,s.viewCache.eventCache.getNode(),null)}function AV(n,t,e,i){return function xq(n,t,e,i){const r=[],s=[];return t.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&s.push(function dq(n,t){return{type:"child_moved",snapshotNode:t,childName:n}}(l.childName,l.snapshotNode))}),nC(n,r,"child_removed",t,i,e),nC(n,r,"child_added",t,i,e),nC(n,r,"child_moved",s,i,e),nC(n,r,"child_changed",t,i,e),nC(n,r,"value",t,i,e),r}(n.eventGenerator_,t,e,i?[i]:n.eventRegistrations_)}let GS,$S;class kV{constructor(){this.views=new Map}}function GO(n,t,e,i){const r=t.source.queryId;if(null!==r){const s=n.views.get(r);return(0,F.hu)(null!=s,"SyncTree gave us an op for an invalid query."),IV(s,t,e,i)}{let s=[];for(const l of n.views.values())s=s.concat(IV(l,t,e,i));return s}}function zO(n,t,e,i,r){const l=n.views.get(t._queryIdentifier);if(!l){let d=US(e,r?i:null),p=!1;d?p=!0:i instanceof rn?(d=BO(e,i),p=!1):(d=rn.EMPTY_NODE,p=!1);const _=LS(new df(d,p,!1),new df(i,r,!1));return new Jq(t,_)}return l}function RV(n){const t=[];for(const e of n.views.values())e.query._queryParams.loadsAllData()||t.push(e);return t}function ff(n,t){let e=null;for(const i of n.views.values())e=e||n5(i,t);return e}function OV(n,t){return t._queryParams.loadsAllData()?zS(n):n.views.get(t._queryIdentifier)}function PV(n,t){return null!=OV(n,t)}function pf(n){return null!=zS(n)}function zS(n){for(const t of n.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let f5=1;class NV{constructor(t){this.listenProvider_=t,this.syncPointTree_=new vi(null),this.pendingWriteTree_=function Hq(){return{visibleWrites:fc.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function $O(n,t,e,i,r){return function Iq(n,t,e,i,r){(0,F.hu)(i>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),n.allWrites.push({path:t,snap:e,writeId:i,visible:r}),r&&(n.visibleWrites=rC(n.visibleWrites,t,e)),n.lastWriteId=i}(n.pendingWriteTree_,t,e,i,r),r?Ov(n,new Fm({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,e)):[]}function mf(n,t,e=!1){const i=function kq(n,t){for(let e=0;e<n.allWrites.length;e++){const i=n.allWrites[e];if(i.writeId===t)return i}return null}(n.pendingWriteTree_,t);if(function Rq(n,t){const e=n.allWrites.findIndex(d=>d.writeId===t);(0,F.hu)(e>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[e];n.allWrites.splice(e,1);let r=i.visible,s=!1,l=n.allWrites.length-1;for(;r&&l>=0;){const d=n.allWrites[l];d.visible&&(l>=e&&Oq(d,i.path)?r=!1:dl(i.path,d.path)&&(s=!0)),l--}return!!r&&(s?(function Pq(n){n.visibleWrites=vV(n.allWrites,Nq,Hn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(i.snap?n.visibleWrites=mV(n.visibleWrites,i.path):rs(i.children,p=>{n.visibleWrites=mV(n.visibleWrites,Fi(i.path,p))}),!0))}(n.pendingWriteTree_,t)){let s=new vi(null);return null!=i.snap?s=s.set(Hn(),!0):rs(i.children,l=>{s=s.set(new Zn(l),!0)}),Ov(n,new FS(i.path,s,e))}return[]}function sC(n,t,e){return Ov(n,new Fm({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,e))}function qS(n,t,e,i){const r=t._path,s=n.syncPointTree_.get(r);let l=[];if(s&&("default"===t._queryIdentifier||PV(s,t))){const d=function u5(n,t,e,i){const r=t._queryIdentifier,s=[];let l=[];const d=pf(n);if("default"===r)for(const[p,_]of n.views.entries())l=l.concat(TV(_,e,i)),MV(_)&&(n.views.delete(p),_.query._queryParams.loadsAllData()||s.push(_.query));else{const p=n.views.get(r);p&&(l=l.concat(TV(p,e,i)),MV(p)&&(n.views.delete(r),p.query._queryParams.loadsAllData()||s.push(p.query)))}return d&&!pf(n)&&s.push(new(function a5(){return(0,F.hu)(GS,"Reference.ts has not been loaded"),GS}())(t._repo,t._path)),{removed:s,events:l}}(s,t,e,i);(function l5(n){return 0===n.views.size})(s)&&(n.syncPointTree_=n.syncPointTree_.remove(r));const p=d.removed;l=d.events;const _=-1!==p.findIndex(D=>D._queryParams.loadsAllData()),b=n.syncPointTree_.findOnPath(r,(D,I)=>pf(I));if(_&&!b){const D=n.syncPointTree_.subtree(r);if(!D.isEmpty()){const I=function w5(n){return n.fold((t,e,i)=>{if(e&&pf(e))return[zS(e)];{let r=[];return e&&(r=RV(e)),rs(i,(s,l)=>{r=r.concat(l)}),r}})}(D);for(let P=0;P<I.length;++P){const U=I[P],Q=U.query,le=HV(n,U);n.listenProvider_.startListening(aC(Q),oC(n,Q),le.hashFn,le.onComplete)}}}!b&&p.length>0&&!i&&(_?n.listenProvider_.stopListening(aC(t),null):p.forEach(D=>{const I=n.queryToTagMap.get(YS(D));n.listenProvider_.stopListening(aC(D),I)})),function C5(n,t){for(let e=0;e<t.length;++e){const i=t[e];if(!i._queryParams.loadsAllData()){const r=YS(i),s=n.queryToTagMap.get(r);n.queryToTagMap.delete(r),n.tagToQueryMap.delete(s)}}}(n,p)}return l}function FV(n,t,e,i){const r=qO(n,i);if(null!=r){const s=WO(r),l=s.path,d=s.queryId,p=mo(l,t);return YO(n,l,new Fm(OO(d),p,e))}return[]}function LV(n,t){const e=n._path;let i=null,r=!1;t.syncPointTree_.foreachOnPath(e,(_,b)=>{const D=mo(_,e);i=i||ff(b,D),r=r||pf(b)});let l,s=t.syncPointTree_.get(e);s?(r=r||pf(s),i=i||ff(s,Hn())):(s=new kV,t.syncPointTree_=t.syncPointTree_.set(e,s)),null!=i?l=!0:(l=!1,i=rn.EMPTY_NODE,t.syncPointTree_.subtree(e).foreachChild((b,D)=>{const I=ff(D,Hn());I&&(i=i.updateImmediateChild(b,I))}));const d=PV(s,n);if(!d&&!n._queryParams.loadsAllData()){const _=YS(n);(0,F.hu)(!t.queryToTagMap.has(_),"View does not exist, but we have a tag");const b=function E5(){return f5++}();t.queryToTagMap.set(_,b),t.tagToQueryMap.set(b,_)}return{syncPoint:s,writesCache:VS(t.pendingWriteTree_,e),serverCache:i,serverCacheComplete:l,foundAncestorDefaultView:r,viewAlreadyExists:d}}function BV(n,t,e){const{syncPoint:i,serverCache:r,writesCache:s,serverCacheComplete:l,viewAlreadyExists:d,foundAncestorDefaultView:p}=LV(t,n);let _=function c5(n,t,e,i,r,s){const l=zO(n,t,i,r,s);return n.views.has(t._queryIdentifier)||n.views.set(t._queryIdentifier,l),function r5(n,t){n.eventRegistrations_.push(t)}(l,e),function s5(n,t){const e=n.viewCache_.eventCache,i=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(_i,(s,l)=>{i.push(Iv(s,l))}),e.isFullyInitialized()&&i.push(uV(e.getNode())),AV(n,i,e.getNode(),t)}(l,e)}(i,t,e,s,r,l);if(!d&&!p){const b=OV(i,t);_=_.concat(function D5(n,t,e){const i=t._path,r=oC(n,t),s=HV(n,e),l=n.listenProvider_.startListening(aC(t),r,s.hashFn,s.onComplete),d=n.syncPointTree_.subtree(i);if(r)(0,F.hu)(!pf(d.value),"If we're adding a query, it shouldn't be shadowed");else{const p=d.fold((_,b,D)=>{if(!hn(_)&&b&&pf(b))return[zS(b).query];{let I=[];return b&&(I=I.concat(RV(b).map(P=>P.query))),rs(D,(P,U)=>{I=I.concat(U)}),I}});for(let _=0;_<p.length;++_){const b=p[_];n.listenProvider_.stopListening(aC(b),oC(n,b))}}return l}(n,t,b))}return _}function WS(n,t,e){const r=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(t,(l,d)=>{const _=ff(d,mo(l,t));if(_)return _});return yV(r,t,s,e,!0)}function Ov(n,t){return VV(t,n.syncPointTree_,null,VS(n.pendingWriteTree_,Hn()))}function VV(n,t,e,i){if(hn(n.path))return UV(n,t,e,i);{const r=t.get(Hn());null==e&&null!=r&&(e=ff(r,Hn()));let s=[];const l=dn(n.path),d=n.operationForChild(l),p=t.children.get(l);if(p&&d){const _=e?e.getImmediateChild(l):null,b=wV(i,l);s=s.concat(VV(d,p,_,b))}return r&&(s=s.concat(GO(r,n,i,e))),s}}function UV(n,t,e,i){const r=t.get(Hn());null==e&&null!=r&&(e=ff(r,Hn()));let s=[];return t.children.inorderTraversal((l,d)=>{const p=e?e.getImmediateChild(l):null,_=wV(i,l),b=n.operationForChild(l);b&&(s=s.concat(UV(b,d,p,_)))}),r&&(s=s.concat(GO(r,n,i,e))),s}function HV(n,t){const e=t.query,i=oC(n,e);return{hashFn:()=>(function e5(n){return n.viewCache_.serverCache.getNode()}(t)||rn.EMPTY_NODE).hash(),onComplete:r=>{if("ok"===r)return i?function _5(n,t,e){const i=qO(n,e);if(i){const r=WO(i),s=r.path,l=r.queryId,d=mo(s,t);return YO(n,s,new tC(OO(l),d))}return[]}(n,e._path,i):function g5(n,t){return Ov(n,new tC({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(n,e._path);{const s=function p6(n,t){let e="Unknown Error";"too_big"===n?e="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?e="Client doesn't have permission to access the desired data.":"unavailable"===n&&(e="The service is unavailable");const i=new Error(n+" at "+t._path.toString()+": "+e);return i.code=n.toUpperCase(),i}(r,e);return qS(n,e,null,s)}}}}function oC(n,t){const e=YS(t);return n.queryToTagMap.get(e)}function YS(n){return n._path.toString()+"$"+n._queryIdentifier}function qO(n,t){return n.tagToQueryMap.get(t)}function WO(n){const t=n.indexOf("$");return(0,F.hu)(-1!==t&&t<n.length-1,"Bad queryKey."),{queryId:n.substr(t+1),path:new Zn(n.substr(0,t))}}function YO(n,t,e){const i=n.syncPointTree_.get(t);return(0,F.hu)(i,"Missing sync point for query tag that we're tracking"),GO(i,e,VS(n.pendingWriteTree_,t),null)}function aC(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function h5(){return(0,F.hu)($S,"Reference.ts has not been loaded"),$S}())(n._repo,n._path):n}class ZO{constructor(t){this.node_=t}getImmediateChild(t){const e=this.node_.getImmediateChild(t);return new ZO(e)}node(){return this.node_}}class KO{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){const e=Fi(this.path_,t);return new KO(this.syncTree_,e)}node(){return WS(this.syncTree_,this.path_)}}const jV=function(n,t,e){return n&&"object"==typeof n?((0,F.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?S5(n[".sv"],t,e):"object"==typeof n[".sv"]?M5(n[".sv"],t):void(0,F.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},S5=function(n,t,e){if("timestamp"===n)return e.timestamp;(0,F.hu)(!1,"Unexpected server value: "+n)},M5=function(n,t,e){n.hasOwnProperty("increment")||(0,F.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;"number"!=typeof i&&(0,F.hu)(!1,"Unexpected increment value: "+i);const r=t.node();if((0,F.hu)(null!=r,"Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const l=r.getValue();return"number"!=typeof l?i:l+i},GV=function(n,t,e,i){return XO(t,new KO(e,n),i)},QO=function(n,t,e){return XO(n,new ZO(t),e)};function XO(n,t,e){const i=n.getPriority().val(),r=jV(i,t.getImmediateChild(".priority"),e);let s;if(n.isLeafNode()){const l=n,d=jV(l.getValue(),t,e);return d!==l.getValue()||r!==l.getPriority().val()?new Sv(d,qi(r)):n}{const l=n;return s=l,r!==l.getPriority().val()&&(s=s.updatePriority(new Sv(r))),l.forEachChild(_i,(d,p)=>{const _=XO(p,t.getImmediateChild(d),e);_!==p&&(s=s.updateImmediateChild(d,_))}),s}}class JO{constructor(t="",e=null,i={children:{},childCount:0}){this.name=t,this.parent=e,this.node=i}}function ZS(n,t){let e=t instanceof Zn?t:new Zn(t),i=n,r=dn(e);for(;null!==r;){const s=(0,F.DV)(i.node.children,r)||{children:{},childCount:0};i=new JO(r,i,s),e=ci(e),r=dn(e)}return i}function Vm(n){return n.node.value}function eP(n,t){n.node.value=t,tP(n)}function zV(n){return n.node.childCount>0}function KS(n,t){rs(n.node.children,(e,i)=>{t(new JO(e,n,i))})}function $V(n,t,e,i){e&&!i&&t(n),KS(n,r=>{$V(r,t,!0,i)}),e&&i&&t(n)}function lC(n){return new Zn(null===n.parent?n.name:lC(n.parent)+"/"+n.name)}function tP(n){null!==n.parent&&function A5(n,t,e){const i=function T5(n){return void 0===Vm(n)&&!zV(n)}(e),r=(0,F.r3)(n.node.children,t);i&&r?(delete n.node.children[t],n.node.childCount--,tP(n)):!i&&!r&&(n.node.children[t]=e.node,n.node.childCount++,tP(n))}(n.parent,n.name,n)}const k5=/[\[\].#$\/\u0000-\u001F\u007F]/,R5=/[\[\].#$\u0000-\u001F\u007F]/,nP=10485760,QS=function(n){return"string"==typeof n&&0!==n.length&&!k5.test(n)},qV=function(n){return"string"==typeof n&&0!==n.length&&!R5.test(n)},cC=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!ES(n)||n&&"object"==typeof n&&(0,F.r3)(n,".sv")},lu=function(n,t,e,i){i&&void 0===t||uC((0,F.gK)(n,"value"),t,e)},uC=function(n,t,e){const i=e instanceof Zn?new $6(e,n):e;if(void 0===t)throw new Error(n+"contains undefined "+Pm(i));if("function"==typeof t)throw new Error(n+"contains a function "+Pm(i)+" with contents = "+t.toString());if(ES(t))throw new Error(n+"contains "+t.toString()+" "+Pm(i));if("string"==typeof t&&t.length>nP/3&&(0,F.ug)(t)>nP)throw new Error(n+"contains a string greater than "+nP+" utf8 bytes "+Pm(i)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let r=!1,s=!1;if(rs(t,(l,d)=>{if(".value"===l)r=!0;else if(".priority"!==l&&".sv"!==l&&(s=!0,!QS(l)))throw new Error(n+" contains an invalid key ("+l+") "+Pm(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function q6(n,t){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(t),n.byteLength_+=(0,F.ug)(t),QB(n)})(i,l),uC(n,d,i),function W6(n){const t=n.parts_.pop();n.byteLength_-=(0,F.ug)(t),n.parts_.length>0&&(n.byteLength_-=1)}(i)}),r&&s)throw new Error(n+' contains ".value" child '+Pm(i)+" in addition to actual children.")}},WV=function(n,t,e,i){if(i&&void 0===t)return;const r=(0,F.gK)(n,"values");if(!t||"object"!=typeof t||Array.isArray(t))throw new Error(r+" must be an object containing the children to replace.");const s=[];rs(t,(l,d)=>{const p=new Zn(l);if(uC(r,d,Fi(e,p)),".priority"===_O(p)&&!cC(d))throw new Error(r+"contains an invalid value for '"+p.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(p)}),function(n,t){let e,i;for(e=0;e<t.length;e++){i=t[e];const s=Yw(i);for(let l=0;l<s.length;l++)if((".priority"!==s[l]||l!==s.length-1)&&!QS(s[l]))throw new Error(n+"contains an invalid key ("+s[l]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(z6);let r=null;for(e=0;e<t.length;e++){if(i=t[e],null!==r&&dl(r,i))throw new Error(n+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}}(r,s)},iP=function(n,t,e){if(!e||void 0!==t){if(ES(t))throw new Error((0,F.gK)(n,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!cC(t))throw new Error((0,F.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},dC=function(n,t,e,i){if(!(i&&void 0===e||QS(e)))throw new Error((0,F.gK)(n,t)+'was an invalid key = "'+e+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},hC=function(n,t,e,i){if(!(i&&void 0===e||qV(e)))throw new Error((0,F.gK)(n,t)+'was an invalid path = "'+e+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},fl=function(n,t){if(".info"===dn(t))throw new Error(n+" failed = Can't modify data under /.info/")},YV=function(n,t){const e=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!QS(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==e.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),qV(n)}(e))throw new Error((0,F.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class F5{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function XS(n,t){let e=null;for(let i=0;i<t.length;i++){const r=t[i],s=r.getPath();null!==e&&!vO(s,e.path)&&(n.eventLists_.push(e),e=null),null===e&&(e={events:[],path:s}),e.events.push(r)}e&&n.eventLists_.push(e)}function ZV(n,t,e){XS(n,e),KV(n,i=>vO(i,t))}function pl(n,t,e){XS(n,e),KV(n,i=>dl(i,t)||dl(t,i))}function KV(n,t){n.recursionDepth_++;let e=!0;for(let i=0;i<n.eventLists_.length;i++){const r=n.eventLists_[i];r&&(t(r.path)?(L5(n.eventLists_[i]),n.eventLists_[i]=null):e=!1)}e&&(n.eventLists_=[]),n.recursionDepth_--}function L5(n){for(let t=0;t<n.events.length;t++){const e=n.events[t];if(null!==e){n.events[t]=null;const i=e.getEventRunner();Rm&&is("event: "+e.toString()),Dv(i)}}}const QV="repo_interrupt";class V5{constructor(t,e,i,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new F5,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=NS(),this.transactionQueueTree_=new JO,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function XV(n){const e=n.infoData_.getNode(new Zn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function fC(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:XV(n)})}function JV(n,t,e,i,r){n.dataUpdateCount++;const s=new Zn(t);e=n.interceptServerDataCallback_?n.interceptServerDataCallback_(t,e):e;let l=[];if(r)if(i){const p=(0,F.UI)(e,_=>qi(_));l=function y5(n,t,e,i){const r=qO(n,i);if(r){const s=WO(r),l=s.path,d=s.queryId,p=mo(l,t),_=vi.fromObject(e);return YO(n,l,new kv(OO(d),p,_))}return[]}(n.serverSyncTree_,s,p,r)}else{const p=qi(e);l=FV(n.serverSyncTree_,s,p,r)}else if(i){const p=(0,F.UI)(e,_=>qi(_));l=function m5(n,t,e){const i=vi.fromObject(e);return Ov(n,new kv({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,i))}(n.serverSyncTree_,s,p)}else{const p=qi(e);l=sC(n.serverSyncTree_,s,p)}let d=s;l.length>0&&(d=Pv(n,s)),pl(n.eventQueue_,d,l)}function e2(n,t){rP(n,"connected",t),!1===t&&function z5(n){Um(n,"onDisconnectEvents");const t=fC(n),e=NS();AO(n.onDisconnect_,Hn(),(r,s)=>{const l=GV(r,s,n.serverSyncTree_,t);Av(e,r,l)});let i=[];AO(e,Hn(),(r,s)=>{i=i.concat(sC(n.serverSyncTree_,r,s));const l=lP(n,r);Pv(n,l)}),n.onDisconnect_=NS(),pl(n.eventQueue_,Hn(),i)}(n)}function rP(n,t,e){const i=new Zn("/.info/"+t),r=qi(e);n.infoData_.updateSnapshot(i,r);const s=sC(n.infoSyncTree_,i,r);pl(n.eventQueue_,i,s)}function JS(n){return n.nextWriteId_++}function j5(n,t){const e=function b5(n,t){const e=t._path;let i=null;n.syncPointTree_.foreachOnPath(e,(_,b)=>{const D=mo(_,e);i=i||ff(b,D)});let r=n.syncPointTree_.get(e);r?i=i||ff(r,Hn()):(r=new kV,n.syncPointTree_=n.syncPointTree_.set(e,r));const s=null!=i,l=s?new df(i,!0,!1):null;return function t5(n){return BS(n.viewCache_)}(zO(r,t,VS(n.pendingWriteTree_,t._path),s?l.getNode():rn.EMPTY_NODE,s))}(n.serverSyncTree_,t);return null!=e?Promise.resolve(e):n.server_.get(t).then(i=>{const r=qi(i).withIndex(t._queryParams.getIndex());if(t._queryParams.loadsAllData())sC(n.serverSyncTree_,t._path,r);else{const l=function v5(n,t){const{syncPoint:e,serverCache:i,writesCache:r,serverCacheComplete:s}=LV(t,n),l=zO(e,t,r,i,s);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,l),t._queryParams.loadsAllData()?null:oC(n,t)}(n.serverSyncTree_,t);FV(n.serverSyncTree_,t._path,r,l)}return qS(n.serverSyncTree_,t,null).length>0&&Um(n,"unexpected cancel events in repoGetValue"),r},i=>(Um(n,"get for query "+(0,F.Pz)(t)+" failed: "+i),Promise.reject(new Error(i))))}function sP(n,t,e,i,r){Um(n,"set",{path:t.toString(),value:e,priority:i});const s=fC(n),l=qi(e,i),d=WS(n.serverSyncTree_,t),p=QO(l,d,s),_=JS(n),b=$O(n.serverSyncTree_,t,p,_,!0);XS(n.eventQueue_,b),n.server_.put(t.toString(),l.val(!0),(I,P)=>{const U="ok"===I;U||js("set at "+t+" failed: "+I);const Q=mf(n.serverSyncTree_,_,!U);pl(n.eventQueue_,t,Q),gf(0,r,I,P)});const D=lP(n,t);Pv(n,D),pl(n.eventQueue_,D,[])}function $5(n,t,e){n.server_.onDisconnectCancel(t.toString(),(i,r)=>{"ok"===i&&IO(n.onDisconnect_,t),gf(0,e,i,r)})}function t2(n,t,e,i){const r=qi(e);n.server_.onDisconnectPut(t.toString(),r.val(!0),(s,l)=>{"ok"===s&&Av(n.onDisconnect_,t,r),gf(0,i,s,l)})}function oP(n,t,e){let i;i=".info"===dn(t._path)?qS(n.infoSyncTree_,t,e):qS(n.serverSyncTree_,t,e),ZV(n.eventQueue_,t._path,i)}function n2(n){n.persistentConnection_&&n.persistentConnection_.interrupt(QV)}function Um(n,...t){let e="";n.persistentConnection_&&(e=n.persistentConnection_.id+":"),is(e,...t)}function gf(n,t,e,i){t&&Dv(()=>{if("ok"===e)t(null);else{const r=(e||"error").toUpperCase();let s=r;i&&(s+=": "+i);const l=new Error(s);l.code=r,t(l)}})}function aP(n,t,e){return WS(n.serverSyncTree_,t,e)||rn.EMPTY_NODE}function eM(n,t=n.transactionQueueTree_){if(t||tM(n,t),Vm(t)){const e=s2(n,t);(0,F.hu)(e.length>0,"Sending zero length transaction queue"),e.every(r=>0===r.status)&&function Q5(n,t,e){const i=e.map(_=>_.currentWriteId),r=aP(n,t,i);let s=r;const l=r.hash();for(let _=0;_<e.length;_++){const b=e[_];(0,F.hu)(0===b.status,"tryToSendTransactionQueue_: items in queue should all be run."),b.status=1,b.retryCount++;const D=mo(t,b.path);s=s.updateChild(D,b.currentOutputSnapshotRaw)}const d=s.val(!0),p=t;n.server_.put(p.toString(),d,_=>{Um(n,"transaction put response",{path:p.toString(),status:_});let b=[];if("ok"===_){const D=[];for(let I=0;I<e.length;I++)e[I].status=2,b=b.concat(mf(n.serverSyncTree_,e[I].currentWriteId)),e[I].onComplete&&D.push(()=>e[I].onComplete(null,!0,e[I].currentOutputSnapshotResolved)),e[I].unwatcher();tM(n,ZS(n.transactionQueueTree_,t)),eM(n,n.transactionQueueTree_),pl(n.eventQueue_,t,b);for(let I=0;I<D.length;I++)Dv(D[I])}else{if("datastale"===_)for(let D=0;D<e.length;D++)e[D].status=3===e[D].status?4:0;else{js("transaction at "+p.toString()+" failed: "+_);for(let D=0;D<e.length;D++)e[D].status=4,e[D].abortReason=_}Pv(n,t)}},l)}(n,lC(t),e)}else zV(t)&&KS(t,e=>{eM(n,e)})}function Pv(n,t){const e=r2(n,t),i=lC(e);return function X5(n,t,e){if(0===t.length)return;const i=[];let r=[];const l=t.filter(d=>0===d.status).map(d=>d.currentWriteId);for(let d=0;d<t.length;d++){const p=t[d],_=mo(e,p.path);let D,b=!1;if((0,F.hu)(null!==_,"rerunTransactionsUnderNode_: relativePath should not be null."),4===p.status)b=!0,D=p.abortReason,r=r.concat(mf(n.serverSyncTree_,p.currentWriteId,!0));else if(0===p.status)if(p.retryCount>=25)b=!0,D="maxretry",r=r.concat(mf(n.serverSyncTree_,p.currentWriteId,!0));else{const I=aP(n,p.path,l);p.currentInputSnapshot=I;const P=t[d].update(I.val());if(void 0!==P){uC("transaction failed: Data returned ",P,p.path);let U=qi(P);"object"==typeof P&&null!=P&&(0,F.r3)(P,".priority")||(U=U.updatePriority(I.getPriority()));const le=p.currentWriteId,Ze=fC(n),rt=QO(U,I,Ze);p.currentOutputSnapshotRaw=U,p.currentOutputSnapshotResolved=rt,p.currentWriteId=JS(n),l.splice(l.indexOf(le),1),r=r.concat($O(n.serverSyncTree_,p.path,rt,p.currentWriteId,p.applyLocally)),r=r.concat(mf(n.serverSyncTree_,le,!0))}else b=!0,D="nodata",r=r.concat(mf(n.serverSyncTree_,p.currentWriteId,!0))}pl(n.eventQueue_,e,r),r=[],b&&(t[d].status=2,setTimeout(t[d].unwatcher,Math.floor(0)),t[d].onComplete&&i.push("nodata"===D?()=>t[d].onComplete(null,!1,t[d].currentInputSnapshot):()=>t[d].onComplete(new Error(D),!1,null)))}tM(n,n.transactionQueueTree_);for(let d=0;d<i.length;d++)Dv(i[d]);eM(n,n.transactionQueueTree_)}(n,s2(n,e),i),i}function r2(n,t){let e,i=n.transactionQueueTree_;for(e=dn(t);null!==e&&void 0===Vm(i);)i=ZS(i,e),e=dn(t=ci(t));return i}function s2(n,t){const e=[];return o2(n,t,e),e.sort((i,r)=>i.order-r.order),e}function o2(n,t,e){const i=Vm(t);if(i)for(let r=0;r<i.length;r++)e.push(i[r]);KS(t,r=>{o2(n,r,e)})}function tM(n,t){const e=Vm(t);if(e){let i=0;for(let r=0;r<e.length;r++)2!==e[r].status&&(e[i]=e[r],i++);e.length=i,eP(t,e.length>0?e:void 0)}KS(t,i=>{tM(n,i)})}function lP(n,t){const e=lC(r2(n,t)),i=ZS(n.transactionQueueTree_,t);return function I5(n,t,e){let i=e?n:n.parent;for(;null!==i;){if(t(i))return!0;i=i.parent}}(i,r=>{cP(n,r)}),cP(n,i),$V(i,r=>{cP(n,r)}),e}function cP(n,t){const e=Vm(t);if(e){const i=[];let r=[],s=-1;for(let l=0;l<e.length;l++)3===e[l].status||(1===e[l].status?((0,F.hu)(s===l-1,"All SENT items should be at beginning of queue."),s=l,e[l].status=3,e[l].abortReason="set"):((0,F.hu)(0===e[l].status,"Unexpected transaction status in abort"),e[l].unwatcher(),r=r.concat(mf(n.serverSyncTree_,e[l].currentWriteId,!0)),e[l].onComplete&&i.push(e[l].onComplete.bind(null,new Error("set"),!1,null))));-1===s?eP(t,void 0):e.length=s+1,pl(n.eventQueue_,lC(t),r);for(let l=0;l<i.length;l++)Dv(i[l])}}const uP=function(n,t){const e=t4(n),i=e.namespace;return"firebase.com"===e.domain&&su(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==e.domain&&su("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&js("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new dO(e.host,e.secure,i,"ws"===e.scheme||"wss"===e.scheme,t,"",i!==e.subdomain),path:new Zn(e.pathString)}},t4=function(n){let t="",e="",i="",r="",s="",l=!0,d="https",p=443;if("string"==typeof n){let _=n.indexOf("//");_>=0&&(d=n.substring(0,_-1),n=n.substring(_+2));let b=n.indexOf("/");-1===b&&(b=n.length);let D=n.indexOf("?");-1===D&&(D=n.length),t=n.substring(0,Math.min(b,D)),b<D&&(r=function J5(n){let t="";const e=n.split("/");for(let i=0;i<e.length;i++)if(e[i].length>0){let r=e[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch(s){}t+="/"+r}return t}(n.substring(b,D)));const I=function e4(n){const t={};"?"===n.charAt(0)&&(n=n.substring(1));for(const e of n.split("&")){if(0===e.length)continue;const i=e.split("=");2===i.length?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):js(`Invalid query segment '${e}' in query '${n}'`)}return t}(n.substring(Math.min(n.length,D)));_=t.indexOf(":"),_>=0?(l="https"===d||"wss"===d,p=parseInt(t.substring(_+1),10)):_=t.length;const P=t.slice(0,_);if("localhost"===P.toLowerCase())e="localhost";else if(P.split(".").length<=2)e=P;else{const U=t.indexOf(".");i=t.substring(0,U).toLowerCase(),e=t.substring(U+1),s=i}"ns"in I&&(s=I.ns)}return{host:t,port:p,domain:e,subdomain:i,secure:l,scheme:d,pathString:r,namespace:s}};class a2{constructor(t,e,i,r){this.eventType=t,this.eventRegistration=e,this.snapshot=i,this.prevName=r}getPath(){const t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,F.Pz)(this.snapshot.exportVal())}}class l2{constructor(t,e,i){this.eventRegistration=t,this.error=e,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class c2{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return(0,F.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}class u2{constructor(t,e){this._repo=t,this._path=e}cancel(){const t=new F.BH;return $5(this._repo,this._path,t.wrapCallback(()=>{})),t.promise}remove(){fl("OnDisconnect.remove",this._path);const t=new F.BH;return t2(this._repo,this._path,null,t.wrapCallback(()=>{})),t.promise}set(t){fl("OnDisconnect.set",this._path),lu("OnDisconnect.set",t,this._path,!1);const e=new F.BH;return t2(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}setWithPriority(t,e){fl("OnDisconnect.setWithPriority",this._path),lu("OnDisconnect.setWithPriority",t,this._path,!1),iP("OnDisconnect.setWithPriority",e,!1);const i=new F.BH;return function q5(n,t,e,i,r){const s=qi(e,i);n.server_.onDisconnectPut(t.toString(),s.val(!0),(l,d)=>{"ok"===l&&Av(n.onDisconnect_,t,s),gf(0,r,l,d)})}(this._repo,this._path,t,e,i.wrapCallback(()=>{})),i.promise}update(t){fl("OnDisconnect.update",this._path),WV("OnDisconnect.update",t,this._path,!1);const e=new F.BH;return function W5(n,t,e,i){if((0,F.xb)(e))return is("onDisconnect().update() called with empty data.  Don't do anything."),void gf(0,i,"ok",void 0);n.server_.onDisconnectMerge(t.toString(),e,(r,s)=>{"ok"===r&&rs(e,(l,d)=>{const p=qi(d);Av(n.onDisconnect_,Fi(t,l),p)}),gf(0,i,r,s)})}(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}}class Uo{constructor(t,e,i,r){this._repo=t,this._path=e,this._queryParams=i,this._orderByCalled=r}get key(){return hn(this._path)?null:_O(this._path)}get ref(){return new ml(this._repo,this._path)}get _queryIdentifier(){const t=hV(this._queryParams),e=lO(t);return"{}"===e?"default":e}get _queryObject(){return hV(this._queryParams)}isEqual(t){if(!((t=(0,F.m9)(t))instanceof Uo))return!1;const e=this._repo===t._repo,i=vO(this._path,t._path);return e&&i&&this._queryIdentifier===t._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function G6(n){let t="";for(let e=n.pieceNum_;e<n.pieces_.length;e++)""!==n.pieces_[e]&&(t+="/"+encodeURIComponent(String(n.pieces_[e])));return t||"/"}(this._path)}}function nM(n,t){if(!0===n._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function _f(n){let t=null,e=null;if(n.hasStart()&&(t=n.getIndexStartValue()),n.hasEnd()&&(e=n.getIndexEndValue()),n.getIndex()===au){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==vd)throw new Error(i);if("string"!=typeof t)throw new Error(r)}if(n.hasEnd()){if(n.getIndexEndName()!==ou)throw new Error(i);if("string"!=typeof e)throw new Error(r)}}else if(n.getIndex()===_i){if(null!=t&&!cC(t)||null!=e&&!cC(e))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,F.hu)(n.getIndex()instanceof EO||n.getIndex()===DO,"unknown index type."),null!=t&&"object"==typeof t||null!=e&&"object"==typeof e)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function iM(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class ml extends Uo{constructor(t,e){super(t,e,new RS,!1)}get parent(){const t=KB(this._path);return null===t?null:new ml(this._repo,t)}get root(){let t=this;for(;null!==t.parent;)t=t.parent;return t}}class Hm{constructor(t,e,i){this._node=t,this.ref=e,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const e=new Zn(t),i=jm(this.ref,t);return new Hm(this._node.getChild(e),i,_i)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(i,r)=>t(new Hm(r,jm(this.ref,i),_i)))}hasChild(t){const e=new Zn(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function d2(n,t){return(n=(0,F.m9)(n))._checkNotDeleted("ref"),void 0!==t?jm(n._root,t):n._root}function h2(n,t){(n=(0,F.m9)(n))._checkNotDeleted("refFromURL");const e=uP(t,n._repo.repoInfo_.nodeAdmin);YV("refFromURL",e);const i=e.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&i.host!==n._repo.repoInfo_.host&&su("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+n._repo.repoInfo_.host+")"),d2(n,e.path.toString())}function jm(n,t){return null===dn((n=(0,F.m9)(n))._path)?(e=t,e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),hC("child","path",e,!1)):hC("child","path",t,!1),new ml(n._repo,Fi(n._path,t));var e}function dP(n,t){n=(0,F.m9)(n),fl("set",n._path),lu("set",t,n._path,!1);const e=new F.BH;return sP(n._repo,n._path,t,null,e.wrapCallback(()=>{})),e.promise}function a4(n,t){WV("update",t,n._path,!1);const e=new F.BH;return function G5(n,t,e,i){Um(n,"update",{path:t.toString(),value:e});let r=!0;const s=fC(n),l={};if(rs(e,(d,p)=>{r=!1,l[d]=GV(Fi(t,d),qi(p),n.serverSyncTree_,s)}),r)is("update() called with empty data.  Don't do anything."),gf(0,i,"ok",void 0);else{const d=JS(n),p=function p5(n,t,e,i){!function Aq(n,t,e,i){(0,F.hu)(i>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:t,children:e,writeId:i,visible:!0}),n.visibleWrites=NO(n.visibleWrites,t,e),n.lastWriteId=i}(n.pendingWriteTree_,t,e,i);const r=vi.fromObject(e);return Ov(n,new kv({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,r))}(n.serverSyncTree_,t,l,d);XS(n.eventQueue_,p),n.server_.merge(t.toString(),e,(_,b)=>{const D="ok"===_;D||js("update at "+t+" failed: "+_);const I=mf(n.serverSyncTree_,d,!D),P=I.length>0?Pv(n,t):t;pl(n.eventQueue_,P,I),gf(0,i,_,b)}),rs(e,_=>{const b=lP(n,Fi(t,_));Pv(n,b)}),pl(n.eventQueue_,t,[])}}(n._repo,n._path,t,e.wrapCallback(()=>{})),e.promise}class rM{constructor(t){this.callbackContext=t}respondsTo(t){return"value"===t}createEvent(t,e){const i=e._queryParams.getIndex();return new a2("value",this,new Hm(t.snapshotNode,new ml(e._repo,e._path),i))}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new l2(this,t,e):null}matches(t){return t instanceof rM&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class sM{constructor(t,e){this.eventType=t,this.callbackContext=e}respondsTo(t){let e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,this.eventType===e}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new l2(this,t,e):null}createEvent(t,e){(0,F.hu)(null!=t.childName,"Child events should have a childName.");const i=jm(new ml(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new a2(t.type,this,new Hm(t.snapshotNode,i,r),t.prevName)}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof sM&&this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function pC(n,t,e,i,r){let s;if("object"==typeof i&&(s=void 0,r=i),"function"==typeof i&&(s=i),r&&r.onlyOnce){const p=e,_=(b,D)=>{oP(n._repo,n,d),p(b,D)};_.userCallback=e.userCallback,_.context=e.context,e=_}const l=new c2(e,s||void 0),d="value"===t?new rM(l):new sM(t,l);return function Y5(n,t,e){let i;i=".info"===dn(t._path)?BV(n.infoSyncTree_,t,e):BV(n.serverSyncTree_,t,e),ZV(n.eventQueue_,t._path,i)}(n._repo,n,d),()=>oP(n._repo,n,d)}function hP(n,t,e,i){return pC(n,"value",t,e,i)}function f2(n,t,e,i){return pC(n,"child_added",t,e,i)}function p2(n,t,e,i){return pC(n,"child_changed",t,e,i)}function m2(n,t,e,i){return pC(n,"child_moved",t,e,i)}function g2(n,t,e,i){return pC(n,"child_removed",t,e,i)}function _2(n,t,e){let i=null;const r=e?new c2(e):null;"value"===t?i=new rM(r):t&&(i=new sM(t,r)),oP(n._repo,n,i)}class pc{}class v2 extends pc{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){lu("endAt",this._value,t._path,!0);const e=TO(t._queryParams,this._value,this._key);if(iM(e),_f(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Uo(t._repo,t._path,e,t._orderByCalled)}}class u4 extends pc{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){lu("endBefore",this._value,t._path,!1);const e=function _q(n,t,e){let i,r;return n.index_===au?("string"==typeof t&&(t=cV(t)),r=TO(n,t,e)):(i=null==e?vd:cV(e),r=TO(n,t,i)),r.endBeforeSet_=!0,r}(t._queryParams,this._value,this._key);if(iM(e),_f(e),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Uo(t._repo,t._path,e,t._orderByCalled)}}class y2 extends pc{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){lu("startAt",this._value,t._path,!0);const e=MO(t._queryParams,this._value,this._key);if(iM(e),_f(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Uo(t._repo,t._path,e,t._orderByCalled)}}class f4 extends pc{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){lu("startAfter",this._value,t._path,!1);const e=function gq(n,t,e){let i;if(n.index_===au)"string"==typeof t&&(t=lV(t)),i=MO(n,t,e);else{let r;r=null==e?ou:lV(e),i=MO(n,t,r)}return i.startAfterSet_=!0,i}(t._queryParams,this._value,this._key);if(iM(e),_f(e),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Uo(t._repo,t._path,e,t._orderByCalled)}}class m4 extends pc{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Uo(t._repo,t._path,function pq(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="l",e}(t._queryParams,this._limit),t._orderByCalled)}}class _4 extends pc{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Uo(t._repo,t._path,function mq(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="r",e}(t._queryParams,this._limit),t._orderByCalled)}}class y4 extends pc{constructor(t){super(),this._path=t}_apply(t){nM(t,"orderByChild");const e=new Zn(this._path);if(hn(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const i=new EO(e),r=OS(t._queryParams,i);return _f(r),new Uo(t._repo,t._path,r,!0)}}class w4 extends pc{_apply(t){nM(t,"orderByKey");const e=OS(t._queryParams,au);return _f(e),new Uo(t._repo,t._path,e,!0)}}class E4 extends pc{_apply(t){nM(t,"orderByPriority");const e=OS(t._queryParams,_i);return _f(e),new Uo(t._repo,t._path,e,!0)}}class x4 extends pc{_apply(t){nM(t,"orderByValue");const e=OS(t._queryParams,DO);return _f(e),new Uo(t._repo,t._path,e,!0)}}class M4 extends pc{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){if(lu("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new v2(this._value,this._key)._apply(new y2(this._value,this._key)._apply(t))}}function mc(n,...t){let e=(0,F.m9)(n);for(const i of t)e=i._apply(e);return e}(function o5(n){(0,F.hu)(!GS,"__referenceConstructor has already been defined"),GS=n})(ml),function d5(n){(0,F.hu)(!$S,"__referenceConstructor has already been defined"),$S=n}(ml);const fP={};function w2(n,t,e,i,r){let s=i||n.options.databaseURL;void 0===s&&(n.options.projectId||su("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),is("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let p,_,l=uP(s,r),d=l.repoInfo;"undefined"!=typeof process&&process.env&&(_=process.env.FIREBASE_DATABASE_EMULATOR_HOST),_?(p=!0,s=`http://${_}?ns=${d.namespace}`,l=uP(s,r),d=l.repoInfo):p=!l.repoInfo.secure;const b=r&&p?new Ww(Ww.OWNER):new v6(n.name,n.options,t);YV("Invalid Firebase Database URL",l),hn(l.path)||su("Database URL must point to the root of a Firebase Database (not including a child path).");const D=function R4(n,t,e,i){let r=fP[t.name];r||(r={},fP[t.name]=r);let s=r[n.toURLString()];return s&&su("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new V5(n,false,e,i),r[n.toURLString()]=s,s}(d,n,b,new _6(n.name,e));return new P4(D,n)}class P4{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function U5(n,t,e){if(n.stats_=pO(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new PS(n.repoInfo_,(i,r,s,l)=>{JV(n,i,r,s,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>e2(n,!0),0);else{if(null!=e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,F.Pz)(e)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new Nm(n.repoInfo_,t,(i,r,s,l)=>{JV(n,i,r,s,l)},i=>{e2(n,i)},i=>{!function H5(n,t){rs(t,(e,i)=>{rP(n,e,i)})}(n,i)},n.authTokenProvider_,n.appCheckProvider_,e),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=function w6(n,t){const e=n.toString();return fO[e]||(fO[e]=t()),fO[e]}(n.repoInfo_,()=>new Eq(n.stats_,n.server_)),n.infoData_=new vq,n.infoSyncTree_=new NV({startListening:(i,r,s,l)=>{let d=[];const p=n.infoData_.getNode(i._path);return p.isEmpty()||(d=sC(n.infoSyncTree_,i._path,p),setTimeout(()=>{l("ok")},0)),d},stopListening:()=>{}}),rP(n,"connected",!1),n.serverSyncTree_=new NV({startListening:(i,r,s,l)=>(n.server_.listen(i,s,r,(d,p)=>{const _=l(d,p);pl(n.eventQueue_,i._path,_)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ml(this._repo,Hn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function k4(n,t){const e=fP[t];(!e||e[n.key]!==n)&&su(`Database ${t}(${n.repoInfo_}) has already been deleted.`),n2(n),delete e[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){null===this._rootInternal&&su("Cannot call "+t+" on a deleted database.")}}function C2(){BB.IS_TRANSPORT_INITIALIZED&&js("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function N4(){C2(),cf.forceDisallow()}function F4(){C2(),xv.forceDisallow(),cf.forceAllow()}function U4(n,t){vB(n,t)}const j4={".sv":"timestamp"};class $4{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Nm.prototype.simpleListen=function(n,t){this.sendRequest("q",{p:n},t)},Nm.prototype.echo=function(n,t){this.sendRequest("echo",{d:n},t)},function H4(n){fB(Wr.SDK_VERSION),(0,Wr._registerComponent)(new ga.wA("database",(t,{instanceIdentifier:e})=>w2(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),t.getProvider("app-check-internal"),e),"PUBLIC").setMultipleInstances(!0)),(0,Wr.registerVersion)(dB,"0.13.2",n),(0,Wr.registerVersion)(dB,"0.13.2","esm2017")}();const Z4=new sr.Yd("@firebase/database-compat"),E2=function(n){Z4.warn("FIREBASE WARNING: "+n)};class X4{constructor(t){this._delegate=t}cancel(t){(0,F.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,F.Wj)("OnDisconnect.cancel","onComplete",t,!0);const e=this._delegate.cancel();return t&&e.then(()=>t(null),i=>t(i)),e}remove(t){(0,F.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,F.Wj)("OnDisconnect.remove","onComplete",t,!0);const e=this._delegate.remove();return t&&e.then(()=>t(null),i=>t(i)),e}set(t,e){(0,F.Dv)("OnDisconnect.set",1,2,arguments.length),(0,F.Wj)("OnDisconnect.set","onComplete",e,!0);const i=this._delegate.set(t);return e&&i.then(()=>e(null),r=>e(r)),i}setWithPriority(t,e,i){(0,F.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,F.Wj)("OnDisconnect.setWithPriority","onComplete",i,!0);const r=this._delegate.setWithPriority(t,e);return i&&r.then(()=>i(null),s=>i(s)),r}update(t,e){if((0,F.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){const r={};for(let s=0;s<t.length;++s)r[""+s]=t[s];t=r,E2("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,F.Wj)("OnDisconnect.update","onComplete",e,!0);const i=this._delegate.update(t);return e&&i.then(()=>e(null),r=>e(r)),i}}class J4{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return(0,F.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class vf{constructor(t,e){this._database=t,this._delegate=e}val(){return(0,F.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,F.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,F.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,F.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(t){return(0,F.Dv)("DataSnapshot.child",0,1,arguments.length),t=String(t),hC("DataSnapshot.child","path",t,!1),new vf(this._database,this._delegate.child(t))}hasChild(t){return(0,F.Dv)("DataSnapshot.hasChild",1,1,arguments.length),hC("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)}getPriority(){return(0,F.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(t){return(0,F.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,F.Wj)("DataSnapshot.forEach","action",t,!1),this._delegate.forEach(e=>t(new vf(this._database,e)))}hasChildren(){return(0,F.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,F.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,F.Dv)("DataSnapshot.ref",0,0,arguments.length),new Sa(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class vs{constructor(t,e){this.database=t,this._delegate=e}on(t,e,i,r){var s;(0,F.Dv)("Query.on",2,4,arguments.length),(0,F.Wj)("Query.on","callback",e,!1);const l=vs.getCancelAndContextArgs_("Query.on",i,r),d=(_,b)=>{e.call(l.context,new vf(this.database,_),b)};d.userCallback=e,d.context=l.context;const p=null===(s=l.cancel)||void 0===s?void 0:s.bind(l.context);switch(t){case"value":return hP(this._delegate,d,p),e;case"child_added":return f2(this._delegate,d,p),e;case"child_removed":return g2(this._delegate,d,p),e;case"child_changed":return p2(this._delegate,d,p),e;case"child_moved":return m2(this._delegate,d,p),e;default:throw new Error((0,F.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(t,e,i){if((0,F.Dv)("Query.off",0,3,arguments.length),function(n,t,e){if(void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,F.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,t),(0,F.Wj)("Query.off","callback",e,!0),(0,F.lb)("Query.off","context",i,!0),e){const r=()=>{};r.userCallback=e,r.context=i,_2(this._delegate,t,r)}else _2(this._delegate,t)}get(){return function l4(n){return j5((n=(0,F.m9)(n))._repo,n).then(t=>new Hm(t,new ml(n._repo,n._path),n._queryParams.getIndex()))}(this._delegate).then(t=>new vf(this.database,t))}once(t,e,i,r){(0,F.Dv)("Query.once",1,4,arguments.length),(0,F.Wj)("Query.once","callback",e,!0);const s=vs.getCancelAndContextArgs_("Query.once",i,r),l=new F.BH,d=(_,b)=>{const D=new vf(this.database,_);e&&e.call(s.context,D,b),l.resolve(D)};d.userCallback=e,d.context=s.context;const p=_=>{s.cancel&&s.cancel.call(s.context,_),l.reject(_)};switch(t){case"value":hP(this._delegate,d,p,{onlyOnce:!0});break;case"child_added":f2(this._delegate,d,p,{onlyOnce:!0});break;case"child_removed":g2(this._delegate,d,p,{onlyOnce:!0});break;case"child_changed":p2(this._delegate,d,p,{onlyOnce:!0});break;case"child_moved":m2(this._delegate,d,p,{onlyOnce:!0});break;default:throw new Error((0,F.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(t){return(0,F.Dv)("Query.limitToFirst",1,1,arguments.length),new vs(this.database,mc(this._delegate,function g4(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new m4(n)}(t)))}limitToLast(t){return(0,F.Dv)("Query.limitToLast",1,1,arguments.length),new vs(this.database,mc(this._delegate,function v4(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new _4(n)}(t)))}orderByChild(t){return(0,F.Dv)("Query.orderByChild",1,1,arguments.length),new vs(this.database,mc(this._delegate,function b4(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return hC("orderByChild","path",n,!1),new y4(n)}(t)))}orderByKey(){return(0,F.Dv)("Query.orderByKey",0,0,arguments.length),new vs(this.database,mc(this._delegate,function C4(){return new w4}()))}orderByPriority(){return(0,F.Dv)("Query.orderByPriority",0,0,arguments.length),new vs(this.database,mc(this._delegate,function D4(){return new E4}()))}orderByValue(){return(0,F.Dv)("Query.orderByValue",0,0,arguments.length),new vs(this.database,mc(this._delegate,function S4(){return new x4}()))}startAt(t=null,e){return(0,F.Dv)("Query.startAt",0,2,arguments.length),new vs(this.database,mc(this._delegate,function h4(n=null,t){return dC("startAt","key",t,!0),new y2(n,t)}(t,e)))}startAfter(t=null,e){return(0,F.Dv)("Query.startAfter",0,2,arguments.length),new vs(this.database,mc(this._delegate,function p4(n,t){return dC("startAfter","key",t,!0),new f4(n,t)}(t,e)))}endAt(t=null,e){return(0,F.Dv)("Query.endAt",0,2,arguments.length),new vs(this.database,mc(this._delegate,function c4(n,t){return dC("endAt","key",t,!0),new v2(n,t)}(t,e)))}endBefore(t=null,e){return(0,F.Dv)("Query.endBefore",0,2,arguments.length),new vs(this.database,mc(this._delegate,function d4(n,t){return dC("endBefore","key",t,!0),new u4(n,t)}(t,e)))}equalTo(t,e){return(0,F.Dv)("Query.equalTo",1,2,arguments.length),new vs(this.database,mc(this._delegate,function T4(n,t){return dC("equalTo","key",t,!0),new M4(n,t)}(t,e)))}toString(){return(0,F.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,F.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(t){if((0,F.Dv)("Query.isEqual",1,1,arguments.length),!(t instanceof vs))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(t._delegate)}static getCancelAndContextArgs_(t,e,i){const r={cancel:void 0,context:void 0};if(e&&i)r.cancel=e,(0,F.Wj)(t,"cancel",r.cancel,!0),r.context=i,(0,F.lb)(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error((0,F.gK)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r}get ref(){return new Sa(this.database,new ml(this._delegate._repo,this._delegate._path))}}class Sa extends vs{constructor(t,e){super(t,new Uo(e._repo,e._path,new RS,!1)),this.database=t,this._delegate=e}getKey(){return(0,F.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(t){return(0,F.Dv)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new Sa(this.database,jm(this._delegate,t))}getParent(){(0,F.Dv)("Reference.parent",0,0,arguments.length);const t=this._delegate.parent;return t?new Sa(this.database,t):null}getRoot(){return(0,F.Dv)("Reference.root",0,0,arguments.length),new Sa(this.database,this._delegate.root)}set(t,e){(0,F.Dv)("Reference.set",1,2,arguments.length),(0,F.Wj)("Reference.set","onComplete",e,!0);const i=dP(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}update(t,e){if((0,F.Dv)("Reference.update",1,2,arguments.length),Array.isArray(t)){const r={};for(let s=0;s<t.length;++s)r[""+s]=t[s];t=r,E2("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}fl("Reference.update",this._delegate._path),(0,F.Wj)("Reference.update","onComplete",e,!0);const i=a4(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}setWithPriority(t,e,i){(0,F.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,F.Wj)("Reference.setWithPriority","onComplete",i,!0);const r=function o4(n,t,e){if(fl("setWithPriority",n._path),lu("setWithPriority",t,n._path,!1),iP("setWithPriority",e,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const i=new F.BH;return sP(n._repo,n._path,t,e,i.wrapCallback(()=>{})),i.promise}(this._delegate,t,e);return i&&r.then(()=>i(null),s=>i(s)),r}remove(t){(0,F.Dv)("Reference.remove",0,1,arguments.length),(0,F.Wj)("Reference.remove","onComplete",t,!0);const e=function r4(n){return fl("remove",n._path),dP(n,null)}(this._delegate);return t&&e.then(()=>t(null),i=>t(i)),e}transaction(t,e,i){(0,F.Dv)("Reference.transaction",1,3,arguments.length),(0,F.Wj)("Reference.transaction","transactionUpdate",t,!1),(0,F.Wj)("Reference.transaction","onComplete",e,!0),function(n,t,e,i){if(void 0!==e&&"boolean"!=typeof e)throw new Error((0,F.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,i);const r=function q4(n,t,e){var i;if(n=(0,F.m9)(n),fl("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const r=null===(i=null==e?void 0:e.applyLocally)||void 0===i||i,s=new F.BH,d=hP(n,()=>{});return function K5(n,t,e,i,r,s){Um(n,"transaction on "+t);const l={path:t,update:e,onComplete:i,status:null,order:mB(),applyLocally:s,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},d=aP(n,t,void 0);l.currentInputSnapshot=d;const p=l.update(d.val());if(void 0===p)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{uC("transaction failed: Data returned ",p,l.path),l.status=0;const _=ZS(n.transactionQueueTree_,t),b=Vm(_)||[];let D;b.push(l),eP(_,b),"object"==typeof p&&null!==p&&(0,F.r3)(p,".priority")?(D=(0,F.DV)(p,".priority"),(0,F.hu)(cC(D),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):D=(WS(n.serverSyncTree_,t)||rn.EMPTY_NODE).getPriority().val();const I=fC(n),P=qi(p,D),U=QO(P,d,I);l.currentOutputSnapshotRaw=P,l.currentOutputSnapshotResolved=U,l.currentWriteId=JS(n);const Q=$O(n.serverSyncTree_,t,U,l.currentWriteId,l.applyLocally);pl(n.eventQueue_,t,Q),eM(n,n.transactionQueueTree_)}}(n._repo,n._path,t,(p,_,b)=>{let D=null;p?s.reject(p):(D=new Hm(b,new ml(n._repo,n._path),_i),s.resolve(new $4(_,D)))},d,r),s.promise}(this._delegate,t,{applyLocally:i}).then(s=>new J4(s.committed,new vf(this.database,s.snapshot)));return e&&r.then(s=>e(null,s.committed,s.snapshot),s=>e(s,!1,null)),r}setPriority(t,e){(0,F.Dv)("Reference.setPriority",1,2,arguments.length),(0,F.Wj)("Reference.setPriority","onComplete",e,!0);const i=function s4(n,t){n=(0,F.m9)(n),fl("setPriority",n._path),iP("setPriority",t,!1);const e=new F.BH;return sP(n._repo,Fi(n._path,".priority"),t,null,e.wrapCallback(()=>{})),e.promise}(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}push(t,e){(0,F.Dv)("Reference.push",0,2,arguments.length),(0,F.Wj)("Reference.push","onComplete",e,!0);const i=function n4(n,t){n=(0,F.m9)(n),fl("push",n._path),lu("push",t,n._path,!0);const e=XV(n._repo),i=uq(e),r=jm(n,i),s=jm(n,i);let l;return l=null!=t?dP(s,t).then(()=>s):Promise.resolve(s),r.then=l.then.bind(l),r.catch=l.then.bind(l,void 0),r}(this._delegate,t),r=i.then(l=>new Sa(this.database,l));e&&r.then(()=>e(null),l=>e(l));const s=new Sa(this.database,i);return s.then=r.then.bind(r),s.catch=r.catch.bind(r,void 0),s}onDisconnect(){return fl("Reference.onDisconnect",this._delegate._path),new X4(new u2(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class mC{constructor(t,e){this._delegate=t,this.app=e,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:N4,forceLongPolling:F4}}useEmulator(t,e,i={}){!function L4(n,t,e,i={}){(n=(0,F.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&su("Cannot call useEmulator() after instance has already been initialized.");const r=n._repoInternal;let s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&su('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Ww(Ww.OWNER);else if(i.mockUserToken){const l="string"==typeof i.mockUserToken?i.mockUserToken:(0,F.Sg)(i.mockUserToken,n.app.options.projectId);s=new Ww(l)}!function A4(n,t,e,i){n.repoInfo_=new dO(`${t}:${e}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),i&&(n.authTokenProvider_=i)}(r,t,e,s)}(this._delegate,t,e,i)}ref(t){if((0,F.Dv)("database.ref",0,1,arguments.length),t instanceof Sa){const e=h2(this._delegate,t.toString());return new Sa(this,e)}{const e=d2(this._delegate,t);return new Sa(this,e)}}refFromURL(t){(0,F.Dv)("database.refFromURL",1,1,arguments.length);const i=h2(this._delegate,t);return new Sa(this,i)}goOffline(){return(0,F.Dv)("database.goOffline",0,0,arguments.length),function B4(n){(n=(0,F.m9)(n))._checkNotDeleted("goOffline"),n2(n._repo)}(this._delegate)}goOnline(){return(0,F.Dv)("database.goOnline",0,0,arguments.length),function V4(n){(n=(0,F.m9)(n))._checkNotDeleted("goOnline"),function Z5(n){n.persistentConnection_&&n.persistentConnection_.resume(QV)}(n._repo)}(this._delegate)}}mC.ServerValue={TIMESTAMP:function G4(){return j4}(),increment:n=>function z4(n){return{".sv":{increment:n}}}(n)};var tW=Object.freeze({__proto__:null,initStandalone:function eW({app:n,url:t,version:e,customAuthImpl:i,namespace:r,nodeAdmin:s=!1}){fB(e);const l=new ga.zt("auth-internal",new ga.H0("database-standalone"));return l.setComponent(new ga.wA("auth-internal",()=>i,"PRIVATE")),{instance:new mC(w2(n,l,void 0,t,s),n),namespace:r}}});const nW=mC.ServerValue;function D2(n){return null==n}function x2(n){return"function"==typeof n.set}function S2(n,t){return x2(t)?t:n.ref(t)}function M2(n,t){if(function rW(n){return"string"==typeof n}(n))return t.stringCase();if(x2(n))return t.firebaseCase();if(function sW(n){return"function"==typeof n.exportVal}(n))return t.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function gC(n,t,e="on",i=Bu.z){return new oi.y(r=>{let s=null;return s=n[e](t,(l,d)=>{i.schedule(()=>{r.next({snapshot:l,prevKey:d})}),"once"===e&&i.schedule(()=>r.complete())},l=>{i.schedule(()=>r.error(l))}),"on"===e?{unsubscribe(){null!=s&&n.off(t,s)}}:{unsubscribe(){}}}).pipe((0,ht.U)(r=>{const{snapshot:s,prevKey:l}=r;let d=null;return s.exists()&&(d=s.key),{type:t,payload:s,prevKey:l,key:d}}),(0,Ug.B)())}function T2(n,t){const e=n.length;for(let i=0;i<e;i++)if(n[i].payload.key===t)return i;return-1}function lW(n,t){const{payload:e,prevKey:i,key:r}=t,s=T2(n,r),l=function aW(n,t){if(D2(t))return 0;{const e=T2(n,t);return-1===e?n.length:e+1}}(n,i);switch(t.type){case"value":if(t.payload&&t.payload.exists()){let d=null;t.payload.forEach(p=>{const _={payload:p,type:"value",prevKey:d,key:p.key};return d=p.key,n=[...n,_],!1})}return n;case"child_added":if(s>-1){const d=n[s-1];(d&&d.key||null)!==i&&(n=n.filter(p=>p.payload.key!==e.key)).splice(l,0,t)}else{if(null==i)return[t,...n];(n=n.slice()).splice(l,0,t)}return n;case"child_removed":return n.filter(d=>d.payload.key!==e.key);case"child_changed":return n.map(d=>d.payload.key===r?t:d);case"child_moved":if(s>-1){const d=n.splice(s,1)[0];return(n=n.slice()).splice(l,0,d),n}return n;default:return n}}function I2(n){return(D2(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function A2(n,t,e){return function oW(n,t,e){return gC(n,"value","once",e).pipe($n(i=>{const r=[Ye(i)];return t.forEach(s=>r.push(gC(n,s,"on",e))),(0,Nu.T)(...r).pipe(jr(lW,[]))}),TD())}(n,t=I2(t),e)}function k2(n,t,e){const i=(t=I2(t)).map(r=>gC(n,r,"on",e));return(0,Nu.T)(...i)}function R2(n,t){return function(i,r){return M2(i,{stringCase:()=>n.child(i)[t](r),firebaseCase:()=>i[t](r),snapshotCase:()=>i.ref[t](r)})}}function hW(n){return function(e){return e?M2(e,{stringCase:()=>n.child(e).remove(),firebaseCase:()=>e.remove(),snapshotCase:()=>e.ref.remove()}):n.remove()}}function O2(n,t){return function(){return gC(n,"value","on",t)}}!function iW(n){n.INTERNAL.registerComponent(new ga.wA("database-compat",(t,{instanceIdentifier:e})=>{const i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("database").getImmediate({identifier:e});return new mC(r,i)},"PUBLIC").setServiceProps({Reference:Sa,Query:vs,Database:mC,DataSnapshot:vf,enableLogging:U4,INTERNAL:tW,ServerValue:nW}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.2")}(ph.Z);const mW=new c.OlP("angularfire2.realtimeDatabaseURL"),gW=new c.OlP("angularfire2.database.use-emulator");let _W=(()=>{class n{constructor(e,i,r,s,l,d,p,_,b,D,I,P,U,Q,le){this.schedulers=d;const Ze=p,rt=(0,Ki.on)(e,l,i);_&&Jg(rt,l,b,I,P,U,D,Q),this.database=(0,Ki.cc)(`${rt.name}.database.${r}`,"AngularFireDatabase",rt.name,()=>{const at=l.runOutsideAngular(()=>rt.database(r||void 0));return Ze&&at.useEmulator(...Ze),at},[Ze])}list(e,i){const r=this.schedulers.ngZone.runOutsideAngular(()=>S2(this.database,e));let s=r;return i&&(s=i(r)),function fW(n,t){const e=t.schedulers.outsideAngular,i=t.schedulers.ngZone.run(()=>n.ref);return{query:n,update:R2(i,"update"),set:R2(i,"set"),push:r=>i.push(r),remove:hW(i),snapshotChanges:r=>A2(n,r,e).pipe(Sn.iC),stateChanges:r=>k2(n,r,e).pipe(Sn.iC),auditTrail:r=>function cW(n,t,e){return function dW(n,t,e){return function uW(n,t){return gC(n,"value","on",t).pipe((0,ht.U)(e=>{let i;return e.payload.forEach(r=>(i=r.key,!1)),{data:e,lastKeyToLoad:i}}))}(n,e).pipe(function s6(...n){const t=(0,Vl.jO)(n);return(0,Qn.e)((e,i)=>{const r=n.length,s=new Array(r);let l=n.map(()=>!1),d=!1;for(let p=0;p<r;p++)(0,Is.Xf)(n[p]).subscribe((0,_n.x)(i,_=>{s[p]=_,!d&&!l[p]&&(l[p]=!0,(d=l.every(Ts.y))&&(l=null))},CS.Z));e.subscribe((0,_n.x)(i,p=>{if(d){const _=[p,...s];i.next(t?t(..._):_)}}))})}(t),(0,ht.U)(([r,s])=>{const l=r.lastKeyToLoad,d=s.map(p=>p.key);return{actions:s,lastKeyToLoad:l,loadedKeys:d}}),function o6(n){return(0,Qn.e)((t,e)=>{let i=!1,r=0;t.subscribe((0,_n.x)(e,s=>(i||(i=!n(s,r++)))&&e.next(s)))})}(r=>-1===r.loadedKeys.indexOf(r.lastKeyToLoad)),(0,ht.U)(r=>r.actions))}(n,k2(n,t).pipe(jr((r,s)=>[...r,s],[])),e)}(n,r,e).pipe(Sn.iC),valueChanges:(r,s)=>A2(n,r,e).pipe((0,ht.U)(d=>d.map(p=>s&&s.idField?Object.assign(Object.assign({},p.payload.val()),{[s.idField]:p.key}):p.payload.val())),Sn.iC)}}(s,this)}object(e){return function pW(n,t){return{query:n,snapshotChanges:()=>O2(n,t.schedulers.outsideAngular)().pipe(Sn.iC),update:e=>n.ref.update(e),set:e=>n.ref.set(e),remove:()=>n.ref.remove(),valueChanges:()=>O2(n,t.schedulers.outsideAngular)().pipe(Sn.iC,(0,ht.U)(i=>i.payload.exists()?i.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>S2(this.database,e)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(Ki.Dh),c.LFG(Ki.xv,8),c.LFG(mW,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(Sn.HU),c.LFG(gW,8),c.LFG(fh,8),c.LFG(ob,8),c.LFG(ab,8),c.LFG(gp,8),c.LFG(FE,8),c.LFG(lb,8),c.LFG(Xg,8),c.LFG(Fs,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),vW=(()=>{class n{constructor(){hh.Z.registerVersion("angularfire",Sn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[_W]}),n})();const pP_firebase={apiKey:"AIzaSyAZ5j_ogIZ7ehj3DtbFBaSSw329QS1YGys",authDomain:"merchants-beers.firebaseapp.com",databaseURL:"https://merchants-beers-default-rtdb.firebaseio.com",projectId:"merchants-beers",storageBucket:"merchants-beers.appspot.com",messagingSenderId:"716223467721",appId:"1:716223467721:web:4e42974925aa2ba4b27d18",measurementId:"G-KBBTRDX6MN"};var yW=L(3673);let _C=(()=>{class n{constructor(e,i,r,s,l){this.afs=e,this.afAuth=i,this.router=r,this.ngZone=s,this.firestore=l,this.afAuth.authState.subscribe(d=>{console.log("oo"+d),d?(this.userData=d,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(e,i){return this.afAuth.signInWithEmailAndPassword(e,i).then(r=>{this.ngZone.run(()=>{this.router.navigate(["dashboard"])}),this.SetUserData(r.user)}).catch(r=>{window.alert(r.message)})}SignUp(e,i,r){return this.afAuth.createUserWithEmailAndPassword(e,i).then(s=>{s.user.updateProfile({displayName:r}).then(l=>{this.SetUserData(s.user).then(d=>{this.addFirstCard(s.user.uid)})}).catch(l=>{alert("Error registering: --- "+l)})}).catch(s=>{window.alert(s.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(e=>e.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email-address"])})}ForgotPassword(e){return this.afAuth.sendPasswordResetEmail(e).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(i=>{window.alert(i)})}get isLoggedIn(){const e=JSON.parse(localStorage.getItem("user"));return null!==e&&!1!==e.emailVerified}GoogleAuth(){return this.AuthLogin(new yW.Q).then(e=>{e&&this.router.navigate(["dashboard"])})}AuthLogin(e){return this.afAuth.signInWithPopup(e).then(i=>{this.ngZone.run(()=>{this.router.navigate(["dashboard"])}),this.SetUserData(i.user)}).catch(i=>{window.alert(i)})}SetUserData(e){const i=this.afs.doc(`users/${e.uid}`),r={uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL,emailVerified:e.emailVerified};return this.currentUser=e,i.set(r,{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["/login"])})}UpdateProfile(e){var i=this;return(0,be.Z)(function*(){return(yield i.afAuth.currentUser).updateProfile(e)})()}addFirstCard(e){let i={userid:e,availableBeers:0,totalDrank:0,owing:0};return new Promise((r,s)=>{this.firestore.collection("cards").add(i).then(l=>{console.log("Added a case."),console.log(l)},l=>s(l))})}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(_d),c.LFG(fh),c.LFG(Ps),c.LFG(c.R0b),c.LFG(_d))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();let N2=(()=>{class n{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(c.Qsj),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n}),n})(),Gm=(()=>{class n extends N2{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=c.n5z(n)))(i||n)}}(),n.\u0275dir=c.lG2({type:n,features:[c.qOj]}),n})();const ys=new c.OlP("NgValueAccessor"),wW={provide:ys,useExisting:(0,c.Gpc)(()=>yf),multi:!0},EW=new c.OlP("CompositionEventMode");let yf=(()=>{class n extends N2{constructor(e,i,r){super(e,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function CW(){const n=N()?N().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(e){this.setProperty("value",null==e?"":e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(c.Qsj),c.Y36(c.SBq),c.Y36(EW,8))},n.\u0275dir=c.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,i){1&e&&c.NdJ("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[c._Bn([wW]),c.qOj]}),n})();function bf(n){return null==n||0===n.length}function L2(n){return null!=n&&"number"==typeof n.length}const Nr=new c.OlP("NgValidators"),wf=new c.OlP("NgAsyncValidators"),DW=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class B2{static min(t){return function V2(n){return t=>{if(bf(t.value)||bf(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}(t)}static max(t){return function U2(n){return t=>{if(bf(t.value)||bf(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}(t)}static required(t){return function H2(n){return bf(n.value)?{required:!0}:null}(t)}static requiredTrue(t){return function j2(n){return!0===n.value?null:{required:!0}}(t)}static email(t){return function G2(n){return bf(n.value)||DW.test(n.value)?null:{email:!0}}(t)}static minLength(t){return function z2(n){return t=>bf(t.value)||!L2(t.value)?null:t.value.length<n?{minlength:{requiredLength:n,actualLength:t.value.length}}:null}(t)}static maxLength(t){return function $2(n){return t=>L2(t.value)&&t.value.length>n?{maxlength:{requiredLength:n,actualLength:t.value.length}}:null}(t)}static pattern(t){return function q2(n){if(!n)return oM;let t,e;return"string"==typeof n?(e="","^"!==n.charAt(0)&&(e+="^"),e+=n,"$"!==n.charAt(n.length-1)&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),i=>{if(bf(i.value))return null;const r=i.value;return t.test(r)?null:{pattern:{requiredPattern:e,actualValue:r}}}}(t)}static nullValidator(t){return null}static compose(t){return X2(t)}static composeAsync(t){return J2(t)}}function oM(n){return null}function W2(n){return null!=n}function Y2(n){const t=(0,c.QGY)(n)?(0,Nn.D)(n):n;return(0,c.CqO)(t),t}function Z2(n){let t={};return n.forEach(e=>{t=null!=e?Object.assign(Object.assign({},t),e):t}),0===Object.keys(t).length?null:t}function K2(n,t){return t.map(e=>e(n))}function Q2(n){return n.map(t=>function xW(n){return!n.validate}(t)?t:e=>t.validate(e))}function X2(n){if(!n)return null;const t=n.filter(W2);return 0==t.length?null:function(e){return Z2(K2(e,t))}}function mP(n){return null!=n?X2(Q2(n)):null}function J2(n){if(!n)return null;const t=n.filter(W2);return 0==t.length?null:function(e){return function P2(...n){const t=(0,Vl.jO)(n),{args:e,keys:i}=Ko(n),r=new oi.y(s=>{const{length:l}=e;if(!l)return void s.complete();const d=new Array(l);let p=l,_=l;for(let b=0;b<l;b++){let D=!1;(0,Is.Xf)(e[b]).subscribe((0,_n.x)(s,I=>{D||(D=!0,_--),d[b]=I},()=>p--,void 0,()=>{(!p||!D)&&(_||s.next(i?Qd(i,d):d),s.complete())}))}});return t?r.pipe(Sc(t)):r}(K2(e,t).map(Y2)).pipe((0,ht.U)(Z2))}}function gP(n){return null!=n?J2(Q2(n)):null}function eU(n,t){return null===n?[t]:Array.isArray(n)?[...n,t]:[n,t]}function tU(n){return n._rawValidators}function nU(n){return n._rawAsyncValidators}function _P(n){return n?Array.isArray(n)?n:[n]:[]}function aM(n,t){return Array.isArray(n)?n.includes(t):n===t}function iU(n,t){const e=_P(t);return _P(n).forEach(r=>{aM(e,r)||e.push(r)}),e}function rU(n,t){return _P(t).filter(e=>!aM(n,e))}class sU{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=mP(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=gP(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class bd extends sU{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class go extends sU{get formDirective(){return null}get path(){return null}}let Nv=(()=>{class n extends class oU{constructor(t){this._cd=t}is(t){var e,i,r;return"submitted"===t?!!(null===(e=this._cd)||void 0===e?void 0:e.submitted):!!(null===(r=null===(i=this._cd)||void 0===i?void 0:i.control)||void 0===r?void 0:r[t])}}{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(bd,2))},n.\u0275dir=c.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,i){2&e&&c.ekj("ng-untouched",i.is("untouched"))("ng-touched",i.is("touched"))("ng-pristine",i.is("pristine"))("ng-dirty",i.is("dirty"))("ng-valid",i.is("valid"))("ng-invalid",i.is("invalid"))("ng-pending",i.is("pending"))},features:[c.qOj]}),n})();function vC(n,t){bP(n,t),t.valueAccessor.writeValue(n.value),function PW(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&lU(n,t)})}(n,t),function FW(n,t){const e=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}(n,t),function NW(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&lU(n,t),"submit"!==n.updateOn&&n.markAsTouched()})}(n,t),function OW(n,t){if(t.valueAccessor.setDisabledState){const e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}(n,t)}function uM(n,t,e=!0){const i=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(i),t.valueAccessor.registerOnTouched(i)),hM(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function dM(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function bP(n,t){const e=tU(n);null!==t.validator?n.setValidators(eU(e,t.validator)):"function"==typeof e&&n.setValidators([e]);const i=nU(n);null!==t.asyncValidator?n.setAsyncValidators(eU(i,t.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();dM(t._rawValidators,r),dM(t._rawAsyncValidators,r)}function hM(n,t){let e=!1;if(null!==n){if(null!==t.validator){const r=tU(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(l=>l!==t.validator);s.length!==r.length&&(e=!0,n.setValidators(s))}}if(null!==t.asyncValidator){const r=nU(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(l=>l!==t.asyncValidator);s.length!==r.length&&(e=!0,n.setAsyncValidators(s))}}}const i=()=>{};return dM(t._rawValidators,i),dM(t._rawAsyncValidators,i),e}function lU(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function cU(n,t){bP(n,t)}function dU(n,t){n._syncPendingControls(),t.forEach(e=>{const i=e.control;"submit"===i.updateOn&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function EP(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}const yC="VALID",fM="INVALID",Fv="PENDING",bC="DISABLED";function xP(n){return(pM(n)?n.validators:n)||null}function hU(n){return Array.isArray(n)?mP(n):n||null}function SP(n,t){return(pM(t)?t.asyncValidators:n)||null}function fU(n){return Array.isArray(n)?gP(n):n||null}function pM(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const pU=n=>n instanceof vU,MP=n=>n instanceof IP;function mU(n){return pU(n)?n.value:n.getRawValue()}function gU(n,t){const e=MP(n),i=n.controls;if(!(e?Object.keys(i):i).length)throw new c.vHH(1e3,"");if(!i[t])throw new c.vHH(1001,"")}function _U(n,t){MP(n),n._forEachChild((i,r)=>{if(void 0===t[r])throw new c.vHH(1002,"")})}class TP{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=hU(this._rawValidators),this._composedAsyncValidatorFn=fU(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===yC}get invalid(){return this.status===fM}get pending(){return this.status==Fv}get disabled(){return this.status===bC}get enabled(){return this.status!==bC}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=hU(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=fU(t)}addValidators(t){this.setValidators(iU(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(iU(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(rU(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(rU(t,this._rawAsyncValidators))}hasValidator(t){return aM(this._rawValidators,t)}hasAsyncValidator(t){return aM(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Fv,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=bC,this.errors=null,this._forEachChild(i=>{i.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=yC,this._forEachChild(i=>{i.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===yC||this.status===Fv)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?bC:yC}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Fv,this._hasOwnPendingAsyncValidator=!0;const e=Y2(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function UW(n,t,e){if(null==t||(Array.isArray(t)||(t=t.split(e)),Array.isArray(t)&&0===t.length))return null;let i=n;return t.forEach(r=>{i=MP(i)?i.controls.hasOwnProperty(r)?i.controls[r]:null:(n=>n instanceof jW)(i)&&i.at(r)||null}),i}(this,t,".")}getError(t,e){const i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new c.vpe,this.statusChanges=new c.vpe}_calculateStatus(){return this._allControlsDisabled()?bC:this.errors?fM:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Fv)?Fv:this._anyControlsHaveStatus(fM)?fM:yC}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){pM(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class vU extends TP{constructor(t=null,e,i){super(xP(e),SP(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),pM(e)&&e.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){EP(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){EP(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class IP extends TP{constructor(t,e,i){super(xP(e),SP(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,i={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){_U(this,t),Object.keys(t).forEach(i=>{gU(this,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(i=>{this.controls[i]&&this.controls[i].patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((i,r)=>{i.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,i)=>(t[i]=mU(e),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,i)=>!!i._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const i=this.controls[e];i&&t(i,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const i=this.controls[e];if(this.contains(e)&&t(i))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,i)=>((e.enabled||this.disabled)&&(t[i]=e.value),t))}_reduceChildren(t,e){let i=t;return this._forEachChild((r,s)=>{i=e(i,r,s)}),i}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class jW extends TP{constructor(t,e,i){super(xP(e),SP(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[t]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,i={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){_U(this,t),t.forEach((i,r)=>{gU(this,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((i,r)=>{i.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>mU(t))}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_syncPendingControls(){let t=this.controls.reduce((e,i)=>!!i._syncPendingControls()||e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((e,i)=>{t(e,i)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const GW={provide:go,useExisting:(0,c.Gpc)(()=>mM)},wC=(()=>Promise.resolve(null))();let mM=(()=>{class n extends go{constructor(e,i){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new c.vpe,this.form=new IP({},mP(e),gP(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){wC.then(()=>{const i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),vC(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){wC.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){wC.then(()=>{const i=this._findContainer(e.path),r=new IP({});cU(r,e),i.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){wC.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){wC.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,dU(this.form,this._directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(Nr,10),c.Y36(wf,10))},n.\u0275dir=c.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,i){1&e&&c.NdJ("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[c._Bn([GW]),c.qOj]}),n})();const $W={provide:bd,useExisting:(0,c.Gpc)(()=>zm)},wU=(()=>Promise.resolve(null))();let zm=(()=>{class n extends bd{constructor(e,i,r,s,l){super(),this._changeDetectorRef=l,this.control=new vU,this._registered=!1,this.update=new c.vpe,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function CP(n,t){if(!t)return null;let e,i,r;return Array.isArray(t),t.forEach(s=>{s.constructor===yf?e=s:function VW(n){return Object.getPrototypeOf(n.constructor)===Gm}(s)?i=s:r=s}),r||i||e||null}(0,s)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),function wP(n,t){if(!n.hasOwnProperty("model"))return!1;const e=n.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){vC(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){wU.then(()=>{var i;this.control.setValue(e,{emitViewToModelChange:!1}),null===(i=this._changeDetectorRef)||void 0===i||i.markForCheck()})}_updateDisabled(e){const i=e.isDisabled.currentValue,r=""===i||i&&"false"!==i;wU.then(()=>{var s;r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),null===(s=this._changeDetectorRef)||void 0===s||s.markForCheck()})}_getPath(e){return this._parent?function cM(n,t){return[...t.path,n]}(e,this._parent):[e]}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(go,9),c.Y36(Nr,10),c.Y36(wf,10),c.Y36(ys,10),c.Y36(c.sBO,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[c._Bn([$W]),c.qOj,c.TTD]}),n})();const WW={provide:ys,useExisting:(0,c.Gpc)(()=>Lv),multi:!0};let Lv=(()=>{class n extends Gm{writeValue(e){this.setProperty("value",null==e?"":e)}registerOnChange(e){this.onChange=i=>{e(""==i?null:parseFloat(i))}}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=c.n5z(n)))(i||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(e,i){1&e&&c.NdJ("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},features:[c._Bn([WW]),c.qOj]}),n})(),CU=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();const XW={provide:go,useExisting:(0,c.Gpc)(()=>gM)};let gM=(()=>{class n extends go{constructor(e,i){super(),this.validators=e,this.asyncValidators=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new c.vpe,this._setValidators(e),this._setAsyncValidators(i)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(hM(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const i=this.form.get(e.path);return vC(i,e),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),i}getControl(e){return this.form.get(e.path)}removeControl(e){uM(e.control||null,e,!1),EP(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,i){this.form.get(e.path).setValue(i)}onSubmit(e){return this.submitted=!0,dU(this.form,this.directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const i=e.control,r=this.form.get(e.path);i!==r&&(uM(i||null,e),pU(r)&&(vC(r,e),e.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const i=this.form.get(e.path);cU(i,e),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const i=this.form.get(e.path);i&&function LW(n,t){return hM(n,t)}(i,e)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){bP(this.form,this),this._oldForm&&hM(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(Nr,10),c.Y36(wf,10))},n.\u0275dir=c.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(e,i){1&e&&c.NdJ("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[c._Bn([XW]),c.qOj,c.TTD]}),n})(),v8=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[CU]]}),n})(),y8=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[v8]}),n})();const b8=["chalkBeerForm"];function w8(n,t){if(1&n){const e=c.EpF();c.TgZ(0,"div",8),c.NdJ("click",function(){const s=c.CHM(e).$implicit;return c.oxw(2).doCorrectFunction(s.number)}),c._uU(1),c.qZA()}if(2&n){const e=t.$implicit;c.xp6(1),c.hij(" ",e.text," ")}}function C8(n,t){if(1&n&&(c.TgZ(0,"div"),c.YNc(1,w8,2,1,"div",7),c.qZA()),2&n){const e=c.oxw();c.xp6(1),c.Q6J("ngForOf",e.menuItems)}}function E8(n,t){if(1&n&&c._UZ(0,"app-chalk-beer-form",9,10),2&n){const e=c.oxw();c.Q6J("showProps",e.showProps)}}function D8(n,t){if(1&n&&c._UZ(0,"app-pay-form",9,11),2&n){const e=c.oxw();c.Q6J("showProps",e.showProps)}}function x8(n,t){if(1&n&&c._UZ(0,"app-finance-form",9,12),2&n){const e=c.oxw();c.Q6J("showProps",e.showProps)}}function S8(n,t){if(1&n&&c._UZ(0,"app-add-case-form",9,13),2&n){const e=c.oxw();c.Q6J("showProps",e.showProps)}}let NP=(()=>{class n{constructor(e,i){this.authService=e,this.firestore=i,this.displayName="",this.menuItems=[],this.owing="$0.00",this.card={userid:this.authService.currentUser.uid,totalDrank:0,availableBeers:0,owing:0},this.showProps={showMainMenu:!0,showChalkBeer:!1,showPayBeer:!1,showFinanceBeer:!1,showAddCase:!1,card:this.card},this.displayName=this.authService.currentUser.displayName,this.menuItems.push({text:"Chalk a Beer",number:1}),this.menuItems.push({text:"Pay for Beers",number:2}),this.menuItems.push({text:"Finance Beers (Broke Bitch)",number:3}),this.menuItems.push({text:"Add a Case",number:4}),this.firestore.collection("cards",r=>r.where("userid","==",this.authService.currentUser.uid)).get().subscribe(r=>{let s=r.docs[0].data();this.card={userid:s.userid,totalDrank:s.totalDrank,availableBeers:s.availableBeers,owing:s.owing,cardid:r.docs[0].id},this.owing=(2.5*this.card.owing).toFixed(2),this.showProps.card=this.card,this.chalkABeerComponent.cdr.detectChanges()})}ngOnInit(){}logout(){this.authService.SignOut()}chalkABeer(){this.card.availableBeers<1?alert("Uh oh - It looks like you are out of paid for beers. Buy some more to chalk a beer there bud."):(this.showProps.showChalkBeer=!0,this.showProps.showMainMenu=!1,this.showProps.showPayBeer=!1,this.showProps.showFinanceBeer=!1,this.showProps.showAddCase=!1)}payForBeer(){this.showProps.showChalkBeer=!1,this.showProps.showMainMenu=!1,this.showProps.showPayBeer=!0,this.showProps.showFinanceBeer=!1,this.showProps.showAddCase=!1}financeBeer(){this.card.availableBeers>0?alert("You can't finance beers when you still have some available to drink."):(this.showProps.showChalkBeer=!1,this.showProps.showMainMenu=!1,this.showProps.showPayBeer=!1,this.showProps.showFinanceBeer=!0,this.showProps.showAddCase=!1)}addCase(){this.showProps.showChalkBeer=!1,this.showProps.showMainMenu=!1,this.showProps.showPayBeer=!1,this.showProps.showFinanceBeer=!1,this.showProps.showAddCase=!0}doCorrectFunction(e){1==e&&this.chalkABeer(),2==e&&this.payForBeer(),3==e&&this.financeBeer(),4==e&&this.addCase()}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(_C),c.Y36(_d))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-dashboard"]],viewQuery:function(e,i){if(1&e&&c.Gf(b8,5),2&e){let r;c.iGM(r=c.CRH())&&(i.chalkABeerComponent=r.first)}},decls:16,vars:9,consts:[[1,"topArea"],[1,"header"],[1,"mainArea"],[4,"ngIf"],[3,"showProps",4,"ngIf"],[1,"footer"],["mat-raised-button","",1,"logoutBtn",3,"click"],["class","menuOption",3,"click",4,"ngFor","ngForOf"],[1,"menuOption",3,"click"],[3,"showProps"],["chalkBeerForm",""],["payForBeer",""],["financeBeer",""],["addCase",""]],template:function(e,i){1&e&&(c.TgZ(0,"div",0)(1,"div",1)(2,"h1"),c._uU(3,"Merchants"),c.qZA()(),c._UZ(4,"br"),c.TgZ(5,"p"),c._uU(6),c.qZA()(),c.TgZ(7,"div",2),c.YNc(8,C8,2,1,"div",3),c.YNc(9,E8,2,1,"app-chalk-beer-form",4),c.YNc(10,D8,2,1,"app-pay-form",4),c.YNc(11,x8,2,1,"app-finance-form",4),c.YNc(12,S8,2,1,"app-add-case-form",4),c.qZA(),c.TgZ(13,"div",5)(14,"button",6),c.NdJ("click",function(){return i.logout()}),c._uU(15,"Logout"),c.qZA()()),2&e&&(c.xp6(6),c.HOy("Welcome, ",i.displayName,". You have ",i.card.availableBeers," beers available to drink and owe $",2.5*i.card.owing,". You're lifetime Merchant Beers drank is ",i.card.totalDrank,". GET DRINKING BUD!"),c.xp6(2),c.Q6J("ngIf",i.showProps.showMainMenu),c.xp6(1),c.Q6J("ngIf",i.showProps.showChalkBeer),c.xp6(1),c.Q6J("ngIf",i.showProps.showPayBeer),c.xp6(1),c.Q6J("ngIf",i.showProps.showFinanceBeer),c.xp6(1),c.Q6J("ngIf",i.showProps.showAddCase))},styles:["h1[_ngcontent-%COMP%]{text-align:center;font-family:Brush Script MT;font-size:3em;color:gold;margin-top:0!important;margin-bottom:0!important}p[_ngcontent-%COMP%]{text-align:center;font-family:Arial,Helvetica,sans-serif;margin-top:0!important;margin-bottom:0!important;margin-left:.5em;margin-right:.5em}.topArea[_ngcontent-%COMP%]{display:block;width:100%;height:20vh;overflow-y:auto}.mainArea[_ngcontent-%COMP%]{display:block;width:100%;height:75vh}.header[_ngcontent-%COMP%]{background-color:#006400;background-image:url(https://www.transparenttextures.com/patterns/binding-light.png)}.footer[_ngcontent-%COMP%]{display:block;width:100%;height:5vh}.logoutBtn[_ngcontent-%COMP%]{line-height:4vh;height:4vh;margin-top:.5vh;margin-bottom:.5vh;display:block;margin:auto;background-color:#006400;color:gold}.menuOption[_ngcontent-%COMP%]{width:75%;height:auto;padding-top:1em;padding-bottom:1em;background-color:#006400;color:gold;border-radius:5px;text-align:center;font-size:large;display:block;margin:auto auto 2em}"]}),n})();var M8=L(1144);const T8=["addListener","removeListener"],I8=["addEventListener","removeEventListener"],A8=["on","off"];function Bv(n,t,e,i){if((0,Gi.m)(e)&&(i=e,e=void 0),i)return Bv(n,t,e).pipe(Sc(i));const[r,s]=function O8(n){return(0,Gi.m)(n.addEventListener)&&(0,Gi.m)(n.removeEventListener)}(n)?I8.map(l=>d=>n[l](t,d,e)):function k8(n){return(0,Gi.m)(n.addListener)&&(0,Gi.m)(n.removeListener)}(n)?T8.map(VU(n,t)):function R8(n){return(0,Gi.m)(n.on)&&(0,Gi.m)(n.off)}(n)?A8.map(VU(n,t)):[];if(!r&&(0,M8.z)(n))return(0,Xn.z)(l=>Bv(l,t,e))((0,Is.Xf)(n));if(!r)throw new TypeError("Invalid event target");return new oi.y(l=>{const d=(...p)=>l.next(1<p.length?p:p[0]);return r(d),()=>s(d)})}function VU(n,t){return e=>i=>n[e](t,i)}const Cf=new oi.y(CS.Z),N8={connector:()=>new Tt.x};function UU(n,t=N8){const{connector:e}=t;return(0,Qn.e)((i,r)=>{const s=e();(0,Nn.D)(n(function P8(n){return new oi.y(t=>n.subscribe(t))}(s))).subscribe(r),r.add(i.subscribe(s))})}function HU(n,t){return t?e=>ea(t.pipe((0,qn.q)(1),function B8(){return(0,Qn.e)((n,t)=>{n.subscribe((0,_n.x)(t,CS.Z))})}()),e.pipe(HU(n))):(0,Xn.z)((e,i)=>n(e,i).pipe((0,qn.q)(1),function V8(n){return(0,ht.U)(()=>n)}(e)))}var U8=L(3532);function jU(n=0,t,e=Bu.P){let i=-1;return null!=t&&((0,U8.K)(t)?e=t:i=t),new oi.y(r=>{let s=function H8(n){return n instanceof Date&&!isNaN(n)}(n)?+n-e.now():n;s<0&&(s=0);let l=0;return e.schedule(function(){r.closed||(r.next(l++),0<=i?this.schedule(void 0,i):r.complete())},s)})}const CC="Service workers are disabled or not supported by this browser";class vM{constructor(t){if(this.serviceWorker=t,t){const i=Bv(t,"controllerchange").pipe((0,ht.U)(()=>t.controller)),s=ea(So(()=>Ye(t.controller)),i);this.worker=s.pipe(Dn(b=>!!b)),this.registration=this.worker.pipe($n(()=>t.getRegistration()));const _=Bv(t,"message").pipe((0,ht.U)(b=>b.data)).pipe(Dn(b=>b&&b.type)).pipe(function L8(n){return n?t=>UU(n)(t):t=>function F8(n,t){const e=(0,Gi.m)(n)?n:()=>n;return(0,Gi.m)(t)?UU(t,{connector:e}):i=>new na(i,e)}(new Tt.x)(t)}());_.connect(),this.events=_}else this.worker=this.events=this.registration=function G8(n){return So(()=>no(new Error(n)))}(CC)}postMessage(t,e){return this.worker.pipe((0,qn.q)(1),(0,wi.b)(i=>{i.postMessage(Object.assign({action:t},e))})).toPromise().then(()=>{})}postMessageWithOperation(t,e,i){const r=this.waitForOperationCompleted(i),s=this.postMessage(t,e);return Promise.all([s,r]).then(([,l])=>l)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(t){let e;return e="string"==typeof t?i=>i.type===t:i=>t.includes(i.type),this.events.pipe(Dn(e))}nextEventOfType(t){return this.eventsOfType(t).pipe((0,qn.q)(1))}waitForOperationCompleted(t){return this.eventsOfType("OPERATION_COMPLETED").pipe(Dn(e=>e.nonce===t),(0,qn.q)(1),(0,ht.U)(e=>{if(void 0!==e.result)return e.result;throw new Error(e.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let z8=(()=>{class n{constructor(e){if(this.sw=e,this.subscriptionChanges=new Tt.x,!e.isEnabled)return this.messages=Cf,this.notificationClicks=Cf,void(this.subscription=Cf);this.messages=this.sw.eventsOfType("PUSH").pipe((0,ht.U)(r=>r.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe((0,ht.U)(r=>r.data)),this.pushManager=this.sw.registration.pipe((0,ht.U)(r=>r.pushManager));const i=this.pushManager.pipe($n(r=>r.getSubscription()));this.subscription=(0,Nu.T)(i,this.subscriptionChanges)}get isEnabled(){return this.sw.isEnabled}requestSubscription(e){if(!this.sw.isEnabled)return Promise.reject(new Error(CC));const i={userVisibleOnly:!0};let r=this.decodeBase64(e.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),s=new Uint8Array(new ArrayBuffer(r.length));for(let l=0;l<r.length;l++)s[l]=r.charCodeAt(l);return i.applicationServerKey=s,this.pushManager.pipe($n(l=>l.subscribe(i)),(0,qn.q)(1)).toPromise().then(l=>(this.subscriptionChanges.next(l),l))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe((0,qn.q)(1),$n(i=>{if(null===i)throw new Error("Not subscribed to push notifications.");return i.unsubscribe().then(r=>{if(!r)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(CC))}decodeBase64(e){return atob(e)}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(vM))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),GU=(()=>{class n{constructor(e){if(this.sw=e,!e.isEnabled)return this.versionUpdates=Cf,this.available=Cf,this.activated=Cf,void(this.unrecoverable=Cf);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY"]),this.available=this.versionUpdates.pipe(Dn(i=>"VERSION_READY"===i.type),(0,ht.U)(i=>({type:"UPDATE_AVAILABLE",current:i.currentVersion,available:i.latestVersion}))),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}get isEnabled(){return this.sw.isEnabled}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(CC));const e=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:e},e)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(CC));const e=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:e},e)}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(vM))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class FP{}const zU=new c.OlP("NGSW_REGISTER_SCRIPT");function $8(n,t,e,i){return()=>{if(!ki(i)||!("serviceWorker"in navigator)||!1===e.enabled)return;let s;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof e.registrationStrategy)s=e.registrationStrategy();else{const[d,...p]=(e.registrationStrategy||"registerWhenStable:30000").split(":");switch(d){case"registerImmediately":s=Ye(null);break;case"registerWithDelay":s=$U(+p[0]||0);break;case"registerWhenStable":s=p[0]?(0,Nu.T)(qU(n),$U(+p[0])):qU(n);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${e.registrationStrategy}`)}}n.get(c.R0b).runOutsideAngular(()=>s.pipe((0,qn.q)(1)).subscribe(()=>navigator.serviceWorker.register(t,{scope:e.scope}).catch(d=>console.error("Service worker registration failed with:",d))))}}function $U(n){return Ye(null).pipe(function j8(n,t=Bu.z){const e=jU(n,t);return HU(()=>e)}(n))}function qU(n){return n.get(c.z2F).isStable.pipe(Dn(e=>e))}function q8(n,t){return new vM(ki(t)&&!1!==n.enabled?navigator.serviceWorker:void 0)}let W8=(()=>{class n{static register(e,i={}){return{ngModule:n,providers:[{provide:zU,useValue:e},{provide:FP,useValue:i},{provide:vM,useFactory:q8,deps:[FP,c.Lbi]},{provide:c.ip1,useFactory:$8,deps:[c.zs3,zU,FP,c.Lbi],multi:!0}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[z8,GU]}),n})(),Y8=(()=>{class n{constructor(e){this.updates=e,this.updates.available.subscribe(i=>{this.showAppUpdateAlert()})}showAppUpdateAlert(){alert("There is an App update available. The app will now be reloaded to apply the update."),this.doAppUpdate()}doAppUpdate(){this.updates.activateUpdate().then(()=>document.location.reload())}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(GU))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function vn(n){return null!=n&&"false"!=`${n}`}function Ho(n,t=0){return function Z8(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):t}function WU(n){return Array.isArray(n)?n:[n]}function Dr(n){return null==n?"":"string"==typeof n?n:`${n}px`}function wd(n){return n instanceof c.SBq?n.nativeElement:n}let YU=(()=>{class n{create(e){return"undefined"==typeof MutationObserver?null:new MutationObserver(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),K8=(()=>{class n{constructor(e){this._mutationObserverFactory=e,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((e,i)=>this._cleanupObserver(i))}observe(e){const i=wd(e);return new oi.y(r=>{const l=this._observeElement(i).subscribe(r);return()=>{l.unsubscribe(),this._unobserveElement(i)}})}_observeElement(e){if(this._observedElements.has(e))this._observedElements.get(e).count++;else{const i=new Tt.x,r=this._mutationObserverFactory.create(s=>i.next(s));r&&r.observe(e,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(e,{observer:r,stream:i,count:1})}return this._observedElements.get(e).stream}_unobserveElement(e){this._observedElements.has(e)&&(this._observedElements.get(e).count--,this._observedElements.get(e).count||this._cleanupObserver(e))}_cleanupObserver(e){if(this._observedElements.has(e)){const{observer:i,stream:r}=this._observedElements.get(e);i&&i.disconnect(),r.complete(),this._observedElements.delete(e)}}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(YU))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),LP=(()=>{class n{constructor(e,i,r){this._contentObserver=e,this._elementRef=i,this._ngZone=r,this.event=new c.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(e){this._disabled=vn(e),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(e){this._debounce=Ho(e),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const e=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?e.pipe(_a(this.debounce)):e).subscribe(this.event)})}_unsubscribe(){var e;null===(e=this._currentSubscription)||void 0===e||e.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(K8),c.Y36(c.SBq),c.Y36(c.R0b))},n.\u0275dir=c.lG2({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),EC=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[YU]}),n})();const Q8=new c.OlP("cdk-dir-doc",{providedIn:"root",factory:function X8(){return(0,c.f3M)(oe)}}),J8=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let BP,qm=(()=>{class n{constructor(e){if(this.value="ltr",this.change=new c.vpe,e){const r=e.documentElement?e.documentElement.dir:null;this.value=function eY(n){const t=(null==n?void 0:n.toLowerCase())||"";return"auto"===t&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?J8.test(navigator.language)?"rtl":"ltr":"rtl"===t?"rtl":"ltr"}((e.body?e.body.dir:null)||r||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(Q8,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Vv=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();try{BP="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){BP=!1}let Uv,Gs=(()=>{class n{constructor(e){this._platformId=e,this.isBrowser=this._platformId?ki(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!BP)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(c.Lbi))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const KU=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function QU(){if(Uv)return Uv;if("object"!=typeof document||!document)return Uv=new Set(KU),Uv;let n=document.createElement("input");return Uv=new Set(KU.filter(t=>(n.setAttribute("type",t),n.type===t))),Uv}let DC,Wm,VP;function Ef(n){return function tY(){if(null==DC&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>DC=!0}))}finally{DC=DC||!1}return DC}()?n:!!n.capture}function nY(){if(null==Wm){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Wm=!1,Wm;if("scrollBehavior"in document.documentElement.style)Wm=!0;else{const n=Element.prototype.scrollTo;Wm=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return Wm}function XU(n){if(function iY(){if(null==VP){const n="undefined"!=typeof document?document.head:null;VP=!(!n||!n.createShadowRoot&&!n.attachShadow)}return VP}()){const t=n.getRootNode?n.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function UP(){let n="undefined"!=typeof document&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const t=n.shadowRoot.activeElement;if(t===n)break;n=t}return n}function Ym(n){return n.composedPath?n.composedPath()[0]:n.target}function HP(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}function ss(n){return(0,Qn.e)((t,e)=>{(0,Is.Xf)(n).subscribe((0,_n.x)(e,()=>e.complete(),CS.Z)),!e.closed&&t.subscribe(e)})}let oH=(()=>{class n{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return function DY(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}isTabbable(e){if(!this._platform.isBrowser)return!1;const i=function EY(n){try{return n.frameElement}catch(t){return null}}(function RY(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(e));if(i&&(-1===lH(i)||!this.isVisible(i)))return!1;let r=e.nodeName.toLowerCase(),s=lH(e);return e.hasAttribute("contenteditable")?-1!==s:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function AY(n){let t=n.nodeName.toLowerCase(),e="input"===t&&n.type;return"text"===e||"password"===e||"select"===t||"textarea"===t}(e))&&("audio"===r?!!e.hasAttribute("controls")&&-1!==s:"video"===r?-1!==s&&(null!==s||this._platform.FIREFOX||e.hasAttribute("controls")):e.tabIndex>=0)}isFocusable(e,i){return function kY(n){return!function SY(n){return function TY(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function xY(n){let t=n.nodeName.toLowerCase();return"input"===t||"select"===t||"button"===t||"textarea"===t}(n)||function MY(n){return function IY(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||aH(n))}(e)&&!this.isDisabled(e)&&((null==i?void 0:i.ignoreVisibility)||this.isVisible(e))}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(Gs))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function aH(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let t=n.getAttribute("tabindex");return!(!t||isNaN(parseInt(t,10)))}function lH(n){if(!aH(n))return null;const t=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}class OY{constructor(t,e,i,r,s=!1){this._element=t,this._checker=e,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}destroy(){const t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(t)))})}focusFirstTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(t)))})}focusLastTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(t)))})}_getRegionBoundary(t){const e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);return"start"==t?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(t){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){const i=this._getFirstTabbableElement(e);return null==i||i.focus(t),!!i}return e.focus(t),!0}return this.focusFirstTabbableElement(t)}focusFirstTabbableElement(t){const e=this._getRegionBoundary("start");return e&&e.focus(t),!!e}focusLastTabbableElement(t){const e=this._getRegionBoundary("end");return e&&e.focus(t),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let i=0;i<e.length;i++){const r=e[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[i]):null;if(r)return r}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let i=e.length-1;i>=0;i--){const r=e[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[i]):null;if(r)return r}return null}_createAnchor(){const t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._ngZone.isStable?t():this._ngZone.onStable.pipe((0,qn.q)(1)).subscribe(t)}}let PY=(()=>{class n{constructor(e,i,r){this._checker=e,this._ngZone=i,this._document=r}create(e,i=!1){return new OY(e,this._checker,this._ngZone,this._document,i)}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(oH),c.LFG(c.R0b),c.LFG(oe))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function cH(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function uH(n){const t=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}const NY=new c.OlP("cdk-input-modality-detector-options"),FY={ignoreKeys:[18,17,224,91,16]},Hv=Ef({passive:!0,capture:!0});let LY=(()=>{class n{constructor(e,i,r,s){this._platform=e,this._mostRecentTarget=null,this._modality=new Oi(null),this._lastTouchMs=0,this._onKeydown=l=>{var d,p;(null===(p=null===(d=this._options)||void 0===d?void 0:d.ignoreKeys)||void 0===p?void 0:p.some(_=>_===l.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=Ym(l))},this._onMousedown=l=>{Date.now()-this._lastTouchMs<650||(this._modality.next(cH(l)?"keyboard":"mouse"),this._mostRecentTarget=Ym(l))},this._onTouchstart=l=>{uH(l)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Ym(l))},this._options=Object.assign(Object.assign({},FY),s),this.modalityDetected=this._modality.pipe(function vY(n){return Dn((t,e)=>n<=e)}(1)),this.modalityChanged=this.modalityDetected.pipe(TD()),e.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,Hv),r.addEventListener("mousedown",this._onMousedown,Hv),r.addEventListener("touchstart",this._onTouchstart,Hv)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Hv),document.removeEventListener("mousedown",this._onMousedown,Hv),document.removeEventListener("touchstart",this._onTouchstart,Hv))}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(Gs),c.LFG(c.R0b),c.LFG(oe),c.LFG(NY,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const VY=new c.OlP("cdk-focus-monitor-default-options"),wM=Ef({passive:!0,capture:!0});let Df=(()=>{class n{constructor(e,i,r,s,l){this._ngZone=e,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Tt.x,this._rootNodeFocusAndBlurListener=d=>{const p=Ym(d),_="focus"===d.type?this._onFocus:this._onBlur;for(let b=p;b;b=b.parentElement)_.call(this,d,b)},this._document=s,this._detectionMode=(null==l?void 0:l.detectionMode)||0}monitor(e,i=!1){const r=wd(e);if(!this._platform.isBrowser||1!==r.nodeType)return Ye(null);const s=XU(r)||this._getDocument(),l=this._elementInfo.get(r);if(l)return i&&(l.checkChildren=!0),l.subject;const d={checkChildren:i,subject:new Tt.x,rootNode:s};return this._elementInfo.set(r,d),this._registerGlobalListeners(d),d.subject}stopMonitoring(e){const i=wd(e),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(e,i,r){const s=wd(e);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([d,p])=>this._originChanged(d,i,p)):(this._setOrigin(i),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((e,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(e){return 1===this._detectionMode||!!(null==e?void 0:e.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(e,i){e.classList.toggle("cdk-focused",!!i),e.classList.toggle("cdk-touch-focused","touch"===i),e.classList.toggle("cdk-keyboard-focused","keyboard"===i),e.classList.toggle("cdk-mouse-focused","mouse"===i),e.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(e,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,i){const r=this._elementInfo.get(i),s=Ym(e);!r||!r.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),r)}_onBlur(e,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&e.relatedTarget instanceof Node&&i.contains(e.relatedTarget)||(this._setClasses(i),this._emitOrigin(r.subject,null))}_emitOrigin(e,i){this._ngZone.run(()=>e.next(i))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const i=e.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,wM),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,wM)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(ss(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(e){const i=e.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,wM),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,wM),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,i,r){this._setClasses(e,i),this._emitOrigin(r.subject,i),this._lastFocusOrigin=i}_getClosestElementsInfo(e){const i=[];return this._elementInfo.forEach((r,s)=>{(s===e||r.checkChildren&&s.contains(e))&&i.push([s,r])}),i}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(c.R0b),c.LFG(Gs),c.LFG(LY),c.LFG(oe,8),c.LFG(VY,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const hH="cdk-high-contrast-black-on-white",fH="cdk-high-contrast-white-on-black",GP="cdk-high-contrast-active";let pH=(()=>{class n{constructor(e,i){this._platform=e,this._document=i}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(e):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(e.remove(),s){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(GP),e.remove(hH),e.remove(fH),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?(e.add(GP),e.add(hH)):2===i&&(e.add(GP),e.add(fH))}}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(Gs),c.LFG(oe))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),zP=(()=>{class n{constructor(e){e._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(pH))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[EC]]}),n})();class mH{}const Cd="*";function er(n,t){return{type:7,name:n,definitions:t,options:{}}}function Pn(n,t=null){return{type:4,styles:t,timings:n}}function CM(n,t=null){return{type:3,steps:n,options:t}}function gH(n,t=null){return{type:2,steps:n,options:t}}function pt(n){return{type:6,styles:n,offset:null}}function an(n,t,e){return{type:0,name:n,styles:t,options:e}}function bn(n,t,e=null){return{type:1,expr:n,animation:t,options:e}}function jv(n=null){return{type:9,options:n}}function Gv(n,t,e=null){return{type:11,selector:n,animation:t,options:e}}function _H(n){Promise.resolve(null).then(n)}class SC{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){_H(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class vH{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,i=0,r=0;const s=this.players.length;0==s?_H(()=>this._onFinish()):this.players.forEach(l=>{l.onDone(()=>{++e==s&&this._onFinish()}),l.onDestroy(()=>{++i==s&&this._onDestroy()}),l.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((l,d)=>Math.max(l,d.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,e/i.totalTime):1;i.setPosition(r)})}getPosition(){const t=this.players.reduce((e,i)=>null===e||i.totalTime>e.totalTime?i:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}const wn=!1;function yH(n){return new c.vHH(3e3,wn)}function bZ(){return"undefined"!=typeof window&&void 0!==window.document}function qP(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function xf(n){switch(n.length){case 0:return new SC;case 1:return n[0];default:return new vH(n)}}function bH(n,t,e,i,r={},s={}){const l=[],d=[];let p=-1,_=null;if(i.forEach(b=>{const D=b.offset,I=D==p,P=I&&_||{};Object.keys(b).forEach(U=>{let Q=U,le=b[U];if("offset"!==U)switch(Q=t.normalizePropertyName(Q,l),le){case"!":le=r[U];break;case Cd:le=s[U];break;default:le=t.normalizeStyleValue(U,Q,le,l)}P[Q]=le}),I||d.push(P),_=P,p=D}),l.length)throw function cZ(n){return new c.vHH(3502,wn)}();return d}function WP(n,t,e,i){switch(t){case"start":n.onStart(()=>i(e&&YP(e,"start",n)));break;case"done":n.onDone(()=>i(e&&YP(e,"done",n)));break;case"destroy":n.onDestroy(()=>i(e&&YP(e,"destroy",n)))}}function YP(n,t,e){const i=e.totalTime,s=ZP(n.element,n.triggerName,n.fromState,n.toState,t||n.phaseName,null==i?n.totalTime:i,!!e.disabled),l=n._data;return null!=l&&(s._data=l),s}function ZP(n,t,e,i,r="",s=0,l){return{element:n,triggerName:t,fromState:e,toState:i,phaseName:r,totalTime:s,disabled:!!l}}function Ma(n,t,e){let i;return n instanceof Map?(i=n.get(t),i||n.set(t,i=e)):(i=n[t],i||(i=n[t]=e)),i}function wH(n){const t=n.indexOf(":");return[n.substring(1,t),n.substr(t+1)]}let KP=(n,t)=>!1,CH=(n,t,e)=>[],EH=null;function QP(n){const t=n.parentNode||n.host;return t===EH?null:t}(qP()||"undefined"!=typeof Element)&&(bZ()?(EH=(()=>document.documentElement)(),KP=(n,t)=>{for(;t;){if(t===n)return!0;t=QP(t)}return!1}):KP=(n,t)=>n.contains(t),CH=(n,t,e)=>{if(e)return Array.from(n.querySelectorAll(t));const i=n.querySelector(t);return i?[i]:[]});let Km=null,DH=!1;function xH(n){Km||(Km=function CZ(){return"undefined"!=typeof document?document.body:null}()||{},DH=!!Km.style&&"WebkitAppearance"in Km.style);let t=!0;return Km.style&&!function wZ(n){return"ebkit"==n.substring(1,6)}(n)&&(t=n in Km.style,!t&&DH&&(t="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in Km.style)),t}const SH=KP,MH=CH;let TH=(()=>{class n{validateStyleProperty(e){return xH(e)}matchesElement(e,i){return!1}containsElement(e,i){return SH(e,i)}getParentElement(e){return QP(e)}query(e,i,r){return MH(e,i,r)}computeStyle(e,i,r){return r||""}animate(e,i,r,s,l,d=[],p){return new SC(r,s)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),XP=(()=>{class n{}return n.NOOP=new TH,n})();const JP="ng-enter",DM="ng-leave",xM="ng-trigger",SM=".ng-trigger",AH="ng-animating",e1=".ng-animating";function Qm(n){if("number"==typeof n)return n;const t=n.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:t1(parseFloat(t[1]),t[2])}function t1(n,t){return"s"===t?1e3*n:n}function MM(n,t,e){return n.hasOwnProperty("duration")?n:function xZ(n,t,e){let r,s=0,l="";if("string"==typeof n){const d=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===d)return t.push(yH()),{duration:0,delay:0,easing:""};r=t1(parseFloat(d[1]),d[2]);const p=d[3];null!=p&&(s=t1(parseFloat(p),d[4]));const _=d[5];_&&(l=_)}else r=n;if(!e){let d=!1,p=t.length;r<0&&(t.push(function HY(){return new c.vHH(3100,wn)}()),d=!0),s<0&&(t.push(function jY(){return new c.vHH(3101,wn)}()),d=!0),d&&t.splice(p,0,yH())}return{duration:r,delay:s,easing:l}}(n,t,e)}function zv(n,t={}){return Object.keys(n).forEach(e=>{t[e]=n[e]}),t}function Sf(n,t,e={}){if(t)for(let i in n)e[i]=n[i];else zv(n,e);return e}function RH(n,t,e){return e?t+":"+e+";":""}function OH(n){let t="";for(let e=0;e<n.style.length;e++){const i=n.style.item(e);t+=RH(0,i,n.style.getPropertyValue(i))}for(const e in n.style)n.style.hasOwnProperty(e)&&!e.startsWith("_")&&(t+=RH(0,TZ(e),n.style[e]));n.setAttribute("style",t)}function cu(n,t,e){n.style&&(Object.keys(t).forEach(i=>{const r=r1(i);e&&!e.hasOwnProperty(i)&&(e[i]=n.style[r]),n.style[r]=t[i]}),qP()&&OH(n))}function Xm(n,t){n.style&&(Object.keys(t).forEach(e=>{const i=r1(e);n.style[i]=""}),qP()&&OH(n))}function MC(n){return Array.isArray(n)?1==n.length?n[0]:gH(n):n}const n1=new RegExp("{{\\s*(.+?)\\s*}}","g");function PH(n){let t=[];if("string"==typeof n){let e;for(;e=n1.exec(n);)t.push(e[1]);n1.lastIndex=0}return t}function TM(n,t,e){const i=n.toString(),r=i.replace(n1,(s,l)=>{let d=t[l];return t.hasOwnProperty(l)||(e.push(function zY(n){return new c.vHH(3003,wn)}()),d=""),d.toString()});return r==i?n:r}function IM(n){const t=[];let e=n.next();for(;!e.done;)t.push(e.value),e=n.next();return t}const MZ=/-+([a-z0-9])/g;function r1(n){return n.replace(MZ,(...t)=>t[1].toUpperCase())}function TZ(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Ta(n,t,e){switch(t.type){case 7:return n.visitTrigger(t,e);case 0:return n.visitState(t,e);case 1:return n.visitTransition(t,e);case 2:return n.visitSequence(t,e);case 3:return n.visitGroup(t,e);case 4:return n.visitAnimate(t,e);case 5:return n.visitKeyframes(t,e);case 6:return n.visitStyle(t,e);case 8:return n.visitReference(t,e);case 9:return n.visitAnimateChild(t,e);case 10:return n.visitAnimateRef(t,e);case 11:return n.visitQuery(t,e);case 12:return n.visitStagger(t,e);default:throw function $Y(n){return new c.vHH(3004,wn)}()}}function NH(n,t){return window.getComputedStyle(n)[t]}function PZ(n,t){const e=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function NZ(n,t,e){if(":"==n[0]){const p=function FZ(n,t){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,i)=>parseFloat(i)>parseFloat(e);case":decrement":return(e,i)=>parseFloat(i)<parseFloat(e);default:return t.push(function sZ(n){return new c.vHH(3016,wn)}()),"* => *"}}(n,e);if("function"==typeof p)return void t.push(p);n=p}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return e.push(function rZ(n){return new c.vHH(3015,wn)}()),t;const r=i[1],s=i[2],l=i[3];t.push(FH(r,l));"<"==s[0]&&!("*"==r&&"*"==l)&&t.push(FH(l,r))}(i,e,t)):e.push(n),e}const OM=new Set(["true","1"]),PM=new Set(["false","0"]);function FH(n,t){const e=OM.has(n)||PM.has(n),i=OM.has(t)||PM.has(t);return(r,s)=>{let l="*"==n||n==r,d="*"==t||t==s;return!l&&e&&"boolean"==typeof r&&(l=r?OM.has(n):PM.has(n)),!d&&i&&"boolean"==typeof s&&(d=s?OM.has(t):PM.has(t)),l&&d}}const LZ=new RegExp("s*:selfs*,?","g");function s1(n,t,e,i){return new BZ(n).build(t,e,i)}class BZ{constructor(t){this._driver=t}build(t,e,i){const r=new HZ(e);this._resetContextStyleTimingState(r);const s=Ta(this,MC(t),r);return r.unsupportedCSSPropertiesFound.size&&r.unsupportedCSSPropertiesFound.keys(),s}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let i=e.queryCount=0,r=e.depCount=0;const s=[],l=[];return"@"==t.name.charAt(0)&&e.errors.push(function WY(){return new c.vHH(3006,wn)}()),t.definitions.forEach(d=>{if(this._resetContextStyleTimingState(e),0==d.type){const p=d,_=p.name;_.toString().split(/\s*,\s*/).forEach(b=>{p.name=b,s.push(this.visitState(p,e))}),p.name=_}else if(1==d.type){const p=this.visitTransition(d,e);i+=p.queryCount,r+=p.depCount,l.push(p)}else e.errors.push(function YY(){return new c.vHH(3007,wn)}())}),{type:7,name:t.name,states:s,transitions:l,queryCount:i,depCount:r,options:null}}visitState(t,e){const i=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(i.containsDynamicStyles){const s=new Set,l=r||{};i.styles.forEach(d=>{if(NM(d)){const p=d;Object.keys(p).forEach(_=>{PH(p[_]).forEach(b=>{l.hasOwnProperty(b)||s.add(b)})})}}),s.size&&(IM(s.values()),e.errors.push(function ZY(n,t){return new c.vHH(3008,wn)}()))}return{type:0,name:t.name,style:i,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const i=Ta(this,MC(t.animation),e);return{type:1,matchers:PZ(t.expr,e.errors),animation:i,queryCount:e.queryCount,depCount:e.depCount,options:Jm(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(i=>Ta(this,i,e)),options:Jm(t.options)}}visitGroup(t,e){const i=e.currentTime;let r=0;const s=t.steps.map(l=>{e.currentTime=i;const d=Ta(this,l,e);return r=Math.max(r,e.currentTime),d});return e.currentTime=r,{type:3,steps:s,options:Jm(t.options)}}visitAnimate(t,e){const i=function GZ(n,t){let e=null;if(n.hasOwnProperty("duration"))e=n;else if("number"==typeof n)return o1(MM(n,t).duration,0,"");const i=n;if(i.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=o1(0,0,"");return s.dynamic=!0,s.strValue=i,s}return e=e||MM(i,t),o1(e.duration,e.delay,e.easing)}(t.timings,e.errors);e.currentAnimateTimings=i;let r,s=t.styles?t.styles:pt({});if(5==s.type)r=this.visitKeyframes(s,e);else{let l=t.styles,d=!1;if(!l){d=!0;const _={};i.easing&&(_.easing=i.easing),l=pt(_)}e.currentTime+=i.duration+i.delay;const p=this.visitStyle(l,e);p.isEmptyStep=d,r=p}return e.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(t,e){const i=this._makeStyleAst(t,e);return this._validateStyleAst(i,e),i}_makeStyleAst(t,e){const i=[];Array.isArray(t.styles)?t.styles.forEach(l=>{"string"==typeof l?l==Cd?i.push(l):e.errors.push(function KY(n){return new c.vHH(3002,wn)}()):i.push(l)}):i.push(t.styles);let r=!1,s=null;return i.forEach(l=>{if(NM(l)){const d=l,p=d.easing;if(p&&(s=p,delete d.easing),!r)for(let _ in d)if(d[_].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:i,easing:s,offset:t.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(t,e){const i=e.currentAnimateTimings;let r=e.currentTime,s=e.currentTime;i&&s>0&&(s-=i.duration+i.delay),t.styles.forEach(l=>{"string"!=typeof l&&Object.keys(l).forEach(d=>{if(!this._driver.validateStyleProperty(d))return delete l[d],void e.unsupportedCSSPropertiesFound.add(d);const p=e.collectedStyles[e.currentQuerySelector],_=p[d];let b=!0;_&&(s!=r&&s>=_.startTime&&r<=_.endTime&&(e.errors.push(function QY(n,t,e,i,r){return new c.vHH(3010,wn)}()),b=!1),s=_.startTime),b&&(p[d]={startTime:s,endTime:r}),e.options&&function SZ(n,t,e){const i=t.params||{},r=PH(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||e.push(function GY(n){return new c.vHH(3001,wn)}())})}(l[d],e.options,e.errors)})})}visitKeyframes(t,e){const i={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function XY(){return new c.vHH(3011,wn)}()),i;let s=0;const l=[];let d=!1,p=!1,_=0;const b=t.steps.map(Ze=>{const rt=this._makeStyleAst(Ze,e);let at=null!=rt.offset?rt.offset:function jZ(n){if("string"==typeof n)return null;let t=null;if(Array.isArray(n))n.forEach(e=>{if(NM(e)&&e.hasOwnProperty("offset")){const i=e;t=parseFloat(i.offset),delete i.offset}});else if(NM(n)&&n.hasOwnProperty("offset")){const e=n;t=parseFloat(e.offset),delete e.offset}return t}(rt.styles),et=0;return null!=at&&(s++,et=rt.offset=at),p=p||et<0||et>1,d=d||et<_,_=et,l.push(et),rt});p&&e.errors.push(function JY(){return new c.vHH(3012,wn)}()),d&&e.errors.push(function eZ(){return new c.vHH(3200,wn)}());const D=t.steps.length;let I=0;s>0&&s<D?e.errors.push(function tZ(){return new c.vHH(3202,wn)}()):0==s&&(I=1/(D-1));const P=D-1,U=e.currentTime,Q=e.currentAnimateTimings,le=Q.duration;return b.forEach((Ze,rt)=>{const at=I>0?rt==P?1:I*rt:l[rt],et=at*le;e.currentTime=U+Q.delay+et,Q.duration=et,this._validateStyleAst(Ze,e),Ze.offset=at,i.styles.push(Ze)}),i}visitReference(t,e){return{type:8,animation:Ta(this,MC(t.animation),e),options:Jm(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:Jm(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:Jm(t.options)}}visitQuery(t,e){const i=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[s,l]=function VZ(n){const t=!!n.split(/\s*,\s*/).find(e=>":self"==e);return t&&(n=n.replace(LZ,"")),n=n.replace(/@\*/g,SM).replace(/@\w+/g,e=>SM+"-"+e.substr(1)).replace(/:animating/g,e1),[n,t]}(t.selector);e.currentQuerySelector=i.length?i+" "+s:s,Ma(e.collectedStyles,e.currentQuerySelector,{});const d=Ta(this,MC(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:l,animation:d,originalSelector:t.selector,options:Jm(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(function nZ(){return new c.vHH(3013,wn)}());const i="full"===t.timings?{duration:0,delay:0,easing:"full"}:MM(t.timings,e.errors,!0);return{type:12,animation:Ta(this,MC(t.animation),e),timings:i,options:null}}}class HZ{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function NM(n){return!Array.isArray(n)&&"object"==typeof n}function Jm(n){return n?(n=zv(n)).params&&(n.params=function UZ(n){return n?zv(n):null}(n.params)):n={},n}function o1(n,t,e){return{duration:n,delay:t,easing:e}}function a1(n,t,e,i,r,s,l=null,d=!1){return{type:1,element:n,keyframes:t,preStyleProps:e,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:l,subTimeline:d}}class FM{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,e){let i=this._map.get(t);i||this._map.set(t,i=[]),i.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const qZ=new RegExp(":enter","g"),YZ=new RegExp(":leave","g");function l1(n,t,e,i,r,s={},l={},d,p,_=[]){return(new ZZ).buildKeyframes(n,t,e,i,r,s,l,d,p,_)}class ZZ{buildKeyframes(t,e,i,r,s,l,d,p,_,b=[]){_=_||new FM;const D=new c1(t,e,_,r,s,b,[]);D.options=p,D.currentTimeline.setStyles([l],null,D.errors,p),Ta(this,i,D);const I=D.timelines.filter(P=>P.containsAnimation());if(Object.keys(d).length){let P;for(let U=I.length-1;U>=0;U--){const Q=I[U];if(Q.element===e){P=Q;break}}P&&!P.allowOnlyTimelineStyles()&&P.setStyles([d],null,D.errors,p)}return I.length?I.map(P=>P.buildKeyframes()):[a1(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const i=e.subInstructions.get(e.element);if(i){const r=e.createSubContext(t.options),s=e.currentTimeline.currentTime,l=this._visitSubInstructions(i,r,r.options);s!=l&&e.transformIntoNewTimeline(l)}e.previousNode=t}visitAnimateRef(t,e){const i=e.createSubContext(t.options);i.transformIntoNewTimeline(),this.visitReference(t.animation,i),e.transformIntoNewTimeline(i.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,i){let s=e.currentTimeline.currentTime;const l=null!=i.duration?Qm(i.duration):null,d=null!=i.delay?Qm(i.delay):null;return 0!==l&&t.forEach(p=>{const _=e.appendInstructionToTimeline(p,l,d);s=Math.max(s,_.duration+_.delay)}),s}visitReference(t,e){e.updateOptions(t.options,!0),Ta(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const i=e.subContextCount;let r=e;const s=t.options;if(s&&(s.params||s.delay)&&(r=e.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=LM);const l=Qm(s.delay);r.delayNextStep(l)}t.steps.length&&(t.steps.forEach(l=>Ta(this,l,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const i=[];let r=e.currentTimeline.currentTime;const s=t.options&&t.options.delay?Qm(t.options.delay):0;t.steps.forEach(l=>{const d=e.createSubContext(t.options);s&&d.delayNextStep(s),Ta(this,l,d),r=Math.max(r,d.currentTimeline.currentTime),i.push(d.currentTimeline)}),i.forEach(l=>e.currentTimeline.mergeTimelineCollectedStyles(l)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const i=t.strValue;return MM(e.params?TM(i,e.params,e.errors):i,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const i=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;i.delay&&(e.incrementTime(i.delay),r.snapshotCurrentStyles());const s=t.style;5==s.type?this.visitKeyframes(s,e):(e.incrementTime(i.duration),this.visitStyle(s,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const i=e.currentTimeline,r=e.currentAnimateTimings;!r&&i.getCurrentStyleProperties().length&&i.forwardFrame();const s=r&&r.easing||t.easing;t.isEmptyStep?i.applyEmptyStep(s):i.setStyles(t.styles,s,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const i=e.currentAnimateTimings,r=e.currentTimeline.duration,s=i.duration,d=e.createSubContext().currentTimeline;d.easing=i.easing,t.styles.forEach(p=>{d.forwardTime((p.offset||0)*s),d.setStyles(p.styles,p.easing,e.errors,e.options),d.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(d),e.transformIntoNewTimeline(r+s),e.previousNode=t}visitQuery(t,e){const i=e.currentTimeline.currentTime,r=t.options||{},s=r.delay?Qm(r.delay):0;s&&(6===e.previousNode.type||0==i&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=LM);let l=i;const d=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=d.length;let p=null;d.forEach((_,b)=>{e.currentQueryIndex=b;const D=e.createSubContext(t.options,_);s&&D.delayNextStep(s),_===e.element&&(p=D.currentTimeline),Ta(this,t.animation,D),D.currentTimeline.applyStylesToKeyframe(),l=Math.max(l,D.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(l),p&&(e.currentTimeline.mergeTimelineCollectedStyles(p),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const i=e.parentContext,r=e.currentTimeline,s=t.timings,l=Math.abs(s.duration),d=l*(e.currentQueryTotal-1);let p=l*e.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":p=d-p;break;case"full":p=i.currentStaggerTime}const b=e.currentTimeline;p&&b.delayNextStep(p);const D=b.currentTime;Ta(this,t.animation,e),e.previousNode=t,i.currentStaggerTime=r.currentTime-D+(r.startTime-i.currentTimeline.startTime)}}const LM={};class c1{constructor(t,e,i,r,s,l,d,p){this._driver=t,this.element=e,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=l,this.timelines=d,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=LM,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=p||new BM(this._driver,e,0),d.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const i=t;let r=this.options;null!=i.duration&&(r.duration=Qm(i.duration)),null!=i.delay&&(r.delay=Qm(i.delay));const s=i.params;if(s){let l=r.params;l||(l=this.options.params={}),Object.keys(s).forEach(d=>{(!e||!l.hasOwnProperty(d))&&(l[d]=TM(s[d],l,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const i=t.params={};Object.keys(e).forEach(r=>{i[r]=e[r]})}}return t}createSubContext(t=null,e,i){const r=e||this.element,s=new c1(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(t),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(t){return this.previousNode=LM,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,i){const r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=i?i:0)+t.delay,easing:""},s=new KZ(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,i,r,s,l){let d=[];if(r&&d.push(this.element),t.length>0){t=(t=t.replace(qZ,"."+this._enterClassName)).replace(YZ,"."+this._leaveClassName);let _=this._driver.query(this.element,t,1!=i);0!==i&&(_=i<0?_.slice(_.length+i,_.length):_.slice(0,i)),d.push(..._)}return!s&&0==d.length&&l.push(function iZ(n){return new c.vHH(3014,wn)}()),d}}class BM{constructor(t,e,i,r){this._driver=t,this.element=e,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new BM(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(e=>{this._backFill[e]=this._globalTimelineStyles[e]||Cd,this._currentKeyframe[e]=Cd}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,i,r){e&&(this._previousKeyframe.easing=e);const s=r&&r.params||{},l=function QZ(n,t){const e={};let i;return n.forEach(r=>{"*"===r?(i=i||Object.keys(t),i.forEach(s=>{e[s]=Cd})):Sf(r,!1,e)}),e}(t,this._globalTimelineStyles);Object.keys(l).forEach(d=>{const p=TM(l[d],s,i);this._pendingStyles[d]=p,this._localTimelineStyles.hasOwnProperty(d)||(this._backFill[d]=this._globalTimelineStyles.hasOwnProperty(d)?this._globalTimelineStyles[d]:Cd),this._updateStyle(d,p)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(i=>{this._currentKeyframe[i]=t[i]}),Object.keys(this._localTimelineStyles).forEach(i=>{this._currentKeyframe.hasOwnProperty(i)||(this._currentKeyframe[i]=this._localTimelineStyles[i])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const i=this._styleSummary[e],r=t._styleSummary[e];(!i||r.time>i.time)&&this._updateStyle(e,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((d,p)=>{const _=Sf(d,!0);Object.keys(_).forEach(b=>{const D=_[b];"!"==D?t.add(b):D==Cd&&e.add(b)}),i||(_.offset=p/this.duration),r.push(_)});const s=t.size?IM(t.values()):[],l=e.size?IM(e.values()):[];if(i){const d=r[0],p=zv(d);d.offset=0,p.offset=1,r=[d,p]}return a1(this.element,r,s,l,this.duration,this.startTime,this.easing,!1)}}class KZ extends BM{constructor(t,e,i,r,s,l,d=!1){super(t,e,l.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=d,this.timings={duration:l.duration,delay:l.delay,easing:l.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const s=[],l=i+e,d=e/l,p=Sf(t[0],!1);p.offset=0,s.push(p);const _=Sf(t[0],!1);_.offset=VH(d),s.push(_);const b=t.length-1;for(let D=1;D<=b;D++){let I=Sf(t[D],!1);I.offset=VH((e+I.offset*i)/l),s.push(I)}i=l,e=0,r="",t=s}return a1(this.element,t,this.preStyleProps,this.postStyleProps,i,e,r,!0)}}function VH(n,t=3){const e=Math.pow(10,t-1);return Math.round(n*e)/e}class u1{}class XZ extends u1{normalizePropertyName(t,e){return r1(t)}normalizeStyleValue(t,e,i,r){let s="";const l=i.toString().trim();if(JZ[e]&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const d=i.match(/^[+-]?[\d\.]+([a-z]*)$/);d&&0==d[1].length&&r.push(function qY(n,t){return new c.vHH(3005,wn)}())}return l+s}}const JZ=(()=>function eK(n){const t={};return n.forEach(e=>t[e]=!0),t}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function UH(n,t,e,i,r,s,l,d,p,_,b,D,I){return{type:0,element:n,triggerName:t,isRemovalTransition:r,fromState:e,fromStyles:s,toState:i,toStyles:l,timelines:d,queriedElements:p,preStyleProps:_,postStyleProps:b,totalTime:D,errors:I}}const d1={};class HH{constructor(t,e,i){this._triggerName=t,this.ast=e,this._stateStyles=i}match(t,e,i,r){return function tK(n,t,e,i,r){return n.some(s=>s(t,e,i,r))}(this.ast.matchers,t,e,i,r)}buildStyles(t,e,i){const r=this._stateStyles["*"],s=this._stateStyles[t],l=r?r.buildStyles(e,i):{};return s?s.buildStyles(e,i):l}build(t,e,i,r,s,l,d,p,_,b){const D=[],I=this.ast.options&&this.ast.options.params||d1,U=this.buildStyles(i,d&&d.params||d1,D),Q=p&&p.params||d1,le=this.buildStyles(r,Q,D),Ze=new Set,rt=new Map,at=new Map,et="void"===r,Ot={params:Object.assign(Object.assign({},I),Q)},Lt=b?[]:l1(t,e,this.ast.animation,s,l,U,le,Ot,_,D);let Cn=0;if(Lt.forEach(Ia=>{Cn=Math.max(Ia.duration+Ia.delay,Cn)}),D.length)return UH(e,this._triggerName,i,r,et,U,le,[],[],rt,at,Cn,D);Lt.forEach(Ia=>{const Sd=Ia.element,$G=Ma(rt,Sd,{});Ia.preStyleProps.forEach(og=>$G[og]=!0);const zC=Ma(at,Sd,{});Ia.postStyleProps.forEach(og=>zC[og]=!0),Sd!==e&&Ze.add(Sd)});const lr=IM(Ze.values());return UH(e,this._triggerName,i,r,et,U,le,Lt,lr,rt,at,Cn)}}class nK{constructor(t,e,i){this.styles=t,this.defaultParams=e,this.normalizer=i}buildStyles(t,e){const i={},r=zv(this.defaultParams);return Object.keys(t).forEach(s=>{const l=t[s];null!=l&&(r[s]=l)}),this.styles.styles.forEach(s=>{if("string"!=typeof s){const l=s;Object.keys(l).forEach(d=>{let p=l[d];p.length>1&&(p=TM(p,r,e));const _=this.normalizer.normalizePropertyName(d,e);p=this.normalizer.normalizeStyleValue(d,_,p,e),i[_]=p})}}),i}}class rK{constructor(t,e,i){this.name=t,this.ast=e,this._normalizer=i,this.transitionFactories=[],this.states={},e.states.forEach(r=>{this.states[r.name]=new nK(r.style,r.options&&r.options.params||{},i)}),jH(this.states,"true","1"),jH(this.states,"false","0"),e.transitions.forEach(r=>{this.transitionFactories.push(new HH(t,r,this.states))}),this.fallbackTransition=function sK(n,t,e){return new HH(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(l,d)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,i,r){return this.transitionFactories.find(l=>l.match(t,e,i,r))||null}matchStyles(t,e,i){return this.fallbackTransition.buildStyles(t,e,i)}}function jH(n,t,e){n.hasOwnProperty(t)?n.hasOwnProperty(e)||(n[e]=n[t]):n.hasOwnProperty(e)&&(n[t]=n[e])}const oK=new FM;class aK{constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i,this._animations={},this._playersById={},this.players=[]}register(t,e){const i=[],s=s1(this._driver,e,i,[]);if(i.length)throw function uZ(n){return new c.vHH(3503,wn)}();this._animations[t]=s}_buildPlayer(t,e,i){const r=t.element,s=bH(0,this._normalizer,0,t.keyframes,e,i);return this._driver.animate(r,s,t.duration,t.delay,t.easing,[],!0)}create(t,e,i={}){const r=[],s=this._animations[t];let l;const d=new Map;if(s?(l=l1(this._driver,e,s,JP,DM,{},{},i,oK,r),l.forEach(b=>{const D=Ma(d,b.element,{});b.postStyleProps.forEach(I=>D[I]=null)})):(r.push(function dZ(){return new c.vHH(3300,wn)}()),l=[]),r.length)throw function hZ(n){return new c.vHH(3504,wn)}();d.forEach((b,D)=>{Object.keys(b).forEach(I=>{b[I]=this._driver.computeStyle(D,I,Cd)})});const _=xf(l.map(b=>{const D=d.get(b.element);return this._buildPlayer(b,{},D)}));return this._playersById[t]=_,_.onDestroy(()=>this.destroy(t)),this.players.push(_),_}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const i=this.players.indexOf(e);i>=0&&this.players.splice(i,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw function fZ(n){return new c.vHH(3301,wn)}();return e}listen(t,e,i,r){const s=ZP(e,"","","");return WP(this._getPlayer(t),i,s,r),()=>{}}command(t,e,i,r){if("register"==i)return void this.register(t,r[0]);if("create"==i)return void this.create(t,e,r[0]||{});const s=this._getPlayer(t);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const GH="ng-animate-queued",h1="ng-animate-disabled",hK=[],zH={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},fK={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},gl="__ng_removed";class f1{constructor(t,e=""){this.namespaceId=e;const i=t&&t.hasOwnProperty("value");if(this.value=function _K(n){return null!=n?n:null}(i?t.value:t),i){const s=zv(t);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const i=this.options.params;Object.keys(e).forEach(r=>{null==i[r]&&(i[r]=e[r])})}}}const TC="void",p1=new f1(TC);class pK{constructor(t,e,i){this.id=t,this.hostElement=e,this._engine=i,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,_l(e,this._hostClassName)}listen(t,e,i,r){if(!this._triggers.hasOwnProperty(e))throw function pZ(n,t){return new c.vHH(3302,wn)}();if(null==i||0==i.length)throw function mZ(n){return new c.vHH(3303,wn)}();if(!function vK(n){return"start"==n||"done"==n}(i))throw function gZ(n,t){return new c.vHH(3400,wn)}();const s=Ma(this._elementListeners,t,[]),l={name:e,phase:i,callback:r};s.push(l);const d=Ma(this._engine.statesByElement,t,{});return d.hasOwnProperty(e)||(_l(t,xM),_l(t,xM+"-"+e),d[e]=p1),()=>{this._engine.afterFlush(()=>{const p=s.indexOf(l);p>=0&&s.splice(p,1),this._triggers[e]||delete d[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw function _Z(n){return new c.vHH(3401,wn)}();return e}trigger(t,e,i,r=!0){const s=this._getTrigger(e),l=new m1(this.id,e,t);let d=this._engine.statesByElement.get(t);d||(_l(t,xM),_l(t,xM+"-"+e),this._engine.statesByElement.set(t,d={}));let p=d[e];const _=new f1(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&p&&_.absorbOptions(p.options),d[e]=_,p||(p=p1),_.value!==TC&&p.value===_.value){if(!function wK(n,t){const e=Object.keys(n),i=Object.keys(t);if(e.length!=i.length)return!1;for(let r=0;r<e.length;r++){const s=e[r];if(!t.hasOwnProperty(s)||n[s]!==t[s])return!1}return!0}(p.params,_.params)){const Q=[],le=s.matchStyles(p.value,p.params,Q),Ze=s.matchStyles(_.value,_.params,Q);Q.length?this._engine.reportError(Q):this._engine.afterFlush(()=>{Xm(t,le),cu(t,Ze)})}return}const I=Ma(this._engine.playersByElement,t,[]);I.forEach(Q=>{Q.namespaceId==this.id&&Q.triggerName==e&&Q.queued&&Q.destroy()});let P=s.matchTransition(p.value,_.value,t,_.params),U=!1;if(!P){if(!r)return;P=s.fallbackTransition,U=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:P,fromState:p,toState:_,player:l,isFallbackTransition:U}),U||(_l(t,GH),l.onStart(()=>{$v(t,GH)})),l.onDone(()=>{let Q=this.players.indexOf(l);Q>=0&&this.players.splice(Q,1);const le=this._engine.playersByElement.get(t);if(le){let Ze=le.indexOf(l);Ze>=0&&le.splice(Ze,1)}}),this.players.push(l),I.push(l),l}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,i)=>{delete e[t]}),this._elementListeners.forEach((e,i)=>{this._elementListeners.set(i,e.filter(r=>r.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(i=>i.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const i=this._engine.driver.query(t,SM,!0);i.forEach(r=>{if(r[gl])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(l=>l.triggerLeaveAnimation(r,e,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(t,e,i,r){const s=this._engine.statesByElement.get(t),l=new Map;if(s){const d=[];if(Object.keys(s).forEach(p=>{if(l.set(p,s[p].value),this._triggers[p]){const _=this.trigger(t,p,TC,r);_&&d.push(_)}}),d.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,l),i&&xf(d).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),i=this._engine.statesByElement.get(t);if(e&&i){const r=new Set;e.forEach(s=>{const l=s.name;if(r.has(l))return;r.add(l);const p=this._triggers[l].fallbackTransition,_=i[l]||p1,b=new f1(TC),D=new m1(this.id,l,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:l,transition:p,fromState:_,toState:b,player:D,isFallbackTransition:!0})})}}removeNode(t,e){const i=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(t):[];if(s&&s.length)r=!0;else{let l=t;for(;l=l.parentNode;)if(i.statesByElement.get(l)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)i.markElementAsRemoved(this.id,t,!1,e);else{const s=t[gl];(!s||s===zH)&&(i.afterFlush(()=>this.clearElementCache(t)),i.destroyInnerAnimations(t),i._onRemovalComplete(t,e))}}insertNode(t,e){_l(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const s=i.element,l=this._elementListeners.get(s);l&&l.forEach(d=>{if(d.name==i.triggerName){const p=ZP(s,i.triggerName,i.fromState.value,i.toState.value);p._data=t,WP(i.player,d.phase,p,d.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(i)}),this._queue=[],e.sort((i,r)=>{const s=i.transition.ast.depCount,l=r.transition.ast.depCount;return 0==s||0==l?s-l:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(i=>i.element===t)||e,e}}class mK{constructor(t,e,i){this.bodyNode=t,this.driver=e,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(i=>{i.queued&&t.push(i)})}),t}createNamespace(t,e){const i=new pK(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(i,e):(this.newHostElements.set(e,i),this.collectEnterElement(e)),this._namespaceLookup[t]=i}_balanceNamespaceList(t,e){const i=this._namespaceList,r=this.namespacesByHostElement,s=i.length-1;if(s>=0){let l=!1;if(void 0!==this.driver.getParentElement){let d=this.driver.getParentElement(e);for(;d;){const p=r.get(d);if(p){const _=i.indexOf(p);i.splice(_+1,0,t),l=!0;break}d=this.driver.getParentElement(d)}}else for(let d=s;d>=0;d--)if(this.driver.containsElement(i[d].hostElement,e)){i.splice(d+1,0,t),l=!0;break}l||i.unshift(t)}else i.push(t);return r.set(e,t),t}register(t,e){let i=this._namespaceLookup[t];return i||(i=this.createNamespace(t,e)),i}registerTrigger(t,e,i){let r=this._namespaceLookup[t];r&&r.register(e,i)&&this.totalAnimations++}destroy(t,e){if(!t)return;const i=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[t];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,i=this.statesByElement.get(t);if(i){const r=Object.keys(i);for(let s=0;s<r.length;s++){const l=i[r[s]].namespaceId;if(l){const d=this._fetchNamespace(l);d&&e.add(d)}}}return e}trigger(t,e,i,r){if(VM(e)){const s=this._fetchNamespace(t);if(s)return s.trigger(e,i,r),!0}return!1}insertNode(t,e,i,r){if(!VM(e))return;const s=e[gl];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const l=this.collectedLeaveElements.indexOf(e);l>=0&&this.collectedLeaveElements.splice(l,1)}if(t){const l=this._fetchNamespace(t);l&&l.insertNode(e,i)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),_l(t,h1)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),$v(t,h1))}removeNode(t,e,i,r){if(VM(e)){const s=t?this._fetchNamespace(t):null;if(s?s.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),i){const l=this.namespacesByHostElement.get(e);l&&l.id!==t&&l.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,i,r,s){this.collectedLeaveElements.push(e),e[gl]={namespaceId:t,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(t,e,i,r,s){return VM(e)?this._fetchNamespace(t).listen(e,i,r,s):()=>{}}_buildInstruction(t,e,i,r,s){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,i,r,t.fromState.options,t.toState.options,e,s)}destroyInnerAnimations(t){let e=this.driver.query(t,SM,!0);e.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,e1,!0),e.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return xf(this.players).onDone(()=>t());t()})}processLeaveNode(t){var e;const i=t[gl];if(i&&i.setForRemoval){if(t[gl]=zH,i.namespaceId){this.destroyInnerAnimations(t);const r=this._fetchNamespace(i.namespaceId);r&&r.clearElementCache(t)}this._onRemovalComplete(t,i.setForRemoval)}(null===(e=t.classList)||void 0===e?void 0:e.contains(h1))&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)_l(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{e=this._flushAnimations(i,t)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],e.length?xf(e).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(t){throw function vZ(n){return new c.vHH(3402,wn)}()}_flushAnimations(t,e){const i=new FM,r=[],s=new Map,l=[],d=new Map,p=new Map,_=new Map,b=new Set;this.disabledNodes.forEach(bt=>{b.add(bt);const Rt=this.driver.query(bt,".ng-animate-queued",!0);for(let Vt=0;Vt<Rt.length;Vt++)b.add(Rt[Vt])});const D=this.bodyNode,I=Array.from(this.statesByElement.keys()),P=WH(I,this.collectedEnterElements),U=new Map;let Q=0;P.forEach((bt,Rt)=>{const Vt=JP+Q++;U.set(Rt,Vt),bt.forEach(Ln=>_l(Ln,Vt))});const le=[],Ze=new Set,rt=new Set;for(let bt=0;bt<this.collectedLeaveElements.length;bt++){const Rt=this.collectedLeaveElements[bt],Vt=Rt[gl];Vt&&Vt.setForRemoval&&(le.push(Rt),Ze.add(Rt),Vt.hasAnimation?this.driver.query(Rt,".ng-star-inserted",!0).forEach(Ln=>Ze.add(Ln)):rt.add(Rt))}const at=new Map,et=WH(I,Array.from(Ze));et.forEach((bt,Rt)=>{const Vt=DM+Q++;at.set(Rt,Vt),bt.forEach(Ln=>_l(Ln,Vt))}),t.push(()=>{P.forEach((bt,Rt)=>{const Vt=U.get(Rt);bt.forEach(Ln=>$v(Ln,Vt))}),et.forEach((bt,Rt)=>{const Vt=at.get(Rt);bt.forEach(Ln=>$v(Ln,Vt))}),le.forEach(bt=>{this.processLeaveNode(bt)})});const Ot=[],Lt=[];for(let bt=this._namespaceList.length-1;bt>=0;bt--)this._namespaceList[bt].drainQueuedTransitions(e).forEach(Vt=>{const Ln=Vt.player,os=Vt.element;if(Ot.push(Ln),this.collectedEnterElements.length){const _o=os[gl];if(_o&&_o.setForMove){if(_o.previousTriggersValues&&_o.previousTriggersValues.has(Vt.triggerName)){const ag=_o.previousTriggersValues.get(Vt.triggerName),Nf=this.statesByElement.get(Vt.element);Nf&&Nf[Vt.triggerName]&&(Nf[Vt.triggerName].value=ag)}return void Ln.destroy()}}const fu=!D||!this.driver.containsElement(D,os),Aa=at.get(os),Pf=U.get(os),Wi=this._buildInstruction(Vt,i,Pf,Aa,fu);if(Wi.errors&&Wi.errors.length)return void Lt.push(Wi);if(fu)return Ln.onStart(()=>Xm(os,Wi.fromStyles)),Ln.onDestroy(()=>cu(os,Wi.toStyles)),void r.push(Ln);if(Vt.isFallbackTransition)return Ln.onStart(()=>Xm(os,Wi.fromStyles)),Ln.onDestroy(()=>cu(os,Wi.toStyles)),void r.push(Ln);const YG=[];Wi.timelines.forEach(_o=>{_o.stretchStartingKeyframe=!0,this.disabledNodes.has(_o.element)||YG.push(_o)}),Wi.timelines=YG,i.append(os,Wi.timelines),l.push({instruction:Wi,player:Ln,element:os}),Wi.queriedElements.forEach(_o=>Ma(d,_o,[]).push(Ln)),Wi.preStyleProps.forEach((_o,ag)=>{const Nf=Object.keys(_o);if(Nf.length){let lg=p.get(ag);lg||p.set(ag,lg=new Set),Nf.forEach(aN=>lg.add(aN))}}),Wi.postStyleProps.forEach((_o,ag)=>{const Nf=Object.keys(_o);let lg=_.get(ag);lg||_.set(ag,lg=new Set),Nf.forEach(aN=>lg.add(aN))})});if(Lt.length){const bt=[];Lt.forEach(Rt=>{bt.push(function yZ(n,t){return new c.vHH(3505,wn)}())}),Ot.forEach(Rt=>Rt.destroy()),this.reportError(bt)}const Cn=new Map,lr=new Map;l.forEach(bt=>{const Rt=bt.element;i.has(Rt)&&(lr.set(Rt,Rt),this._beforeAnimationBuild(bt.player.namespaceId,bt.instruction,Cn))}),r.forEach(bt=>{const Rt=bt.element;this._getPreviousPlayers(Rt,!1,bt.namespaceId,bt.triggerName,null).forEach(Ln=>{Ma(Cn,Rt,[]).push(Ln),Ln.destroy()})});const Ia=le.filter(bt=>ZH(bt,p,_)),Sd=new Map;qH(Sd,this.driver,rt,_,Cd).forEach(bt=>{ZH(bt,p,_)&&Ia.push(bt)});const zC=new Map;P.forEach((bt,Rt)=>{qH(zC,this.driver,new Set(bt),p,"!")}),Ia.forEach(bt=>{const Rt=Sd.get(bt),Vt=zC.get(bt);Sd.set(bt,Object.assign(Object.assign({},Rt),Vt))});const og=[],qG=[],WG={};l.forEach(bt=>{const{element:Rt,player:Vt,instruction:Ln}=bt;if(i.has(Rt)){if(b.has(Rt))return Vt.onDestroy(()=>cu(Rt,Ln.toStyles)),Vt.disabled=!0,Vt.overrideTotalTime(Ln.totalTime),void r.push(Vt);let os=WG;if(lr.size>1){let Aa=Rt;const Pf=[];for(;Aa=Aa.parentNode;){const Wi=lr.get(Aa);if(Wi){os=Wi;break}Pf.push(Aa)}Pf.forEach(Wi=>lr.set(Wi,os))}const fu=this._buildAnimation(Vt.namespaceId,Ln,Cn,s,zC,Sd);if(Vt.setRealPlayer(fu),os===WG)og.push(Vt);else{const Aa=this.playersByElement.get(os);Aa&&Aa.length&&(Vt.parentPlayer=xf(Aa)),r.push(Vt)}}else Xm(Rt,Ln.fromStyles),Vt.onDestroy(()=>cu(Rt,Ln.toStyles)),qG.push(Vt),b.has(Rt)&&r.push(Vt)}),qG.forEach(bt=>{const Rt=s.get(bt.element);if(Rt&&Rt.length){const Vt=xf(Rt);bt.setRealPlayer(Vt)}}),r.forEach(bt=>{bt.parentPlayer?bt.syncPlayerEvents(bt.parentPlayer):bt.destroy()});for(let bt=0;bt<le.length;bt++){const Rt=le[bt],Vt=Rt[gl];if($v(Rt,DM),Vt&&Vt.hasAnimation)continue;let Ln=[];if(d.size){let fu=d.get(Rt);fu&&fu.length&&Ln.push(...fu);let Aa=this.driver.query(Rt,e1,!0);for(let Pf=0;Pf<Aa.length;Pf++){let Wi=d.get(Aa[Pf]);Wi&&Wi.length&&Ln.push(...Wi)}}const os=Ln.filter(fu=>!fu.destroyed);os.length?yK(this,Rt,os):this.processLeaveNode(Rt)}return le.length=0,og.forEach(bt=>{this.players.push(bt),bt.onDone(()=>{bt.destroy();const Rt=this.players.indexOf(bt);this.players.splice(Rt,1)}),bt.play()}),og}elementContainsData(t,e){let i=!1;const r=e[gl];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(e)&&(i=!0),this.playersByQueriedElement.has(e)&&(i=!0),this.statesByElement.has(e)&&(i=!0),this._fetchNamespace(t).elementContainsData(e)||i}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,i,r,s){let l=[];if(e){const d=this.playersByQueriedElement.get(t);d&&(l=d)}else{const d=this.playersByElement.get(t);if(d){const p=!s||s==TC;d.forEach(_=>{_.queued||!p&&_.triggerName!=r||l.push(_)})}}return(i||r)&&(l=l.filter(d=>!(i&&i!=d.namespaceId||r&&r!=d.triggerName))),l}_beforeAnimationBuild(t,e,i){const s=e.element,l=e.isRemovalTransition?void 0:t,d=e.isRemovalTransition?void 0:e.triggerName;for(const p of e.timelines){const _=p.element,b=_!==s,D=Ma(i,_,[]);this._getPreviousPlayers(_,b,l,d,e.toState).forEach(P=>{const U=P.getRealPlayer();U.beforeDestroy&&U.beforeDestroy(),P.destroy(),D.push(P)})}Xm(s,e.fromStyles)}_buildAnimation(t,e,i,r,s,l){const d=e.triggerName,p=e.element,_=[],b=new Set,D=new Set,I=e.timelines.map(U=>{const Q=U.element;b.add(Q);const le=Q[gl];if(le&&le.removedBeforeQueried)return new SC(U.duration,U.delay);const Ze=Q!==p,rt=function bK(n){const t=[];return YH(n,t),t}((i.get(Q)||hK).map(Cn=>Cn.getRealPlayer())).filter(Cn=>!!Cn.element&&Cn.element===Q),at=s.get(Q),et=l.get(Q),Ot=bH(0,this._normalizer,0,U.keyframes,at,et),Lt=this._buildPlayer(U,Ot,rt);if(U.subTimeline&&r&&D.add(Q),Ze){const Cn=new m1(t,d,Q);Cn.setRealPlayer(Lt),_.push(Cn)}return Lt});_.forEach(U=>{Ma(this.playersByQueriedElement,U.element,[]).push(U),U.onDone(()=>function gK(n,t,e){let i;if(n instanceof Map){if(i=n.get(t),i){if(i.length){const r=i.indexOf(e);i.splice(r,1)}0==i.length&&n.delete(t)}}else if(i=n[t],i){if(i.length){const r=i.indexOf(e);i.splice(r,1)}0==i.length&&delete n[t]}return i}(this.playersByQueriedElement,U.element,U))}),b.forEach(U=>_l(U,AH));const P=xf(I);return P.onDestroy(()=>{b.forEach(U=>$v(U,AH)),cu(p,e.toStyles)}),D.forEach(U=>{Ma(r,U,[]).push(P)}),P}_buildPlayer(t,e,i){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,i):new SC(t.duration,t.delay)}}class m1{constructor(t,e,i){this.namespaceId=t,this.triggerName=e,this.element=i,this._player=new SC,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(i=>WP(t,e,void 0,i))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){Ma(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function VM(n){return n&&1===n.nodeType}function $H(n,t){const e=n.style.display;return n.style.display=null!=t?t:"none",e}function qH(n,t,e,i,r){const s=[];e.forEach(p=>s.push($H(p)));const l=[];i.forEach((p,_)=>{const b={};p.forEach(D=>{const I=b[D]=t.computeStyle(_,D,r);(!I||0==I.length)&&(_[gl]=fK,l.push(_))}),n.set(_,b)});let d=0;return e.forEach(p=>$H(p,s[d++])),l}function WH(n,t){const e=new Map;if(n.forEach(d=>e.set(d,[])),0==t.length)return e;const r=new Set(t),s=new Map;function l(d){if(!d)return 1;let p=s.get(d);if(p)return p;const _=d.parentNode;return p=e.has(_)?_:r.has(_)?1:l(_),s.set(d,p),p}return t.forEach(d=>{const p=l(d);1!==p&&e.get(p).push(d)}),e}function _l(n,t){var e;null===(e=n.classList)||void 0===e||e.add(t)}function $v(n,t){var e;null===(e=n.classList)||void 0===e||e.remove(t)}function yK(n,t,e){xf(e).onDone(()=>n.processLeaveNode(t))}function YH(n,t){for(let e=0;e<n.length;e++){const i=n[e];i instanceof vH?YH(i.players,t):t.push(i)}}function ZH(n,t,e){const i=e.get(n);if(!i)return!1;let r=t.get(n);return r?i.forEach(s=>r.add(s)):t.set(n,i),e.delete(n),!0}class UM{constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new mK(t,e,i),this._timelineEngine=new aK(t,e,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(t,e,i,r,s){const l=t+"-"+r;let d=this._triggerCache[l];if(!d){const p=[],b=s1(this._driver,s,p,[]);if(p.length)throw function lZ(n,t){return new c.vHH(3404,wn)}();d=function iK(n,t,e){return new rK(n,t,e)}(r,b,this._normalizer),this._triggerCache[l]=d}this._transitionEngine.registerTrigger(e,r,d)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,i,r){this._transitionEngine.insertNode(t,e,i,r)}onRemove(t,e,i,r){this._transitionEngine.removeNode(t,e,r||!1,i)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,i,r){if("@"==i.charAt(0)){const[s,l]=wH(i);this._timelineEngine.command(s,e,l,r)}else this._transitionEngine.trigger(t,e,i,r)}listen(t,e,i,r,s){if("@"==i.charAt(0)){const[l,d]=wH(i);return this._timelineEngine.listen(l,e,d,s)}return this._transitionEngine.listen(t,e,i,r,s)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let EK=(()=>{class n{constructor(e,i,r){this._element=e,this._startStyles=i,this._endStyles=r,this._state=0;let s=n.initialStylesByElement.get(e);s||n.initialStylesByElement.set(e,s={}),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&cu(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(cu(this._element,this._initialStyles),this._endStyles&&(cu(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Xm(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Xm(this._element,this._endStyles),this._endStyles=null),cu(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function g1(n){let t=null;const e=Object.keys(n);for(let i=0;i<e.length;i++){const r=e[i];DK(r)&&(t=t||{},t[r]=n[r])}return t}function DK(n){return"display"===n||"position"===n}class KH{constructor(t,e,i,r){this.element=t,this.keyframes=e,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,i){return t.animate(e,i)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};if(this.hasStarted()){const e=this._finalKeyframe;Object.keys(e).forEach(i=>{"offset"!=i&&(t[i]=this._finished?e[i]:NH(this.element,i))})}this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class xK{validateStyleProperty(t){return xH(t)}matchesElement(t,e){return!1}containsElement(t,e){return SH(t,e)}getParentElement(t){return QP(t)}query(t,e,i){return MH(t,e,i)}computeStyle(t,e,i){return window.getComputedStyle(t)[e]}animate(t,e,i,r,s,l=[]){const p={duration:i,delay:r,fill:0==r?"both":"forwards"};s&&(p.easing=s);const _={},b=l.filter(I=>I instanceof KH);(function IZ(n,t){return 0===n||0===t})(i,r)&&b.forEach(I=>{let P=I.currentSnapshot;Object.keys(P).forEach(U=>_[U]=P[U])}),e=function AZ(n,t,e){const i=Object.keys(e);if(i.length&&t.length){let s=t[0],l=[];if(i.forEach(d=>{s.hasOwnProperty(d)||l.push(d),s[d]=e[d]}),l.length)for(var r=1;r<t.length;r++){let d=t[r];l.forEach(function(p){d[p]=NH(n,p)})}}return t}(t,e=e.map(I=>Sf(I,!1)),_);const D=function CK(n,t){let e=null,i=null;return Array.isArray(t)&&t.length?(e=g1(t[0]),t.length>1&&(i=g1(t[t.length-1]))):t&&(e=g1(t)),e||i?new EK(n,e,i):null}(t,e);return new KH(t,e,p,D)}}let SK=(()=>{class n extends mH{constructor(e,i){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(i.body,{id:"0",encapsulation:c.ifc.None,styles:[],data:{animation:[]}})}build(e){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(e)?gH(e):e;return QH(this._renderer,null,i,"register",[r]),new MK(i,this._renderer)}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(c.FYo),c.LFG(oe))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class MK extends class UY{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new TK(this._id,t,e||{},this._renderer)}}class TK{constructor(t,e,i,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return QH(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){var t,e;return null!==(e=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==e?e:0}}function QH(n,t,e,i,r){return n.setProperty(t,`@@${e}:${i}`,r)}const XH="@.disabled";let IK=(()=>{class n{constructor(e,i,r){this.delegate=e,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(s,l)=>{const d=null==l?void 0:l.parentNode(s);d&&l.removeChild(d,s)}}createRenderer(e,i){const s=this.delegate.createRenderer(e,i);if(!(e&&i&&i.data&&i.data.animation)){let b=this._rendererCache.get(s);return b||(b=new JH("",s,this.engine),this._rendererCache.set(s,b)),b}const l=i.id,d=i.id+"-"+this._currentId;this._currentId++,this.engine.register(d,e);const p=b=>{Array.isArray(b)?b.forEach(p):this.engine.registerTrigger(l,d,e,b.name,b)};return i.data.animation.forEach(p),new AK(this,d,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,i,r){e>=0&&e<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[l,d]=s;l(d)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(c.FYo),c.LFG(UM),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class JH{constructor(t,e,i){this.namespaceId=t,this.delegate=e,this.engine=i,this.destroyNode=this.delegate.destroyNode?r=>e.destroyNode(r):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,i,r=!0){this.delegate.insertBefore(t,e,i),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,i){this.engine.onRemove(this.namespaceId,e,this.delegate,i)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,i,r){this.delegate.setAttribute(t,e,i,r)}removeAttribute(t,e,i){this.delegate.removeAttribute(t,e,i)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,i,r){this.delegate.setStyle(t,e,i,r)}removeStyle(t,e,i){this.delegate.removeStyle(t,e,i)}setProperty(t,e,i){"@"==e.charAt(0)&&e==XH?this.disableAnimations(t,!!i):this.delegate.setProperty(t,e,i)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,i){return this.delegate.listen(t,e,i)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class AK extends JH{constructor(t,e,i,r){super(e,i,r),this.factory=t,this.namespaceId=e}setProperty(t,e,i){"@"==e.charAt(0)?"."==e.charAt(1)&&e==XH?this.disableAnimations(t,i=void 0===i||!!i):this.engine.process(this.namespaceId,t,e.substr(1),i):this.delegate.setProperty(t,e,i)}listen(t,e,i){if("@"==e.charAt(0)){const r=function kK(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(t);let s=e.substr(1),l="";return"@"!=s.charAt(0)&&([s,l]=function RK(n){const t=n.indexOf(".");return[n.substring(0,t),n.substr(t+1)]}(s)),this.engine.listen(this.namespaceId,r,s,l,d=>{this.factory.scheduleListenerCallback(d._data||-1,i,d)})}return this.delegate.listen(t,e,i)}}let OK=(()=>{class n extends UM{constructor(e,i,r){super(e.body,i,r)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(oe),c.LFG(XP),c.LFG(u1))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const vl=new c.OlP("AnimationModuleType"),ej=[{provide:mH,useClass:SK},{provide:u1,useFactory:function PK(){return new XZ}},{provide:UM,useClass:OK},{provide:c.FYo,useFactory:function NK(n,t,e){return new IK(n,t,e)},deps:[ei,UM,c.R0b]}],tj=[{provide:XP,useFactory:()=>new xK},{provide:vl,useValue:"BrowserAnimations"},...ej],FK=[{provide:XP,useClass:TH},{provide:vl,useValue:"NoopAnimations"},...ej];let LK=(()=>{class n{static withConfig(e){return{ngModule:n,providers:e.disableAnimations?FK:tj}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:tj,imports:[Ec]}),n})();const VK=new c.OlP("mat-sanity-checks",{providedIn:"root",factory:function BK(){return!0}});let St=(()=>{class n{constructor(e,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!HP()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(pH),c.LFG(VK,8),c.LFG(oe))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Vv],Vv]}),n})();function IC(n){return class extends n{constructor(...t){super(...t),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=vn(t)}}}function qv(n,t){return class extends n{constructor(...e){super(...e),this.defaultColor=t,this.color=t}get color(){return this._color}set color(e){const i=e||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}}}function eg(n){return class extends n{constructor(...t){super(...t),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=vn(t)}}}function UK(n){return class extends n{constructor(...t){super(...t),this.stateChanges=new Tt.x,this.errorState=!1}updateErrorState(){const t=this.errorState,s=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);s!==t&&(this.errorState=s,this.stateChanges.next())}}}const HK=new c.OlP("MAT_DATE_LOCALE",{providedIn:"root",factory:function jK(){return(0,c.f3M)(c.soG)}});class uu{constructor(){this._localeChanges=new Tt.x,this.localeChanges=this._localeChanges}getValidDateOrNull(t){return this.isDateInstance(t)&&this.isValid(t)?t:null}deserialize(t){return null==t||this.isDateInstance(t)&&this.isValid(t)?t:this.invalid()}setLocale(t){this.locale=t,this._localeChanges.next()}compareDate(t,e){return this.getYear(t)-this.getYear(e)||this.getMonth(t)-this.getMonth(e)||this.getDate(t)-this.getDate(e)}sameDate(t,e){if(t&&e){let i=this.isValid(t),r=this.isValid(e);return i&&r?!this.compareDate(t,e):i==r}return t==e}clampDate(t,e,i){return e&&this.compareDate(t,e)<0?e:i&&this.compareDate(t,i)>0?i:t}}const y1=new c.OlP("mat-date-formats"),GK=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|(?:(?:\+|-)\d{2}:\d{2}))?)?$/;function b1(n,t){const e=Array(n);for(let i=0;i<n;i++)e[i]=t(i);return e}let zK=(()=>{class n extends uu{constructor(e,i){super(),this.useUtcForDisplay=!1,super.setLocale(e)}getYear(e){return e.getFullYear()}getMonth(e){return e.getMonth()}getDate(e){return e.getDate()}getDayOfWeek(e){return e.getDay()}getMonthNames(e){const i=new Intl.DateTimeFormat(this.locale,{month:e,timeZone:"utc"});return b1(12,r=>this._format(i,new Date(2017,r,1)))}getDateNames(){const e=new Intl.DateTimeFormat(this.locale,{day:"numeric",timeZone:"utc"});return b1(31,i=>this._format(e,new Date(2017,0,i+1)))}getDayOfWeekNames(e){const i=new Intl.DateTimeFormat(this.locale,{weekday:e,timeZone:"utc"});return b1(7,r=>this._format(i,new Date(2017,0,r+1)))}getYearName(e){const i=new Intl.DateTimeFormat(this.locale,{year:"numeric",timeZone:"utc"});return this._format(i,e)}getFirstDayOfWeek(){return 0}getNumDaysInMonth(e){return this.getDate(this._createDateWithOverflow(this.getYear(e),this.getMonth(e)+1,0))}clone(e){return new Date(e.getTime())}createDate(e,i,r){let s=this._createDateWithOverflow(e,i,r);return s.getMonth(),s}today(){return new Date}parse(e){return"number"==typeof e?new Date(e):e?new Date(Date.parse(e)):null}format(e,i){if(!this.isValid(e))throw Error("NativeDateAdapter: Cannot format invalid date.");const r=new Intl.DateTimeFormat(this.locale,Object.assign(Object.assign({},i),{timeZone:"utc"}));return this._format(r,e)}addCalendarYears(e,i){return this.addCalendarMonths(e,12*i)}addCalendarMonths(e,i){let r=this._createDateWithOverflow(this.getYear(e),this.getMonth(e)+i,this.getDate(e));return this.getMonth(r)!=((this.getMonth(e)+i)%12+12)%12&&(r=this._createDateWithOverflow(this.getYear(r),this.getMonth(r),0)),r}addCalendarDays(e,i){return this._createDateWithOverflow(this.getYear(e),this.getMonth(e),this.getDate(e)+i)}toIso8601(e){return[e.getUTCFullYear(),this._2digit(e.getUTCMonth()+1),this._2digit(e.getUTCDate())].join("-")}deserialize(e){if("string"==typeof e){if(!e)return null;if(GK.test(e)){let i=new Date(e);if(this.isValid(i))return i}}return super.deserialize(e)}isDateInstance(e){return e instanceof Date}isValid(e){return!isNaN(e.getTime())}invalid(){return new Date(NaN)}_createDateWithOverflow(e,i,r){const s=new Date;return s.setFullYear(e,i,r),s.setHours(0,0,0,0),s}_2digit(e){return("00"+e).slice(-2)}_format(e,i){const r=new Date;return r.setUTCFullYear(i.getFullYear(),i.getMonth(),i.getDate()),r.setUTCHours(i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()),e.format(r)}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(HK,8),c.LFG(Gs))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const $K={parse:{dateInput:null},display:{dateInput:{year:"numeric",month:"numeric",day:"numeric"},monthYearLabel:{year:"numeric",month:"short"},dateA11yLabel:{year:"numeric",month:"long",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"long"}}};let qK=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[{provide:uu,useClass:zK}]}),n})(),ij=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[{provide:y1,useValue:$K}],imports:[[qK]]}),n})(),w1=(()=>{class n{isErrorState(e,i){return!!(e&&e.invalid&&(e.touched||i&&i.submitted))}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),jM=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[St],St]}),n})();class ZK{constructor(t,e,i){this._renderer=t,this.element=e,this.config=i,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const rj={enterDuration:225,exitDuration:150},C1=Ef({passive:!0}),sj=["mousedown","touchstart"],oj=["mouseup","mouseleave","touchend","touchcancel"];class QK{constructor(t,e,i,r){this._target=t,this._ngZone=e,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=wd(i))}fadeInRipple(t,e,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=Object.assign(Object.assign({},rj),i.animation);i.centered&&(t=r.left+r.width/2,e=r.top+r.height/2);const l=i.radius||function JK(n,t,e){const i=Math.max(Math.abs(n-e.left),Math.abs(n-e.right)),r=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(i*i+r*r)}(t,e,r),d=t-r.left,p=e-r.top,_=s.enterDuration,b=document.createElement("div");b.classList.add("mat-ripple-element"),b.style.left=d-l+"px",b.style.top=p-l+"px",b.style.height=2*l+"px",b.style.width=2*l+"px",null!=i.color&&(b.style.backgroundColor=i.color),b.style.transitionDuration=`${_}ms`,this._containerElement.appendChild(b),function XK(n){window.getComputedStyle(n).getPropertyValue("opacity")}(b),b.style.transform="scale(1)";const D=new ZK(this,b,i);return D.state=0,this._activeRipples.add(D),i.persistent||(this._mostRecentTransientRipple=D),this._runTimeoutOutsideZone(()=>{const I=D===this._mostRecentTransientRipple;D.state=1,!i.persistent&&(!I||!this._isPointerDown)&&D.fadeOut()},_),D}fadeOutRipple(t){const e=this._activeRipples.delete(t);if(t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!e)return;const i=t.element,r=Object.assign(Object.assign({},rj),t.config.animation);i.style.transitionDuration=`${r.exitDuration}ms`,i.style.opacity="0",t.state=2,this._runTimeoutOutsideZone(()=>{t.state=3,i.remove()},r.exitDuration)}fadeOutAll(){this._activeRipples.forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){const e=wd(t);!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,this._registerEvents(sj))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(oj),this._pointerUpEventsRegistered=!0)}_onMousedown(t){const e=cH(t),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!e&&!i&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!uH(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;for(let i=0;i<e.length;i++)this.fadeInRipple(e[i].clientX,e[i].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_runTimeoutOutsideZone(t,e=0){this._ngZone.runOutsideAngular(()=>setTimeout(t,e))}_registerEvents(t){this._ngZone.runOutsideAngular(()=>{t.forEach(e=>{this._triggerElement.addEventListener(e,this,C1)})})}_removeTriggerEvents(){this._triggerElement&&(sj.forEach(t=>{this._triggerElement.removeEventListener(t,this,C1)}),this._pointerUpEventsRegistered&&oj.forEach(t=>{this._triggerElement.removeEventListener(t,this,C1)}))}}const e7=new c.OlP("mat-ripple-global-options");let Mf=(()=>{class n{constructor(e,i,r,s,l){this._elementRef=e,this._animationMode=l,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new QK(this,i,e,r)}get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,i=0,r){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,i,Object.assign(Object.assign({},this.rippleConfig),r)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),e))}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(c.SBq),c.Y36(c.R0b),c.Y36(Gs),c.Y36(e7,8),c.Y36(vl,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(e,i){2&e&&c.ekj("mat-ripple-unbounded",i.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),du=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[St],St]}),n})(),E1=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[St]]}),n})(),aj=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[du,Jn,St,E1]]}),n})();const n7=["connectionContainer"],r7=["inputContainer"],s7=["label"];function o7(n,t){1&n&&(c.ynx(0),c.TgZ(1,"div",14),c._UZ(2,"div",15)(3,"div",16)(4,"div",17),c.qZA(),c.TgZ(5,"div",18),c._UZ(6,"div",15)(7,"div",16)(8,"div",17),c.qZA(),c.BQk())}function a7(n,t){if(1&n){const e=c.EpF();c.TgZ(0,"div",19),c.NdJ("cdkObserveContent",function(){return c.CHM(e),c.oxw().updateOutlineGap()}),c.Hsn(1,1),c.qZA()}if(2&n){const e=c.oxw();c.Q6J("cdkObserveContentDisabled","outline"!=e.appearance)}}function l7(n,t){if(1&n&&(c.ynx(0),c.Hsn(1,2),c.TgZ(2,"span"),c._uU(3),c.qZA(),c.BQk()),2&n){const e=c.oxw(2);c.xp6(3),c.Oqu(e._control.placeholder)}}function c7(n,t){1&n&&c.Hsn(0,3,["*ngSwitchCase","true"])}function u7(n,t){1&n&&(c.TgZ(0,"span",23),c._uU(1," *"),c.qZA())}function d7(n,t){if(1&n){const e=c.EpF();c.TgZ(0,"label",20,21),c.NdJ("cdkObserveContent",function(){return c.CHM(e),c.oxw().updateOutlineGap()}),c.YNc(2,l7,4,1,"ng-container",12),c.YNc(3,c7,1,0,"ng-content",12),c.YNc(4,u7,2,0,"span",22),c.qZA()}if(2&n){const e=c.oxw();c.ekj("mat-empty",e._control.empty&&!e._shouldAlwaysFloat())("mat-form-field-empty",e._control.empty&&!e._shouldAlwaysFloat())("mat-accent","accent"==e.color)("mat-warn","warn"==e.color),c.Q6J("cdkObserveContentDisabled","outline"!=e.appearance)("id",e._labelId)("ngSwitch",e._hasLabel()),c.uIk("for",e._control.id)("aria-owns",e._control.id),c.xp6(2),c.Q6J("ngSwitchCase",!1),c.xp6(1),c.Q6J("ngSwitchCase",!0),c.xp6(1),c.Q6J("ngIf",!e.hideRequiredMarker&&e._control.required&&!e._control.disabled)}}function h7(n,t){1&n&&(c.TgZ(0,"div",24),c.Hsn(1,4),c.qZA())}function f7(n,t){if(1&n&&(c.TgZ(0,"div",25),c._UZ(1,"span",26),c.qZA()),2&n){const e=c.oxw();c.xp6(1),c.ekj("mat-accent","accent"==e.color)("mat-warn","warn"==e.color)}}function p7(n,t){if(1&n&&(c.TgZ(0,"div"),c.Hsn(1,5),c.qZA()),2&n){const e=c.oxw();c.Q6J("@transitionMessages",e._subscriptAnimationState)}}function m7(n,t){if(1&n&&(c.TgZ(0,"div",30),c._uU(1),c.qZA()),2&n){const e=c.oxw(2);c.Q6J("id",e._hintLabelId),c.xp6(1),c.Oqu(e.hintLabel)}}function g7(n,t){if(1&n&&(c.TgZ(0,"div",27),c.YNc(1,m7,2,2,"div",28),c.Hsn(2,6),c._UZ(3,"div",29),c.Hsn(4,7),c.qZA()),2&n){const e=c.oxw();c.Q6J("@transitionMessages",e._subscriptAnimationState),c.xp6(1),c.Q6J("ngIf",e.hintLabel)}}const _7=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],v7=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],y7=new c.OlP("MatError"),b7={transitionMessages:er("transitionMessages",[an("enter",pt({opacity:1,transform:"translateY(0%)"})),bn("void => enter",[pt({opacity:0,transform:"translateY(-5px)"}),Pn("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let D1=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=c.lG2({type:n}),n})();const w7=new c.OlP("MatHint");let tg=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=c.lG2({type:n,selectors:[["mat-label"]]}),n})(),C7=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=c.lG2({type:n,selectors:[["mat-placeholder"]]}),n})();const E7=new c.OlP("MatPrefix"),D7=new c.OlP("MatSuffix");let lj=0;const S7=qv(class{constructor(n){this._elementRef=n}},"primary"),M7=new c.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),x1=new c.OlP("MatFormField");let RC=(()=>{class n extends S7{constructor(e,i,r,s,l,d,p){super(e),this._changeDetectorRef=i,this._dir=r,this._defaults=s,this._platform=l,this._ngZone=d,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new Tt.x,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+lj++,this._labelId="mat-form-field-label-"+lj++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==p,this.appearance=s&&s.appearance?s.appearance:"legacy",this._hideRequiredMarker=!(!s||null==s.hideRequiredMarker)&&s.hideRequiredMarker}get appearance(){return this._appearance}set appearance(e){const i=this._appearance;this._appearance=e||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&i!==e&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(e){this._hideRequiredMarker=vn(e)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(e){this._hintLabel=e,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(e){e!==this._floatLabel&&(this._floatLabel=e||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(e){this._explicitFormFieldControl=e}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const e=this._control;e.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${e.controlType}`),e.stateChanges.pipe(Zi(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),e.ngControl&&e.ngControl.valueChanges&&e.ngControl.valueChanges.pipe(ss(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(ss(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,Nu.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(Zi(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(Zi(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(ss(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(e){const i=this._control?this._control.ngControl:null;return i&&i[e]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,Bv(this._label.nativeElement,"transitionend").pipe((0,qn.q)(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let e=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&e.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const i=this._hintChildren?this._hintChildren.find(s=>"start"===s.align):null,r=this._hintChildren?this._hintChildren.find(s=>"end"===s.align):null;i?e.push(i.id):this._hintLabel&&e.push(this._hintLabelId),r&&e.push(r.id)}else this._errorChildren&&e.push(...this._errorChildren.map(i=>i.id));this._control.setDescribedByIds(e)}}_validateControlChild(){}updateOutlineGap(){const e=this._label?this._label.nativeElement:null,i=this._connectionContainerRef.nativeElement,r=".mat-form-field-outline-start",s=".mat-form-field-outline-gap";if("outline"!==this.appearance||!this._platform.isBrowser)return;if(!e||!e.children.length||!e.textContent.trim()){const b=i.querySelectorAll(`${r}, ${s}`);for(let D=0;D<b.length;D++)b[D].style.width="0";return}if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let l=0,d=0;const p=i.querySelectorAll(r),_=i.querySelectorAll(s);if(this._label&&this._label.nativeElement.children.length){const b=i.getBoundingClientRect();if(0===b.width&&0===b.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const D=this._getStartEnd(b),I=e.children,P=this._getStartEnd(I[0].getBoundingClientRect());let U=0;for(let Q=0;Q<I.length;Q++)U+=I[Q].offsetWidth;l=Math.abs(P-D)-5,d=U>0?.75*U+10:0}for(let b=0;b<p.length;b++)p[b].style.width=`${l}px`;for(let b=0;b<_.length;b++)_[b].style.width=`${d}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(e){return this._dir&&"rtl"===this._dir.value?e.right:e.left}_isAttachedToDOM(){const e=this._elementRef.nativeElement;if(e.getRootNode){const i=e.getRootNode();return i&&i!==e}return document.documentElement.contains(e)}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(c.SBq),c.Y36(c.sBO),c.Y36(qm,8),c.Y36(M7,8),c.Y36(Gs),c.Y36(c.R0b),c.Y36(vl,8))},n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-form-field"]],contentQueries:function(e,i,r){if(1&e&&(c.Suo(r,D1,5),c.Suo(r,D1,7),c.Suo(r,tg,5),c.Suo(r,tg,7),c.Suo(r,C7,5),c.Suo(r,y7,5),c.Suo(r,w7,5),c.Suo(r,E7,5),c.Suo(r,D7,5)),2&e){let s;c.iGM(s=c.CRH())&&(i._controlNonStatic=s.first),c.iGM(s=c.CRH())&&(i._controlStatic=s.first),c.iGM(s=c.CRH())&&(i._labelChildNonStatic=s.first),c.iGM(s=c.CRH())&&(i._labelChildStatic=s.first),c.iGM(s=c.CRH())&&(i._placeholderChild=s.first),c.iGM(s=c.CRH())&&(i._errorChildren=s),c.iGM(s=c.CRH())&&(i._hintChildren=s),c.iGM(s=c.CRH())&&(i._prefixChildren=s),c.iGM(s=c.CRH())&&(i._suffixChildren=s)}},viewQuery:function(e,i){if(1&e&&(c.Gf(n7,7),c.Gf(r7,5),c.Gf(s7,5)),2&e){let r;c.iGM(r=c.CRH())&&(i._connectionContainerRef=r.first),c.iGM(r=c.CRH())&&(i._inputContainerRef=r.first),c.iGM(r=c.CRH())&&(i._label=r.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(e,i){2&e&&c.ekj("mat-form-field-appearance-standard","standard"==i.appearance)("mat-form-field-appearance-fill","fill"==i.appearance)("mat-form-field-appearance-outline","outline"==i.appearance)("mat-form-field-appearance-legacy","legacy"==i.appearance)("mat-form-field-invalid",i._control.errorState)("mat-form-field-can-float",i._canLabelFloat())("mat-form-field-should-float",i._shouldLabelFloat())("mat-form-field-has-label",i._hasFloatingLabel())("mat-form-field-hide-placeholder",i._hideControlPlaceholder())("mat-form-field-disabled",i._control.disabled)("mat-form-field-autofilled",i._control.autofilled)("mat-focused",i._control.focused)("ng-untouched",i._shouldForward("untouched"))("ng-touched",i._shouldForward("touched"))("ng-pristine",i._shouldForward("pristine"))("ng-dirty",i._shouldForward("dirty"))("ng-valid",i._shouldForward("valid"))("ng-invalid",i._shouldForward("invalid"))("ng-pending",i._shouldForward("pending"))("_mat-animation-noopable",!i._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[c._Bn([{provide:x1,useExisting:n}]),c.qOj],ngContentSelectors:v7,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(e,i){1&e&&(c.F$t(_7),c.TgZ(0,"div",0)(1,"div",1,2),c.NdJ("click",function(s){return i._control.onContainerClick&&i._control.onContainerClick(s)}),c.YNc(3,o7,9,0,"ng-container",3),c.YNc(4,a7,2,1,"div",4),c.TgZ(5,"div",5,6),c.Hsn(7),c.TgZ(8,"span",7),c.YNc(9,d7,5,16,"label",8),c.qZA()(),c.YNc(10,h7,2,0,"div",9),c.qZA(),c.YNc(11,f7,2,4,"div",10),c.TgZ(12,"div",11),c.YNc(13,p7,2,1,"div",12),c.YNc(14,g7,5,2,"div",13),c.qZA()()),2&e&&(c.xp6(3),c.Q6J("ngIf","outline"==i.appearance),c.xp6(1),c.Q6J("ngIf",i._prefixChildren.length),c.xp6(5),c.Q6J("ngIf",i._hasFloatingLabel()),c.xp6(1),c.Q6J("ngIf",i._suffixChildren.length),c.xp6(1),c.Q6J("ngIf","outline"!=i.appearance),c.xp6(1),c.Q6J("ngSwitch",i._getDisplayedMessages()),c.xp6(1),c.Q6J("ngSwitchCase","error"),c.xp6(1),c.Q6J("ngSwitchCase","hint"))},directives:[Bi,LP,Mr,hr],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.cdk-high-contrast-active .mat-form-field-disabled .mat-form-field-label{color:GrayText}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-flex{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px;border-top-color:GrayText}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{color:GrayText}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[b7.transitionMessages]},changeDetection:0}),n})(),OC=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Jn,St,EC],St]}),n})();const uj=Ef({passive:!0});let T7=(()=>{class n{constructor(e,i){this._platform=e,this._ngZone=i,this._monitoredElements=new Map}monitor(e){if(!this._platform.isBrowser)return Mo.E;const i=wd(e),r=this._monitoredElements.get(i);if(r)return r.subject;const s=new Tt.x,l="cdk-text-field-autofilled",d=p=>{"cdk-text-field-autofill-start"!==p.animationName||i.classList.contains(l)?"cdk-text-field-autofill-end"===p.animationName&&i.classList.contains(l)&&(i.classList.remove(l),this._ngZone.run(()=>s.next({target:p.target,isAutofilled:!1}))):(i.classList.add(l),this._ngZone.run(()=>s.next({target:p.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{i.addEventListener("animationstart",d,uj),i.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(i,{subject:s,unlisten:()=>{i.removeEventListener("animationstart",d,uj)}}),s}stopMonitoring(e){const i=wd(e),r=this._monitoredElements.get(i);r&&(r.unlisten(),r.subject.complete(),i.classList.remove("cdk-text-field-autofill-monitored"),i.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(i))}ngOnDestroy(){this._monitoredElements.forEach((e,i)=>this.stopMonitoring(i))}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(Gs),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),dj=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();const hj=new c.OlP("MAT_INPUT_VALUE_ACCESSOR"),I7=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let A7=0;const k7=UK(class{constructor(n,t,e,i){this._defaultErrorStateMatcher=n,this._parentForm=t,this._parentFormGroup=e,this.ngControl=i}});let PC=(()=>{class n extends k7{constructor(e,i,r,s,l,d,p,_,b,D){super(d,s,l,r),this._elementRef=e,this._platform=i,this._autofillMonitor=_,this._formField=D,this._uid="mat-input-"+A7++,this.focused=!1,this.stateChanges=new Tt.x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(U=>QU().has(U)),this._iOSKeyupListener=U=>{const Q=U.target;!Q.value&&0===Q.selectionStart&&0===Q.selectionEnd&&(Q.setSelectionRange(1,1),Q.setSelectionRange(0,0))};const I=this._elementRef.nativeElement,P=I.nodeName.toLowerCase();this._inputValueAccessor=p||I,this._previousNativeValue=this.value,this.id=this.id,i.IOS&&b.runOutsideAngular(()=>{e.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===P,this._isTextarea="textarea"===P,this._isInFormField=!!D,this._isNativeSelect&&(this.controlType=I.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(e){this._disabled=vn(e),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(e){this._id=e||this._uid}get required(){var e,i,r,s;return null!==(s=null!==(e=this._required)&&void 0!==e?e:null===(r=null===(i=this.ngControl)||void 0===i?void 0:i.control)||void 0===r?void 0:r.hasValidator(B2.required))&&void 0!==s&&s}set required(e){this._required=vn(e)}get type(){return this._type}set type(e){this._type=e||"text",this._validateType(),!this._isTextarea&&QU().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(e){e!==this.value&&(this._inputValueAccessor.value=e,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(e){this._readonly=vn(e)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(e=>{this.autofilled=e.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(e){this._elementRef.nativeElement.focus(e)}_focusChanged(e){e!==this.focused&&(this.focused=e,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){var e,i;const r=(null===(i=null===(e=this._formField)||void 0===e?void 0:e._hideControlPlaceholder)||void 0===i?void 0:i.call(e))?null:this.placeholder;if(r!==this._previousPlaceholder){const s=this._elementRef.nativeElement;this._previousPlaceholder=r,r?s.setAttribute("placeholder",r):s.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const e=this._elementRef.nativeElement.value;this._previousNativeValue!==e&&(this._previousNativeValue=e,this.stateChanges.next())}_validateType(){I7.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let e=this._elementRef.nativeElement.validity;return e&&e.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const e=this._elementRef.nativeElement,i=e.options[0];return this.focused||e.multiple||!this.empty||!!(e.selectedIndex>-1&&i&&i.label)}return this.focused||!this.empty}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const e=this._elementRef.nativeElement;return this._isNativeSelect&&(e.multiple||e.size>1)}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(c.SBq),c.Y36(Gs),c.Y36(bd,10),c.Y36(mM,8),c.Y36(gM,8),c.Y36(w1),c.Y36(hj,10),c.Y36(T7),c.Y36(c.R0b),c.Y36(x1,8))},n.\u0275dir=c.lG2({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:12,hostBindings:function(e,i){1&e&&c.NdJ("focus",function(){return i._focusChanged(!0)})("blur",function(){return i._focusChanged(!1)})("input",function(){return i._onInput()}),2&e&&(c.Ikx("disabled",i.disabled)("required",i.required),c.uIk("id",i.id)("data-placeholder",i.placeholder)("name",i.name||null)("readonly",i.readonly&&!i._isNativeSelect||null)("aria-invalid",i.empty&&i.required?null:i.errorState)("aria-required",i.required),c.ekj("mat-input-server",i._isServer)("mat-native-select-inline",i._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[c._Bn([{provide:D1,useExisting:n}]),c.qOj,c.TTD]}),n})(),fj=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[w1],imports:[[dj,OC,St],dj,OC]}),n})();const R7=["mat-button",""],O7=["*"],N7=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],F7=qv(IC(eg(class{constructor(n){this._elementRef=n}})));let Wv=(()=>{class n extends F7{constructor(e,i,r){super(e),this._focusMonitor=i,this._animationMode=r,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const s of N7)this._hasHostAttributes(s)&&this._getHostElement().classList.add(s);e.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(e,i){e?this._focusMonitor.focusVia(this._getHostElement(),e,i):this._getHostElement().focus(i)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...e){return e.some(i=>this._getHostElement().hasAttribute(i))}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(c.SBq),c.Y36(Df),c.Y36(vl,8))},n.\u0275cmp=c.Xpm({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(e,i){if(1&e&&c.Gf(Mf,5),2&e){let r;c.iGM(r=c.CRH())&&(i.ripple=r.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(e,i){2&e&&(c.uIk("disabled",i.disabled||null),c.ekj("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-button-disabled",i.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[c.qOj],attrs:R7,ngContentSelectors:O7,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(e,i){1&e&&(c.F$t(),c.TgZ(0,"span",0),c.Hsn(1),c.qZA(),c._UZ(2,"span",1)(3,"span",2)),2&e&&(c.xp6(2),c.ekj("mat-button-ripple-round",i.isRoundButton||i.isIconButton),c.Q6J("matRippleDisabled",i._isRippleDisabled())("matRippleCentered",i.isIconButton)("matRippleTrigger",i._getHostElement()))},directives:[Mf],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),n})(),NC=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[du,St],St]}),n})();function L7(n,t){if(1&n){const e=c.EpF();c.TgZ(0,"div",3)(1,"mat-form-field")(2,"mat-label"),c._uU(3,"Email"),c.qZA(),c.TgZ(4,"input",4),c.NdJ("ngModelChange",function(r){return c.CHM(e),c.oxw().email=r}),c.qZA()(),c._UZ(5,"br"),c.TgZ(6,"mat-form-field")(7,"mat-label"),c._uU(8,"Password"),c.qZA(),c.TgZ(9,"input",5),c.NdJ("ngModelChange",function(r){return c.CHM(e),c.oxw().password=r}),c.qZA()(),c._UZ(10,"br"),c.TgZ(11,"button",6),c.NdJ("click",function(){return c.CHM(e),c.oxw().signIn()}),c._uU(12,"Login"),c.qZA(),c._UZ(13,"br"),c.TgZ(14,"button",6),c.NdJ("click",function(){return c.CHM(e),c.oxw().showSignUp()}),c._uU(15,"Register"),c.qZA()()}if(2&n){const e=c.oxw();c.xp6(4),c.Q6J("ngModel",e.email),c.xp6(5),c.Q6J("ngModel",e.password)}}function B7(n,t){if(1&n){const e=c.EpF();c.TgZ(0,"div",7)(1,"mat-form-field")(2,"mat-label"),c._uU(3,"Email"),c.qZA(),c.TgZ(4,"input",4),c.NdJ("ngModelChange",function(r){return c.CHM(e),c.oxw().regEmail=r}),c.qZA()(),c._UZ(5,"br"),c.TgZ(6,"mat-form-field")(7,"mat-label"),c._uU(8,"Name"),c.qZA(),c.TgZ(9,"input",8),c.NdJ("ngModelChange",function(r){return c.CHM(e),c.oxw().name=r}),c.qZA()(),c._UZ(10,"br"),c.TgZ(11,"mat-form-field")(12,"mat-label"),c._uU(13,"Password"),c.qZA(),c.TgZ(14,"input",9),c.NdJ("ngModelChange",function(r){return c.CHM(e),c.oxw().regPassword=r}),c.qZA()(),c.TgZ(15,"mat-form-field")(16,"mat-label"),c._uU(17,"Confirm Password"),c.qZA(),c.TgZ(18,"input",10),c.NdJ("ngModelChange",function(r){return c.CHM(e),c.oxw().regPassword2=r}),c.qZA()(),c._UZ(19,"br"),c.TgZ(20,"button",6),c.NdJ("click",function(){return c.CHM(e),c.oxw().signUp()}),c._uU(21,"Submit"),c.qZA()()}if(2&n){const e=c.oxw();c.xp6(4),c.Q6J("ngModel",e.regEmail),c.xp6(5),c.Q6J("ngModel",e.name),c.xp6(5),c.Q6J("ngModel",e.regPassword),c.xp6(4),c.Q6J("ngModel",e.regPassword2)}}let V7=(()=>{class n{constructor(e,i,r){this.authService=e,this.firestore=i,this.updateService=r,this.email="",this.password="",this.showRegister=!1,this.regEmail="",this.regPassword="",this.regPassword2="",this.name=""}signIn(){this.authService.SignIn(this.email,this.password).then(e=>{console.log(e)})}signUp(){null!=this.name&&""!=this.name?null!=this.regEmail&&""!=this.regEmail?this.validateEmail(this.regEmail)?this.regPassword.length<3?alert("Password is too short. Retry with a longer one."):this.regPassword===this.regPassword2?(this.email=this.regEmail,this.password=this.regPassword,this.authService.SignUp(this.email,this.password,this.name).then(i=>{alert("User succesfully registered!"),this.showRegister=!1})):alert("Passwords do not match. Retry."):alert("Invalid email."):alert("You didn't enter an email."):alert("You didn't enter a valid name. Please retry.")}validateEmail(e){return!!/^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/.test(e)}showSignUp(){this.showRegister=!0}addCase(){let r={barcode:1234,userid:JSON.parse(localStorage.getItem("user")).uid,beercount:30,beerstaken:0};return new Promise((s,l)=>{this.firestore.collection("cases").add(r).then(d=>{console.log(d)},d=>l(d))})}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(_C),c.Y36(_d),c.Y36(Y8))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-login"]],decls:7,vars:2,consts:[[1,"header"],["class","loginCont",4,"ngIf"],["class","registerCont",4,"ngIf"],[1,"loginCont"],["type","text","matInput","","name","email",3,"ngModel","ngModelChange"],["type","password","matInput","","name","password",3,"ngModel","ngModelChange"],["mat-raised-button","",1,"loginBtn",3,"click"],[1,"registerCont"],["type","text","matInput","","name","name",3,"ngModel","ngModelChange"],["type","password","matInput","","name","regPassword",3,"ngModel","ngModelChange"],["type","password","matInput","","name","regPassword2",3,"ngModel","ngModelChange"]],template:function(e,i){1&e&&(c.TgZ(0,"div",0)(1,"h1"),c._uU(2,"Merchants"),c.qZA()(),c._UZ(3,"br")(4,"br"),c.YNc(5,L7,16,2,"div",1),c.YNc(6,B7,22,4,"div",2)),2&e&&(c.xp6(5),c.Q6J("ngIf",!i.showRegister),c.xp6(1),c.Q6J("ngIf",i.showRegister))},directives:[Bi,RC,tg,PC,yf,Nv,zm,Wv],styles:["h1[_ngcontent-%COMP%]{text-align:center;font-family:Brush Script MT;font-size:3em;color:gold;margin-top:0!important;margin-bottom:0!important}.header[_ngcontent-%COMP%]{background-color:#006400;background-image:url(https://www.transparenttextures.com/patterns/binding-light.png)}.loginCont[_ngcontent-%COMP%]{width:90%;background-color:#8f8f8f;margin:auto;display:block;border-radius:4px;padding:5em 5px;background-image:url(https://www.transparenttextures.com/patterns/binding-light.png)}.registerCont[_ngcontent-%COMP%]{width:90%;background-color:#8f8f8f;margin:auto;display:block;border-radius:4px;padding:5em 5px;background-image:url(https://www.transparenttextures.com/patterns/binding-light.png)}.mat-form-field[_ngcontent-%COMP%]{display:block;margin:auto;width:60%}.loginBtn[_ngcontent-%COMP%]{color:gold;background-color:#006400;margin:auto;display:block}"]}),n})(),pj=[];pj=[{path:"",redirectTo:"/login",pathMatch:"full"},{path:"login",component:V7},{path:"dashboard",component:NP}];let U7=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[dp.forRoot(pj,{relativeLinkResolution:"legacy"})],dp]}),n})(),I1=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[St],St]}),n})(),Sj=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[St],St]}),n})(),Mj=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[St],St]}),n})();var Aj=L(4408);const VC={schedule(n){let t=requestAnimationFrame,e=cancelAnimationFrame;const{delegate:i}=VC;i&&(t=i.requestAnimationFrame,e=i.cancelAnimationFrame);const r=t(s=>{e=void 0,n(s)});return new Hr.w0(()=>null==e?void 0:e(r))},requestAnimationFrame(...n){const{delegate:t}=VC;return((null==t?void 0:t.requestAnimationFrame)||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:t}=VC;return((null==t?void 0:t.cancelAnimationFrame)||cancelAnimationFrame)(...n)},delegate:void 0};var kj=L(7565);new class rQ extends kj.v{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;t=t||i.shift();do{if(r=t.execute(t.state,t.delay))break}while((t=i[0])&&t.id===e&&i.shift());if(this._active=!1,r){for(;(t=i[0])&&t.id===e&&i.shift();)t.unsubscribe();throw r}}}(class iQ extends Aj.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,i=0){return null!==i&&i>0?super.requestAsyncId(t,e,i):(t.actions.push(this),t._scheduled||(t._scheduled=VC.requestAnimationFrame(()=>t.flush(void 0))))}recycleAsyncId(t,e,i=0){if(null!=i&&i>0||null==i&&this.delay>0)return super.recycleAsyncId(t,e,i);t.actions.some(r=>r.id===e)||(VC.cancelAnimationFrame(e),t._scheduled=void 0)}});let R1,oQ=1;const qM={};function Rj(n){return n in qM&&(delete qM[n],!0)}const aQ={setImmediate(n){const t=oQ++;return qM[t]=!0,R1||(R1=Promise.resolve()),R1.then(()=>Rj(t)&&n()),t},clearImmediate(n){Rj(n)}},{setImmediate:lQ,clearImmediate:cQ}=aQ,WM={setImmediate(...n){const{delegate:t}=WM;return((null==t?void 0:t.setImmediate)||lQ)(...n)},clearImmediate(n){const{delegate:t}=WM;return((null==t?void 0:t.clearImmediate)||cQ)(n)},delegate:void 0};new class dQ extends kj.v{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;t=t||i.shift();do{if(r=t.execute(t.state,t.delay))break}while((t=i[0])&&t.id===e&&i.shift());if(this._active=!1,r){for(;(t=i[0])&&t.id===e&&i.shift();)t.unsubscribe();throw r}}}(class uQ extends Aj.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,i=0){return null!==i&&i>0?super.requestAsyncId(t,e,i):(t.actions.push(this),t._scheduled||(t._scheduled=WM.setImmediate(t.flush.bind(t,void 0))))}recycleAsyncId(t,e,i=0){if(null!=i&&i>0||null==i&&this.delay>0)return super.recycleAsyncId(t,e,i);t.actions.some(r=>r.id===e)||(WM.clearImmediate(e),t._scheduled=void 0)}});function Oj(n,t=Bu.z){return function fQ(n){return(0,Qn.e)((t,e)=>{let i=!1,r=null,s=null,l=!1;const d=()=>{if(null==s||s.unsubscribe(),s=null,i){i=!1;const _=r;r=null,e.next(_)}l&&e.complete()},p=()=>{s=null,l&&e.complete()};t.subscribe((0,_n.x)(e,_=>{i=!0,r=_,s||(0,Is.Xf)(n(_)).subscribe(s=(0,_n.x)(e,d,p))},()=>{l=!0,(!i||!s||s.closed)&&e.complete()}))})}(()=>jU(n,t))}let mQ=(()=>{class n{constructor(e,i,r){this._ngZone=e,this._platform=i,this._scrolled=new Tt.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const i=this.scrollContainers.get(e);i&&(i.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new oi.y(i=>{this._globalSubscription||this._addGlobalListener();const r=e>0?this._scrolled.pipe(Oj(e)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Ye()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(e,i){const r=this.getAncestorScrollContainers(e);return this.scrolled(i).pipe(Dn(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(e){const i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,e)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,i){let r=wd(i),s=e.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Bv(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(c.R0b),c.LFG(Gs),c.LFG(oe,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),YM=(()=>{class n{constructor(e,i,r){this._platform=e,this._change=new Tt.x,this._changeListener=s=>{this._change.next(s)},this._document=r,i.runOutsideAngular(()=>{if(e.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+r,right:e.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,i=this._getWindow(),r=e.documentElement,s=r.getBoundingClientRect();return{top:-s.top||e.body.scrollTop||i.scrollY||r.scrollTop||0,left:-s.left||e.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(Oj(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(Gs),c.LFG(c.R0b),c.LFG(oe,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Af=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})(),O1=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Vv,Af],Vv,Af]}),n})(),AQ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[O1]]}),n})(),zj=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[AQ,St],St]}),n})();class z1{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class $1 extends z1{constructor(t,e,i,r){super(),this.component=t,this.viewContainerRef=e,this.injector=i,this.componentFactoryResolver=r}}class $j extends z1{constructor(t,e,i){super(),this.templateRef=t,this.viewContainerRef=e,this.context=i}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class YQ extends z1{constructor(t){super(),this.element=t instanceof c.SBq?t.nativeElement:t}}class q1{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof $1?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof $j?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof YQ?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class ZQ extends q1{constructor(t,e,i,r,s){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=l=>{const d=l.element,p=this._document.createComment("dom-portal");d.parentNode.insertBefore(p,d),this.outletElement.appendChild(d),this._attachedPortal=l,super.setDisposeFn(()=>{p.parentNode&&p.parentNode.replaceChild(d,p)})},this._document=s}attachComponentPortal(t){const i=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let r;return t.viewContainerRef?(r=t.viewContainerRef.createComponent(i,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector),this.setDisposeFn(()=>r.destroy())):(r=i.create(t.injector||this._defaultInjector||c.zs3.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=t,r}attachTemplatePortal(t){let e=t.viewContainerRef,i=e.createEmbeddedView(t.templateRef,t.context);return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=e.indexOf(i);-1!==r&&e.remove(r)}),this._attachedPortal=t,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let qj=(()=>{class n extends q1{constructor(e,i,r){super(),this._componentFactoryResolver=e,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new c.vpe,this.attachDomPortal=s=>{const l=s.element,d=this._document.createComment("dom-portal");s.setAttachedHost(this),l.parentNode.insertBefore(d,l),this._getRootNode().appendChild(l),this._attachedPortal=s,super.setDisposeFn(()=>{d.parentNode&&d.parentNode.replaceChild(l,d)})},this._document=r}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(e){e.setAttachedHost(this);const i=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,s=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),l=i.createComponent(s,i.length,e.injector||i.injector);return i!==this._viewContainerRef&&this._getRootNode().appendChild(l.hostView.rootNodes[0]),super.setDisposeFn(()=>l.destroy()),this._attachedPortal=e,this._attachedRef=l,this.attached.emit(l),l}attachTemplatePortal(e){e.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(c._Vd),c.Y36(c.s_b),c.Y36(oe))},n.\u0275dir=c.lG2({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[c.qOj]}),n})(),ig=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();const Wj=nY();class KQ{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=Dr(-this._previousScrollPosition.left),t.style.top=Dr(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,i=t.style,r=this._document.body.style,s=i.scrollBehavior||"",l=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),Wj&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),Wj&&(i.scrollBehavior=s,r.scrollBehavior=l)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,i=this._viewportRuler.getViewportSize();return e.scrollHeight>i.height||e.scrollWidth>i.width}}class QQ{constructor(t,e,i,r){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class Yj{enable(){}disable(){}attach(){}}function W1(n,t){return t.some(e=>n.bottom<e.top||n.top>e.bottom||n.right<e.left||n.left>e.right)}function Zj(n,t){return t.some(e=>n.top<e.top||n.bottom>e.bottom||n.left<e.left||n.right>e.right)}class XQ{constructor(t,e,i,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();W1(e,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let JQ=(()=>{class n{constructor(e,i,r,s){this._scrollDispatcher=e,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new Yj,this.close=l=>new QQ(this._scrollDispatcher,this._ngZone,this._viewportRuler,l),this.block=()=>new KQ(this._viewportRuler,this._document),this.reposition=l=>new XQ(this._scrollDispatcher,this._viewportRuler,this._ngZone,l),this._document=s}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(mQ),c.LFG(YM),c.LFG(c.R0b),c.LFG(oe))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Kj{constructor(t){if(this.scrollStrategy=new Yj,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const i of e)void 0!==t[i]&&(this[i]=t[i])}}}class e9{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}class t9{constructor(t,e,i,r,s,l,d,p,_){this._portalOutlet=t,this._host=e,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=l,this._document=d,this._location=p,this._outsideClickDispatcher=_,this._backdropElement=null,this._backdropClick=new Tt.x,this._attachments=new Tt.x,this._detachments=new Tt.x,this._locationChanges=Hr.w0.EMPTY,this._backdropClickHandler=b=>this._backdropClick.next(b),this._backdropTransitionendHandler=b=>{this._disposeBackdrop(b.target)},this._keydownEvents=new Tt.x,this._outsidePointerEvents=new Tt.x,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,qn.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){var t;const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),null===(t=this._host)||void 0===t||t.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=Object.assign(Object.assign({},this._config),t),this._updateElementSize()}setDirection(t){this._config=Object.assign(Object.assign({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=Dr(this._config.width),t.height=Dr(this._config.height),t.minWidth=Dr(this._config.minWidth),t.minHeight=Dr(this._config.minHeight),t.maxWidth=Dr(this._config.maxWidth),t.maxHeight=Dr(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const t=this._backdropElement;!t||(t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500)))}_toggleClasses(t,e,i){const r=WU(e||[]).filter(s=>!!s);r.length&&(i?t.classList.add(...r):t.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe(ss((0,Nu.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}let Y1=(()=>{class n{constructor(e,i){this._platform=i,this._document=e}ngOnDestroy(){var e;null===(e=this._containerElement)||void 0===e||e.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||HP()){const r=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}const i=this._document.createElement("div");i.classList.add(e),HP()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(oe),c.LFG(Gs))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Qj="cdk-overlay-connected-position-bounding-box",n9=/([A-Za-z%]+)$/;class r9{constructor(t,e,i,r,s){this._viewportRuler=e,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Tt.x,this._resizeSubscription=Hr.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}get positions(){return this._preferredPositions}attach(t){this._validatePositions(),t.hostElement.classList.add(Qj),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._originRect,e=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[];let l;for(let d of this._preferredPositions){let p=this._getOriginPoint(t,r,d),_=this._getOverlayPoint(p,e,d),b=this._getOverlayFit(_,e,i,d);if(b.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(d,p);this._canFitWithFlexibleDimensions(b,_,i)?s.push({position:d,origin:p,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(p,d)}):(!l||l.overlayFit.visibleArea<b.visibleArea)&&(l={overlayFit:b,overlayPoint:_,originPoint:p,position:d,overlayRect:e})}if(s.length){let d=null,p=-1;for(const _ of s){const b=_.boundingBoxRect.width*_.boundingBoxRect.height*(_.position.weight||1);b>p&&(p=b,d=_)}return this._isPushed=!1,void this._applyPosition(d.position,d.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(l.position,l.originPoint);this._applyPosition(l.position,l.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&rg(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Qj),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,i){let r,s;if("center"==i.originX)r=t.left+t.width/2;else{const l=this._isRtl()?t.right:t.left,d=this._isRtl()?t.left:t.right;r="start"==i.originX?l:d}return e.left<0&&(r-=e.left),s="center"==i.originY?t.top+t.height/2:"top"==i.originY?t.top:t.bottom,e.top<0&&(s-=e.top),{x:r,y:s}}_getOverlayPoint(t,e,i){let r,s;return r="center"==i.overlayX?-e.width/2:"start"===i.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,s="center"==i.overlayY?-e.height/2:"top"==i.overlayY?0:-e.height,{x:t.x+r,y:t.y+s}}_getOverlayFit(t,e,i,r){const s=Jj(e);let{x:l,y:d}=t,p=this._getOffset(r,"x"),_=this._getOffset(r,"y");p&&(l+=p),_&&(d+=_);let I=0-d,P=d+s.height-i.height,U=this._subtractOverflows(s.width,0-l,l+s.width-i.width),Q=this._subtractOverflows(s.height,I,P),le=U*Q;return{visibleArea:le,isCompletelyWithinViewport:s.width*s.height===le,fitsInViewportVertically:Q===s.height,fitsInViewportHorizontally:U==s.width}}_canFitWithFlexibleDimensions(t,e,i){if(this._hasFlexibleDimensions){const r=i.bottom-e.y,s=i.right-e.x,l=Xj(this._overlayRef.getConfig().minHeight),d=Xj(this._overlayRef.getConfig().minWidth),_=t.fitsInViewportHorizontally||null!=d&&d<=s;return(t.fitsInViewportVertically||null!=l&&l<=r)&&_}return!1}_pushOverlayOnScreen(t,e,i){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const r=Jj(e),s=this._viewportRect,l=Math.max(t.x+r.width-s.width,0),d=Math.max(t.y+r.height-s.height,0),p=Math.max(s.top-i.top-t.y,0),_=Math.max(s.left-i.left-t.x,0);let b=0,D=0;return b=r.width<=s.width?_||-l:t.x<this._viewportMargin?s.left-i.left-t.x:0,D=r.height<=s.height?p||-d:t.y<this._viewportMargin?s.top-i.top-t.y:0,this._previousPushAmount={x:b,y:D},{x:t.x+b,y:t.y+D}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new e9(t,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=t.overlayY;i="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let s=0;s<e.length;s++)e[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(t,e){const i=this._viewportRect,r=this._isRtl();let s,l,d,b,D,I;if("top"===e.overlayY)l=t.y,s=i.height-l+this._viewportMargin;else if("bottom"===e.overlayY)d=i.height-t.y+2*this._viewportMargin,s=i.height-d+this._viewportMargin;else{const P=Math.min(i.bottom-t.y+i.top,t.y),U=this._lastBoundingBoxSize.height;s=2*P,l=t.y-P,s>U&&!this._isInitialRender&&!this._growAfterOpen&&(l=t.y-U/2)}if("end"===e.overlayX&&!r||"start"===e.overlayX&&r)I=i.width-t.x+this._viewportMargin,b=t.x-this._viewportMargin;else if("start"===e.overlayX&&!r||"end"===e.overlayX&&r)D=t.x,b=i.right-t.x;else{const P=Math.min(i.right-t.x+i.left,t.x),U=this._lastBoundingBoxSize.width;b=2*P,D=t.x-P,b>U&&!this._isInitialRender&&!this._growAfterOpen&&(D=t.x-U/2)}return{top:l,left:D,bottom:d,right:I,width:b,height:s}}_setBoundingBoxStyles(t,e){const i=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,l=this._overlayRef.getConfig().maxWidth;r.height=Dr(i.height),r.top=Dr(i.top),r.bottom=Dr(i.bottom),r.width=Dr(i.width),r.left=Dr(i.left),r.right=Dr(i.right),r.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",r.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=Dr(s)),l&&(r.maxWidth=Dr(l))}this._lastBoundingBoxSize=i,rg(this._boundingBox.style,r)}_resetBoundingBoxStyles(){rg(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){rg(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,l=this._overlayRef.getConfig();if(r){const b=this._viewportRuler.getViewportScrollPosition();rg(i,this._getExactOverlayY(e,t,b)),rg(i,this._getExactOverlayX(e,t,b))}else i.position="static";let d="",p=this._getOffset(e,"x"),_=this._getOffset(e,"y");p&&(d+=`translateX(${p}px) `),_&&(d+=`translateY(${_}px)`),i.transform=d.trim(),l.maxHeight&&(r?i.maxHeight=Dr(l.maxHeight):s&&(i.maxHeight="")),l.maxWidth&&(r?i.maxWidth=Dr(l.maxWidth):s&&(i.maxWidth="")),rg(this._pane.style,i)}_getExactOverlayY(t,e,i){let r={top:"",bottom:""},s=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),"bottom"===t.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=Dr(s.y),r}_getExactOverlayX(t,e,i){let l,r={left:"",right:""},s=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),l=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===l?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=Dr(s.x),r}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Zj(t,i),isOriginOutsideView:W1(t,i),isOverlayClipped:Zj(e,i),isOverlayOutsideView:W1(e,i)}}_subtractOverflows(t,...e){return e.reduce((i,r)=>i-Math.max(r,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+t-this._viewportMargin,bottom:i.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?null==t.offsetX?this._offsetX:t.offsetX:null==t.offsetY?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&WU(t).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof c.SBq)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,i=t.height||0;return{top:t.y,bottom:t.y+i,left:t.x,right:t.x+e,height:i,width:e}}}function rg(n,t){for(let e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function Xj(n){if("number"!=typeof n&&null!=n){const[t,e]=n.split(n9);return e&&"px"!==e?null:parseFloat(t)}return n||null}function Jj(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const eG="cdk-global-overlay-wrapper";class s9{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(eG),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._rightOffset="",this._leftOffset=t,this._justifyContent="flex-start",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._leftOffset="",this._rightOffset=t,this._justifyContent="flex-end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._justifyContent="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:l,maxHeight:d}=i,p=!("100%"!==r&&"100vw"!==r||l&&"100%"!==l&&"100vw"!==l),_=!("100%"!==s&&"100vh"!==s||d&&"100%"!==d&&"100vh"!==d);t.position=this._cssPosition,t.marginLeft=p?"0":this._leftOffset,t.marginTop=_?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=this._rightOffset,p?e.justifyContent="flex-start":"center"===this._justifyContent?e.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?e.justifyContent="flex-end":"flex-end"===this._justifyContent&&(e.justifyContent="flex-start"):e.justifyContent=this._justifyContent,e.alignItems=_?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,i=e.style;e.classList.remove(eG),i.justifyContent=i.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let o9=(()=>{class n{constructor(e,i,r,s){this._viewportRuler=e,this._document=i,this._platform=r,this._overlayContainer=s}global(){return new s9}flexibleConnectedTo(e){return new r9(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(YM),c.LFG(oe),c.LFG(Gs),c.LFG(Y1))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),tG=(()=>{class n{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const i=this._attachedOverlays.indexOf(e);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(oe))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),a9=(()=>{class n extends tG{constructor(e,i){super(e),this._ngZone=i,this._keydownListener=r=>{const s=this._attachedOverlays;for(let l=s.length-1;l>-1;l--)if(s[l]._keydownEvents.observers.length>0){const d=s[l]._keydownEvents;this._ngZone?this._ngZone.run(()=>d.next(r)):d.next(r);break}}}add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(oe),c.LFG(c.R0b,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),l9=(()=>{class n extends tG{constructor(e,i,r){super(e),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=Ym(s)},this._clickListener=s=>{const l=Ym(s),d="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:l;this._pointerDownEventTarget=null;const p=this._attachedOverlays.slice();for(let _=p.length-1;_>-1;_--){const b=p[_];if(b._outsidePointerEvents.observers.length<1||!b.hasAttached())continue;if(b.overlayElement.contains(l)||b.overlayElement.contains(d))break;const D=b._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>D.next(s)):D.next(s)}}}add(e){if(super.add(e),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(oe),c.LFG(Gs),c.LFG(c.R0b,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),c9=0,kf=(()=>{class n{constructor(e,i,r,s,l,d,p,_,b,D,I){this.scrollStrategies=e,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=l,this._injector=d,this._ngZone=p,this._document=_,this._directionality=b,this._location=D,this._outsideClickDispatcher=I}create(e){const i=this._createHostElement(),r=this._createPaneElement(i),s=this._createPortalOutlet(r),l=new Kj(e);return l.direction=l.direction||this._directionality.value,new t9(s,i,r,l,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(e){const i=this._document.createElement("div");return i.id="cdk-overlay-"+c9++,i.classList.add("cdk-overlay-pane"),e.appendChild(i),i}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(c.z2F)),new ZQ(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(JQ),c.LFG(Y1),c.LFG(c._Vd),c.LFG(o9),c.LFG(a9),c.LFG(c.zs3),c.LFG(c.R0b),c.LFG(oe),c.LFG(qm),c.LFG(Pe),c.LFG(l9))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const h9={provide:new c.OlP("cdk-connected-overlay-scroll-strategy"),deps:[kf],useFactory:function d9(n){return()=>n.scrollStrategies.reposition()}};let Qv=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[kf,h9],imports:[[Vv,ig,O1],O1]}),n})();const _9={provide:new c.OlP("mat-select-scroll-strategy"),deps:[kf],useFactory:function g9(n){return()=>n.scrollStrategies.reposition()}};let Z1=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[_9],imports:[[Jn,Qv,aj,St],Af,OC,aj,St]}),n})();const w9={provide:new c.OlP("mat-tooltip-scroll-strategy"),deps:[kf],useFactory:function b9(n){return()=>n.scrollStrategies.reposition({scrollThrottle:20})}};let K1=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[w9],imports:[[zP,Jn,Qv,St],St,Af]}),n})(),Q1=(()=>{class n{constructor(){this.changes=new Tt.x,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(e,i,r)=>{if(0==r||0==i)return`0 of ${r}`;const s=e*i;return`${s+1} \u2013 ${s<(r=Math.max(r,0))?Math.min(s+i,r):s+i} of ${r}`}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const M9={provide:Q1,deps:[[new c.FiY,new c.tp0,Q1]],useFactory:function S9(n){return n||new Q1}};let iG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[M9],imports:[[Jn,NC,Z1,K1,St]]}),n})(),X1=(()=>{class n{constructor(){this.changes=new Tt.x}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const I9={provide:X1,deps:[[new c.FiY,new c.tp0,X1]],useFactory:function T9(n){return n||new X1}};let rG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[I9],imports:[[Jn,St]]}),n})(),sG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Jn,St,Af],Af,St]}),n})(),N9=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})(),oG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[N9,St],St]}),n})();function G9(n,t){}class iN{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const z9={dialogContainer:er("dialogContainer",[an("void, exit",pt({opacity:0,transform:"scale(0.7)"})),an("enter",pt({transform:"none"})),bn("* => enter",CM([Pn("150ms cubic-bezier(0, 0, 0.2, 1)",pt({transform:"none",opacity:1})),Gv("@*",jv(),{optional:!0})])),bn("* => void, * => exit",CM([Pn("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",pt({opacity:0})),Gv("@*",jv(),{optional:!0})]))])};let $9=(()=>{class n extends q1{constructor(e,i,r,s,l,d,p,_){super(),this._elementRef=e,this._focusTrapFactory=i,this._changeDetectorRef=r,this._config=l,this._interactivityChecker=d,this._ngZone=p,this._focusMonitor=_,this._animationStateChanged=new c.vpe,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=b=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(b)),this._ariaLabelledBy=l.ariaLabelledBy||null,this._document=s}_initializeWithAttachedContent(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=UP())}attachComponentPortal(e){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(e)}attachTemplatePortal(e){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(e)}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(e,i){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{e.removeEventListener("blur",r),e.removeEventListener("mousedown",r),e.removeAttribute("tabindex")};e.addEventListener("blur",r),e.addEventListener("mousedown",r)})),e.focus(i)}_focusByCssSelector(e,i){let r=this._elementRef.nativeElement.querySelector(e);r&&this._forceFocus(r,i)}_trapFocus(){const e=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||e.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(i=>{i||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const e=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&e&&"function"==typeof e.focus){const i=UP(),r=this._elementRef.nativeElement;(!i||i===this._document.body||i===r||r.contains(i))&&(this._focusMonitor?(this._focusMonitor.focusVia(e,this._closeInteractionType),this._closeInteractionType=null):e.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const e=this._elementRef.nativeElement,i=UP();return e===i||e.contains(i)}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(c.SBq),c.Y36(PY),c.Y36(c.sBO),c.Y36(oe,8),c.Y36(iN),c.Y36(oH),c.Y36(c.R0b),c.Y36(Df))},n.\u0275dir=c.lG2({type:n,viewQuery:function(e,i){if(1&e&&c.Gf(qj,7),2&e){let r;c.iGM(r=c.CRH())&&(i._portalOutlet=r.first)}},features:[c.qOj]}),n})(),q9=(()=>{class n extends $9{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:e,totalTime:i}){"enter"===e?(this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:i})):"exit"===e&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:i}))}_onAnimationStart({toState:e,totalTime:i}){"enter"===e?this._animationStateChanged.next({state:"opening",totalTime:i}):("exit"===e||"void"===e)&&this._animationStateChanged.next({state:"closing",totalTime:i})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}_initializeWithAttachedContent(){super._initializeWithAttachedContent(),this._config.delayFocusTrap||this._trapFocus()}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=c.n5z(n)))(i||n)}}(),n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(e,i){1&e&&c.WFA("@dialogContainer.start",function(s){return i._onAnimationStart(s)})("@dialogContainer.done",function(s){return i._onAnimationDone(s)}),2&e&&(c.Ikx("id",i._id),c.uIk("role",i._config.role)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledBy)("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null),c.d8E("@dialogContainer",i._state))},features:[c.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(e,i){1&e&&c.YNc(0,G9,0,0,"ng-template",0)},directives:[qj],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[z9.dialogContainer]}}),n})(),W9=0;class Y9{constructor(t,e,i="mat-dialog-"+W9++){this._overlayRef=t,this._containerInstance=e,this.id=i,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new Tt.x,this._afterClosed=new Tt.x,this._beforeClosed=new Tt.x,this._state=0,e._id=i,e._animationStateChanged.pipe(Dn(r=>"opened"===r.state),(0,qn.q)(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),e._animationStateChanged.pipe(Dn(r=>"closed"===r.state),(0,qn.q)(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),t.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),t.keydownEvents().pipe(Dn(r=>27===r.keyCode&&!this.disableClose&&!function xC(n,...t){return t.length?t.some(e=>n[e]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}(r))).subscribe(r=>{r.preventDefault(),aG(this,"keyboard")}),t.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():aG(this,"mouse")})}close(t){this._result=t,this._containerInstance._animationStateChanged.pipe(Dn(e=>"closing"===e.state),(0,qn.q)(1)).subscribe(e=>{this._beforeClosed.next(t),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(t){let e=this._getPositionStrategy();return t&&(t.left||t.right)?t.left?e.left(t.left):e.right(t.right):e.centerHorizontally(),t&&(t.top||t.bottom)?t.top?e.top(t.top):e.bottom(t.bottom):e.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(t="",e=""){return this._overlayRef.updateSize({width:t,height:e}),this._overlayRef.updatePosition(),this}addPanelClass(t){return this._overlayRef.addPanelClass(t),this}removePanelClass(t){return this._overlayRef.removePanelClass(t),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function aG(n,t,e){return void 0!==n._containerInstance&&(n._containerInstance._closeInteractionType=t),n.close(e)}const Z9=new c.OlP("MatDialogData"),K9=new c.OlP("mat-dialog-default-options"),lG=new c.OlP("mat-dialog-scroll-strategy"),X9={provide:lG,deps:[kf],useFactory:function Q9(n){return()=>n.scrollStrategies.block()}};let J9=(()=>{class n{constructor(e,i,r,s,l,d,p,_,b,D){this._overlay=e,this._injector=i,this._defaultOptions=r,this._parentDialog=s,this._overlayContainer=l,this._dialogRefConstructor=p,this._dialogContainerType=_,this._dialogDataToken=b,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Tt.x,this._afterOpenedAtThisLevel=new Tt.x,this._ariaHiddenElements=new Map,this.afterAllClosed=So(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Zi(void 0))),this._scrollStrategy=d}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(e,i){i=function tX(n,t){return Object.assign(Object.assign({},t),n)}(i,this._defaultOptions||new iN),i.id&&this.getDialogById(i.id);const r=this._createOverlay(i),s=this._attachDialogContainer(r,i),l=this._attachDialogContent(e,s,r,i);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(l),l.afterClosed().subscribe(()=>this._removeOpenDialog(l)),this.afterOpened.next(l),s._initializeWithAttachedContent(),l}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(i=>i.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_createOverlay(e){const i=this._getOverlayConfig(e);return this._overlay.create(i)}_getOverlayConfig(e){const i=new Kj({positionStrategy:this._overlay.position().global(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(i.backdropClass=e.backdropClass),i}_attachDialogContainer(e,i){const s=c.zs3.create({parent:i&&i.viewContainerRef&&i.viewContainerRef.injector||this._injector,providers:[{provide:iN,useValue:i}]}),l=new $1(this._dialogContainerType,i.viewContainerRef,s,i.componentFactoryResolver);return e.attach(l).instance}_attachDialogContent(e,i,r,s){const l=new this._dialogRefConstructor(r,i,s.id);if(e instanceof c.Rgc)i.attachTemplatePortal(new $j(e,null,{$implicit:s.data,dialogRef:l}));else{const d=this._createInjector(s,l,i),p=i.attachComponentPortal(new $1(e,s.viewContainerRef,d,s.componentFactoryResolver));l.componentInstance=p.instance}return l.updateSize(s.width,s.height).updatePosition(s.position),l}_createInjector(e,i,r){const s=e&&e.viewContainerRef&&e.viewContainerRef.injector,l=[{provide:this._dialogContainerType,useValue:r},{provide:this._dialogDataToken,useValue:e.data},{provide:this._dialogRefConstructor,useValue:i}];return e.direction&&(!s||!s.get(qm,null,c.XFs.Optional))&&l.push({provide:qm,useValue:{value:e.direction,change:Ye()}}),c.zs3.create({parent:s||this._injector,providers:l})}_removeOpenDialog(e){const i=this.openDialogs.indexOf(e);i>-1&&(this.openDialogs.splice(i,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((r,s)=>{r?s.setAttribute("aria-hidden",r):s.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const e=this._overlayContainer.getContainerElement();if(e.parentElement){const i=e.parentElement.children;for(let r=i.length-1;r>-1;r--){let s=i[r];s!==e&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_closeDialogs(e){let i=e.length;for(;i--;)e[i].close()}}return n.\u0275fac=function(e){c.$Z()},n.\u0275dir=c.lG2({type:n}),n})(),eX=(()=>{class n extends J9{constructor(e,i,r,s,l,d,p,_){super(e,i,s,d,p,l,Y9,q9,Z9,_)}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(kf),c.LFG(c.zs3),c.LFG(Pe,8),c.LFG(K9,8),c.LFG(lG),c.LFG(n,12),c.LFG(Y1),c.LFG(vl,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),cG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[eX,X9],imports:[[Qv,ig,St],St]}),n})(),hG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Jn,St],St]}),n})(),mG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})(),gG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[du,St,EC,mG],St,mG]}),n})(),EX=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})(),vG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Jn,St,EX,ig]]}),n})(),DX=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Vv]]}),n})(),sN=(()=>{class n{constructor(){this.changes=new Tt.x,this.optionalLabel="Optional",this.completedLabel="Completed",this.editableLabel="Editable"}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const NX={provide:sN,deps:[[new c.FiY,new c.tp0,sN]],useFactory:function PX(n){return n||new sN}};let bG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[NX,w1],imports:[[St,Jn,ig,NC,DX,I1,du],St]}),n})(),CG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[jM,St],jM,St]}),n})(),EG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Jn,St,ig,du,EC,zP],St]}),n})(),QX=(()=>{class n{constructor(){this.changes=new Tt.x,this.calendarLabel="Calendar",this.openCalendarLabel="Open calendar",this.closeCalendarLabel="Close calendar",this.prevMonthLabel="Previous month",this.nextMonthLabel="Next month",this.prevYearLabel="Previous year",this.nextYearLabel="Next year",this.prevMultiYearLabel="Previous 24 years",this.nextMultiYearLabel="Next 24 years",this.switchToMonthViewLabel="Choose date",this.switchToMultiYearViewLabel="Choose month and year"}formatYearRange(e,i){return`${e} \u2013 ${i}`}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const eJ={provide:new c.OlP("mat-datepicker-scroll-strategy"),deps:[kf],useFactory:function JX(n){return()=>n.scrollStrategies.reposition()}};let MG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[QX,eJ],imports:[[Jn,NC,Qv,zP,ig,St],Af]}),n})(),kG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[du,St],St]}),n})();function _J(n,t){if(1&n&&(c.O4$(),c._UZ(0,"circle",4)),2&n){const e=c.oxw(),i=c.MAs(1);c.Udp("animation-name","mat-progress-spinner-stroke-rotate-"+e._spinnerAnimationLabel)("stroke-dashoffset",e._getStrokeDashOffset(),"px")("stroke-dasharray",e._getStrokeCircumference(),"px")("stroke-width",e._getCircleStrokeWidth(),"%")("transform-origin",e._getCircleTransformOrigin(i)),c.uIk("r",e._getCircleRadius())}}function vJ(n,t){if(1&n&&(c.O4$(),c._UZ(0,"circle",4)),2&n){const e=c.oxw(),i=c.MAs(1);c.Udp("stroke-dashoffset",e._getStrokeDashOffset(),"px")("stroke-dasharray",e._getStrokeCircumference(),"px")("stroke-width",e._getCircleStrokeWidth(),"%")("transform-origin",e._getCircleTransformOrigin(i)),c.uIk("r",e._getCircleRadius())}}const bJ=qv(class{constructor(n){this._elementRef=n}},"primary"),wJ=new c.OlP("mat-progress-spinner-default-options",{providedIn:"root",factory:function CJ(){return{diameter:100}}});class Of extends bJ{constructor(t,e,i,r,s,l,d,p){super(t),this._document=i,this._diameter=100,this._value=0,this._resizeSubscription=Hr.w0.EMPTY,this.mode="determinate";const _=Of._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),_.has(i.head)||_.set(i.head,new Set([100])),this._noopAnimations="NoopAnimations"===r&&!!s&&!s._forceAnimations,"mat-spinner"===t.nativeElement.nodeName.toLowerCase()&&(this.mode="indeterminate"),s&&(s.diameter&&(this.diameter=s.diameter),s.strokeWidth&&(this.strokeWidth=s.strokeWidth)),e.isBrowser&&e.SAFARI&&d&&l&&p&&(this._resizeSubscription=d.change(150).subscribe(()=>{"indeterminate"===this.mode&&p.run(()=>l.markForCheck())}))}get diameter(){return this._diameter}set diameter(t){this._diameter=Ho(t),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(t){this._strokeWidth=Ho(t)}get value(){return"determinate"===this.mode?this._value:0}set value(t){this._value=Math.max(0,Math.min(100,Ho(t)))}ngOnInit(){const t=this._elementRef.nativeElement;this._styleRoot=XU(t)||this._document.head,this._attachStyleNode(),t.classList.add("mat-progress-spinner-indeterminate-animation")}ngOnDestroy(){this._resizeSubscription.unsubscribe()}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const t=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${t} ${t}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_getCircleTransformOrigin(t){var e;const i=50*(null!==(e=t.currentScale)&&void 0!==e?e:1);return`${i}% ${i}%`}_attachStyleNode(){const t=this._styleRoot,e=this._diameter,i=Of._diameters;let r=i.get(t);if(!r||!r.has(e)){const s=this._document.createElement("style");s.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),s.textContent=this._getAnimationText(),t.appendChild(s),r||(r=new Set,i.set(t,r)),r.add(e)}}_getAnimationText(){const t=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*t).replace(/END_VALUE/g,""+.2*t).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}Of._diameters=new WeakMap,Of.\u0275fac=function(t){return new(t||Of)(c.Y36(c.SBq),c.Y36(Gs),c.Y36(oe,8),c.Y36(vl,8),c.Y36(wJ),c.Y36(c.sBO),c.Y36(YM),c.Y36(c.R0b))},Of.\u0275cmp=c.Xpm({type:Of,selectors:[["mat-progress-spinner"],["mat-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner","mat-spinner"],hostVars:10,hostBindings:function(t,e){2&t&&(c.uIk("aria-valuemin","determinate"===e.mode?0:null)("aria-valuemax","determinate"===e.mode?100:null)("aria-valuenow","determinate"===e.mode?e.value:null)("mode",e.mode),c.Udp("width",e.diameter,"px")("height",e.diameter,"px"),c.ekj("_mat-animation-noopable",e._noopAnimations))},inputs:{color:"color",diameter:"diameter",strokeWidth:"strokeWidth",mode:"mode",value:"value"},exportAs:["matProgressSpinner"],features:[c.qOj],decls:4,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["svg",""],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(t,e){1&t&&(c.O4$(),c.TgZ(0,"svg",0,1),c.YNc(2,_J,1,11,"circle",2),c.YNc(3,vJ,1,9,"circle",3),c.qZA()),2&t&&(c.Udp("width",e.diameter,"px")("height",e.diameter,"px"),c.Q6J("ngSwitch","indeterminate"===e.mode),c.uIk("viewBox",e._getViewBox()),c.xp6(2),c.Q6J("ngSwitchCase",!0),c.xp6(1),c.Q6J("ngSwitchCase",!1))},directives:[Mr,hr],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}\n"],encapsulation:2,changeDetection:0});let RG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[St,Jn],St]}),n})(),DJ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[St],St]}),n})(),PG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[jM,du,St,E1,Jn],jM,St,E1,DJ]}),n})(),NG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})(),FG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[NG,du,St,EC],NG,St]}),n})(),HG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[St,du],St]}),n})();const oee={provide:new c.OlP("mat-menu-scroll-strategy"),deps:[kf],useFactory:function see(n){return()=>n.scrollStrategies.reposition()}};let GG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[oee],imports:[[Jn,St,du,Qv],Af,St]}),n})(),zG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Qv,St,ig],St]}),n})();const aee=[fj,I1,OC,Sj,NC,Mj,zj,iG,rG,sG,oG,cG,hG,gG,vG,bG,Z1,CG,EG,MG,ij,kG,RG,PG,FG,HG,GG,K1,zG];let lee=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[aee],fj,I1,OC,Sj,NC,Mj,zj,iG,rG,sG,oG,cG,hG,gG,vG,bG,Z1,CG,EG,MG,ij,kG,RG,PG,FG,HG,GG,K1,zG]}),n})(),cee=(()=>{class n{constructor(e,i,r){this.parent=e,this.firestore=i,this.cdr=r,this.amount=1}ngOnInit(){}goBack(){this.showProps.showChalkBeer=!1,this.showProps.showMainMenu=!0}submit(){let e=this.showProps.card;e.availableBeers>=this.amount?(e.availableBeers=e.availableBeers-this.amount,e.totalDrank=e.totalDrank+this.amount,this.firestore.collection("cards").doc(e.cardid).update(e).then(i=>{alert("Beer has been chalked!"),this.goBack()})):alert("Shit bud - You don't have enough purchased beers to chalk this. Go back to the main menu and add some.")}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(NP),c.Y36(_d),c.Y36(c.sBO))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-chalk-beer-form"]],inputs:{showProps:"showProps"},decls:13,vars:1,consts:[[1,"chalkCont"],[1,"formCont"],["appearance","outline"],["type","number","matInput","","name","amount",3,"ngModel","ngModelChange"],["mat-raised-button","",3,"click"]],template:function(e,i){1&e&&(c.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"mat-label"),c._uU(4,"Amount of beers to chalk"),c.qZA(),c.TgZ(5,"input",3),c.NdJ("ngModelChange",function(s){return i.amount=s}),c.qZA()()(),c._UZ(6,"br"),c.TgZ(7,"button",4),c.NdJ("click",function(){return i.goBack()}),c._uU(8,"Back"),c.qZA(),c._UZ(9,"br")(10,"br"),c.TgZ(11,"button",4),c.NdJ("click",function(){return i.submit()}),c._uU(12,"Submit"),c.qZA()()),2&e&&(c.xp6(5),c.Q6J("ngModel",i.amount))},directives:[RC,tg,Lv,PC,yf,Nv,zm,Wv],styles:[".chalkCont[_ngcontent-%COMP%]{display:block;width:100%;height:100%;text-align:center;overflow-y:scroll}.formCont[_ngcontent-%COMP%]{width:90%;background-color:#8f8f8f;margin:auto;display:block;border-radius:4px;padding:5em 5px;background-image:url(https://www.transparenttextures.com/patterns/binding-light.png)}"]}),n})(),uee=(()=>{class n{constructor(e,i){this.firestore=e,this.authService=i,this.amount=8,this.serial=""}ngOnInit(){}goBack(){this.showProps.showPayBeer=!1,this.showProps.showMainMenu=!0}submit(){if(this.serial.length<10)return void alert("Serial numbers on Canadian Bills are 10 digits long. Re-enter a valid one.");if(this.amount<1)return void alert("You need to buy more than 1 beer Mr. Stupid!");const e={serial:this.serial,spent:!1,userid:this.authService.currentUser.uid};this.firestore.collection("bills").add(e).then(i=>{let r=this.showProps.card,s=!1;r.owing>0?(this.amount>r.owing?(r.availableBeers=r.availableBeers+(this.amount-r.owing),r.owing=r.owing-(this.amount-r.owing)):r.owing=r.owing-this.amount,s=!0):r.availableBeers=r.availableBeers+this.amount,this.firestore.collection("cards").doc(r.cardid).update(r).then(l=>{alert(s?"You have succesfully paid off "+this.amount+" beers.":"Your card has succesfully been updated with "+this.amount+" beers."),this.goBack()}),console.log("Added a bill.")},i=>console.log(i))}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(_d),c.Y36(_C))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-pay-form"]],inputs:{showProps:"showProps"},decls:22,vars:4,consts:[[1,"payCont"],[1,"formCont"],["appearance","outline"],["type","number","matInput","","name","amount",3,"ngModel","ngModelChange"],["type","text","matInput","","name","amount",3,"ngModel","ngModelChange"],[2,"color","gold"],["mat-raised-button","",3,"click"]],template:function(e,i){1&e&&(c.TgZ(0,"div",0)(1,"p"),c._uU(2),c.qZA(),c.TgZ(3,"div",1)(4,"mat-form-field",2)(5,"mat-label"),c._uU(6,"Amount of Beers to Buy"),c.qZA(),c.TgZ(7,"input",3),c.NdJ("ngModelChange",function(s){return i.amount=s}),c.qZA()(),c._UZ(8,"br"),c.TgZ(9,"mat-form-field",2)(10,"mat-label"),c._uU(11,"Bill Serial #(s)"),c.qZA(),c.TgZ(12,"input",4),c.NdJ("ngModelChange",function(s){return i.serial=s}),c.qZA(),c.TgZ(13,"small",5),c._uU(14,"If more than one bill, separate by commas."),c.qZA()()(),c._UZ(15,"br"),c.TgZ(16,"button",6),c.NdJ("click",function(){return i.goBack()}),c._uU(17,"Back"),c.qZA(),c._UZ(18,"br")(19,"br"),c.TgZ(20,"button",6),c.NdJ("click",function(){return i.submit()}),c._uU(21,"Submit"),c.qZA()()),2&e&&(c.xp6(2),c.AsE("",i.amount," beers costs $",2.5*i.amount,""),c.xp6(5),c.Q6J("ngModel",i.amount),c.xp6(5),c.Q6J("ngModel",i.serial))},directives:[RC,tg,Lv,PC,yf,Nv,zm,Wv],styles:[".payCont[_ngcontent-%COMP%]{display:block;width:100%;height:100%;text-align:center;overflow-y:scroll}.formCont[_ngcontent-%COMP%]{width:90%;background-color:#8f8f8f;margin:auto;display:block;border-radius:4px;padding:2em 5px;background-image:url(https://www.transparenttextures.com/patterns/binding-light.png)}p[_ngcontent-%COMP%]{text-align:center;font-family:Arial,Helvetica,sans-serif;margin-top:0!important;margin-bottom:0!important;color:#006400}"]}),n})(),dee=(()=>{class n{constructor(e){this.firestore=e,this.amount=8}ngOnInit(){}goBack(){this.showProps.showFinanceBeer=!1,this.showProps.showMainMenu=!0}submit(){if(null==this.amount||this.amount<1)return void alert("You need to add at least one beer to finance!");let e=this.showProps.card;e.availableBeers=e.availableBeers+this.amount,e.owing=this.amount,this.firestore.collection("cards").doc(e.cardid).update(e).then(i=>{alert(`Beer has been added. You ower $${2.5*this.amount} and this can be paid from the 'Pay for Beers' option on the main menu.`),this.goBack()})}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(_d))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-finance-form"]],inputs:{showProps:"showProps"},decls:15,vars:2,consts:[[1,"financeCont"],[1,"formCont"],["appearance","outline"],["type","number","matInput","","name","amount",3,"ngModel","ngModelChange"],[2,"color","gold"],["mat-raised-button","",3,"click"]],template:function(e,i){1&e&&(c.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"mat-label"),c._uU(4,"Amount of Beers to Owe"),c.qZA(),c.TgZ(5,"input",3),c.NdJ("ngModelChange",function(s){return i.amount=s}),c.qZA(),c.TgZ(6,"small",4),c._uU(7),c.qZA()()(),c._UZ(8,"br"),c.TgZ(9,"button",5),c.NdJ("click",function(){return i.goBack()}),c._uU(10,"Back"),c.qZA(),c._UZ(11,"br")(12,"br"),c.TgZ(13,"button",5),c.NdJ("click",function(){return i.submit()}),c._uU(14,"Submit"),c.qZA()()),2&e&&(c.xp6(5),c.Q6J("ngModel",i.amount),c.xp6(2),c.hij("Note: You aren't paying for these beers yet. You will owe $",2.5*i.amount,"."))},directives:[RC,tg,Lv,PC,yf,Nv,zm,Wv],styles:[".financeCont[_ngcontent-%COMP%]{display:block;width:100%;height:100%;text-align:center;overflow-y:scroll}.formCont[_ngcontent-%COMP%]{width:90%;background-color:#8f8f8f;margin:auto;display:block;border-radius:4px;padding:2em 5px;background-image:url(https://www.transparenttextures.com/patterns/binding-light.png)}"]}),n})(),hee=(()=>{class n{constructor(e,i,r){this.storage=e,this.authService=i,this.firestore=r,this.selectedFile=null,this.disableSubmit=!1,this.amount=0}ngOnInit(){}goBack(){this.showProps.showAddCase=!1,this.showProps.showMainMenu=!0}onFileSelected(e){this.selectedFile=e.target.files[0]}submit(){if(this.amount<6)return void alert("You can't add less than 6 beers buddy... Bump that number up.");if(null==this.serial||this.serial.toString().length<6)return void alert("This serial number seems like bullshit. Please enter a real one.");if(null==this.selectedFile)return void alert("You need to add a picture of the case with the serial number visible!");this.disableSubmit=!0;var e=Date.now();const r=this.storage.ref(`CaseImages/${this.authService.currentUser.uid}_${e}`);this.storage.upload(`CaseImages/${this.authService.currentUser.uid}_${e}`,this.selectedFile).snapshotChanges().pipe(Du(()=>{this.downloadURL=r.getDownloadURL(),this.downloadURL.subscribe(l=>{l&&(this.fb=l);const d={serial:this.serial,beercount:this.amount,beerstaken:0,userid:this.authService.currentUser.uid};this.firestore.collection("cases").add(d).then(p=>{this.disableSubmit=!1,alert("Case has been succesfully added! Thanks for contributing! You're a beauty!"),this.goBack()},p=>console.log(p)),console.log(this.fb)})})).subscribe(l=>{l&&console.log(l)})}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(Gb),c.Y36(_C),c.Y36(_d))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-add-case-form"]],inputs:{showProps:"showProps"},decls:27,vars:3,consts:[[1,"caseCont"],[1,"formCont"],["appearance","outline"],["type","number","matInput","","name","amount",3,"ngModel","ngModelChange"],["type","number","matInput","","name","serial",3,"ngModel","ngModelChange"],[2,"color","gold"],[2,"color","white"],["type","file","id","file","name","image","autocomplete","off",3,"change"],["userPhoto",""],["mat-raised-button","",3,"click"],["mat-raised-button","",3,"disabled","click"]],template:function(e,i){1&e&&(c.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"mat-label"),c._uU(4,"Amount of Beers in Case"),c.qZA(),c.TgZ(5,"input",3),c.NdJ("ngModelChange",function(s){return i.amount=s}),c.qZA()(),c._UZ(6,"br"),c.TgZ(7,"mat-form-field",2)(8,"mat-label"),c._uU(9,"Case Serial Number"),c.qZA(),c.TgZ(10,"input",4),c.NdJ("ngModelChange",function(s){return i.serial=s}),c.qZA(),c.TgZ(11,"small",5),c._uU(12,"Note: We can check to make sure the case photo and serial # you enter line up."),c.qZA()(),c._UZ(13,"br"),c.TgZ(14,"mat-label",6),c._uU(15,"Upload a photo of the case below. Make sure serial # is visible."),c.qZA(),c._UZ(16,"br")(17,"br"),c.TgZ(18,"input",7,8),c.NdJ("change",function(s){return i.onFileSelected(s)}),c.qZA()(),c._UZ(20,"br"),c.TgZ(21,"button",9),c.NdJ("click",function(){return i.goBack()}),c._uU(22,"Back"),c.qZA(),c._UZ(23,"br")(24,"br"),c.TgZ(25,"button",10),c.NdJ("click",function(){return i.submit()}),c._uU(26,"Submit"),c.qZA()()),2&e&&(c.xp6(5),c.Q6J("ngModel",i.amount),c.xp6(5),c.Q6J("ngModel",i.serial),c.xp6(15),c.Q6J("disabled",i.disableSubmit))},directives:[RC,tg,Lv,PC,yf,Nv,zm,Wv],styles:[".caseCont[_ngcontent-%COMP%]{display:block;width:100%;height:100%;text-align:center;overflow-y:scroll}.formCont[_ngcontent-%COMP%]{width:90%;background-color:#8f8f8f;margin:auto;display:block;border-radius:4px;padding:2em 2px 5em;background-image:url(https://www.transparenttextures.com/patterns/binding-light.png)}input[_ngcontent-%COMP%]{text-align:center;display:block;margin:auto}"]}),n})(),fee=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n,bootstrap:[HT]}),n.\u0275inj=c.cJS({providers:[_C],imports:[[Ec,Ki.hO.initializeApp(pP_firebase),LE,r6,MD,vW,y8,U7,LK,lee,W8.register("ngsw-worker.js",{enabled:true,registrationStrategy:"registerWhenStable:30000"})]]}),n})();c.B6R(NP,[Bi,yi,cee,uee,dee,hee,Wv],[]),(0,c.G48)(),Gd().bootstrapModule(fee).catch(n=>console.error(n))},2011:(ut,Se,L)=>{L.d(Se,{hO:()=>Xe,xv:()=>Ee,Dh:()=>pe,GT:()=>Ce,cc:()=>Fe,on:()=>W,pX:()=>fe});var c=L(5e3),G=L(127),N=L(5813);ut=L.hmd(ut);const de=["ngOnDestroy"],fe=(Ae,Ke,We,Le={})=>new Proxy(Ae,{get:(Pe,Me)=>We.runOutsideAngular(()=>{var Je;if(Ae[Me])return(null===(Je=null==Le?void 0:Le.spy)||void 0===Je?void 0:Je.get)&&Le.spy.get(Me,Ae[Me]),Ae[Me];if(de.indexOf(Me)>-1)return()=>{};const re=Ke.toPromise().then(_e=>{const Te=_e&&_e[Me];return"function"==typeof Te?Te.bind(_e):Te&&Te.then?Te.then(J=>We.run(()=>J)):We.run(()=>Te)});return new Proxy(()=>{},{get:(_e,Te)=>re[Te],apply:(_e,Te,J)=>re.then(se=>{var ue;const De=se&&se(...J);return(null===(ue=null==Le?void 0:Le.spy)||void 0===ue?void 0:ue.apply)&&Le.spy.apply(Me,J,De),De})})})}),Ce=(Ae,Ke)=>{Ke.forEach(We=>{Object.getOwnPropertyNames(We.prototype||We).forEach(Le=>{Object.defineProperty(Ae.prototype,Le,Object.getOwnPropertyDescriptor(We.prototype||We,Le))})})};class oe{constructor(Ke){return Ke}}const pe=new c.OlP("angularfire2.app.options"),Ee=new c.OlP("angularfire2.app.name");function W(Ae,Ke,We){const Pe="object"==typeof We&&We||{};Pe.name=Pe.name||"string"==typeof We&&We||"[DEFAULT]";const Je=G.Z.apps.filter(re=>re&&re.name===Pe.name)[0]||Ke.runOutsideAngular(()=>G.Z.initializeApp(Ae,Pe));try{JSON.stringify(Ae)!==JSON.stringify(Je.options)&&q("error",`${Je.name} Firebase App already initialized with different options${ut.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(re){}return new oe(Je)}const q=(Ae,...Ke)=>{(0,c.X6Q)()&&"undefined"!=typeof console&&console[Ae](...Ke)},ae={provide:oe,useFactory:W,deps:[pe,c.R0b,[new c.FiY,Ee]]};let Xe=(()=>{class Ae{constructor(We){G.Z.registerVersion("angularfire",N.q4.full,"core"),G.Z.registerVersion("angularfire",N.q4.full,"app-compat"),G.Z.registerVersion("angular",c.q4F.full,We.toString())}static initializeApp(We,Le){return{ngModule:Ae,providers:[{provide:pe,useValue:We},{provide:Ee,useValue:Le}]}}}return Ae.\u0275fac=function(We){return new(We||Ae)(c.LFG(c.Lbi))},Ae.\u0275mod=c.oAB({type:Ae}),Ae.\u0275inj=c.cJS({providers:[ae]}),Ae})();function Fe(Ae,Ke,We,Le,Pe){const[,Me,Je]=globalThis.\u0275AngularfireInstanceCache.find(re=>re[0]===Ae)||[];if(Me)return function Ve(Ae,Ke){try{return Ae.toString()===Ke.toString()}catch(We){return Ae===Ke}}(Pe,Je)||(we("error",`${Ke} was already initialized on the ${We} Firebase App with different settings.${qe?" You may need to reload as Firebase is not HMR aware.":""}`),we("warn",{is:Pe,was:Je})),Me;{const re=Le();return globalThis.\u0275AngularfireInstanceCache.push([Ae,re,Pe]),re}}const qe=!!ut.hot,we=(Ae,...Ke)=>{(0,c.X6Q)()&&"undefined"!=typeof console&&console[Ae](...Ke)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(ut,Se,L)=>{L.d(Se,{q4:()=>zl,iC:()=>Ao,fc:()=>kr,HU:()=>Rc,vb:()=>kc,JM:()=>wg});var c=L(5e3),G=L(5867),N=L(5861),de=L(9681),fe=L(2090),Ce=L(4859),oe=L(1877),pe=L(8766);const Ee="@firebase/installations",W="0.5.11",ae=`w:${W}`,Xe="FIS_v2",Ke=new fe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function We(S){return S instanceof fe.ZR&&S.code.includes("request-failed")}function Le({projectId:S}){return`https://firebaseinstallations.googleapis.com/v1/projects/${S}/installations`}function Pe(S){return{token:S.token,requestStatus:2,expiresIn:se(S.expiresIn),creationTime:Date.now()}}function Me(S,M){return Je.apply(this,arguments)}function Je(){return(Je=(0,N.Z)(function*(S,M){const j=(yield M.json()).error;return Ke.create("request-failed",{requestName:S,serverCode:j.code,serverMessage:j.message,serverStatus:j.status})})).apply(this,arguments)}function re({apiKey:S}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":S})}function _e(S,{refreshToken:M}){const O=re(S);return O.append("Authorization",function ue(S){return`${Xe} ${S}`}(M)),O}function Te(S){return J.apply(this,arguments)}function J(){return(J=(0,N.Z)(function*(S){const M=yield S();return M.status>=500&&M.status<600?S():M})).apply(this,arguments)}function se(S){return Number(S.replace("s","000"))}function De(S,M){return me.apply(this,arguments)}function me(){return(me=(0,N.Z)(function*({appConfig:S,heartbeatServiceProvider:M},{fid:O}){const j=Le(S),X=re(S),he=M.getImmediate({optional:!0});if(he){const It=yield he.getHeartbeatsHeader();It&&X.append("x-firebase-client",It)}const Ue={method:"POST",headers:X,body:JSON.stringify({fid:O,authVersion:Xe,appId:S.appId,sdkVersion:ae})},Dt=yield Te(()=>fetch(j,Ue));if(Dt.ok){const It=yield Dt.json();return{fid:It.fid||O,registrationStatus:2,refreshToken:It.refreshToken,authToken:Pe(It.authToken)}}throw yield Me("Create Installation",Dt)})).apply(this,arguments)}function He(S){return new Promise(M=>{setTimeout(M,S)})}const ln=/^[cdef][\w-]{21}$/;function st(){try{const S=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(S),S[0]=112+S[0]%16;const O=function Tn(S){return function wt(S){return btoa(String.fromCharCode(...S)).replace(/\+/g,"-").replace(/\//g,"_")}(S).substr(0,22)}(S);return ln.test(O)?O:""}catch(S){return""}}function ti(S){return`${S.appName}!${S.appId}`}const In=new Map;function fn(S,M){const O=ti(S);zn(O,M),function as(S,M){const O=function Kn(){return!tr&&"BroadcastChannel"in self&&(tr=new BroadcastChannel("[Firebase] FID Change"),tr.onmessage=S=>{zn(S.data.key,S.data.fid)}),tr}();O&&O.postMessage({key:S,fid:M}),function ws(){0===In.size&&tr&&(tr.close(),tr=null)}()}(O,M)}function zn(S,M){const O=In.get(S);if(O)for(const j of O)j(M)}let tr=null;const ni="firebase-installations-store";let Cs=null;function Ct(){return Cs||(Cs=(0,pe.X3)("firebase-installations-database",1,{upgrade:(S,M)=>{0===M&&S.createObjectStore(ni)}})),Cs}function cr(S,M){return jn.apply(this,arguments)}function jn(){return(jn=(0,N.Z)(function*(S,M){const O=ti(S),X=(yield Ct()).transaction(ni,"readwrite"),he=X.objectStore(ni),ve=yield he.get(O);return yield he.put(M,O),yield X.done,(!ve||ve.fid!==M.fid)&&fn(S,M.fid),M})).apply(this,arguments)}function pn(S){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,N.Z)(function*(S){const M=ti(S),j=(yield Ct()).transaction(ni,"readwrite");yield j.objectStore(ni).delete(M),yield j.done})).apply(this,arguments)}function Ii(S,M){return ur.apply(this,arguments)}function ur(){return(ur=(0,N.Z)(function*(S,M){const O=ti(S),X=(yield Ct()).transaction(ni,"readwrite"),he=X.objectStore(ni),ve=yield he.get(O),Ue=M(ve);return void 0===Ue?yield he.delete(O):yield he.put(Ue,O),yield X.done,Ue&&(!ve||ve.fid!==Ue.fid)&&fn(S,Ue.fid),Ue})).apply(this,arguments)}function Gn(S){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,N.Z)(function*(S){let M;const O=yield Ii(S.appConfig,j=>{const X=zs(j),he=Jt(S,X);return M=he.registrationPromise,he.installationEntry});return""===O.fid?{installationEntry:yield M}:{installationEntry:O,registrationPromise:M}})).apply(this,arguments)}function zs(S){return cs(S||{fid:st(),registrationStatus:0})}function Jt(S,M){if(0===M.registrationStatus){if(!navigator.onLine)return{installationEntry:M,registrationPromise:Promise.reject(Ke.create("app-offline"))};const O={fid:M.fid,registrationStatus:1,registrationTime:Date.now()},j=function vt(S,M){return ft.apply(this,arguments)}(S,O);return{installationEntry:O,registrationPromise:j}}return 1===M.registrationStatus?{installationEntry:M,registrationPromise:Lr(S)}:{installationEntry:M}}function ft(){return(ft=(0,N.Z)(function*(S,M){try{const O=yield De(S,M);return cr(S.appConfig,O)}catch(O){throw We(O)&&409===O.customData.serverCode?yield pn(S.appConfig):yield cr(S.appConfig,{fid:M.fid,registrationStatus:0}),O}})).apply(this,arguments)}function Lr(S){return Br.apply(this,arguments)}function Br(){return(Br=(0,N.Z)(function*(S){let M=yield en(S.appConfig);for(;1===M.registrationStatus;)yield He(100),M=yield en(S.appConfig);if(0===M.registrationStatus){const{installationEntry:O,registrationPromise:j}=yield Gn(S);return j||O}return M})).apply(this,arguments)}function en(S){return Ii(S,M=>{if(!M)throw Ke.create("installation-not-found");return cs(M)})}function cs(S){return function ui(S){return 1===S.registrationStatus&&S.registrationTime+1e4<Date.now()}(S)?{fid:S.fid,registrationStatus:0}:S}function An(S,M){return yt.apply(this,arguments)}function yt(){return(yt=(0,N.Z)(function*({appConfig:S,heartbeatServiceProvider:M},O){const j=K(S,O),X=_e(S,O),he=M.getImmediate({optional:!0});if(he){const It=yield he.getHeartbeatsHeader();It&&X.append("x-firebase-client",It)}const Ue={method:"POST",headers:X,body:JSON.stringify({installation:{sdkVersion:ae,appId:S.appId}})},Dt=yield Te(()=>fetch(j,Ue));if(Dt.ok)return Pe(yield Dt.json());throw yield Me("Generate Auth Token",Dt)})).apply(this,arguments)}function K(S,{fid:M}){return`${Le(S)}/${M}/authTokens:generate`}function z(S){return ee.apply(this,arguments)}function ee(){return(ee=(0,N.Z)(function*(S,M=!1){let O;const j=yield Ii(S.appConfig,he=>{if(!Ut(he))throw Ke.create("not-registered");const ve=he.authToken;if(!M&&cn(ve))return he;if(1===ve.requestStatus)return O=te(S,M),he;{if(!navigator.onLine)throw Ke.create("app-offline");const Ue=Kt(he);return O=Ge(S,Ue),Ue}});return O?yield O:j.authToken})).apply(this,arguments)}function te(S,M){return H.apply(this,arguments)}function H(){return(H=(0,N.Z)(function*(S,M){let O=yield xe(S.appConfig);for(;1===O.authToken.requestStatus;)yield He(100),O=yield xe(S.appConfig);const j=O.authToken;return 0===j.requestStatus?z(S,M):j})).apply(this,arguments)}function xe(S){return Ii(S,M=>{if(!Ut(M))throw Ke.create("not-registered");return function ce(S){return 1===S.requestStatus&&S.requestTime+1e4<Date.now()}(M.authToken)?Object.assign(Object.assign({},M),{authToken:{requestStatus:0}}):M})}function Ge(S,M){return dt.apply(this,arguments)}function dt(){return(dt=(0,N.Z)(function*(S,M){try{const O=yield An(S,M),j=Object.assign(Object.assign({},M),{authToken:O});return yield cr(S.appConfig,j),O}catch(O){if(!We(O)||401!==O.customData.serverCode&&404!==O.customData.serverCode){const j=Object.assign(Object.assign({},M),{authToken:{requestStatus:0}});yield cr(S.appConfig,j)}else yield pn(S.appConfig);throw O}})).apply(this,arguments)}function Ut(S){return void 0!==S&&2===S.registrationStatus}function cn(S){return 2===S.requestStatus&&!function kn(S){const M=Date.now();return M<S.creationTime||S.creationTime+S.expiresIn<M+36e5}(S)}function Kt(S){const M={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},S),{authToken:M})}function Y(){return(Y=(0,N.Z)(function*(S){const M=S,{installationEntry:O,registrationPromise:j}=yield Gn(M);return j?j.catch(console.error):z(M).catch(console.error),O.fid})).apply(this,arguments)}function tt(){return(tt=(0,N.Z)(function*(S,M=!1){const O=S;return yield gt(O),(yield z(O,M)).token})).apply(this,arguments)}function gt(S){return kt.apply(this,arguments)}function kt(){return(kt=(0,N.Z)(function*(S){const{registrationPromise:M}=yield Gn(S);M&&(yield M)})).apply(this,arguments)}function bl(S){return Ke.create("missing-app-config-values",{valueName:S})}const Sr="installations",$t=S=>{const M=S.getProvider("app").getImmediate(),O=function Li(S){if(!S||!S.options)throw bl("App Configuration");if(!S.name)throw bl("App Name");const M=["projectId","apiKey","appId"];for(const O of M)if(!S.options[O])throw bl(O);return{appName:S.name,projectId:S.options.projectId,apiKey:S.options.apiKey,appId:S.options.appId}}(M);return{app:M,appConfig:O,heartbeatServiceProvider:(0,de._getProvider)(M,"heartbeat"),_delete:()=>Promise.resolve()}},Bn=S=>{const M=S.getProvider("app").getImmediate(),O=(0,de._getProvider)(M,Sr).getImmediate();return{getId:()=>function Z(S){return Y.apply(this,arguments)}(O),getToken:X=>function Re(S){return tt.apply(this,arguments)}(O,X)}};(function dr(){(0,de._registerComponent)(new Ce.wA(Sr,$t,"PUBLIC")),(0,de._registerComponent)(new Ce.wA("installations-internal",Bn,"PRIVATE"))})(),(0,de.registerVersion)(Ee,W),(0,de.registerVersion)(Ee,W,"esm2017");const $s="@firebase/remote-config",ii=new fe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Ad{constructor(M,O,j,X){this.client=M,this.storage=O,this.storageCache=j,this.logger=X}isCachedDataFresh(M,O){if(!O)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const j=Date.now()-O,X=j<=M;return this.logger.debug(`Config fetch cache check. Cache age millis: ${j}. Cache max age millis (minimumFetchIntervalMillis setting): ${M}. Is cache hit: ${X}.`),X}fetch(M){var O=this;return(0,N.Z)(function*(){const[j,X]=yield Promise.all([O.storage.getLastSuccessfulFetchTimestampMillis(),O.storage.getLastSuccessfulFetchResponse()]);if(X&&O.isCachedDataFresh(M.cacheMaxAgeMillis,j))return X;M.eTag=X&&X.eTag;const he=yield O.client.fetch(M),ve=[O.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===he.status&&ve.push(O.storage.setLastSuccessfulFetchResponse(he)),yield Promise.all(ve),he})()}}function _c(S=navigator){return S.languages&&S.languages[0]||S.language}class bi{constructor(M,O,j,X,he,ve){this.firebaseInstallations=M,this.sdkVersion=O,this.namespace=j,this.projectId=X,this.apiKey=he,this.appId=ve}fetch(M){var O=this;return(0,N.Z)(function*(){var j,X,he;const[ve,Ue]=yield Promise.all([O.firebaseInstallations.getId(),O.firebaseInstallations.getToken()]),It=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${O.projectId}/namespaces/${O.namespace}:fetch?key=${O.apiKey}`,jt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":M.eTag||"*"},_t={sdk_version:O.sdkVersion,app_instance_id:ve,app_instance_id_token:Ue,app_id:O.appId,language_code:_c()},zi={method:"POST",headers:jt,body:JSON.stringify(_t)},rr=fetch(It,zi),so=new Promise((zr,Rs)=>{M.signal.addEventListener(()=>{const Qa=new Error("The operation was aborted.");Qa.name="AbortError",Rs(Qa)})});let gr;try{yield Promise.race([rr,so]),gr=yield rr}catch(zr){let Rs="fetch-client-network";throw"AbortError"===(null===(j=zr)||void 0===j?void 0:j.name)&&(Rs="fetch-timeout"),ii.create(Rs,{originalErrorMessage:null===(X=zr)||void 0===X?void 0:X.message})}let Gr=gr.status;const aa=gr.headers.get("ETag")||void 0;let la,ko;if(200===gr.status){let zr;try{zr=yield gr.json()}catch(Rs){throw ii.create("fetch-client-parse",{originalErrorMessage:null===(he=Rs)||void 0===he?void 0:he.message})}la=zr.entries,ko=zr.state}if("INSTANCE_STATE_UNSPECIFIED"===ko?Gr=500:"NO_CHANGE"===ko?Gr=304:("NO_TEMPLATE"===ko||"EMPTY_CONFIG"===ko)&&(la={}),304!==Gr&&200!==Gr)throw ii.create("fetch-status",{httpStatus:Gr});return{status:Gr,eTag:aa,config:la}})()}}class Ws{constructor(M,O){this.client=M,this.storage=O}fetch(M){var O=this;return(0,N.Z)(function*(){const j=(yield O.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return O.attemptFetch(M,j)})()}attemptFetch(M,{throttleEndTimeMillis:O,backoffCount:j}){var X=this;return(0,N.Z)(function*(){yield function kd(S,M){return new Promise((O,j)=>{const X=Math.max(M-Date.now(),0),he=setTimeout(O,X);S.addEventListener(()=>{clearTimeout(he),j(ii.create("fetch-throttle",{throttleEndTimeMillis:M}))})})}(M.signal,O);try{const he=yield X.client.fetch(M);return yield X.storage.deleteThrottleMetadata(),he}catch(he){if(!function cg(S){if(!(S instanceof fe.ZR&&S.customData))return!1;const M=Number(S.customData.httpStatus);return 429===M||500===M||503===M||504===M}(he))throw he;const ve={throttleEndTimeMillis:Date.now()+(0,fe.$s)(j),backoffCount:j+1};return yield X.storage.setThrottleMetadata(ve),X.attemptFetch(M,ve)}})()}}class dg{constructor(M,O,j,X,he){this.app=M,this._client=O,this._storageCache=j,this._storage=X,this._logger=he,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function wl(S,M){var O;const j=S.target.error||void 0;return ii.create(M,{originalErrorMessage:j&&(null===(O=j)||void 0===O?void 0:O.message)})}const Na="app_namespace_store";class Pd{constructor(M,O,j,X=function fg(){return new Promise((S,M)=>{var O;try{const j=indexedDB.open("firebase_remote_config",1);j.onerror=X=>{M(wl(X,"storage-open"))},j.onsuccess=X=>{S(X.target.result)},j.onupgradeneeded=X=>{0===X.oldVersion&&X.target.result.createObjectStore(Na,{keyPath:"compositeKey"})}}catch(j){M(ii.create("storage-open",{originalErrorMessage:null===(O=j)||void 0===O?void 0:O.message}))}})}()){this.appId=M,this.appName=O,this.namespace=j,this.openDbPromise=X}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(M){return this.set("last_fetch_status",M)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(M){return this.set("last_successful_fetch_timestamp_millis",M)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(M){return this.set("last_successful_fetch_response",M)}getActiveConfig(){return this.get("active_config")}setActiveConfig(M){return this.set("active_config",M)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(M){return this.set("active_config_etag",M)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(M){return this.set("throttle_metadata",M)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(M){var O=this;return(0,N.Z)(function*(){const j=yield O.openDbPromise;return new Promise((X,he)=>{var ve;const Dt=j.transaction([Na],"readonly").objectStore(Na),It=O.createCompositeKey(M);try{const jt=Dt.get(It);jt.onerror=_t=>{he(wl(_t,"storage-get"))},jt.onsuccess=_t=>{const zi=_t.target.result;X(zi?zi.value:void 0)}}catch(jt){he(ii.create("storage-get",{originalErrorMessage:null===(ve=jt)||void 0===ve?void 0:ve.message}))}})})()}set(M,O){var j=this;return(0,N.Z)(function*(){const X=yield j.openDbPromise;return new Promise((he,ve)=>{var Ue;const It=X.transaction([Na],"readwrite").objectStore(Na),jt=j.createCompositeKey(M);try{const _t=It.put({compositeKey:jt,value:O});_t.onerror=zi=>{ve(wl(zi,"storage-set"))},_t.onsuccess=()=>{he()}}catch(_t){ve(ii.create("storage-set",{originalErrorMessage:null===(Ue=_t)||void 0===Ue?void 0:Ue.message}))}})})()}delete(M){var O=this;return(0,N.Z)(function*(){const j=yield O.openDbPromise;return new Promise((X,he)=>{var ve;const Dt=j.transaction([Na],"readwrite").objectStore(Na),It=O.createCompositeKey(M);try{const jt=Dt.delete(It);jt.onerror=_t=>{he(wl(_t,"storage-delete"))},jt.onsuccess=()=>{X()}}catch(jt){he(ii.create("storage-delete",{originalErrorMessage:null===(ve=jt)||void 0===ve?void 0:ve.message}))}})})()}createCompositeKey(M){return[this.appId,this.appName,this.namespace,M].join()}}class Fa{constructor(M){this.storage=M}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var M=this;return(0,N.Z)(function*(){const O=M.storage.getLastFetchStatus(),j=M.storage.getLastSuccessfulFetchTimestampMillis(),X=M.storage.getActiveConfig(),he=yield O;he&&(M.lastFetchStatus=he);const ve=yield j;ve&&(M.lastSuccessfulFetchTimestampMillis=ve);const Ue=yield X;Ue&&(M.activeConfig=Ue)})()}setLastFetchStatus(M){return this.lastFetchStatus=M,this.storage.setLastFetchStatus(M)}setLastSuccessfulFetchTimestampMillis(M){return this.lastSuccessfulFetchTimestampMillis=M,this.storage.setLastSuccessfulFetchTimestampMillis(M)}setActiveConfig(M){return this.activeConfig=M,this.storage.setActiveConfig(M)}}function Jv(){return Cl.apply(this,arguments)}function Cl(){return(Cl=(0,N.Z)(function*(){if(!(0,fe.hl)())return!1;try{return yield(0,fe.eu)()}catch(S){return!1}})).apply(this,arguments)}!function pg(){(0,de._registerComponent)(new Ce.wA("remote-config",function S(M,{instanceIdentifier:O}){const j=M.getProvider("app").getImmediate(),X=M.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw ii.create("registration-window");if(!(0,fe.hl)())throw ii.create("indexed-db-unavailable");const{projectId:he,apiKey:ve,appId:Ue}=j.options;if(!he)throw ii.create("registration-project-id");if(!ve)throw ii.create("registration-api-key");if(!Ue)throw ii.create("registration-app-id");const Dt=new Pd(Ue,j.name,O=O||"firebase"),It=new Fa(Dt),jt=new oe.Yd($s);jt.logLevel=oe.in.ERROR;const _t=new bi(X,de.SDK_VERSION,O,he,ve,Ue),zi=new Ws(_t,Dt),rr=new Ad(zi,Dt,It,jt),so=new dg(j,rr,It,Dt,jt);return function Rn(S){const M=(0,fe.m9)(S);M._initializePromise||(M._initializePromise=M._storageCache.loadFromStorage().then(()=>{M._isInitializationComplete=!0}))}(so),so},"PUBLIC").setMultipleInstances(!0)),(0,de.registerVersion)($s,"0.3.10"),(0,de.registerVersion)($s,"0.3.10","esm2017")}();const bo="/firebase-messaging-sw.js",Ur="/firebase-cloud-messaging-push-scope",La="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Dl="google.c.a.c_id",Lf="google.c.a.c_l",mg="google.c.a.ts",Jn="google.c.a.e";var Zs=(()=>{return(S=Zs||(Zs={})).PUSH_RECEIVED="push-received",S.NOTIFICATION_CLICKED="notification-clicked",Zs;var S})();function us(S){const M=new Uint8Array(S);return btoa(String.fromCharCode(...M)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Fd(S){const O=(S+"=".repeat((4-S.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),j=atob(O),X=new Uint8Array(j.length);for(let he=0;he<j.length;++he)X[he]=j.charCodeAt(he);return X}const ki="fcm_token_details_db",Ld="fcm_token_object_Store";function Bd(S){return vc.apply(this,arguments)}function vc(){return vc=(0,N.Z)(function*(S){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(he=>he.name).includes(ki))return null;let M=null;return(yield(0,pe.X3)(ki,5,{upgrade:(j=(0,N.Z)(function*(X,he,ve,Ue){var Dt;if(he<2||!X.objectStoreNames.contains(Ld))return;const It=Ue.objectStore(Ld),jt=yield It.index("fcmSenderId").get(S);if(yield It.clear(),jt)if(2===he){const _t=jt;if(!_t.auth||!_t.p256dh||!_t.endpoint)return;M={token:_t.fcmToken,createTime:null!==(Dt=_t.createTime)&&void 0!==Dt?Dt:Date.now(),subscriptionOptions:{auth:_t.auth,p256dh:_t.p256dh,endpoint:_t.endpoint,swScope:_t.swScope,vapidKey:"string"==typeof _t.vapidKey?_t.vapidKey:us(_t.vapidKey)}}}else if(3===he){const _t=jt;M={token:_t.fcmToken,createTime:_t.createTime,subscriptionOptions:{auth:us(_t.auth),p256dh:us(_t.p256dh),endpoint:_t.endpoint,swScope:_t.swScope,vapidKey:us(_t.vapidKey)}}}else if(4===he){const _t=jt;M={token:_t.fcmToken,createTime:_t.createTime,subscriptionOptions:{auth:us(_t.auth),p256dh:us(_t.p256dh),endpoint:_t.endpoint,swScope:_t.swScope,vapidKey:us(_t.vapidKey)}}}}),function(he,ve,Ue,Dt){return j.apply(this,arguments)})})).close(),yield(0,pe.Lj)(ki),yield(0,pe.Lj)("fcm_vapid_details_db"),yield(0,pe.Lj)("undefined"),yc(M)?M:null;var j}),vc.apply(this,arguments)}function yc(S){if(!S||!S.subscriptionOptions)return!1;const{subscriptionOptions:M}=S;return"number"==typeof S.createTime&&S.createTime>0&&"string"==typeof S.token&&S.token.length>0&&"string"==typeof M.auth&&M.auth.length>0&&"string"==typeof M.p256dh&&M.p256dh.length>0&&"string"==typeof M.endpoint&&M.endpoint.length>0&&"string"==typeof M.swScope&&M.swScope.length>0&&"string"==typeof M.vapidKey&&M.vapidKey.length>0}const Ks="firebase-messaging-store";let mu=null;function Vn(){return mu||(mu=(0,pe.X3)("firebase-messaging-database",1,{upgrade:(S,M)=>{0===M&&S.createObjectStore(Ks)}})),mu}function xl(S){return wo.apply(this,arguments)}function wo(){return(wo=(0,N.Z)(function*(S){const M=Vi(S),j=yield(yield Vn()).transaction(Ks).objectStore(Ks).get(M);if(j)return j;{const X=yield Bd(S.appConfig.senderId);if(X)return yield On(S,X),X}})).apply(this,arguments)}function On(S,M){return wc.apply(this,arguments)}function wc(){return(wc=(0,N.Z)(function*(S,M){const O=Vi(S),X=(yield Vn()).transaction(Ks,"readwrite");return yield X.objectStore(Ks).put(M,O),yield X.done,M})).apply(this,arguments)}function Sl(S){return $o.apply(this,arguments)}function $o(){return($o=(0,N.Z)(function*(S){const M=Vi(S),j=(yield Vn()).transaction(Ks,"readwrite");yield j.objectStore(Ks).delete(M),yield j.done})).apply(this,arguments)}function Vi({appConfig:S}){return S.appId}const ri=new fe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Qs(S,M){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,N.Z)(function*(S,M){var O;const j=yield Eo(S),X=Ml(M),he={method:"POST",headers:j,body:JSON.stringify(X)};let ve;try{ve=yield(yield fetch(Co(S.appConfig),he)).json()}catch(Ue){throw ri.create("token-subscribe-failed",{errorInfo:null===(O=Ue)||void 0===O?void 0:O.toString()})}if(ve.error)throw ri.create("token-subscribe-failed",{errorInfo:ve.error.message});if(!ve.token)throw ri.create("token-subscribe-no-token");return ve.token})).apply(this,arguments)}function Ba(S,M){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,N.Z)(function*(S,M){var O;const j=yield Eo(S),X=Ml(M.subscriptionOptions),he={method:"PATCH",headers:j,body:JSON.stringify(X)};let ve;try{ve=yield(yield fetch(`${Co(S.appConfig)}/${M.token}`,he)).json()}catch(Ue){throw ri.create("token-update-failed",{errorInfo:null===(O=Ue)||void 0===O?void 0:O.toString()})}if(ve.error)throw ri.create("token-update-failed",{errorInfo:ve.error.message});if(!ve.token)throw ri.create("token-update-no-token");return ve.token})).apply(this,arguments)}function gu(S,M){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,N.Z)(function*(S,M){var O;const X={method:"DELETE",headers:yield Eo(S)};try{const ve=yield(yield fetch(`${Co(S.appConfig)}/${M}`,X)).json();if(ve.error)throw ri.create("token-unsubscribe-failed",{errorInfo:ve.error.message})}catch(he){throw ri.create("token-unsubscribe-failed",{errorInfo:null===(O=he)||void 0===O?void 0:O.toString()})}})).apply(this,arguments)}function Co({projectId:S}){return`https://fcmregistrations.googleapis.com/v1/projects/${S}/registrations`}function Eo(S){return Et.apply(this,arguments)}function Et(){return(Et=(0,N.Z)(function*({appConfig:S,installations:M}){const O=yield M.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":S.apiKey,"x-goog-firebase-installations-auth":`FIS ${O}`})})).apply(this,arguments)}function Ml({p256dh:S,auth:M,endpoint:O,vapidKey:j}){const X={web:{endpoint:O,auth:M,p256dh:S}};return j!==La&&(X.web.applicationPubKey=j),X}const Tl=6048e5;function Vd(S){return Il.apply(this,arguments)}function Il(){return(Il=(0,N.Z)(function*(S){const M=yield ei(S.swRegistration,S.vapidKey),O={vapidKey:S.vapidKey,swScope:S.swRegistration.scope,endpoint:M.endpoint,auth:us(M.getKey("auth")),p256dh:us(M.getKey("p256dh"))},j=yield xl(S.firebaseDependencies);if(j){if(Rl(j.subscriptionOptions,O))return Date.now()>=j.createTime+Tl?Bf(S,{token:j.token,createTime:Date.now(),subscriptionOptions:O}):j.token;try{yield gu(S.firebaseDependencies,j.token)}catch(X){console.warn(X)}return tn(S.firebaseDependencies,O)}return tn(S.firebaseDependencies,O)})).apply(this,arguments)}function _u(S){return Al.apply(this,arguments)}function Al(){return(Al=(0,N.Z)(function*(S){const M=yield xl(S.firebaseDependencies);M&&(yield gu(S.firebaseDependencies,M.token),yield Sl(S.firebaseDependencies));const O=yield S.swRegistration.pushManager.getSubscription();return!O||O.unsubscribe()})).apply(this,arguments)}function Bf(S,M){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,N.Z)(function*(S,M){try{const O=yield Ba(S.firebaseDependencies,M),j=Object.assign(Object.assign({},M),{token:O,createTime:Date.now()});return yield On(S.firebaseDependencies,j),O}catch(O){throw yield _u(S),O}})).apply(this,arguments)}function tn(S,M){return kl.apply(this,arguments)}function kl(){return(kl=(0,N.Z)(function*(S,M){const j={token:yield Qs(S,M),createTime:Date.now(),subscriptionOptions:M};return yield On(S,j),j.token})).apply(this,arguments)}function ei(S,M){return Do.apply(this,arguments)}function Do(){return(Do=(0,N.Z)(function*(S,M){return(yield S.pushManager.getSubscription())||S.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Fd(M)})})).apply(this,arguments)}function Rl(S,M){return M.vapidKey===S.vapidKey&&M.endpoint===S.endpoint&&M.auth===S.auth&&M.p256dh===S.p256dh}function fr(S){const M={from:S.from,collapseKey:S.collapse_key,messageId:S.fcmMessageId};return function vu(S,M){if(!M.notification)return;S.notification={};const O=M.notification.title;O&&(S.notification.title=O);const j=M.notification.body;j&&(S.notification.body=j);const X=M.notification.image;X&&(S.notification.image=X)}(M,S),function yu(S,M){!M.data||(S.data=M.data)}(M,S),function Ud(S,M){var O,j,X,he,ve;if(!M.fcmOptions&&!(null===(O=M.notification)||void 0===O?void 0:O.click_action))return;S.fcmOptions={};const Ue=null!==(X=null===(j=M.fcmOptions)||void 0===j?void 0:j.link)&&void 0!==X?X:null===(he=M.notification)||void 0===he?void 0:he.click_action;Ue&&(S.fcmOptions.link=Ue);const Dt=null===(ve=M.fcmOptions)||void 0===ve?void 0:ve.analytics_label;Dt&&(S.fcmOptions.analyticsLabel=Dt)}(M,S),M}function Hd(S){return"object"==typeof S&&!!S&&Dl in S}function Ol(S,M){const O=[];for(let j=0;j<S.length;j++)O.push(S.charAt(j)),j<M.length&&O.push(M.charAt(j));return O.join("")}function Ri(S){return ri.create("missing-app-config-values",{valueName:S})}Ol("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Ol("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ds{constructor(M,O,j){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const X=function Va(S){if(!S||!S.options)throw Ri("App Configuration Object");if(!S.name)throw Ri("App Name");const M=["projectId","apiKey","appId","messagingSenderId"],{options:O}=S;for(const j of M)if(!O[j])throw Ri(j);return{appName:S.name,projectId:O.projectId,apiKey:O.apiKey,appId:O.appId,senderId:O.messagingSenderId}}(M);this.firebaseDependencies={app:M,appConfig:X,installations:O,analyticsProvider:j}}_delete(){return Promise.resolve()}}function bu(S){return xs.apply(this,arguments)}function xs(){return(xs=(0,N.Z)(function*(S){var M;try{S.swRegistration=yield navigator.serviceWorker.register(bo,{scope:Ur}),S.swRegistration.update().catch(()=>{})}catch(O){throw ri.create("failed-service-worker-registration",{browserErrorMessage:null===(M=O)||void 0===M?void 0:M.message})}})).apply(this,arguments)}function Xs(S,M){return Pl.apply(this,arguments)}function Pl(){return(Pl=(0,N.Z)(function*(S,M){if(!M&&!S.swRegistration&&(yield bu(S)),M||!S.swRegistration){if(!(M instanceof ServiceWorkerRegistration))throw ri.create("invalid-sw-registration");S.swRegistration=M}})).apply(this,arguments)}function jd(S,M){return Nl.apply(this,arguments)}function Nl(){return(Nl=(0,N.Z)(function*(S,M){M?S.vapidKey=M:S.vapidKey||(S.vapidKey=La)})).apply(this,arguments)}function qo(){return(qo=(0,N.Z)(function*(S,M){if(!navigator)throw ri.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw ri.create("permission-blocked");return yield jd(S,null==M?void 0:M.vapidKey),yield Xs(S,null==M?void 0:M.serviceWorkerRegistration),Vd(S)})).apply(this,arguments)}function Ec(S,M,O){return Fl.apply(this,arguments)}function Fl(){return(Fl=(0,N.Z)(function*(S,M,O){const j=wu(M);(yield S.firebaseDependencies.analyticsProvider.get()).logEvent(j,{message_id:O[Dl],message_name:O[Lf],message_time:O[mg],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function wu(S){switch(S){case Zs.NOTIFICATION_CLICKED:return"notification_open";case Zs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Dc(){return(Dc=(0,N.Z)(function*(S,M){const O=M.data;if(!O.isFirebaseMessaging)return;S.onMessageHandler&&O.messageType===Zs.PUSH_RECEIVED&&("function"==typeof S.onMessageHandler?S.onMessageHandler(fr(O)):S.onMessageHandler.next(fr(O)));const j=O.data;Hd(j)&&"1"===j[Jn]&&(yield Ec(S,O.messageType,j))})).apply(this,arguments)}const Wo="@firebase/messaging",Yo=S=>{const M=new ds(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),S.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",O=>function gg(S,M){return Dc.apply(this,arguments)}(M,O)),M},zd=S=>{const M=S.getProvider("messaging").getImmediate();return{getToken:j=>function Gd(S,M){return qo.apply(this,arguments)}(M,j)}};function Ua(){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,N.Z)(function*(){try{yield(0,fe.eu)()}catch(S){return!1}return"undefined"!=typeof window&&(0,fe.hl)()&&(0,fe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Vf(){(0,de._registerComponent)(new Ce.wA("messaging",Yo,"PUBLIC")),(0,de._registerComponent)(new Ce.wA("messaging-internal",zd,"PRIVATE")),(0,de.registerVersion)(Wo,"0.9.15"),(0,de.registerVersion)(Wo,"0.9.15","esm2017")}();const $d="analytics",_g="firebase_id",Bl="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",xc="https://www.googletagmanager.com/gtag/js",ji=new oe.Yd("@firebase/analytics");function jf(S){return Promise.all(S.map(M=>M.catch(O=>O)))}function Zo(S,M){const O=document.createElement("script");O.src=`${xc}?l=${S}&id=${M}`,O.async=!0,document.head.appendChild(O)}function qd(S,M,O,j,X,he){return Wd.apply(this,arguments)}function Wd(){return(Wd=(0,N.Z)(function*(S,M,O,j,X,he){const ve=j[X];try{if(ve)yield M[ve];else{const Dt=(yield jf(O)).find(It=>It.measurementId===X);Dt&&(yield M[Dt.appId])}}catch(Ue){ji.error(Ue)}S("config",X,he)})).apply(this,arguments)}function Ms(S,M,O,j,X){return ja.apply(this,arguments)}function ja(){return(ja=(0,N.Z)(function*(S,M,O,j,X){try{let he=[];if(X&&X.send_to){let ve=X.send_to;Array.isArray(ve)||(ve=[ve]);const Ue=yield jf(O);for(const Dt of ve){const It=Ue.find(_t=>_t.measurementId===Dt),jt=It&&M[It.appId];if(!jt){he=[];break}he.push(jt)}}0===he.length&&(he=Object.values(M)),yield Promise.all(he),S("event",j,X||{})}catch(he){ji.error(he)}})).apply(this,arguments)}function Nn(){const S=window.document.getElementsByTagName("script");for(const M of Object.values(S))if(M.src&&M.src.includes(xc))return M;return null}const Ye=new fe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Eu=new class oi{constructor(M={},O=1e3){this.throttleMetadata=M,this.intervalMillis=O}getThrottleMetadata(M){return this.throttleMetadata[M]}setThrottleMetadata(M,O){this.throttleMetadata[M]=O}deleteThrottleMetadata(M){delete this.throttleMetadata[M]}};function Ga(S){return new Headers({Accept:"application/json","x-goog-api-key":S})}function za(S){return ai.apply(this,arguments)}function ai(){return(ai=(0,N.Z)(function*(S){var M;const{appId:O,apiKey:j}=S,X={method:"GET",headers:Ga(j)},he=Bl.replace("{app-id}",O),ve=yield fetch(he,X);if(200!==ve.status&&304!==ve.status){let Ue="";try{const Dt=yield ve.json();(null===(M=Dt.error)||void 0===M?void 0:M.message)&&(Ue=Dt.error.message)}catch(Dt){}throw Ye.create("config-fetch-failed",{httpStatus:ve.status,responseMessage:Ue})}return ve.json()})).apply(this,arguments)}function Ko(S){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,N.Z)(function*(S,M=Eu,O){const{appId:j,apiKey:X,measurementId:he}=S.options;if(!j)throw Ye.create("no-app-id");if(!X){if(he)return{measurementId:he,appId:j};throw Ye.create("no-api-key")}const ve=M.getThrottleMetadata(j)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ue=new Sc;return setTimeout((0,N.Z)(function*(){Ue.abort()}),void 0!==O?O:6e4),Ts({appId:j,apiKey:X,measurementId:he},ve,Ue,M)})).apply(this,arguments)}function Ts(S,M,O){return ht.apply(this,arguments)}function ht(){return(ht=(0,N.Z)(function*(S,{throttleEndTimeMillis:M,backoffCount:O},j,X=Eu){var he,ve;const{appId:Ue,measurementId:Dt}=S;try{yield Zd(j,M)}catch(It){if(Dt)return ji.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Dt} provided in the "measurementId" field in the local Firebase config. [${null===(he=It)||void 0===he?void 0:he.message}]`),{appId:Ue,measurementId:Dt};throw It}try{const It=yield za(S);return X.deleteThrottleMetadata(Ue),It}catch(It){const jt=It;if(!Kd(jt)){if(X.deleteThrottleMetadata(Ue),Dt)return ji.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Dt} provided in the "measurementId" field in the local Firebase config. [${null==jt?void 0:jt.message}]`),{appId:Ue,measurementId:Dt};throw It}const _t=503===Number(null===(ve=null==jt?void 0:jt.customData)||void 0===ve?void 0:ve.httpStatus)?(0,fe.$s)(O,X.intervalMillis,30):(0,fe.$s)(O,X.intervalMillis),zi={throttleEndTimeMillis:Date.now()+_t,backoffCount:O+1};return X.setThrottleMetadata(Ue,zi),ji.debug(`Calling attemptFetch again in ${_t} millis`),Ts(S,zi,j,X)}})).apply(this,arguments)}function Zd(S,M){return new Promise((O,j)=>{const X=Math.max(M-Date.now(),0),he=setTimeout(O,X);S.addEventListener(()=>{clearTimeout(he),j(Ye.create("fetch-throttle",{throttleEndTimeMillis:M}))})})}function Kd(S){if(!(S instanceof fe.ZR&&S.customData))return!1;const M=Number(S.customData.httpStatus);return 429===M||500===M||503===M||504===M}class Sc{constructor(){this.listeners=[]}addEventListener(M){this.listeners.push(M)}abort(){this.listeners.forEach(M=>M())}}function Qd(){return _n.apply(this,arguments)}function _n(){return(_n=(0,N.Z)(function*(){var S;if(!(0,fe.hl)())return ji.warn(Ye.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,fe.eu)()}catch(M){return ji.warn(Ye.create("indexeddb-unavailable",{errorInfo:null===(S=M)||void 0===S?void 0:S.toString()}).message),!1}return!0})).apply(this,arguments)}function to(){return(to=(0,N.Z)(function*(S,M,O,j,X,he,ve){var Ue;const Dt=Ko(S);Dt.then(rr=>{O[rr.measurementId]=rr.appId,S.options.measurementId&&rr.measurementId!==S.options.measurementId&&ji.warn(`The measurement ID in the local Firebase config (${S.options.measurementId}) does not match the measurement ID fetched from the server (${rr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(rr=>ji.error(rr)),M.push(Dt);const It=Qd().then(rr=>{if(rr)return j.getId()}),[jt,_t]=yield Promise.all([Dt,It]);Nn()||Zo(he,jt.measurementId),X("js",new Date);const zi=null!==(Ue=null==ve?void 0:ve.config)&&void 0!==Ue?Ue:{};return zi.origin="firebase",zi.update=!0,null!=_t&&(zi[_g]=_t),X("config",jt.measurementId,zi),jt.measurementId})).apply(this,arguments)}class Xo{constructor(M){this.app=M}_delete(){return delete Ir[this.app.options.appId],Promise.resolve()}}let Ir={},Gi=[];const no={};let xo,qa,Jo="dataLayer",ea=!1;function Mo(S,M,O){!function So(){const S=[];if((0,fe.ru)()&&S.push("This is a browser extension environment."),(0,fe.zI)()||S.push("Cookies are not available."),S.length>0){const M=S.map((j,X)=>`(${X+1}) ${j}`).join(" "),O=Ye.create("invalid-analytics-context",{errorInfo:M});ji.warn(O.message)}}();const j=S.options.appId;if(!j)throw Ye.create("no-app-id");if(!S.options.apiKey){if(!S.options.measurementId)throw Ye.create("no-api-key");ji.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${S.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Ir[j])throw Ye.create("already-exists",{id:j});if(!ea){!function Ha(S){let M=[];Array.isArray(window[S])?M=window[S]:window[S]=M}(Jo);const{wrappedGtag:he,gtagCore:ve}=function vg(S,M,O,j,X){let he=function(...ve){window[j].push(arguments)};return window[X]&&"function"==typeof window[X]&&(he=window[X]),window[X]=function Yd(S,M,O,j){function he(){return(he=(0,N.Z)(function*(ve,Ue,Dt){try{"event"===ve?yield Ms(S,M,O,Ue,Dt):"config"===ve?yield qd(S,M,O,j,Ue,Dt):S("set",Ue)}catch(It){ji.error(It)}})).apply(this,arguments)}return function X(ve,Ue,Dt){return he.apply(this,arguments)}}(he,S,M,O),{gtagCore:he,wrappedGtag:window[X]}}(Ir,Gi,no,Jo,"gtag");qa=he,xo=ve,ea=!0}return Ir[j]=function Mc(S,M,O,j,X,he,ve){return to.apply(this,arguments)}(S,Gi,no,M,xo,Jo,O),new Xo(S)}function Qn(){return(Qn=(0,N.Z)(function*(S,M,O,j,X){if(X&&X.global)S("event",O,j);else{const he=yield M;S("event",O,Object.assign(Object.assign({},j),{send_to:he}))}})).apply(this,arguments)}function Ul(){return ia.apply(this,arguments)}function ia(){return(ia=(0,N.Z)(function*(){if((0,fe.ru)()||!(0,fe.zI)()||!(0,fe.hl)())return!1;try{return yield(0,fe.eu)()}catch(S){return!1}})).apply(this,arguments)}const wi="@firebase/analytics";!function Io(){(0,de._registerComponent)(new Ce.wA($d,(M,{options:O})=>Mo(M.getProvider("app").getImmediate(),M.getProvider("installations-internal").getImmediate(),O),"PUBLIC")),(0,de._registerComponent)(new Ce.wA("analytics-internal",function S(M){try{const O=M.getProvider($d).getImmediate();return{logEvent:(j,X,he)=>function Wa(S,M,O,j){S=(0,fe.m9)(S),function Hr(S,M,O,j,X){return Qn.apply(this,arguments)}(qa,Ir[S.app.options.appId],M,O,j).catch(X=>ji.error(X))}(O,j,X,he)}}catch(O){throw Ye.create("interop-component-reg-failed",{reason:O})}},"PRIVATE")),(0,de.registerVersion)(wi,"0.7.11"),(0,de.registerVersion)(wi,"0.7.11","esm2017")}();var ra=L(4408),fi=L(7565);const jl=new class Hl extends fi.v{}(class Ya extends ra.o{constructor(M,O){super(M,O),this.scheduler=M,this.work=O}schedule(M,O=0){return O>0?super.schedule(M,O):(this.delay=O,this.state=M,this.scheduler.flush(this),this)}execute(M,O){return O>0||this.closed?super.execute(M,O):this._execute(M,O)}requestAsyncId(M,O,j=0){return null!=j&&j>0||null==j&&this.delay>0?super.requestAsyncId(M,O,j):M.flush(this)}});var zf=L(4986),pr=L(8505),mr=L(5363),Gl=L(9468);const zl=new c.GfV("7.4.1"),io="__angularfire_symbol__analyticsIsSupportedValue",Tc="__angularfire_symbol__analyticsIsSupported",ro="__angularfire_symbol__remoteConfigIsSupportedValue",$l="__angularfire_symbol__remoteConfigIsSupported",xu="__angularfire_symbol__messagingIsSupportedValue",qt="__angularfire_symbol__messagingIsSupported";function wg(S,M,O){if(M){if(1===M.length)return M[0];const he=M.filter(ve=>ve.app===O);if(1===he.length)return he[0]}return O.container.getProvider(S).getImmediate({optional:!0})}globalThis[Tc]||(globalThis[Tc]=Ul().then(S=>globalThis[io]=S).catch(()=>globalThis[io]=!1)),globalThis[qt]||(globalThis[qt]=Ua().then(S=>globalThis[xu]=S).catch(()=>globalThis[xu]=!1)),globalThis[$l]||(globalThis[$l]=Jv().then(S=>globalThis[ro]=S).catch(()=>globalThis[ro]=!1));const kc=(S,M)=>{const O=M?[M]:(0,G.C6)(),j=[];return O.forEach(X=>{X.container.getProvider(S).instances.forEach(ve=>{j.includes(ve)||j.push(ve)})}),j};function Za(){}class Ar{constructor(M,O=jl){this.zone=M,this.delegate=O}now(){return this.delegate.now()}schedule(M,O,j){const X=this.zone;return this.delegate.schedule(function(ve){X.runGuarded(()=>{M.apply(this,[ve])})},O,j)}}class Xd{constructor(M){this.zone=M,this.task=null}call(M,O){const j=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Za,{},Za,Za)),O.pipe((0,pr.b)({next:j,complete:j,error:j})).subscribe(M).add(j)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Rc=(()=>{class S{constructor(O){this.ngZone=O,this.outsideAngular=O.runOutsideAngular(()=>new Ar(Zone.current)),this.insideAngular=O.run(()=>new Ar(Zone.current,zf.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return S.\u0275fac=function(O){return new(O||S)(c.LFG(c.R0b))},S.\u0275prov=c.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();function ks(){const S=globalThis.\u0275AngularFireScheduler;if(!S)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return S}function kr(S){return S.pipe((0,mr.Q)(ks().outsideAngular))}function Ao(S){return ks(),function Ka(S){return function(O){return(O=O.lift(new Xd(S.ngZone))).pipe((0,Gl.R)(S.outsideAngular),(0,mr.Q)(S.insideAngular))}}(ks())(S)}},3673:(ut,Se,L)=>{L.d(Se,{$:()=>Co,A:()=>q,B:()=>Fe,G:()=>Bn,H:()=>En,J:()=>Ws,L:()=>cn,M:()=>Cl,N:()=>El,P:()=>Tc,Q:()=>Dl,R:()=>Io,T:()=>Lf,U:()=>La,V:()=>Zs,W:()=>us,X:()=>Bd,Y:()=>Cc,Z:()=>Qs,_:()=>Ba,a:()=>Oi,a0:()=>Vd,a1:()=>_u,a2:()=>Bf,a3:()=>tn,a4:()=>ei,a5:()=>Rl,a6:()=>vu,a7:()=>yu,a8:()=>Hd,a9:()=>Ol,aA:()=>ko,aB:()=>so,aC:()=>S,aD:()=>Cg,aE:()=>ze,aI:()=>Ga,aL:()=>Jn,aa:()=>bu,ab:()=>Xs,ac:()=>jd,af:()=>Ec,ag:()=>wu,ah:()=>gg,ak:()=>Ks,al:()=>Hi,an:()=>xc,ao:()=>Wd,ap:()=>di,aq:()=>Te,ar:()=>Qt,as:()=>gt,at:()=>We,au:()=>oo,av:()=>qf,aw:()=>Le,ax:()=>re,ay:()=>se,az:()=>kn,b:()=>Ye,c:()=>wg,d:()=>Xd,e:()=>Za,f:()=>j,g:()=>It,h:()=>ve,i:()=>Mo,j:()=>zi,k:()=>Jf,l:()=>jl,m:()=>tp,o:()=>pe,r:()=>zf,s:()=>fi,u:()=>zl});var c=L(5861),G=L(2090),N=L(9681),de=L(655),fe=L(1877),Ce=L(4859);const pe={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},q={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Fe=function ae(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ve=function Xe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},qe=new G.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ae=new fe.Yd("@firebase/auth");function Ke(w,...g){Ae.logLevel<=fe.in.ERROR&&Ae.error(`Auth (${N.SDK_VERSION}): ${w}`,...g)}function We(w,...g){throw Je(w,...g)}function Le(w,...g){return Je(w,...g)}function Pe(w,g,v){const E=Object.assign(Object.assign({},Ve()),{[g]:v});return new G.LL("auth","Firebase",E).create(g,{appName:w.name})}function Me(w,g,v){if(!(g instanceof v))throw v.name!==g.constructor.name&&We(w,"argument-error"),Pe(w,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Je(w,...g){if("string"!=typeof w){const v=g[0],E=[...g.slice(1)];return E[0]&&(E[0].appName=w.name),w._errorFactory.create(v,...E)}return qe.create(w,...g)}function re(w,g,...v){if(!w)throw Je(g,...v)}function _e(w){const g="INTERNAL ASSERTION FAILED: "+w;throw Ke(g),new Error(g)}function Te(w,g){w||_e(g)}const J=new Map;function se(w){Te(w instanceof Function,"Expected a class definition");let g=J.get(w);return g?(Te(g instanceof w,"Instance stored in cache mismatched with class"),g):(g=new w,J.set(w,g),g)}function me(){var w;return"undefined"!=typeof self&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function He(){return"http:"===wt()||"https:"===wt()}function wt(){var w;return"undefined"!=typeof self&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class st{constructor(g,v){this.shortDelay=g,this.longDelay=v,Te(v>g,"Short delay should be less than long delay!"),this.isMobile=(0,G.uI)()||(0,G.b$)()}get(){return function ln(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(He()||(0,G.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Tn(w,g){Te(w.emulator,"Emulator should always be set here");const{url:v}=w.emulator;return g?`${v}${g.startsWith("/")?g.slice(1):g}`:v}class ti{static initialize(g,v,E){this.fetchImpl=g,v&&(this.headersImpl=v),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void _e("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void _e("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void _e("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const In={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},fn=new st(3e4,6e4);function Zt(w,g){return w.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:w.tenantId}):g}function un(w,g,v,E){return zn.apply(this,arguments)}function zn(){return(zn=(0,c.Z)(function*(w,g,v,E,k={}){return as(w,k,(0,c.Z)(function*(){let B={},ie={};E&&("GET"===g?ie=E:B={body:JSON.stringify(E)});const ke=(0,G.xO)(Object.assign({key:w.config.apiKey},ie)).slice(1),lt=yield w._getAdditionalHeaders();return lt["Content-Type"]="application/json",w.languageCode&&(lt["X-Firebase-Locale"]=w.languageCode),ti.fetch()(Fr(w,w.config.apiHost,v,ke),Object.assign({method:g,headers:lt,referrerPolicy:"no-referrer"},B))}))})).apply(this,arguments)}function as(w,g,v){return tr.apply(this,arguments)}function tr(){return(tr=(0,c.Z)(function*(w,g,v){w._canInitEmulator=!1;const E=Object.assign(Object.assign({},In),g);try{const k=new ls(w),B=yield Promise.race([v(),k.promise]);k.clearNetworkTimeout();const ie=yield B.json();if("needConfirmation"in ie)throw ni(w,"account-exists-with-different-credential",ie);if(B.ok&&!("errorMessage"in ie))return ie;{const ke=B.ok?ie.errorMessage:ie.error.message,[lt,xt]=ke.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===lt)throw ni(w,"credential-already-in-use",ie);if("EMAIL_EXISTS"===lt)throw ni(w,"email-already-in-use",ie);if("USER_DISABLED"===lt)throw ni(w,"user-disabled",ie);const Ft=E[lt]||lt.toLowerCase().replace(/[_\s]+/g,"-");if(xt)throw Pe(w,Ft,xt);We(w,Ft)}}catch(k){if(k instanceof G.ZR)throw k;We(w,"network-request-failed")}})).apply(this,arguments)}function Kn(w,g,v,E){return ws.apply(this,arguments)}function ws(){return(ws=(0,c.Z)(function*(w,g,v,E,k={}){const B=yield un(w,g,v,E,k);return"mfaPendingCredential"in B&&We(w,"multi-factor-auth-required",{_serverResponse:B}),B})).apply(this,arguments)}function Fr(w,g,v,E){const k=`${g}${v}?${E}`;return w.config.emulator?Tn(w.config,k):`${w.config.apiScheme}://${k}`}class ls{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((v,E)=>{this.timer=setTimeout(()=>E(Le(this.auth,"network-request-failed")),fn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ni(w,g,v){const E={appName:w.name};v.email&&(E.email=v.email),v.phoneNumber&&(E.phoneNumber=v.phoneNumber);const k=Le(w,g,E);return k.customData._tokenResponse=v,k}function Ct(){return(Ct=(0,c.Z)(function*(w,g){return un(w,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function cr(w,g){return jn.apply(this,arguments)}function jn(){return(jn=(0,c.Z)(function*(w,g){return un(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function pn(w,g){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,c.Z)(function*(w,g){return un(w,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function Ii(w){if(w)try{const g=new Date(Number(w));if(!isNaN(g.getTime()))return g.toUTCString()}catch(g){}}function Ai(){return(Ai=(0,c.Z)(function*(w,g=!1){const v=(0,G.m9)(w),E=yield v.getIdToken(g),k=Jt(E);re(k&&k.exp&&k.auth_time&&k.iat,v.auth,"internal-error");const B="object"==typeof k.firebase?k.firebase:void 0,ie=null==B?void 0:B.sign_in_provider;return{claims:k,token:E,authTime:Ii(zs(k.auth_time)),issuedAtTime:Ii(zs(k.iat)),expirationTime:Ii(zs(k.exp)),signInProvider:ie||null,signInSecondFactor:(null==B?void 0:B.sign_in_second_factor)||null}})).apply(this,arguments)}function zs(w){return 1e3*Number(w)}function Jt(w){var g;const[v,E,k]=w.split(".");if(void 0===v||void 0===E||void 0===k)return Ke("JWT malformed, contained fewer than 3 sections"),null;try{const B=(0,G.tV)(E);return B?JSON.parse(B):(Ke("Failed to decode base64 JWT payload"),null)}catch(B){return Ke("Caught error parsing JWT payload as JSON",null===(g=B)||void 0===g?void 0:g.toString()),null}}function ft(w,g){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,c.Z)(function*(w,g,v=!1){if(v)return g;try{return yield g}catch(E){throw E instanceof G.ZR&&Br(E)&&w.auth.currentUser===w&&(yield w.auth.signOut()),E}})).apply(this,arguments)}function Br({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}class en{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var v;if(g){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const k=(null!==(v=this.user.stsTokenManager.expirationTime)&&void 0!==v?v:0)-Date.now()-3e5;return Math.max(0,k)}}schedule(g=!1){var v=this;if(!this.isRunning)return;const E=this.getInterval(g);this.timerId=setTimeout((0,c.Z)(function*(){yield v.iteration()}),E)}iteration(){var g=this;return(0,c.Z)(function*(){var v;try{yield g.user.getIdToken(!0)}catch(E){return void("auth/network-request-failed"===(null===(v=E)||void 0===v?void 0:v.code)&&g.schedule(!0))}g.schedule()})()}}class cs{constructor(g,v){this.createdAt=g,this.lastLoginAt=v,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ii(this.lastLoginAt),this.creationTime=Ii(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ui(w){return An.apply(this,arguments)}function An(){return(An=(0,c.Z)(function*(w){var g;const v=w.auth,E=yield w.getIdToken(),k=yield ft(w,pn(v,{idToken:E}));re(null==k?void 0:k.users.length,v,"internal-error");const B=k.users[0];w._notifyReloadListener(B);const ie=(null===(g=B.providerUserInfo)||void 0===g?void 0:g.length)?ee(B.providerUserInfo):[],ke=z(w.providerData,ie),Ft=!!w.isAnonymous&&!(w.email&&B.passwordHash||(null==ke?void 0:ke.length)),Wn={uid:B.localId,displayName:B.displayName||null,photoURL:B.photoUrl||null,email:B.email||null,emailVerified:B.emailVerified||!1,phoneNumber:B.phoneNumber||null,tenantId:B.tenantId||null,providerData:ke,metadata:new cs(B.createdAt,B.lastLoginAt),isAnonymous:Ft};Object.assign(w,Wn)})).apply(this,arguments)}function K(){return(K=(0,c.Z)(function*(w){const g=(0,G.m9)(w);yield ui(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function z(w,g){return[...w.filter(E=>!g.some(k=>k.providerId===E.providerId)),...g]}function ee(w){return w.map(g=>{var{providerId:v}=g,E=(0,de._T)(g,["providerId"]);return{providerId:v,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function H(){return(H=(0,c.Z)(function*(w,g){const v=yield as(w,{},(0,c.Z)(function*(){const E=(0,G.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:k,apiKey:B}=w.config,ie=Fr(w,k,"/v1/token",`key=${B}`),ke=yield w._getAdditionalHeaders();return ke["Content-Type"]="application/x-www-form-urlencoded",ti.fetch()(ie,{method:"POST",headers:ke,body:E})}));return{accessToken:v.access_token,expiresIn:v.expires_in,refreshToken:v.refresh_token}})).apply(this,arguments)}class xe{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){re(g.idToken,"internal-error"),re(void 0!==g.idToken,"internal-error"),re(void 0!==g.refreshToken,"internal-error");const v="expiresIn"in g&&void 0!==g.expiresIn?Number(g.expiresIn):function vt(w){const g=Jt(w);return re(g,"internal-error"),re(void 0!==g.exp,"internal-error"),re(void 0!==g.iat,"internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,v)}getToken(g,v=!1){var E=this;return(0,c.Z)(function*(){return re(!E.accessToken||E.refreshToken,g,"user-token-expired"),v||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(g,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,v){var E=this;return(0,c.Z)(function*(){const{accessToken:k,refreshToken:B,expiresIn:ie}=yield function te(w,g){return H.apply(this,arguments)}(g,v);E.updateTokensAndExpiration(k,B,Number(ie))})()}updateTokensAndExpiration(g,v,E){this.refreshToken=v||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(g,v){const{refreshToken:E,accessToken:k,expirationTime:B}=v,ie=new xe;return E&&(re("string"==typeof E,"internal-error",{appName:g}),ie.refreshToken=E),k&&(re("string"==typeof k,"internal-error",{appName:g}),ie.accessToken=k),B&&(re("number"==typeof B,"internal-error",{appName:g}),ie.expirationTime=B),ie}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new xe,this.toJSON())}_performRefresh(){return _e("not implemented")}}function Ge(w,g){re("string"==typeof w||void 0===w,"internal-error",{appName:g})}class dt{constructor(g){var{uid:v,auth:E,stsTokenManager:k}=g,B=(0,de._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new en(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=v,this.auth=E,this.stsTokenManager=k,this.accessToken=k.accessToken,this.displayName=B.displayName||null,this.email=B.email||null,this.emailVerified=B.emailVerified||!1,this.phoneNumber=B.phoneNumber||null,this.photoURL=B.photoURL||null,this.isAnonymous=B.isAnonymous||!1,this.tenantId=B.tenantId||null,this.providerData=B.providerData?[...B.providerData]:[],this.metadata=new cs(B.createdAt||void 0,B.lastLoginAt||void 0)}getIdToken(g){var v=this;return(0,c.Z)(function*(){const E=yield ft(v,v.stsTokenManager.getToken(v.auth,g));return re(E,v.auth,"internal-error"),v.accessToken!==E&&(v.accessToken=E,yield v.auth._persistUserIfCurrent(v),v.auth._notifyListenersIfCurrent(v)),E})()}getIdTokenResult(g){return function Gn(w){return Ai.apply(this,arguments)}(this,g)}reload(){return function yt(w){return K.apply(this,arguments)}(this)}_assign(g){this!==g&&(re(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(v=>Object.assign({},v)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new dt(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,v=!1){var E=this;return(0,c.Z)(function*(){let k=!1;g.idToken&&g.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(g),k=!0),v&&(yield ui(E)),yield E.auth._persistUserIfCurrent(E),k&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var g=this;return(0,c.Z)(function*(){const v=yield g.getIdToken();return yield ft(g,function Cs(w,g){return Ct.apply(this,arguments)}(g.auth,{idToken:v})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,v){var E,k,B,ie,ke,lt,xt,Ft;const Wn=null!==(E=v.displayName)&&void 0!==E?E:void 0,Os=null!==(k=v.email)&&void 0!==k?k:void 0,Ro=null!==(B=v.phoneNumber)&&void 0!==B?B:void 0,ip=null!==(ie=v.photoURL)&&void 0!==ie?ie:void 0,Tu=null!==(ke=v.tenantId)&&void 0!==ke?ke:void 0,Ja=null!==(lt=v._redirectEventId)&&void 0!==lt?lt:void 0,Tg=null!==(xt=v.createdAt)&&void 0!==xt?xt:void 0,Lc=null!==(Ft=v.lastLoginAt)&&void 0!==Ft?Ft:void 0,{uid:Iu,emailVerified:Ig,isAnonymous:ih,providerData:Wl,stsTokenManager:rp}=v;re(Iu&&rp,g,"internal-error");const sp=xe.fromJSON(this.name,rp);re("string"==typeof Iu,g,"internal-error"),Ge(Wn,g.name),Ge(Os,g.name),re("boolean"==typeof Ig,g,"internal-error"),re("boolean"==typeof ih,g,"internal-error"),Ge(Ro,g.name),Ge(ip,g.name),Ge(Tu,g.name),Ge(Ja,g.name),Ge(Tg,g.name),Ge(Lc,g.name);const Au=new dt({uid:Iu,auth:g,email:Os,emailVerified:Ig,displayName:Wn,isAnonymous:ih,photoURL:ip,phoneNumber:Ro,tenantId:Tu,stsTokenManager:sp,createdAt:Tg,lastLoginAt:Lc});return Wl&&Array.isArray(Wl)&&(Au.providerData=Wl.map(yn=>Object.assign({},yn))),Ja&&(Au._redirectEventId=Ja),Au}static _fromIdTokenResponse(g,v,E=!1){return(0,c.Z)(function*(){const k=new xe;k.updateFromServerResponse(v);const B=new dt({uid:v.localId,auth:g,stsTokenManager:k,isAnonymous:E});return yield ui(B),B})()}}const cn=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,c.Z)(function*(){return!0})()}_set(v,E){var k=this;return(0,c.Z)(function*(){k.storage[v]=E})()}_get(v){var E=this;return(0,c.Z)(function*(){const k=E.storage[v];return void 0===k?null:k})()}_remove(v){var E=this;return(0,c.Z)(function*(){delete E.storage[v]})()}_addListener(v,E){}_removeListener(v,E){}}return w.type="NONE",w})();function kn(w,g,v){return`firebase:${w}:${g}:${v}`}class Kt{constructor(g,v,E){this.persistence=g,this.auth=v,this.userKey=E;const{config:k,name:B}=this.auth;this.fullUserKey=kn(this.userKey,k.apiKey,B),this.fullPersistenceKey=kn("persistence",k.apiKey,B),this.boundEventHandler=v._onStorageEvent.bind(v),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,c.Z)(function*(){const v=yield g.persistence._get(g.fullUserKey);return v?dt._fromJSON(g.auth,v):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var v=this;return(0,c.Z)(function*(){if(v.persistence===g)return;const E=yield v.getCurrentUser();return yield v.removeCurrentUser(),v.persistence=g,E?v.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,v,E="authUser"){return(0,c.Z)(function*(){if(!v.length)return new Kt(se(cn),g,E);const k=(yield Promise.all(v.map(function(){var xt=(0,c.Z)(function*(Ft){if(yield Ft._isAvailable())return Ft});return function(Ft){return xt.apply(this,arguments)}}()))).filter(xt=>xt);let B=k[0]||se(cn);const ie=kn(E,g.config.apiKey,g.name);let ke=null;for(const xt of v)try{const Ft=yield xt._get(ie);if(Ft){const Wn=dt._fromJSON(g,Ft);xt!==B&&(ke=Wn),B=xt;break}}catch(Ft){}const lt=k.filter(xt=>xt._shouldAllowMigration);return B._shouldAllowMigration&&lt.length?(B=lt[0],ke&&(yield B._set(ie,ke.toJSON())),yield Promise.all(v.map(function(){var xt=(0,c.Z)(function*(Ft){if(Ft!==B)try{yield Ft._remove(ie)}catch(Wn){}});return function(Ft){return xt.apply(this,arguments)}}())),new Kt(B,g,E)):new Kt(B,g,E)})()}}function ce(w){const g=w.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(tt(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(Z(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(kt(g))return"Blackberry";if(sn(g))return"Webos";if(Y(g))return"Safari";if((g.includes("chrome/")||Re(g))&&!g.includes("edge/"))return"Chrome";if(gt(g))return"Android";{const E=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==E?void 0:E.length))return E[1]}return"Other"}function Z(w=(0,G.z$)()){return/firefox\//i.test(w)}function Y(w=(0,G.z$)()){const g=w.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function Re(w=(0,G.z$)()){return/crios\//i.test(w)}function tt(w=(0,G.z$)()){return/iemobile/i.test(w)}function gt(w=(0,G.z$)()){return/android/i.test(w)}function kt(w=(0,G.z$)()){return/blackberry/i.test(w)}function sn(w=(0,G.z$)()){return/webos/i.test(w)}function Qt(w=(0,G.z$)()){return/iphone|ipad|ipod/i.test(w)}function di(w=(0,G.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}function nr(w=(0,G.z$)()){return Qt(w)||gt(w)||sn(w)||kt(w)||/windows phone/i.test(w)||tt(w)}function Li(w,g=[]){let v;switch(w){case"Browser":v=ce((0,G.z$)());break;case"Worker":v=`${ce((0,G.z$)())}-${w}`;break;default:v=w}const E=g.length?g.join(","):"FirebaseCore-web";return`${v}/JsCore/${N.SDK_VERSION}/${E}`}class bl{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,v){const E=B=>new Promise((ie,ke)=>{try{ie(g(B))}catch(lt){ke(lt)}});E.onAbort=v,this.queue.push(E);const k=this.queue.length-1;return()=>{this.queue[k]=()=>Promise.resolve()}}runMiddleware(g){var v=this;return(0,c.Z)(function*(){var E;if(v.auth.currentUser===g)return;const k=[];try{for(const B of v.queue)yield B(g),B.onAbort&&k.push(B.onAbort)}catch(B){k.reverse();for(const ie of k)try{ie()}catch(ke){}throw v.auth._errorFactory.create("login-blocked",{originalMessage:null===(E=B)||void 0===E?void 0:E.message})}})()}}class Sr{constructor(g,v,E){this.app=g,this.heartbeatServiceProvider=v,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $t(this),this.idTokenSubscription=new $t(this),this.beforeStateQueue=new bl(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qe,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(g,v){var E=this;return v&&(this._popupRedirectResolver=se(v)),this._initializationPromise=this.queue((0,c.Z)(function*(){var k,B;if(!E._deleted&&(E.persistenceManager=yield Kt.create(E,g),!E._deleted)){if(null===(k=E._popupRedirectResolver)||void 0===k?void 0:k._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch(ie){}yield E.initializeCurrentUser(v),E.lastNotifiedUid=(null===(B=E.currentUser)||void 0===B?void 0:B.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,c.Z)(function*(){if(g._deleted)return;const v=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||v){if(g.currentUser&&v&&g.currentUser.uid===v.uid)return g._currentUser._assign(v),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(v,!0)}})()}initializeCurrentUser(g){var v=this;return(0,c.Z)(function*(){var E;const k=yield v.assertedPersistence.getCurrentUser();let B=k,ie=!1;if(g&&v.config.authDomain){yield v.getOrInitRedirectPersistenceManager();const ke=null===(E=v.redirectUser)||void 0===E?void 0:E._redirectEventId,lt=null==B?void 0:B._redirectEventId,xt=yield v.tryRedirectSignIn(g);(!ke||ke===lt)&&(null==xt?void 0:xt.user)&&(B=xt.user,ie=!0)}if(!B)return v.directlySetCurrentUser(null);if(!B._redirectEventId){if(ie)try{yield v.beforeStateQueue.runMiddleware(B)}catch(ke){B=k,v._popupRedirectResolver._overrideRedirectResult(v,()=>Promise.reject(ke))}return B?v.reloadAndSetCurrentUserOrClear(B):v.directlySetCurrentUser(null)}return re(v._popupRedirectResolver,v,"argument-error"),yield v.getOrInitRedirectPersistenceManager(),v.redirectUser&&v.redirectUser._redirectEventId===B._redirectEventId?v.directlySetCurrentUser(B):v.reloadAndSetCurrentUserOrClear(B)})()}tryRedirectSignIn(g){var v=this;return(0,c.Z)(function*(){let E=null;try{E=yield v._popupRedirectResolver._completeRedirectFn(v,g,!0)}catch(k){yield v._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(g){var v=this;return(0,c.Z)(function*(){var E;try{yield ui(g)}catch(k){if("auth/network-request-failed"!==(null===(E=k)||void 0===E?void 0:E.code))return v.directlySetCurrentUser(null)}return v.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function Yt(){if("undefined"==typeof navigator)return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var g=this;return(0,c.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var v=this;return(0,c.Z)(function*(){const E=g?(0,G.m9)(g):null;return E&&re(E.auth.config.apiKey===v.config.apiKey,v,"invalid-user-token"),v._updateCurrentUser(E&&E._clone(v))})()}_updateCurrentUser(g,v=!1){var E=this;return(0,c.Z)(function*(){if(!E._deleted)return g&&re(E.tenantId===g.tenantId,E,"tenant-id-mismatch"),v||(yield E.beforeStateQueue.runMiddleware(g)),E.queue((0,c.Z)(function*(){yield E.directlySetCurrentUser(g),E.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,c.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var v=this;return this.queue((0,c.Z)(function*(){yield v.assertedPersistence.setPersistence(se(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new G.LL("auth","Firebase",g())}onAuthStateChanged(g,v,E){return this.registerStateListener(this.authStateSubscription,g,v,E)}beforeAuthStateChanged(g,v){return this.beforeStateQueue.pushCallback(g,v)}onIdTokenChanged(g,v,E){return this.registerStateListener(this.idTokenSubscription,g,v,E)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,v){var E=this;return(0,c.Z)(function*(){const k=yield E.getOrInitRedirectPersistenceManager(v);return null===g?k.removeCurrentUser():k.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var v=this;return(0,c.Z)(function*(){if(!v.redirectPersistenceManager){const E=g&&se(g)||v._popupRedirectResolver;re(E,v,"argument-error"),v.redirectPersistenceManager=yield Kt.create(v,[se(E._redirectPersistence)],"redirectUser"),v.redirectUser=yield v.redirectPersistenceManager.getCurrentUser()}return v.redirectPersistenceManager})()}_redirectUserForId(g){var v=this;return(0,c.Z)(function*(){var E,k;return v._isInitialized&&(yield v.queue((0,c.Z)(function*(){}))),(null===(E=v._currentUser)||void 0===E?void 0:E._redirectEventId)===g?v._currentUser:(null===(k=v.redirectUser)||void 0===k?void 0:k._redirectEventId)===g?v.redirectUser:null})()}_persistUserIfCurrent(g){var v=this;return(0,c.Z)(function*(){if(g===v.currentUser)return v.queue((0,c.Z)(function*(){return v.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,v;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(v=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==v?v:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,v,E,k){if(this._deleted)return()=>{};const B="function"==typeof v?v:v.next.bind(v),ie=this._isInitialized?Promise.resolve():this._initializationPromise;return re(ie,this,"internal-error"),ie.then(()=>B(this.currentUser)),"function"==typeof v?g.addObserver(v,E,k):g.addObserver(v)}directlySetCurrentUser(g){var v=this;return(0,c.Z)(function*(){v.currentUser&&v.currentUser!==g&&(v._currentUser._stopProactiveRefresh(),g&&v.isProactiveRefreshEnabled&&g._startProactiveRefresh()),v.currentUser=g,g?yield v.assertedPersistence.setCurrentUser(g):yield v.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Li(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,c.Z)(function*(){var v;const E={"X-Client-Version":g.clientVersion};g.app.options.appId&&(E["X-Firebase-gmpid"]=g.app.options.appId);const k=yield null===(v=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===v?void 0:v.getHeartbeatsHeader();return k&&(E["X-Firebase-Client"]=k),E})()}}function ze(w){return(0,G.m9)(w)}class $t{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,G.ne)(v=>this.observer=v)}get next(){return re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Bn(w,g,v){const E=ze(w);re(E._canInitEmulator,E,"emulator-config-failed"),re(/^https?:\/\//.test(g),E,"invalid-emulator-scheme");const k=!!(null==v?void 0:v.disableWarnings),B=dr(g),{host:ie,port:ke}=function $s(w){const g=dr(w),v=/(\/\/)?([^?#/]+)/.exec(w.substr(g.length));if(!v)return{host:"",port:null};const E=v[2].split("@").pop()||"",k=/^(\[[^\]]+\])(:|$)/.exec(E);if(k){const B=k[1];return{host:B,port:hi(E.substr(B.length+1))}}{const[B,ie]=E.split(":");return{host:B,port:hi(ie)}}}(g);E.config.emulator={url:`${B}//${ie}${null===ke?"":`:${ke}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:ie,port:ke,protocol:B.replace(":",""),options:Object.freeze({disableWarnings:k})}),k||function qs(){function w(){const g=document.createElement("p"),v=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",v.position="fixed",v.width="100%",v.backgroundColor="#ffffff",v.border=".1em solid #000000",v.color="#b50000",v.bottom="0px",v.left="0px",v.margin="0px",v.zIndex="10000",v.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}function dr(w){const g=w.indexOf(":");return g<0?"":w.substr(0,g+1)}function hi(w){if(!w)return null;const g=Number(w);return isNaN(g)?null:g}class En{constructor(g,v){this.providerId=g,this.signInMethod=v}toJSON(){return _e("not implemented")}_getIdTokenResponse(g){return _e("not implemented")}_linkToIdToken(g,v){return _e("not implemented")}_getReauthenticationResolver(g){return _e("not implemented")}}function jo(w,g){return ii.apply(this,arguments)}function ii(){return(ii=(0,c.Z)(function*(w,g){return un(w,"POST","/v1/accounts:resetPassword",Zt(w,g))})).apply(this,arguments)}function Ht(w,g){return ka.apply(this,arguments)}function ka(){return(ka=(0,c.Z)(function*(w,g){return un(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Ra(w,g){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,c.Z)(function*(w,g){return un(w,"POST","/v1/accounts:update",Zt(w,g))})).apply(this,arguments)}function yi(){return(yi=(0,c.Z)(function*(w,g){return Kn(w,"POST","/v1/accounts:signInWithPassword",Zt(w,g))})).apply(this,arguments)}function vo(w,g){return Go.apply(this,arguments)}function Go(){return(Go=(0,c.Z)(function*(w,g){return un(w,"POST","/v1/accounts:sendOobCode",Zt(w,g))})).apply(this,arguments)}function Bi(w,g){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,c.Z)(function*(w,g){return vo(w,g)})).apply(this,arguments)}function Md(w,g){return zo.apply(this,arguments)}function zo(){return(zo=(0,c.Z)(function*(w,g){return vo(w,g)})).apply(this,arguments)}function Mr(w,g){return hr.apply(this,arguments)}function hr(){return(hr=(0,c.Z)(function*(w,g){return vo(w,g)})).apply(this,arguments)}function Td(w,g){return gc.apply(this,arguments)}function gc(){return(gc=(0,c.Z)(function*(w,g){return vo(w,g)})).apply(this,arguments)}function Vr(){return(Vr=(0,c.Z)(function*(w,g){return Kn(w,"POST","/v1/accounts:signInWithEmailLink",Zt(w,g))})).apply(this,arguments)}function Ad(){return(Ad=(0,c.Z)(function*(w,g){return Kn(w,"POST","/v1/accounts:signInWithEmailLink",Zt(w,g))})).apply(this,arguments)}class _c extends En{constructor(g,v,E,k=null){super("password",E),this._email=g,this._password=v,this._tenantId=k}static _fromEmailAndPassword(g,v){return new _c(g,v,"password")}static _fromEmailAndCode(g,v,E=null){return new _c(g,v,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const v="string"==typeof g?JSON.parse(g):g;if((null==v?void 0:v.email)&&(null==v?void 0:v.password)){if("password"===v.signInMethod)return this._fromEmailAndPassword(v.email,v.password);if("emailLink"===v.signInMethod)return this._fromEmailAndCode(v.email,v.password,v.tenantId)}return null}_getIdTokenResponse(g){var v=this;return(0,c.Z)(function*(){switch(v.signInMethod){case"password":return function Pa(w,g){return yi.apply(this,arguments)}(g,{returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function yo(w,g){return Vr.apply(this,arguments)}(g,{email:v._email,oobCode:v._password});default:We(g,"internal-error")}})()}_linkToIdToken(g,v){var E=this;return(0,c.Z)(function*(){switch(E.signInMethod){case"password":return Ht(g,{idToken:v,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function Id(w,g){return Ad.apply(this,arguments)}(g,{idToken:v,email:E._email,oobCode:E._password});default:We(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function bi(w,g){return kd.apply(this,arguments)}function kd(){return(kd=(0,c.Z)(function*(w,g){return Kn(w,"POST","/v1/accounts:signInWithIdp",Zt(w,g))})).apply(this,arguments)}class Ws extends En{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const v=new Ws(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(v.idToken=g.idToken),g.accessToken&&(v.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(v.nonce=g.nonce),g.pendingToken&&(v.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(v.accessToken=g.oauthToken,v.secret=g.oauthTokenSecret):We("argument-error"),v}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const v="string"==typeof g?JSON.parse(g):g,{providerId:E,signInMethod:k}=v,B=(0,de._T)(v,["providerId","signInMethod"]);if(!E||!k)return null;const ie=new Ws(E,k);return ie.idToken=B.idToken||void 0,ie.accessToken=B.accessToken||void 0,ie.secret=B.secret,ie.nonce=B.nonce,ie.pendingToken=B.pendingToken||null,ie}_getIdTokenResponse(g){return bi(g,this.buildRequest())}_linkToIdToken(g,v){const E=this.buildRequest();return E.idToken=v,bi(g,E)}_getReauthenticationResolver(g){const v=this.buildRequest();return v.autoCreate=!1,bi(g,v)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const v={};this.idToken&&(v.id_token=this.idToken),this.accessToken&&(v.access_token=this.accessToken),this.secret&&(v.oauth_token_secret=this.secret),v.providerId=this.providerId,this.nonce&&!this.pendingToken&&(v.nonce=this.nonce),g.postBody=(0,G.xO)(v)}return g}}function ug(w,g){return Rd.apply(this,arguments)}function Rd(){return(Rd=(0,c.Z)(function*(w,g){return un(w,"POST","/v1/accounts:sendVerificationCode",Zt(w,g))})).apply(this,arguments)}function wl(){return(wl=(0,c.Z)(function*(w,g){return Kn(w,"POST","/v1/accounts:signInWithPhoneNumber",Zt(w,g))})).apply(this,arguments)}function Od(){return(Od=(0,c.Z)(function*(w,g){const v=yield Kn(w,"POST","/v1/accounts:signInWithPhoneNumber",Zt(w,g));if(v.temporaryProof)throw ni(w,"account-exists-with-different-credential",v);return v})).apply(this,arguments)}const hg={USER_NOT_FOUND:"user-not-found"};function Pd(){return(Pd=(0,c.Z)(function*(w,g){return Kn(w,"POST","/v1/accounts:signInWithPhoneNumber",Zt(w,Object.assign(Object.assign({},g),{operation:"REAUTH"})),hg)})).apply(this,arguments)}class Fa extends En{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,v){return new Fa({verificationId:g,verificationCode:v})}static _fromTokenResponse(g,v){return new Fa({phoneNumber:g,temporaryProof:v})}_getIdTokenResponse(g){return function dg(w,g){return wl.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,v){return function Na(w,g){return Od.apply(this,arguments)}(g,Object.assign({idToken:v},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function fg(w,g){return Pd.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:v,verificationId:E,verificationCode:k}=this.params;return g&&v?{temporaryProof:g,phoneNumber:v}:{sessionInfo:E,code:k}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:v,verificationCode:E,phoneNumber:k,temporaryProof:B}=g;return E||v||k||B?new Fa({verificationId:v,verificationCode:E,phoneNumber:k,temporaryProof:B}):null}}class Ys{constructor(g){var v,E,k,B,ie,ke;const lt=(0,G.zd)((0,G.pd)(g)),xt=null!==(v=lt.apiKey)&&void 0!==v?v:null,Ft=null!==(E=lt.oobCode)&&void 0!==E?E:null,Wn=function pg(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(k=lt.mode)&&void 0!==k?k:null);re(xt&&Ft&&Wn,"argument-error"),this.apiKey=xt,this.operation=Wn,this.code=Ft,this.continueUrl=null!==(B=lt.continueUrl)&&void 0!==B?B:null,this.languageCode=null!==(ie=lt.languageCode)&&void 0!==ie?ie:null,this.tenantId=null!==(ke=lt.tenantId)&&void 0!==ke?ke:null}static parseLink(g){const v=function Ff(w){const g=(0,G.zd)((0,G.pd)(w)).link,v=g?(0,G.zd)((0,G.pd)(g)).deep_link_id:null,E=(0,G.zd)((0,G.pd)(w)).deep_link_id;return(E?(0,G.zd)((0,G.pd)(E)).link:null)||E||v||g||w}(g);try{return new Ys(v)}catch(E){return null}}}let Cl=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(v,E){return _c._fromEmailAndPassword(v,E)}static credentialWithLink(v,E){const k=Ys.parseLink(E);return re(k,"argument-error"),_c._fromEmailAndCode(v,k.code,k.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class bo{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class Ur extends bo{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class La extends Ur{static credentialFromJSON(g){const v="string"==typeof g?JSON.parse(g):g;return re("providerId"in v&&"signInMethod"in v,"argument-error"),Ws._fromParams(v)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return re(g.idToken||g.accessToken,"argument-error"),Ws._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return La.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return La.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:v,oauthAccessToken:E,oauthTokenSecret:k,pendingToken:B,nonce:ie,providerId:ke}=g;if(!E&&!k&&!v&&!B||!ke)return null;try{return new La(ke)._credential({idToken:v,accessToken:E,nonce:ie,pendingToken:B})}catch(lt){return null}}}let El=(()=>{class w extends Ur{constructor(){super("facebook.com")}static credential(v){return Ws._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return w.credentialFromTaggedObject(v)}static credentialFromError(v){return w.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return w.credential(v.oauthAccessToken)}catch(E){return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),Dl=(()=>{class w extends Ur{constructor(){super("google.com"),this.addScope("profile")}static credential(v,E){return Ws._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:v,accessToken:E})}static credentialFromResult(v){return w.credentialFromTaggedObject(v)}static credentialFromError(v){return w.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthIdToken:E,oauthAccessToken:k}=v;if(!E&&!k)return null;try{return w.credential(E,k)}catch(B){return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),Lf=(()=>{class w extends Ur{constructor(){super("github.com")}static credential(v){return Ws._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return w.credentialFromTaggedObject(v)}static credentialFromError(v){return w.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return w.credential(v.oauthAccessToken)}catch(E){return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class Jn extends En{constructor(g,v){super(g,g),this.pendingToken=v}_getIdTokenResponse(g){return bi(g,this.buildRequest())}_linkToIdToken(g,v){const E=this.buildRequest();return E.idToken=v,bi(g,E)}_getReauthenticationResolver(g){const v=this.buildRequest();return v.autoCreate=!1,bi(g,v)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const v="string"==typeof g?JSON.parse(g):g,{providerId:E,signInMethod:k,pendingToken:B}=v;return E&&k&&B&&E===k?new Jn(E,B):null}static _create(g,v){return new Jn(g,v)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Zs extends bo{constructor(g){re(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return Zs.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return Zs.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const v=Jn.fromJSON(g);return re(v,"argument-error"),v}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:v,providerId:E}=g;if(!v||!E)return null;try{return Jn._create(E,v)}catch(k){return null}}}let us=(()=>{class w extends Ur{constructor(){super("twitter.com")}static credential(v,E){return Ws._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:v,oauthTokenSecret:E})}static credentialFromResult(v){return w.credentialFromTaggedObject(v)}static credentialFromError(v){return w.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthAccessToken:E,oauthTokenSecret:k}=v;if(!E||!k)return null;try{return w.credential(E,k)}catch(B){return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function Fd(w,g){return ki.apply(this,arguments)}function ki(){return(ki=(0,c.Z)(function*(w,g){return Kn(w,"POST","/v1/accounts:signUp",Zt(w,g))})).apply(this,arguments)}class ir{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,v,E,k=!1){return(0,c.Z)(function*(){const B=yield dt._fromIdTokenResponse(g,E,k),ie=Ld(E);return new ir({user:B,providerId:ie,_tokenResponse:E,operationType:v})})()}static _forOperation(g,v,E){return(0,c.Z)(function*(){yield g._updateTokensIfNecessary(E,!0);const k=Ld(E);return new ir({user:g,providerId:k,_tokenResponse:E,operationType:v})})()}}function Ld(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function Bd(w){return vc.apply(this,arguments)}function vc(){return(vc=(0,c.Z)(function*(w){var g;const v=ze(w);if(yield v._initializationPromise,null===(g=v.currentUser)||void 0===g?void 0:g.isAnonymous)return new ir({user:v.currentUser,providerId:null,operationType:"signIn"});const E=yield Fd(v,{returnSecureToken:!0}),k=yield ir._fromIdTokenResponse(v,"signIn",E,!0);return yield v._updateCurrentUser(k.user),k})).apply(this,arguments)}class yc extends G.ZR{constructor(g,v,E,k){var B;super(v.code,v.message),this.operationType=E,this.user=k,Object.setPrototypeOf(this,yc.prototype),this.customData={appName:g.name,tenantId:null!==(B=g.tenantId)&&void 0!==B?B:void 0,_serverResponse:v.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(g,v,E,k){return new yc(g,v,E,k)}}function bc(w,g,v,E){return("reauthenticate"===g?v._getReauthenticationResolver(w):v._getIdTokenResponse(w)).catch(B=>{throw"auth/multi-factor-auth-required"===B.code?yc._fromErrorAndOperation(w,B,g,E):B})}function pu(w){return new Set(w.map(({providerId:g})=>g).filter(g=>!!g))}function Ks(w,g){return mu.apply(this,arguments)}function mu(){return(mu=(0,c.Z)(function*(w,g){const v=(0,G.m9)(w);yield wo(!0,v,g);const{providerUserInfo:E}=yield cr(v.auth,{idToken:yield v.getIdToken(),deleteProvider:[g]}),k=pu(E||[]);return v.providerData=v.providerData.filter(B=>k.has(B.providerId)),k.has("phone")||(v.phoneNumber=null),yield v.auth._persistUserIfCurrent(v),v})).apply(this,arguments)}function Vn(w,g){return xl.apply(this,arguments)}function xl(){return(xl=(0,c.Z)(function*(w,g,v=!1){const E=yield ft(w,g._linkToIdToken(w.auth,yield w.getIdToken()),v);return ir._forOperation(w,"link",E)})).apply(this,arguments)}function wo(w,g,v){return On.apply(this,arguments)}function On(){return(On=(0,c.Z)(function*(w,g,v){yield ui(g);const k=!1===w?"provider-already-linked":"no-such-provider";re(pu(g.providerData).has(v)===w,g.auth,k)})).apply(this,arguments)}function wc(w,g){return Sl.apply(this,arguments)}function Sl(){return(Sl=(0,c.Z)(function*(w,g,v=!1){var E;const{auth:k}=w,B="reauthenticate";try{const ie=yield ft(w,bc(k,B,g,w),v);re(ie.idToken,k,"internal-error");const ke=Jt(ie.idToken);re(ke,k,"internal-error");const{sub:lt}=ke;return re(w.uid===lt,k,"user-mismatch"),ir._forOperation(w,B,ie)}catch(ie){throw"auth/user-not-found"===(null===(E=ie)||void 0===E?void 0:E.code)&&We(k,"user-mismatch"),ie}})).apply(this,arguments)}function $o(w,g){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,c.Z)(function*(w,g,v=!1){const E="signIn",k=yield bc(w,E,g),B=yield ir._fromIdTokenResponse(w,E,k);return v||(yield w._updateCurrentUser(B.user)),B})).apply(this,arguments)}function Cc(w,g){return ri.apply(this,arguments)}function ri(){return(ri=(0,c.Z)(function*(w,g){return $o(ze(w),g)})).apply(this,arguments)}function Qs(w,g){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,c.Z)(function*(w,g){const v=(0,G.m9)(w);return yield wo(!1,v,g.providerId),Vn(v,g)})).apply(this,arguments)}function Ba(w,g){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,c.Z)(function*(w,g){return wc((0,G.m9)(w),g)})).apply(this,arguments)}function gu(w,g){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,c.Z)(function*(w,g){return Kn(w,"POST","/v1/accounts:signInWithCustomToken",Zt(w,g))})).apply(this,arguments)}function Co(w,g){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,c.Z)(function*(w,g){const v=ze(w),E=yield gu(v,{token:g,returnSecureToken:!0}),k=yield ir._fromIdTokenResponse(v,"signIn",E);return yield v._updateCurrentUser(k.user),k})).apply(this,arguments)}class Et{constructor(g,v){this.factorId=g,this.uid=v.mfaEnrollmentId,this.enrollmentTime=new Date(v.enrolledAt).toUTCString(),this.displayName=v.displayName}static _fromServerResponse(g,v){return"phoneInfo"in v?Ml._fromServerResponse(g,v):We(g,"internal-error")}}class Ml extends Et{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,v){return new Ml(v)}}function Tl(w,g,v){var E;re((null===(E=v.url)||void 0===E?void 0:E.length)>0,w,"invalid-continue-uri"),re(void 0===v.dynamicLinkDomain||v.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),g.continueUrl=v.url,g.dynamicLinkDomain=v.dynamicLinkDomain,g.canHandleCodeInApp=v.handleCodeInApp,v.iOS&&(re(v.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),g.iOSBundleId=v.iOS.bundleId),v.android&&(re(v.android.packageName.length>0,w,"missing-android-pkg-name"),g.androidInstallApp=v.android.installApp,g.androidMinimumVersionCode=v.android.minimumVersion,g.androidPackageName=v.android.packageName)}function Vd(w,g,v){return Il.apply(this,arguments)}function Il(){return(Il=(0,c.Z)(function*(w,g,v){const E=(0,G.m9)(w),k={requestType:"PASSWORD_RESET",email:g};v&&Tl(E,k,v),yield Md(E,k)})).apply(this,arguments)}function _u(w,g,v){return Al.apply(this,arguments)}function Al(){return(Al=(0,c.Z)(function*(w,g,v){yield jo((0,G.m9)(w),{oobCode:g,newPassword:v})})).apply(this,arguments)}function Bf(w,g){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,c.Z)(function*(w,g){yield Ra((0,G.m9)(w),{oobCode:g})})).apply(this,arguments)}function tn(w,g){return kl.apply(this,arguments)}function kl(){return(kl=(0,c.Z)(function*(w,g){const v=(0,G.m9)(w),E=yield jo(v,{oobCode:g}),k=E.requestType;switch(re(k,v,"internal-error"),k){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":re(E.newEmail,v,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":re(E.mfaInfo,v,"internal-error");default:re(E.email,v,"internal-error")}let B=null;return E.mfaInfo&&(B=Et._fromServerResponse(ze(v),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:B},operation:k}})).apply(this,arguments)}function ei(w,g){return Do.apply(this,arguments)}function Do(){return(Do=(0,c.Z)(function*(w,g){const{data:v}=yield tn((0,G.m9)(w),g);return v.email})).apply(this,arguments)}function Rl(w,g,v){return fr.apply(this,arguments)}function fr(){return(fr=(0,c.Z)(function*(w,g,v){const E=ze(w),k=yield Fd(E,{returnSecureToken:!0,email:g,password:v}),B=yield ir._fromIdTokenResponse(E,"signIn",k);return yield E._updateCurrentUser(B.user),B})).apply(this,arguments)}function vu(w,g,v){return Cc((0,G.m9)(w),Cl.credential(g,v))}function yu(w,g,v){return Ud.apply(this,arguments)}function Ud(){return(Ud=(0,c.Z)(function*(w,g,v){const E=(0,G.m9)(w),k={requestType:"EMAIL_SIGNIN",email:g};re(v.handleCodeInApp,E,"argument-error"),v&&Tl(E,k,v),yield Mr(E,k)})).apply(this,arguments)}function Hd(w,g){const v=Ys.parseLink(g);return"EMAIL_SIGNIN"===(null==v?void 0:v.operation)}function Ol(w,g,v){return Va.apply(this,arguments)}function Va(){return(Va=(0,c.Z)(function*(w,g,v){const E=(0,G.m9)(w),k=Cl.credentialWithLink(g,v||me());return re(k._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Cc(E,k)})).apply(this,arguments)}function Ri(w,g){return ds.apply(this,arguments)}function ds(){return(ds=(0,c.Z)(function*(w,g){return un(w,"POST","/v1/accounts:createAuthUri",Zt(w,g))})).apply(this,arguments)}function bu(w,g){return xs.apply(this,arguments)}function xs(){return(xs=(0,c.Z)(function*(w,g){const E={identifier:g,continueUri:He()?me():"http://localhost"},{signinMethods:k}=yield Ri((0,G.m9)(w),E);return k||[]})).apply(this,arguments)}function Xs(w,g){return Pl.apply(this,arguments)}function Pl(){return(Pl=(0,c.Z)(function*(w,g){const v=(0,G.m9)(w),k={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};g&&Tl(v.auth,k,g);const{email:B}=yield Bi(v.auth,k);B!==w.email&&(yield w.reload())})).apply(this,arguments)}function jd(w,g,v){return Nl.apply(this,arguments)}function Nl(){return(Nl=(0,c.Z)(function*(w,g,v){const E=(0,G.m9)(w),B={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:g};v&&Tl(E.auth,B,v);const{email:ie}=yield Td(E.auth,B);ie!==w.email&&(yield w.reload())})).apply(this,arguments)}function Gd(w,g){return qo.apply(this,arguments)}function qo(){return(qo=(0,c.Z)(function*(w,g){return un(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Ec(w,g){return Fl.apply(this,arguments)}function Fl(){return(Fl=(0,c.Z)(function*(w,{displayName:g,photoURL:v}){if(void 0===g&&void 0===v)return;const E=(0,G.m9)(w),B={idToken:yield E.getIdToken(),displayName:g,photoUrl:v,returnSecureToken:!0},ie=yield ft(E,Gd(E.auth,B));E.displayName=ie.displayName||null,E.photoURL=ie.photoUrl||null;const ke=E.providerData.find(({providerId:lt})=>"password"===lt);ke&&(ke.displayName=E.displayName,ke.photoURL=E.photoURL),yield E._updateTokensIfNecessary(ie)})).apply(this,arguments)}function wu(w,g){return Dc((0,G.m9)(w),g,null)}function gg(w,g){return Dc((0,G.m9)(w),null,g)}function Dc(w,g,v){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,c.Z)(function*(w,g,v){const{auth:E}=w,B={idToken:yield w.getIdToken(),returnSecureToken:!0};g&&(B.email=g),v&&(B.password=v);const ie=yield ft(w,Ht(E,B));yield w._updateTokensIfNecessary(ie,!0)})).apply(this,arguments)}class Yo{constructor(g,v,E={}){this.isNewUser=g,this.providerId=v,this.profile=E}}class zd extends Yo{constructor(g,v,E,k){super(g,v,E),this.username=k}}class Vf extends Yo{constructor(g,v){super(g,"facebook.com",v)}}class Ua extends zd{constructor(g,v){super(g,"github.com",v,"string"==typeof(null==v?void 0:v.login)?null==v?void 0:v.login:null)}}class Ss extends Yo{constructor(g,v){super(g,"google.com",v)}}class Uf extends zd{constructor(g,v,E){super(g,"twitter.com",v,E)}}function Hi(w){const{user:g,_tokenResponse:v}=w;return g.isAnonymous&&!v?{providerId:null,isNewUser:!1,profile:null}:function Cu(w){var g,v;if(!w)return null;const{providerId:E}=w,k=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},B=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!E&&(null==w?void 0:w.idToken)){const ie=null===(v=null===(g=Jt(w.idToken))||void 0===g?void 0:g.firebase)||void 0===v?void 0:v.sign_in_provider;if(ie)return new Yo(B,"anonymous"!==ie&&"custom"!==ie?ie:null)}if(!E)return null;switch(E){case"facebook.com":return new Vf(B,k);case"github.com":return new Ua(B,k);case"google.com":return new Ss(B,k);case"twitter.com":return new Uf(B,k,w.screenName||null);case"custom":case"anonymous":return new Yo(B,null);default:return new Yo(B,E,k)}}(v)}class eo{constructor(g,v){this.type=g,this.credential=v}static _fromIdtoken(g){return new eo("enroll",g)}static _fromMfaPendingCredential(g){return new eo("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var v,E;if(null==g?void 0:g.multiFactorSession){if(null===(v=g.multiFactorSession)||void 0===v?void 0:v.pendingCredential)return eo._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null===(E=g.multiFactorSession)||void 0===E?void 0:E.idToken)return eo._fromIdtoken(g.multiFactorSession.idToken)}return null}}class Bl{constructor(g,v,E){this.session=g,this.hints=v,this.signInResolver=E}static _fromError(g,v){const E=ze(g),k=v.customData._serverResponse,B=(k.mfaInfo||[]).map(ke=>Et._fromServerResponse(E,ke));re(k.mfaPendingCredential,E,"internal-error");const ie=eo._fromMfaPendingCredential(k.mfaPendingCredential);return new Bl(ie,B,function(){var ke=(0,c.Z)(function*(lt){const xt=yield lt._process(E,ie);delete k.mfaInfo,delete k.mfaPendingCredential;const Ft=Object.assign(Object.assign({},k),{idToken:xt.idToken,refreshToken:xt.refreshToken});switch(v.operationType){case"signIn":const Wn=yield ir._fromIdTokenResponse(E,v.operationType,Ft);return yield E._updateCurrentUser(Wn.user),Wn;case"reauthenticate":return re(v.user,E,"internal-error"),ir._forOperation(v.user,v.operationType,Ft);default:We(E,"internal-error")}});return function(lt){return ke.apply(this,arguments)}}())}resolveSignIn(g){var v=this;return(0,c.Z)(function*(){return v.signInResolver(g)})()}}function xc(w,g){var v;const E=(0,G.m9)(w),k=g;return re(g.customData.operationType,E,"argument-error"),re(null===(v=k.customData._serverResponse)||void 0===v?void 0:v.mfaPendingCredential,E,"argument-error"),Bl._fromError(E,k)}function ji(w,g){return un(w,"POST","/v2/accounts/mfaEnrollment:start",Zt(w,g))}class Ha{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(v=>{v.mfaInfo&&(this.enrolledFactors=v.mfaInfo.map(E=>Et._fromServerResponse(g.auth,E)))})}static _fromUser(g){return new Ha(g)}getSession(){var g=this;return(0,c.Z)(function*(){return eo._fromIdtoken(yield g.user.getIdToken())})()}enroll(g,v){var E=this;return(0,c.Z)(function*(){const k=g,B=yield E.getSession(),ie=yield ft(E.user,k._process(E.user.auth,B,v));return yield E.user._updateTokensIfNecessary(ie),E.user.reload()})()}unenroll(g){var v=this;return(0,c.Z)(function*(){var E;const k="string"==typeof g?g:g.uid,B=yield v.user.getIdToken(),ie=yield ft(v.user,function Zo(w,g){return un(w,"POST","/v2/accounts/mfaEnrollment:withdraw",Zt(w,g))}(v.user.auth,{idToken:B,mfaEnrollmentId:k}));v.enrolledFactors=v.enrolledFactors.filter(({uid:ke})=>ke!==k),yield v.user._updateTokensIfNecessary(ie);try{yield v.user.reload()}catch(ke){if("auth/user-token-expired"!==(null===(E=ke)||void 0===E?void 0:E.code))throw ke}})()}}const qd=new WeakMap;function Wd(w){const g=(0,G.m9)(w);return qd.has(g)||qd.set(g,Ha._fromUser(g)),qd.get(g)}const Ms="__sak";class ja{constructor(g,v){this.storageRetriever=g,this.type=v}_isAvailable(){try{return this.storage?(this.storage.setItem(Ms,"1"),this.storage.removeItem(Ms),Promise.resolve(!0)):Promise.resolve(!1)}catch(g){return Promise.resolve(!1)}}_set(g,v){return this.storage.setItem(g,JSON.stringify(v)),Promise.resolve()}_get(g){const v=this.storage.getItem(g);return Promise.resolve(v?JSON.parse(v):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ye=(()=>{class w extends ja{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(v,E)=>this.onStorageEvent(v,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Yd(){const w=(0,G.z$)();return Y(w)||Qt(w)}()&&function Es(){try{return!(!window||window===window.top)}catch(w){return!1}}(),this.fallbackToPolling=nr(),this._shouldAllowMigration=!0}forAllChangedKeys(v){for(const E of Object.keys(this.listeners)){const k=this.storage.getItem(E),B=this.localCache[E];k!==B&&v(E,B,k)}}onStorageEvent(v,E=!1){if(!v.key)return void this.forAllChangedKeys((ke,lt,xt)=>{this.notifyListeners(ke,xt)});const k=v.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ke=this.storage.getItem(k);if(v.newValue!==ke)null!==v.newValue?this.storage.setItem(k,v.newValue):this.storage.removeItem(k);else if(this.localCache[k]===v.newValue&&!E)return}const B=()=>{const ke=this.storage.getItem(k);!E&&this.localCache[k]===ke||this.notifyListeners(k,ke)},ie=this.storage.getItem(k);!function Xt(){return(0,G.w1)()&&10===document.documentMode}()||ie===v.newValue||v.newValue===v.oldValue?B():setTimeout(B,10)}notifyListeners(v,E){this.localCache[v]=E;const k=this.listeners[v];if(k)for(const B of Array.from(k))B(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((v,E,k)=>{this.onStorageEvent(new StorageEvent("storage",{key:v,oldValue:E,newValue:k}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(v,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[v]||(this.listeners[v]=new Set,this.localCache[v]=this.storage.getItem(v)),this.listeners[v].add(E)}_removeListener(v,E){this.listeners[v]&&(this.listeners[v].delete(E),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(v,E){var k=()=>super._set,B=this;return(0,c.Z)(function*(){yield k().call(B,v,E),B.localCache[v]=JSON.stringify(E)})()}_get(v){var E=()=>super._get,k=this;return(0,c.Z)(function*(){const B=yield E().call(k,v);return k.localCache[v]=JSON.stringify(B),B})()}_remove(v){var E=()=>super._remove,k=this;return(0,c.Z)(function*(){yield E().call(k,v),delete k.localCache[v]})()}}return w.type="LOCAL",w})(),Oi=(()=>{class w extends ja{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(v,E){}_removeListener(v,E){}}return w.type="SESSION",w})();let Eu=(()=>{class w{constructor(v){this.eventTarget=v,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(v){const E=this.receivers.find(B=>B.isListeningto(v));if(E)return E;const k=new w(v);return this.receivers.push(k),k}isListeningto(v){return this.eventTarget===v}handleEvent(v){var E=this;return(0,c.Z)(function*(){const k=v,{eventId:B,eventType:ie,data:ke}=k.data,lt=E.handlersMap[ie];if(!(null==lt?void 0:lt.size))return;k.ports[0].postMessage({status:"ack",eventId:B,eventType:ie});const xt=Array.from(lt).map(function(){var Wn=(0,c.Z)(function*(Os){return Os(k.origin,ke)});return function(Os){return Wn.apply(this,arguments)}}()),Ft=yield function oi(w){return Promise.all(w.map(function(){var g=(0,c.Z)(function*(v){try{return{fulfilled:!0,value:yield v}}catch(E){return{fulfilled:!1,reason:E}}});return function(v){return g.apply(this,arguments)}}()))}(xt);k.ports[0].postMessage({status:"done",eventId:B,eventType:ie,response:Ft})})()}_subscribe(v,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[v]||(this.handlersMap[v]=new Set),this.handlersMap[v].add(E)}_unsubscribe(v,E){this.handlersMap[v]&&E&&this.handlersMap[v].delete(E),(!E||0===this.handlersMap[v].size)&&delete this.handlersMap[v],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function Ga(w="",g=10){let v="";for(let E=0;E<g;E++)v+=Math.floor(10*Math.random());return w+v}class za{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,v,E=50){var k=this;return(0,c.Z)(function*(){const B="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!B)throw new Error("connection_unavailable");let ie,ke;return new Promise((lt,xt)=>{const Ft=Ga("",20);B.port1.start();const Wn=setTimeout(()=>{xt(new Error("unsupported_event"))},E);ke={messageChannel:B,onMessage(Os){const Ro=Os;if(Ro.data.eventId===Ft)switch(Ro.data.status){case"ack":clearTimeout(Wn),ie=setTimeout(()=>{xt(new Error("timeout"))},3e3);break;case"done":clearTimeout(ie),lt(Ro.data.response);break;default:clearTimeout(Wn),clearTimeout(ie),xt(new Error("invalid_response"))}}},k.handlers.add(ke),B.port1.addEventListener("message",ke.onMessage),k.target.postMessage({eventType:g,eventId:Ft,data:v},[B.port2])}).finally(()=>{ke&&k.removeMessageHandler(ke)})})()}}function ai(){return window}function Qo(){return void 0!==ai().WorkerGlobalScope&&"function"==typeof ai().importScripts}function ht(){return(ht=(0,c.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(w){return null}})).apply(this,arguments)}const Sc="firebaseLocalStorageDb",_n="firebaseLocalStorage",Mc="fbase_key";class to{constructor(g){this.request=g}toPromise(){return new Promise((g,v)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{v(this.request.error)})})}}function Xo(w,g){return w.transaction([_n],g?"readwrite":"readonly").objectStore(_n)}function Gi(){const w=indexedDB.open(Sc,1);return new Promise((g,v)=>{w.addEventListener("error",()=>{v(w.error)}),w.addEventListener("upgradeneeded",()=>{const E=w.result;try{E.createObjectStore(_n,{keyPath:Mc})}catch(k){v(k)}}),w.addEventListener("success",(0,c.Z)(function*(){const E=w.result;E.objectStoreNames.contains(_n)?g(E):(E.close(),yield function Ir(){const w=indexedDB.deleteDatabase(Sc);return new to(w).toPromise()}(),g(yield Gi()))}))})}function no(w,g,v){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,c.Z)(function*(w,g,v){const E=Xo(w,!0).put({[Mc]:g,value:v});return new to(E).toPromise()})).apply(this,arguments)}function xo(){return(xo=(0,c.Z)(function*(w,g){const v=Xo(w,!1).get(g),E=yield new to(v).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function qa(w,g){const v=Xo(w,!0).delete(g);return new to(v).toPromise()}const Mo=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var v=this;return(0,c.Z)(function*(){return v.db||(v.db=yield Gi()),v.db})()}_withRetries(v){var E=this;return(0,c.Z)(function*(){let k=0;for(;;)try{const B=yield E._openDb();return yield v(B)}catch(B){if(k++>3)throw B;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var v=this;return(0,c.Z)(function*(){return Qo()?v.initializeReceiver():v.initializeSender()})()}initializeReceiver(){var v=this;return(0,c.Z)(function*(){v.receiver=Eu._getInstance(function Kd(){return Qo()?self:null}()),v.receiver._subscribe("keyChanged",function(){var E=(0,c.Z)(function*(k,B){return{keyProcessed:(yield v._poll()).includes(B.key)}});return function(k,B){return E.apply(this,arguments)}}()),v.receiver._subscribe("ping",function(){var E=(0,c.Z)(function*(k,B){return["keyChanged"]});return function(k,B){return E.apply(this,arguments)}}())})()}initializeSender(){var v=this;return(0,c.Z)(function*(){var E,k;if(v.activeServiceWorker=yield function Ts(){return ht.apply(this,arguments)}(),!v.activeServiceWorker)return;v.sender=new za(v.activeServiceWorker);const B=yield v.sender._send("ping",{},800);!B||(null===(E=B[0])||void 0===E?void 0:E.fulfilled)&&(null===(k=B[0])||void 0===k?void 0:k.value.includes("keyChanged"))&&(v.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(v){var E=this;return(0,c.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function Zd(){var w;return(null===(w=null==navigator?void 0:navigator.serviceWorker)||void 0===w?void 0:w.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:v},E.serviceWorkerReceiverAvailable?800:50)}catch(k){}})()}_isAvailable(){return(0,c.Z)(function*(){try{if(!indexedDB)return!1;const v=yield Gi();return yield no(v,Ms,"1"),yield qa(v,Ms),!0}catch(v){}return!1})()}_withPendingWrite(v){var E=this;return(0,c.Z)(function*(){E.pendingWrites++;try{yield v()}finally{E.pendingWrites--}})()}_set(v,E){var k=this;return(0,c.Z)(function*(){return k._withPendingWrite((0,c.Z)(function*(){return yield k._withRetries(B=>no(B,v,E)),k.localCache[v]=E,k.notifyServiceWorker(v)}))})()}_get(v){var E=this;return(0,c.Z)(function*(){const k=yield E._withRetries(B=>function $a(w,g){return xo.apply(this,arguments)}(B,v));return E.localCache[v]=k,k})()}_remove(v){var E=this;return(0,c.Z)(function*(){return E._withPendingWrite((0,c.Z)(function*(){return yield E._withRetries(k=>qa(k,v)),delete E.localCache[v],E.notifyServiceWorker(v)}))})()}_poll(){var v=this;return(0,c.Z)(function*(){const E=yield v._withRetries(ie=>{const ke=Xo(ie,!1).getAll();return new to(ke).toPromise()});if(!E)return[];if(0!==v.pendingWrites)return[];const k=[],B=new Set;for(const{fbase_key:ie,value:ke}of E)B.add(ie),JSON.stringify(v.localCache[ie])!==JSON.stringify(ke)&&(v.notifyListeners(ie,ke),k.push(ie));for(const ie of Object.keys(v.localCache))v.localCache[ie]&&!B.has(ie)&&(v.notifyListeners(ie,null),k.push(ie));return k})()}notifyListeners(v,E){this.localCache[v]=E;const k=this.listeners[v];if(k)for(const B of Array.from(k))B(E)}startPolling(){var v=this;this.stopPolling(),this.pollTimer=setInterval((0,c.Z)(function*(){return v._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(v,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[v]||(this.listeners[v]=new Set,this._get(v)),this.listeners[v].add(E)}_removeListener(v,E){this.listeners[v]&&(this.listeners[v].delete(E),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})();function Hr(w,g){return un(w,"POST","/v2/accounts/mfaSignIn:start",Zt(w,g))}function na(){return(na=(0,c.Z)(function*(w){return(yield un(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function qn(w){return new Promise((g,v)=>{const E=document.createElement("script");E.setAttribute("src",w),E.onload=g,E.onerror=k=>{const B=Le("internal-error");B.customData=k,v(B)},E.type="text/javascript",E.charset="UTF-8",function $n(){var w,g;return null!==(g=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==g?g:document}().appendChild(E)})}function Zi(w){return`__${w}${Math.floor(1e6*Math.random())}`}const Dn=1e12;class As{constructor(g){this.auth=g,this.counter=Dn,this._widgets=new Map}render(g,v){const E=this.counter;return this._widgets.set(E,new Xn(g,this.auth.name,v||{})),this.counter++,E}reset(g){var v;const E=g||Dn;null===(v=this._widgets.get(E))||void 0===v||v.delete(),this._widgets.delete(E)}getResponse(g){var v;return(null===(v=this._widgets.get(g||Dn))||void 0===v?void 0:v.getResponse())||""}execute(g){var v=this;return(0,c.Z)(function*(){var E;return null===(E=v._widgets.get(g||Dn))||void 0===E||E.execute(),""})()}}class Xn{constructor(g,v,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const k="string"==typeof g?document.getElementById(g):g;re(k,"argument-error",{appName:v}),this.container=k,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Ul(w){const g=[],v="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<w;E++)g.push(v.charAt(Math.floor(Math.random()*v.length)));return g.join("")}(50);const{callback:g,"expired-callback":v}=this.params;if(g)try{g(this.responseToken)}catch(E){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,v)try{v()}catch(E){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ia=Zi("rcb"),li=new st(3e4,6e4);class bg{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!ai().grecaptcha}load(g,v=""){return re(function iy(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(v),g,"argument-error"),this.shouldResolveImmediately(v)?Promise.resolve(ai().grecaptcha):new Promise((E,k)=>{const B=ai().setTimeout(()=>{k(Le(g,"network-request-failed"))},li.get());ai()[ia]=()=>{ai().clearTimeout(B),delete ai()[ia];const ke=ai().grecaptcha;if(!ke)return void k(Le(g,"internal-error"));const lt=ke.render;ke.render=(xt,Ft)=>{const Wn=lt(xt,Ft);return this.counter++,Wn},this.hostLanguage=v,E(ke)},qn(`https://www.google.com/recaptcha/api.js??${(0,G.xO)({onload:ia,render:"explicit",hl:v})}`).catch(()=>{clearTimeout(B),k(Le(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){return!!ai().grecaptcha&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Wa{load(g){return(0,c.Z)(function*(){return new As(g)})()}clearedOneInstance(){}}const wi="recaptcha",Du={theme:"light",type:"image"};class Io{constructor(g,v=Object.assign({},Du),E){this.parameters=v,this.type=wi,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ze(E),this.isInvisible="invisible"===this.parameters.size,re("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const k="string"==typeof g?document.getElementById(g):g;re(k,this.auth,"argument-error"),this.container=k,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Wa:new bg,this.validateStartingState()}verify(){var g=this;return(0,c.Z)(function*(){g.assertNotDestroyed();const v=yield g.render(),E=g.getAssertedRecaptcha();return E.getResponse(v)||new Promise(B=>{const ie=ke=>{!ke||(g.tokenChangeListeners.delete(ie),B(ke))};g.tokenChangeListeners.add(ie),g.isInvisible&&E.execute(v)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){re(!this.parameters.sitekey,this.auth,"argument-error"),re(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),re("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return v=>{if(this.tokenChangeListeners.forEach(E=>E(v)),"function"==typeof g)g(v);else if("string"==typeof g){const E=ai()[g];"function"==typeof E&&E(v)}}}assertNotDestroyed(){re(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,c.Z)(function*(){if(yield g.init(),!g.widgetId){let v=g.container;if(!g.isInvisible){const E=document.createElement("div");v.appendChild(E),v=E}g.widgetId=g.getAssertedRecaptcha().render(v,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,c.Z)(function*(){re(He()&&!Qo(),g.auth,"internal-error"),yield function ra(){let w=null;return new Promise(g=>{"complete"!==document.readyState?(w=()=>g(),window.addEventListener("load",w)):g()}).catch(g=>{throw w&&window.removeEventListener("load",w),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const v=yield function ta(w){return na.apply(this,arguments)}(g.auth);re(v,g.auth,"internal-error"),g.parameters.sitekey=v})()}getAssertedRecaptcha(){return re(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ya{constructor(g,v){this.verificationId=g,this.onConfirmation=v}confirm(g){const v=Fa._fromVerification(this.verificationId,g);return this.onConfirmation(v)}}function fi(w,g,v){return Hl.apply(this,arguments)}function Hl(){return(Hl=(0,c.Z)(function*(w,g,v){const E=ze(w),k=yield mr(E,g,(0,G.m9)(v));return new Ya(k,B=>Cc(E,B))})).apply(this,arguments)}function jl(w,g,v){return Gf.apply(this,arguments)}function Gf(){return(Gf=(0,c.Z)(function*(w,g,v){const E=(0,G.m9)(w);yield wo(!1,E,"phone");const k=yield mr(E.auth,g,(0,G.m9)(v));return new Ya(k,B=>Qs(E,B))})).apply(this,arguments)}function zf(w,g,v){return pr.apply(this,arguments)}function pr(){return(pr=(0,c.Z)(function*(w,g,v){const E=(0,G.m9)(w),k=yield mr(E.auth,g,(0,G.m9)(v));return new Ya(k,B=>Ba(E,B))})).apply(this,arguments)}function mr(w,g,v){return Gl.apply(this,arguments)}function Gl(){return(Gl=(0,c.Z)(function*(w,g,v){var E;const k=yield v.verify();try{let B;if(re("string"==typeof k,w,"argument-error"),re(v.type===wi,w,"argument-error"),B="string"==typeof g?{phoneNumber:g}:g,"session"in B){const ie=B.session;if("phoneNumber"in B)return re("enroll"===ie.type,w,"internal-error"),(yield ji(w,{idToken:ie.credential,phoneEnrollmentInfo:{phoneNumber:B.phoneNumber,recaptchaToken:k}})).phoneSessionInfo.sessionInfo;{re("signin"===ie.type,w,"internal-error");const ke=(null===(E=B.multiFactorHint)||void 0===E?void 0:E.uid)||B.multiFactorUid;return re(ke,w,"missing-multi-factor-info"),(yield Hr(w,{mfaPendingCredential:ie.credential,mfaEnrollmentId:ke,phoneSignInInfo:{recaptchaToken:k}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ie}=yield ug(w,{phoneNumber:B.phoneNumber,recaptchaToken:k});return ie}}finally{v._reset()}})).apply(this,arguments)}function zl(w,g){return io.apply(this,arguments)}function io(){return(io=(0,c.Z)(function*(w,g){yield Vn((0,G.m9)(w),g)})).apply(this,arguments)}let Tc=(()=>{class w{constructor(v){this.providerId=w.PROVIDER_ID,this.auth=ze(v)}verifyPhoneNumber(v,E){return mr(this.auth,v,(0,G.m9)(E))}static credential(v,E){return Fa._fromVerification(v,E)}static credentialFromResult(v){return w.credentialFromTaggedObject(v)}static credentialFromError(v){return w.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{phoneNumber:E,temporaryProof:k}=v;return E&&k?Fa._fromTokenResponse(E,k):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function ro(w,g){return g?se(g):(re(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class $l extends En{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return bi(g,this._buildIdpRequest())}_linkToIdToken(g,v){return bi(g,this._buildIdpRequest(v))}_getReauthenticationResolver(g){return bi(g,this._buildIdpRequest())}_buildIdpRequest(g){const v={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(v.idToken=g),v}}function xu(w){return $o(w.auth,new $l(w),w.bypassAuthState)}function qt(w){const{auth:g,user:v}=w;return re(v,g,"internal-error"),wc(v,new $l(w),w.bypassAuthState)}function Ic(w){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,c.Z)(function*(w){const{auth:g,user:v}=w;return re(v,g,"internal-error"),Vn(v,new $l(w),w.bypassAuthState)})).apply(this,arguments)}class Ac{constructor(g,v,E,k,B=!1){this.auth=g,this.resolver=E,this.user=k,this.bypassAuthState=B,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(v)?v:[v]}execute(){var g=this;return new Promise(function(){var v=(0,c.Z)(function*(E,k){g.pendingPromise={resolve:E,reject:k};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(B){g.reject(B)}});return function(E,k){return v.apply(this,arguments)}}())}onAuthEvent(g){var v=this;return(0,c.Z)(function*(){const{urlResponse:E,sessionId:k,postBody:B,tenantId:ie,error:ke,type:lt}=g;if(ke)return void v.reject(ke);const xt={auth:v.auth,requestUri:E,sessionId:k,tenantId:ie||void 0,postBody:B||void 0,user:v.user,bypassAuthState:v.bypassAuthState};try{v.resolve(yield v.getIdpTask(lt)(xt))}catch(Ft){v.reject(Ft)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return xu;case"linkViaPopup":case"linkViaRedirect":return Ic;case"reauthViaPopup":case"reauthViaRedirect":return qt;default:We(this.auth,"internal-error")}}resolve(g){Te(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){Te(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const sa=new st(2e3,1e4);function wg(w,g,v){return kc.apply(this,arguments)}function kc(){return(kc=(0,c.Z)(function*(w,g,v){const E=ze(w);Me(w,g,bo);const k=ro(E,v);return new ks(E,"signInViaPopup",g,k).executeNotNull()})).apply(this,arguments)}function Za(w,g,v){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,c.Z)(function*(w,g,v){const E=(0,G.m9)(w);Me(E.auth,g,bo);const k=ro(E.auth,v);return new ks(E.auth,"reauthViaPopup",g,k,E).executeNotNull()})).apply(this,arguments)}function Xd(w,g,v){return Rc.apply(this,arguments)}function Rc(){return(Rc=(0,c.Z)(function*(w,g,v){const E=(0,G.m9)(w);Me(E.auth,g,bo);const k=ro(E.auth,v);return new ks(E.auth,"linkViaPopup",g,k,E).executeNotNull()})).apply(this,arguments)}let ks=(()=>{class w extends Ac{constructor(v,E,k,B,ie){super(v,E,B,ie),this.provider=k,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var v=this;return(0,c.Z)(function*(){const E=yield v.execute();return re(E,v.auth,"internal-error"),E})()}onExecution(){var v=this;return(0,c.Z)(function*(){Te(1===v.filter.length,"Popup operations only handle one event");const E=Ga();v.authWindow=yield v.resolver._openPopup(v.auth,v.provider,v.filter[0],E),v.authWindow.associatedEvent=E,v.resolver._originValidation(v.auth).catch(k=>{v.reject(k)}),v.resolver._isIframeWebStorageSupported(v.auth,k=>{k||v.reject(Le(v.auth,"web-storage-unsupported"))}),v.pollUserCancellation()})()}get eventId(){var v;return(null===(v=this.authWindow)||void 0===v?void 0:v.associatedEvent)||null}cancel(){this.reject(Le(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const v=()=>{var E,k;this.pollId=(null===(k=null===(E=this.authWindow)||void 0===E?void 0:E.window)||void 0===k?void 0:k.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Le(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(v,sa.get())};v()}}return w.currentPopupAction=null,w})();const xn=new Map;class kr extends Ac{constructor(g,v,E=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],v,void 0,E),this.eventId=null}execute(){var g=()=>super.execute,v=this;return(0,c.Z)(function*(){let E=xn.get(v.auth._key());if(!E){try{const B=(yield function ry(w,g){return Ao.apply(this,arguments)}(v.resolver,v.auth))?yield g().call(v):null;E=()=>Promise.resolve(B)}catch(k){E=()=>Promise.reject(k)}xn.set(v.auth._key(),E)}return v.bypassAuthState||xn.set(v.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(g){var v=()=>super.onAuthEvent,E=this;return(0,c.Z)(function*(){if("signInViaRedirect"===g.type)return v().call(E,g);if("unknown"!==g.type){if(g.eventId){const k=yield E.auth._redirectUserForId(g.eventId);if(k)return E.user=k,v().call(E,g);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,c.Z)(function*(){})()}cleanUp(){}}function Ao(){return(Ao=(0,c.Z)(function*(w,g){const v=O(g),E=M(w);if(!(yield E._isAvailable()))return!1;const k="true"===(yield E._get(v));return yield E._remove(v),k})).apply(this,arguments)}function Ka(w,g){return oa.apply(this,arguments)}function oa(){return(oa=(0,c.Z)(function*(w,g){return M(w)._set(O(g),"true")})).apply(this,arguments)}function Cg(){xn.clear()}function S(w,g){xn.set(w._key(),g)}function M(w){return se(w._redirectPersistence)}function O(w){return kn("pendingRedirect",w.config.apiKey,w.name)}function j(w,g,v){return function X(w,g,v){return he.apply(this,arguments)}(w,g,v)}function he(){return(he=(0,c.Z)(function*(w,g,v){const E=ze(w);Me(w,g,bo);const k=ro(E,v);return yield Ka(k,E),k._openRedirect(E,g,"signInViaRedirect")})).apply(this,arguments)}function ve(w,g,v){return function Ue(w,g,v){return Dt.apply(this,arguments)}(w,g,v)}function Dt(){return(Dt=(0,c.Z)(function*(w,g,v){const E=(0,G.m9)(w);Me(E.auth,g,bo);const k=ro(E.auth,v);yield Ka(k,E.auth);const B=yield Gr(E);return k._openRedirect(E.auth,g,"reauthViaRedirect",B)})).apply(this,arguments)}function It(w,g,v){return function jt(w,g,v){return _t.apply(this,arguments)}(w,g,v)}function _t(){return(_t=(0,c.Z)(function*(w,g,v){const E=(0,G.m9)(w);Me(E.auth,g,bo);const k=ro(E.auth,v);yield wo(!1,E,g.providerId),yield Ka(k,E.auth);const B=yield Gr(E);return k._openRedirect(E.auth,g,"linkViaRedirect",B)})).apply(this,arguments)}function zi(w,g){return rr.apply(this,arguments)}function rr(){return(rr=(0,c.Z)(function*(w,g){return yield ze(w)._initializationPromise,so(w,g,!1)})).apply(this,arguments)}function so(w,g){return gr.apply(this,arguments)}function gr(){return(gr=(0,c.Z)(function*(w,g,v=!1){const E=ze(w),k=ro(E,g),ie=yield new kr(E,k,v).execute();return ie&&!v&&(delete ie.user._redirectEventId,yield E._persistUserIfCurrent(ie.user),yield E._setRedirectUser(null,g)),ie})).apply(this,arguments)}function Gr(w){return aa.apply(this,arguments)}function aa(){return(aa=(0,c.Z)(function*(w){const g=Ga(`${w.uid}:::`);return w._redirectEventId=g,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),g})).apply(this,arguments)}class ko{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let v=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(g,E)&&(v=!0,this.sendToConsumer(g,E),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function Qa(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Rs(w);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,v||(this.queuedRedirectEvent=g,v=!0)),v}sendToConsumer(g,v){var E;if(g.error&&!Rs(g)){const k=(null===(E=g.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";v.onError(Le(this.auth,k))}else v.onAuthEvent(g)}isEventForConsumer(g,v){const E=null===v.eventId||!!g.eventId&&g.eventId===v.eventId;return v.filter.includes(g.type)&&E}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(zr(g))}saveEventToCache(g){this.cachedEventUids.add(zr(g)),this.lastProcessedEventTime=Date.now()}}function zr(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(g=>g).join("-")}function Rs({type:w,error:g}){return"unknown"===w&&"auth/no-auth-event"===(null==g?void 0:g.code)}function qf(w){return Wf.apply(this,arguments)}function Wf(){return(Wf=(0,c.Z)(function*(w,g={}){return un(w,"GET","/v1/projects",g)})).apply(this,arguments)}const sy=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ca=/^https?/;function Yf(){return(Yf=(0,c.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:g}=yield qf(w);for(const v of g)try{if($C(v))return}catch(E){}We(w,"unauthorized-domain")})).apply(this,arguments)}function $C(w){const g=me(),{protocol:v,hostname:E}=new URL(g);if(w.startsWith("chrome-extension://")){const ie=new URL(w);return""===ie.hostname&&""===E?"chrome-extension:"===v&&w.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===v&&ie.hostname===E}if(!ca.test(v))return!1;if(sy.test(w))return E===w;const k=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+k+"|"+k+")$","i").test(E)}const Eg=new st(3e4,6e4);function Dg(){const w=ai().___jsl;if(null==w?void 0:w.H)for(const g of Object.keys(w.H))if(w.H[g].r=w.H[g].r||[],w.H[g].L=w.H[g].L||[],w.H[g].r=[...w.H[g].L],w.CP)for(let v=0;v<w.CP.length;v++)w.CP[v]=null}let Oc=null;function Zf(w){return Oc=Oc||function oy(w){return new Promise((g,v)=>{var E,k,B;function ie(){Dg(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{Dg(),v(Le(w,"network-request-failed"))},timeout:Eg.get()})}if(null===(k=null===(E=ai().gapi)||void 0===E?void 0:E.iframes)||void 0===k?void 0:k.Iframe)g(gapi.iframes.getContext());else{if(!(null===(B=ai().gapi)||void 0===B?void 0:B.load)){const ke=Zi("iframefcb");return ai()[ke]=()=>{gapi.load?ie():v(Le(w,"network-request-failed"))},qn(`https://apis.google.com/js/api.js?onload=${ke}`).catch(lt=>v(lt))}ie()}}).catch(g=>{throw Oc=null,g})}(w),Oc}const ua=new st(5e3,15e3),ql={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ay=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Pc(w){const g=w.config;re(g.authDomain,w,"auth-domain-config-required");const v=g.emulator?Tn(g,"emulator/auth/iframe"):`https://${w.config.authDomain}/__/auth/iframe`,E={apiKey:g.apiKey,appName:w.name,v:N.SDK_VERSION},k=ay.get(w.config.apiHost);k&&(E.eid=k);const B=w._getFrameworks();return B.length&&(E.fw=B.join(",")),`${v}?${(0,G.xO)(E).slice(1)}`}function Nc(){return Nc=(0,c.Z)(function*(w){const g=yield Zf(w),v=ai().gapi;return re(v,w,"internal-error"),g.open({where:document.body,url:Pc(w),messageHandlersFilter:v.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ql,dontclear:!0},E=>new Promise(function(){var k=(0,c.Z)(function*(B,ie){yield E.restyle({setHideOnLeave:!1});const ke=Le(w,"network-request-failed"),lt=ai().setTimeout(()=>{ie(ke)},ua.get());function xt(){ai().clearTimeout(lt),B(E)}E.ping(xt).then(xt,()=>{ie(ke)})});return function(B,ie){return k.apply(this,arguments)}}()))}),Nc.apply(this,arguments)}const Fc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class th{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(g){}}}function oo(w,g,v,E,k,B){re(w.config.authDomain,w,"auth-domain-config-required"),re(w.config.apiKey,w,"invalid-api-key");const ie={apiKey:w.config.apiKey,appName:w.name,authType:v,redirectUrl:E,v:N.SDK_VERSION,eventId:k};if(g instanceof bo){g.setDefaultLanguage(w.languageCode),ie.providerId=g.providerId||"",(0,G.xb)(g.getCustomParameters())||(ie.customParameters=JSON.stringify(g.getCustomParameters()));for(const[lt,xt]of Object.entries(B||{}))ie[lt]=xt}if(g instanceof Ur){const lt=g.getScopes().filter(xt=>""!==xt);lt.length>0&&(ie.scopes=lt.join(","))}w.tenantId&&(ie.tid=w.tenantId);const ke=ie;for(const lt of Object.keys(ke))void 0===ke[lt]&&delete ke[lt];return`${function fa({config:w}){return w.emulator?Tn(w,"emulator/auth/handler"):`https://${w.authDomain}/__/auth/handler`}(w)}?${(0,G.xO)(ke).slice(1)}`}const Xa="webStorageSupport",Jf=class Xf{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Oi,this._completeRedirectFn=so,this._overrideRedirectResult=S}_openPopup(g,v,E,k){var B=this;return(0,c.Z)(function*(){var ie;Te(null===(ie=B.eventManagers[g._key()])||void 0===ie?void 0:ie.manager,"_initialize() not called before _openPopup()");const ke=oo(g,v,E,me(),k);return function cy(w,g,v,E=500,k=600){const B=Math.max((window.screen.availHeight-k)/2,0).toString(),ie=Math.max((window.screen.availWidth-E)/2,0).toString();let ke="";const lt=Object.assign(Object.assign({},Fc),{width:E.toString(),height:k.toString(),top:B,left:ie}),xt=(0,G.z$)().toLowerCase();v&&(ke=Re(xt)?"_blank":v),Z(xt)&&(g=g||"http://localhost",lt.scrollbars="yes");const Ft=Object.entries(lt).reduce((Os,[Ro,ip])=>`${Os}${Ro}=${ip},`,"");if(function xr(w=(0,G.z$)()){var g;return Qt(w)&&!!(null===(g=window.navigator)||void 0===g?void 0:g.standalone)}(xt)&&"_self"!==ke)return function Mu(w,g){const v=document.createElement("a");v.href=w,v.target=g;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),v.dispatchEvent(E)}(g||"",ke),new th(null);const Wn=window.open(g||"",ke,Ft);re(Wn,w,"popup-blocked");try{Wn.focus()}catch(Os){}return new th(Wn)}(g,ke,Ga())})()}_openRedirect(g,v,E,k){var B=this;return(0,c.Z)(function*(){return yield B._originValidation(g),function Ko(w){ai().location.href=w}(oo(g,v,E,me(),k)),new Promise(()=>{})})()}_initialize(g){const v=g._key();if(this.eventManagers[v]){const{manager:k,promise:B}=this.eventManagers[v];return k?Promise.resolve(k):(Te(B,"If manager is not set, promise should be"),B)}const E=this.initAndGetManager(g);return this.eventManagers[v]={promise:E},E.catch(()=>{delete this.eventManagers[v]}),E}initAndGetManager(g){var v=this;return(0,c.Z)(function*(){const E=yield function ly(w){return Nc.apply(this,arguments)}(g),k=new ko(g);return E.register("authEvent",B=>(re(null==B?void 0:B.authEvent,g,"invalid-auth-event"),{status:k.onEvent(B.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),v.eventManagers[g._key()]={manager:k},v.iframes[g._key()]=E,k})()}_isIframeWebStorageSupported(g,v){this.iframes[g._key()].send(Xa,{type:Xa},k=>{var B;const ie=null===(B=null==k?void 0:k[0])||void 0===B?void 0:B[Xa];void 0!==ie&&v(!!ie),We(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const v=g._key();return this.originValidationPromises[v]||(this.originValidationPromises[v]=function Su(w){return Yf.apply(this,arguments)}(g)),this.originValidationPromises[v]}get _shouldInitProactively(){return nr()||Y()||Qt()}};class ep extends class xg{constructor(g){this.factorId=g}_process(g,v,E){switch(v.type){case"enroll":return this._finalizeEnroll(g,v.credential,E);case"signin":return this._finalizeSignIn(g,v.credential);default:return _e("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new ep(g)}_finalizeEnroll(g,v,E){return function jf(w,g){return un(w,"POST","/v2/accounts/mfaEnrollment:finalize",Zt(w,g))}(g,{idToken:v,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,v){return function Qn(w,g){return un(w,"POST","/v2/accounts/mfaSignIn:finalize",Zt(w,g))}(g,{mfaPendingCredential:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let tp=(()=>{class w{constructor(){}static assertion(v){return ep._fromCredential(v)}}return w.FACTOR_ID="phone",w})();var np="@firebase/auth";class hy{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var v=this;return(0,c.Z)(function*(){return v.assertAuthConfigured(),yield v.auth._initializationPromise,v.auth.currentUser?{accessToken:yield v.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const v=this.auth.onIdTokenChanged(E=>{var k;g((null===(k=E)||void 0===k?void 0:k.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,v),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const v=this.internalListeners.get(g);!v||(this.internalListeners.delete(g),v(),this.updateProactiveRefresh())}assertAuthConfigured(){re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}!function nh(w){(0,N._registerComponent)(new Ce.wA("auth",(g,{options:v})=>{const E=g.getProvider("app").getImmediate(),k=g.getProvider("heartbeat"),{apiKey:B,authDomain:ie}=E.options;return((ke,lt)=>{re(B&&!B.includes(":"),"invalid-api-key",{appName:ke.name}),re(!(null==ie?void 0:ie.includes(":")),"argument-error",{appName:ke.name});const xt={apiKey:B,authDomain:ie,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Li(w)},Ft=new Sr(ke,lt,xt);return function De(w,g){const v=(null==g?void 0:g.persistence)||[],E=(Array.isArray(v)?v:[v]).map(se);(null==g?void 0:g.errorMap)&&w._updateErrorMap(g.errorMap),w._initializeWithPersistence(E,null==g?void 0:g.popupRedirectResolver)}(Ft,v),Ft})(E,k)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,v,E)=>{g.getProvider("auth-internal").initialize()})),(0,N._registerComponent)(new Ce.wA("auth-internal",g=>{const v=ze(g.getProvider("auth").getImmediate());return new hy(v)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,N.registerVersion)(np,"0.20.4",function Mg(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,N.registerVersion)(np,"0.20.4","esm2017")}("Browser")},2090:(ut,Se,L)=>{L.d(Se,{BH:()=>Xe,LL:()=>me,ZR:()=>De,gQ:()=>ni,zI:()=>J,hu:()=>G,g5:()=>N,US:()=>Ce,tV:()=>Ee,h$:()=>oe,L:()=>pe,$s:()=>cs,r3:()=>Zt,Sg:()=>Fe,ne:()=>Cs,p$:()=>W,vZ:()=>tr,ZB:()=>q,gK:()=>Ii,pd:()=>ls,m9:()=>yt,z$:()=>Ve,GJ:()=>fn,jU:()=>Ae,ru:()=>Ke,d:()=>Le,xb:()=>zn,w1:()=>Pe,hl:()=>_e,uI:()=>qe,UG:()=>we,Yr:()=>Je,b$:()=>We,G6:()=>re,Mn:()=>Me,w9:()=>In,cI:()=>ln,UI:()=>as,xO:()=>ws,zd:()=>Fr,DV:()=>un,ug:()=>Jt,dS:()=>zs,Pz:()=>Yt,Dv:()=>Yi,Wj:()=>Gn,lb:()=>Ai,eu:()=>Te});const G=function(K,z){if(!K)throw N(z)},N=function(K){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+K)},de=function(K){const z=[];let ee=0;for(let te=0;te<K.length;te++){let H=K.charCodeAt(te);H<128?z[ee++]=H:H<2048?(z[ee++]=H>>6|192,z[ee++]=63&H|128):55296==(64512&H)&&te+1<K.length&&56320==(64512&K.charCodeAt(te+1))?(H=65536+((1023&H)<<10)+(1023&K.charCodeAt(++te)),z[ee++]=H>>18|240,z[ee++]=H>>12&63|128,z[ee++]=H>>6&63|128,z[ee++]=63&H|128):(z[ee++]=H>>12|224,z[ee++]=H>>6&63|128,z[ee++]=63&H|128)}return z},Ce={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(K,z){if(!Array.isArray(K))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ee=z?this.byteToCharMapWebSafe_:this.byteToCharMap_,te=[];for(let H=0;H<K.length;H+=3){const xe=K[H],Ge=H+1<K.length,dt=Ge?K[H+1]:0,Ut=H+2<K.length,cn=Ut?K[H+2]:0;let ce=(15&dt)<<2|cn>>6,Z=63&cn;Ut||(Z=64,Ge||(ce=64)),te.push(ee[xe>>2],ee[(3&xe)<<4|dt>>4],ee[ce],ee[Z])}return te.join("")},encodeString(K,z){return this.HAS_NATIVE_SUPPORT&&!z?btoa(K):this.encodeByteArray(de(K),z)},decodeString(K,z){return this.HAS_NATIVE_SUPPORT&&!z?atob(K):function(K){const z=[];let ee=0,te=0;for(;ee<K.length;){const H=K[ee++];if(H<128)z[te++]=String.fromCharCode(H);else if(H>191&&H<224){const xe=K[ee++];z[te++]=String.fromCharCode((31&H)<<6|63&xe)}else if(H>239&&H<365){const Ut=((7&H)<<18|(63&K[ee++])<<12|(63&K[ee++])<<6|63&K[ee++])-65536;z[te++]=String.fromCharCode(55296+(Ut>>10)),z[te++]=String.fromCharCode(56320+(1023&Ut))}else{const xe=K[ee++],Ge=K[ee++];z[te++]=String.fromCharCode((15&H)<<12|(63&xe)<<6|63&Ge)}}return z.join("")}(this.decodeStringToByteArray(K,z))},decodeStringToByteArray(K,z){this.init_();const ee=z?this.charToByteMapWebSafe_:this.charToByteMap_,te=[];for(let H=0;H<K.length;){const xe=ee[K.charAt(H++)],dt=H<K.length?ee[K.charAt(H)]:0;++H;const cn=H<K.length?ee[K.charAt(H)]:64;++H;const Kt=H<K.length?ee[K.charAt(H)]:64;if(++H,null==xe||null==dt||null==cn||null==Kt)throw Error();te.push(xe<<2|dt>>4),64!==cn&&(te.push(dt<<4&240|cn>>2),64!==Kt&&te.push(cn<<6&192|Kt))}return te},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let K=0;K<this.ENCODED_VALS.length;K++)this.byteToCharMap_[K]=this.ENCODED_VALS.charAt(K),this.charToByteMap_[this.byteToCharMap_[K]]=K,this.byteToCharMapWebSafe_[K]=this.ENCODED_VALS_WEBSAFE.charAt(K),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[K]]=K,K>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(K)]=K,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(K)]=K)}}},oe=function(K){const z=de(K);return Ce.encodeByteArray(z,!0)},pe=function(K){return oe(K).replace(/\./g,"")},Ee=function(K){try{return Ce.decodeString(K,!0)}catch(z){console.error("base64Decode failed: ",z)}return null};function W(K){return q(void 0,K)}function q(K,z){if(!(z instanceof Object))return z;switch(z.constructor){case Date:return new Date(z.getTime());case Object:void 0===K&&(K={});break;case Array:K=[];break;default:return z}for(const ee in z)!z.hasOwnProperty(ee)||!ae(ee)||(K[ee]=q(K[ee],z[ee]));return K}function ae(K){return"__proto__"!==K}class Xe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((z,ee)=>{this.resolve=z,this.reject=ee})}wrapCallback(z){return(ee,te)=>{ee?this.reject(ee):this.resolve(te),"function"==typeof z&&(this.promise.catch(()=>{}),1===z.length?z(ee):z(ee,te))}}}function Fe(K,z){if(K.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const te=z||"demo-project",H=K.iat||0,xe=K.sub||K.user_id;if(!xe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ge=Object.assign({iss:`https://securetoken.google.com/${te}`,aud:te,iat:H,exp:H+3600,auth_time:H,sub:xe,user_id:xe,firebase:{sign_in_provider:"custom",identities:{}}},K);return[pe(JSON.stringify({alg:"none",type:"JWT"})),pe(JSON.stringify(Ge)),""].join(".")}function Ve(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function qe(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ve())}function we(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(K){return!1}}function Ae(){return"object"==typeof self&&self.self===self}function Ke(){const K="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof K&&void 0!==K.id}function We(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Le(){return Ve().indexOf("Electron/")>=0}function Pe(){const K=Ve();return K.indexOf("MSIE ")>=0||K.indexOf("Trident/")>=0}function Me(){return Ve().indexOf("MSAppHost/")>=0}function Je(){return!1}function re(){return!we()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _e(){return"object"==typeof indexedDB}function Te(){return new Promise((K,z)=>{try{let ee=!0;const te="validate-browser-context-for-indexeddb-analytics-module",H=self.indexedDB.open(te);H.onsuccess=()=>{H.result.close(),ee||self.indexedDB.deleteDatabase(te),K(!0)},H.onupgradeneeded=()=>{ee=!1},H.onerror=()=>{var xe;z((null===(xe=H.error)||void 0===xe?void 0:xe.message)||"")}}catch(ee){z(ee)}})}function J(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class De extends Error{constructor(z,ee,te){super(ee),this.code=z,this.customData=te,this.name="FirebaseError",Object.setPrototypeOf(this,De.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,me.prototype.create)}}class me{constructor(z,ee,te){this.service=z,this.serviceName=ee,this.errors=te}create(z,...ee){const te=ee[0]||{},H=`${this.service}/${z}`,xe=this.errors[z],Ge=xe?function He(K,z){return K.replace(wt,(ee,te)=>{const H=z[te];return null!=H?String(H):`<${te}?>`})}(xe,te):"Error";return new De(H,`${this.serviceName}: ${Ge} (${H}).`,te)}}const wt=/\{\$([^}]+)}/g;function ln(K){return JSON.parse(K)}function Yt(K){return JSON.stringify(K)}const st=function(K){let z={},ee={},te={},H="";try{const xe=K.split(".");z=ln(Ee(xe[0])||""),ee=ln(Ee(xe[1])||""),H=xe[2],te=ee.d||{},delete ee.d}catch(xe){}return{header:z,claims:ee,data:te,signature:H}},In=function(K){const ee=st(K).claims;return!!ee&&"object"==typeof ee&&ee.hasOwnProperty("iat")},fn=function(K){const z=st(K).claims;return"object"==typeof z&&!0===z.admin};function Zt(K,z){return Object.prototype.hasOwnProperty.call(K,z)}function un(K,z){if(Object.prototype.hasOwnProperty.call(K,z))return K[z]}function zn(K){for(const z in K)if(Object.prototype.hasOwnProperty.call(K,z))return!1;return!0}function as(K,z,ee){const te={};for(const H in K)Object.prototype.hasOwnProperty.call(K,H)&&(te[H]=z.call(ee,K[H],H,K));return te}function tr(K,z){if(K===z)return!0;const ee=Object.keys(K),te=Object.keys(z);for(const H of ee){if(!te.includes(H))return!1;const xe=K[H],Ge=z[H];if(Kn(xe)&&Kn(Ge)){if(!tr(xe,Ge))return!1}else if(xe!==Ge)return!1}for(const H of te)if(!ee.includes(H))return!1;return!0}function Kn(K){return null!==K&&"object"==typeof K}function ws(K){const z=[];for(const[ee,te]of Object.entries(K))Array.isArray(te)?te.forEach(H=>{z.push(encodeURIComponent(ee)+"="+encodeURIComponent(H))}):z.push(encodeURIComponent(ee)+"="+encodeURIComponent(te));return z.length?"&"+z.join("&"):""}function Fr(K){const z={};return K.replace(/^\?/,"").split("&").forEach(te=>{if(te){const[H,xe]=te.split("=");z[decodeURIComponent(H)]=decodeURIComponent(xe)}}),z}function ls(K){const z=K.indexOf("?");if(!z)return"";const ee=K.indexOf("#",z);return K.substring(z,ee>0?ee:void 0)}class ni{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let z=1;z<this.blockSize;++z)this.pad_[z]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(z,ee){ee||(ee=0);const te=this.W_;if("string"==typeof z)for(let Kt=0;Kt<16;Kt++)te[Kt]=z.charCodeAt(ee)<<24|z.charCodeAt(ee+1)<<16|z.charCodeAt(ee+2)<<8|z.charCodeAt(ee+3),ee+=4;else for(let Kt=0;Kt<16;Kt++)te[Kt]=z[ee]<<24|z[ee+1]<<16|z[ee+2]<<8|z[ee+3],ee+=4;for(let Kt=16;Kt<80;Kt++){const ce=te[Kt-3]^te[Kt-8]^te[Kt-14]^te[Kt-16];te[Kt]=4294967295&(ce<<1|ce>>>31)}let cn,kn,H=this.chain_[0],xe=this.chain_[1],Ge=this.chain_[2],dt=this.chain_[3],Ut=this.chain_[4];for(let Kt=0;Kt<80;Kt++){Kt<40?Kt<20?(cn=dt^xe&(Ge^dt),kn=1518500249):(cn=xe^Ge^dt,kn=1859775393):Kt<60?(cn=xe&Ge|dt&(xe|Ge),kn=2400959708):(cn=xe^Ge^dt,kn=3395469782);const ce=(H<<5|H>>>27)+cn+Ut+kn+te[Kt]&4294967295;Ut=dt,dt=Ge,Ge=4294967295&(xe<<30|xe>>>2),xe=H,H=ce}this.chain_[0]=this.chain_[0]+H&4294967295,this.chain_[1]=this.chain_[1]+xe&4294967295,this.chain_[2]=this.chain_[2]+Ge&4294967295,this.chain_[3]=this.chain_[3]+dt&4294967295,this.chain_[4]=this.chain_[4]+Ut&4294967295}update(z,ee){if(null==z)return;void 0===ee&&(ee=z.length);const te=ee-this.blockSize;let H=0;const xe=this.buf_;let Ge=this.inbuf_;for(;H<ee;){if(0===Ge)for(;H<=te;)this.compress_(z,H),H+=this.blockSize;if("string"==typeof z){for(;H<ee;)if(xe[Ge]=z.charCodeAt(H),++Ge,++H,Ge===this.blockSize){this.compress_(xe),Ge=0;break}}else for(;H<ee;)if(xe[Ge]=z[H],++Ge,++H,Ge===this.blockSize){this.compress_(xe),Ge=0;break}}this.inbuf_=Ge,this.total_+=ee}digest(){const z=[];let ee=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let H=this.blockSize-1;H>=56;H--)this.buf_[H]=255&ee,ee/=256;this.compress_(this.buf_);let te=0;for(let H=0;H<5;H++)for(let xe=24;xe>=0;xe-=8)z[te]=this.chain_[H]>>xe&255,++te;return z}}function Cs(K,z){const ee=new Ct(K,z);return ee.subscribe.bind(ee)}class Ct{constructor(z,ee){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ee,this.task.then(()=>{z(this)}).catch(te=>{this.error(te)})}next(z){this.forEachObserver(ee=>{ee.next(z)})}error(z){this.forEachObserver(ee=>{ee.error(z)}),this.close(z)}complete(){this.forEachObserver(z=>{z.complete()}),this.close()}subscribe(z,ee,te){let H;if(void 0===z&&void 0===ee&&void 0===te)throw new Error("Missing Observer.");H=function jn(K,z){if("object"!=typeof K||null===K)return!1;for(const ee of z)if(ee in K&&"function"==typeof K[ee])return!0;return!1}(z,["next","error","complete"])?z:{next:z,error:ee,complete:te},void 0===H.next&&(H.next=pn),void 0===H.error&&(H.error=pn),void 0===H.complete&&(H.complete=pn);const xe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?H.error(this.finalError):H.complete()}catch(Ge){}}),this.observers.push(H),xe}unsubscribeOne(z){void 0===this.observers||void 0===this.observers[z]||(delete this.observers[z],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(z){if(!this.finalized)for(let ee=0;ee<this.observers.length;ee++)this.sendOne(ee,z)}sendOne(z,ee){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[z])try{ee(this.observers[z])}catch(te){"undefined"!=typeof console&&console.error&&console.error(te)}})}close(z){this.finalized||(this.finalized=!0,void 0!==z&&(this.finalError=z),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function pn(){}const Yi=function(K,z,ee,te){let H;if(te<z?H="at least "+z:te>ee&&(H=0===ee?"none":"no more than "+ee),H)throw new Error(K+" failed: Was called with "+te+(1===te?" argument.":" arguments.")+" Expects "+H+".")};function Ii(K,z){return`${K} failed: ${z} argument `}function Gn(K,z,ee,te){if((!te||ee)&&"function"!=typeof ee)throw new Error(Ii(K,z)+"must be a valid function.")}function Ai(K,z,ee,te){if((!te||ee)&&("object"!=typeof ee||null===ee))throw new Error(Ii(K,z)+"must be a valid context object.")}const zs=function(K){const z=[];let ee=0;for(let te=0;te<K.length;te++){let H=K.charCodeAt(te);if(H>=55296&&H<=56319){const xe=H-55296;te++,G(te<K.length,"Surrogate pair missing trail surrogate."),H=65536+(xe<<10)+(K.charCodeAt(te)-56320)}H<128?z[ee++]=H:H<2048?(z[ee++]=H>>6|192,z[ee++]=63&H|128):H<65536?(z[ee++]=H>>12|224,z[ee++]=H>>6&63|128,z[ee++]=63&H|128):(z[ee++]=H>>18|240,z[ee++]=H>>12&63|128,z[ee++]=H>>6&63|128,z[ee++]=63&H|128)}return z},Jt=function(K){let z=0;for(let ee=0;ee<K.length;ee++){const te=K.charCodeAt(ee);te<128?z++:te<2048?z+=2:te>=55296&&te<=56319?(z+=4,ee++):z+=3}return z};function cs(K,z=1e3,ee=2){const te=z*Math.pow(ee,K),H=Math.round(.5*te*(Math.random()-.5)*2);return Math.min(144e5,te+H)}function yt(K){return K&&K._delegate?K._delegate:K}},5867:(ut,Se,L)=>{L.d(Se,{Mq:()=>c.getApp,C6:()=>c.getApps});var c=L(9681);(0,c.registerVersion)("firebase","9.8.4","app")},127:(ut,Se,L)=>{L.d(Se,{Z:()=>c.Z});var c=L(3942);c.Z.registerVersion("firebase","9.8.4","app-compat")},5881:(ut,Se,L)=>{L.r(Se);var c=L(5861),G=L(3942),N=L(3673),de=L(2090),oe=(L(9681),L(1877),L(4859));function pe(){return window}function q(){return(q=(0,c.Z)(function*(ce,Z,Y){var Re;const{BuildInfo:tt}=pe();(0,N.aq)(Z.sessionId,"AuthEvent did not contain a session ID");const gt=yield Ae(Z.sessionId),kt={};return(0,N.ar)()?kt.ibi=tt.packageName:(0,N.as)()?kt.apn=tt.packageName:(0,N.at)(ce,"operation-not-supported-in-this-environment"),tt.displayName&&(kt.appDisplayName=tt.displayName),kt.sessionId=gt,(0,N.au)(ce,Y,Z.type,void 0,null!==(Re=Z.eventId)&&void 0!==Re?Re:void 0,kt)})).apply(this,arguments)}function Xe(){return(Xe=(0,c.Z)(function*(ce){const{BuildInfo:Z}=pe(),Y={};(0,N.ar)()?Y.iosBundleId=Z.packageName:(0,N.as)()?Y.androidPackageName=Z.packageName:(0,N.at)(ce,"operation-not-supported-in-this-environment"),yield(0,N.av)(ce,Y)})).apply(this,arguments)}function qe(){return(qe=(0,c.Z)(function*(ce,Z,Y){const{cordova:Re}=pe();let tt=()=>{};try{yield new Promise((gt,kt)=>{let sn=null;function Qt(){var Xt;gt();const nr=null===(Xt=Re.plugins.browsertab)||void 0===Xt?void 0:Xt.close;"function"==typeof nr&&nr(),"function"==typeof(null==Y?void 0:Y.close)&&Y.close()}function di(){sn||(sn=window.setTimeout(()=>{kt((0,N.aw)(ce,"redirect-cancelled-by-user"))},2e3))}function xr(){"visible"===(null==document?void 0:document.visibilityState)&&di()}Z.addPassiveListener(Qt),document.addEventListener("resume",di,!1),(0,N.as)()&&document.addEventListener("visibilitychange",xr,!1),tt=()=>{Z.removePassiveListener(Qt),document.removeEventListener("resume",di,!1),document.removeEventListener("visibilitychange",xr,!1),sn&&window.clearTimeout(sn)}})}finally{tt()}})).apply(this,arguments)}function Ae(ce){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,c.Z)(function*(ce){const Z=We(ce),Y=yield crypto.subtle.digest("SHA-256",Z);return Array.from(new Uint8Array(Y)).map(tt=>tt.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function We(ce){if((0,N.aq)(/[0-9a-zA-Z]+/.test(ce),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(ce);const Z=new ArrayBuffer(ce.length),Y=new Uint8Array(Z);for(let Re=0;Re<ce.length;Re++)Y[Re]=ce.charCodeAt(Re);return Y}class Pe extends N.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(Z=>{this.resolveInialized=Z})}addPassiveListener(Z){this.passiveListeners.add(Z)}removePassiveListener(Z){this.passiveListeners.delete(Z)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(Z){return this.resolveInialized(),this.passiveListeners.forEach(Y=>Y(Z)),super.onEvent(Z)}initialized(){var Z=this;return(0,c.Z)(function*(){yield Z.initPromise})()}}function re(ce){return _e.apply(this,arguments)}function _e(){return(_e=(0,c.Z)(function*(ce){const Z=yield se()._get(ue(ce));return Z&&(yield se()._remove(ue(ce))),Z})).apply(this,arguments)}function J(){const ce=[],Z="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let Y=0;Y<20;Y++){const Re=Math.floor(Math.random()*Z.length);ce.push(Z.charAt(Re))}return ce.join("")}function se(){return(0,N.ay)(N.b)}function ue(ce){return(0,N.az)("authEvent",ce.config.apiKey,ce.name)}function He(ce){if(!(null==ce?void 0:ce.includes("?")))return{};const[Z,...Y]=ce.split("?");return(0,de.zd)(Y.join("?"))}function st(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,N.aw)("no-auth-event")}}function Zt(){var ce;return(null===(ce=null==self?void 0:self.location)||void 0===ce?void 0:ce.protocol)||null}function zn(ce=(0,de.z$)()){return!("file:"!==Zt()&&"ionic:"!==Zt()&&"capacitor:"!==Zt()||!ce.toLowerCase().match(/iphone|ipad|ipod|android/))}function Fr(){try{const ce=self.localStorage,Z=N.aI();if(ce)return ce.setItem(Z,"1"),ce.removeItem(Z),!function ws(ce=(0,de.z$)()){return function tr(){return(0,de.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Kn(ce=(0,de.z$)()){return/Edge\/\d+/.test(ce)}(ce)}()||(0,de.hl)()}catch(ce){return ls()&&(0,de.hl)()}return!1}function ls(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function ni(){return(function un(){return"http:"===Zt()||"https:"===Zt()}()||(0,de.ru)()||zn())&&!function as(){return(0,de.b$)()||(0,de.UG)()}()&&Fr()&&!ls()}function Cs(){return zn()&&"undefined"!=typeof document}function cr(){return(cr=(0,c.Z)(function*(){return!!Cs()&&new Promise(ce=>{const Z=setTimeout(()=>{ce(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(Z),ce(!0)})})})).apply(this,arguments)}const pn={LOCAL:"local",NONE:"none",SESSION:"session"},Yi=N.ax,Ii="persistence";function Gn(ce){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,c.Z)(function*(ce){yield ce._initializationPromise;const Z=Jt(),Y=N.az(Ii,ce.config.apiKey,ce.name);Z&&Z.setItem(Y,ce._getPersistence())})).apply(this,arguments)}function Jt(){var ce;try{return(null===(ce=function jn(){return"undefined"!=typeof window?window:null}())||void 0===ce?void 0:ce.sessionStorage)||null}catch(Z){return null}}const vt=N.ax;class ft{constructor(){this.browserResolver=N.ay(N.k),this.cordovaResolver=N.ay(class ln{constructor(){this._redirectPersistence=N.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=N.aB,this._overrideRedirectResult=N.aC}_initialize(Z){var Y=this;return(0,c.Z)(function*(){const Re=Z._key();let tt=Y.eventManagers.get(Re);return tt||(tt=new Pe(Z),Y.eventManagers.set(Re,tt),Y.attachCallbackListeners(Z,tt)),tt})()}_openPopup(Z){(0,N.at)(Z,"operation-not-supported-in-this-environment")}_openRedirect(Z,Y,Re,tt){var gt=this;return(0,c.Z)(function*(){!function we(ce){var Z,Y,Re,tt,gt,kt,sn,Qt,di,xr;const Xt=pe();(0,N.ax)("function"==typeof(null===(Z=null==Xt?void 0:Xt.universalLinks)||void 0===Z?void 0:Z.subscribe),ce,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,N.ax)(void 0!==(null===(Y=null==Xt?void 0:Xt.BuildInfo)||void 0===Y?void 0:Y.packageName),ce,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,N.ax)("function"==typeof(null===(gt=null===(tt=null===(Re=null==Xt?void 0:Xt.cordova)||void 0===Re?void 0:Re.plugins)||void 0===tt?void 0:tt.browsertab)||void 0===gt?void 0:gt.openUrl),ce,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.ax)("function"==typeof(null===(Qt=null===(sn=null===(kt=null==Xt?void 0:Xt.cordova)||void 0===kt?void 0:kt.plugins)||void 0===sn?void 0:sn.browsertab)||void 0===Qt?void 0:Qt.isAvailable),ce,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.ax)("function"==typeof(null===(xr=null===(di=null==Xt?void 0:Xt.cordova)||void 0===di?void 0:di.InAppBrowser)||void 0===xr?void 0:xr.open),ce,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(Z);const kt=yield gt._initialize(Z);yield kt.initialized(),kt.resetRedirect(),(0,N.aD)(),yield gt._originValidation(Z);const sn=function Me(ce,Z,Y=null){return{type:Z,eventId:Y,urlResponse:null,sessionId:J(),postBody:null,tenantId:ce.tenantId,error:(0,N.aw)(ce,"no-auth-event")}}(Z,Re,tt);yield function Je(ce,Z){return se()._set(ue(ce),Z)}(Z,sn);const Qt=yield function W(ce,Z,Y){return q.apply(this,arguments)}(Z,sn,Y),di=yield function Fe(ce){const{cordova:Z}=pe();return new Promise(Y=>{Z.plugins.browsertab.isAvailable(Re=>{let tt=null;Re?Z.plugins.browsertab.openUrl(ce):tt=Z.InAppBrowser.open(ce,(0,N.ap)()?"_blank":"_system","location=yes"),Y(tt)})})}(Qt);return function Ve(ce,Z,Y){return qe.apply(this,arguments)}(Z,kt,di)})()}_isIframeWebStorageSupported(Z,Y){throw new Error("Method not implemented.")}_originValidation(Z){const Y=Z._key();return this.originValidationPromises[Y]||(this.originValidationPromises[Y]=function ae(ce){return Xe.apply(this,arguments)}(Z)),this.originValidationPromises[Y]}attachCallbackListeners(Z,Y){const{universalLinks:Re,handleOpenURL:tt,BuildInfo:gt}=pe(),kt=setTimeout((0,c.Z)(function*(){yield re(Z),Y.onEvent(st())}),500),sn=function(){var xr=(0,c.Z)(function*(Xt){clearTimeout(kt);const nr=yield re(Z);let Es=null;nr&&(null==Xt?void 0:Xt.url)&&(Es=function Te(ce,Z){var Y,Re;const tt=function me(ce){const Z=He(ce),Y=Z.link?decodeURIComponent(Z.link):void 0,Re=He(Y).link,tt=Z.deep_link_id?decodeURIComponent(Z.deep_link_id):void 0;return He(tt).link||tt||Re||Y||ce}(Z);if(tt.includes("/__/auth/callback")){const gt=He(tt),kt=gt.firebaseError?function De(ce){try{return JSON.parse(ce)}catch(Z){return null}}(decodeURIComponent(gt.firebaseError)):null,sn=null===(Re=null===(Y=null==kt?void 0:kt.code)||void 0===Y?void 0:Y.split("auth/"))||void 0===Re?void 0:Re[1],Qt=sn?(0,N.aw)(sn):null;return Qt?{type:ce.type,eventId:ce.eventId,tenantId:ce.tenantId,error:Qt,urlResponse:null,sessionId:null,postBody:null}:{type:ce.type,eventId:ce.eventId,tenantId:ce.tenantId,sessionId:ce.sessionId,urlResponse:tt,postBody:null}}return null}(nr,Xt.url)),Y.onEvent(Es||st())});return function(nr){return xr.apply(this,arguments)}}();void 0!==Re&&"function"==typeof Re.subscribe&&Re.subscribe(null,sn);const Qt=tt,di=`${gt.packageName.toLowerCase()}://`;pe().handleOpenURL=function(){var xr=(0,c.Z)(function*(Xt){if(Xt.toLowerCase().startsWith(di)&&sn({url:Xt}),"function"==typeof Qt)try{Qt(Xt)}catch(nr){console.error(nr)}});return function(Xt){return xr.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=N.a,this._completeRedirectFn=N.aB,this._overrideRedirectResult=N.aC}_initialize(Z){var Y=this;return(0,c.Z)(function*(){return yield Y.selectUnderlyingResolver(),Y.assertedUnderlyingResolver._initialize(Z)})()}_openPopup(Z,Y,Re,tt){var gt=this;return(0,c.Z)(function*(){return yield gt.selectUnderlyingResolver(),gt.assertedUnderlyingResolver._openPopup(Z,Y,Re,tt)})()}_openRedirect(Z,Y,Re,tt){var gt=this;return(0,c.Z)(function*(){return yield gt.selectUnderlyingResolver(),gt.assertedUnderlyingResolver._openRedirect(Z,Y,Re,tt)})()}_isIframeWebStorageSupported(Z,Y){this.assertedUnderlyingResolver._isIframeWebStorageSupported(Z,Y)}_originValidation(Z){return this.assertedUnderlyingResolver._originValidation(Z)}get _shouldInitProactively(){return Cs()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return vt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var Z=this;return(0,c.Z)(function*(){if(Z.underlyingResolver)return;const Y=yield function Ct(){return cr.apply(this,arguments)}();Z.underlyingResolver=Y?Z.cordovaResolver:Z.browserResolver})()}}function Lr(ce){return ce.unwrap()}function en(ce){return ui(ce)}function ui(ce){const{_tokenResponse:Z}=ce instanceof de.ZR?ce.customData:ce;if(!Z)return null;if(!(ce instanceof de.ZR)&&"temporaryProof"in Z&&"phoneNumber"in Z)return N.P.credentialFromResult(ce);const Y=Z.providerId;if(!Y||Y===N.o.PASSWORD)return null;let Re;switch(Y){case N.o.GOOGLE:Re=N.Q;break;case N.o.FACEBOOK:Re=N.N;break;case N.o.GITHUB:Re=N.T;break;case N.o.TWITTER:Re=N.W;break;default:const{oauthIdToken:tt,oauthAccessToken:gt,oauthTokenSecret:kt,pendingToken:sn,nonce:Qt}=Z;return gt||kt||tt||sn?sn?Y.startsWith("saml.")?N.aL._create(Y,sn):N.J._fromParams({providerId:Y,signInMethod:Y,pendingToken:sn,idToken:tt,accessToken:gt}):new N.U(Y).credential({idToken:tt,accessToken:gt,rawNonce:Qt}):null}return ce instanceof de.ZR?Re.credentialFromError(ce):Re.credentialFromResult(ce)}function An(ce,Z){return Z.catch(Y=>{throw Y instanceof de.ZR&&function cs(ce,Z){var Y,Re;const tt=null===(Y=Z.customData)||void 0===Y?void 0:Y._tokenResponse;if("auth/multi-factor-auth-required"===(null===(Re=Z)||void 0===Re?void 0:Re.code))Z.resolver=new z(ce,N.an(ce,Z));else if(tt){const gt=ui(Z),kt=Z;gt&&(kt.credential=gt,kt.tenantId=tt.tenantId||void 0,kt.email=tt.email||void 0,kt.phoneNumber=tt.phoneNumber||void 0)}}(ce,Y),Y}).then(Y=>{const tt=Y.user;return{operationType:Y.operationType,credential:en(Y),additionalUserInfo:N.al(Y),user:ee.getOrCreate(tt)}})}function yt(ce,Z){return K.apply(this,arguments)}function K(){return(K=(0,c.Z)(function*(ce,Z){const Y=yield Z;return{verificationId:Y.verificationId,confirm:Re=>An(ce,Y.confirm(Re))}})).apply(this,arguments)}class z{constructor(Z,Y){this.resolver=Y,this.auth=function Br(ce){return ce.wrapped()}(Z)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(Z){return An(Lr(this.auth),this.resolver.resolveSignIn(Z))}}class ee{constructor(Z){this._delegate=Z,this.multiFactor=N.ao(Z)}static getOrCreate(Z){return ee.USER_MAP.has(Z)||ee.USER_MAP.set(Z,new ee(Z)),ee.USER_MAP.get(Z)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(Z){return this._delegate.getIdTokenResult(Z)}getIdToken(Z){return this._delegate.getIdToken(Z)}linkAndRetrieveDataWithCredential(Z){return this.linkWithCredential(Z)}linkWithCredential(Z){var Y=this;return(0,c.Z)(function*(){return An(Y.auth,N.Z(Y._delegate,Z))})()}linkWithPhoneNumber(Z,Y){var Re=this;return(0,c.Z)(function*(){return yt(Re.auth,N.l(Re._delegate,Z,Y))})()}linkWithPopup(Z){var Y=this;return(0,c.Z)(function*(){return An(Y.auth,N.d(Y._delegate,Z,ft))})()}linkWithRedirect(Z){var Y=this;return(0,c.Z)(function*(){return yield Gn(N.aE(Y.auth)),N.g(Y._delegate,Z,ft)})()}reauthenticateAndRetrieveDataWithCredential(Z){return this.reauthenticateWithCredential(Z)}reauthenticateWithCredential(Z){var Y=this;return(0,c.Z)(function*(){return An(Y.auth,N._(Y._delegate,Z))})()}reauthenticateWithPhoneNumber(Z,Y){return yt(this.auth,N.r(this._delegate,Z,Y))}reauthenticateWithPopup(Z){return An(this.auth,N.e(this._delegate,Z,ft))}reauthenticateWithRedirect(Z){var Y=this;return(0,c.Z)(function*(){return yield Gn(N.aE(Y.auth)),N.h(Y._delegate,Z,ft)})()}sendEmailVerification(Z){return N.ab(this._delegate,Z)}unlink(Z){var Y=this;return(0,c.Z)(function*(){return yield N.ak(Y._delegate,Z),Y})()}updateEmail(Z){return N.ag(this._delegate,Z)}updatePassword(Z){return N.ah(this._delegate,Z)}updatePhoneNumber(Z){return N.u(this._delegate,Z)}updateProfile(Z){return N.af(this._delegate,Z)}verifyBeforeUpdateEmail(Z,Y){return N.ac(this._delegate,Z,Y)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ee.USER_MAP=new WeakMap;const te=N.ax;let H=(()=>{class ce{constructor(Y,Re){if(this.app=Y,Re.isInitialized())return this._delegate=Re.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:tt}=Y.options;te(tt,"invalid-api-key",{appName:Y.name}),te(tt,"invalid-api-key",{appName:Y.name});const gt="undefined"!=typeof window?ft:void 0;this._delegate=Re.initialize({options:{persistence:Ge(tt,Y.name),popupRedirectResolver:gt}}),this._delegate._updateErrorMap(N.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ee.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(Y){this._delegate.languageCode=Y}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(Y){this._delegate.tenantId=Y}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(Y,Re){N.G(this._delegate,Y,Re)}applyActionCode(Y){return N.a2(this._delegate,Y)}checkActionCode(Y){return N.a3(this._delegate,Y)}confirmPasswordReset(Y,Re){return N.a1(this._delegate,Y,Re)}createUserWithEmailAndPassword(Y,Re){var tt=this;return(0,c.Z)(function*(){return An(tt._delegate,N.a5(tt._delegate,Y,Re))})()}fetchProvidersForEmail(Y){return this.fetchSignInMethodsForEmail(Y)}fetchSignInMethodsForEmail(Y){return N.aa(this._delegate,Y)}isSignInWithEmailLink(Y){return N.a8(this._delegate,Y)}getRedirectResult(){var Y=this;return(0,c.Z)(function*(){te(ni(),Y._delegate,"operation-not-supported-in-this-environment");const Re=yield N.j(Y._delegate,ft);return Re?An(Y._delegate,Promise.resolve(Re)):{credential:null,user:null}})()}addFrameworkForLogging(Y){!function Tn(ce,Z){(0,N.aE)(ce)._logFramework(Z)}(this._delegate,Y)}onAuthStateChanged(Y,Re,tt){const{next:gt,error:kt,complete:sn}=xe(Y,Re,tt);return this._delegate.onAuthStateChanged(gt,kt,sn)}onIdTokenChanged(Y,Re,tt){const{next:gt,error:kt,complete:sn}=xe(Y,Re,tt);return this._delegate.onIdTokenChanged(gt,kt,sn)}sendSignInLinkToEmail(Y,Re){return N.a7(this._delegate,Y,Re)}sendPasswordResetEmail(Y,Re){return N.a0(this._delegate,Y,Re||void 0)}setPersistence(Y){var Re=this;return(0,c.Z)(function*(){let tt;switch(function ur(ce,Z){Yi(Object.values(pn).includes(Z),ce,"invalid-persistence-type"),(0,de.b$)()?Yi(Z!==pn.SESSION,ce,"unsupported-persistence-type"):(0,de.UG)()?Yi(Z===pn.NONE,ce,"unsupported-persistence-type"):ls()?Yi(Z===pn.NONE||Z===pn.LOCAL&&(0,de.hl)(),ce,"unsupported-persistence-type"):Yi(Z===pn.NONE||Fr(),ce,"unsupported-persistence-type")}(Re._delegate,Y),Y){case pn.SESSION:tt=N.a;break;case pn.LOCAL:tt=(yield N.ay(N.i)._isAvailable())?N.i:N.b;break;case pn.NONE:tt=N.L;break;default:return N.at("argument-error",{appName:Re._delegate.name})}return Re._delegate.setPersistence(tt)})()}signInAndRetrieveDataWithCredential(Y){return this.signInWithCredential(Y)}signInAnonymously(){return An(this._delegate,N.X(this._delegate))}signInWithCredential(Y){return An(this._delegate,N.Y(this._delegate,Y))}signInWithCustomToken(Y){return An(this._delegate,N.$(this._delegate,Y))}signInWithEmailAndPassword(Y,Re){return An(this._delegate,N.a6(this._delegate,Y,Re))}signInWithEmailLink(Y,Re){return An(this._delegate,N.a9(this._delegate,Y,Re))}signInWithPhoneNumber(Y,Re){return yt(this._delegate,N.s(this._delegate,Y,Re))}signInWithPopup(Y){var Re=this;return(0,c.Z)(function*(){return te(ni(),Re._delegate,"operation-not-supported-in-this-environment"),An(Re._delegate,N.c(Re._delegate,Y,ft))})()}signInWithRedirect(Y){var Re=this;return(0,c.Z)(function*(){return te(ni(),Re._delegate,"operation-not-supported-in-this-environment"),yield Gn(Re._delegate),N.f(Re._delegate,Y,ft)})()}updateCurrentUser(Y){return this._delegate.updateCurrentUser(Y)}verifyPasswordResetCode(Y){return N.a4(this._delegate,Y)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return ce.Persistence=pn,ce})();function xe(ce,Z,Y){let Re=ce;"function"!=typeof ce&&({next:Re,error:Z,complete:Y}=ce);const tt=Re;return{next:kt=>tt(kt&&ee.getOrCreate(kt)),error:Z,complete:Y}}function Ge(ce,Z){const Y=function zs(ce,Z){const Y=Jt();if(!Y)return[];const Re=N.az(Ii,ce,Z);switch(Y.getItem(Re)){case pn.NONE:return[N.L];case pn.LOCAL:return[N.i,N.a];case pn.SESSION:return[N.a];default:return[]}}(ce,Z);if("undefined"!=typeof self&&!Y.includes(N.i)&&Y.push(N.i),"undefined"!=typeof window)for(const Re of[N.b,N.a])Y.includes(Re)||Y.push(Re);return Y.includes(N.L)||Y.push(N.L),Y}class dt{constructor(){this.providerId="phone",this._delegate=new N.P(Lr(G.Z.auth()))}static credential(Z,Y){return N.P.credential(Z,Y)}verifyPhoneNumber(Z,Y){return this._delegate.verifyPhoneNumber(Z,Y)}unwrap(){return this._delegate}}dt.PHONE_SIGN_IN_METHOD=N.P.PHONE_SIGN_IN_METHOD,dt.PROVIDER_ID=N.P.PROVIDER_ID;const Ut=N.ax;class cn{constructor(Z,Y,Re=G.Z.app()){var tt;Ut(null===(tt=Re.options)||void 0===tt?void 0:tt.apiKey,"invalid-api-key",{appName:Re.name}),this._delegate=new N.R(Z,Y,Re.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Kt(ce){ce.INTERNAL.registerComponent(new oe.wA("auth-compat",Z=>{const Y=Z.getProvider("app-compat").getImmediate(),Re=Z.getProvider("auth");return new H(Y,Re)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:N.A.EMAIL_SIGNIN,PASSWORD_RESET:N.A.PASSWORD_RESET,RECOVER_EMAIL:N.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:N.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:N.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:N.A.VERIFY_EMAIL}},EmailAuthProvider:N.M,FacebookAuthProvider:N.N,GithubAuthProvider:N.T,GoogleAuthProvider:N.Q,OAuthProvider:N.U,SAMLAuthProvider:N.V,PhoneAuthProvider:dt,PhoneMultiFactorGenerator:N.m,RecaptchaVerifier:cn,TwitterAuthProvider:N.W,Auth:H,AuthCredential:N.H,Error:de.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),ce.registerVersion("@firebase/auth-compat","0.2.17")}(G.Z)},8306:(ut,Se,L)=>{L.d(Se,{y:()=>W});var c=L(930),G=L(727),N=L(8822),de=L(4671);var oe=L(2416),pe=L(576),Ee=L(2806);let W=(()=>{class Fe{constructor(qe){qe&&(this._subscribe=qe)}lift(qe){const we=new Fe;return we.source=this,we.operator=qe,we}subscribe(qe,we,Ae){const Ke=function Xe(Fe){return Fe&&Fe instanceof c.Lv||function ae(Fe){return Fe&&(0,pe.m)(Fe.next)&&(0,pe.m)(Fe.error)&&(0,pe.m)(Fe.complete)}(Fe)&&(0,G.Nn)(Fe)}(qe)?qe:new c.Hp(qe,we,Ae);return(0,Ee.x)(()=>{const{operator:We,source:Le}=this;Ke.add(We?We.call(Ke,Le):Le?this._subscribe(Ke):this._trySubscribe(Ke))}),Ke}_trySubscribe(qe){try{return this._subscribe(qe)}catch(we){qe.error(we)}}forEach(qe,we){return new(we=q(we))((Ae,Ke)=>{const We=new c.Hp({next:Le=>{try{qe(Le)}catch(Pe){Ke(Pe),We.unsubscribe()}},error:Ke,complete:Ae});this.subscribe(We)})}_subscribe(qe){var we;return null===(we=this.source)||void 0===we?void 0:we.subscribe(qe)}[N.L](){return this}pipe(...qe){return function Ce(Fe){return 0===Fe.length?de.y:1===Fe.length?Fe[0]:function(qe){return Fe.reduce((we,Ae)=>Ae(we),qe)}}(qe)(this)}toPromise(qe){return new(qe=q(qe))((we,Ae)=>{let Ke;this.subscribe(We=>Ke=We,We=>Ae(We),()=>we(Ke))})}}return Fe.create=Ve=>new Fe(Ve),Fe})();function q(Fe){var Ve;return null!==(Ve=null!=Fe?Fe:oe.v.Promise)&&void 0!==Ve?Ve:Promise}},7579:(ut,Se,L)=>{L.d(Se,{x:()=>oe});var c=L(8306),G=L(727);const de=(0,L(3888).d)(Ee=>function(){Ee(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var fe=L(8737),Ce=L(2806);let oe=(()=>{class Ee extends c.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(q){const ae=new pe(this,this);return ae.operator=q,ae}_throwIfClosed(){if(this.closed)throw new de}next(q){(0,Ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ae of this.currentObservers)ae.next(q)}})}error(q){(0,Ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=q;const{observers:ae}=this;for(;ae.length;)ae.shift().error(q)}})}complete(){(0,Ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:q}=this;for(;q.length;)q.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var q;return(null===(q=this.observers)||void 0===q?void 0:q.length)>0}_trySubscribe(q){return this._throwIfClosed(),super._trySubscribe(q)}_subscribe(q){return this._throwIfClosed(),this._checkFinalizedStatuses(q),this._innerSubscribe(q)}_innerSubscribe(q){const{hasError:ae,isStopped:Xe,observers:Fe}=this;return ae||Xe?G.Lc:(this.currentObservers=null,Fe.push(q),new G.w0(()=>{this.currentObservers=null,(0,fe.P)(Fe,q)}))}_checkFinalizedStatuses(q){const{hasError:ae,thrownError:Xe,isStopped:Fe}=this;ae?q.error(Xe):Fe&&q.complete()}asObservable(){const q=new c.y;return q.source=this,q}}return Ee.create=(W,q)=>new pe(W,q),Ee})();class pe extends oe{constructor(W,q){super(),this.destination=W,this.source=q}next(W){var q,ae;null===(ae=null===(q=this.destination)||void 0===q?void 0:q.next)||void 0===ae||ae.call(q,W)}error(W){var q,ae;null===(ae=null===(q=this.destination)||void 0===q?void 0:q.error)||void 0===ae||ae.call(q,W)}complete(){var W,q;null===(q=null===(W=this.destination)||void 0===W?void 0:W.complete)||void 0===q||q.call(W)}_subscribe(W){var q,ae;return null!==(ae=null===(q=this.source)||void 0===q?void 0:q.subscribe(W))&&void 0!==ae?ae:G.Lc}}},930:(ut,Se,L)=>{L.d(Se,{Hp:()=>qe,Lv:()=>ae});var c=L(576),G=L(727),N=L(2416),de=L(7849),fe=L(5032);const Ce=Ee("C",void 0,void 0);function Ee(Le,Pe,Me){return{kind:Le,value:Pe,error:Me}}var W=L(3410),q=L(2806);class ae extends G.w0{constructor(Pe){super(),this.isStopped=!1,Pe?(this.destination=Pe,(0,G.Nn)(Pe)&&Pe.add(this)):this.destination=We}static create(Pe,Me,Je){return new qe(Pe,Me,Je)}next(Pe){this.isStopped?Ke(function pe(Le){return Ee("N",Le,void 0)}(Pe),this):this._next(Pe)}error(Pe){this.isStopped?Ke(function oe(Le){return Ee("E",void 0,Le)}(Pe),this):(this.isStopped=!0,this._error(Pe))}complete(){this.isStopped?Ke(Ce,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Pe){this.destination.next(Pe)}_error(Pe){try{this.destination.error(Pe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Xe=Function.prototype.bind;function Fe(Le,Pe){return Xe.call(Le,Pe)}class Ve{constructor(Pe){this.partialObserver=Pe}next(Pe){const{partialObserver:Me}=this;if(Me.next)try{Me.next(Pe)}catch(Je){we(Je)}}error(Pe){const{partialObserver:Me}=this;if(Me.error)try{Me.error(Pe)}catch(Je){we(Je)}else we(Pe)}complete(){const{partialObserver:Pe}=this;if(Pe.complete)try{Pe.complete()}catch(Me){we(Me)}}}class qe extends ae{constructor(Pe,Me,Je){let re;if(super(),(0,c.m)(Pe)||!Pe)re={next:null!=Pe?Pe:void 0,error:null!=Me?Me:void 0,complete:null!=Je?Je:void 0};else{let _e;this&&N.v.useDeprecatedNextContext?(_e=Object.create(Pe),_e.unsubscribe=()=>this.unsubscribe(),re={next:Pe.next&&Fe(Pe.next,_e),error:Pe.error&&Fe(Pe.error,_e),complete:Pe.complete&&Fe(Pe.complete,_e)}):re=Pe}this.destination=new Ve(re)}}function we(Le){N.v.useDeprecatedSynchronousErrorHandling?(0,q.O)(Le):(0,de.h)(Le)}function Ke(Le,Pe){const{onStoppedNotification:Me}=N.v;Me&&W.z.setTimeout(()=>Me(Le,Pe))}const We={closed:!0,next:fe.Z,error:function Ae(Le){throw Le},complete:fe.Z}},727:(ut,Se,L)=>{L.d(Se,{Lc:()=>Ce,w0:()=>fe,Nn:()=>oe});var c=L(576);const N=(0,L(3888).d)(Ee=>function(q){Ee(this),this.message=q?`${q.length} errors occurred during unsubscription:\n${q.map((ae,Xe)=>`${Xe+1}) ${ae.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=q});var de=L(8737);class fe{constructor(W){this.initialTeardown=W,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let W;if(!this.closed){this.closed=!0;const{_parentage:q}=this;if(q)if(this._parentage=null,Array.isArray(q))for(const Fe of q)Fe.remove(this);else q.remove(this);const{initialTeardown:ae}=this;if((0,c.m)(ae))try{ae()}catch(Fe){W=Fe instanceof N?Fe.errors:[Fe]}const{_finalizers:Xe}=this;if(Xe){this._finalizers=null;for(const Fe of Xe)try{pe(Fe)}catch(Ve){W=null!=W?W:[],Ve instanceof N?W=[...W,...Ve.errors]:W.push(Ve)}}if(W)throw new N(W)}}add(W){var q;if(W&&W!==this)if(this.closed)pe(W);else{if(W instanceof fe){if(W.closed||W._hasParent(this))return;W._addParent(this)}(this._finalizers=null!==(q=this._finalizers)&&void 0!==q?q:[]).push(W)}}_hasParent(W){const{_parentage:q}=this;return q===W||Array.isArray(q)&&q.includes(W)}_addParent(W){const{_parentage:q}=this;this._parentage=Array.isArray(q)?(q.push(W),q):q?[q,W]:W}_removeParent(W){const{_parentage:q}=this;q===W?this._parentage=null:Array.isArray(q)&&(0,de.P)(q,W)}remove(W){const{_finalizers:q}=this;q&&(0,de.P)(q,W),W instanceof fe&&W._removeParent(this)}}fe.EMPTY=(()=>{const Ee=new fe;return Ee.closed=!0,Ee})();const Ce=fe.EMPTY;function oe(Ee){return Ee instanceof fe||Ee&&"closed"in Ee&&(0,c.m)(Ee.remove)&&(0,c.m)(Ee.add)&&(0,c.m)(Ee.unsubscribe)}function pe(Ee){(0,c.m)(Ee)?Ee():Ee.unsubscribe()}},2416:(ut,Se,L)=>{L.d(Se,{v:()=>c});const c={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ut,Se,L)=>{L.d(Se,{E:()=>G});const G=new(L(8306).y)(fe=>fe.complete())},8996:(ut,Se,L)=>{L.d(Se,{D:()=>Pe});var c=L(8421),G=L(5363),N=L(9468),Ce=L(8306),pe=L(2202),Ee=L(576),W=L(9672);function ae(Me,Je){if(!Me)throw new Error("Iterable cannot be null");return new Ce.y(re=>{(0,W.f)(re,Je,()=>{const _e=Me[Symbol.asyncIterator]();(0,W.f)(re,Je,()=>{_e.next().then(Te=>{Te.done?re.complete():re.next(Te.value)})},0,!0)})})}var Xe=L(3670),Fe=L(8239),Ve=L(1144),qe=L(6495),we=L(2206),Ae=L(4532),Ke=L(3260);function Pe(Me,Je){return Je?function Le(Me,Je){if(null!=Me){if((0,Xe.c)(Me))return function de(Me,Je){return(0,c.Xf)(Me).pipe((0,N.R)(Je),(0,G.Q)(Je))}(Me,Je);if((0,Ve.z)(Me))return function oe(Me,Je){return new Ce.y(re=>{let _e=0;return Je.schedule(function(){_e===Me.length?re.complete():(re.next(Me[_e++]),re.closed||this.schedule())})})}(Me,Je);if((0,Fe.t)(Me))return function fe(Me,Je){return(0,c.Xf)(Me).pipe((0,N.R)(Je),(0,G.Q)(Je))}(Me,Je);if((0,we.D)(Me))return ae(Me,Je);if((0,qe.T)(Me))return function q(Me,Je){return new Ce.y(re=>{let _e;return(0,W.f)(re,Je,()=>{_e=Me[pe.h](),(0,W.f)(re,Je,()=>{let Te,J;try{({value:Te,done:J}=_e.next())}catch(se){return void re.error(se)}J?re.complete():re.next(Te)},0,!0)}),()=>(0,Ee.m)(null==_e?void 0:_e.return)&&_e.return()})}(Me,Je);if((0,Ke.L)(Me))return function We(Me,Je){return ae((0,Ke.Q)(Me),Je)}(Me,Je)}throw(0,Ae.z)(Me)}(Me,Je):(0,c.Xf)(Me)}},8421:(ut,Se,L)=>{L.d(Se,{Xf:()=>Xe});var c=L(655),G=L(1144),N=L(8239),de=L(8306),fe=L(3670),Ce=L(2206),oe=L(4532),pe=L(6495),Ee=L(3260),W=L(576),q=L(7849),ae=L(8822);function Xe(Le){if(Le instanceof de.y)return Le;if(null!=Le){if((0,fe.c)(Le))return function Fe(Le){return new de.y(Pe=>{const Me=Le[ae.L]();if((0,W.m)(Me.subscribe))return Me.subscribe(Pe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Le);if((0,G.z)(Le))return function Ve(Le){return new de.y(Pe=>{for(let Me=0;Me<Le.length&&!Pe.closed;Me++)Pe.next(Le[Me]);Pe.complete()})}(Le);if((0,N.t)(Le))return function qe(Le){return new de.y(Pe=>{Le.then(Me=>{Pe.closed||(Pe.next(Me),Pe.complete())},Me=>Pe.error(Me)).then(null,q.h)})}(Le);if((0,Ce.D)(Le))return Ae(Le);if((0,pe.T)(Le))return function we(Le){return new de.y(Pe=>{for(const Me of Le)if(Pe.next(Me),Pe.closed)return;Pe.complete()})}(Le);if((0,Ee.L)(Le))return function Ke(Le){return Ae((0,Ee.Q)(Le))}(Le)}throw(0,oe.z)(Le)}function Ae(Le){return new de.y(Pe=>{(function We(Le,Pe){var Me,Je,re,_e;return(0,c.mG)(this,void 0,void 0,function*(){try{for(Me=(0,c.KL)(Le);!(Je=yield Me.next()).done;)if(Pe.next(Je.value),Pe.closed)return}catch(Te){re={error:Te}}finally{try{Je&&!Je.done&&(_e=Me.return)&&(yield _e.call(Me))}finally{if(re)throw re.error}}Pe.complete()})})(Le,Pe).catch(Me=>Pe.error(Me))})}},6451:(ut,Se,L)=>{L.d(Se,{T:()=>Ce});var c=L(8189),G=L(8421),N=L(515),de=L(3269),fe=L(8996);function Ce(...oe){const pe=(0,de.yG)(oe),Ee=(0,de._6)(oe,1/0),W=oe;return W.length?1===W.length?(0,G.Xf)(W[0]):(0,c.J)(Ee)((0,fe.D)(W,pe)):N.E}},5403:(ut,Se,L)=>{L.d(Se,{x:()=>G});var c=L(930);function G(de,fe,Ce,oe,pe){return new N(de,fe,Ce,oe,pe)}class N extends c.Lv{constructor(fe,Ce,oe,pe,Ee,W){super(fe),this.onFinalize=Ee,this.shouldUnsubscribe=W,this._next=Ce?function(q){try{Ce(q)}catch(ae){fe.error(ae)}}:super._next,this._error=pe?function(q){try{pe(q)}catch(ae){fe.error(ae)}finally{this.unsubscribe()}}:super._error,this._complete=oe?function(){try{oe()}catch(q){fe.error(q)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var fe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Ce}=this;super.unsubscribe(),!Ce&&(null===(fe=this.onFinalize)||void 0===fe||fe.call(this))}}}},4004:(ut,Se,L)=>{L.d(Se,{U:()=>N});var c=L(4482),G=L(5403);function N(de,fe){return(0,c.e)((Ce,oe)=>{let pe=0;Ce.subscribe((0,G.x)(oe,Ee=>{oe.next(de.call(fe,Ee,pe++))}))})}},8189:(ut,Se,L)=>{L.d(Se,{J:()=>N});var c=L(5577),G=L(4671);function N(de=1/0){return(0,c.z)(G.y,de)}},5577:(ut,Se,L)=>{L.d(Se,{z:()=>pe});var c=L(4004),G=L(8421),N=L(4482),de=L(9672),fe=L(5403),oe=L(576);function pe(Ee,W,q=1/0){return(0,oe.m)(W)?pe((ae,Xe)=>(0,c.U)((Fe,Ve)=>W(ae,Fe,Xe,Ve))((0,G.Xf)(Ee(ae,Xe))),q):("number"==typeof W&&(q=W),(0,N.e)((ae,Xe)=>function Ce(Ee,W,q,ae,Xe,Fe,Ve,qe){const we=[];let Ae=0,Ke=0,We=!1;const Le=()=>{We&&!we.length&&!Ae&&W.complete()},Pe=Je=>Ae<ae?Me(Je):we.push(Je),Me=Je=>{Fe&&W.next(Je),Ae++;let re=!1;(0,G.Xf)(q(Je,Ke++)).subscribe((0,fe.x)(W,_e=>{null==Xe||Xe(_e),Fe?Pe(_e):W.next(_e)},()=>{re=!0},void 0,()=>{if(re)try{for(Ae--;we.length&&Ae<ae;){const _e=we.shift();Ve?(0,de.f)(W,Ve,()=>Me(_e)):Me(_e)}Le()}catch(_e){W.error(_e)}}))};return Ee.subscribe((0,fe.x)(W,Pe,()=>{We=!0,Le()})),()=>{null==qe||qe()}}(ae,Xe,Ee,q)))}},5363:(ut,Se,L)=>{L.d(Se,{Q:()=>de});var c=L(9672),G=L(4482),N=L(5403);function de(fe,Ce=0){return(0,G.e)((oe,pe)=>{oe.subscribe((0,N.x)(pe,Ee=>(0,c.f)(pe,fe,()=>pe.next(Ee),Ce),()=>(0,c.f)(pe,fe,()=>pe.complete(),Ce),Ee=>(0,c.f)(pe,fe,()=>pe.error(Ee),Ce)))})}},3099:(ut,Se,L)=>{L.d(Se,{B:()=>Ce});var c=L(8996),G=L(5698),N=L(7579),de=L(930),fe=L(4482);function Ce(pe={}){const{connector:Ee=(()=>new N.x),resetOnError:W=!0,resetOnComplete:q=!0,resetOnRefCountZero:ae=!0}=pe;return Xe=>{let Fe=null,Ve=null,qe=null,we=0,Ae=!1,Ke=!1;const We=()=>{null==Ve||Ve.unsubscribe(),Ve=null},Le=()=>{We(),Fe=qe=null,Ae=Ke=!1},Pe=()=>{const Me=Fe;Le(),null==Me||Me.unsubscribe()};return(0,fe.e)((Me,Je)=>{we++,!Ke&&!Ae&&We();const re=qe=null!=qe?qe:Ee();Je.add(()=>{we--,0===we&&!Ke&&!Ae&&(Ve=oe(Pe,ae))}),re.subscribe(Je),Fe||(Fe=new de.Hp({next:_e=>re.next(_e),error:_e=>{Ke=!0,We(),Ve=oe(Le,W,_e),re.error(_e)},complete:()=>{Ae=!0,We(),Ve=oe(Le,q),re.complete()}}),(0,c.D)(Me).subscribe(Fe))})(Xe)}}function oe(pe,Ee,...W){return!0===Ee?(pe(),null):!1===Ee?null:Ee(...W).pipe((0,G.q)(1)).subscribe(()=>pe())}},9468:(ut,Se,L)=>{L.d(Se,{R:()=>G});var c=L(4482);function G(N,de=0){return(0,c.e)((fe,Ce)=>{Ce.add(N.schedule(()=>fe.subscribe(Ce),de))})}},5698:(ut,Se,L)=>{L.d(Se,{q:()=>de});var c=L(515),G=L(4482),N=L(5403);function de(fe){return fe<=0?()=>c.E:(0,G.e)((Ce,oe)=>{let pe=0;Ce.subscribe((0,N.x)(oe,Ee=>{++pe<=fe&&(oe.next(Ee),fe<=pe&&oe.complete())}))})}},8505:(ut,Se,L)=>{L.d(Se,{b:()=>fe});var c=L(576),G=L(4482),N=L(5403),de=L(4671);function fe(Ce,oe,pe){const Ee=(0,c.m)(Ce)||oe||pe?{next:Ce,error:oe,complete:pe}:Ce;return Ee?(0,G.e)((W,q)=>{var ae;null===(ae=Ee.subscribe)||void 0===ae||ae.call(Ee);let Xe=!0;W.subscribe((0,N.x)(q,Fe=>{var Ve;null===(Ve=Ee.next)||void 0===Ve||Ve.call(Ee,Fe),q.next(Fe)},()=>{var Fe;Xe=!1,null===(Fe=Ee.complete)||void 0===Fe||Fe.call(Ee),q.complete()},Fe=>{var Ve;Xe=!1,null===(Ve=Ee.error)||void 0===Ve||Ve.call(Ee,Fe),q.error(Fe)},()=>{var Fe,Ve;Xe&&(null===(Fe=Ee.unsubscribe)||void 0===Fe||Fe.call(Ee)),null===(Ve=Ee.finalize)||void 0===Ve||Ve.call(Ee)}))}):de.y}},4408:(ut,Se,L)=>{L.d(Se,{o:()=>fe});var c=L(727);class G extends c.w0{constructor(oe,pe){super()}schedule(oe,pe=0){return this}}const N={setInterval(Ce,oe,...pe){const{delegate:Ee}=N;return(null==Ee?void 0:Ee.setInterval)?Ee.setInterval(Ce,oe,...pe):setInterval(Ce,oe,...pe)},clearInterval(Ce){const{delegate:oe}=N;return((null==oe?void 0:oe.clearInterval)||clearInterval)(Ce)},delegate:void 0};var de=L(8737);class fe extends G{constructor(oe,pe){super(oe,pe),this.scheduler=oe,this.work=pe,this.pending=!1}schedule(oe,pe=0){if(this.closed)return this;this.state=oe;const Ee=this.id,W=this.scheduler;return null!=Ee&&(this.id=this.recycleAsyncId(W,Ee,pe)),this.pending=!0,this.delay=pe,this.id=this.id||this.requestAsyncId(W,this.id,pe),this}requestAsyncId(oe,pe,Ee=0){return N.setInterval(oe.flush.bind(oe,this),Ee)}recycleAsyncId(oe,pe,Ee=0){if(null!=Ee&&this.delay===Ee&&!1===this.pending)return pe;N.clearInterval(pe)}execute(oe,pe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ee=this._execute(oe,pe);if(Ee)return Ee;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(oe,pe){let W,Ee=!1;try{this.work(oe)}catch(q){Ee=!0,W=q||new Error("Scheduled action threw falsy error")}if(Ee)return this.unsubscribe(),W}unsubscribe(){if(!this.closed){const{id:oe,scheduler:pe}=this,{actions:Ee}=pe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,de.P)(Ee,this),null!=oe&&(this.id=this.recycleAsyncId(pe,oe,null)),this.delay=null,super.unsubscribe()}}}},7565:(ut,Se,L)=>{L.d(Se,{v:()=>N});var c=L(6063);class G{constructor(fe,Ce=G.now){this.schedulerActionCtor=fe,this.now=Ce}schedule(fe,Ce=0,oe){return new this.schedulerActionCtor(this,fe).schedule(oe,Ce)}}G.now=c.l.now;class N extends G{constructor(fe,Ce=G.now){super(fe,Ce),this.actions=[],this._active=!1,this._scheduled=void 0}flush(fe){const{actions:Ce}=this;if(this._active)return void Ce.push(fe);let oe;this._active=!0;do{if(oe=fe.execute(fe.state,fe.delay))break}while(fe=Ce.shift());if(this._active=!1,oe){for(;fe=Ce.shift();)fe.unsubscribe();throw oe}}}},4986:(ut,Se,L)=>{L.d(Se,{z:()=>N,P:()=>de});var c=L(4408);const N=new(L(7565).v)(c.o),de=N},6063:(ut,Se,L)=>{L.d(Se,{l:()=>c});const c={now:()=>(c.delegate||Date).now(),delegate:void 0}},3410:(ut,Se,L)=>{L.d(Se,{z:()=>c});const c={setTimeout(G,N,...de){const{delegate:fe}=c;return(null==fe?void 0:fe.setTimeout)?fe.setTimeout(G,N,...de):setTimeout(G,N,...de)},clearTimeout(G){const{delegate:N}=c;return((null==N?void 0:N.clearTimeout)||clearTimeout)(G)},delegate:void 0}},2202:(ut,Se,L)=>{L.d(Se,{h:()=>G});const G=function c(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ut,Se,L)=>{L.d(Se,{L:()=>c});const c="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(ut,Se,L)=>{L.d(Se,{jO:()=>de,yG:()=>fe,_6:()=>Ce});var c=L(576),G=L(3532);function N(oe){return oe[oe.length-1]}function de(oe){return(0,c.m)(N(oe))?oe.pop():void 0}function fe(oe){return(0,G.K)(N(oe))?oe.pop():void 0}function Ce(oe,pe){return"number"==typeof N(oe)?oe.pop():pe}},8737:(ut,Se,L)=>{function c(G,N){if(G){const de=G.indexOf(N);0<=de&&G.splice(de,1)}}L.d(Se,{P:()=>c})},3888:(ut,Se,L)=>{function c(G){const de=G(fe=>{Error.call(fe),fe.stack=(new Error).stack});return de.prototype=Object.create(Error.prototype),de.prototype.constructor=de,de}L.d(Se,{d:()=>c})},2806:(ut,Se,L)=>{L.d(Se,{x:()=>N,O:()=>de});var c=L(2416);let G=null;function N(fe){if(c.v.useDeprecatedSynchronousErrorHandling){const Ce=!G;if(Ce&&(G={errorThrown:!1,error:null}),fe(),Ce){const{errorThrown:oe,error:pe}=G;if(G=null,oe)throw pe}}else fe()}function de(fe){c.v.useDeprecatedSynchronousErrorHandling&&G&&(G.errorThrown=!0,G.error=fe)}},9672:(ut,Se,L)=>{function c(G,N,de,fe=0,Ce=!1){const oe=N.schedule(function(){de(),Ce?G.add(this.schedule(null,fe)):this.unsubscribe()},fe);if(G.add(oe),!Ce)return oe}L.d(Se,{f:()=>c})},4671:(ut,Se,L)=>{function c(G){return G}L.d(Se,{y:()=>c})},1144:(ut,Se,L)=>{L.d(Se,{z:()=>c});const c=G=>G&&"number"==typeof G.length&&"function"!=typeof G},2206:(ut,Se,L)=>{L.d(Se,{D:()=>G});var c=L(576);function G(N){return Symbol.asyncIterator&&(0,c.m)(null==N?void 0:N[Symbol.asyncIterator])}},576:(ut,Se,L)=>{function c(G){return"function"==typeof G}L.d(Se,{m:()=>c})},3670:(ut,Se,L)=>{L.d(Se,{c:()=>N});var c=L(8822),G=L(576);function N(de){return(0,G.m)(de[c.L])}},6495:(ut,Se,L)=>{L.d(Se,{T:()=>N});var c=L(2202),G=L(576);function N(de){return(0,G.m)(null==de?void 0:de[c.h])}},8239:(ut,Se,L)=>{L.d(Se,{t:()=>G});var c=L(576);function G(N){return(0,c.m)(null==N?void 0:N.then)}},3260:(ut,Se,L)=>{L.d(Se,{Q:()=>N,L:()=>de});var c=L(655),G=L(576);function N(fe){return(0,c.FC)(this,arguments,function*(){const oe=fe.getReader();try{for(;;){const{value:pe,done:Ee}=yield(0,c.qq)(oe.read());if(Ee)return yield(0,c.qq)(void 0);yield yield(0,c.qq)(pe)}}finally{oe.releaseLock()}})}function de(fe){return(0,G.m)(null==fe?void 0:fe.getReader)}},3532:(ut,Se,L)=>{L.d(Se,{K:()=>G});var c=L(576);function G(N){return N&&(0,c.m)(N.schedule)}},4482:(ut,Se,L)=>{L.d(Se,{A:()=>G,e:()=>N});var c=L(576);function G(de){return(0,c.m)(null==de?void 0:de.lift)}function N(de){return fe=>{if(G(fe))return fe.lift(function(Ce){try{return de(Ce,this)}catch(oe){this.error(oe)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(ut,Se,L)=>{function c(){}L.d(Se,{Z:()=>c})},7849:(ut,Se,L)=>{L.d(Se,{h:()=>N});var c=L(2416),G=L(3410);function N(de){G.z.setTimeout(()=>{const{onUnhandledError:fe}=c.v;if(!fe)throw de;fe(de)})}},4532:(ut,Se,L)=>{function c(G){return new TypeError(`You provided ${null!==G&&"object"==typeof G?"an invalid object":`'${G}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}L.d(Se,{z:()=>c})},655:(ut,Se,L)=>{function de(J,se){var ue={};for(var De in J)Object.prototype.hasOwnProperty.call(J,De)&&se.indexOf(De)<0&&(ue[De]=J[De]);if(null!=J&&"function"==typeof Object.getOwnPropertySymbols){var me=0;for(De=Object.getOwnPropertySymbols(J);me<De.length;me++)se.indexOf(De[me])<0&&Object.prototype.propertyIsEnumerable.call(J,De[me])&&(ue[De[me]]=J[De[me]])}return ue}function pe(J,se,ue,De){return new(ue||(ue=Promise))(function(He,wt){function ln(Tn){try{st(De.next(Tn))}catch(ti){wt(ti)}}function Yt(Tn){try{st(De.throw(Tn))}catch(ti){wt(ti)}}function st(Tn){Tn.done?He(Tn.value):function me(He){return He instanceof ue?He:new ue(function(wt){wt(He)})}(Tn.value).then(ln,Yt)}st((De=De.apply(J,se||[])).next())})}function we(J){return this instanceof we?(this.v=J,this):new we(J)}function Ae(J,se,ue){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var me,De=ue.apply(J,se||[]),He=[];return me={},wt("next"),wt("throw"),wt("return"),me[Symbol.asyncIterator]=function(){return this},me;function wt(In){De[In]&&(me[In]=function(fn){return new Promise(function(Zt,un){He.push([In,fn,Zt,un])>1||ln(In,fn)})})}function ln(In,fn){try{!function Yt(In){In.value instanceof we?Promise.resolve(In.value.v).then(st,Tn):ti(He[0][2],In)}(De[In](fn))}catch(Zt){ti(He[0][3],Zt)}}function st(In){ln("next",In)}function Tn(In){ln("throw",In)}function ti(In,fn){In(fn),He.shift(),He.length&&ln(He[0][0],He[0][1])}}function We(J){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ue,se=J[Symbol.asyncIterator];return se?se.call(J):(J=function ae(J){var se="function"==typeof Symbol&&Symbol.iterator,ue=se&&J[se],De=0;if(ue)return ue.call(J);if(J&&"number"==typeof J.length)return{next:function(){return J&&De>=J.length&&(J=void 0),{value:J&&J[De++],done:!J}}};throw new TypeError(se?"Object is not iterable.":"Symbol.iterator is not defined.")}(J),ue={},De("next"),De("throw"),De("return"),ue[Symbol.asyncIterator]=function(){return this},ue);function De(He){ue[He]=J[He]&&function(wt){return new Promise(function(ln,Yt){!function me(He,wt,ln,Yt){Promise.resolve(Yt).then(function(st){He({value:st,done:ln})},wt)}(ln,Yt,(wt=J[He](wt)).done,wt.value)})}}}L.d(Se,{_T:()=>de,mG:()=>pe,qq:()=>we,FC:()=>Ae,KL:()=>We})},5e3:(ut,Se,L)=>{L.d(Se,{deG:()=>yg,tb:()=>om,AFp:()=>Px,ip1:()=>Z0,CZH:()=>Yn,hGG:()=>pw,z2F:()=>nv,sBO:()=>JA,Sil:()=>qA,_Vd:()=>V_,EJc:()=>GA,SBq:()=>Nh,qLn:()=>Rg,vpe:()=>Ne,tBr:()=>gr,XFs:()=>Ct,OlP:()=>li,zs3:()=>va,ZZ4:()=>dw,aQg:()=>fw,soG:()=>J0,YKP:()=>R0,h0i:()=>ic,PXZ:()=>Bx,R0b:()=>Lo,FiY:()=>Gr,Lbi:()=>sm,g9A:()=>qh,n_E:()=>Qp,Qsj:()=>nc,FYo:()=>M0,JOm:()=>el,q3G:()=>yn,tp0:()=>la,Rgc:()=>Xp,dDg:()=>uo,q4F:()=>I0,GfV:()=>Fh,s_b:()=>Jp,ifc:()=>Jt,eFA:()=>um,G48:()=>Mi,Gpc:()=>q,f3M:()=>It,X6Q:()=>XA,_c5:()=>Cr,VLi:()=>Fx,c2e:()=>X0,zSh:()=>_p,wAp:()=>At,vHH:()=>Ve,EiD:()=>rp,mCW:()=>g,qzn:()=>fa,JVY:()=>Xf,pB0:()=>tp,eBb:()=>xg,L6k:()=>Jf,LAX:()=>ep,cg1:()=>kp,kL8:()=>qD,yhl:()=>Xa,dqk:()=>en,sIi:()=>Kl,CqO:()=>Vb,QGY:()=>bh,F4k:()=>Bb,RDi:()=>pu,AaK:()=>pe,z3N:()=>oo,qOj:()=>_b,TTD:()=>El,_Bn:()=>Ph,xp6:()=>zT,uIk:()=>Fo,ekj:()=>$b,Suo:()=>Y_,Xpm:()=>dt,lG2:()=>Re,Yz7:()=>fn,cJS:()=>un,oAB:()=>ce,Yjl:()=>tt,Y36:()=>wp,_UZ:()=>Pb,GkF:()=>Lb,BQk:()=>Fb,ynx:()=>Nb,qZA:()=>Cp,TgZ:()=>u_,EpF:()=>_D,n5z:()=>na,Ikx:()=>Dh,LFG:()=>Ue,$8M:()=>qn,$Z:()=>gD,NdJ:()=>Ca,CRH:()=>j0,kcU:()=>ty,O4$:()=>ey,oxw:()=>wD,Hsn:()=>Hb,F$t:()=>CD,Q6J:()=>Rb,VKq:()=>nd,iGM:()=>H0,MAs:()=>sD,CHM:()=>kl,LSH:()=>rh,B6R:()=>Ut,Udp:()=>zb,WFA:()=>d_,d8E:()=>Ap,YNc:()=>Cb,_uU:()=>Kb,Oqu:()=>Qb,hij:()=>Sp,AsE:()=>Eh,HOy:()=>Mp,Gf:()=>Us});var c=L(7579),G=L(727),N=L(8306),de=L(6451),fe=L(3099);function Ce(o){for(let a in o)if(o[a]===Ce)return a;throw Error("Could not find renamed property on target object.")}function oe(o,a){for(const u in a)a.hasOwnProperty(u)&&!o.hasOwnProperty(u)&&(o[u]=a[u])}function pe(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(pe).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const a=o.toString();if(null==a)return""+a;const u=a.indexOf("\n");return-1===u?a:a.substring(0,u)}function Ee(o,a){return null==o||""===o?null===a?"":a:null==a||""===a?o:o+" "+a}const W=Ce({__forward_ref__:Ce});function q(o){return o.__forward_ref__=q,o.toString=function(){return pe(this())},o}function ae(o){return Xe(o)?o():o}function Xe(o){return"function"==typeof o&&o.hasOwnProperty(W)&&o.__forward_ref__===q}class Ve extends Error{constructor(a,u){super(function qe(o,a){return`NG0${Math.abs(o)}${a?": "+a:""}`}(a,u)),this.code=a}}function we(o){return"string"==typeof o?o:null==o?"":String(o)}function Ae(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():we(o)}function Pe(o,a){const u=a?` in ${a}`:"";throw new Ve(-201,`No provider for ${Ae(o)} found${u}`)}function Yt(o,a){null==o&&function st(o,a,u,h){throw new Error(`ASSERTION ERROR: ${o}`+(null==h?"":` [Expected=> ${u} ${h} ${a} <=Actual]`))}(a,o,null,"!=")}function fn(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function un(o){return{providers:o.providers||[],imports:o.imports||[]}}function zn(o){return as(o,Fr)||as(o,ni)}function as(o,a){return o.hasOwnProperty(a)?o[a]:null}function ws(o){return o&&(o.hasOwnProperty(ls)||o.hasOwnProperty(Cs))?o[ls]:null}const Fr=Ce({\u0275prov:Ce}),ls=Ce({\u0275inj:Ce}),ni=Ce({ngInjectableDef:Ce}),Cs=Ce({ngInjectorDef:Ce});var Ct=(()=>((Ct=Ct||{})[Ct.Default=0]="Default",Ct[Ct.Host=1]="Host",Ct[Ct.Self=2]="Self",Ct[Ct.SkipSelf=4]="SkipSelf",Ct[Ct.Optional=8]="Optional",Ct))();let cr;function pn(o){const a=cr;return cr=o,a}function Yi(o,a,u){const h=zn(o);return h&&"root"==h.providedIn?void 0===h.value?h.value=h.factory():h.value:u&Ct.Optional?null:void 0!==a?a:void Pe(pe(o),"Injector")}function ur(o){return{toString:o}.toString()}var Gn=(()=>((Gn=Gn||{})[Gn.OnPush=0]="OnPush",Gn[Gn.Default=1]="Default",Gn))(),Jt=(()=>{return(o=Jt||(Jt={}))[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",Jt;var o})();const vt="undefined"!=typeof globalThis&&globalThis,ft="undefined"!=typeof window&&window,Lr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,en=vt||"undefined"!=typeof global&&global||ft||Lr,An={},yt=[],K=Ce({\u0275cmp:Ce}),z=Ce({\u0275dir:Ce}),ee=Ce({\u0275pipe:Ce}),te=Ce({\u0275mod:Ce}),H=Ce({\u0275fac:Ce}),xe=Ce({__NG_ELEMENT_ID__:Ce});let Ge=0;function dt(o){return ur(()=>{const u={},h={type:o.type,providersResolver:null,decls:o.decls,vars:o.vars,factory:null,template:o.template||null,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:o.exportAs||null,onPush:o.changeDetection===Gn.OnPush,directiveDefs:null,pipeDefs:null,selectors:o.selectors||yt,viewQuery:o.viewQuery||null,features:o.features||null,data:o.data||{},encapsulation:o.encapsulation||Jt.Emulated,id:"c",styles:o.styles||yt,_:null,setInput:null,schemas:o.schemas||null,tView:null},f=o.directives,m=o.features,y=o.pipes;return h.id+=Ge++,h.inputs=Y(o.inputs,u),h.outputs=Y(o.outputs),m&&m.forEach(C=>C(h)),h.directiveDefs=f?()=>("function"==typeof f?f():f).map(cn):null,h.pipeDefs=y?()=>("function"==typeof y?y():y).map(kn):null,h})}function Ut(o,a,u){const h=o.\u0275cmp;h.directiveDefs=()=>a.map(cn),h.pipeDefs=()=>u.map(kn)}function cn(o){return gt(o)||function kt(o){return o[z]||null}(o)}function kn(o){return function sn(o){return o[ee]||null}(o)}const Kt={};function ce(o){return ur(()=>{const a={type:o.type,bootstrap:o.bootstrap||yt,declarations:o.declarations||yt,imports:o.imports||yt,exports:o.exports||yt,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null};return null!=o.id&&(Kt[o.id]=o.type),a})}function Y(o,a){if(null==o)return An;const u={};for(const h in o)if(o.hasOwnProperty(h)){let f=o[h],m=f;Array.isArray(f)&&(m=f[1],f=f[0]),u[f]=h,a&&(a[f]=m)}return u}const Re=dt;function tt(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,onDestroy:o.type.prototype.ngOnDestroy||null}}function gt(o){return o[K]||null}function Qt(o,a){const u=o[te]||null;if(!u&&!0===a)throw new Error(`Type ${pe(o)} does not have '\u0275mod' property.`);return u}function Mr(o){return Array.isArray(o)&&"object"==typeof o[1]}function hr(o){return Array.isArray(o)&&!0===o[1]}function Td(o){return 0!=(8&o.flags)}function gc(o){return 2==(2&o.flags)}function yo(o){return 1==(1&o.flags)}function Vr(o){return null!==o.template}function Id(o){return 0!=(512&o[2])}function Ur(o,a){return o.hasOwnProperty(H)?o[H]:null}class La{constructor(a,u,h){this.previousValue=a,this.currentValue=u,this.firstChange=h}isFirstChange(){return this.firstChange}}function El(){return Dl}function Dl(o){return o.type.prototype.ngOnChanges&&(o.setInput=mg),Lf}function Lf(){const o=Nd(this),a=null==o?void 0:o.current;if(a){const u=o.previous;if(u===An)o.previous=a;else for(let h in a)u[h]=a[h];o.current=null,this.ngOnChanges(a)}}function mg(o,a,u,h){const f=Nd(o)||function Zs(o,a){return o[Jn]=a}(o,{previous:An,current:null}),m=f.current||(f.current={}),y=f.previous,C=this.declaredInputs[u],x=y[C];m[C]=new La(x&&x.currentValue,a,y===An),o[h]=a}El.ngInherit=!0;const Jn="__ngSimpleChanges__";function Nd(o){return o[Jn]||null}let bc;function pu(o){bc=o}function Vn(o){return!!o.listen}const xl={createRenderer:(o,a)=>function Ks(){return void 0!==bc?bc:"undefined"!=typeof document?document:void 0}()};function On(o){for(;Array.isArray(o);)o=o[0];return o}function $o(o,a){return On(a[o])}function Vi(o,a){return On(a[o.index])}function ri(o,a){return o.data[a]}function Ui(o,a){const u=a[o];return Mr(u)?u:u[0]}function Ba(o){return 4==(4&o[2])}function Ds(o){return 128==(128&o[2])}function Tr(o,a){return null==a?null:o[a]}function Co(o){o[18]=0}function Eo(o,a){o[5]+=a;let u=o,h=o[3];for(;null!==h&&(1===a&&1===u[5]||-1===a&&0===u[5]);)h[5]+=a,u=h,h=h[3]}const Et={lFrame:Yo(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function _u(){return Et.bindingsEnabled}function Oe(){return Et.lFrame.lView}function tn(){return Et.lFrame.tView}function kl(o){return Et.lFrame.contextLView=o,o[8]}function ei(){let o=Do();for(;null!==o&&64===o.type;)o=o.parent;return o}function Do(){return Et.lFrame.currentTNode}function fr(o,a){const u=Et.lFrame;u.currentTNode=o,u.isParent=a}function vu(){return Et.lFrame.isParent}function yu(){Et.lFrame.isParent=!1}function Ol(){return Et.isInCheckNoChangesMode}function Va(o){Et.isInCheckNoChangesMode=o}function ds(){return Et.lFrame.bindingIndex}function xs(){return Et.lFrame.bindingIndex++}function Xs(o){const a=Et.lFrame,u=a.bindingIndex;return a.bindingIndex=a.bindingIndex+o,u}function Nl(o,a){const u=Et.lFrame;u.bindingIndex=u.bindingRootIndex=o,qo(a)}function qo(o){Et.lFrame.currentDirectiveIndex=o}function Ec(o){const a=Et.lFrame.currentDirectiveIndex;return-1===a?null:o[a]}function Fl(){return Et.lFrame.currentQueryIndex}function wu(o){Et.lFrame.currentQueryIndex=o}function gg(o){const a=o[1];return 2===a.type?a.declTNode:1===a.type?o[6]:null}function Dc(o,a,u){if(u&Ct.SkipSelf){let f=a,m=o;for(;!(f=f.parent,null!==f||u&Ct.Host||(f=gg(m),null===f||(m=m[15],10&f.type))););if(null===f)return!1;a=f,o=m}const h=Et.lFrame=Cu();return h.currentTNode=a,h.lView=o,!0}function Wo(o){const a=Cu(),u=o[1];Et.lFrame=a,a.currentTNode=u.firstChild,a.lView=o,a.tView=u,a.contextLView=o,a.bindingIndex=u.bindingStartIndex,a.inI18n=!1}function Cu(){const o=Et.lFrame,a=null===o?null:o.child;return null===a?Yo(o):a}function Yo(o){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=a),a}function zd(){const o=Et.lFrame;return Et.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const Vf=zd;function Ua(){const o=zd();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function Hi(){return Et.lFrame.selectedIndex}function Js(o){Et.lFrame.selectedIndex=o}function si(){const o=Et.lFrame;return ri(o.tView,o.selectedIndex)}function ey(){Et.lFrame.currentNamespace="svg"}function ty(){!function ny(){Et.lFrame.currentNamespace=null}()}function Ll(o,a){for(let u=a.directiveStart,h=a.directiveEnd;u<h;u++){const m=o.data[u].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:C,ngAfterViewInit:x,ngAfterViewChecked:T,ngOnDestroy:R}=m;y&&(o.contentHooks||(o.contentHooks=[])).push(-u,y),C&&((o.contentHooks||(o.contentHooks=[])).push(u,C),(o.contentCheckHooks||(o.contentCheckHooks=[])).push(u,C)),x&&(o.viewHooks||(o.viewHooks=[])).push(-u,x),T&&((o.viewHooks||(o.viewHooks=[])).push(u,T),(o.viewCheckHooks||(o.viewCheckHooks=[])).push(u,T)),null!=R&&(o.destroyHooks||(o.destroyHooks=[])).push(u,R)}}function eo(o,a,u){ji(o,a,3,u)}function Bl(o,a,u,h){(3&o[2])===u&&ji(o,a,u,h)}function xc(o,a){let u=o[2];(3&u)===a&&(u&=2047,u+=1,o[2]=u)}function ji(o,a,u,h){const m=null!=h?h:-1,y=a.length-1;let C=0;for(let x=void 0!==h?65535&o[18]:0;x<y;x++)if("number"==typeof a[x+1]){if(C=a[x],null!=h&&C>=h)break}else a[x]<0&&(o[18]+=65536),(C<m||-1==m)&&(jf(o,u,a,x),o[18]=(4294901760&o[18])+x+2),x++}function jf(o,a,u,h){const f=u[h]<0,m=u[h+1],C=o[f?-u[h]:u[h]];if(f){if(o[2]>>11<o[18]>>16&&(3&o[2])===a){o[2]+=2048;try{m.call(C)}finally{}}}else try{m.call(C)}finally{}}class Ha{constructor(a,u,h){this.factory=a,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=h}}function Ye(o,a,u){const h=Vn(o);let f=0;for(;f<u.length;){const m=u[f];if("number"==typeof m){if(0!==m)break;f++;const y=u[f++],C=u[f++],x=u[f++];h?o.setAttribute(a,C,x,y):a.setAttributeNS(y,C,x)}else{const y=m,C=u[++f];Oi(y)?h&&o.setProperty(a,y,C):h?o.setAttribute(a,y,C):a.setAttribute(y,C),f++}}return f}function Tt(o){return 3===o||4===o||6===o}function Oi(o){return 64===o.charCodeAt(0)}function oi(o,a){if(null!==a&&0!==a.length)if(null===o||0===o.length)o=a.slice();else{let u=-1;for(let h=0;h<a.length;h++){const f=a[h];"number"==typeof f?u=f:0===u||Eu(o,u,f,null,-1===u||2===u?a[++h]:null)}}return o}function Eu(o,a,u,h,f){let m=0,y=o.length;if(-1===a)y=-1;else for(;m<o.length;){const C=o[m++];if("number"==typeof C){if(C===a){y=-1;break}if(C>a){y=m-1;break}}}for(;m<o.length;){const C=o[m];if("number"==typeof C)break;if(C===u){if(null===h)return void(null!==f&&(o[m+1]=f));if(h===o[m+1])return void(o[m+2]=f)}m++,null!==h&&m++,null!==f&&m++}-1!==y&&(o.splice(y,0,a),m=y+1),o.splice(m++,0,u),null!==h&&o.splice(m++,0,h),null!==f&&o.splice(m++,0,f)}function Ga(o){return-1!==o}function za(o){return 32767&o}function Ko(o,a){let u=function ai(o){return o>>16}(o),h=a;for(;u>0;)h=h[15],u--;return h}let Qo=!0;function Ts(o){const a=Qo;return Qo=o,a}let Sc=0;function _n(o,a){const u=to(o,a);if(-1!==u)return u;const h=a[1];h.firstCreatePass&&(o.injectorIndex=a.length,Mc(h.data,o),Mc(a,null),Mc(h.blueprint,null));const f=Xo(o,a),m=o.injectorIndex;if(Ga(f)){const y=za(f),C=Ko(f,a),x=C[1].data;for(let T=0;T<8;T++)a[m+T]=C[y+T]|x[y+T]}return a[m+8]=f,m}function Mc(o,a){o.push(0,0,0,0,0,0,0,0,a)}function to(o,a){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===a[o.injectorIndex+8]?-1:o.injectorIndex}function Xo(o,a){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let u=0,h=null,f=a;for(;null!==f;){const m=f[1],y=m.type;if(h=2===y?m.declTNode:1===y?f[6]:null,null===h)return-1;if(u++,f=f[15],-1!==h.injectorIndex)return h.injectorIndex|u<<16}return-1}function Ir(o,a,u){!function Qd(o,a,u){let h;"string"==typeof u?h=u.charCodeAt(0)||0:u.hasOwnProperty(xe)&&(h=u[xe]),null==h&&(h=u[xe]=Sc++);const f=255&h;a.data[o+(f>>5)]|=1<<f}(o,a,u)}function no(o,a,u){if(u&Ct.Optional)return o;Pe(a,"NodeInjector")}function Jo(o,a,u,h){if(u&Ct.Optional&&void 0===h&&(h=null),0==(u&(Ct.Self|Ct.Host))){const f=o[9],m=pn(void 0);try{return f?f.get(a,h,u&Ct.Optional):Yi(a,h,u&Ct.Optional)}finally{pn(m)}}return no(h,a,u)}function $a(o,a,u,h=Ct.Default,f){if(null!==o){const m=function Mo(o){if("string"==typeof o)return o.charCodeAt(0)||0;const a=o.hasOwnProperty(xe)?o[xe]:void 0;return"number"==typeof a?a>=0?255&a:qa:a}(u);if("function"==typeof m){if(!Dc(a,o,h))return h&Ct.Host?no(f,u,h):Jo(a,u,h,f);try{const y=m(h);if(null!=y||h&Ct.Optional)return y;Pe(u)}finally{Vf()}}else if("number"==typeof m){let y=null,C=to(o,a),x=-1,T=h&Ct.Host?a[16][6]:null;for((-1===C||h&Ct.SkipSelf)&&(x=-1===C?Xo(o,a):a[C+8],-1!==x&&Qn(h,!1)?(y=a[1],C=za(x),a=Ko(x,a)):C=-1);-1!==C;){const R=a[1];if(Hr(m,C,R.data)){const V=ea(C,a,u,y,h,T);if(V!==xo)return V}x=a[C+8],-1!==x&&Qn(h,a[1].data[C+8]===T)&&Hr(m,C,a)?(y=R,C=za(x),a=Ko(x,a)):C=-1}}}return Jo(a,u,h,f)}const xo={};function qa(){return new ta(ei(),Oe())}function ea(o,a,u,h,f,m){const y=a[1],C=y.data[o+8],R=Is(C,y,u,null==h?gc(C)&&Qo:h!=y&&0!=(3&C.type),f&Ct.Host&&m===C);return null!==R?So(a,y,R,C):xo}function Is(o,a,u,h,f){const m=o.providerIndexes,y=a.data,C=1048575&m,x=o.directiveStart,R=m>>20,$=f?C+R:o.directiveEnd;for(let ne=h?C:C+R;ne<$;ne++){const Ie=y[ne];if(ne<x&&u===Ie||ne>=x&&Ie.type===u)return ne}if(f){const ne=y[x];if(ne&&Vr(ne)&&ne.type===u)return x}return null}function So(o,a,u,h){let f=o[u];const m=a.data;if(function qd(o){return o instanceof Ha}(f)){const y=f;y.resolving&&function Ke(o,a){const u=a?`. Dependency path: ${a.join(" > ")} > ${o}`:"";throw new Ve(-200,`Circular dependency in DI detected for ${o}${u}`)}(Ae(m[u]));const C=Ts(y.canSeeViewProviders);y.resolving=!0;const x=y.injectImpl?pn(y.injectImpl):null;Dc(o,h,Ct.Default);try{f=o[u]=y.factory(void 0,m,o,h),a.firstCreatePass&&u>=h.directiveStart&&function _g(o,a,u){const{ngOnChanges:h,ngOnInit:f,ngDoCheck:m}=a.type.prototype;if(h){const y=Dl(a);(u.preOrderHooks||(u.preOrderHooks=[])).push(o,y),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(o,y)}f&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-o,f),m&&((u.preOrderHooks||(u.preOrderHooks=[])).push(o,m),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(o,m))}(u,m[u],a)}finally{null!==x&&pn(x),Ts(C),y.resolving=!1,Vf()}}return f}function Hr(o,a,u){return!!(u[a+(o>>5)]&1<<o)}function Qn(o,a){return!(o&Ct.Self||o&Ct.Host&&a)}class ta{constructor(a,u){this._tNode=a,this._lView=u}get(a,u,h){return $a(this._tNode,this._lView,a,h,u)}}function na(o){return ur(()=>{const a=o.prototype.constructor,u=a[H]||$n(a),h=Object.prototype;let f=Object.getPrototypeOf(o.prototype).constructor;for(;f&&f!==h;){const m=f[H]||$n(f);if(m&&m!==u)return m;f=Object.getPrototypeOf(f)}return m=>new m})}function $n(o){return Xe(o)?()=>{const a=$n(ae(o));return a&&a()}:Ur(o)}function qn(o){return function Gi(o,a){if("class"===a)return o.classes;if("style"===a)return o.styles;const u=o.attrs;if(u){const h=u.length;let f=0;for(;f<h;){const m=u[f];if(Tt(m))break;if(0===m)f+=2;else if("number"==typeof m)for(f++;f<h&&"string"==typeof u[f];)f++;else{if(m===a)return u[f+1];f+=2}}}return null}(ei(),o)}const To="__parameters__";function Xn(o,a,u){return ur(()=>{const h=function As(o){return function(...u){if(o){const h=o(...u);for(const f in h)this[f]=h[f]}}}(a);function f(...m){if(this instanceof f)return h.apply(this,m),this;const y=new f(...m);return C.annotation=y,C;function C(x,T,R){const V=x.hasOwnProperty(To)?x[To]:Object.defineProperty(x,To,{value:[]})[To];for(;V.length<=R;)V.push(null);return(V[R]=V[R]||[]).push(y),x}}return u&&(f.prototype=Object.create(u.prototype)),f.prototype.ngMetadataName=o,f.annotationCls=f,f})}class li{constructor(a,u){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=fn({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}toString(){return`InjectionToken ${this._desc}`}}const yg=new li("AnalyzeForEntryComponents");function pr(o,a){void 0===a&&(a=o);for(let u=0;u<o.length;u++){let h=o[u];Array.isArray(h)?(a===o&&(a=o.slice(0,u)),pr(h,a)):a!==o&&a.push(h)}return a}function mr(o,a){o.forEach(u=>Array.isArray(u)?mr(u,a):a(u))}function Gl(o,a,u){a>=o.length?o.push(u):o.splice(a,0,u)}function zl(o,a){return a>=o.length-1?o.pop():o.splice(a,1)[0]}function io(o,a){const u=[];for(let h=0;h<o;h++)u.push(a);return u}function Ci(o,a,u){let h=sa(o,a);return h>=0?o[1|h]=u:(h=~h,function $l(o,a,u,h){let f=o.length;if(f==a)o.push(u,h);else if(1===f)o.push(h,o[0]),o[0]=u;else{for(f--,o.push(o[f-1],o[f]);f>a;)o[f]=o[f-2],f--;o[a]=u,o[a+1]=h}}(o,h,a,u)),h}function Ac(o,a){const u=sa(o,a);if(u>=0)return o[1|u]}function sa(o,a){return function kc(o,a,u){let h=0,f=o.length>>u;for(;f!==h;){const m=h+(f-h>>1),y=o[m<<u];if(a===y)return m<<u;y>a?f=m:h=m+1}return~(f<<u)}(o,a,1)}const Ao={},Ka="__NG_DI_FLAG__",oa="ngTempTokenPath",S=/\n/gm,O="__source",j=Ce({provide:String,useValue:Ce});let X;function he(o){const a=X;return X=o,a}function ve(o,a=Ct.Default){if(void 0===X)throw new Ve(203,"");return null===X?Yi(o,void 0,a):X.get(o,a&Ct.Optional?null:void 0,a)}function Ue(o,a=Ct.Default){return(function jn(){return cr}()||ve)(ae(o),a)}const It=Ue;function jt(o){const a=[];for(let u=0;u<o.length;u++){const h=ae(o[u]);if(Array.isArray(h)){if(0===h.length)throw new Ve(900,"");let f,m=Ct.Default;for(let y=0;y<h.length;y++){const C=h[y],x=zi(C);"number"==typeof x?-1===x?f=C.token:m|=x:f=C}a.push(Ue(f,m))}else a.push(Ue(h))}return a}function _t(o,a){return o[Ka]=a,o.prototype[Ka]=a,o}function zi(o){return o[Ka]}const gr=_t(Xn("Inject",o=>({token:o})),-1),Gr=_t(Xn("Optional"),8),la=_t(Xn("SkipSelf"),4);let da;function ql(o){var a;return(null===(a=function Jd(){if(void 0===da&&(da=null,en.trustedTypes))try{da=en.trustedTypes.createPolicy("angular",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch(o){}return da}())||void 0===a?void 0:a.createHTML(o))||o}class ha{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class th extends ha{getTypeName(){return"HTML"}}class cy extends ha{getTypeName(){return"Style"}}class Mu extends ha{getTypeName(){return"Script"}}class uy extends ha{getTypeName(){return"URL"}}class dy extends ha{getTypeName(){return"ResourceURL"}}function oo(o){return o instanceof ha?o.changingThisBreaksApplicationSecurity:o}function fa(o,a){const u=Xa(o);if(null!=u&&u!==a){if("ResourceURL"===u&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===a}function Xa(o){return o instanceof ha&&o.getTypeName()||null}function Xf(o){return new th(o)}function Jf(o){return new cy(o)}function xg(o){return new Mu(o)}function ep(o){return new uy(o)}function tp(o){return new dy(o)}class Sg{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const u=(new window.DOMParser).parseFromString(ql(a),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(a):(u.removeChild(u.firstChild),u)}catch(u){return null}}}class hy{constructor(a){if(this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const u=this.inertDocument.createElement("html");this.inertDocument.appendChild(u);const h=this.inertDocument.createElement("body");u.appendChild(h)}}getInertBodyElement(a){const u=this.inertDocument.createElement("template");if("content"in u)return u.innerHTML=ql(a),u;const h=this.inertDocument.createElement("body");return h.innerHTML=ql(a),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(h),h}stripCustomNsAttrs(a){const u=a.attributes;for(let f=u.length-1;0<f;f--){const y=u.item(f).name;("xmlns:ns1"===y||0===y.indexOf("ns1:"))&&a.removeAttribute(y)}let h=a.firstChild;for(;h;)h.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(h),h=h.nextSibling}}const nh=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,w=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function g(o){return(o=String(o)).match(nh)||o.match(w)?o:"unsafe:"+o}function E(o){const a={};for(const u of o.split(","))a[u]=!0;return a}function k(...o){const a={};for(const u of o)for(const h in u)u.hasOwnProperty(h)&&(a[h]=!0);return a}const B=E("area,br,col,hr,img,wbr"),ie=E("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ke=E("rp,rt"),Wn=k(B,k(ie,E("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),k(ke,E("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),k(ke,ie)),Os=E("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Ro=E("srcset"),Ja=k(Os,Ro,E("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),E("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Tg=E("script,style,template");class Lc{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(a){let u=a.firstChild,h=!0;for(;u;)if(u.nodeType===Node.ELEMENT_NODE?h=this.startElement(u):u.nodeType===Node.TEXT_NODE?this.chars(u.nodeValue):this.sanitizedSomething=!0,h&&u.firstChild)u=u.firstChild;else for(;u;){u.nodeType===Node.ELEMENT_NODE&&this.endElement(u);let f=this.checkClobberedElement(u,u.nextSibling);if(f){u=f;break}u=this.checkClobberedElement(u,u.parentNode)}return this.buf.join("")}startElement(a){const u=a.nodeName.toLowerCase();if(!Wn.hasOwnProperty(u))return this.sanitizedSomething=!0,!Tg.hasOwnProperty(u);this.buf.push("<"),this.buf.push(u);const h=a.attributes;for(let f=0;f<h.length;f++){const m=h.item(f),y=m.name,C=y.toLowerCase();if(!Ja.hasOwnProperty(C)){this.sanitizedSomething=!0;continue}let x=m.value;Os[C]&&(x=g(x)),Ro[C]&&(o=x,x=(o=String(o)).split(",").map(a=>g(a.trim())).join(", ")),this.buf.push(" ",y,'="',ih(x),'"')}var o;return this.buf.push(">"),!0}endElement(a){const u=a.nodeName.toLowerCase();Wn.hasOwnProperty(u)&&!B.hasOwnProperty(u)&&(this.buf.push("</"),this.buf.push(u),this.buf.push(">"))}chars(a){this.buf.push(ih(a))}checkClobberedElement(a,u){if(u&&(a.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${a.outerHTML}`);return u}}const Iu=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ig=/([^\#-~ |!])/g;function ih(o){return o.replace(/&/g,"&amp;").replace(Iu,function(a){return"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";"}).replace(Ig,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Wl;function rp(o,a){let u=null;try{Wl=Wl||function np(o){const a=new hy(o);return function Mg(){try{return!!(new window.DOMParser).parseFromString(ql(""),"text/html")}catch(o){return!1}}()?new Sg(a):a}(o);let h=a?String(a):"";u=Wl.getInertBodyElement(h);let f=5,m=h;do{if(0===f)throw new Error("Failed to sanitize html because the input is unstable");f--,h=m,m=u.innerHTML,u=Wl.getInertBodyElement(h)}while(h!==m);return ql((new Lc).sanitizeChildren(sp(u)||u))}finally{if(u){const h=sp(u)||u;for(;h.firstChild;)h.removeChild(h.firstChild)}}}function sp(o){return"content"in o&&function Au(o){return o.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===o.nodeName}(o)?o.content:null}var yn=(()=>((yn=yn||{})[yn.NONE=0]="NONE",yn[yn.HTML=1]="HTML",yn[yn.STYLE=2]="STYLE",yn[yn.SCRIPT=3]="SCRIPT",yn[yn.URL=4]="URL",yn[yn.RESOURCE_URL=5]="RESOURCE_URL",yn))();function rh(o){const a=function Bc(){const o=Oe();return o&&o[12]}();return a?a.sanitize(yn.URL,o)||"":fa(o,"URL")?oo(o):g(we(o))}const YC="__ngContext__";function qr(o,a){o[YC]=a}function py(o){const a=function ap(o){return o[YC]||null}(o);return a?Array.isArray(a)?a:a.lView:null}function Ou(o){return o.ngOriginalError}function CT(o,...a){o.error(...a)}class Rg{constructor(){this._console=console}handleError(a){const u=this._findOriginalError(a),h=function wT(o){return o&&o.ngErrorLogger||CT}(a);h(this._console,"ERROR",a),u&&h(this._console,"ORIGINAL ERROR",u)}_findOriginalError(a){let u=a&&Ou(a);for(;u&&Ou(u);)u=Ou(u);return u||null}}const kT=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(en))();function pa(o){return o instanceof Function?o():o}var el=(()=>((el=el||{})[el.Important=1]="Important",el[el.DashCase=2]="DashCase",el))();function Og(o,a){return undefined(o,a)}function cp(o){const a=o[3];return hr(a)?a[3]:a}function up(o){return rE(o[13])}function Ng(o){return rE(o[4])}function rE(o){for(;null!==o&&!hr(o);)o=o[4];return o}function sh(o,a,u,h,f){if(null!=h){let m,y=!1;hr(h)?m=h:Mr(h)&&(y=!0,h=h[0]);const C=On(h);0===o&&null!==u?null==f?xy(a,u,C):ao(a,u,C,f||null,!0):1===o&&null!==u?ao(a,u,C,f||null,!0):2===o?function Iy(o,a,u){const h=dp(o,a);h&&function VT(o,a,u,h){Vn(o)?o.removeChild(a,u,h):a.removeChild(u)}(o,h,a,u)}(a,C,y):3===o&&a.destroyNode(C),null!=m&&function Nu(o,a,u,h,f){const m=u[7];m!==On(u)&&sh(a,o,h,m,f);for(let C=10;C<u.length;C++){const x=u[C];Bg(x[1],x,o,a,h,m)}}(a,o,m,u,f)}}function yy(o,a,u){if(Vn(o))return o.createElement(a,u);{const h=null!==u?function yc(o){const a=o.toLowerCase();return"svg"===a?"http://www.w3.org/2000/svg":"math"===a?"http://www.w3.org/1998/MathML/":null}(u):null;return null===h?o.createElement(a):o.createElementNS(h,a)}}function oE(o,a){const u=o[9],h=u.indexOf(a),f=a[3];1024&a[2]&&(a[2]&=-1025,Eo(f,-1)),u.splice(h,1)}function Cy(o,a){if(o.length<=10)return;const u=10+a,h=o[u];if(h){const f=h[17];null!==f&&f!==o&&oE(f,h),a>0&&(o[u-1][4]=h[4]);const m=zl(o,10+a);!function Ps(o,a){Bg(o,a,a[11],2,null,null),a[0]=null,a[6]=null}(h[1],h);const y=m[19];null!==y&&y.detachView(m[1]),h[3]=null,h[4]=null,h[2]&=-129}return h}function Ey(o,a){if(!(256&a[2])){const u=a[11];Vn(u)&&u.destroyNode&&Bg(o,a,u,3,null,null),function by(o){let a=o[13];if(!a)return Dy(o[1],o);for(;a;){let u=null;if(Mr(a))u=a[13];else{const h=a[10];h&&(u=h)}if(!u){for(;a&&!a[4]&&a!==o;)Mr(a)&&Dy(a[1],a),a=a[3];null===a&&(a=o),Mr(a)&&Dy(a[1],a),u=a&&a[4]}a=u}}(a)}}function Dy(o,a){if(!(256&a[2])){a[2]&=-129,a[2]|=256,function lE(o,a){let u;if(null!=o&&null!=(u=o.destroyHooks))for(let h=0;h<u.length;h+=2){const f=a[u[h]];if(!(f instanceof Ha)){const m=u[h+1];if(Array.isArray(m))for(let y=0;y<m.length;y+=2){const C=f[m[y]],x=m[y+1];try{x.call(C)}finally{}}else try{m.call(f)}finally{}}}}(o,a),function aE(o,a){const u=o.cleanup,h=a[7];let f=-1;if(null!==u)for(let m=0;m<u.length-1;m+=2)if("string"==typeof u[m]){const y=u[m+1],C="function"==typeof y?y(a):On(a[y]),x=h[f=u[m+2]],T=u[m+3];"boolean"==typeof T?C.removeEventListener(u[m],x,T):T>=0?h[f=T]():h[f=-T].unsubscribe(),m+=2}else{const y=h[f=u[m+1]];u[m].call(y)}if(null!==h){for(let m=f+1;m<h.length;m++)h[m]();a[7]=null}}(o,a),1===a[1].type&&Vn(a[11])&&a[11].destroy();const u=a[17];if(null!==u&&hr(a[3])){u!==a[3]&&oE(u,a);const h=a[19];null!==h&&h.detachView(o)}}}function Fg(o,a,u){return function BT(o,a,u){let h=a;for(;null!==h&&40&h.type;)h=(a=h).parent;if(null===h)return u[0];if(2&h.flags){const f=o.data[h.directiveStart].encapsulation;if(f===Jt.None||f===Jt.Emulated)return null}return Vi(h,u)}(o,a.parent,u)}function ao(o,a,u,h,f){Vn(o)?o.insertBefore(a,u,h,f):a.insertBefore(u,h,f)}function xy(o,a,u){Vn(o)?o.appendChild(a,u):a.appendChild(u)}function cE(o,a,u,h,f){null!==h?ao(o,a,u,h,f):xy(o,a,u)}function dp(o,a){return Vn(o)?o.parentNode(a):a.parentNode}function uE(o,a,u){return Sy(o,a,u)}let Sy=function dE(o,a,u){return 40&o.type?Vi(o,u):null};function Lg(o,a,u,h){const f=Fg(o,h,a),m=a[11],C=uE(h.parent||a[6],h,a);if(null!=f)if(Array.isArray(u))for(let x=0;x<u.length;x++)cE(m,f,u[x],C,!1);else cE(m,f,u,C,!1)}function ah(o,a){if(null!==a){const u=a.type;if(3&u)return Vi(a,o);if(4&u)return Ty(-1,o[a.index]);if(8&u){const h=a.child;if(null!==h)return ah(o,h);{const f=o[a.index];return hr(f)?Ty(-1,f):On(f)}}if(32&u)return Og(a,o)()||On(o[a.index]);{const h=fE(o,a);return null!==h?Array.isArray(h)?h[0]:ah(cp(o[16]),h):ah(o,a.next)}}return null}function fE(o,a){return null!==a?o[16][6].projection[a.projection]:null}function Ty(o,a){const u=10+o+1;if(u<a.length){const h=a[u],f=h[1].firstChild;if(null!==f)return ah(h,f)}return a[7]}function Ay(o,a,u,h,f,m,y){for(;null!=u;){const C=h[u.index],x=u.type;if(y&&0===a&&(C&&qr(On(C),h),u.flags|=4),64!=(64&u.flags))if(8&x)Ay(o,a,u.child,h,f,m,!1),sh(a,o,f,C,m);else if(32&x){const T=Og(u,h);let R;for(;R=T();)sh(a,o,f,R,m);sh(a,o,f,C,m)}else 16&x?Ki(o,a,h,u,f,m):sh(a,o,f,C,m);u=y?u.projectionNext:u.next}}function Bg(o,a,u,h,f,m){Ay(u,h,o.firstChild,a,f,m,!1)}function Ki(o,a,u,h,f,m){const y=u[16],x=y[6].projection[h.projection];if(Array.isArray(x))for(let T=0;T<x.length;T++)sh(a,o,f,x[T],m);else Ay(o,a,x,y[3],f,m,!0)}function pE(o,a,u){Vn(o)?o.setAttribute(a,"style",u):a.style.cssText=u}function ky(o,a,u){Vn(o)?""===u?o.removeAttribute(a,"class"):o.setAttribute(a,"class",u):a.className=u}function Ug(o,a,u){let h=o.length;for(;;){const f=o.indexOf(a,u);if(-1===f)return f;if(0===f||o.charCodeAt(f-1)<=32){const m=a.length;if(f+m===h||o.charCodeAt(f+m)<=32)return f}u=f+1}}const Ry="ng-template";function Oy(o,a,u){let h=0;for(;h<o.length;){let f=o[h++];if(u&&"class"===f){if(f=o[h],-1!==Ug(f.toLowerCase(),a,0))return!0}else if(1===f){for(;h<o.length&&"string"==typeof(f=o[h++]);)if(f.toLowerCase()===a)return!0;return!1}}return!1}function Sn(o){return 4===o.type&&o.value!==Ry}function mE(o,a,u){return a===(4!==o.type||u?o.value:Ry)}function Hg(o,a,u){let h=4;const f=o.attrs||[],m=function hN(o){for(let a=0;a<o.length;a++)if(Tt(o[a]))return a;return o.length}(f);let y=!1;for(let C=0;C<a.length;C++){const x=a[C];if("number"!=typeof x){if(!y)if(4&h){if(h=2|1&h,""!==x&&!mE(o,x,u)||""===x&&1===a.length){if(ma(h))return!1;y=!0}}else{const T=8&h?x:a[++C];if(8&h&&null!==o.attrs){if(!Oy(o.attrs,T,u)){if(ma(h))return!1;y=!0}continue}const V=dN(8&h?"class":x,f,Sn(o),u);if(-1===V){if(ma(h))return!1;y=!0;continue}if(""!==T){let $;$=V>m?"":f[V+1].toLowerCase();const ne=8&h?$:null;if(ne&&-1!==Ug(ne,T,0)||2&h&&T!==$){if(ma(h))return!1;y=!0}}}}else{if(!y&&!ma(h)&&!ma(x))return!1;if(y&&ma(x))continue;y=!1,h=x|1&h}}return ma(h)||y}function ma(o){return 0==(1&o)}function dN(o,a,u,h){if(null===a)return-1;let f=0;if(h||!u){let m=!1;for(;f<a.length;){const y=a[f];if(y===o)return f;if(3===y||6===y)m=!0;else{if(1===y||2===y){let C=a[++f];for(;"string"==typeof C;)C=a[++f];continue}if(4===y)break;if(0===y){f+=4;continue}}f+=m?1:2}return-1}return function fN(o,a){let u=o.indexOf(4);if(u>-1)for(u++;u<o.length;){const h=o[u];if("number"==typeof h)return-1;if(h===a)return u;u++}return-1}(a,o)}function gE(o,a,u=!1){for(let h=0;h<a.length;h++)if(Hg(o,a[h],u))return!0;return!1}function GT(o,a){e:for(let u=0;u<a.length;u++){const h=a[u];if(o.length===h.length){for(let f=0;f<o.length;f++)if(o[f]!==h[f])continue e;return!0}}return!1}function _E(o,a){return o?":not("+a.trim()+")":a}function pN(o){let a=o[0],u=1,h=2,f="",m=!1;for(;u<o.length;){let y=o[u];if("string"==typeof y)if(2&h){const C=o[++u];f+="["+y+(C.length>0?'="'+C+'"':"")+"]"}else 8&h?f+="."+y:4&h&&(f+=" "+y);else""!==f&&!ma(y)&&(a+=_E(m,f),f=""),h=y,m=m||!ma(h);u++}return""!==f&&(a+=_E(m,f)),a}const Wt={};function zT(o){$T(tn(),Oe(),Hi()+o,Ol())}function $T(o,a,u,h){if(!h)if(3==(3&a[2])){const m=o.preOrderCheckHooks;null!==m&&eo(a,m,u)}else{const m=o.preOrderHooks;null!==m&&Bl(a,m,0,u)}Js(u)}function Ny(o,a){return o<<17|a<<2}function be(o){return o>>17&32767}function F(o){return 2|o}function sr(o){return(131068&o)>>2}function jg(o,a){return-131069&o|a<<2}function Fy(o){return 1|o}function Yy(o,a){const u=o.contentQueries;if(null!==u)for(let h=0;h<u.length;h+=2){const f=u[h],m=u[h+1];if(-1!==m){const y=o.data[m];wu(f),y.contentQueries(2,a[m],m)}}}function mp(o,a,u,h,f,m,y,C,x,T){const R=a.blueprint.slice();return R[0]=f,R[2]=140|h,Co(R),R[3]=R[15]=o,R[8]=u,R[10]=y||o&&o[10],R[11]=C||o&&o[11],R[12]=x||o&&o[12]||null,R[9]=T||o&&o[9]||null,R[6]=m,R[16]=2==a.type?o[16]:R,R}function ch(o,a,u,h,f){let m=o.data[a];if(null===m)m=function uh(o,a,u,h,f){const m=Do(),y=vu(),x=o.data[a]=function rI(o,a,u,h,f,m){return{type:u,index:h,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?m:m&&m.parent,u,a,h,f);return null===o.firstChild&&(o.firstChild=x),null!==m&&(y?null==m.child&&null!==x.parent&&(m.child=x):null===m.next&&(m.next=x)),x}(o,a,u,h,f),function Pl(){return Et.lFrame.inI18n}()&&(m.flags|=64);else if(64&m.type){m.type=u,m.value=h,m.attrs=f;const y=function Rl(){const o=Et.lFrame,a=o.currentTNode;return o.isParent?a:a.parent}();m.injectorIndex=null===y?-1:y.injectorIndex}return fr(m,!0),m}function Uc(o,a,u,h){if(0===u)return-1;const f=a.length;for(let m=0;m<u;m++)a.push(h),o.blueprint.push(h),o.data.push(null);return f}function Lu(o,a,u){Wo(a);try{const h=o.viewQuery;null!==h&&gp(1,h,u);const f=o.template;null!==f&&wE(o,a,f,1,u),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&Yy(o,a),o.staticViewQueries&&gp(2,o.viewQuery,u);const m=o.components;null!==m&&function nI(o,a){for(let u=0;u<a.length;u++)pI(o,a[u])}(a,m)}catch(h){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),h}finally{a[2]&=-5,Ua()}}function Hc(o,a,u,h){const f=a[2];if(256==(256&f))return;Wo(a);const m=Ol();try{Co(a),function bu(o){return Et.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==u&&wE(o,a,u,2,h);const y=3==(3&f);if(!m)if(y){const T=o.preOrderCheckHooks;null!==T&&eo(a,T,null)}else{const T=o.preOrderHooks;null!==T&&Bl(a,T,0,null),xc(a,0)}if(function fI(o){for(let a=up(o);null!==a;a=Ng(a)){if(!a[2])continue;const u=a[9];for(let h=0;h<u.length;h++){const f=u[h],m=f[3];0==(1024&f[2])&&Eo(m,1),f[2]|=1024}}}(a),function hI(o){for(let a=up(o);null!==a;a=Ng(a))for(let u=10;u<a.length;u++){const h=a[u],f=h[1];Ds(h)&&Hc(f,h,f.template,h[8])}}(a),null!==o.contentQueries&&Yy(o,a),!m)if(y){const T=o.contentCheckHooks;null!==T&&eo(a,T)}else{const T=o.contentHooks;null!==T&&Bl(a,T,1),xc(a,1)}!function yE(o,a){const u=o.hostBindingOpCodes;if(null!==u)try{for(let h=0;h<u.length;h++){const f=u[h];if(f<0)Js(~f);else{const m=f,y=u[++h],C=u[++h];Nl(y,m),C(2,a[m])}}}finally{Js(-1)}}(o,a);const C=o.components;null!==C&&function Zy(o,a){for(let u=0;u<a.length;u++)kN(o,a[u])}(a,C);const x=o.viewQuery;if(null!==x&&gp(2,x,h),!m)if(y){const T=o.viewCheckHooks;null!==T&&eo(a,T)}else{const T=o.viewHooks;null!==T&&Bl(a,T,2),xc(a,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),m||(a[2]&=-73),1024&a[2]&&(a[2]&=-1025,Eo(a[3],-1))}finally{Ua()}}function bE(o,a,u,h){const f=a[10],m=!Ol(),y=Ba(a);try{m&&!y&&f.begin&&f.begin(),y&&Lu(o,a,h),Hc(o,a,u,h)}finally{m&&!y&&f.end&&f.end()}}function wE(o,a,u,h,f){const m=Hi(),y=2&h;try{Js(-1),y&&a.length>20&&$T(o,a,20,Ol()),u(h,f)}finally{Js(m)}}function Ky(o,a,u){if(Td(a)){const f=a.directiveEnd;for(let m=a.directiveStart;m<f;m++){const y=o.data[m];y.contentQueries&&y.contentQueries(1,u[m],m)}}}function dh(o,a,u){!_u()||(function aI(o,a,u,h){const f=u.directiveStart,m=u.directiveEnd;o.firstCreatePass||_n(u,a),qr(h,a);const y=u.initialInputs;for(let C=f;C<m;C++){const x=o.data[C],T=Vr(x);T&&ib(a,u,x);const R=So(a,o,C,u);qr(R,a),null!==y&&rb(0,C-f,R,x,0,y),T&&(Ui(u.index,a)[8]=R)}}(o,a,u,Vi(u,a)),128==(128&u.flags)&&function TN(o,a,u){const h=u.directiveStart,f=u.directiveEnd,y=u.index,C=function Gd(){return Et.lFrame.currentDirectiveIndex}();try{Js(y);for(let x=h;x<f;x++){const T=o.data[x],R=a[x];qo(x),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&lI(T,R)}}finally{Js(-1),qo(C)}}(o,a,u))}function Qy(o,a,u=Vi){const h=a.localNames;if(null!==h){let f=a.index+1;for(let m=0;m<h.length;m+=2){const y=h[m+1],C=-1===y?u(a,o):o[y];o[f++]=C}}}function CE(o){const a=o.tView;return null===a||a.incompleteFirstPass?o.tView=Zg(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts):a}function Zg(o,a,u,h,f,m,y,C,x,T){const R=20+h,V=R+f,$=function iI(o,a){const u=[];for(let h=0;h<a;h++)u.push(h<o?null:Wt);return u}(R,V),ne="function"==typeof T?T():T;return $[1]={type:o,blueprint:$,template:u,queries:null,viewQuery:C,declTNode:a,data:$.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:V,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:x,consts:ne,incompleteFirstPass:!1}}function xE(o,a,u,h){const f=Xg(a);null===u?f.push(h):(f.push(u),o.firstCreatePass&&Jg(o).push(h,f.length-1))}function SE(o,a,u){for(let h in o)if(o.hasOwnProperty(h)){const f=o[h];(u=null===u?{}:u).hasOwnProperty(h)?u[h].push(a,f):u[h]=[a,f]}return u}function Ns(o,a,u,h,f,m,y,C){const x=Vi(a,u);let R,T=a.inputs;!C&&null!=T&&(R=T[h])?(Bu(o,u,R,h,f),gc(a)&&function Xy(o,a){const u=Ui(a,o);16&u[2]||(u[2]|=64)}(u,a.index)):3&a.type&&(h=function ME(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(h),f=null!=y?y(f,a.value||"",h):f,Vn(m)?m.setProperty(x,h,f):Oi(h)||(x.setProperty?x.setProperty(h,f):x[h]=f))}function Qg(o,a,u,h){let f=!1;if(_u()){const m=function tb(o,a,u){const h=o.directiveRegistry;let f=null;if(h)for(let m=0;m<h.length;m++){const y=h[m];gE(u,y.selectors,!1)&&(f||(f=[]),Ir(_n(u,a),o,y.type),Vr(y)?(cI(o,u),f.unshift(y)):f.push(y))}return f}(o,a,u),y=null===h?null:{"":-1};if(null!==m){f=!0,AE(u,o.data.length,m.length);for(let R=0;R<m.length;R++){const V=m[R];V.providersResolver&&V.providersResolver(V)}let C=!1,x=!1,T=Uc(o,a,m.length,null);for(let R=0;R<m.length;R++){const V=m[R];u.mergedAttrs=oi(u.mergedAttrs,V.hostAttrs),nb(o,u,a,T,V),IE(T,V,y),null!==V.contentQueries&&(u.flags|=8),(null!==V.hostBindings||null!==V.hostAttrs||0!==V.hostVars)&&(u.flags|=128);const $=V.type.prototype;!C&&($.ngOnChanges||$.ngOnInit||$.ngDoCheck)&&((o.preOrderHooks||(o.preOrderHooks=[])).push(u.index),C=!0),!x&&($.ngOnChanges||$.ngDoCheck)&&((o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(u.index),x=!0),T++}!function Kg(o,a){const h=a.directiveEnd,f=o.data,m=a.attrs,y=[];let C=null,x=null;for(let T=a.directiveStart;T<h;T++){const R=f[T],V=R.inputs,$=null===m||Sn(a)?null:IN(V,m);y.push($),C=SE(V,T,C),x=SE(R.outputs,T,x)}null!==C&&(C.hasOwnProperty("class")&&(a.flags|=16),C.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=y,a.inputs=C,a.outputs=x}(o,u)}y&&function uI(o,a,u){if(a){const h=o.localNames=[];for(let f=0;f<a.length;f+=2){const m=u[a[f+1]];if(null==m)throw new Ve(-301,!1);h.push(a[f],m)}}}(u,h,y)}return u.mergedAttrs=oi(u.mergedAttrs,u.attrs),f}function eb(o,a,u,h,f,m){const y=m.hostBindings;if(y){let C=o.hostBindingOpCodes;null===C&&(C=o.hostBindingOpCodes=[]);const x=~a.index;(function MN(o){let a=o.length;for(;a>0;){const u=o[--a];if("number"==typeof u&&u<0)return u}return 0})(C)!=x&&C.push(x),C.push(h,f,y)}}function lI(o,a){null!==o.hostBindings&&o.hostBindings(1,a)}function cI(o,a){a.flags|=2,(o.components||(o.components=[])).push(a.index)}function IE(o,a,u){if(u){if(a.exportAs)for(let h=0;h<a.exportAs.length;h++)u[a.exportAs[h]]=o;Vr(a)&&(u[""]=o)}}function AE(o,a,u){o.flags|=1,o.directiveStart=a,o.directiveEnd=a+u,o.providerIndexes=a}function nb(o,a,u,h,f){o.data[h]=f;const m=f.factory||(f.factory=Ur(f.type)),y=new Ha(m,Vr(f),null);o.blueprint[h]=y,u[h]=y,eb(o,a,0,h,Uc(o,u,f.hostVars,Wt),f)}function ib(o,a,u){const h=Vi(a,o),f=CE(u),m=o[10],y=sb(o,mp(o,f,null,u.onPush?64:16,h,a,m,m.createRenderer(h,u),null,null));o[a.index]=y}function Fs(o,a,u,h,f,m){const y=Vi(o,a);!function kE(o,a,u,h,f,m,y){if(null==m)Vn(o)?o.removeAttribute(a,f,u):a.removeAttribute(f);else{const C=null==y?we(m):y(m,h||"",f);Vn(o)?o.setAttribute(a,f,C,u):u?a.setAttributeNS(u,f,C):a.setAttribute(f,C)}}(a[11],y,m,o.value,u,h,f)}function rb(o,a,u,h,f,m){const y=m[a];if(null!==y){const C=h.setInput;for(let x=0;x<y.length;){const T=y[x++],R=y[x++],V=y[x++];null!==C?h.setInput(u,V,T,R):u[R]=V}}}function IN(o,a){let u=null,h=0;for(;h<a.length;){const f=a[h];if(0!==f)if(5!==f){if("number"==typeof f)break;o.hasOwnProperty(f)&&(null===u&&(u=[]),u.push(f,o[f],a[h+1])),h+=2}else h+=2;else h+=4}return u}function dI(o,a,u,h){return new Array(o,!0,!1,a,null,0,h,u,null,null)}function kN(o,a){const u=Ui(a,o);if(Ds(u)){const h=u[1];80&u[2]?Hc(h,u,h.template,u[8]):u[5]>0&&RE(u)}}function RE(o){for(let h=up(o);null!==h;h=Ng(h))for(let f=10;f<h.length;f++){const m=h[f];if(1024&m[2]){const y=m[1];Hc(y,m,y.template,m[8])}else m[5]>0&&RE(m)}const u=o[1].components;if(null!==u)for(let h=0;h<u.length;h++){const f=Ui(u[h],o);Ds(f)&&f[5]>0&&RE(f)}}function pI(o,a){const u=Ui(a,o),h=u[1];(function RN(o,a){for(let u=a.length;u<o.blueprint.length;u++)a.push(o.blueprint[u])})(h,u),Lu(h,u,u[8])}function sb(o,a){return o[13]?o[14][4]=a:o[13]=a,o[14]=a,a}function OE(o){for(;o;){o[2]|=64;const a=cp(o);if(Id(o)&&!a)return o;o=a}return null}function hh(o,a,u){const h=a[10];h.begin&&h.begin();try{Hc(o,a,o.template,u)}catch(f){throw LE(a,f),f}finally{h.end&&h.end()}}function NE(o){!function PE(o){for(let a=0;a<o.components.length;a++){const u=o.components[a],h=py(u),f=h[1];bE(f,h,f.template,u)}}(o[8])}function gp(o,a,u){wu(0),a(o,u)}const lb=(()=>Promise.resolve(null))();function Xg(o){return o[7]||(o[7]=[])}function Jg(o){return o.cleanup||(o.cleanup=[])}function fh(o,a,u){return(null===o||Vr(o))&&(u=function wc(o){for(;Array.isArray(o);){if("object"==typeof o[1])return o;o=o[0]}return null}(u[a.index])),u[11]}function LE(o,a){const u=o[9],h=u?u.get(Rg,null):null;h&&h.handleError(a)}function Bu(o,a,u,h,f){for(let m=0;m<u.length;){const y=u[m++],C=u[m++],x=a[y],T=o.data[y];null!==T.setInput?T.setInput(x,f,h,C):x[C]=f}}function _a(o,a,u){const h=$o(a,o);!function vy(o,a,u){Vn(o)?o.setValue(a,u):a.textContent=u}(o[11],h,u)}function ph(o,a,u){let h=u?o.styles:null,f=u?o.classes:null,m=0;if(null!==a)for(let y=0;y<a.length;y++){const C=a[y];"number"==typeof C?m=C:1==m?f=Ee(f,C):2==m&&(h=Ee(h,C+": "+a[++y]+";"))}u?o.styles=h:o.stylesWithoutHost=h,u?o.classes=f:o.classesWithoutHost=f}const cb=new li("INJECTOR",-1);class Ei{get(a,u=Ao){if(u===Ao){const h=new Error(`NullInjectorError: No provider for ${pe(a)}!`);throw h.name="NullInjectorError",h}return u}}const _p=new li("Set Injector scope."),Vu={},mI={};let ub;function UE(){return void 0===ub&&(ub=new Ei),ub}function HE(o,a=null,u=null,h){const f=jE(o,a,u,h);return f._resolveInjectorDefTypes(),f}function jE(o,a=null,u=null,h){return new gI(o,u,a||UE(),h)}class gI{constructor(a,u,h,f=null){this.parent=h,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const m=[];u&&mr(u,C=>this.processProvider(C,a,u)),mr([a],C=>this.processInjectorType(C,[],m)),this.records.set(cb,Uu(void 0,this));const y=this.records.get(_p);this.scope=null!=y?y.value:null,this.source=f||("object"==typeof a?null:pe(a))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(a=>a.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(a,u=Ao,h=Ct.Default){this.assertNotDestroyed();const f=he(this),m=pn(void 0);try{if(!(h&Ct.SkipSelf)){let C=this.records.get(a);if(void 0===C){const x=function Yr(o){return"function"==typeof o||"object"==typeof o&&o instanceof li}(a)&&zn(a);C=x&&this.injectableDefInScope(x)?Uu(e_(a),Vu):null,this.records.set(a,C)}if(null!=C)return this.hydrate(a,C)}return(h&Ct.Self?UE():this.parent).get(a,u=h&Ct.Optional&&u===Ao?null:u)}catch(y){if("NullInjectorError"===y.name){if((y[oa]=y[oa]||[]).unshift(pe(a)),f)throw y;return function rr(o,a,u,h){const f=o[oa];throw a[O]&&f.unshift(a[O]),o.message=function so(o,a,u,h=null){o=o&&"\n"===o.charAt(0)&&"\u0275"==o.charAt(1)?o.substr(2):o;let f=pe(a);if(Array.isArray(a))f=a.map(pe).join(" -> ");else if("object"==typeof a){let m=[];for(let y in a)if(a.hasOwnProperty(y)){let C=a[y];m.push(y+":"+("string"==typeof C?JSON.stringify(C):pe(C)))}f=`{${m.join(", ")}}`}return`${u}${h?"("+h+")":""}[${f}]: ${o.replace(S,"\n  ")}`}("\n"+o.message,f,u,h),o.ngTokenPath=f,o[oa]=null,o}(y,a,"R3InjectorError",this.source)}throw y}finally{pn(m),he(f)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(a=>this.get(a))}toString(){const a=[];return this.records.forEach((h,f)=>a.push(pe(f))),`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ve(205,!1)}processInjectorType(a,u,h){if(!(a=ae(a)))return!1;let f=ws(a);const m=null==f&&a.ngModule||void 0,y=void 0===m?a:m,C=-1!==h.indexOf(y);if(void 0!==m&&(f=ws(m)),null==f)return!1;if(null!=f.imports&&!C){let R;h.push(y);try{mr(f.imports,V=>{this.processInjectorType(V,u,h)&&(void 0===R&&(R=[]),R.push(V))})}finally{}if(void 0!==R)for(let V=0;V<R.length;V++){const{ngModule:$,providers:ne}=R[V];mr(ne,Ie=>this.processProvider(Ie,$,ne||yt))}}this.injectorDefTypes.add(y);const x=Ur(y)||(()=>new y);this.records.set(y,Uu(x,Vu));const T=f.providers;if(null!=T&&!C){const R=a;mr(T,V=>this.processProvider(V,R,T))}return void 0!==m&&void 0!==a.providers}processProvider(a,u,h){let f=Hu(a=ae(a))?a:ae(a&&a.provide);const m=function vI(o,a,u){return zE(o)?Uu(void 0,o.useValue):Uu(GE(o),Vu)}(a);if(Hu(a)||!0!==a.multi)this.records.get(f);else{let y=this.records.get(f);y||(y=Uu(void 0,Vu,!0),y.factory=()=>jt(y.multi),this.records.set(f,y)),f=a,y.multi.push(a)}this.records.set(f,m)}hydrate(a,u){return u.value===Vu&&(u.value=mI,u.value=u.factory()),"object"==typeof u.value&&u.value&&function yp(o){return null!==o&&"object"==typeof o&&"function"==typeof o.ngOnDestroy}(u.value)&&this.onDestroy.add(u.value),u.value}injectableDefInScope(a){if(!a.providedIn)return!1;const u=ae(a.providedIn);return"string"==typeof u?"any"===u||u===this.scope:this.injectorDefTypes.has(u)}}function e_(o){const a=zn(o),u=null!==a?a.factory:Ur(o);if(null!==u)return u;if(o instanceof li)throw new Ve(204,!1);if(o instanceof Function)return function _I(o){const a=o.length;if(a>0)throw io(a,"?"),new Ve(204,!1);const u=function tr(o){const a=o&&(o[Fr]||o[ni]);if(a){const u=function Kn(o){if(o.hasOwnProperty("name"))return o.name;const a=(""+o).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(o);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),a}return null}(o);return null!==u?()=>u.factory(o):()=>new o}(o);throw new Ve(204,!1)}function GE(o,a,u){let h;if(Hu(o)){const f=ae(o);return Ur(f)||e_(f)}if(zE(o))h=()=>ae(o.useValue);else if(function mh(o){return!(!o||!o.useFactory)}(o))h=()=>o.useFactory(...jt(o.deps||[]));else if(function yI(o){return!(!o||!o.useExisting)}(o))h=()=>Ue(ae(o.useExisting));else{const f=ae(o&&(o.useClass||o.provide));if(!function vp(o){return!!o.deps}(o))return Ur(f)||e_(f);h=()=>new f(...jt(o.deps))}return h}function Uu(o,a,u=!1){return{factory:o,value:a,multi:u?[]:void 0}}function zE(o){return null!==o&&"object"==typeof o&&j in o}function Hu(o){return"function"==typeof o}let va=(()=>{class o{static create(u,h){var f;if(Array.isArray(u))return HE({name:""},h,u,"");{const m=null!==(f=u.name)&&void 0!==f?f:"";return HE({name:m},u.parent,u.providers,m)}}}return o.THROW_IF_NOT_FOUND=Ao,o.NULL=new Ei,o.\u0275prov=fn({token:o,providedIn:"any",factory:()=>Ue(cb)}),o.__NG_ELEMENT_ID__=-1,o})();function EI(o,a){Ll(py(o)[1],ei())}function _b(o){let a=function gb(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),u=!0;const h=[o];for(;a;){let f;if(Vr(o))f=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new Ve(903,"");f=a.\u0275dir}if(f){if(u){h.push(f);const y=o;y.inputs=vb(o.inputs),y.declaredInputs=vb(o.declaredInputs),y.outputs=vb(o.outputs);const C=f.hostBindings;C&&SI(o,C);const x=f.viewQuery,T=f.contentQueries;if(x&&il(o,x),T&&yb(o,T),oe(o.inputs,f.inputs),oe(o.declaredInputs,f.declaredInputs),oe(o.outputs,f.outputs),Vr(f)&&f.data.animation){const R=o.data;R.animation=(R.animation||[]).concat(f.data.animation)}}const m=f.features;if(m)for(let y=0;y<m.length;y++){const C=m[y];C&&C.ngInherit&&C(o),C===_b&&(u=!1)}}a=Object.getPrototypeOf(a)}!function xI(o){let a=0,u=null;for(let h=o.length-1;h>=0;h--){const f=o[h];f.hostVars=a+=f.hostVars,f.hostAttrs=oi(f.hostAttrs,u=oi(u,f.hostAttrs))}}(h)}function vb(o){return o===An?{}:o===yt?[]:o}function il(o,a){const u=o.viewQuery;o.viewQuery=u?(h,f)=>{a(h,f),u(h,f)}:a}function yb(o,a){const u=o.contentQueries;o.contentQueries=u?(h,f,m)=>{a(h,f,m),u(h,f,m)}:a}function SI(o,a){const u=o.hostBindings;o.hostBindings=u?(h,f)=>{a(h,f),u(h,f)}:a}let _r=null;function Zl(){if(!_r){const o=en.Symbol;if(o&&o.iterator)_r=o.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<a.length;++u){const h=a[u];"entries"!==h&&"size"!==h&&Map.prototype[h]===Map.prototype.entries&&(_r=h)}}}return _r}function Kl(o){return!!s_(o)&&(Array.isArray(o)||!(o instanceof Map)&&Zl()in o)}function s_(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function Or(o,a,u){return!Object.is(o[a],u)&&(o[a]=u,!0)}function jc(o,a,u,h){const f=Or(o,a,u);return Or(o,a+1,h)||f}function Fo(o,a,u,h){const f=Oe();return Or(f,xs(),a)&&(tn(),Fs(si(),f,o,a,u,h)),Fo}function ba(o,a,u,h,f,m,y,C,x,T){const V=function No(o,a,u,h,f,m){const y=jc(o,a,u,h);return jc(o,a+2,f,m)||y}(o,ds(),u,f,y,x);return Xs(4),V?a+we(u)+h+we(f)+m+we(y)+C+we(x)+T:Wt}function Cb(o,a,u,h,f,m,y,C){const x=Oe(),T=tn(),R=o+20,V=T.firstCreatePass?function RI(o,a,u,h,f,m,y,C,x){const T=a.consts,R=ch(a,o,4,y||null,Tr(T,C));Qg(a,u,R,Tr(T,x)),Ll(a,R);const V=R.tViews=Zg(2,R,h,f,m,a.directiveRegistry,a.pipeRegistry,null,a.schemas,T);return null!==a.queries&&(a.queries.template(a,R),V.queries=a.queries.embeddedTView(R)),R}(R,T,x,a,u,h,f,m,y):T.data[R];fr(V,!1);const $=x[11].createComment("");Lg(T,x,$,V),qr($,x),sb(x,x[R]=dI($,x,$,V)),yo(V)&&dh(T,x,V),null!=y&&Qy(x,V,C)}function sD(o){return function Qs(o,a){return o[a]}(function Hd(){return Et.lFrame.contextLView}(),20+o)}function wp(o,a=Ct.Default){const u=Oe();return null===u?Ue(o,a):$a(ei(),u,ae(o),a)}function gD(){throw new Error("invalid")}function Rb(o,a,u){const h=Oe();return Or(h,xs(),a)&&Ns(tn(),si(),h,o,a,h[11],u,!1),Rb}function Ob(o,a,u,h,f){const y=f?"class":"style";Bu(o,u,a.inputs[y],y,h)}function u_(o,a,u,h){const f=Oe(),m=tn(),y=20+o,C=f[11],x=f[y]=yy(C,a,function $d(){return Et.lFrame.currentNamespace}()),T=m.firstCreatePass?function GI(o,a,u,h,f,m,y){const C=a.consts,T=ch(a,o,2,f,Tr(C,m));return Qg(a,u,T,Tr(C,y)),null!==T.attrs&&ph(T,T.attrs,!1),null!==T.mergedAttrs&&ph(T,T.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,T),T}(y,m,f,0,a,u,h):m.data[y];fr(T,!0);const R=T.mergedAttrs;null!==R&&Ye(C,x,R);const V=T.classes;null!==V&&ky(C,x,V);const $=T.styles;return null!==$&&pE(C,x,$),64!=(64&T.flags)&&Lg(m,f,x,T),0===function Tl(){return Et.lFrame.elementDepthCount}()&&qr(x,f),function Vd(){Et.lFrame.elementDepthCount++}(),yo(T)&&(dh(m,f,T),Ky(m,T,f)),null!==h&&Qy(f,T),u_}function Cp(){let o=ei();vu()?yu():(o=o.parent,fr(o,!1));const a=o;!function Il(){Et.lFrame.elementDepthCount--}();const u=tn();return u.firstCreatePass&&(Ll(u,o),Td(o)&&u.queries.elementEnd(o)),null!=a.classesWithoutHost&&function Yd(o){return 0!=(16&o.flags)}(a)&&Ob(u,a,Oe(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function vg(o){return 0!=(32&o.flags)}(a)&&Ob(u,a,Oe(),a.stylesWithoutHost,!1),Cp}function Pb(o,a,u,h){return u_(o,a,u,h),Cp(),Pb}function Nb(o,a,u){const h=Oe(),f=tn(),m=o+20,y=f.firstCreatePass?function zI(o,a,u,h,f){const m=a.consts,y=Tr(m,h),C=ch(a,o,8,"ng-container",y);return null!==y&&ph(C,y,!0),Qg(a,u,C,Tr(m,f)),null!==a.queries&&a.queries.elementStart(a,C),C}(m,f,h,a,u):f.data[m];fr(y,!0);const C=h[m]=h[11].createComment("");return Lg(f,h,C,y),qr(C,h),yo(y)&&(dh(f,h,y),Ky(f,y,h)),null!=u&&Qy(h,y),Nb}function Fb(){let o=ei();const a=tn();return vu()?yu():(o=o.parent,fr(o,!1)),a.firstCreatePass&&(Ll(a,o),Td(o)&&a.queries.elementEnd(o)),Fb}function Lb(o,a,u){return Nb(o,a,u),Fb(),Lb}function _D(){return Oe()}function bh(o){return!!o&&"function"==typeof o.then}function Bb(o){return!!o&&"function"==typeof o.subscribe}const Vb=Bb;function Ca(o,a,u,h){const f=Oe(),m=tn(),y=ei();return yD(m,f,f[11],y,o,a,!!u,h),Ca}function d_(o,a){const u=ei(),h=Oe(),f=tn();return yD(f,h,fh(Ec(f.data),u,h),u,o,a,!1),d_}function yD(o,a,u,h,f,m,y,C){const x=yo(h),R=o.firstCreatePass&&Jg(o),V=a[8],$=Xg(a);let ne=!0;if(3&h.type||C){const it=Vi(h,a),ot=C?C(it):it,Be=$.length,Mt=C?Bt=>C(On(Bt[h.index])):h.index;if(Vn(u)){let Bt=null;if(!C&&x&&(Bt=function vD(o,a,u,h){const f=o.cleanup;if(null!=f)for(let m=0;m<f.length-1;m+=2){const y=f[m];if(y===u&&f[m+1]===h){const C=a[7],x=f[m+2];return C.length>x?C[x]:null}"string"==typeof y&&(m+=2)}return null}(o,a,f,h.index)),null!==Bt)(Bt.__ngLastListenerFn__||Bt).__ngNextListenerFn__=m,Bt.__ngLastListenerFn__=m,ne=!1;else{m=Ub(h,a,V,m,!1);const Fn=u.listen(ot,f,m);$.push(m,Fn),R&&R.push(f,Mt,Be,Be+1)}}else m=Ub(h,a,V,m,!0),ot.addEventListener(f,m,y),$.push(m),R&&R.push(f,Mt,Be,y)}else m=Ub(h,a,V,m,!1);const Ie=h.outputs;let $e;if(ne&&null!==Ie&&($e=Ie[f])){const it=$e.length;if(it)for(let ot=0;ot<it;ot+=2){const es=a[$e[ot]][$e[ot+1]].subscribe(m),nu=$.length;$.push(m,es),R&&R.push(f,h.index,nu,-(nu+1))}}}function bD(o,a,u,h){try{return!1!==u(h)}catch(f){return LE(o,f),!1}}function Ub(o,a,u,h,f){return function m(y){if(y===Function)return h;const C=2&o.flags?Ui(o.index,a):a;0==(32&a[2])&&OE(C);let x=bD(a,0,h,y),T=m.__ngNextListenerFn__;for(;T;)x=bD(a,0,T,y)&&x,T=T.__ngNextListenerFn__;return f&&!1===x&&(y.preventDefault(),y.returnValue=!1),x}}function wD(o=1){return function Ss(o){return(Et.lFrame.contextLView=function Uf(o,a){for(;o>0;)a=a[15],o--;return a}(o,Et.lFrame.contextLView))[8]}(o)}function $I(o,a){let u=null;const h=function Py(o){const a=o.attrs;if(null!=a){const u=a.indexOf(5);if(0==(1&u))return a[u+1]}return null}(o);for(let f=0;f<a.length;f++){const m=a[f];if("*"!==m){if(null===h?gE(o,m,!0):GT(h,m))return f}else u=f}return u}function CD(o){const a=Oe()[16][6];if(!a.projection){const h=a.projection=io(o?o.length:1,null),f=h.slice();let m=a.child;for(;null!==m;){const y=o?$I(m,o):0;null!==y&&(f[y]?f[y].projectionNext=m:h[y]=m,f[y]=m),m=m.next}}}function Hb(o,a=0,u){const h=Oe(),f=tn(),m=ch(f,20+o,16,null,u||null);null===m.projection&&(m.projection=a),yu(),64!=(64&m.flags)&&function HT(o,a,u){Ki(a[11],0,a,u,Fg(o,u,a),uE(u.parent||a[6],u,a))}(f,h,m)}function ID(o,a,u,h,f){const m=o[u+1],y=null===a;let C=h?be(m):sr(m),x=!1;for(;0!==C&&(!1===x||y);){const R=o[C+1];Xl(o[C],a)&&(x=!0,o[C+1]=h?Fy(R):F(R)),C=h?be(R):sr(R)}x&&(o[u+1]=h?F(m):Fy(m))}function Xl(o,a){return null===o||null==a||(Array.isArray(o)?o[1]:o)===a||!(!Array.isArray(o)||"string"!=typeof a)&&sa(o,a)>=0}function zb(o,a,u){return lo(o,a,u,!1),zb}function $b(o,a){return lo(o,a,null,!0),$b}function lo(o,a,u,h){const f=Oe(),m=tn(),y=Xs(2);m.firstUpdatePass&&function Kr(o,a,u,h){const f=o.data;if(null===f[u+1]){const m=f[Hi()],y=function qb(o,a){return a>=o.expandoStartIndex}(o,u);(function v_(o,a){return 0!=(o.flags&(a?16:32))})(m,h)&&null===a&&!y&&(a=!1),a=function Wb(o,a,u,h){const f=Ec(o);let m=h?a.residualClasses:a.residualStyles;if(null===f)0===(h?a.classBindings:a.styleBindings)&&(u=Ch(u=xp(null,o,a,u,h),a.attrs,h),m=null);else{const y=a.directiveStylingLast;if(-1===y||o[y]!==f)if(u=xp(f,o,a,u,h),null===m){let x=function ps(o,a,u){const h=u?a.classBindings:a.styleBindings;if(0!==sr(h))return o[be(h)]}(o,a,h);void 0!==x&&Array.isArray(x)&&(x=xp(null,o,a,x[1],h),x=Ch(x,a.attrs,h),function RD(o,a,u,h){o[be(u?a.classBindings:a.styleBindings)]=h}(o,a,h,x))}else m=function OD(o,a,u){let h;const f=a.directiveEnd;for(let m=1+a.directiveStylingLast;m<f;m++)h=Ch(h,o[m].hostAttrs,u);return Ch(h,a.attrs,u)}(o,a,h)}return void 0!==m&&(h?a.residualClasses=m:a.residualStyles=m),u}(f,m,a,h),function WI(o,a,u,h,f,m){let y=m?a.classBindings:a.styleBindings,C=be(y),x=sr(y);o[h]=u;let R,T=!1;if(Array.isArray(u)){const V=u;R=V[1],(null===R||sa(V,R)>0)&&(T=!0)}else R=u;if(f)if(0!==x){const $=be(o[C+1]);o[h+1]=Ny($,C),0!==$&&(o[$+1]=jg(o[$+1],h)),o[C+1]=function ga(o,a){return 131071&o|a<<17}(o[C+1],h)}else o[h+1]=Ny(C,0),0!==C&&(o[C+1]=jg(o[C+1],h)),C=h;else o[h+1]=Ny(x,0),0===C?C=h:o[x+1]=jg(o[x+1],h),x=h;T&&(o[h+1]=F(o[h+1])),ID(o,R,h,!0),ID(o,R,h,!1),function $N(o,a,u,h,f){const m=f?o.residualClasses:o.residualStyles;null!=m&&"string"==typeof a&&sa(m,a)>=0&&(u[h+1]=Fy(u[h+1]))}(a,R,o,h,m),y=Ny(C,x),m?a.classBindings=y:a.styleBindings=y}(f,m,a,u,y,h)}}(m,o,y,h),a!==Wt&&Or(f,y,a)&&function ND(o,a,u,h,f,m,y,C){if(!(3&a.type))return;const x=o.data,T=x[C+1];Jl(function vE(o){return 1==(1&o)}(T)?FD(x,a,u,f,sr(T),y):void 0)||(Jl(m)||function Wr(o){return 2==(2&o)}(T)&&(m=FD(x,null,u,f,C,y)),function Vg(o,a,u,h,f){const m=Vn(o);if(a)f?m?o.addClass(u,h):u.classList.add(h):m?o.removeClass(u,h):u.classList.remove(h);else{let y=-1===h.indexOf("-")?void 0:el.DashCase;if(null==f)m?o.removeStyle(u,h,y):u.style.removeProperty(h);else{const C="string"==typeof f&&f.endsWith("!important");C&&(f=f.slice(0,-10),y|=el.Important),m?o.setStyle(u,h,f,y):u.style.setProperty(h,f,C?"important":"")}}}(h,y,$o(Hi(),u),f,m))}(m,m.data[Hi()],f,f[11],o,f[y+1]=function LD(o,a){return null==o||("string"==typeof a?o+=a:"object"==typeof o&&(o=pe(oo(o)))),o}(a,u),h,y)}function xp(o,a,u,h,f){let m=null;const y=u.directiveEnd;let C=u.directiveStylingLast;for(-1===C?C=u.directiveStart:C++;C<y&&(m=a[C],h=Ch(h,m.hostAttrs,f),m!==o);)C++;return null!==o&&(u.directiveStylingLast=C),h}function Ch(o,a,u){const h=u?1:2;let f=-1;if(null!==a)for(let m=0;m<a.length;m++){const y=a[m];"number"==typeof y?f=y:f===h&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),Ci(o,y,!!u||a[++m]))}return void 0===o?null:o}function FD(o,a,u,h,f,m){const y=null===a;let C;for(;f>0;){const x=o[f],T=Array.isArray(x),R=T?x[1]:x,V=null===R;let $=u[f+1];$===Wt&&($=V?yt:void 0);let ne=V?Ac($,h):R===h?$:void 0;if(T&&!Jl(ne)&&(ne=Ac(x,h)),Jl(ne)&&(C=ne,y))return C;const Ie=o[f+1];f=y?be(Ie):sr(Ie)}if(null!==a){let x=m?a.residualClasses:a.residualStyles;null!=x&&(C=Ac(x,h))}return C}function Jl(o){return void 0!==o}function Kb(o,a=""){const u=Oe(),h=tn(),f=o+20,m=h.firstCreatePass?ch(h,f,1,a,null):h.data[f],y=u[f]=function _y(o,a){return Vn(o)?o.createText(a):o.createTextNode(a)}(u[11],a);Lg(h,u,y,m),fr(m,!1)}function Qb(o){return Sp("",o,""),Qb}function Sp(o,a,u){const h=Oe(),f=function Ql(o,a,u,h){return Or(o,xs(),u)?a+we(u)+h:Wt}(h,o,a,u);return f!==Wt&&_a(h,Hi(),f),Sp}function Eh(o,a,u,h,f){const m=Oe(),y=function gh(o,a,u,h,f,m){const C=jc(o,ds(),u,f);return Xs(2),C?a+we(u)+h+we(f)+m:Wt}(m,o,a,u,h,f);return y!==Wt&&_a(m,Hi(),y),Eh}function Mp(o,a,u,h,f,m,y,C,x){const T=Oe(),R=ba(T,o,a,u,h,f,m,y,C,x);return R!==Wt&&_a(T,Hi(),R),Mp}function Dh(o,a,u){const h=Oe();return Or(h,xs(),a)&&Ns(tn(),si(),h,o,a,h[11],u,!0),Dh}function Ap(o,a,u){const h=Oe();if(Or(h,xs(),a)){const m=tn(),y=si();Ns(m,y,h,o,a,fh(Ec(m.data),y,h),u,!0)}return Ap}const Yu=void 0;var zD=["en",[["a","p"],["AM","PM"],Yu],[["AM","PM"],Yu,Yu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Yu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Yu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Yu,"{1} 'at' {0}",Yu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function iA(o){const u=Math.floor(Math.abs(o)),h=o.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===h?1:5}];let xh={};function kp(o){const a=function I_(o){return o.toLowerCase().replace(/_/g,"-")}(o);let u=T_(a);if(u)return u;const h=a.split("-")[0];if(u=T_(h),u)return u;if("en"===h)return zD;throw new Error(`Missing locale data for the locale "${o}".`)}function qD(o){return kp(o)[At.PluralCase]}function T_(o){return o in xh||(xh[o]=en.ng&&en.ng.common&&en.ng.common.locales&&en.ng.common.locales[o]),xh[o]}var At=(()=>((At=At||{})[At.LocaleId=0]="LocaleId",At[At.DayPeriodsFormat=1]="DayPeriodsFormat",At[At.DayPeriodsStandalone=2]="DayPeriodsStandalone",At[At.DaysFormat=3]="DaysFormat",At[At.DaysStandalone=4]="DaysStandalone",At[At.MonthsFormat=5]="MonthsFormat",At[At.MonthsStandalone=6]="MonthsStandalone",At[At.Eras=7]="Eras",At[At.FirstDayOfWeek=8]="FirstDayOfWeek",At[At.WeekendRange=9]="WeekendRange",At[At.DateFormat=10]="DateFormat",At[At.TimeFormat=11]="TimeFormat",At[At.DateTimeFormat=12]="DateTimeFormat",At[At.NumberSymbols=13]="NumberSymbols",At[At.NumberFormats=14]="NumberFormats",At[At.CurrencyCode=15]="CurrencyCode",At[At.CurrencySymbol=16]="CurrencySymbol",At[At.CurrencyName=17]="CurrencyName",At[At.Currencies=18]="Currencies",At[At.Directionality=19]="Directionality",At[At.PluralCase=20]="PluralCase",At[At.ExtraData=21]="ExtraData",At))();const Rp="en-US";let Pp=Rp;function E0(o,a,u,h,f){if(o=ae(o),Array.isArray(o))for(let m=0;m<o.length;m++)E0(o[m],a,u,h,f);else{const m=tn(),y=Oe();let C=Hu(o)?o:ae(o.provide),x=GE(o);const T=ei(),R=1048575&T.providerIndexes,V=T.directiveStart,$=T.providerIndexes>>20;if(Hu(o)||!o.multi){const ne=new Ha(x,f,wp),Ie=Oh(C,a,f?R:R+$,V);-1===Ie?(Ir(_n(T,y),m,C),D0(m,o,a.length),a.push(C),T.directiveStart++,T.directiveEnd++,f&&(T.providerIndexes+=1048576),u.push(ne),y.push(ne)):(u[Ie]=ne,y[Ie]=ne)}else{const ne=Oh(C,a,R+$,V),Ie=Oh(C,a,R,R+$),$e=ne>=0&&u[ne],it=Ie>=0&&u[Ie];if(f&&!it||!f&&!$e){Ir(_n(T,y),m,C);const ot=function dx(o,a,u,h,f){const m=new Ha(o,u,wp);return m.multi=[],m.index=a,m.componentProviders=0,ux(m,f,h&&!u),m}(f?B_:jp,u.length,f,h,x);!f&&it&&(u[Ie].providerFactory=ot),D0(m,o,a.length,0),a.push(C),T.directiveStart++,T.directiveEnd++,f&&(T.providerIndexes+=1048576),u.push(ot),y.push(ot)}else D0(m,o,ne>-1?ne:Ie,ux(u[f?Ie:ne],x,!f&&h));!f&&h&&it&&u[Ie].componentProviders++}}}function D0(o,a,u,h){const f=Hu(a),m=function $E(o){return!!o.useClass}(a);if(f||m){const x=(m?ae(a.useClass):a).prototype.ngOnDestroy;if(x){const T=o.destroyHooks||(o.destroyHooks=[]);if(!f&&a.multi){const R=T.indexOf(u);-1===R?T.push(u,[h,x]):T[R+1].push(h,x)}else T.push(u,x)}}}function ux(o,a,u){return u&&o.componentProviders++,o.multi.push(a)-1}function Oh(o,a,u,h){for(let f=u;f<h;f++)if(a[f]===o)return f;return-1}function jp(o,a,u,h){return Gp(this.multi,[])}function B_(o,a,u,h){const f=this.multi;let m;if(this.providerFactory){const y=this.providerFactory.componentProviders,C=So(u,u[1],this.providerFactory.index,h);m=C.slice(0,y),Gp(f,m);for(let x=y;x<C.length;x++)m.push(C[x])}else m=[],Gp(f,m);return m}function Gp(o,a){for(let u=0;u<o.length;u++)a.push((0,o[u])());return a}function Ph(o,a=[]){return u=>{u.providersResolver=(h,f)=>function C0(o,a,u){const h=tn();if(h.firstCreatePass){const f=Vr(o);E0(u,h.data,h.blueprint,f,!0),E0(a,h.data,h.blueprint,f,!1)}}(h,f?f(o):o,a)}}class hx{}class wA{resolveComponentFactory(a){throw function Qi(o){const a=Error(`No component factory found for ${pe(o)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=o,a}(a)}}let V_=(()=>{class o{}return o.NULL=new wA,o})();function CA(){return Ju(ei(),Oe())}function Ju(o,a){return new Nh(Vi(o,a))}let Nh=(()=>{class o{constructor(u){this.nativeElement=u}}return o.__NG_ELEMENT_ID__=CA,o})();function fx(o){return o instanceof Nh?o.nativeElement:o}class M0{}let nc=(()=>{class o{}return o.__NG_ELEMENT_ID__=()=>function EA(){const o=Oe(),u=Ui(ei().index,o);return function px(o){return o[11]}(Mr(u)?u:o)}(),o})(),T0=(()=>{class o{}return o.\u0275prov=fn({token:o,providedIn:"root",factory:()=>null}),o})();class Fh{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const I0=new Fh("13.2.7"),$p={};function ed(o,a,u,h,f=!1){for(;null!==u;){const m=a[u.index];if(null!==m&&h.push(On(m)),hr(m))for(let C=10;C<m.length;C++){const x=m[C],T=x[1].firstChild;null!==T&&ed(x[1],x,T,h)}const y=u.type;if(8&y)ed(o,a,u.child,h);else if(32&y){const C=Og(u,a);let x;for(;x=C();)h.push(x)}else if(16&y){const C=fE(a,u);if(Array.isArray(C))h.push(...C);else{const x=cp(a[16]);ed(x[1],x,C,h,!0)}}u=f?u.projectionNext:u.next}return h}class Lh{constructor(a,u){this._lView=a,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,u=a[1];return ed(u,a,u.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if(hr(a)){const u=a[8],h=u?u.indexOf(this):-1;h>-1&&(Cy(a,h),zl(u,h))}this._attachedToViewContainer=!1}Ey(this._lView[1],this._lView)}onDestroy(a){xE(this._lView[1],this._lView,null,a)}markForCheck(){OE(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){hh(this._lView[1],this._lView,this.context)}checkNoChanges(){!function ob(o,a,u){Va(!0);try{hh(o,a,u)}finally{Va(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Ve(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function sE(o,a){Bg(o,a,a[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new Ve(902,"");this._appRef=a}}class A0 extends Lh{constructor(a){super(a),this._view=a}detectChanges(){NE(this._view)}checkNoChanges(){!function ab(o){Va(!0);try{NE(o)}finally{Va(!1)}}(this._view)}get context(){return null}}class qp extends V_{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const u=gt(a);return new U_(u,this.ngModule)}}function mx(o){const a=[];for(let u in o)o.hasOwnProperty(u)&&a.push({propName:o[u],templateName:u});return a}class U_ extends hx{constructor(a,u){super(),this.componentDef=a,this.ngModule=u,this.componentType=a.type,this.selector=function mN(o){return o.map(pN).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return mx(this.componentDef.inputs)}get outputs(){return mx(this.componentDef.outputs)}create(a,u,h,f){const m=(f=f||this.ngModule)?function Wp(o,a){return{get:(u,h,f)=>{const m=o.get(u,$p,f);return m!==$p||h===$p?m:a.get(u,h,f)}}}(a,f.injector):a,y=m.get(M0,xl),C=m.get(T0,null),x=y.createRenderer(null,this.componentDef),T=this.componentDef.selectors[0][0]||"div",R=h?function DE(o,a,u){if(Vn(o))return o.selectRootElement(a,u===Jt.ShadowDom);let h="string"==typeof a?o.querySelector(a):a;return h.textContent="",h}(x,h,this.componentDef.encapsulation):yy(y.createRenderer(null,this.componentDef),T,function gx(o){const a=o.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(T)),V=this.componentDef.onPush?576:528,$=function mb(o,a){return{components:[],scheduler:o||kT,clean:lb,playerHandler:a||null,flags:0}}(),ne=Zg(0,null,null,1,0,null,null,null,null,null),Ie=mp(null,ne,$,V,null,null,y,x,C,m);let $e,it;Wo(Ie);try{const ot=function i_(o,a,u,h,f,m){const y=u[1];u[20]=o;const x=ch(y,20,2,"#host",null),T=x.mergedAttrs=a.hostAttrs;null!==T&&(ph(x,T,!0),null!==o&&(Ye(f,o,T),null!==x.classes&&ky(f,o,x.classes),null!==x.styles&&pE(f,o,x.styles)));const R=h.createRenderer(o,a),V=mp(u,CE(a),null,a.onPush?64:16,u[20],x,h,R,m||null,null);return y.firstCreatePass&&(Ir(_n(x,u),y,a.type),cI(y,x),AE(x,u.length,1)),sb(u,V),u[20]=V}(R,this.componentDef,Ie,y,x);if(R)if(h)Ye(x,R,["ng-version",I0.full]);else{const{attrs:Be,classes:Mt}=function gN(o){const a=[],u=[];let h=1,f=2;for(;h<o.length;){let m=o[h];if("string"==typeof m)2===f?""!==m&&a.push(m,o[++h]):8===f&&u.push(m);else{if(!ma(f))break;f=m}h++}return{attrs:a,classes:u}}(this.componentDef.selectors[0]);Be&&Ye(x,R,Be),Mt&&Mt.length>0&&ky(x,R,Mt.join(" "))}if(it=ri(ne,20),void 0!==u){const Be=it.projection=[];for(let Mt=0;Mt<this.ngContentSelectors.length;Mt++){const Bt=u[Mt];Be.push(null!=Bt?Array.from(Bt):null)}}$e=function r_(o,a,u,h,f){const m=u[1],y=function TE(o,a,u){const h=ei();o.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),nb(o,h,a,Uc(o,a,1,null),u));const f=So(a,o,h.directiveStart,h);qr(f,a);const m=Vi(h,a);return m&&qr(m,a),f}(m,u,a);if(h.components.push(y),o[8]=y,f&&f.forEach(x=>x(y,a)),a.contentQueries){const x=ei();a.contentQueries(1,y,x.directiveStart)}const C=ei();return!m.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(Js(C.index),eb(u[1],C,0,C.directiveStart,C.directiveEnd,a),lI(a,y)),y}(ot,this.componentDef,Ie,$,[EI]),Lu(ne,Ie,null)}finally{Ua()}return new k0(this.componentType,$e,Ju(it,Ie),Ie,it)}}class k0 extends class zp{}{constructor(a,u,h,f,m){super(),this.location=h,this._rootLView=f,this._tNode=m,this.instance=u,this.hostView=this.changeDetectorRef=new A0(f),this.componentType=a}get injector(){return new ta(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}class ic{}class R0{}const td=new Map;class Vs extends ic{constructor(a,u){super(),this._parent=u,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new qp(this);const h=Qt(a);this._bootstrapComponents=pa(h.bootstrap),this._r3Injector=jE(a,u,[{provide:ic,useValue:this},{provide:V_,useValue:this.componentFactoryResolver}],pe(a)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(a)}get(a,u=va.THROW_IF_NOT_FOUND,h=Ct.Default){return a===va||a===ic||a===cb?this:this._r3Injector.get(a,u,h)}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class H_ extends R0{constructor(a){super(),this.moduleType=a,null!==Qt(a)&&function bx(o){const a=new Set;!function u(h){const f=Qt(h,!0),m=f.id;null!==m&&(function O0(o,a,u){if(a&&a!==u)throw new Error(`Duplicate module registered for ${o} - ${pe(a)} vs ${pe(a.name)}`)}(m,td.get(m),h),td.set(m,h));const y=pa(f.imports);for(const C of y)a.has(C)||(a.add(C),u(C))}(o)}(a)}create(a){return new Vs(this.moduleType,a)}}function nd(o,a,u,h){return function L0(o,a,u,h,f,m){const y=a+u;return Or(o,y,f)?function rl(o,a,u){return o[a]=u}(o,y+1,m?h.call(m,f):h(f)):function Yp(o,a){const u=o[a];return u===Wt?void 0:u}(o,y+1)}(Oe(),function Ri(){const o=Et.lFrame;let a=o.bindingRootIndex;return-1===a&&(a=o.bindingRootIndex=o.tView.bindingStartIndex),a}(),o,a,u,h)}function ye(o){return a=>{setTimeout(o,void 0,a)}}const Ne=class ct extends c.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,u,h){var f,m,y;let C=a,x=u||(()=>null),T=h;if(a&&"object"==typeof a){const V=a;C=null===(f=V.next)||void 0===f?void 0:f.bind(V),x=null===(m=V.error)||void 0===m?void 0:m.bind(V),T=null===(y=V.complete)||void 0===y?void 0:y.bind(V)}this.__isAsync&&(x=ye(x),C&&(C=ye(C)),T&&(T=ye(T)));const R=super.subscribe({next:C,error:x,complete:T});return a instanceof G.w0&&a.add(R),R}};function wr(){return this._results[Zl()]()}class Qp{constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=Zl(),h=Qp.prototype;h[u]||(h[u]=wr)}get changes(){return this._changes||(this._changes=new Ne)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,u){return this._results.reduce(a,u)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,u){const h=this;h.dirty=!1;const f=pr(a);(this._changesDetected=!function zf(o,a,u){if(o.length!==a.length)return!1;for(let h=0;h<o.length;h++){let f=o[h],m=a[h];if(u&&(f=u(f),m=u(m)),m!==f)return!1}return!0}(h._results,f,u))&&(h._results=f,h.length=f.length,h.last=f[this.length-1],h.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Xp=(()=>{class o{}return o.__NG_ELEMENT_ID__=OA,o})();const kA=Xp,RA=class extends kA{constructor(a,u,h){super(),this._declarationLView=a,this._declarationTContainer=u,this.elementRef=h}createEmbeddedView(a){const u=this._declarationTContainer.tViews,h=mp(this._declarationLView,u,a,16,null,u.declTNode,null,null,null,null);h[17]=this._declarationLView[this._declarationTContainer.index];const m=this._declarationLView[19];return null!==m&&(h[19]=m.createEmbeddedView(u)),Lu(u,h,a),new Lh(h)}};function OA(){return z_(ei(),Oe())}function z_(o,a){return 4&o.type?new RA(a,o,Ju(o,a)):null}let Jp=(()=>{class o{}return o.__NG_ELEMENT_ID__=PA,o})();function PA(){return rd(ei(),Oe())}const ZN=Jp,Ex=class extends ZN{constructor(a,u,h){super(),this._lContainer=a,this._hostTNode=u,this._hostLView=h}get element(){return Ju(this._hostTNode,this._hostLView)}get injector(){return new ta(this._hostTNode,this._hostLView)}get parentInjector(){const a=Xo(this._hostTNode,this._hostLView);if(Ga(a)){const u=Ko(a,this._hostLView),h=za(a);return new ta(u[1].data[h+8],u)}return new ta(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const u=V0(this._lContainer);return null!==u&&u[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,u,h){const f=a.createEmbeddedView(u||{});return this.insert(f,h),f}createComponent(a,u,h,f,m){const y=a&&!function jl(o){return"function"==typeof o}(a);let C;if(y)C=u;else{const V=u||{};C=V.index,h=V.injector,f=V.projectableNodes,m=V.ngModuleRef}const x=y?a:new U_(gt(a)),T=h||this.parentInjector;if(!m&&null==x.ngModule){const $=(y?T:this.parentInjector).get(ic,null);$&&(m=$)}const R=x.create(T,f,void 0,m);return this.insert(R.hostView,C),R}insert(a,u){const h=a._lView,f=h[1];if(function gu(o){return hr(o[3])}(h)){const R=this.indexOf(a);if(-1!==R)this.detach(R);else{const V=h[3],$=new Ex(V,V[6],V[3]);$.detach($.indexOf(a))}}const m=this._adjustIndex(u),y=this._lContainer;!function wy(o,a,u,h){const f=10+h,m=u.length;h>0&&(u[f-1][4]=a),h<m-10?(a[4]=u[f],Gl(u,10+h,a)):(u.push(a),a[4]=null),a[3]=u;const y=a[17];null!==y&&u!==y&&function oh(o,a){const u=o[9];a[16]!==a[3][3][16]&&(o[2]=!0),null===u?o[9]=[a]:u.push(a)}(y,a);const C=a[19];null!==C&&C.insertView(o),a[2]|=128}(f,h,y,m);const C=Ty(m,y),x=h[11],T=dp(x,y[7]);return null!==T&&function LT(o,a,u,h,f,m){h[0]=f,h[6]=a,Bg(o,h,u,1,f,m)}(f,y[6],x,h,T,C),a.attachToViewContainerRef(),Gl(zt(y),m,a),a}move(a,u){return this.insert(a,u)}indexOf(a){const u=V0(this._lContainer);return null!==u?u.indexOf(a):-1}remove(a){const u=this._adjustIndex(a,-1),h=Cy(this._lContainer,u);h&&(zl(zt(this._lContainer),u),Ey(h[1],h))}detach(a){const u=this._adjustIndex(a,-1),h=Cy(this._lContainer,u);return h&&null!=zl(zt(this._lContainer),u)?new Lh(h):null}_adjustIndex(a,u=0){return null==a?this.length+u:a}};function V0(o){return o[8]}function zt(o){return o[8]||(o[8]=[])}function rd(o,a){let u;const h=a[o.index];if(hr(h))u=h;else{let f;if(8&o.type)f=On(h);else{const m=a[11];f=m.createComment("");const y=Vi(o,a);ao(m,dp(m,y),f,function UT(o,a){return Vn(o)?o.nextSibling(a):a.nextSibling}(m,y),!1)}a[o.index]=u=dI(h,a,f,o),sb(a,u)}return new Ex(u,o,a)}class sd{constructor(a){this.queryList=a,this.matches=null}clone(){return new sd(this.queryList)}setDirty(){this.queryList.setDirty()}}class mn{constructor(a=[]){this.queries=a}createEmbeddedView(a){const u=a.queries;if(null!==u){const h=null!==a.contentQueries?a.contentQueries[0]:u.length,f=[];for(let m=0;m<h;m++){const y=u.getByIndex(m);f.push(this.queries[y.indexInDeclarationView].clone())}return new mn(f)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let u=0;u<this.queries.length;u++)null!==em(a,u).matches&&this.queries[u].setDirty()}}class xx{constructor(a,u,h=null){this.predicate=a,this.flags=u,this.read=h}}class xi{constructor(a=[]){this.queries=a}elementStart(a,u){for(let h=0;h<this.queries.length;h++)this.queries[h].elementStart(a,u)}elementEnd(a){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(a)}embeddedTView(a){let u=null;for(let h=0;h<this.length;h++){const f=null!==u?u.length:0,m=this.getByIndex(h).embeddedTView(a,f);m&&(m.indexInDeclarationView=h,null!==u?u.push(m):u=[m])}return null!==u?new xi(u):null}template(a,u){for(let h=0;h<this.queries.length;h++)this.queries[h].template(a,u)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class nt{constructor(a,u=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(a,u){this.isApplyingToNode(u)&&this.matchTNode(a,u)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,u){this.elementStart(a,u)}embeddedTView(a,u){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,u),new nt(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let h=a.parent;for(;null!==h&&8&h.type&&h.index!==u;)h=h.parent;return u===(null!==h?h.index:-1)}return this._appliesToNextNode}matchTNode(a,u){const h=this.metadata.predicate;if(Array.isArray(h))for(let f=0;f<h.length;f++){const m=h[f];this.matchTNodeWithReadOption(a,u,$_(u,m)),this.matchTNodeWithReadOption(a,u,Is(u,a,m,!1,!1))}else h===Xp?4&u.type&&this.matchTNodeWithReadOption(a,u,-1):this.matchTNodeWithReadOption(a,u,Is(u,a,h,!1,!1))}matchTNodeWithReadOption(a,u,h){if(null!==h){const f=this.metadata.read;if(null!==f)if(f===Nh||f===Jp||f===Xp&&4&u.type)this.addMatch(u.index,-2);else{const m=Is(u,a,f,!1,!1);null!==m&&this.addMatch(u.index,m)}else this.addMatch(u.index,h)}}addMatch(a,u){null===this.matches?this.matches=[a,u]:this.matches.push(a,u)}}function $_(o,a){const u=o.localNames;if(null!==u)for(let h=0;h<u.length;h+=2)if(u[h]===a)return u[h+1];return null}function od(o,a,u,h){return-1===u?function U0(o,a){return 11&o.type?Ju(o,a):4&o.type?z_(o,a):null}(a,o):-2===u?function q_(o,a,u){return u===Nh?Ju(a,o):u===Xp?z_(a,o):u===Jp?rd(a,o):void 0}(o,a,h):So(o,o[1],u,a)}function Vh(o,a,u,h){const f=a[19].queries[h];if(null===f.matches){const m=o.data,y=u.matches,C=[];for(let x=0;x<y.length;x+=2){const T=y[x];C.push(T<0?null:od(a,m[T],y[x+1],u.metadata.read))}f.matches=C}return f.matches}function W_(o,a,u,h){const f=o.queries.getByIndex(u),m=f.matches;if(null!==m){const y=Vh(o,a,f,u);for(let C=0;C<m.length;C+=2){const x=m[C];if(x>0)h.push(y[C/2]);else{const T=m[C+1],R=a[-x];for(let V=10;V<R.length;V++){const $=R[V];$[17]===$[3]&&W_($[1],$,T,h)}if(null!==R[9]){const V=R[9];for(let $=0;$<V.length;$++){const ne=V[$];W_(ne[1],ne,T,h)}}}}}return h}function H0(o){const a=Oe(),u=tn(),h=Fl();wu(h+1);const f=em(u,h);if(o.dirty&&Ba(a)===(2==(2&f.metadata.flags))){if(null===f.matches)o.reset([]);else{const m=f.crossesNgTemplate?W_(u,a,h,[]):Vh(u,a,f,h);o.reset(m,fx),o.notifyOnChanges()}return!0}return!1}function Us(o,a,u){const h=tn();h.firstCreatePass&&(Z_(h,new xx(o,a,u),-1),2==(2&a)&&(h.staticViewQueries=!0)),sc(h,Oe(),a)}function Y_(o,a,u,h){const f=tn();if(f.firstCreatePass){const m=ei();Z_(f,new xx(a,u,h),m.index),function ge(o,a){const u=o.contentQueries||(o.contentQueries=[]);a!==(u.length?u[u.length-1]:-1)&&u.push(o.queries.length-1,a)}(f,o),2==(2&u)&&(f.staticContentQueries=!0)}sc(f,Oe(),u)}function j0(){return function Sx(o,a){return o[19].queries[a].queryList}(Oe(),Fl())}function sc(o,a,u){const h=new Qp(4==(4&u));xE(o,a,h,h.destroy),null===a[19]&&(a[19]=new mn),a[19].queries.push(new sd(h))}function Z_(o,a,u){null===o.queries&&(o.queries=new xi),o.queries.track(new nt(a,u))}function em(o,a){return o.queries.getByIndex(a)}function rm(...o){}const Z0=new li("Application Initializer");let Yn=(()=>{class o{constructor(u){this.appInits=u,this.resolve=rm,this.reject=rm,this.initialized=!1,this.done=!1,this.donePromise=new Promise((h,f)=>{this.resolve=h,this.reject=f})}runInitializers(){if(this.initialized)return;const u=[],h=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const m=this.appInits[f]();if(bh(m))u.push(m);else if(Vb(m)){const y=new Promise((C,x)=>{m.subscribe({complete:C,error:x})});u.push(y)}}Promise.all(u).then(()=>{h()}).catch(f=>{this.reject(f)}),0===u.length&&h(),this.initialized=!0}}return o.\u0275fac=function(u){return new(u||o)(Ue(Z0,8))},o.\u0275prov=fn({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const Px=new li("AppId",{providedIn:"root",factory:function K0(){return`${Q0()}${Q0()}${Q0()}`}});function Q0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const qh=new li("Platform Initializer"),sm=new li("Platform ID"),om=new li("appBootstrapListener");let X0=(()=>{class o{log(u){console.log(u)}warn(u){console.warn(u)}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=fn({token:o,factory:o.\u0275fac}),o})();const J0=new li("LocaleId",{providedIn:"root",factory:()=>It(J0,Ct.Optional|Ct.SkipSelf)||function Pr(){return"undefined"!=typeof $localize&&$localize.locale||Rp}()}),GA=new li("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class $A{constructor(a,u){this.ngModuleFactory=a,this.componentFactories=u}}let qA=(()=>{class o{compileModuleSync(u){return new H_(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const h=this.compileModuleSync(u),m=pa(Qt(u).declarations).reduce((y,C)=>{const x=gt(C);return x&&y.push(new U_(x)),y},[]);return new $A(h,m)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=fn({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const Wh=(()=>Promise.resolve(0))();function ew(o){"undefined"==typeof Zone?Wh.then(()=>{o&&o.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",o)}class Lo{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:h=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ne(!1),this.onMicrotaskEmpty=new Ne(!1),this.onStable=new Ne(!1),this.onError=new Ne(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!h&&u,f.shouldCoalesceRunChangeDetection=h,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function Nx(){let o=en.requestAnimationFrame,a=en.cancelAnimationFrame;if("undefined"!=typeof Zone&&o&&a){const u=o[Zone.__symbol__("OriginalDelegate")];u&&(o=u);const h=a[Zone.__symbol__("OriginalDelegate")];h&&(a=h)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function YA(o){const a=()=>{!function Yh(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(en,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,am(o),o.isCheckStableRunning=!0,J_(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),am(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,h,f,m,y,C)=>{try{return ev(o),u.invokeTask(f,m,y,C)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||o.shouldCoalesceRunChangeDetection)&&a(),tv(o)}},onInvoke:(u,h,f,m,y,C,x)=>{try{return ev(o),u.invoke(f,m,y,C,x)}finally{o.shouldCoalesceRunChangeDetection&&a(),tv(o)}},onHasTask:(u,h,f,m)=>{u.hasTask(f,m),h===f&&("microTask"==m.change?(o._hasPendingMicrotasks=m.microTask,am(o),J_(o)):"macroTask"==m.change&&(o.hasPendingMacrotasks=m.macroTask))},onHandleError:(u,h,f,m)=>(u.handleError(f,m),o.runOutsideAngular(()=>o.onError.emit(m)),!1)})}(f)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Lo.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Lo.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(a,u,h){return this._inner.run(a,u,h)}runTask(a,u,h,f){const m=this._inner,y=m.scheduleEventTask("NgZoneEvent: "+f,a,lc,rm,rm);try{return m.runTask(y,u,h)}finally{m.cancelTask(y)}}runGuarded(a,u,h){return this._inner.runGuarded(a,u,h)}runOutsideAngular(a){return this._outer.run(a)}}const lc={};function J_(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function am(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function ev(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function tv(o){o._nesting--,J_(o)}class Zh{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ne,this.onMicrotaskEmpty=new Ne,this.onStable=new Ne,this.onError=new Ne}run(a,u,h){return a.apply(u,h)}runGuarded(a,u,h){return a.apply(u,h)}runOutsideAngular(a){return a()}runTask(a,u,h,f){return a.apply(u,h)}}let uo=(()=>{class o{constructor(u){this._ngZone=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Lo.assertNotInAngularZone(),ew(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())ew(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(h=>!h.updateCb||!h.updateCb(u)||(clearTimeout(h.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,h,f){let m=-1;h&&h>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==m),u(this._didWork,this.getPendingTasks())},h)),this._callbacks.push({doneCb:u,timeoutId:m,updateCb:f})}whenStable(u,h,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,h,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(u,h,f){return[]}}return o.\u0275fac=function(u){return new(u||o)(Ue(Lo))},o.\u0275prov=fn({token:o,factory:o.\u0275fac}),o})(),tw=(()=>{class o{constructor(){this._applications=new Map,cm.addToWindow(this)}registerApplication(u,h){this._applications.set(u,h)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,h=!0){return cm.findTestabilityInTree(this,u,h)}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=fn({token:o,factory:o.\u0275fac}),o})();class lm{addToWindow(a){}findTestabilityInTree(a,u,h){return null}}function Fx(o){cm=o}let ho,cm=new lm;const nw=new li("AllowMultipleToken");class Bx{constructor(a,u){this.name=a,this.token=u}}function um(o,a,u=[]){const h=`Platform: ${a}`,f=new li(h);return(m=[])=>{let y=iw();if(!y||y.injector.get(nw,!1))if(o)o(u.concat(m).concat({provide:f,useValue:!0}));else{const C=u.concat(m).concat({provide:f,useValue:!0},{provide:_p,useValue:"platform"});!function Vx(o){if(ho&&!ho.destroyed&&!ho.injector.get(nw,!1))throw new Ve(400,"");ho=o.get(hd);const a=o.get(qh,null);a&&a.forEach(u=>u())}(va.create({providers:C,name:h}))}return function QA(o){const a=iw();if(!a)throw new Ve(401,"");return a}()}}function iw(){return ho&&!ho.destroyed?ho:null}let hd=(()=>{class o{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,h){const C=function fd(o,a){let u;return u="noop"===o?new Zh:("zone.js"===o?void 0:o)||new Lo({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==a?void 0:a.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==a?void 0:a.ngZoneRunCoalescing)}),u}(h?h.ngZone:void 0,{ngZoneEventCoalescing:h&&h.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:h&&h.ngZoneRunCoalescing||!1}),x=[{provide:Lo,useValue:C}];return C.run(()=>{const T=va.create({providers:x,parent:this.injector,name:u.moduleType.name}),R=u.create(T),V=R.injector.get(Rg,null);if(!V)throw new Ve(402,"");return C.runOutsideAngular(()=>{const $=C.onError.subscribe({next:ne=>{V.handleError(ne)}});R.onDestroy(()=>{Jc(this._modules,R),$.unsubscribe()})}),function Ux(o,a,u){try{const h=u();return bh(h)?h.catch(f=>{throw a.runOutsideAngular(()=>o.handleError(f)),f}):h}catch(h){throw a.runOutsideAngular(()=>o.handleError(h)),h}}(V,C,()=>{const $=R.injector.get(Yn);return $.runInitializers(),$.donePromise.then(()=>(function aA(o){Yt(o,"Expected localeId to be defined"),"string"==typeof o&&(Pp=o.toLowerCase().replace(/_/g,"-"))}(R.injector.get(J0,Rp)||Rp),this._moduleDoBootstrap(R),R))})})}bootstrapModule(u,h=[]){const f=Xc({},h);return function Lx(o,a,u){const h=new H_(u);return Promise.resolve(h)}(0,0,u).then(m=>this.bootstrapModuleFactory(m,f))}_moduleDoBootstrap(u){const h=u.injector.get(nv);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(f=>h.bootstrap(f));else{if(!u.instance.ngDoBootstrap)throw new Ve(403,"");u.instance.ngDoBootstrap(h)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ve(404,"");this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u()),this._destroyed=!0}get destroyed(){return this._destroyed}}return o.\u0275fac=function(u){return new(u||o)(Ue(va))},o.\u0275prov=fn({token:o,factory:o.\u0275fac}),o})();function Xc(o,a){return Array.isArray(a)?a.reduce(Xc,o):Object.assign(Object.assign({},o),a)}let nv=(()=>{class o{constructor(u,h,f,m,y){this._zone=u,this._injector=h,this._exceptionHandler=f,this._componentFactoryResolver=m,this._initStatus=y,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const C=new N.y(T=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{T.next(this._stable),T.complete()})}),x=new N.y(T=>{let R;this._zone.runOutsideAngular(()=>{R=this._zone.onStable.subscribe(()=>{Lo.assertNotInAngularZone(),ew(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,T.next(!0))})})});const V=this._zone.onUnstable.subscribe(()=>{Lo.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{T.next(!1)}))});return()=>{R.unsubscribe(),V.unsubscribe()}});this.isStable=(0,de.T)(C,x.pipe((0,fe.B)()))}bootstrap(u,h){if(!this._initStatus.done)throw new Ve(405,"");let f;f=u instanceof hx?u:this._componentFactoryResolver.resolveComponentFactory(u),this.componentTypes.push(f.componentType);const m=function KA(o){return o.isBoundToModule}(f)?void 0:this._injector.get(ic),C=f.create(va.NULL,[],h||f.selector,m),x=C.location.nativeElement,T=C.injector.get(uo,null),R=T&&C.injector.get(tw);return T&&R&&R.registerApplication(x,T),C.onDestroy(()=>{this.detachView(C.hostView),Jc(this.components,C),R&&R.unregisterApplication(x)}),this._loadComponent(C),C}tick(){if(this._runningTick)throw new Ve(101,"");try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const h=u;this._views.push(h),h.attachToAppRef(this)}detachView(u){const h=u;Jc(this._views,h),h.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(om,[]).concat(this._bootstrapListeners).forEach(f=>f(u))}ngOnDestroy(){this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return o.\u0275fac=function(u){return new(u||o)(Ue(Lo),Ue(va),Ue(Rg),Ue(V_),Ue(Yn))},o.\u0275prov=fn({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function Jc(o,a){const u=o.indexOf(a);u>-1&&o.splice(u,1)}let Kh=!0,jx=!1;function XA(){return jx=!0,Kh}function Mi(){if(jx)throw new Error("Cannot enable prod mode after platform setup.");Kh=!1}let JA=(()=>{class o{}return o.__NG_ELEMENT_ID__=dm,o})();function dm(o){return function ek(o,a,u){if(gc(o)&&!u){const h=Ui(o.index,a);return new Lh(h,h)}return 47&o.type?new Lh(a[16],a):null}(ei(),Oe(),16==(16&o))}class zx{constructor(){}supports(a){return Kl(a)}create(a){return new nn(a)}}const lk=(o,a)=>a;class nn{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||lk}forEachItem(a){let u;for(u=this._itHead;null!==u;u=u._next)a(u)}forEachOperation(a){let u=this._itHead,h=this._removalsHead,f=0,m=null;for(;u||h;){const y=!h||u&&u.currentIndex<Xh(h,f,m)?u:h,C=Xh(y,f,m),x=y.currentIndex;if(y===h)f--,h=h._nextRemoved;else if(u=u._next,null==y.previousIndex)f++;else{m||(m=[]);const T=C-f,R=x-f;if(T!=R){for(let $=0;$<T;$++){const ne=$<m.length?m[$]:m[$]=0,Ie=ne+$;R<=Ie&&Ie<T&&(m[$]=ne+1)}m[y.previousIndex]=R-T}}C!==x&&a(y,C,x)}}forEachPreviousItem(a){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)a(u)}forEachAddedItem(a){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)a(u)}forEachMovedItem(a){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)a(u)}forEachRemovedItem(a){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)a(u)}forEachIdentityChange(a){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)a(u)}diff(a){if(null==a&&(a=[]),!Kl(a))throw new Ve(900,"");return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let f,m,y,u=this._itHead,h=!1;if(Array.isArray(a)){this.length=a.length;for(let C=0;C<this.length;C++)m=a[C],y=this._trackByFn(C,m),null!==u&&Object.is(u.trackById,y)?(h&&(u=this._verifyReinsertion(u,m,y,C)),Object.is(u.item,m)||this._addIdentityChange(u,m)):(u=this._mismatch(u,m,y,C),h=!0),u=u._next}else f=0,function kI(o,a){if(Array.isArray(o))for(let u=0;u<o.length;u++)a(o[u]);else{const u=o[Zl()]();let h;for(;!(h=u.next()).done;)a(h.value)}}(a,C=>{y=this._trackByFn(f,C),null!==u&&Object.is(u.trackById,y)?(h&&(u=this._verifyReinsertion(u,C,y,f)),Object.is(u.item,C)||this._addIdentityChange(u,C)):(u=this._mismatch(u,C,y,f),h=!0),u=u._next,f++}),this.length=f;return this._truncate(u),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,u,h,f){let m;return null===a?m=this._itTail:(m=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null))?(Object.is(a.item,u)||this._addIdentityChange(a,u),this._reinsertAfter(a,m,f)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(h,f))?(Object.is(a.item,u)||this._addIdentityChange(a,u),this._moveAfter(a,m,f)):a=this._addAfter(new ck(u,h),m,f),a}_verifyReinsertion(a,u,h,f){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null);return null!==m?a=this._reinsertAfter(m,a._prev,f):a.currentIndex!=f&&(a.currentIndex=f,this._addToMoves(a,f)),a}_truncate(a){for(;null!==a;){const u=a._next;this._addToRemovals(this._unlink(a)),a=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,u,h){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const f=a._prevRemoved,m=a._nextRemoved;return null===f?this._removalsHead=m:f._nextRemoved=m,null===m?this._removalsTail=f:m._prevRemoved=f,this._insertAfter(a,u,h),this._addToMoves(a,h),a}_moveAfter(a,u,h){return this._unlink(a),this._insertAfter(a,u,h),this._addToMoves(a,h),a}_addAfter(a,u,h){return this._insertAfter(a,u,h),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,u,h){const f=null===u?this._itHead:u._next;return a._next=f,a._prev=u,null===f?this._itTail=a:f._prev=a,null===u?this._itHead=a:u._next=a,null===this._linkedRecords&&(this._linkedRecords=new Qh),this._linkedRecords.put(a),a.currentIndex=h,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const u=a._prev,h=a._next;return null===u?this._itHead=h:u._next=h,null===h?this._itTail=u:h._prev=u,a}_addToMoves(a,u){return a.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Qh),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,u){return a.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class ck{constructor(a,u){this.item=a,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ov{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,u){let h;for(h=this._head;null!==h;h=h._nextDup)if((null===u||u<=h.currentIndex)&&Object.is(h.trackById,a))return h;return null}remove(a){const u=a._prevDup,h=a._nextDup;return null===u?this._head=h:u._nextDup=h,null===h?this._tail=u:h._prevDup=u,null===this._head}}class Qh{constructor(){this.map=new Map}put(a){const u=a.trackById;let h=this.map.get(u);h||(h=new ov,this.map.set(u,h)),h.add(a)}get(a,u){const f=this.map.get(a);return f?f.get(a,u):null}remove(a){const u=a.trackById;return this.map.get(u).remove(a)&&this.map.delete(u),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Xh(o,a,u){const h=o.previousIndex;if(null===h)return h;let f=0;return u&&h<u.length&&(f=u[h]),h+a+f}class fm{constructor(){}supports(a){return a instanceof Map||s_(a)}create(){return new $x}}class $x{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let u;for(u=this._mapHead;null!==u;u=u._next)a(u)}forEachPreviousItem(a){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)a(u)}forEachChangedItem(a){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)a(u)}forEachAddedItem(a){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)a(u)}forEachRemovedItem(a){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)a(u)}diff(a){if(a){if(!(a instanceof Map||s_(a)))throw new Ve(900,"")}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(a,(h,f)=>{if(u&&u.key===f)this._maybeAddToChanges(u,h),this._appendAfter=u,u=u._next;else{const m=this._getOrCreateRecordForKey(f,h);u=this._insertBeforeOrAppend(u,m)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let h=u;null!==h;h=h._nextRemoved)h===this._mapHead&&(this._mapHead=null),this._records.delete(h.key),h._nextRemoved=h._next,h.previousValue=h.currentValue,h.currentValue=null,h._prev=null,h._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,u){if(a){const h=a._prev;return u._next=a,u._prev=h,a._prev=u,h&&(h._next=u),a===this._mapHead&&(this._mapHead=u),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(a,u){if(this._records.has(a)){const f=this._records.get(a);this._maybeAddToChanges(f,u);const m=f._prev,y=f._next;return m&&(m._next=y),y&&(y._prev=m),f._next=null,f._prev=null,f}const h=new qx(a);return this._records.set(a,h),h.currentValue=u,this._addToAdditions(h),h}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,u){Object.is(u,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=u,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,u){a instanceof Map?a.forEach(u):Object.keys(a).forEach(h=>u(a[h],h))}}class qx{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function uw(){return new dw([new zx])}let dw=(()=>{class o{constructor(u){this.factories=u}static create(u,h){if(null!=h){const f=h.factories.slice();u=u.concat(f)}return new o(u)}static extend(u){return{provide:o,useFactory:h=>o.create(u,h||uw()),deps:[[o,new la,new Gr]]}}find(u){const h=this.factories.find(f=>f.supports(u));if(null!=h)return h;throw new Ve(901,"")}}return o.\u0275prov=fn({token:o,providedIn:"root",factory:uw}),o})();function hw(){return new fw([new fm])}let fw=(()=>{class o{constructor(u){this.factories=u}static create(u,h){if(h){const f=h.factories.slice();u=u.concat(f)}return new o(u)}static extend(u){return{provide:o,useFactory:h=>o.create(u,h||hw()),deps:[[o,new la,new Gr]]}}find(u){const h=this.factories.find(m=>m.supports(u));if(h)return h;throw new Ve(901,"")}}return o.\u0275prov=fn({token:o,providedIn:"root",factory:hw}),o})();const Cr=um(null,"core",[{provide:sm,useValue:"unknown"},{provide:hd,deps:[va]},{provide:tw,deps:[]},{provide:X0,deps:[]}]);let pw=(()=>{class o{constructor(u){}}return o.\u0275fac=function(u){return new(u||o)(Ue(nv))},o.\u0275mod=ce({type:o}),o.\u0275inj=un({}),o})()},3942:(ut,Se,L)=>{L.d(Se,{Z:()=>Ve});var c=L(2090),G=L(4859),N=L(9681),de=L(1877);class fe{constructor(we,Ae){this._delegate=we,this.firebase=Ae,(0,N._addComponent)(we,new G.wA("app-compat",()=>this,"PUBLIC")),this.container=we.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(we){this._delegate.automaticDataCollectionEnabled=we}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(we=>{this._delegate.checkDestroyed(),we()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,N.deleteApp)(this._delegate)))}_getService(we,Ae=N._DEFAULT_ENTRY_NAME){var Ke;this._delegate.checkDestroyed();const We=this._delegate.container.getProvider(we);return!We.isInitialized()&&"EXPLICIT"===(null===(Ke=We.getComponent())||void 0===Ke?void 0:Ke.instantiationMode)&&We.initialize(),We.getImmediate({identifier:Ae})}_removeServiceInstance(we,Ae=N._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(we).clearInstance(Ae)}_addComponent(we){(0,N._addComponent)(this._delegate,we)}_addOrOverwriteComponent(we){(0,N._addOrOverwriteComponent)(this._delegate,we)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const oe=new c.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),W=function Ee(){const qe=function pe(qe){const we={},Ae={__esModule:!0,initializeApp:function Le(re,_e={}){const Te=N.initializeApp(re,_e);if((0,c.r3)(we,Te.name))return we[Te.name];const J=new qe(Te,Ae);return we[Te.name]=J,J},app:We,registerVersion:N.registerVersion,setLogLevel:N.setLogLevel,onLog:N.onLog,apps:null,SDK_VERSION:N.SDK_VERSION,INTERNAL:{registerComponent:function Me(re){const _e=re.name,Te=_e.replace("-compat","");if(N._registerComponent(re)&&"PUBLIC"===re.type){const J=(se=We())=>{if("function"!=typeof se[Te])throw oe.create("invalid-app-argument",{appName:_e});return se[Te]()};void 0!==re.serviceProps&&(0,c.ZB)(J,re.serviceProps),Ae[Te]=J,qe.prototype[Te]=function(...se){return this._getService.bind(this,_e).apply(this,re.multipleInstances?se:[])}}return"PUBLIC"===re.type?Ae[Te]:null},removeApp:function Ke(re){delete we[re]},useAsService:function Je(re,_e){return"serverAuth"===_e?null:_e},modularAPIs:N}};function We(re){if(!(0,c.r3)(we,re=re||N._DEFAULT_ENTRY_NAME))throw oe.create("no-app",{appName:re});return we[re]}return Ae.default=Ae,Object.defineProperty(Ae,"apps",{get:function Pe(){return Object.keys(we).map(re=>we[re])}}),We.App=qe,Ae}(fe);return qe.INTERNAL=Object.assign(Object.assign({},qe.INTERNAL),{createFirebaseNamespace:Ee,extendNamespace:function we(Ae){(0,c.ZB)(qe,Ae)},createSubscribe:c.ne,ErrorFactory:c.LL,deepExtend:c.ZB}),qe}(),q=new de.Yd("@firebase/app-compat");if((0,c.jU)()&&void 0!==self.firebase){q.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const qe=self.firebase.SDK_VERSION;qe&&qe.indexOf("LITE")>=0&&q.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ve=W;!function Fe(qe){(0,N.registerVersion)("@firebase/app-compat","0.1.28",qe)}()},9681:(ut,Se,L)=>{L.r(Se),L.d(Se,{FirebaseError:()=>de.ZR,SDK_VERSION:()=>Fr,_DEFAULT_ENTRY_NAME:()=>Yt,_addComponent:()=>In,_addOrOverwriteComponent:()=>fn,_apps:()=>Tn,_clearComponents:()=>as,_components:()=>ti,_getProvider:()=>un,_registerComponent:()=>Zt,_removeServiceInstance:()=>zn,deleteApp:()=>Ct,getApp:()=>ni,getApps:()=>Cs,initializeApp:()=>ls,onLog:()=>pn,registerVersion:()=>jn,setLogLevel:()=>Yi});var c=L(5861),G=L(4859),N=L(1877),de=L(2090),fe=L(8766);class Ce{constructor(H){this.container=H}getPlatformInfoString(){return this.container.getProviders().map(xe=>{if(function oe(te){const H=te.getComponent();return"VERSION"===(null==H?void 0:H.type)}(xe)){const Ge=xe.getImmediate();return`${Ge.library}/${Ge.version}`}return null}).filter(xe=>xe).join(" ")}}const pe="@firebase/app",W=new N.Yd("@firebase/app"),Yt="[DEFAULT]",st={[pe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Tn=new Map,ti=new Map;function In(te,H){try{te.container.addComponent(H)}catch(xe){W.debug(`Component ${H.name} failed to register with FirebaseApp ${te.name}`,xe)}}function fn(te,H){te.container.addOrOverwriteComponent(H)}function Zt(te){const H=te.name;if(ti.has(H))return W.debug(`There were multiple attempts to register component ${H}.`),!1;ti.set(H,te);for(const xe of Tn.values())In(xe,te);return!0}function un(te,H){const xe=te.container.getProvider("heartbeat").getImmediate({optional:!0});return xe&&xe.triggerHeartbeat(),te.container.getProvider(H)}function zn(te,H,xe=Yt){un(te,H).clearInstance(xe)}function as(){ti.clear()}const Kn=new de.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class ws{constructor(H,xe,Ge){this._isDeleted=!1,this._options=Object.assign({},H),this._config=Object.assign({},xe),this._name=xe.name,this._automaticDataCollectionEnabled=xe.automaticDataCollectionEnabled,this._container=Ge,this.container.addComponent(new G.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(H){this.checkDestroyed(),this._automaticDataCollectionEnabled=H}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(H){this._isDeleted=H}checkDestroyed(){if(this.isDeleted)throw Kn.create("app-deleted",{appName:this._name})}}const Fr="9.8.4";function ls(te,H={}){"object"!=typeof H&&(H={name:H});const xe=Object.assign({name:Yt,automaticDataCollectionEnabled:!1},H),Ge=xe.name;if("string"!=typeof Ge||!Ge)throw Kn.create("bad-app-name",{appName:String(Ge)});const dt=Tn.get(Ge);if(dt){if((0,de.vZ)(te,dt.options)&&(0,de.vZ)(xe,dt.config))return dt;throw Kn.create("duplicate-app",{appName:Ge})}const Ut=new G.H0(Ge);for(const kn of ti.values())Ut.addComponent(kn);const cn=new ws(te,xe,Ut);return Tn.set(Ge,cn),cn}function ni(te=Yt){const H=Tn.get(te);if(!H)throw Kn.create("no-app",{appName:te});return H}function Cs(){return Array.from(Tn.values())}function Ct(te){return cr.apply(this,arguments)}function cr(){return(cr=(0,c.Z)(function*(te){const H=te.name;Tn.has(H)&&(Tn.delete(H),yield Promise.all(te.container.getProviders().map(xe=>xe.delete())),te.isDeleted=!0)})).apply(this,arguments)}function jn(te,H,xe){var Ge;let dt=null!==(Ge=st[te])&&void 0!==Ge?Ge:te;xe&&(dt+=`-${xe}`);const Ut=dt.match(/\s|\//),cn=H.match(/\s|\//);if(Ut||cn){const kn=[`Unable to register library "${dt}" with version "${H}":`];return Ut&&kn.push(`library name "${dt}" contains illegal characters (whitespace or "/")`),Ut&&cn&&kn.push("and"),cn&&kn.push(`version name "${H}" contains illegal characters (whitespace or "/")`),void W.warn(kn.join(" "))}Zt(new G.wA(`${dt}-version`,()=>({library:dt,version:H}),"VERSION"))}function pn(te,H){if(null!==te&&"function"!=typeof te)throw Kn.create("invalid-log-argument");(0,N.Am)(te,H)}function Yi(te){(0,N.Ub)(te)}const Gn="firebase-heartbeat-store";let Ai=null;function zs(){return Ai||(Ai=(0,fe.X3)("firebase-heartbeat-database",1,{upgrade:(te,H)=>{0===H&&te.createObjectStore(Gn)}}).catch(te=>{throw Kn.create("storage-open",{originalErrorMessage:te.message})})),Ai}function vt(){return(vt=(0,c.Z)(function*(te){var H;try{return(yield zs()).transaction(Gn).objectStore(Gn).get(Br(te))}catch(xe){throw Kn.create("storage-get",{originalErrorMessage:null===(H=xe)||void 0===H?void 0:H.message})}})).apply(this,arguments)}function ft(te,H){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,c.Z)(function*(te,H){var xe;try{const dt=(yield zs()).transaction(Gn,"readwrite");return yield dt.objectStore(Gn).put(H,Br(te)),dt.done}catch(Ge){throw Kn.create("storage-set",{originalErrorMessage:null===(xe=Ge)||void 0===xe?void 0:xe.message})}})).apply(this,arguments)}function Br(te){return`${te.name}!${te.options.appId}`}class ui{constructor(H){this.container=H,this._heartbeatsCache=null;const xe=this.container.getProvider("app").getImmediate();this._storage=new K(xe),this._heartbeatsCachePromise=this._storage.read().then(Ge=>(this._heartbeatsCache=Ge,Ge))}triggerHeartbeat(){var H=this;return(0,c.Z)(function*(){const Ge=H.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),dt=An();if(null===H._heartbeatsCache&&(H._heartbeatsCache=yield H._heartbeatsCachePromise),H._heartbeatsCache.lastSentHeartbeatDate!==dt&&!H._heartbeatsCache.heartbeats.some(Ut=>Ut.date===dt))return H._heartbeatsCache.heartbeats.push({date:dt,agent:Ge}),H._heartbeatsCache.heartbeats=H._heartbeatsCache.heartbeats.filter(Ut=>{const cn=new Date(Ut.date).valueOf();return Date.now()-cn<=2592e6}),H._storage.overwrite(H._heartbeatsCache)})()}getHeartbeatsHeader(){var H=this;return(0,c.Z)(function*(){if(null===H._heartbeatsCache&&(yield H._heartbeatsCachePromise),null===H._heartbeatsCache||0===H._heartbeatsCache.heartbeats.length)return"";const xe=An(),{heartbeatsToSend:Ge,unsentEntries:dt}=function yt(te,H=1024){const xe=[];let Ge=te.slice();for(const dt of te){const Ut=xe.find(cn=>cn.agent===dt.agent);if(Ut){if(Ut.dates.push(dt.date),z(xe)>H){Ut.dates.pop();break}}else if(xe.push({agent:dt.agent,dates:[dt.date]}),z(xe)>H){xe.pop();break}Ge=Ge.slice(1)}return{heartbeatsToSend:xe,unsentEntries:Ge}}(H._heartbeatsCache.heartbeats),Ut=(0,de.L)(JSON.stringify({version:2,heartbeats:Ge}));return H._heartbeatsCache.lastSentHeartbeatDate=xe,dt.length>0?(H._heartbeatsCache.heartbeats=dt,yield H._storage.overwrite(H._heartbeatsCache)):(H._heartbeatsCache.heartbeats=[],H._storage.overwrite(H._heartbeatsCache)),Ut})()}}function An(){return(new Date).toISOString().substring(0,10)}class K{constructor(H){this.app=H,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,c.Z)(function*(){return!!(0,de.hl)()&&(0,de.eu)().then(()=>!0).catch(()=>!1)})()}read(){var H=this;return(0,c.Z)(function*(){return(yield H._canUseIndexedDBPromise)&&(yield function Jt(te){return vt.apply(this,arguments)}(H.app))||{heartbeats:[]}})()}overwrite(H){var xe=this;return(0,c.Z)(function*(){var Ge;if(yield xe._canUseIndexedDBPromise){const Ut=yield xe.read();return ft(xe.app,{lastSentHeartbeatDate:null!==(Ge=H.lastSentHeartbeatDate)&&void 0!==Ge?Ge:Ut.lastSentHeartbeatDate,heartbeats:H.heartbeats})}})()}add(H){var xe=this;return(0,c.Z)(function*(){var Ge;if(yield xe._canUseIndexedDBPromise){const Ut=yield xe.read();return ft(xe.app,{lastSentHeartbeatDate:null!==(Ge=H.lastSentHeartbeatDate)&&void 0!==Ge?Ge:Ut.lastSentHeartbeatDate,heartbeats:[...Ut.heartbeats,...H.heartbeats]})}})()}}function z(te){return(0,de.L)(JSON.stringify({version:2,heartbeats:te})).length}!function ee(te){Zt(new G.wA("platform-logger",H=>new Ce(H),"PRIVATE")),Zt(new G.wA("heartbeat",H=>new ui(H),"PRIVATE")),jn(pe,"0.7.27",te),jn(pe,"0.7.27","esm2017"),jn("fire-js","")}("")},4859:(ut,Se,L)=>{L.d(Se,{wA:()=>N,H0:()=>pe,zt:()=>fe});var c=L(5861),G=L(2090);class N{constructor(W,q,ae){this.name=W,this.instanceFactory=q,this.type=ae,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(W){return this.instantiationMode=W,this}setMultipleInstances(W){return this.multipleInstances=W,this}setServiceProps(W){return this.serviceProps=W,this}setInstanceCreatedCallback(W){return this.onInstanceCreated=W,this}}const de="[DEFAULT]";class fe{constructor(W,q){this.name=W,this.container=q,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(W){const q=this.normalizeInstanceIdentifier(W);if(!this.instancesDeferred.has(q)){const ae=new G.BH;if(this.instancesDeferred.set(q,ae),this.isInitialized(q)||this.shouldAutoInitialize())try{const Xe=this.getOrInitializeService({instanceIdentifier:q});Xe&&ae.resolve(Xe)}catch(Xe){}}return this.instancesDeferred.get(q).promise}getImmediate(W){var q;const ae=this.normalizeInstanceIdentifier(null==W?void 0:W.identifier),Xe=null!==(q=null==W?void 0:W.optional)&&void 0!==q&&q;if(!this.isInitialized(ae)&&!this.shouldAutoInitialize()){if(Xe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ae})}catch(Fe){if(Xe)return null;throw Fe}}getComponent(){return this.component}setComponent(W){if(W.name!==this.name)throw Error(`Mismatching Component ${W.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=W,this.shouldAutoInitialize()){if(function oe(Ee){return"EAGER"===Ee.instantiationMode}(W))try{this.getOrInitializeService({instanceIdentifier:de})}catch(q){}for(const[q,ae]of this.instancesDeferred.entries()){const Xe=this.normalizeInstanceIdentifier(q);try{const Fe=this.getOrInitializeService({instanceIdentifier:Xe});ae.resolve(Fe)}catch(Fe){}}}}clearInstance(W=de){this.instancesDeferred.delete(W),this.instancesOptions.delete(W),this.instances.delete(W)}delete(){var W=this;return(0,c.Z)(function*(){const q=Array.from(W.instances.values());yield Promise.all([...q.filter(ae=>"INTERNAL"in ae).map(ae=>ae.INTERNAL.delete()),...q.filter(ae=>"_delete"in ae).map(ae=>ae._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(W=de){return this.instances.has(W)}getOptions(W=de){return this.instancesOptions.get(W)||{}}initialize(W={}){const{options:q={}}=W,ae=this.normalizeInstanceIdentifier(W.instanceIdentifier);if(this.isInitialized(ae))throw Error(`${this.name}(${ae}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Xe=this.getOrInitializeService({instanceIdentifier:ae,options:q});for(const[Fe,Ve]of this.instancesDeferred.entries())ae===this.normalizeInstanceIdentifier(Fe)&&Ve.resolve(Xe);return Xe}onInit(W,q){var ae;const Xe=this.normalizeInstanceIdentifier(q),Fe=null!==(ae=this.onInitCallbacks.get(Xe))&&void 0!==ae?ae:new Set;Fe.add(W),this.onInitCallbacks.set(Xe,Fe);const Ve=this.instances.get(Xe);return Ve&&W(Ve,Xe),()=>{Fe.delete(W)}}invokeOnInitCallbacks(W,q){const ae=this.onInitCallbacks.get(q);if(ae)for(const Xe of ae)try{Xe(W,q)}catch(Fe){}}getOrInitializeService({instanceIdentifier:W,options:q={}}){let ae=this.instances.get(W);if(!ae&&this.component&&(ae=this.component.instanceFactory(this.container,{instanceIdentifier:(Ee=W,Ee===de?void 0:Ee),options:q}),this.instances.set(W,ae),this.instancesOptions.set(W,q),this.invokeOnInitCallbacks(ae,W),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,W,ae)}catch(Xe){}var Ee;return ae||null}normalizeInstanceIdentifier(W=de){return this.component?this.component.multipleInstances?W:de:W}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class pe{constructor(W){this.name=W,this.providers=new Map}addComponent(W){const q=this.getProvider(W.name);if(q.isComponentSet())throw new Error(`Component ${W.name} has already been registered with ${this.name}`);q.setComponent(W)}addOrOverwriteComponent(W){this.getProvider(W.name).isComponentSet()&&this.providers.delete(W.name),this.addComponent(W)}getProvider(W){if(this.providers.has(W))return this.providers.get(W);const q=new fe(W,this);return this.providers.set(W,q),q}getProviders(){return Array.from(this.providers.values())}}},1877:(ut,Se,L)=>{L.d(Se,{in:()=>G,Yd:()=>oe,Ub:()=>pe,Am:()=>Ee});const c=[];var G=(()=>{return(W=G||(G={}))[W.DEBUG=0]="DEBUG",W[W.VERBOSE=1]="VERBOSE",W[W.INFO=2]="INFO",W[W.WARN=3]="WARN",W[W.ERROR=4]="ERROR",W[W.SILENT=5]="SILENT",G;var W})();const N={debug:G.DEBUG,verbose:G.VERBOSE,info:G.INFO,warn:G.WARN,error:G.ERROR,silent:G.SILENT},de=G.INFO,fe={[G.DEBUG]:"log",[G.VERBOSE]:"log",[G.INFO]:"info",[G.WARN]:"warn",[G.ERROR]:"error"},Ce=(W,q,...ae)=>{if(q<W.logLevel)return;const Xe=(new Date).toISOString(),Fe=fe[q];if(!Fe)throw new Error(`Attempted to log a message with an invalid logType (value: ${q})`);console[Fe](`[${Xe}]  ${W.name}:`,...ae)};class oe{constructor(q){this.name=q,this._logLevel=de,this._logHandler=Ce,this._userLogHandler=null,c.push(this)}get logLevel(){return this._logLevel}set logLevel(q){if(!(q in G))throw new TypeError(`Invalid value "${q}" assigned to \`logLevel\``);this._logLevel=q}setLogLevel(q){this._logLevel="string"==typeof q?N[q]:q}get logHandler(){return this._logHandler}set logHandler(q){if("function"!=typeof q)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=q}get userLogHandler(){return this._userLogHandler}set userLogHandler(q){this._userLogHandler=q}debug(...q){this._userLogHandler&&this._userLogHandler(this,G.DEBUG,...q),this._logHandler(this,G.DEBUG,...q)}log(...q){this._userLogHandler&&this._userLogHandler(this,G.VERBOSE,...q),this._logHandler(this,G.VERBOSE,...q)}info(...q){this._userLogHandler&&this._userLogHandler(this,G.INFO,...q),this._logHandler(this,G.INFO,...q)}warn(...q){this._userLogHandler&&this._userLogHandler(this,G.WARN,...q),this._logHandler(this,G.WARN,...q)}error(...q){this._userLogHandler&&this._userLogHandler(this,G.ERROR,...q),this._logHandler(this,G.ERROR,...q)}}function pe(W){c.forEach(q=>{q.setLogLevel(W)})}function Ee(W,q){for(const ae of c){let Xe=null;q&&q.level&&(Xe=N[q.level]),ae.userLogHandler=null===W?null:(Fe,Ve,...qe)=>{const we=qe.map(Ae=>{if(null==Ae)return null;if("string"==typeof Ae)return Ae;if("number"==typeof Ae||"boolean"==typeof Ae)return Ae.toString();if(Ae instanceof Error)return Ae.message;try{return JSON.stringify(Ae)}catch(Ke){return null}}).filter(Ae=>Ae).join(" ");Ve>=(null!=Xe?Xe:Fe.logLevel)&&W({level:G[Ve].toLowerCase(),message:we,args:qe,type:Fe.name})}}}},8766:(ut,Se,L)=>{L.d(Se,{Lj:()=>Le,X3:()=>We});var c=L(5861);let N,de;const oe=new WeakMap,pe=new WeakMap,Ee=new WeakMap,W=new WeakMap,q=new WeakMap;let Fe={get(_e,Te,J){if(_e instanceof IDBTransaction){if("done"===Te)return pe.get(_e);if("objectStoreNames"===Te)return _e.objectStoreNames||Ee.get(_e);if("store"===Te)return J.objectStoreNames[1]?void 0:J.objectStore(J.objectStoreNames[0])}return Ae(_e[Te])},set:(_e,Te,J)=>(_e[Te]=J,!0),has:(_e,Te)=>_e instanceof IDBTransaction&&("done"===Te||"store"===Te)||Te in _e};function we(_e){return"function"==typeof _e?function qe(_e){return _e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ce(){return de||(de=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(_e)?function(...Te){return _e.apply(Ke(this),Te),Ae(oe.get(this))}:function(...Te){return Ae(_e.apply(Ke(this),Te))}:function(Te,...J){const se=_e.call(Ke(this),Te,...J);return Ee.set(se,Te.sort?Te.sort():[Te]),Ae(se)}}(_e):(_e instanceof IDBTransaction&&function Xe(_e){if(pe.has(_e))return;const Te=new Promise((J,se)=>{const ue=()=>{_e.removeEventListener("complete",De),_e.removeEventListener("error",me),_e.removeEventListener("abort",me)},De=()=>{J(),ue()},me=()=>{se(_e.error||new DOMException("AbortError","AbortError")),ue()};_e.addEventListener("complete",De),_e.addEventListener("error",me),_e.addEventListener("abort",me)});pe.set(_e,Te)}(_e),((_e,Te)=>Te.some(J=>_e instanceof J))(_e,function fe(){return N||(N=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(_e,Fe):_e)}function Ae(_e){if(_e instanceof IDBRequest)return function ae(_e){const Te=new Promise((J,se)=>{const ue=()=>{_e.removeEventListener("success",De),_e.removeEventListener("error",me)},De=()=>{J(Ae(_e.result)),ue()},me=()=>{se(_e.error),ue()};_e.addEventListener("success",De),_e.addEventListener("error",me)});return Te.then(J=>{J instanceof IDBCursor&&oe.set(J,_e)}).catch(()=>{}),q.set(Te,_e),Te}(_e);if(W.has(_e))return W.get(_e);const Te=we(_e);return Te!==_e&&(W.set(_e,Te),q.set(Te,_e)),Te}const Ke=_e=>q.get(_e);function We(_e,Te,{blocked:J,upgrade:se,blocking:ue,terminated:De}={}){const me=indexedDB.open(_e,Te),He=Ae(me);return se&&me.addEventListener("upgradeneeded",wt=>{se(Ae(me.result),wt.oldVersion,wt.newVersion,Ae(me.transaction))}),J&&me.addEventListener("blocked",()=>J()),He.then(wt=>{De&&wt.addEventListener("close",()=>De()),ue&&wt.addEventListener("versionchange",()=>ue())}).catch(()=>{}),He}function Le(_e,{blocked:Te}={}){const J=indexedDB.deleteDatabase(_e);return Te&&J.addEventListener("blocked",()=>Te()),Ae(J).then(()=>{})}const Pe=["get","getKey","getAll","getAllKeys","count"],Me=["put","add","delete","clear"],Je=new Map;function re(_e,Te){if(!(_e instanceof IDBDatabase)||Te in _e||"string"!=typeof Te)return;if(Je.get(Te))return Je.get(Te);const J=Te.replace(/FromIndex$/,""),se=Te!==J,ue=Me.includes(J);if(!(J in(se?IDBIndex:IDBObjectStore).prototype)||!ue&&!Pe.includes(J))return;const De=function(){var me=(0,c.Z)(function*(He,...wt){const ln=this.transaction(He,ue?"readwrite":"readonly");let Yt=ln.store;return se&&(Yt=Yt.index(wt.shift())),(yield Promise.all([Yt[J](...wt),ue&&ln.done]))[0]});return function(wt){return me.apply(this,arguments)}}();return Je.set(Te,De),De}!function Ve(_e){Fe=_e(Fe)}(_e=>XG(QG({},_e),{get:(Te,J,se)=>re(Te,J)||_e.get(Te,J,se),has:(Te,J)=>!!re(Te,J)||_e.has(Te,J)}))},5861:(ut,Se,L)=>{function c(N,de,fe,Ce,oe,pe,Ee){try{var W=N[pe](Ee),q=W.value}catch(ae){return void fe(ae)}W.done?de(q):Promise.resolve(q).then(Ce,oe)}function G(N){return function(){var de=this,fe=arguments;return new Promise(function(Ce,oe){var pe=N.apply(de,fe);function Ee(q){c(pe,Ce,oe,Ee,W,"next",q)}function W(q){c(pe,Ce,oe,Ee,W,"throw",q)}Ee(void 0)})}}L.d(Se,{Z:()=>G})}},ut=>{ut(ut.s=9121)}]);